function t(t){return t&&t.__esModule?t.default:t}function e(t,e,i,r){Object.defineProperty(t,e,{get:i,set:r,enumerable:!0,configurable:!0})}var i=globalThis,r={},o={},n=i.parcelRequire8969;null==n&&((n=function(t){if(t in r)return r[t].exports;if(t in o){var e=o[t];delete o[t];var i={id:t,exports:{}};return r[t]=i,e.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+t+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(t,e){o[t]=e},i.parcelRequire8969=n);var a=n.register;a("cvawf",function(i,r){let o;e(i.exports,"default",()=>tc),n("jLXCT"),n("kbFhP");var a=n("bo74g"),s=n("2iBkg"),l=n("l956U"),h=n("fnScq"),u=n("gbCDL"),c=n("4QhZh");n("eXEIX");var f=n("8y1NC"),d=n("cC9va"),p=n("3SDrW"),g=n("lyDcb"),m=n("bkg8x"),y=n("aIaid"),x=n("6yoor"),v=n("btuox"),b=n("jZquI"),w=n("1NiL5"),_=n("fkmMz"),S=n("6cpWg"),E=n("93mJv"),A=n("945U7"),N=n("jHzwa"),I=n("jEzQ5"),M=n("6od7S"),P=n("3cHIk"),C=n("loIjs"),T=n("d1ltq"),L=n("6e1MB"),R=n("4k2SX"),O=n("iQyfo"),k=n("e9bRc"),G=n("dbRSi"),Z=n("bS8Lk"),F=n("lUmQH"),D=n("5VeMq"),j=n("17jqf"),q=n("6yJ0x"),U=n("lbwk5"),B=n("rnKfx"),z=n("3HxCM"),H=n("iArnh"),V=n("dxNAB"),Y=n("cWXYt");n("bqoF2");var W=n("gIJof"),X=n("2Fada"),K=n("31ZqB"),J=n("cHblF"),$=n("gzr8q");n("9BdHO");var Q=n("8TdmW"),tt=n("76Eer"),te=n("66krt"),ti=n("jSBAJ"),tr=n("kOWwI"),to=n("jPVWI");n("ofMCX");var tn=n("iGyOD"),ta=n("hvEnP"),ts=n("29SgV");(0,W.default)(),window.addEventListener("moveTo",t=>{if(o)try{let e=(0,$.fromLonLat)([t.detail[0],t.detail[1]]);o.map.getView().setCenter(e),t.detail[2]&&o.map.getView().setZoom(t.detail[2])}catch(t){}}),window.addEventListener("flyTo",t=>{if(o)try{let e=(0,$.fromLonLat)([t.detail[0],t.detail[1]]);o.map.getView().flyTo({center:e,zoom:t.detail[2]})}catch(t){}});let tl=`<label>Login de l'espace collaboratif</label>
<input type="text" class="login" />
<label>Mot de passe</label>
<input type="password" class="pwd" />
<i class="error">Impossible de se connecter...</i>`,th=new M.default({closeOnSubmit:!1,closeBox:!0,target:document.body});th.setMap(tr.default);class tu extends h.default{constructor(t){let e;for(let i in super(t=t||{}),o=this,this.map=new u.default({target:t.target,view:new c.default({center:[0,0],zoom:0}),controls:(0,f.defaults)({attribution:!1,zoom:!1}),interactions:(0,d.defaults)({mouseWheelZoom:!1})}),this.set("key",t.key),this.layerId_=0,this.map.getLayers().on("add",t=>{let e=t.element;e.get("id")?this.layerId_=Math.max(this.layerId_,e.get("id")):t.element.set("id",++this.layerId_)}),this.map.getLayers().on("add",t=>{"ECo"!==t.element.get("type")||(0,ti.getAuth)()||(e&&clearTimeout(e),e=setTimeout(()=>{this.authenticate()}))}),this.map.addInteraction(new x.default({condition:t=>!this.map.get("noMouseWheel")||"wheel"!==t.type||!!(0,v.platformModifierKeyOnly)(t)||(this.notification((0,R.default)("ctrlZoom")),!1)})),this._styleOptions={type:"zoom",points:!0},this.getMap().on("singleclick",t=>{if(!this.getSelect().getActive())return;let e=[],i=this.getMap().getFeaturesAtPixel(t.pixel,{hitTolerance:3});if(i[0]instanceof ts.default){let e=i[0];if(e.getLayer().selectable()){let i=e.getProperties();i.geometry=new ta.default([t.coordinate,t.coordinate]);let r=new tn.default(i);r.setLayer(e.getLayer()),this.dispatchEvent({type:"layer:featureInfo",coordinate:t.coordinate,layer:r.getLayer(),feature:r});return}}i.forEach(t=>{t.getLayer()&&e.push(t.getLayer())});let r=this.getMap().getLayers().getArray();for(let i=r.length-1;i>=0;i--){let o=r[i];if((o instanceof to.default||o instanceof w.default)&&e.indexOf(o)>=0)return;if(o.getData){let e=o.getData(t.pixel);if(o.getSource().getFeatureInfo&&e&&e[3]){let e=o.getPopupContent();if(!e||!e.titre&&!e.desc&&!e.img&&!e.coord)return;o.getSource().getFeatureInfo(t.coordinate,this.getMap().getView().getResolution(),{INFO_FORMAT:"application/json",callback:e=>{if(JSON.parse(e).features.length){let i=JSON.parse(e).features[0].properties;i.geometry=new ta.default([t.coordinate,t.coordinate]);let r=new tn.default(i);r.setLayer(o),this.dispatchEvent({type:"layer:featureInfo",coordinate:t.coordinate,layer:o,feature:r})}else this.dispatchEvent({type:"layer:featureInfo",coordinate:t.coordinate})}});break}}}}),this._interactions={select:new m.default({layers:t=>!!t.selectable&&t.selectable(),hitTolerance:3,condition:v.click,style:(0,Y.getSelectStyleFn)(this._styleOptions)}),hover:new q.default({layerFilter:t=>t.selectable&&t.selectable(),hitTolerance:3,cursor:"pointer"}),synchro:new y.default({active:!1})},this._interactions)this.map.addInteraction(this._interactions[i]);for(let e in this._styleOptions.features=this.getSelect().getFeatures(),this._controls={toolbar:new S.default({className:"edit"}),ctrlbar:new S.default({className:"ol-ctrlbar ol-left ol-top"}),zoom:new L.default,scaleLine:new A.default({canvas:!0}),attribution:new E.default({canvas:!0}),mousePosition:new C.default({className:"ol-control ol-mouse-position",undefinedHTML:" "}),title:new k.default({visible:!1}),layerSwitcher:(0,F.default)(),profil:new tt.default({map:this.getMap(),select:this.getSelect()}),printDlg:new P.default({lang:"fr",title:(0,R.default)("printLabel"),saveAs:H.saveAs,jsPDF:V.jsPDF}),legend:new B.default({title:(0,R.default)("legend"),legend:new z.default({title:(0,R.default)("legend"),size:[28,20],margin:6,style:(0,Y.getStyleFn)()})}),searchBar:new N.default({apiKey:t.key,title:(0,R.default)("searchLabel"),zoomOnSelect:14}),permalink:new I.default({urlReplace:!1,visible:!0,geohash:!0,onclick:this.dialogInfo.bind(this)}),locate:new G.default({minZoom:16}),dialog:new M.default({className:"mapInfo",closeBox:!0,target:document.body}),notification:Z.default},this.map.removeControl(this._controls.zoom),this._controls)this.map.addControl(this._controls[e]);this._interactions.select.on("change:active",()=>{this._interactions.hover.setActive(this._interactions.select.getActive())}),this._controls.ctrlbar.addControl(this._controls.zoom),this._controls.zoom.set("bar",!0),this._controls.ctrlbar.addControl(this._controls.profil),this._controls.profil.set("bar",!0),this._controls.ctrlbar.addControl(this._controls.printDlg),this._controls.printDlg.set("bar",!0),this._controls.printDlg.on(["show","hide"],(function(t){this.getSelect().getFeatures().clear(),this.popup.hide(),this.getSelect().setActive("hide"===t.type)}).bind(this)),this._controls.ctrlbar.addControl(this._controls.locate),this._controls.locate.set("bar",!0),this.showControl("toolbar",!1),this.popup=new D.default({closeBox:!0,minibar:!0}),this.map.addOverlay(this.popup),this.popup.on("show",()=>this.popup.content.scrollTop=0),this.popover=new D.default({className:"tooltips popuphover",positioning:"center-left",stopEvent:!1}),this.map.addOverlay(this.popover),this.tooltip=new j.default,this.map.addOverlay(this.tooltip),this._symbolLib=new K.default,t.url?this.read(t.url):t.id&&this.load(t.id)}}tu.prototype.getMap=function(){return this.map},tu.prototype.getSelect=function(){return this._interactions.select},tu.prototype.getInteraction=function(t){return this._interactions[t]},tu.prototype.setSelectStyle=function(t){for(let e in t)this._styleOptions[e]=t[e]},tu.prototype.setReady=function(){this.getMap().getViewport().classList.add("ol-ready")},tu.prototype.getDialog=function(){return this.getControl("dialog")},tu.prototype.dialogInfo=function(){let e=(0,O.default).create("DIV",{className:"carte-info-dialog"});this._story||(0,O.default).create("H1",{html:this.map.get("title"),parent:e}),(0,O.default).create("DIV",{className:"description",html:this._story?(0,l.default).element(this._story.get("description")):this.map.get("description"),parent:e}),(0,O.default).create("UL",{html:this.getControl("attribution").element.querySelector("ul").innerHTML,parent:e});let i=(0,O.default).create("DIV",{className:"permalink",parent:e});(0,O.default).create("IMG",{className:"qrcode",src:t(te).generatePNG(this.getControl("permalink").getLink(),{ecclevel:"L",margin:0}),parent:i}),(0,O.default).create("P",{html:(0,R.default)("permalink_open"),parent:i});let r=(0,O.default).create("SPAN",{html:(0,R.default)("copy_info"),className:"copy-info",parent:i});(0,O.default).create("DIV",{click:()=>{try{navigator.clipboard.writeText(this.getControl("permalink").getLink()),r.className="copy-info visible",setTimeout(()=>{r.className="copy-info"},800)}catch(t){}},target:"_blank",parent:i}).innerText=this.getControl("permalink").getLink();let o=(0,O.default).create("DIV",{className:"cgu",html:(0,R.default)("macarte_link").replace("{SERVER}",a.default.server).replace("{APPNAME}",(0,a.default).server.replace(/http.?:|\//g,""))+"<br/>"+(0,R.default)("cgu_link").replace("{URL}",s.default.cgu)+"<br/>",parent:e}),n=(0,X.default).getMe()||{};(0,Q.default)({href:s.default.signal,service:"viewer",title:(0,R.default)("report_link"),mapID:this.get("id"),user:n.username,userID:n.id,email:n.email},o),this.getDialog().show({content:e,buttons:{ok:"ok"}})},tu.prototype.getControl=function(t){return this._controls[t]},tu.prototype.getTitle=function(){return this.get("atlas")?this.get("atlas").title||"macarte":this.get("title")||"macarte"},tu.prototype.getToolbar=function(){return this.getControl("toolbar")},tu.prototype.hasControl=function(t){let e="string"==typeof t?this.getControl(t):t;return!!e&&(e.get("bar")?""===e.element.style.display:!!e.getMap())},tu.prototype.showControl=function(t,e){let i="string"==typeof t?this.getControl(t):t;if(i){if(i.setActive&&i.setActive(!1),!1!==e){if(i.get("bar"))i.element.style.display="";else try{this.map.addControl(i)}catch(t){}}else if(i.get("bar"))i.element.style.display="none";else try{this.map.removeControl(i)}catch(t){}"mousePosition"===t&&e&&(!0===e&&(e={proj:"EPSG:4326",unit:"dms"}),e.proj&&i.setProjection(e.proj),e.unit&&i.setCoordinateFormat(t=>/4326/.test(i.getProjection().getCode())?/dms|ds/.test(i.get("unit"))?"&nbsp;"+(0,T.toStringHDMS)(t).replace(/ /g,"").replace("W","O").replace("N","N - ").replace("S","S - ")+"&nbsp;":(0,T.format)(t,"&nbsp;lon: {x}, lat: {y}&nbsp;",6):(0,T.format)(t,"&nbsp;{x}, {y}&nbsp;",2)))}else"rotation"===t&&this.getMap().getInteractions().forEach(t=>{(t instanceof p.default||t instanceof g.default)&&t.setActive(e)});this.changed()},tu.prototype.read=function(t,e){if("string"==typeof t){(0,_.default).get({url:t,success:t=>this.read(t,e),error:t=>{this.dispatchEvent(t)}});return}this.dispatchEvent({type:"read:start"}),this.set("atlas",e||{}),(new U.default).read(this,t),this._controls.title.setTitle(this.map.get("title")),this.setReady(),this.dispatchEvent({type:"read"})},tu.prototype.load=function(t){this.dispatchEvent({type:"loading"});let e="string"==typeof t?t:t.view_id;(0,X.default).getMapFile(e,i=>{i.error?(i.type="error",this.dispatchEvent(i)):(this.set("id",e),this.read(i,"string"==typeof t?null:t))})},tu.prototype.setParent=function(t){this._story=t},tu.prototype.notification=function(t,e){this.getControl("notification").show(t,e)},tu.prototype.popupFeature=function(t,e){if(t){if(e){let t=this.map.getView().getProjection().getExtent();if(e[0]>t[2]){let e=this.map.getView().getCenter();e[0]=e[0]-(t[2]-t[0]),this.map.getView().setCenter(e),this.map.renderSync()}else if(e[0]<t[1]){let e=this.map.getView().getCenter();e[0]=e[0]+(t[2]-t[0]),this.map.getView().setCenter(e),this.map.renderSync()}}t.showPopup(this.popup,e)}else this.popup.hide()},tu.prototype.setSelection=function(t,e){let i=this.getInteraction(e||"select");i.getFeatures().clear(),t&&i.getFeatures().push(t),i.dispatchEvent({type:"select",selected:t?[t]:[],unselected:[]})},tu.prototype.zoomToClusterExtent=function(t){let e=this.map.getView(),i=e.getZoom(),r=e.getCenter(),o=(0,b.createEmpty)();t.forEach(t=>{(0,b.extend)(o,t.getGeometry().getExtent())}),o=(0,b.buffer)(o,15*e.getResolution()),e.fit(o,{size:this.map.getSize()});let n=Math.min(18,t[0].getLayer().get("maxZoomCluster"));e.getZoom()>n&&(n>18?e.setZoom(18):(e.setZoom(i),e.setCenter(r),e.animate({center:(0,b.getCenter)(o),zoom:n+.1,duration:400})))},tu.prototype.getViewerUrl=function(t){return!!this.get("id")&&((t=Object.assign({},t||{})).view_id=this.get("id"),this.get("atlas")?t.title=this.get("atlas").title||"carte":t.title=this.get("title")||"carte",t.type="macarte",(0,s.getViewerURL)(t))},tu.prototype.getSymbolLib=function(t){if(!t)return this._symbolLib;if("number"==typeof t)return this._symbolLib.item(t);for(let e=0;e<this._symbolLib.getLength();e++)if(this._symbolLib.item(e).name===t)return this._symbolLib.item(e);return null},tu.prototype.addSymbolLib=function(t){let e=new J.default(t);return this._symbolLib.push(e),e},tu.prototype.write=function(t){return(new U.default).write(this,t)},tu.prototype.authenticate=function(t,e){if((0,ti.getAuth)())this.getMap().getLayers().forEach(t=>{"ECo"===t.get("type")&&t.getSource().setLoader()}),th.close(),this.dispatchEvent("authenticate"),t&&t();else{th.show({title:"Authentification nécessaire",className:"eco-login"+(e?" error-login":""),content:tl,buttons:{submit:"ok",cancel:"annuler"},onButton:(e,i)=>{"submit"===e&&(th.show({className:"wait",closeBox:!1,content:"chargement..."}),(0,ti.default).login(i.login.value,i.pwd.value,e=>{this.authenticate(t,e.error)}))}});let i=localStorage["MC@user"];i&&(th.getContentElement().querySelector(".login").value=i,setTimeout(()=>{th.getContentElement().querySelector(".pwd").focus()}))}};var tc=tu}),a("jLXCT",function(t,e){window.NodeList&&!NodeList.prototype.forEach&&(NodeList.prototype.forEach=function(t,e){e=e||window;for(var i=0;i<this.length;i++)t.call(e,this[i],i,this)})}),a("eXEIX",function(t,e){n("agkzb");var i=n("lwtpg"),r=n("5Revz"),o=n("8ln3M"),a=n("gvREW"),s=n("izcbS"),l=n("juLo9"),h=n("dEQmT"),u=n("2zf1Y");function c(t){if(t._mcFilter&&t.removeFilter(t._mcFilter),t.get("grayscale")||t.get("blendMode")){let e={};t.get("grayscale")&&(e.filter="grayscale(1)"),t.get("blendMode")&&(e.blend=t.get("blendMode")),t._mcFilter=new r.default(e),t.addFilter(t._mcFilter)}}let f=i.default.prototype.setProperties;i.default.prototype.setProperties=function(t){"ol-layer"===this.className_&&(this.className_=(0,o.default)()),f.call(this,t)},i.default.prototype.grayscale=function(t){this.set("grayscale",!!t),c(this)},i.default.prototype.setBlendMode=function(t){this.set("blendMode",t||"normal"),c(this)},i.default.prototype.setCrop=function(t){if(Array.isArray(t)){let e=t;for(let i in t={},e)t[i]=e[i]}if(this.getFilters().forEach(t=>{t instanceof a.default&&this.removeFilter(t)}),t&&t.coordinates){let e=new l.default(new h.default(t.coordinates));if(t.color&&t.color[3]){let i=new u.default({color:t.color});this.addFilter(new a.default({feature:e,wrapX:!0,inner:!1,shadowWidth:t.shadow?2:0,fill:i}))}else this.addFilter(new s.default({feature:e,wrapX:!0,inner:!1,shadowWidth:t.shadow?5:0}))}this.set("crop",t)},i.default.prototype.getCrop=function(){return this.get("crop")||{}},i.default.prototype.getPopupContent=function(){return this._popupContent||{}},i.default.prototype.setPopupContent=function(t){!t||t instanceof Array?this._popupContent={}:this._popupContent=t}}),a("agkzb",function(t,i){e(t.exports,"default",()=>h);var r=n("ejLRd"),o=n("lwtpg"),a=n("fnScq"),s=n("gbCDL"),l=class extends a.default{constructor(t){super(t),this._listener=[],t&&!1===t.active?this.set("active",!1):this.set("active",!0)}setActive(t){this.set("active",!0===t)}getActive(){return this.get("active")}};!function(){function t(t){this.get("active")&&t.context&&this.precompose(t)}function e(t){this.get("active")&&t.context&&this.postcompose(t)}function i(){if(this.renderSync)try{this.renderSync()}catch(t){}else this.changed()}function n(r){this.filters_||(this.filters_=[]),this.filters_.push(r),r.addToLayer&&r.addToLayer(this),r.precompose&&r._listener.push({listener:this.on(["precompose","prerender"],t.bind(r)),target:this}),r.postcompose&&r._listener.push({listener:this.on(["postcompose","postrender"],e.bind(r)),target:this}),r._listener.push({listener:r.on("propertychange",i.bind(this)),target:this}),i.call(this)}function a(t){var e;if(this.filters_||(this.filters_=[]),!t){this.filters_.forEach((function(t){this.removeFilter(t)}).bind(this));return}for(e=this.filters_.length-1;e>=0;e--)this.filters_[e]===t&&this.filters_.splice(e,1);for(e=t._listener.length-1;e>=0;e--)t._listener[e].target===this&&(t.removeFromLayer&&t.removeFromLayer(this),(0,r.unByKey)(t._listener[e].listener),t._listener.splice(e,1));i.call(this)}s.default.prototype.addFilter=function(t){console.warn("[OL-EXT] addFilter deprecated on map."),n.call(this,t)},s.default.prototype.removeFilter=function(t){a.call(this,t)},s.default.prototype.getFilters=function(){return this.filters_||[]},o.default.prototype.addFilter=function(t){n.call(this,t)},o.default.prototype.removeFilter=function(t){a.call(this,t)},o.default.prototype.getFilters=function(){return this.filters_||[]}}();var h=l}),a("5Revz",function(t,i){e(t.exports,"default",()=>o);var r=n("agkzb"),o=class extends r.default{constructor(t){super(t),this._layers=[]}setBlend(t){this.set("blend",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style["mix-blend-mode"]=t||""}).bind(this)),e.changed()})}setFilter(t){this.set("filter",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style.filter=t||""}).bind(this)),e.changed()})}setDisplay(t){this.set("display",t),this._layers.forEach(function(e){e.once("postrender",(function(e){e.context.canvas.parentNode.style.display=t?"":"none"}).bind(this)),e.changed()})}addToLayer(t){t.once("postrender",(function(t){t.context.canvas.parentNode.style["mix-blend-mode"]=this.get("blend")||"",t.context.canvas.parentNode.style.filter=this.get("filter")||"",t.context.canvas.parentNode.style.display=!1!==this.get("display")?"":"none"}).bind(this)),t.changed(),this._layers.push(t)}removeFromLayer(t){var e=this._layers.indexOf(t);e>=0&&(t.once("postrender",(function(t){t.context.canvas.parentNode.style["mix-blend-mode"]="",t.context.canvas.parentNode.style.filter="",t.context.canvas.parentNode.style.display=""}).bind(this)),t.changed(),this._layers.splice(e,1))}}}),a("8ln3M",function(t,i){e(t.exports,"default",()=>o);let r=0;function o(){return"mc_"+r++}}),a("gvREW",function(t,i){e(t.exports,"default",()=>a);var r=n("agkzb"),o=n("lqNjm"),a=class extends r.default{constructor(t){if(super(t=t||{}),t.feature)switch(t.feature.getGeometry().getType()){case"Polygon":case"MultiPolygon":this.feature_=t.feature}this.set("inner",t.inner),this._fillColor=t.fill&&(0,o.asString)(t.fill.getColor())||"rgba(0,0,0,0.2)",this._shadowColor=t.shadowColor&&(0,o.asString)(t.shadowColor)||"rgba(0,0,0,0.5)",this.set("shadowWidth",t.shadowWidth||0),this.set("shadowMapUnits",!0===t.shadowMapUnits)}setFillColor(t){this._fillColor=t&&(0,o.asString)(t)||"rgba(0,0,0,0.2)"}setShadowColor(t){this._shadowColor=t&&(0,o.asString)(t)||"rgba(0,0,0,0.5)"}drawFeaturePath_(t,e){var i,r=t.context,o=r.canvas,n=t.frameState.pixelRatio;if(t.frameState.coordinateToPixelTransform){var a=t.frameState.coordinateToPixelTransform;if(t.inversePixelTransform){var s=t.inversePixelTransform;i=function(t){return[(t=[t[0]*a[0]+t[1]*a[1]+a[4],t[0]*a[2]+t[1]*a[3]+a[5]])[0]*s[0]-t[1]*s[1]+s[4],-t[0]*s[2]+t[1]*s[3]+s[5]]}}else i=function(t){return[(t[0]*a[0]+t[1]*a[1]+a[4])*n,(t[0]*a[2]+t[1]*a[3]+a[5])*n]}}else a=t.frameState.coordinateToPixelMatrix,i=function(t){return[(t[0]*a[0]+t[1]*a[1]+a[12])*n,(t[0]*a[4]+t[1]*a[5]+a[13])*n]};var l=this.feature_.getGeometry().getCoordinates();function h(t){for(var e=0;e<l.length;e++)for(var o=l[e],n=0;n<o.length;n++){var a=i([o[n][0][0]+t,o[n][0][1]]);r.moveTo(a[0],a[1]);for(var s=1;s<o[n].length;s++)a=i([o[n][s][0]+t,o[n][s][1]]),r.lineTo(a[0],a[1])}}if("Polygon"===this.feature_.getGeometry().getType()&&(l=[l]),r.beginPath(),e&&(r.moveTo(-100,-100),r.lineTo(o.width+100,-100),r.lineTo(o.width+100,o.height+100),r.lineTo(-100,o.height+100),r.lineTo(-100,-100)),this.get("wrapX")){var u=t.frameState.viewState.projection.getExtent(),c=u[2]-u[0],f=t.frameState.extent,d=this.feature_.getGeometry().getExtent(),p=d[2]-d[1],g=Math.floor((f[0]-p-u[0])/c),m=Math.floor((f[2]+p-u[2])/c)+1;g>m&&([g,m]=[m,g]);for(var y=g;y<=m;y++)h(y*c)}else h(0)}postcompose(t){if(this.feature_){var e=t.context;if(e.save(),this.drawFeaturePath_(t,!this.get("inner")),e.fillStyle=this._fillColor,e.fill("evenodd"),this.get("shadowWidth")){var i=this.get("shadowWidth")*t.frameState.pixelRatio;this.get("shadowMapUnits")&&(i/=t.frameState.viewState.resolution),e.clip("evenodd"),e.filter="blur("+i+"px)",e.strokeStyle=this._shadowColor,e.lineCap="round",e.lineJoin="round",e.lineWidth=i,e.stroke()}e.restore()}}}}),a("izcbS",function(t,i){e(t.exports,"default",()=>o);var r=n("gvREW"),o=class extends r.default{constructor(t){super(t=t||{})}precompose(t){if(this.feature_){var e=t.context;e.save(),this.drawFeaturePath_(t,this.get("inner")),e.clip("evenodd")}}postcompose(t){if(this.feature_){var e=t.context;if(e.restore(),this.get("shadowWidth")){e.save();var i=this.get("shadowWidth")*t.frameState.pixelRatio;this.get("shadowMapUnits")&&(i/=t.frameState.viewState.resolution),this.drawFeaturePath_(t,!this.get("inner")),e.clip("evenodd"),e.filter="blur("+i+"px)",e.strokeStyle=this._shadowColor,e.lineCap="round",e.lineJoin="round",e.lineWidth=i,e.stroke(),e.restore()}}}}}),a("juLo9",function(t,i){e(t.exports,"render2Feature",()=>g),e(t.exports,"default",()=>m);var r=n("iGyOD"),o=n("29SgV"),a=n("7qu5m"),s=n("d1ltq"),l=n("jZquI"),h=n("gzr8q"),u=n("23ytq"),c=n("iQyfo"),f=n("l956U"),d=n("86esn");let p=r.default.prototype.clone;function g(t){let e=[],i=t.getFlatCoordinates();for(var o=0;o<i.length;o+=2)e.push([i[o],i[o+1]]);switch(t.getType()){case"Point":e=e.pop();break;case"LineString":break;case"MultiLineString":case"Polygon":e=[e]}let n=(0,u.ol_geom_createFromType)(t.getType(),e),a=new r.default(n);return a.setProperties(t.getProperties()),a.setLayer(t.getLayer()),a}r.default.prototype.clone=function(){let t=p.call(this);return t.setIgnStyle(Object.assign({},this.getIgnStyle())),t.setPopupContent(this.getPopupContent()),t},r.default.prototype.getLayer=function(){return this._layer},r.default.prototype.setLayer=function(t){this._layer=t},r.default.prototype.getIgnStyle=function(t,e){if((!this._ignStyle||Array.isArray(this._ignStyle))&&(this._ignStyle={}),!t)return this._ignStyle;if(!0===t){e=e||{};let t={},r=this.getGeometry().getType();for(var i in d.ignStyleDef)(0,d.ignStyleDef)[i].geom.test(r)&&(t[i]=e[i]||this.getIgnStyle(i));return t}return e&&Object.prototype.hasOwnProperty.call(e,t)?e[t]:Object.prototype.hasOwnProperty.call(this._ignStyle,t)?this._ignStyle[t]:this.getLayer()&&this.getLayer()._ignStyle&&Object.prototype.hasOwnProperty.call(this.getLayer()._ignStyle,t)?this.getLayer()._ignStyle[t]:d.defaultIgnStyle[t]},r.default.prototype.setIgnStyle=function(t,e){if((!this._ignStyle||Array.isArray(this._ignStyle))&&(this._ignStyle={}),void 0===e){t&&"string"!=typeof t&&(this._ignStyle=t);return}""!==e&&/width|radius|size|offset/i.test(t)&&(e=Number(e)),d.ignStyleDef[t]&&(0,d.ignStyleDef)[t].geom.test(this.getGeometry().getType())&&(this.getLayer()&&this.getLayer()._ignStyle&&Object.prototype.hasOwnProperty.call(this.getLayer()._ignStyle,t)&&e!=this.getLayer()._ignStyle[t]?this._ignStyle[t]=e:""!==e&&e!=d.defaultIgnStyle[t]?this._ignStyle[t]=e:delete this._ignStyle[t])},r.default.prototype.hasPopupContent=function(){return!!(this._popupContent&&!1!==this._popupContent.active||this.getLayer()&&this.getLayer().getPopupContent&&this.getLayer().getPopupContent())},r.default.prototype.getPopupContent=function(t,e){if(!t)return this._popupContent||{};if(this._popupContent&&this._popupContent.active?t=this._popupContent:!0===t&&(t=this.getLayer()&&this.getLayer().getPopupContent?this.getLayer().getPopupContent():""),!t)return"";var i=(t.titre?"####"+t.titre+"\n":"")+(t.desc?t.desc+"\n":"")+(t.img?"!("+t.img+")\n":"")+(t.coord?"**%COORD%**":"");i=i.replace(/\n$/,"");let r=this.getMDProperties();var o=(0,f.default)(i,r);if(e)return o;let n=(0,c.default).create("DIV",{html:o,className:"md"});return(0,f.default).renderWidget(n),n},r.default.prototype.getMDProperties=function(){let t;let e=this.getProperties();delete e[this.getGeometryName()];let i=this.getGeometry();switch(i.getType()){case"LineString":case"MultiLineString":t=i.getClosestPoint((0,l.getCenter)(i.getExtent())),e.LENGTH||(e.LENGTH=function(t){let e=(0,a.getLength)(t);return e>100?Math.round(e/1e3*100)/100+" km":Math.round(100*e)/100+" m"}(i));break;case"Polygon":case"MultiPolygon":t=i.getInteriorPoint?i.getInteriorPoint().getCoordinates():i.getInteriorPoints().getCoordinates()[0],e.AREA||(e.AREA=function(t){let e=Math.abs((0,a.getArea)(t));return e>1e4?Math.round(e/1e6*100)/100+" km²":Math.round(100*e)/100+" m²"}(i));break;default:t=i.getFirstCoordinate()}let r=(0,h.transform)(t,"EPSG:3857","EPSG:4326"),o=r[0].toFixed(6),n=r[1].toFixed(6);return e.COORD||(e.COORD=(n<0?-n:n)+"&deg;"+(n<0?"S":"N")+" "+(o<0?-o:o)+"&deg;"+(o<0?"O":"E")),e.COORDMS||(e.COORDMS=(0,s.toStringHDMS)(r).replace(/ /g,"").replace("N","N ").replace("S","S ")),e.LON||(e.LON=o),e.LAT||(e.LAT=n),this._indicator&&(e.INDICATOR=this._indicator,e["INDICATOR="+this._indicator]=this._indicator),e},r.default.prototype.getInfoContent=function(){let t=this.getPopupContent(!0,!0).replace(/<br ?\/>|<\/h.?>/g," ");return(0,c.default).create("DIV",{html:t}).innerText.substr(0,50)},r.default.prototype.setPopupContent=function(t){!t||t instanceof Array?this._popupContent={}:this._popupContent=t},r.default.prototype.getLabelContent=function(t){if(!t)return"";var e=t;e=e.replace(/\n$/,"");var i=this.getProperties(),r=(0,f.default).doData(e,i);return(r=r.replace(/<br \/>/,"")).replace(/<br\/>/,"")},r.default.prototype.showPopup=function(t,e,i){var r=this;let o=r.get("features");if(o){if(1!==o.length)return t.hide(),"";r=o[0]}var n=r.getPopupContent(!0);if(n.innerText.trim()||n.querySelector("canvas")||n.querySelector("img")){if(e||(e=t.getPosition()||(i||r.getGeometry()).getFirstCoordinate()),t.setOffset([0,0]),"Point"===r.getGeometry().getType()){var a=t.offsetBox,s=r.getLayer().getIgnStyle(r),l=/left|right/.test(t.autoPositioning[0])?s.pointRadius:0;t.offsetBox=[-l,(s.pointOffsetY?-2:-1)*s.pointRadius,l,s.pointOffsetY?0:s.pointRadius],i?t.show(i.getClosestPoint(e),n):t.show(r.getGeometry().getClosestPoint(e),n),t.offsetBox=a}else/polygon/i.test(r.getGeometry().getType())?t.show(e,n):t.show(r.getGeometry().getClosestPoint(e),n)}else t.hide();return(0,f.default).renderWidget(t.getElement()),n},o.default.prototype.getIgnStyle=r.default.prototype.getIgnStyle,o.default.prototype.getLayer=r.default.prototype.getLayer,o.default.prototype.setLayer=r.default.prototype.setLayer,o.default.prototype.showPopup=function(t,e,i){return g(this).showPopup(t,e,i)},o.default.prototype.getPopupContent=r.default.prototype.getPopupContent,o.default.prototype.getInfoContent=r.default.prototype.getInfoContent,o.default.prototype.getMDProperties=function(){return this.getProperties()};var m=r.default}),a("iGyOD",function(t,i){e(t.exports,"default",()=>h);var r=n("fnScq"),o=n("cw4dl"),a=n("eJ4LZ"),s=n("bsgMw");class l extends r.default{constructor(t){super(),this.on,this.once,this.un,this.id_=void 0,this.geometryName_="geometry",this.style_=null,this.styleFunction_=void 0,this.geometryChangeKey_=null,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),t&&("function"==typeof t.getSimplifiedGeometry?this.setGeometry(t):this.setProperties(t))}clone(){let t=new l(this.hasProperties()?this.getProperties():null);t.setGeometryName(this.getGeometryName());let e=this.getGeometry();e&&t.setGeometry(e.clone());let i=this.getStyle();return i&&t.setStyle(i),t}getGeometry(){return this.get(this.geometryName_)}getId(){return this.id_}getGeometryName(){return this.geometryName_}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}handleGeometryChange_(){this.changed()}handleGeometryChanged_(){this.geometryChangeKey_&&((0,s.unlistenByKey)(this.geometryChangeKey_),this.geometryChangeKey_=null);let t=this.getGeometry();t&&(this.geometryChangeKey_=(0,s.listen)(t,o.default.CHANGE,this.handleGeometryChange_,this)),this.changed()}setGeometry(t){this.set(this.geometryName_,t)}setStyle(t){let e;this.style_=t,this.styleFunction_=t?"function"==typeof t?t:(Array.isArray(t)?e=t:((0,a.assert)("function"==typeof t.getZIndex,"Expected an `ol/style/Style` or an array of `ol/style/Style.js`"),e=[t]),function(){return e}):void 0,this.changed()}setId(t){this.id_=t,this.changed()}setGeometryName(t){this.removeChangeListener(this.geometryName_,this.handleGeometryChanged_),this.geometryName_=t,this.addChangeListener(this.geometryName_,this.handleGeometryChanged_),this.handleGeometryChanged_()}}var h=l}),a("29SgV",function(t,i){e(t.exports,"default",()=>y),n("iGyOD"),n("j2K3b"),n("ljDIj"),n("hvEnP"),n("7TB1l"),n("dEQmT"),n("cgPpQ");var r=n("14PDX"),o=n("jZquI"),a=n("exEDy"),s=n("kBSVF"),l=n("ec4vu"),h=n("gzr8q"),u=n("2cCpz"),c=n("1fqgz"),f=n("88eMt"),d=n("eQaCk"),p=n("bsQCi");let g=(0,r.create)();class m{constructor(t,e,i,r,o,n){this.styleFunction,this.extent_,this.id_=n,this.type_=t,this.flatCoordinates_=e,this.flatInteriorPoints_=null,this.flatMidpoints_=null,this.ends_=i,this.properties_=o,this.squaredTolerance_,this.stride_=r,this.simplifiedGeometry_}get(t){return this.properties_[t]}getExtent(){return this.extent_||(this.extent_="Point"===this.type_?(0,o.createOrUpdateFromCoordinate)(this.flatCoordinates_):(0,o.createOrUpdateFromFlatCoordinates)(this.flatCoordinates_,0,this.flatCoordinates_.length,2)),this.extent_}getFlatInteriorPoint(){if(!this.flatInteriorPoints_){let t=(0,o.getCenter)(this.getExtent());this.flatInteriorPoints_=(0,l.getInteriorPointOfArray)(this.flatCoordinates_,0,this.ends_,2,t,0)}return this.flatInteriorPoints_}getFlatInteriorPoints(){if(!this.flatInteriorPoints_){let t=(0,u.inflateEnds)(this.flatCoordinates_,this.ends_),e=(0,f.linearRingss)(this.flatCoordinates_,0,t,2);this.flatInteriorPoints_=(0,l.getInteriorPointsOfMultiArray)(this.flatCoordinates_,0,t,2,e)}return this.flatInteriorPoints_}getFlatMidpoint(){return this.flatMidpoints_||(this.flatMidpoints_=(0,c.interpolatePoint)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,.5)),this.flatMidpoints_}getFlatMidpoints(){if(!this.flatMidpoints_){this.flatMidpoints_=[];let t=this.flatCoordinates_,e=0,i=this.ends_;for(let r=0,o=i.length;r<o;++r){let o=i[r],n=(0,c.interpolatePoint)(t,e,o,2,.5);(0,s.extend)(this.flatMidpoints_,n),e=o}}return this.flatMidpoints_}getId(){return this.id_}getOrientedFlatCoordinates(){return this.flatCoordinates_}getGeometry(){return this}getSimplifiedGeometry(t){return this}simplifyTransformed(t,e){return this}getProperties(){return this.properties_}getPropertiesInternal(){return this.properties_}getStride(){return this.stride_}getStyleFunction(){return this.styleFunction}getType(){return this.type_}transform(t){let e=(t=(0,h.get)(t)).getExtent(),i=t.getWorldExtent();if(e&&i){let t=(0,o.getHeight)(i)/(0,o.getHeight)(e);(0,r.compose)(g,i[0],i[3],t,-t,0,0,0),(0,p.transform2D)(this.flatCoordinates_,0,this.flatCoordinates_.length,2,g,this.flatCoordinates_)}}applyTransform(t){t(this.flatCoordinates_,this.flatCoordinates_,this.stride_)}clone(){return new m(this.type_,this.flatCoordinates_.slice(),this.ends_.slice(),this.stride_,Object.assign({},this.properties_),this.id_)}getEnds(){return this.ends_}enableSimplifyTransformed(){return this.simplifyTransformed=(0,d.memoizeOne)((t,e)=>{let i;if(t===this.squaredTolerance_)return this.simplifiedGeometry_;this.simplifiedGeometry_=this.clone(),e&&this.simplifiedGeometry_.applyTransform(e);let r=this.simplifiedGeometry_.getFlatCoordinates();switch(this.type_){case"LineString":r.length=(0,a.douglasPeucker)(r,0,this.simplifiedGeometry_.flatCoordinates_.length,this.simplifiedGeometry_.stride_,t,r,0),i=[r.length];break;case"MultiLineString":i=[],r.length=(0,a.douglasPeuckerArray)(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,t,r,0,i);break;case"Polygon":i=[],r.length=(0,a.quantizeArray)(r,0,this.simplifiedGeometry_.ends_,this.simplifiedGeometry_.stride_,Math.sqrt(t),r,0,i)}return i&&(this.simplifiedGeometry_=new m(this.type_,r,i,2,this.properties_,this.id_)),this.squaredTolerance_=t,this.simplifiedGeometry_}),this}}m.prototype.getFlatCoordinates=m.prototype.getOrientedFlatCoordinates;var y=m}),a("ljDIj",function(t,i){e(t.exports,"default",()=>f);var r=n("j2K3b"),o=n("63y7W"),a=n("jZquI"),s=n("ee3b9"),l=n("kBSVF"),h=n("iTdJV"),u=n("a6roo");class c extends o.default{constructor(t,e){super(),e&&!Array.isArray(t[0])?this.setFlatCoordinates(e,t):this.setCoordinates(t,e)}appendPoint(t){(0,l.extend)(this.flatCoordinates,t.getFlatCoordinates()),this.changed()}clone(){let t=new c(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e))return r;let o=this.flatCoordinates,n=this.stride;for(let a=0,s=o.length;a<s;a+=n){let s=(0,u.squaredDistance)(t,e,o[a],o[a+1]);if(s<r){r=s;for(let t=0;t<n;++t)i[t]=o[a+t];i.length=n}}return r}getCoordinates(){return(0,h.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getPoint(t){let e=this.flatCoordinates.length/this.stride;return t<0||e<=t?null:new r.default(this.flatCoordinates.slice(t*this.stride,(t+1)*this.stride),this.layout)}getPoints(){let t=this.flatCoordinates,e=this.layout,i=this.stride,o=[];for(let n=0,a=t.length;n<a;n+=i){let a=new r.default(t.slice(n,n+i),e);o.push(a)}return o}getType(){return"MultiPoint"}intersectsExtent(t){let e=this.flatCoordinates,i=this.stride;for(let r=0,o=e.length;r<o;r+=i){let i=e[r],o=e[r+1];if((0,a.containsXY)(t,i,o))return!0}return!1}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var f=c}),a("hvEnP",function(t,i){e(t.exports,"default",()=>m);var r=n("63y7W"),o=n("96blb"),a=n("jZquI"),s=n("ee3b9"),l=n("exEDy"),h=n("kBSVF"),u=n("855Md"),c=n("iTdJV"),f=n("1fqgz"),d=n("4NB4B"),p=n("aSafW");class g extends r.default{constructor(t,e){super(),this.flatMidpoint_=null,this.flatMidpointRevision_=-1,this.maxDelta_=-1,this.maxDeltaRevision_=-1,void 0===e||Array.isArray(t[0])?this.setCoordinates(t,e):this.setFlatCoordinates(e,t)}appendCoordinate(t){(0,h.extend)(this.flatCoordinates,t),this.changed()}clone(){let t=new g(this.flatCoordinates.slice(),this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,o.maxSquaredDelta)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,o.assignClosestPoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,this.maxDelta_,!1,t,e,i,r))}forEachSegment(t){return(0,u.forEach)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}getCoordinateAtM(t,e){return"XYM"!=this.layout&&"XYZM"!=this.layout?null:(e=void 0!==e&&e,(0,f.lineStringCoordinateAtM)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e))}getCoordinates(){return(0,c.inflateCoordinates)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getCoordinateAt(t,e){return(0,f.interpolatePoint)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,this.stride)}getLength(){return(0,p.lineStringLength)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride)}getFlatMidpoint(){return this.flatMidpointRevision_!=this.getRevision()&&(this.flatMidpoint_=this.getCoordinateAt(.5,this.flatMidpoint_??void 0),this.flatMidpointRevision_=this.getRevision()),this.flatMidpoint_}getSimplifiedGeometryInternal(t){let e=[];return e.length=(0,l.douglasPeucker)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t,e,0),new g(e,"XY")}getType(){return"LineString"}intersectsExtent(t){return(0,d.intersectsLineString)(this.flatCoordinates,0,this.flatCoordinates.length,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,1),this.flatCoordinates||(this.flatCoordinates=[]),this.flatCoordinates.length=(0,s.deflateCoordinates)(this.flatCoordinates,0,t,this.stride),this.changed()}}var m=g}),a("1fqgz",function(t,i){e(t.exports,"interpolatePoint",()=>a),e(t.exports,"lineStringCoordinateAtM",()=>s),e(t.exports,"lineStringsCoordinateAtM",()=>l);var r=n("kBSVF"),o=n("a6roo");function a(t,e,i,n,a,s,l){let h,u;let c=(i-e)/n;if(1===c)h=e;else if(2===c)h=e,u=a;else if(0!==c){let o=t[e],s=t[e+1],l=0,c=[0];for(let r=e+n;r<i;r+=n){let e=t[r],i=t[r+1];l+=Math.sqrt((e-o)*(e-o)+(i-s)*(i-s)),c.push(l),o=e,s=i}let f=a*l,d=(0,r.binarySearch)(c,f);d<0?(u=(f-c[-d-2])/(c[-d-1]-c[-d-2]),h=e+(-d-2)*n):h=e+d*n}l=l>1?l:2,s=s||Array(l);for(let e=0;e<l;++e)s[e]=void 0===h?NaN:void 0===u?t[h+e]:(0,o.lerp)(t[h+e],t[h+n+e],u);return s}function s(t,e,i,r,n,a){let s;if(i==e)return null;if(n<t[e+r-1])return a?((s=t.slice(e,e+r))[r-1]=n,s):null;if(t[i-1]<n)return a?((s=t.slice(i-r,i))[r-1]=n,s):null;if(n==t[e+r-1])return t.slice(e,e+r);let l=e/r,h=i/r;for(;l<h;){let e=l+h>>1;n<t[(e+1)*r-1]?h=e:l=e+1}let u=t[l*r-1];if(n==u)return t.slice((l-1)*r,(l-1)*r+r);let c=(n-u)/(t[(l+1)*r-1]-u);s=[];for(let e=0;e<r-1;++e)s.push((0,o.lerp)(t[(l-1)*r+e],t[l*r+e],c));return s.push(n),s}function l(t,e,i,r,o,n,a){let l;if(a)return s(t,e,i[i.length-1],r,o,n);if(o<t[r-1])return n?((l=t.slice(0,r))[r-1]=o,l):null;if(t[t.length-1]<o)return n?((l=t.slice(t.length-r))[r-1]=o,l):null;for(let n=0,a=i.length;n<a;++n){let a=i[n];if(e!=a){if(o<t[e+r-1])return null;if(o<=t[a-1])return s(t,e,a,r,o,!1);e=a}}return null}}),a("aSafW",function(t,i){e(t.exports,"lineStringLength",()=>r);function r(t,e,i,r){let o=t[e],n=t[e+1],a=0;for(let s=e+r;s<i;s+=r){let e=t[s],i=t[s+1];a+=Math.sqrt((e-o)*(e-o)+(i-n)*(i-n)),o=e,n=i}return a}}),a("7TB1l",function(t,i){e(t.exports,"default",()=>g);var r=n("hvEnP"),o=n("63y7W"),a=n("96blb"),s=n("jZquI"),l=n("ee3b9"),h=n("exEDy"),u=n("kBSVF"),c=n("iTdJV"),f=n("1fqgz"),d=n("4NB4B");class p extends o.default{constructor(t,e,i){if(super(),this.ends_=[],this.maxDelta_=-1,this.maxDeltaRevision_=-1,Array.isArray(t[0]))this.setCoordinates(t,e);else if(void 0!==e&&i)this.setFlatCoordinates(e,t),this.ends_=i;else{let e=[],i=[];for(let r=0,o=t.length;r<o;++r){let o=t[r];(0,u.extend)(e,o.getFlatCoordinates()),i.push(e.length)}let r=0===t.length?this.getLayout():t[0].getLayout();this.setFlatCoordinates(r,e),this.ends_=i}}appendLineString(t){(0,u.extend)(this.flatCoordinates,t.getFlatCoordinates().slice()),this.ends_.push(this.flatCoordinates.length),this.changed()}clone(){let t=new p(this.flatCoordinates.slice(),this.layout,this.ends_.slice());return t.applyProperties(this),t}closestPointXY(t,e,i,r){return r<(0,s.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,a.arrayMaxSquaredDelta)(this.flatCoordinates,0,this.ends_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,a.assignClosestArrayPoint)(this.flatCoordinates,0,this.ends_,this.stride,this.maxDelta_,!1,t,e,i,r))}getCoordinateAtM(t,e,i){return"XYM"!=this.layout&&"XYZM"!=this.layout||0===this.flatCoordinates.length?null:(e=void 0!==e&&e,i=void 0!==i&&i,(0,f.lineStringsCoordinateAtM)(this.flatCoordinates,0,this.ends_,this.stride,t,e,i))}getCoordinates(){return(0,c.inflateCoordinatesArray)(this.flatCoordinates,0,this.ends_,this.stride)}getEnds(){return this.ends_}getLineString(t){return t<0||this.ends_.length<=t?null:new r.default(this.flatCoordinates.slice(0===t?0:this.ends_[t-1],this.ends_[t]),this.layout)}getLineStrings(){let t=this.flatCoordinates,e=this.ends_,i=this.layout,o=[],n=0;for(let a=0,s=e.length;a<s;++a){let s=e[a],l=new r.default(t.slice(n,s),i);o.push(l),n=s}return o}getFlatMidpoints(){let t=[],e=this.flatCoordinates,i=0,r=this.ends_,o=this.stride;for(let n=0,a=r.length;n<a;++n){let a=r[n],s=(0,f.interpolatePoint)(e,i,a,o,.5);(0,u.extend)(t,s),i=a}return t}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=(0,h.douglasPeuckerArray)(this.flatCoordinates,0,this.ends_,this.stride,t,e,0,i),new p(e,"XY",i)}getType(){return"MultiLineString"}intersectsExtent(t){return(0,d.intersectsLineStringArray)(this.flatCoordinates,0,this.ends_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,2),this.flatCoordinates||(this.flatCoordinates=[]);let i=(0,l.deflateCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.ends_);this.flatCoordinates.length=0===i.length?0:i[i.length-1],this.changed()}}var g=p}),a("dEQmT",function(t,i){e(t.exports,"default",()=>b);var r=n("ljDIj"),o=n("cgPpQ"),a=n("63y7W"),s=n("96blb"),l=n("jZquI"),h=n("ee3b9"),u=n("kBSVF"),c=n("ec4vu"),f=n("iTdJV"),d=n("4NB4B"),p=n("2cCpz"),g=n("1jq6X"),m=n("88eMt"),y=n("7Ifzt"),x=n("exEDy");class v extends a.default{constructor(t,e,i){if(super(),this.endss_=[],this.flatInteriorPointsRevision_=-1,this.flatInteriorPoints_=null,this.maxDelta_=-1,this.maxDeltaRevision_=-1,this.orientedRevision_=-1,this.orientedFlatCoordinates_=null,!i&&!Array.isArray(t[0])){let r=t,o=[],n=[];for(let t=0,e=r.length;t<e;++t){let e=r[t],i=o.length,a=e.getEnds();for(let t=0,e=a.length;t<e;++t)a[t]+=i;(0,u.extend)(o,e.getFlatCoordinates()),n.push(a)}e=0===r.length?this.getLayout():r[0].getLayout(),t=o,i=n}void 0!==e&&i?(this.setFlatCoordinates(e,t),this.endss_=i):this.setCoordinates(t,e)}appendPolygon(t){let e;if(this.flatCoordinates){let i=this.flatCoordinates.length;(0,u.extend)(this.flatCoordinates,t.getFlatCoordinates()),e=t.getEnds().slice();for(let t=0,r=e.length;t<r;++t)e[t]+=i}else this.flatCoordinates=t.getFlatCoordinates().slice(),e=t.getEnds().slice(),this.endss_.push();this.endss_.push(e),this.changed()}clone(){let t=this.endss_.length,e=Array(t);for(let i=0;i<t;++i)e[i]=this.endss_[i].slice();let i=new v(this.flatCoordinates.slice(),this.layout,e);return i.applyProperties(this),i}closestPointXY(t,e,i,r){return r<(0,l.closestSquaredDistanceXY)(this.getExtent(),t,e)?r:(this.maxDeltaRevision_!=this.getRevision()&&(this.maxDelta_=Math.sqrt((0,s.multiArrayMaxSquaredDelta)(this.flatCoordinates,0,this.endss_,this.stride,0)),this.maxDeltaRevision_=this.getRevision()),(0,s.assignClosestMultiArrayPoint)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,this.maxDelta_,!0,t,e,i,r))}containsXY(t,e){return(0,y.linearRingssContainsXY)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t,e)}getArea(){return(0,g.linearRingss)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride)}getCoordinates(t){let e;return void 0!==t?(e=this.getOrientedFlatCoordinates().slice(),(0,p.orientLinearRingsArray)(e,0,this.endss_,this.stride,t)):e=this.flatCoordinates,(0,f.inflateMultiCoordinatesArray)(e,0,this.endss_,this.stride)}getEndss(){return this.endss_}getFlatInteriorPoints(){if(this.flatInteriorPointsRevision_!=this.getRevision()){let t=(0,m.linearRingss)(this.flatCoordinates,0,this.endss_,this.stride);this.flatInteriorPoints_=(0,c.getInteriorPointsOfMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t),this.flatInteriorPointsRevision_=this.getRevision()}return this.flatInteriorPoints_}getInteriorPoints(){return new r.default(this.getFlatInteriorPoints().slice(),"XYM")}getOrientedFlatCoordinates(){if(this.orientedRevision_!=this.getRevision()){let t=this.flatCoordinates;(0,p.linearRingssAreOriented)(t,0,this.endss_,this.stride)?this.orientedFlatCoordinates_=t:(this.orientedFlatCoordinates_=t.slice(),this.orientedFlatCoordinates_.length=(0,p.orientLinearRingsArray)(this.orientedFlatCoordinates_,0,this.endss_,this.stride)),this.orientedRevision_=this.getRevision()}return this.orientedFlatCoordinates_}getSimplifiedGeometryInternal(t){let e=[],i=[];return e.length=(0,x.quantizeMultiArray)(this.flatCoordinates,0,this.endss_,this.stride,Math.sqrt(t),e,0,i),new v(e,"XY",i)}getPolygon(t){let e;if(t<0||this.endss_.length<=t)return null;if(0===t)e=0;else{let i=this.endss_[t-1];e=i[i.length-1]}let i=this.endss_[t].slice(),r=i[i.length-1];if(0!==e)for(let t=0,r=i.length;t<r;++t)i[t]-=e;return new o.default(this.flatCoordinates.slice(e,r),this.layout,i)}getPolygons(){let t=this.layout,e=this.flatCoordinates,i=this.endss_,r=[],n=0;for(let a=0,s=i.length;a<s;++a){let s=i[a].slice(),l=s[s.length-1];if(0!==n)for(let t=0,e=s.length;t<e;++t)s[t]-=n;let h=new o.default(e.slice(n,l),t,s);r.push(h),n=l}return r}getType(){return"MultiPolygon"}intersectsExtent(t){return(0,d.intersectsLinearRingMultiArray)(this.getOrientedFlatCoordinates(),0,this.endss_,this.stride,t)}setCoordinates(t,e){this.setLayout(e,t,3),this.flatCoordinates||(this.flatCoordinates=[]);let i=(0,h.deflateMultiCoordinatesArray)(this.flatCoordinates,0,t,this.stride,this.endss_);if(0===i.length)this.flatCoordinates.length=0;else{let t=i[i.length-1];this.flatCoordinates.length=0===t.length?0:t[t.length-1]}this.changed()}}var b=v}),a("88eMt",function(t,i){e(t.exports,"linearRingss",()=>o);var r=n("jZquI");function o(t,e,i,o){let n=[],a=(0,r.createEmpty)();for(let s=0,l=i.length;s<l;++s){let l=i[s];a=(0,r.createOrUpdateFromFlatCoordinates)(t,e,l[0],o),n.push((a[0]+a[2])/2,(a[1]+a[3])/2),e=l[l.length-1]}return n}}),a("23ytq",function(t,i){e(t.exports,"ol_coordinate_dist2d",()=>p),e(t.exports,"ol_coordinate_equal",()=>g),e(t.exports,"ol_coordinate_offsetCoords",()=>m),e(t.exports,"ol_coordinate_findSegment",()=>y),e(t.exports,"ol_geom_createFromType",()=>x);var r,o=n("hvEnP"),a=n("fYB0A"),s=n("7TB1l"),l=n("ljDIj"),h=n("dEQmT"),u=n("j2K3b"),c=n("cgPpQ"),f=n("iTxNH"),d=n("jZquI"),p=function(t,e){var i=t[0]-e[0],r=t[1]-e[1];return Math.sqrt(i*i+r*r)},g=function(t,e){return t[0]==e[0]&&t[1]==e[1]},m=function(t,e){var i,r,o,n,a,s,l,h,u,c,f,d,m,y=[],x=t.length-1,v=x,b=g(t[0],t[x]);!b&&(f=t[0],d=t[1],y.push(m=[f[0]+(d[1]-f[1])/p(f,d)*e,f[1]-(d[0]-f[0])/p(f,d)*e]),t.push(t[x]),x++,v--);for(var w=0;w<v;w++)f=t[w],d=t[(w+1)%x],m=t[(w+2)%x],Math.abs((i=(d[1]-f[1])/(d[0]-f[0]))-(r=(m[1]-d[1])/(m[0]-d[0])))>1e-10&&(o=Math.sqrt((d[0]-f[0])*(d[0]-f[0])+(d[1]-f[1])*(d[1]-f[1])),n=Math.sqrt((m[0]-d[0])*(m[0]-d[0])+(m[1]-d[1])*(m[1]-d[1])),a=f[0]+e*(d[1]-f[1])/o,u=(r*(s=d[0]+e*(m[1]-d[1])/n)-i*a+(l=f[1]-e*(d[0]-f[0])/o)-(h=d[1]-e*(m[0]-d[0])/n))/(r-i),c=(i*r*(s-a)+r*l-i*h)/(r-i),d[0]-f[0]==0&&(c=r*(u=d[0]+e*(d[1]-f[1])/Math.abs(d[1]-f[1]))-r*s+h),m[0]-d[0]==0&&(c=i*(u=m[0]+e*(m[1]-d[1])/Math.abs(m[1]-d[1]))-i*a+l),y.push([u,c]));return b?y.push(y[0]):(t.pop(),f=t[t.length-1],d=t[t.length-2],y.push(m=[f[0]-(d[1]-f[1])/p(f,d)*e,f[1]+(d[0]-f[0])/p(f,d)*e])),y},y=function(t,e){for(var i=0;i<e.length-1;i++){var r=e[i],o=e[i+1];if(g(t,r)||g(t,o))return{index:1,segment:[r,o]};var n=p(r,o),a=[(o[0]-r[0])/n,(o[1]-r[1])/n],s=p(r,t),l=[(t[0]-r[0])/s,(t[1]-r[1])/s];if(1e-10>Math.abs(a[0]*l[1]-a[1]*l[0]))return{index:1,segment:[r,o]}}return{index:-1}},x=function(t,e){switch(t){case"LineString":return new o.default(e);case"LinearRing":return new a.default(e);case"MultiLineString":return new s.default(e);case"MultiPoint":return new l.default(e);case"MultiPolygon":return new h.default(e);case"Point":return new u.default(e);case"Polygon":return new c.default(e);default:return console.error("[createFromType] Unsupported type: "+t),null}};!function(){function t(t,e){var i;for(let r=t.length-1;r>0;r--)(t[r][0]>e&&t[r-1][0]<e||t[r][0]<e&&t[r-1][0]>e)&&(i=[e,(e-t[r][0])/(t[r-1][0]-t[r][0])*(t[r-1][1]-t[r][1])+t[r][1]],t.splice(r,0,i))}function e(t,e){var i;for(let r=t.length-1;r>0;r--)(t[r][1]>e&&t[r-1][1]<e||t[r][1]<e&&t[r-1][1]>e)&&(i=[(e-t[r][1])/(t[r-1][1]-t[r][1])*(t[r-1][0]-t[r][0])+t[r][0],e],t.splice(r,0,i))}r=function(i,r){var o="Polygon"===r.getType();if(!o&&"MultiPolygon"!==r.getType())return null;var n=r.getCoordinates();return(o&&(n=[n]),n.forEach(function(r){r.forEach(function(r){t(r,i[0]),t(r,i[2]),e(r,i[1]),e(r,i[3])})}),n.forEach(function(t){t.forEach(function(t){t.forEach(function(t){t[0]<i[0]?t[0]=i[0]:t[0]>i[2]&&(t[0]=i[2]),t[1]<i[1]?t[1]=i[1]:t[1]>i[3]&&(t[1]=i[3])})})}),o)?new c.default(n[0]):new h.default(n)}}();var v=function(t,e,i,r){var o=[];!1!==r&&o.push(t);var n=p(t,e);if(n){var a=Math.round(n/i);if(a>1)for(var s=(e[0]-t[0])/a,l=(e[1]-t[1])/a,h=1;h<a;h++)o.push([t[0]+s*h,t[1]+l*h])}return o.push(e),o};o.default.prototype.sampleAt=function(t){for(var e=this.getCoordinates(),i=[],r=1;r<e.length;r++)i=i.concat(v(e[r-1],e[r],t,1===r));return new o.default(i)},s.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){for(var r=[],o=1;o<e.length;o++)r=r.concat(v(e[o-1],e[o],t,1===o));i.push(r)}),new s.default(i)},c.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){for(var r=[],o=1;o<e.length;o++)r=r.concat(v(e[o-1],e[o],t,1===o));i.push(r)}),new c.default(i)},h.default.prototype.sampleAt=function(t){var e=this.getCoordinates(),i=[];return e.forEach(function(e){var r=[];i.push(r),e.forEach(function(e){for(var i=[],o=1;o<e.length;o++)i=i.concat(v(e[o-1],e[o],t,1===o));r.push(i)})}),new h.default(i)},f.default.prototype.intersection=function(t,e){if(t.sampleAt){var i=(0,d.buffer)(this.getCenter().concat(this.getCenter()),this.getRadius());t=(t=r(i,t)).simplify(e);var o=this.getCenter(),n=this.getRadius(),a=t.sampleAt(e).getCoordinates();switch(t.getType()){case"Polygon":a=[a];case"MultiPolygon":var s=!1,l=[];if(a.forEach(function(t){var e=[];l.push(e),t.forEach(function(t){var i=[];e.push(i),t.forEach(function(t){var e=p(o,t);e>n?(s=!0,i.push([o[0]+n/e*(t[0]-o[0]),o[1]+n/e*(t[1]-o[1])])):i.push(t)})})}),!s)break;if("Polygon"===t.getType())return new c.default(l[0]);return new h.default(l)}}else console.warn("[ol/geom/Circle~intersection] Unsupported geometry type: "+t.getType());return t}}),a("iTxNH",function(t,i){e(t.exports,"default",()=>h);var r=n("63y7W"),o=n("jZquI"),a=n("ee3b9"),s=n("bsQCi");class l extends r.default{constructor(t,e,i){super(),void 0!==i&&void 0===e?this.setFlatCoordinates(i,t):(e=e||0,this.setCenterAndRadius(t,e,i))}clone(){let t=new l(this.flatCoordinates.slice(),void 0,this.layout);return t.applyProperties(this),t}closestPointXY(t,e,i,r){let o=this.flatCoordinates,n=t-o[0],a=e-o[1],s=n*n+a*a;if(s<r){if(0===s)for(let t=0;t<this.stride;++t)i[t]=o[t];else{let t=this.getRadius()/Math.sqrt(s);i[0]=o[0]+t*n,i[1]=o[1]+t*a;for(let t=2;t<this.stride;++t)i[t]=o[t]}return i.length=this.stride,s}return r}containsXY(t,e){let i=this.flatCoordinates,r=t-i[0],o=e-i[1];return r*r+o*o<=this.getRadiusSquared_()}getCenter(){return this.flatCoordinates.slice(0,this.stride)}computeExtent(t){let e=this.flatCoordinates,i=e[this.stride]-e[0];return(0,o.createOrUpdate)(e[0]-i,e[1]-i,e[0]+i,e[1]+i,t)}getRadius(){return Math.sqrt(this.getRadiusSquared_())}getRadiusSquared_(){let t=this.flatCoordinates[this.stride]-this.flatCoordinates[0],e=this.flatCoordinates[this.stride+1]-this.flatCoordinates[1];return t*t+e*e}getType(){return"Circle"}intersectsExtent(t){let e=this.getExtent();if((0,o.intersects)(t,e)){let e=this.getCenter();return t[0]<=e[0]&&t[2]>=e[0]||t[1]<=e[1]&&t[3]>=e[1]||(0,o.forEachCorner)(t,this.intersectsCoordinate.bind(this))}return!1}setCenter(t){let e=this.stride,i=this.flatCoordinates[e]-this.flatCoordinates[0],r=t.slice();r[e]=r[0]+i;for(let i=1;i<e;++i)r[e+i]=t[i];this.setFlatCoordinates(this.layout,r),this.changed()}setCenterAndRadius(t,e,i){this.setLayout(i,t,0),this.flatCoordinates||(this.flatCoordinates=[]);let r=this.flatCoordinates,o=(0,a.deflateCoordinate)(r,0,t,this.stride);r[o++]=r[0]+e;for(let t=1,e=this.stride;t<e;++t)r[o++]=r[t];r.length=o,this.changed()}getCoordinates(){return null}setCoordinates(t,e){}setRadius(t){this.flatCoordinates[this.stride]=this.flatCoordinates[0]+t,this.changed()}rotate(t,e){let i=this.getCenter(),r=this.getStride();this.setCenter((0,s.rotate)(i,0,i.length,r,t,e,i)),this.changed()}}l.prototype.transform;var h=l}),a("86esn",function(t,i){e(t.exports,"textFontList",()=>r),e(t.exports,"ignStyleDef",()=>o),e(t.exports,"defaultIgnStyle",()=>n),e(t.exports,"pointFrameList",()=>a),e(t.exports,"symbolFormList",()=>s);let r={"sans-serif":{title:"Arial",font:"Arial, Helvetica, sans-serif"},serif:{title:"Times",font:"Times, Times New Roman, serif"},courier:{title:"Courier",font:"Courier, Courier New, monospace"},monospace:{title:"Monospace",font:"Monaco, Lucida Console, monospace"},cursive:{title:"Cursive",font:"Brush Script MT, cursive"},comic:{title:"Comic",font:"Comic Sans MS, cursive"}},o={pointRadius:{geom:/Point/,short:"prd",defaultValue:15},pointIcon:{geom:/Point/,short:"pi",defaultValue:""},pointGlyph:{geom:/Point/,short:"pgy",defaultValue:"ign-form-poi"},pointForm:{geom:/Point/,short:"pf",defaultValue:"none"},pointOffsetY:{geom:/Point/,short:"poy",defaultValue:0},pointShadow:{geom:/Point/,short:"ps",defaultValue:!1},symbolColor:{geom:/Point/,short:"pic",defaultValue:"#0000FF"},pointColor:{geom:/Point/,short:"pc",defaultValue:"#FFFFFF"},pointStrokeColor:{geom:/Point/,short:"psc",defaultValue:"#FFFFFF"},pointStrokeWidth:{geom:/Point/,short:"psw",defaultValue:2},pointFrame:{geom:/Point/,short:"pfr",defaultValue:""},pointCrop:{geom:/Point/,short:"pcp",defaultValue:!1},pointRotation:{geom:/Point/,short:"pr",defaultValue:0},pointGradient:{geom:/Point/,short:"pg",defaultValue:0},strokeWidth:{geom:/LineString|Polygon/,short:"sw",defaultValue:2},strokeDash:{geom:/LineString|Polygon/,short:"sd",defaultValue:""},strokeArrow:{geom:/LineString/,short:"sa",defaultValue:""},strokeColor:{geom:/LineString|Polygon/,short:"sc",defaultValue:"#f80"},fillColor:{geom:/Polygon/,short:"fc",defaultValue:"rgba(255,136,0,0.6)"},fillPattern:{geom:/Polygon/,short:"fp",defaultValue:""},sizePattern:{geom:/Polygon/,short:"fpz",defaultValue:5},spacingPattern:{geom:/Polygon/,short:"fps",defaultValue:10},anglePattern:{geom:/Polygon/,short:"fpa",defaultValue:0},offsetPattern:{geom:/Polygon/,short:"fpo",defaultValue:0},scalePattern:{geom:/Polygon/,short:"fpx",defaultValue:1},fillColorPattern:{geom:/Polygon/,short:"fpc",defaultValue:"rgba(0,0,0,0)"},zIndex:{geom:/Point|LineString|Polygon/,short:"zi",defaultValue:0},labelAttribute:{geom:/Point|LineString|Polygon/,short:"tla",defaultValue:""},textColor:{geom:/Point|LineString|Polygon/,short:"tc",defaultValue:"#000"},textStyle:{geom:/Point|LineString|Polygon/,short:"ts",defaultValue:"normal"},textSize:{geom:/Point|LineString|Polygon/,short:"tz",defaultValue:12},textFont:{geom:/Point|LineString|Polygon/,short:"tft",defaultValue:r["sans-serif"].font},textOutlineColor:{geom:/Point|LineString|Polygon/,short:"toc",defaultValue:""},textOutlineWidth:{geom:/Point|LineString|Polygon/,short:"tlw",defaultValue:3},textAlign:{geom:/Point|LineString|Polygon/,short:"tal",defaultValue:"left"},textBaseline:{geom:/Point|LineString|Polygon/,short:"tbl",defaultValue:"middle"},textBgFill:{geom:/Point/,short:"tbf",defaultValue:"rgba(0, 0, 0, 0)"},textBgStroke:{geom:/Point/,short:"tbs",defaultValue:"rgba(0, 0, 0, 0)"},textBgStrokeWidth:{geom:/Point/,short:"tbw",defaultValue:1.5},textOverflow:{geom:/LineString|Polygon/,short:"to",defaultValue:"#000"},textPlacement:{geom:/LineString/,short:"tp",defaultValue:"point"}},n={};for(let t in o)n[t]=o[t].defaultValue;let a={"":{title:"sans"},default:{title:"carré"},circle:{title:"cercle"},anchored:{title:"blason"},folio:{title:"folio"}},s={none:{title:"sans"},circle:{title:"cercle"},square:{title:"carré"},lozenge:{title:"losange"},hexagon:{title:"hexagone"},marker:{title:"marqueur"},poi:{title:"point d'interêt"},bubble:{title:"bulle"},blazon:{title:"blason"},shield:{title:"bouclier"},triangle:{title:"triangle"},coma:{title:"virgule"},bookmark:{title:"signet"},sign:{title:"panneau triangle"},ban:{title:"panneau interdit"}}}),a("2zf1Y",function(t,i){e(t.exports,"default",()=>o);class r{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null}clone(){let t=this.getColor();return new r({color:Array.isArray(t)?t.slice():t||void 0})}getColor(){return this.color_}setColor(t){this.color_=t}}var o=r}),a("bkg8x",function(t,i){e(t.exports,"default",()=>l);var r=n("dUROT"),o=n("29SgV"),a=n("juLo9");class s extends r.default{constructor(t){super(t)}}s.prototype.dispatchEvent=function(t){"select"===t.type&&t.selected.forEach((e,i)=>{if(e instanceof o.default){this.getFeatures().remove(e);let r=(0,a.render2Feature)(e);t.selected[i]=r,this.getFeatures().push(r)}}),(0,r.default).prototype.dispatchEvent.call(this,t)},(o.default.prototype.getStyle||o.default.prototype.addEventListener)&&console.warn("[Select] RenderFeature is overwritten!"),o.default.prototype.getStyle=function(){},o.default.prototype.setStyle=function(){},o.default.prototype.addEventListener=function(){},o.default.prototype.removeEventListener=function(){};var l=s}),a("dUROT",function(t,i){e(t.exports,"default",()=>b);var r=n("31ZqB"),o=n("eHnTw"),a=n("iTTi2"),s=n("iGyOD"),l=n("7lBr2"),h=n("610XN"),u=n("eQaCk"),c=n("kKEgb"),f=n("l9IGS"),d=n("kBSVF"),p=n("lVQul"),g=n("btuox");let m={SELECT:"select"};class y extends a.default{constructor(t,e,i,r){super(t),this.selected=e,this.deselected=i,this.mapBrowserEvent=r}}let x={};class v extends l.default{constructor(t){let e;if(super(),this.on,this.once,this.un,t=t||{},this.boundAddFeature_=this.addFeature_.bind(this),this.boundRemoveFeature_=this.removeFeature_.bind(this),this.condition_=t.condition?t.condition:g.singleClick,this.addCondition_=t.addCondition?t.addCondition:g.never,this.removeCondition_=t.removeCondition?t.removeCondition:g.never,this.toggleCondition_=t.toggleCondition?t.toggleCondition:g.shiftKeyOnly,this.multi_=!!t.multi&&t.multi,this.filter_=t.filter?t.filter:u.TRUE,this.hitTolerance_=t.hitTolerance?t.hitTolerance:0,this.style_=void 0!==t.style?t.style:function(){let t=(0,f.createEditingStyle)();return(0,d.extend)(t.Polygon,t.LineString),(0,d.extend)(t.GeometryCollection,t.LineString),function(e){return e.getGeometry()?t[e.getGeometry().getType()]:null}}(),this.features_=t.features||new r.default,t.layers){if("function"==typeof t.layers)e=t.layers;else{let i=t.layers;e=function(t){return i.includes(t)}}}else e=u.TRUE;this.layerFilter_=e,this.featureLayerAssociation_={}}addFeatureLayerAssociation_(t,e){this.featureLayerAssociation_[(0,p.getUid)(t)]=e}getFeatures(){return this.features_}getHitTolerance(){return this.hitTolerance_}getLayer(t){return this.featureLayerAssociation_[(0,p.getUid)(t)]}setHitTolerance(t){this.hitTolerance_=t}setMap(t){this.getMap()&&this.style_&&this.features_.forEach(this.restorePreviousStyle_.bind(this)),super.setMap(t),t?(this.features_.addEventListener(o.default.ADD,this.boundAddFeature_),this.features_.addEventListener(o.default.REMOVE,this.boundRemoveFeature_),this.style_&&this.features_.forEach(this.applySelectedStyle_.bind(this))):(this.features_.removeEventListener(o.default.ADD,this.boundAddFeature_),this.features_.removeEventListener(o.default.REMOVE,this.boundRemoveFeature_))}addFeature_(t){let e=t.element;if(this.style_&&this.applySelectedStyle_(e),!this.getLayer(e)){let t=this.getMap().getAllLayers().find(function(t){if(t instanceof h.default&&t.getSource()&&t.getSource().hasFeature(e))return t});t&&this.addFeatureLayerAssociation_(e,t)}}removeFeature_(t){this.style_&&this.restorePreviousStyle_(t.element)}getStyle(){return this.style_}applySelectedStyle_(t){let e=(0,p.getUid)(t);e in x||(x[e]=t.getStyle()),t.setStyle(this.style_)}restorePreviousStyle_(t){let e=this.getMap().getInteractions().getArray();for(let i=e.length-1;i>=0;--i){let r=e[i];if(r!==this&&r instanceof v&&r.getStyle()&&-1!==r.getFeatures().getArray().lastIndexOf(t)){t.setStyle(r.getStyle());return}}let i=(0,p.getUid)(t);t.setStyle(x[i]),delete x[i]}removeFeatureLayerAssociation_(t){delete this.featureLayerAssociation_[p.getUid(t)]}handleEvent(t){if(!this.condition_(t))return!0;let e=this.addCondition_(t),i=this.removeCondition_(t),r=this.toggleCondition_(t),o=t.map,n=this.getFeatures(),a=[],l=[];if(e||i||r){o.forEachFeatureAtPixel(t.pixel,(t,o)=>{if(t instanceof s.default&&this.filter_(t,o))return(e||r)&&!n.getArray().includes(t)?(this.addFeatureLayerAssociation_(t,o),l.push(t)):(i||r)&&n.getArray().includes(t)&&(a.push(t),this.removeFeatureLayerAssociation_(t)),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=a.length-1;t>=0;--t)n.remove(a[t]);n.extend(l)}else{(0,c.clear)(this.featureLayerAssociation_),o.forEachFeatureAtPixel(t.pixel,(t,e)=>{if(t instanceof s.default&&this.filter_(t,e))return this.addFeatureLayerAssociation_(t,e),l.push(t),!this.multi_},{layerFilter:this.layerFilter_,hitTolerance:this.hitTolerance_});for(let t=n.getLength()-1;t>=0;--t){let e=n.item(t),i=l.indexOf(e);i>-1?l.splice(i,1):(n.remove(e),a.push(e))}0!==l.length&&n.extend(l)}return(l.length>0||a.length>0)&&this.dispatchEvent(new y(m.SELECT,l,a,t)),!0}}var b=v}),a("610XN",function(t,i){e(t.exports,"default",()=>s);var r=n("2YyN3"),o=n("6M65l");class a extends r.default{constructor(t){super(t)}createRenderer(){return new o.default(this)}}var s=a}),a("2YyN3",function(i,r){e(i.exports,"default",()=>c);var o=n("2K2IB"),a=n("4wfAy"),s=n("l9IGS"),l=n("czkEI");let h={RENDER_ORDER:"renderOrder"};class u extends o.default{constructor(t){let e=Object.assign({},t=t||{});delete e.style,delete e.renderBuffer,delete e.updateWhileAnimating,delete e.updateWhileInteracting,super(e),this.declutter_=void 0!==t.declutter&&t.declutter,this.renderBuffer_=void 0!==t.renderBuffer?t.renderBuffer:100,this.style_=null,this.styleFunction_=void 0,this.setStyle(t.style),this.updateWhileAnimating_=void 0!==t.updateWhileAnimating&&t.updateWhileAnimating,this.updateWhileInteracting_=void 0!==t.updateWhileInteracting&&t.updateWhileInteracting}getDeclutter(){return this.declutter_}getFeatures(t){return super.getFeatures(t)}getRenderBuffer(){return this.renderBuffer_}getRenderOrder(){return this.get(h.RENDER_ORDER)}getStyle(){return this.style_}getStyleFunction(){return this.styleFunction_}getUpdateWhileAnimating(){return this.updateWhileAnimating_}getUpdateWhileInteracting(){return this.updateWhileInteracting_}renderDeclutter(e){e.declutterTree||(e.declutterTree=new(t(a))(9)),this.getRenderer().renderDeclutter(e)}setRenderOrder(t){this.set(h.RENDER_ORDER,t)}setStyle(t){this.style_=function(t){if(void 0===t)return s.createDefaultStyle;if(!t)return null;if("function"==typeof t||t instanceof s.default)return t;if(!Array.isArray(t))return(0,l.flatStylesToStyleFunction)([t]);if(0===t.length)return[];let e=t.length,i=t[0];if(i instanceof s.default){let i=Array(e);for(let r=0;r<e;++r){let e=t[r];if(!(e instanceof s.default))throw Error("Expected a list of style instances");i[r]=e}return i}if("style"in i){let i=Array(e);for(let r=0;r<e;++r){let e=t[r];if(!("style"in e))throw Error("Expected a list of rules with a style property");i[r]=e}return(0,l.rulesToStyleFunction)(i)}return(0,l.flatStylesToStyleFunction)(t)}(t),this.styleFunction_=null===t?void 0:(0,s.toFunction)(this.style_),this.changed()}}var c=u}),a("4wfAy",function(t,e){t.exports,t.exports=function(){function t(t,e,i){var r=t[e];t[e]=t[i],t[i]=r}function e(t,e){return t<e?-1:t>e?1:0}var i=function(t){void 0===t&&(t=9),this._maxEntries=Math.max(4,t),this._minEntries=Math.max(2,Math.ceil(.4*this._maxEntries)),this.clear()};function r(t,e){o(t,0,t.children.length,e,t)}function o(t,e,i,r,o){o||(o=f(null)),o.minX=1/0,o.minY=1/0,o.maxX=-1/0,o.maxY=-1/0;for(var a=e;a<i;a++){var s=t.children[a];n(o,t.leaf?r(s):s)}return o}function n(t,e){return t.minX=Math.min(t.minX,e.minX),t.minY=Math.min(t.minY,e.minY),t.maxX=Math.max(t.maxX,e.maxX),t.maxY=Math.max(t.maxY,e.maxY),t}function a(t,e){return t.minX-e.minX}function s(t,e){return t.minY-e.minY}function l(t){return(t.maxX-t.minX)*(t.maxY-t.minY)}function h(t){return t.maxX-t.minX+(t.maxY-t.minY)}function u(t,e){return t.minX<=e.minX&&t.minY<=e.minY&&e.maxX<=t.maxX&&e.maxY<=t.maxY}function c(t,e){return e.minX<=t.maxX&&e.minY<=t.maxY&&e.maxX>=t.minX&&e.maxY>=t.minY}function f(t){return{children:t,height:1,leaf:!0,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0}}function d(i,r,o,n,a){for(var s=[r,o];s.length;)if(!((o=s.pop())-(r=s.pop())<=n)){var l=r+Math.ceil((o-r)/n/2)*n;(function e(i,r,o,n,a){for(;n>o;){if(n-o>600){var s=n-o+1,l=r-o+1,h=Math.log(s),u=.5*Math.exp(2*h/3),c=.5*Math.sqrt(h*u*(s-u)/s)*(l-s/2<0?-1:1),f=Math.max(o,Math.floor(r-l*u/s+c)),d=Math.min(n,Math.floor(r+(s-l)*u/s+c));e(i,r,f,d,a)}var p=i[r],g=o,m=n;for(t(i,o,r),a(i[n],p)>0&&t(i,o,n);g<m;){for(t(i,g,m),g++,m--;0>a(i[g],p);)g++;for(;a(i[m],p)>0;)m--}0===a(i[o],p)?t(i,o,m):t(i,++m,n),m<=r&&(o=m+1),r<=m&&(n=m-1)}})(i,l,r||0,o||i.length-1,a||e),s.push(r,l,l,o)}}return i.prototype.all=function(){return this._all(this.data,[])},i.prototype.search=function(t){var e=this.data,i=[];if(!c(t,e))return i;for(var r=this.toBBox,o=[];e;){for(var n=0;n<e.children.length;n++){var a=e.children[n],s=e.leaf?r(a):a;c(t,s)&&(e.leaf?i.push(a):u(t,s)?this._all(a,i):o.push(a))}e=o.pop()}return i},i.prototype.collides=function(t){var e=this.data;if(!c(t,e))return!1;for(var i=[];e;){for(var r=0;r<e.children.length;r++){var o=e.children[r],n=e.leaf?this.toBBox(o):o;if(c(t,n)){if(e.leaf||u(t,n))return!0;i.push(o)}}e=i.pop()}return!1},i.prototype.load=function(t){if(!t||!t.length)return this;if(t.length<this._minEntries){for(var e=0;e<t.length;e++)this.insert(t[e]);return this}var i=this._build(t.slice(),0,t.length-1,0);if(this.data.children.length){if(this.data.height===i.height)this._splitRoot(this.data,i);else{if(this.data.height<i.height){var r=this.data;this.data=i,i=r}this._insert(i,this.data.height-i.height-1,!0)}}else this.data=i;return this},i.prototype.insert=function(t){return t&&this._insert(t,this.data.height-1),this},i.prototype.clear=function(){return this.data=f([]),this},i.prototype.remove=function(t,e){if(!t)return this;for(var i,r,o,n=this.data,a=this.toBBox(t),s=[],l=[];n||s.length;){if(n||(n=s.pop(),r=s[s.length-1],i=l.pop(),o=!0),n.leaf){var h=function(t,e,i){if(!i)return e.indexOf(t);for(var r=0;r<e.length;r++)if(i(t,e[r]))return r;return -1}(t,n.children,e);if(-1!==h)return n.children.splice(h,1),s.push(n),this._condense(s),this}o||n.leaf||!u(n,a)?r?(i++,n=r.children[i],o=!1):n=null:(s.push(n),l.push(i),i=0,r=n,n=n.children[0])}return this},i.prototype.toBBox=function(t){return t},i.prototype.compareMinX=function(t,e){return t.minX-e.minX},i.prototype.compareMinY=function(t,e){return t.minY-e.minY},i.prototype.toJSON=function(){return this.data},i.prototype.fromJSON=function(t){return this.data=t,this},i.prototype._all=function(t,e){for(var i=[];t;)t.leaf?e.push.apply(e,t.children):i.push.apply(i,t.children),t=i.pop();return e},i.prototype._build=function(t,e,i,o){var n,a=i-e+1,s=this._maxEntries;if(a<=s)return r(n=f(t.slice(e,i+1)),this.toBBox),n;o||(o=Math.ceil(Math.log(a)/Math.log(s)),s=Math.ceil(a/Math.pow(s,o-1))),(n=f([])).leaf=!1,n.height=o;var l=Math.ceil(a/s),h=l*Math.ceil(Math.sqrt(s));d(t,e,i,h,this.compareMinX);for(var u=e;u<=i;u+=h){var c=Math.min(u+h-1,i);d(t,u,c,l,this.compareMinY);for(var p=u;p<=c;p+=l){var g=Math.min(p+l-1,c);n.children.push(this._build(t,p,g,o-1))}}return r(n,this.toBBox),n},i.prototype._chooseSubtree=function(t,e,i,r){for(;r.push(e),!e.leaf&&r.length-1!==i;){for(var o=1/0,n=1/0,a=void 0,s=0;s<e.children.length;s++){var h=e.children[s],u=l(h),c=(Math.max(h.maxX,t.maxX)-Math.min(h.minX,t.minX))*(Math.max(h.maxY,t.maxY)-Math.min(h.minY,t.minY))-u;c<n?(n=c,o=u<o?u:o,a=h):c===n&&u<o&&(o=u,a=h)}e=a||e.children[0]}return e},i.prototype._insert=function(t,e,i){var r=i?t:this.toBBox(t),o=[],a=this._chooseSubtree(r,this.data,e,o);for(a.children.push(t),n(a,r);e>=0&&o[e].children.length>this._maxEntries;)this._split(o,e),e--;this._adjustParentBBoxes(r,o,e)},i.prototype._split=function(t,e){var i=t[e],o=i.children.length,n=this._minEntries;this._chooseSplitAxis(i,n,o);var a=this._chooseSplitIndex(i,n,o),s=f(i.children.splice(a,i.children.length-a));s.height=i.height,s.leaf=i.leaf,r(i,this.toBBox),r(s,this.toBBox),e?t[e-1].children.push(s):this._splitRoot(i,s)},i.prototype._splitRoot=function(t,e){this.data=f([t,e]),this.data.height=t.height+1,this.data.leaf=!1,r(this.data,this.toBBox)},i.prototype._chooseSplitIndex=function(t,e,i){for(var r,n,a,s,h=1/0,u=1/0,c=e;c<=i-e;c++){var f=o(t,0,c,this.toBBox),d=o(t,c,i,this.toBBox),p=(n=void 0,a=void 0,n=Math.max(f.minX,d.minX),a=Math.max(f.minY,d.minY),Math.max(0,Math.min(f.maxX,d.maxX)-n)*Math.max(0,Math.min(f.maxY,d.maxY)-a)),g=l(f)+l(d);p<h?(h=p,r=c,u=g<u?g:u):p===h&&g<u&&(u=g,r=c)}return r||i-e},i.prototype._chooseSplitAxis=function(t,e,i){var r=t.leaf?this.compareMinX:a,o=t.leaf?this.compareMinY:s;this._allDistMargin(t,e,i,r)<this._allDistMargin(t,e,i,o)&&t.children.sort(r)},i.prototype._allDistMargin=function(t,e,i,r){t.children.sort(r);for(var a=this.toBBox,s=o(t,0,e,a),l=o(t,i-e,i,a),u=h(s)+h(l),c=e;c<i-e;c++){var f=t.children[c];n(s,t.leaf?a(f):f),u+=h(s)}for(var d=i-e-1;d>=e;d--){var p=t.children[d];n(l,t.leaf?a(p):p),u+=h(l)}return u},i.prototype._adjustParentBBoxes=function(t,e,i){for(var r=i;r>=0;r--)n(e[r],t)},i.prototype._condense=function(t){for(var e=t.length-1,i=void 0;e>=0;e--)0===t[e].children.length?e>0?(i=t[e-1].children).splice(i.indexOf(t[e]),1):this.clear():r(t[e],this.toBBox)},i}()}),a("l9IGS",function(t,i){e(t.exports,"toFunction",()=>h),e(t.exports,"createDefaultStyle",()=>c),e(t.exports,"createEditingStyle",()=>f),e(t.exports,"default",()=>p);var r=n("4lFOe"),o=n("2zf1Y"),a=n("d5AAH"),s=n("eJ4LZ");class l{constructor(t){t=t||{},this.geometry_=null,this.geometryFunction_=d,void 0!==t.geometry&&this.setGeometry(t.geometry),this.fill_=void 0!==t.fill?t.fill:null,this.image_=void 0!==t.image?t.image:null,this.renderer_=void 0!==t.renderer?t.renderer:null,this.hitDetectionRenderer_=void 0!==t.hitDetectionRenderer?t.hitDetectionRenderer:null,this.stroke_=void 0!==t.stroke?t.stroke:null,this.text_=void 0!==t.text?t.text:null,this.zIndex_=t.zIndex}clone(){let t=this.getGeometry();return t&&"object"==typeof t&&(t=t.clone()),new l({geometry:t??void 0,fill:this.getFill()?this.getFill().clone():void 0,image:this.getImage()?this.getImage().clone():void 0,renderer:this.getRenderer()??void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,text:this.getText()?this.getText().clone():void 0,zIndex:this.getZIndex()})}getRenderer(){return this.renderer_}setRenderer(t){this.renderer_=t}setHitDetectionRenderer(t){this.hitDetectionRenderer_=t}getHitDetectionRenderer(){return this.hitDetectionRenderer_}getGeometry(){return this.geometry_}getGeometryFunction(){return this.geometryFunction_}getFill(){return this.fill_}setFill(t){this.fill_=t}getImage(){return this.image_}setImage(t){this.image_=t}getStroke(){return this.stroke_}setStroke(t){this.stroke_=t}getText(){return this.text_}setText(t){this.text_=t}getZIndex(){return this.zIndex_}setGeometry(t){"function"==typeof t?this.geometryFunction_=t:"string"==typeof t?this.geometryFunction_=function(e){return e.get(t)}:t?void 0!==t&&(this.geometryFunction_=function(){return t}):this.geometryFunction_=d,this.geometry_=t}setZIndex(t){this.zIndex_=t}}function h(t){let e;if("function"==typeof t)e=t;else{let i;Array.isArray(t)?i=t:((0,s.assert)("function"==typeof t.getZIndex,"Expected an `Style` or an array of `Style`"),i=[t]),e=function(){return i}}return e}let u=null;function c(t,e){if(!u){let t=new o.default({color:"rgba(255,255,255,0.4)"}),e=new a.default({color:"#3399CC",width:1.25});u=[new l({image:new r.default({fill:t,stroke:e,radius:5}),fill:t,stroke:e})]}return u}function f(){let t={},e=[255,255,255,1],i=[0,153,255,1];return t.Polygon=[new l({fill:new o.default({color:[255,255,255,.5]})})],t.MultiPolygon=t.Polygon,t.LineString=[new l({stroke:new a.default({color:e,width:5})}),new l({stroke:new a.default({color:i,width:3})})],t.MultiLineString=t.LineString,t.Circle=t.Polygon.concat(t.LineString),t.Point=[new l({image:new r.default({radius:6,fill:new o.default({color:i}),stroke:new a.default({color:e,width:1.5})}),zIndex:1/0})],t.MultiPoint=t.Point,t.GeometryCollection=t.Polygon.concat(t.LineString,t.Point),t}function d(t){return t.getGeometry()}var p=l}),a("4lFOe",function(t,i){e(t.exports,"default",()=>a);var r=n("h6Aha");class o extends r.default{constructor(t){t=t||{radius:5},super({points:1/0,fill:t.fill,radius:t.radius,stroke:t.stroke,scale:void 0!==t.scale?t.scale:1,rotation:void 0!==t.rotation?t.rotation:0,rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,displacement:void 0!==t.displacement?t.displacement:[0,0],declutterMode:t.declutterMode})}clone(){let t=this.getScale(),e=new o({fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,radius:this.getRadius(),scale:Array.isArray(t)?t.slice():t,rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()});return e.setOpacity(this.getOpacity()),e}setRadius(t){this.radius_=t,this.render()}}var a=o}),a("d5AAH",function(t,i){e(t.exports,"default",()=>o);class r{constructor(t){t=t||{},this.color_=void 0!==t.color?t.color:null,this.lineCap_=t.lineCap,this.lineDash_=void 0!==t.lineDash?t.lineDash:null,this.lineDashOffset_=t.lineDashOffset,this.lineJoin_=t.lineJoin,this.miterLimit_=t.miterLimit,this.width_=t.width}clone(){let t=this.getColor();return new r({color:Array.isArray(t)?t.slice():t||void 0,lineCap:this.getLineCap(),lineDash:this.getLineDash()?this.getLineDash().slice():void 0,lineDashOffset:this.getLineDashOffset(),lineJoin:this.getLineJoin(),miterLimit:this.getMiterLimit(),width:this.getWidth()})}getColor(){return this.color_}getLineCap(){return this.lineCap_}getLineDash(){return this.lineDash_}getLineDashOffset(){return this.lineDashOffset_}getLineJoin(){return this.lineJoin_}getMiterLimit(){return this.miterLimit_}getWidth(){return this.width_}setColor(t){this.color_=t}setLineCap(t){this.lineCap_=t}setLineDash(t){this.lineDash_=t}setLineDashOffset(t){this.lineDashOffset_=t}setLineJoin(t){this.lineJoin_=t}setMiterLimit(t){this.miterLimit_=t}setWidth(t){this.width_=t}}var o=r}),a("czkEI",function(t,i){e(t.exports,"rulesToStyleFunction",()=>m),e(t.exports,"flatStylesToStyleFunction",()=>y);var r=n("4lFOe"),o=n("2zf1Y"),a=n("ayeEa"),s=n("h6Aha"),l=n("d5AAH"),h=n("l9IGS"),u=n("kuKBR"),c=n("3oUFG"),f=n("5lv5y"),d=n("kKEgb"),p=n("6BjcK");function g(t){return!0}function m(t){let e=(0,c.newParsingContext)(),i=function(t,e){let i=t.length,r=Array(i);for(let o=0;o<i;++o){let i;let n=t[o],a="filter"in n?(0,f.buildExpression)(n.filter,c.BooleanType,e):g;if(Array.isArray(n.style)){let t=n.style.length;i=Array(t);for(let r=0;r<t;++r)i[r]=x(n.style[r],e)}else i=[x(n.style,e)];r[o]={filter:a,styles:i}}return function(e){let o=[],n=!1;for(let a=0;a<i;++a)if((0,r[a].filter)(e)&&(!t[a].else||!n))for(let t of(n=!0,r[a].styles)){let i=t(e);i&&o.push(i)}return o}}(t,e),r=(0,f.newEvaluationContext)();return function(t,o){if(r.properties=t.getPropertiesInternal(),r.resolution=o,e.featureId){let e=t.getId();void 0!==e?r.featureId=e:r.featureId=null}return i(r)}}function y(t){let e=(0,c.newParsingContext)(),i=t.length,r=Array(i);for(let o=0;o<i;++o)r[o]=x(t[o],e);let o=(0,f.newEvaluationContext)(),n=Array(i);return function(t,a){if(o.properties=t.getPropertiesInternal(),o.resolution=a,e.featureId){let e=t.getId();void 0!==e?o.featureId=e:o.featureId=null}let s=0;for(let t=0;t<i;++t){let e=r[t](o);e&&(n[s]=e,s+=1)}return n.length=s,n}}function x(t,e){let i=v(t,"",e),o=b(t,"",e),n=function(t,e){let i="text-",r=_(t,i+"value",e);if(!r)return null;let o=v(t,i,e),n=v(t,i+"background-",e),a=b(t,i,e),s=b(t,i+"background-",e),l=_(t,i+"font",e),h=w(t,i+"max-angle",e),c=w(t,i+"offset-x",e),f=w(t,i+"offset-y",e),d=S(t,i+"overflow",e),p=_(t,i+"placement",e),g=w(t,i+"repeat",e),m=I(t,i+"scale",e),y=S(t,i+"rotate-with-view",e),x=w(t,i+"rotation",e),E=_(t,i+"align",e),N=_(t,i+"justify",e),M=_(t,i+"baseline",e),P=A(t,i+"padding",e),C=new u.default({});return function(t){if(C.setText(r(t)),o&&C.setFill(o(t)),n&&C.setBackgroundFill(n(t)),a&&C.setStroke(a(t)),s&&C.setBackgroundStroke(s(t)),l&&C.setFont(l(t)),h&&C.setMaxAngle(h(t)),c&&C.setOffsetX(c(t)),f&&C.setOffsetY(f(t)),d&&C.setOverflow(d(t)),p){let e=p(t);if("point"!==e&&"line"!==e)throw Error("Expected point or line for text-placement");C.setPlacement(e)}if(g&&C.setRepeat(g(t)),m&&C.setScale(m(t)),y&&C.setRotateWithView(y(t)),x&&C.setRotation(x(t)),E){let e=E(t);if("left"!==e&&"center"!==e&&"right"!==e&&"end"!==e&&"start"!==e)throw Error("Expected left, right, center, start, or end for text-align");C.setTextAlign(e)}if(N){let e=N(t);if("left"!==e&&"right"!==e&&"center"!==e)throw Error("Expected left, right, or center for text-justify");C.setJustify(e)}if(M){let e=M(t);if("bottom"!==e&&"top"!==e&&"middle"!==e&&"alphabetic"!==e&&"hanging"!==e)throw Error("Expected bottom, top, middle, alphabetic, or hanging for text-baseline");C.setTextBaseline(e)}return P&&C.setPadding(P(t)),C}}(t,e),l="icon-src"in t?function(t,e){let i="icon-",r=i+"src",o=R(t[r],r),n=N(t,i+"anchor",e),s=I(t,i+"scale",e),l=w(t,i+"opacity",e),h=N(t,i+"displacement",e),u=w(t,i+"rotation",e),c=S(t,i+"rotate-with-view",e),f=P(t,i+"anchor-origin"),d=C(t,i+"anchor-x-units"),g=C(t,i+"anchor-y-units"),m=function(t,e){let i=t[e];if(void 0!==i)return k(i,e)}(t,i+"color"),y=function(t,e){let i=t[e];if(void 0!==i){if("string"!=typeof i)throw Error(`Expected a string for ${e}`);return i}}(t,i+"cross-origin"),x=function(t,e){let i=t[e];if(void 0!==i)return L(i,e)}(t,i+"offset"),v=P(t,i+"offset-origin"),b=M(t,i+"width"),_=M(t,i+"height"),E=function(t,e){let i=t[e];if(void 0!==i){if("number"==typeof i)return(0,p.toSize)(i);if(!Array.isArray(i)||2!==i.length||"number"!=typeof i[0]||"number"!=typeof i[1])throw Error(`Expected a number or size array for ${e}`);return i}}(t,i+"size"),A=T(t,i+"declutter"),O=new a.default({src:o,anchorOrigin:f,anchorXUnits:d,anchorYUnits:g,color:m,crossOrigin:y,offset:x,offsetOrigin:v,height:_,width:b,size:E,declutterMode:A});return function(t){return l&&O.setOpacity(l(t)),h&&O.setDisplacement(h(t)),u&&O.setRotation(u(t)),c&&O.setRotateWithView(c(t)),s&&O.setScale(s(t)),n&&O.setAnchor(n(t)),O}}(t,e):"shape-points"in t?function(t,e){let i="shape-",r=i+"points",o=O(t[r],r),n=v(t,i,e),a=b(t,i,e),l=I(t,i+"scale",e),h=N(t,i+"displacement",e),u=w(t,i+"rotation",e),c=S(t,i+"rotate-with-view",e),f=M(t,i+"radius"),d=M(t,i+"radius1"),p=M(t,i+"radius2"),g=M(t,i+"angle"),m=T(t,i+"declutter-mode"),y=new s.default({points:o,radius:f,radius1:d,radius2:p,angle:g,declutterMode:m});return function(t){return n&&y.setFill(n(t)),a&&y.setStroke(a(t)),h&&y.setDisplacement(h(t)),u&&y.setRotation(u(t)),c&&y.setRotateWithView(c(t)),l&&y.setScale(l(t)),y}}(t,e):"circle-radius"in t?function(t,e){let i="circle-",o=v(t,i,e),n=b(t,i,e),a=w(t,i+"radius",e),s=I(t,i+"scale",e),l=N(t,i+"displacement",e),h=w(t,i+"rotation",e),u=S(t,i+"rotate-with-view",e),c=T(t,i+"declutter-mode"),f=new r.default({radius:5,declutterMode:c});return function(t){return a&&f.setRadius(a(t)),o&&f.setFill(o(t)),n&&f.setStroke(n(t)),l&&f.setDisplacement(l(t)),h&&f.setRotation(h(t)),u&&f.setRotateWithView(u(t)),s&&f.setScale(s(t)),f}}(t,e):null,c=w(t,"z-index",e);if(!i&&!o&&!n&&!l&&!(0,d.isEmpty)(t))throw Error("No fill, stroke, point, or text symbolizer properties in style: "+JSON.stringify(t));let f=new h.default;return function(t){let e=!0;if(i){let r=i(t);r&&(e=!1),f.setFill(r)}if(o){let i=o(t);i&&(e=!1),f.setStroke(i)}if(n){let i=n(t);i&&(e=!1),f.setText(i)}if(l){let i=l(t);i&&(e=!1),f.setImage(i)}return(c&&f.setZIndex(c(t)),e)?null:f}}function v(t,e,i){let r=E(t,e+"fill-color",i);if(!r)return null;let n=new o.default;return function(t){let e=r(t);return"none"===e?null:(n.setColor(e),n)}}function b(t,e,i){let r=w(t,e+"stroke-width",i),o=E(t,e+"stroke-color",i);if(!r&&!o)return null;let n=_(t,e+"stroke-line-cap",i),a=_(t,e+"stroke-line-join",i),s=A(t,e+"stroke-line-dash",i),h=w(t,e+"stroke-line-dash-offset",i),u=w(t,e+"stroke-miter-limit",i),c=new l.default;return function(t){if(o){let e=o(t);if("none"===e)return null;c.setColor(e)}if(r&&c.setWidth(r(t)),n){let e=n(t);if("butt"!==e&&"round"!==e&&"square"!==e)throw Error("Expected butt, round, or square line cap");c.setLineCap(e)}if(a){let e=a(t);if("bevel"!==e&&"round"!==e&&"miter"!==e)throw Error("Expected bevel, round, or miter line join");c.setLineJoin(e)}return s&&c.setLineDash(s(t)),h&&c.setLineDashOffset(h(t)),u&&c.setMiterLimit(u(t)),c}}function w(t,e,i){if(!(e in t))return;let r=(0,f.buildExpression)(t[e],c.NumberType,i);return function(t){return O(r(t),e)}}function _(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.StringType,i);return function(t){return R(r(t),e)}}function S(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.BooleanType,i);return function(t){let i=r(t);if("boolean"!=typeof i)throw Error(`Expected a boolean for ${e}`);return i}}function E(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.ColorType|c.StringType,i);return function(t){return k(r(t),e)}}function A(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.NumberArrayType,i);return function(t){return L(r(t),e)}}function N(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.NumberArrayType,i);return function(t){let i=L(r(t),e);if(2!==i.length)throw Error(`Expected two numbers for ${e}`);return i}}function I(t,e,i){if(!(e in t))return null;let r=(0,f.buildExpression)(t[e],c.NumberArrayType|c.NumberType,i);return function(t){return function(t,e){if("number"==typeof t)return t;let i=L(t,e);if(2!==i.length)throw Error(`Expected an array of two numbers for ${e}`);return i}(r(t),e)}}function M(t,e){let i=t[e];if(void 0!==i){if("number"!=typeof i)throw Error(`Expected a number for ${e}`);return i}}function P(t,e){let i=t[e];if(void 0!==i){if("bottom-left"!==i&&"bottom-right"!==i&&"top-left"!==i&&"top-right"!==i)throw Error(`Expected bottom-left, bottom-right, top-left, or top-right for ${e}`);return i}}function C(t,e){let i=t[e];if(void 0!==i){if("pixels"!==i&&"fraction"!==i)throw Error(`Expected pixels or fraction for ${e}`);return i}}function T(t,e){let i=t[e];if(void 0!==i){if("string"!=typeof i)throw Error(`Expected a string for ${e}`);if("declutter"!==i&&"obstacle"!==i&&"none"!==i)throw Error(`Expected declutter, obstacle, or none for ${e}`);return i}}function L(t,e){if(!Array.isArray(t))throw Error(`Expected an array for ${e}`);let i=t.length;for(let r=0;r<i;++r)if("number"!=typeof t[r])throw Error(`Expected an array of numbers for ${e}`);return t}function R(t,e){if("string"!=typeof t)throw Error(`Expected a string for ${e}`);return t}function O(t,e){if("number"!=typeof t)throw Error(`Expected a number for ${e}`);return t}function k(t,e){if("string"==typeof t)return t;let i=L(t,e),r=i.length;if(r<3||r>4)throw Error(`Expected a color with 3 or 4 values for ${e}`);return i}}),a("ayeEa",function(t,i){e(t.exports,"default",()=>d);var r=n("cw4dl"),o=n("50PZ9"),a=n("9yR4T"),s=n("lqNjm"),l=n("eJ4LZ"),h=n("9c0bz"),u=n("lVQul");function c(t,e,i,r){return void 0!==i&&void 0!==r?[i/t,r/e]:void 0!==i?i/t:void 0!==r?r/e:1}class f extends a.default{constructor(t){let e;let i=void 0!==(t=t||{}).opacity?t.opacity:1;super({opacity:i,rotation:void 0!==t.rotation?t.rotation:0,scale:void 0!==t.scale?t.scale:1,displacement:void 0!==t.displacement?t.displacement:[0,0],rotateWithView:void 0!==t.rotateWithView&&t.rotateWithView,declutterMode:t.declutterMode}),this.anchor_=void 0!==t.anchor?t.anchor:[.5,.5],this.normalizedAnchor_=null,this.anchorOrigin_=void 0!==t.anchorOrigin?t.anchorOrigin:"top-left",this.anchorXUnits_=void 0!==t.anchorXUnits?t.anchorXUnits:"fraction",this.anchorYUnits_=void 0!==t.anchorYUnits?t.anchorYUnits:"fraction",this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:null;let r=void 0!==t.img?t.img:null,n=t.src;if((0,l.assert)(!(void 0!==n&&r),"`image` and `src` cannot be provided at the same time"),(void 0===n||0===n.length)&&r&&(n=r.src||(0,u.getUid)(r)),(0,l.assert)(void 0!==n&&n.length>0,"A defined and non-empty `src` or `image` must be provided"),(0,l.assert)(!((void 0!==t.width||void 0!==t.height)&&void 0!==t.scale),"`width` or `height` cannot be provided together with `scale`"),void 0!==t.src?e=o.default.IDLE:void 0!==r&&(e=r instanceof HTMLImageElement?r.complete?r.src?o.default.LOADED:o.default.IDLE:o.default.LOADING:o.default.LOADED),this.color_=void 0!==t.color?(0,s.asArray)(t.color):null,this.iconImage_=(0,h.get)(r,n,this.crossOrigin_,e,this.color_),this.offset_=void 0!==t.offset?t.offset:[0,0],this.offsetOrigin_=void 0!==t.offsetOrigin?t.offsetOrigin:"top-left",this.origin_=null,this.size_=void 0!==t.size?t.size:null,void 0!==t.width||void 0!==t.height){let e,i;if(t.size)[e,i]=t.size;else{let r=this.getImage(1);if(r.width&&r.height)e=r.width,i=r.height;else if(r instanceof HTMLImageElement){this.initialOptions_=t;let e=()=>{if(this.unlistenImageChange(e),!this.initialOptions_)return;let i=this.iconImage_.getSize();this.setScale(c(i[0],i[1],t.width,t.height))};this.listenImageChange(e);return}}void 0!==e&&this.setScale(c(e,i,t.width,t.height))}}clone(){let t,e,i;return this.initialOptions_?(e=this.initialOptions_.width,i=this.initialOptions_.height):t=Array.isArray(t=this.getScale())?t.slice():t,new f({anchor:this.anchor_.slice(),anchorOrigin:this.anchorOrigin_,anchorXUnits:this.anchorXUnits_,anchorYUnits:this.anchorYUnits_,color:this.color_&&this.color_.slice?this.color_.slice():this.color_||void 0,crossOrigin:this.crossOrigin_,offset:this.offset_.slice(),offsetOrigin:this.offsetOrigin_,opacity:this.getOpacity(),rotateWithView:this.getRotateWithView(),rotation:this.getRotation(),scale:t,width:e,height:i,size:null!==this.size_?this.size_.slice():void 0,src:this.getSrc(),displacement:this.getDisplacement().slice(),declutterMode:this.getDeclutterMode()})}getAnchor(){let t=this.normalizedAnchor_;if(!t){t=this.anchor_;let e=this.getSize();if("fraction"==this.anchorXUnits_||"fraction"==this.anchorYUnits_){if(!e)return null;t=this.anchor_.slice(),"fraction"==this.anchorXUnits_&&(t[0]*=e[0]),"fraction"==this.anchorYUnits_&&(t[1]*=e[1])}if("top-left"!=this.anchorOrigin_){if(!e)return null;t===this.anchor_&&(t=this.anchor_.slice()),("top-right"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[0]=-t[0]+e[0]),("bottom-left"==this.anchorOrigin_||"bottom-right"==this.anchorOrigin_)&&(t[1]=-t[1]+e[1])}this.normalizedAnchor_=t}let e=this.getDisplacement(),i=this.getScaleArray();return[t[0]-e[0]/i[0],t[1]+e[1]/i[1]]}setAnchor(t){this.anchor_=t,this.normalizedAnchor_=null}getColor(){return this.color_}getImage(t){return this.iconImage_.getImage(t)}getPixelRatio(t){return this.iconImage_.getPixelRatio(t)}getImageSize(){return this.iconImage_.getSize()}getImageState(){return this.iconImage_.getImageState()}getHitDetectionImage(){return this.iconImage_.getHitDetectionImage()}getOrigin(){if(this.origin_)return this.origin_;let t=this.offset_;if("top-left"!=this.offsetOrigin_){let e=this.getSize(),i=this.iconImage_.getSize();if(!e||!i)return null;t=t.slice(),("top-right"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[0]=i[0]-e[0]-t[0]),("bottom-left"==this.offsetOrigin_||"bottom-right"==this.offsetOrigin_)&&(t[1]=i[1]-e[1]-t[1])}return this.origin_=t,this.origin_}getSrc(){return this.iconImage_.getSrc()}getSize(){return this.size_?this.size_:this.iconImage_.getSize()}getWidth(){let t=this.getScaleArray();return this.size_?this.size_[0]*t[0]:this.iconImage_.getImageState()==o.default.LOADED?this.iconImage_.getSize()[0]*t[0]:void 0}getHeight(){let t=this.getScaleArray();return this.size_?this.size_[1]*t[1]:this.iconImage_.getImageState()==o.default.LOADED?this.iconImage_.getSize()[1]*t[1]:void 0}setScale(t){delete this.initialOptions_,super.setScale(t)}listenImageChange(t){this.iconImage_.addEventListener(r.default.CHANGE,t)}load(){this.iconImage_.load()}unlistenImageChange(t){this.iconImage_.removeEventListener(r.default.CHANGE,t)}}var d=f}),a("9c0bz",function(t,i){e(t.exports,"get",()=>d);var r=n("9LzRi"),o=n("cw4dl"),a=n("50PZ9"),s=n("lqNjm"),l=n("cgxQK"),h=n("kUxvm"),u=n("1Guxd");let c=null;class f extends r.default{constructor(t,e,i,r,o){super(),this.hitDetectionImage_=null,this.image_=t,this.crossOrigin_=i,this.canvas_={},this.color_=o,this.imageState_=void 0===r?a.default.IDLE:r,this.size_=t&&t.width&&t.height?[t.width,t.height]:null,this.src_=e,this.tainted_}initializeImage_(){this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)}isTainted_(){if(void 0===this.tainted_&&this.imageState_===a.default.LOADED){c||(c=(0,l.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})),c.drawImage(this.image_,0,0);try{c.getImageData(0,0,1,1),this.tainted_=!1}catch(t){c=null,this.tainted_=!0}}return!0===this.tainted_}dispatchChangeEvent_(){this.dispatchEvent(o.default.CHANGE)}handleImageError_(){this.imageState_=a.default.ERROR,this.dispatchChangeEvent_()}handleImageLoad_(){this.imageState_=a.default.LOADED,this.size_=[this.image_.width,this.image_.height],this.dispatchChangeEvent_()}getImage(t){return this.image_||this.initializeImage_(),this.replaceColor_(t),this.canvas_[t]?this.canvas_[t]:this.image_}getPixelRatio(t){return this.replaceColor_(t),this.canvas_[t]?t:1}getImageState(){return this.imageState_}getHitDetectionImage(){if(this.image_||this.initializeImage_(),!this.hitDetectionImage_){if(this.isTainted_()){let t=this.size_[0],e=this.size_[1],i=(0,l.createCanvasContext2D)(t,e);i.fillRect(0,0,t,e),this.hitDetectionImage_=i.canvas}else this.hitDetectionImage_=this.image_}return this.hitDetectionImage_}getSize(){return this.size_}getSrc(){return this.src_}load(){if(this.imageState_===a.default.IDLE){this.image_||this.initializeImage_(),this.imageState_=a.default.LOADING;try{void 0!==this.src_&&(this.image_.src=this.src_)}catch(t){this.handleImageError_()}this.image_ instanceof HTMLImageElement&&(0,h.decodeFallback)(this.image_,this.src_).then(t=>{this.image_=t,this.handleImageLoad_()}).catch(this.handleImageError_.bind(this))}}replaceColor_(t){if(!this.color_||this.canvas_[t]||this.imageState_!==a.default.LOADED)return;let e=this.image_,i=document.createElement("canvas");i.width=Math.ceil(e.width*t),i.height=Math.ceil(e.height*t);let r=i.getContext("2d");r.scale(t,t),r.drawImage(e,0,0),r.globalCompositeOperation="multiply",r.fillStyle=(0,s.asString)(this.color_),r.fillRect(0,0,i.width/t,i.height/t),r.globalCompositeOperation="destination-in",r.drawImage(e,0,0),this.canvas_[t]=i}}function d(t,e,i,r,o){let n=void 0===e?void 0:(0,u.shared).get(e,i,o);return n||(n=new f(t,t instanceof HTMLImageElement?t.src||void 0:e,i,r,o),(0,u.shared).set(e,i,o,n)),n}}),a("kUxvm",function(t,i){e(t.exports,"listenImage",()=>c),e(t.exports,"decodeFallback",()=>f),e(t.exports,"decode",()=>d),e(t.exports,"default",()=>p);var r=n("9LzRi"),o=n("cw4dl"),a=n("50PZ9"),s=n("lW8xZ"),l=n("bsgMw"),h=n("eQaCk");class u extends r.default{constructor(t,e,i,r){super(),this.extent=t,this.pixelRatio_=i,this.resolution=e,this.state="function"==typeof r?a.default.IDLE:r,this.image_=null,this.loader="function"==typeof r?r:null}changed(){this.dispatchEvent(o.default.CHANGE)}getExtent(){return this.extent}getImage(){return this.image_}getPixelRatio(){return this.pixelRatio_}getResolution(){return this.resolution}getState(){return this.state}load(){if(this.state==a.default.IDLE&&this.loader){this.state=a.default.LOADING,this.changed();let t=this.getResolution(),e=Array.isArray(t)?t[0]:t;(0,h.toPromise)(()=>this.loader(this.getExtent(),e,this.getPixelRatio())).then(t=>{"image"in t&&(this.image_=t.image),"extent"in t&&(this.extent=t.extent),"resolution"in t&&(this.resolution=t.resolution),"pixelRatio"in t&&(this.pixelRatio_=t.pixelRatio),(t instanceof HTMLImageElement||t instanceof ImageBitmap||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement)&&(this.image_=t),this.state=a.default.LOADED}).catch(t=>{this.state=a.default.ERROR,console.error(t)}).finally(()=>this.changed())}}setImage(t){this.image_=t}setResolution(t){this.resolution=t}}function c(t,e,i){let r=!0,n=!1,a=!1,h=[(0,l.listenOnce)(t,o.default.LOAD,function(){a=!0,n||e()})];return t.src&&s.IMAGE_DECODE?(n=!0,t.decode().then(function(){r&&e()}).catch(function(t){r&&(a?e():i())})):h.push((0,l.listenOnce)(t,o.default.ERROR,i)),function(){r=!1,h.forEach(l.unlistenByKey)}}function f(t,e){var i;return e&&(t.src=e),new Promise(t.src&&s.IMAGE_DECODE?(e,i)=>t.decode().then(()=>e(t)).catch(r=>t.complete&&t.width?e(t):i(r)):(e,r)=>{function o(){a(),e(t)}function n(){a(),r(Error("Image load error"))}function a(){t.removeEventListener("load",o),t.removeEventListener("error",n)}t.addEventListener("load",o),t.addEventListener("error",n),i&&(t.src=i)})}function d(t,e){return e&&(t.src=e),t.src&&s.IMAGE_DECODE&&s.CREATE_IMAGE_BITMAP?t.decode().then(()=>createImageBitmap(t)).catch(e=>{if(t.complete&&t.width)return t;throw e}):f(t)}var p=u}),a("kuKBR",function(t,i){e(t.exports,"default",()=>s);var r=n("2zf1Y"),o=n("6BjcK");class a{constructor(t){t=t||{},this.font_=t.font,this.rotation_=t.rotation,this.rotateWithView_=t.rotateWithView,this.scale_=t.scale,this.scaleArray_=(0,o.toSize)(void 0!==t.scale?t.scale:1),this.text_=t.text,this.textAlign_=t.textAlign,this.justify_=t.justify,this.repeat_=t.repeat,this.textBaseline_=t.textBaseline,this.fill_=void 0!==t.fill?t.fill:new r.default({color:"#333"}),this.maxAngle_=void 0!==t.maxAngle?t.maxAngle:Math.PI/4,this.placement_=void 0!==t.placement?t.placement:"point",this.overflow_=!!t.overflow,this.stroke_=void 0!==t.stroke?t.stroke:null,this.offsetX_=void 0!==t.offsetX?t.offsetX:0,this.offsetY_=void 0!==t.offsetY?t.offsetY:0,this.backgroundFill_=t.backgroundFill?t.backgroundFill:null,this.backgroundStroke_=t.backgroundStroke?t.backgroundStroke:null,this.padding_=void 0===t.padding?null:t.padding}clone(){let t=this.getScale();return new a({font:this.getFont(),placement:this.getPlacement(),repeat:this.getRepeat(),maxAngle:this.getMaxAngle(),overflow:this.getOverflow(),rotation:this.getRotation(),rotateWithView:this.getRotateWithView(),scale:Array.isArray(t)?t.slice():t,text:this.getText(),textAlign:this.getTextAlign(),justify:this.getJustify(),textBaseline:this.getTextBaseline(),fill:this.getFill()?this.getFill().clone():void 0,stroke:this.getStroke()?this.getStroke().clone():void 0,offsetX:this.getOffsetX(),offsetY:this.getOffsetY(),backgroundFill:this.getBackgroundFill()?this.getBackgroundFill().clone():void 0,backgroundStroke:this.getBackgroundStroke()?this.getBackgroundStroke().clone():void 0,padding:this.getPadding()||void 0})}getOverflow(){return this.overflow_}getFont(){return this.font_}getMaxAngle(){return this.maxAngle_}getPlacement(){return this.placement_}getRepeat(){return this.repeat_}getOffsetX(){return this.offsetX_}getOffsetY(){return this.offsetY_}getFill(){return this.fill_}getRotateWithView(){return this.rotateWithView_}getRotation(){return this.rotation_}getScale(){return this.scale_}getScaleArray(){return this.scaleArray_}getStroke(){return this.stroke_}getText(){return this.text_}getTextAlign(){return this.textAlign_}getJustify(){return this.justify_}getTextBaseline(){return this.textBaseline_}getBackgroundFill(){return this.backgroundFill_}getBackgroundStroke(){return this.backgroundStroke_}getPadding(){return this.padding_}setOverflow(t){this.overflow_=t}setFont(t){this.font_=t}setMaxAngle(t){this.maxAngle_=t}setOffsetX(t){this.offsetX_=t}setOffsetY(t){this.offsetY_=t}setPlacement(t){this.placement_=t}setRepeat(t){this.repeat_=t}setRotateWithView(t){this.rotateWithView_=t}setFill(t){this.fill_=t}setRotation(t){this.rotation_=t}setScale(t){this.scale_=t,this.scaleArray_=(0,o.toSize)(void 0!==t?t:1)}setStroke(t){this.stroke_=t}setText(t){this.text_=t}setTextAlign(t){this.textAlign_=t}setJustify(t){this.justify_=t}setTextBaseline(t){this.textBaseline_=t}setBackgroundFill(t){this.backgroundFill_=t}setBackgroundStroke(t){this.backgroundStroke_=t}setPadding(t){this.padding_=t}}var s=a}),a("3oUFG",function(t,i){e(t.exports,"NoneType",()=>s),e(t.exports,"BooleanType",()=>l),e(t.exports,"NumberType",()=>h),e(t.exports,"StringType",()=>u),e(t.exports,"ColorType",()=>c),e(t.exports,"NumberArrayType",()=>f),e(t.exports,"typeName",()=>m),e(t.exports,"overlapsType",()=>y),e(t.exports,"isType",()=>x),e(t.exports,"LiteralExpression",()=>v),e(t.exports,"CallExpression",()=>b),e(t.exports,"newParsingContext",()=>w),e(t.exports,"parse",()=>_),e(t.exports,"Ops",()=>S);var r=n("kBSVF"),o=n("lqNjm");let a=0,s=0,l=1<<a++,h=1<<a++,u=1<<a++,c=1<<a++,f=1<<a++,d=Math.pow(2,a)-1,p={[l]:"boolean",[h]:"number",[u]:"string",[c]:"color",[f]:"number[]"},g=Object.keys(p).map(Number).sort(r.ascending);function m(t){let e=[];for(let i of g)(t&i)===i&&e.push(p[i]);return 0===e.length?"untyped":e.length<3?e.join(" or "):e.slice(0,-1).join(", ")+", or "+e[e.length-1]}function y(t,e){return!!(t&e)}function x(t,e){return t===e}class v{constructor(t,e){this.type=t,this.value=e}}class b{constructor(t,e,...i){this.type=t,this.operator=e,this.args=i}}function w(){return{variables:new Set,properties:new Set,featureId:!1,style:{}}}function _(t,e,i){switch(typeof t){case"boolean":return new v(l,t);case"number":return new v(h,t);case"string":{let e=u;return(0,o.isStringColor)(t)&&(e|=c),(e&i)!==s&&(e&=i),new v(e,t)}}if(!Array.isArray(t))throw Error("Expression must be an array or a primitive value");if(0===t.length)throw Error("Empty expression");if("string"==typeof t[0])return function(t,e,i){let r=t[0],o=E[r];if(!o)throw Error(`Unknown operator: ${r}`);return o(t,e,i)}(t,e,i);for(let e of t)if("number"!=typeof e)throw Error("Expected an array of numbers");let r=f;return(3===t.length||4===t.length)&&(r|=c),i&&(r&=i),new v(r,t)}let S={Get:"get",Var:"var",Concat:"concat",GeometryType:"geometry-type",Any:"any",All:"all",Not:"!",Resolution:"resolution",Zoom:"zoom",Time:"time",Equal:"==",NotEqual:"!=",GreaterThan:">",GreaterThanOrEqualTo:">=",LessThan:"<",LessThanOrEqualTo:"<=",Multiply:"*",Divide:"/",Add:"+",Subtract:"-",Clamp:"clamp",Mod:"%",Pow:"^",Abs:"abs",Floor:"floor",Ceil:"ceil",Round:"round",Sin:"sin",Cos:"cos",Atan:"atan",Sqrt:"sqrt",Match:"match",Between:"between",Interpolate:"interpolate",Case:"case",In:"in",Number:"number",String:"string",Array:"array",Color:"color",Id:"id",Band:"band",Palette:"palette"},E={[S.Get]:C(([t,e])=>void 0!==e?function(t){switch(t){case"string":return u;case"color":return c;case"number":return h;case"boolean":return l;case"number[]":return f;default:throw Error(`Unrecognized type hint: ${t}`)}}(e.value):d,N(1,2),function(t,e){let i=_(t[1],e);if(!(i instanceof v))throw Error("Expected a literal argument for get operation");if("string"!=typeof i.value)throw Error("Expected a string argument for get operation");return(e.properties.add(i.value),3===t.length)?[i,_(t[2],e)]:[i]}),[S.Var]:C(([t])=>t.type,N(1,1),function(t,e,i,r){let o=t[1];if("string"!=typeof o)throw Error("Expected a string argument for var operation");if(e.variables.add(o),!("variables"in e.style)||void 0===e.style.variables[o])return[new v(d,o)];let n=_(e.style.variables[o],e);if(n.value=o,r&&!(r&n.type))throw Error(`The variable ${o} has type ${m(n.type)} but the following type was expected: ${m(r)}`);return[n]}),[S.Id]:C(h|u,A,function(t,e){e.featureId=!0}),[S.Concat]:C(u,N(2,1/0),I(d)),[S.GeometryType]:C(u,A),[S.Resolution]:C(h,A),[S.Zoom]:C(h,A),[S.Time]:C(h,A),[S.Any]:C(l,N(2,1/0),I(l)),[S.All]:C(l,N(2,1/0),I(l)),[S.Not]:C(l,N(1,1),I(l)),[S.Equal]:C(l,N(2,2),I(d),M),[S.NotEqual]:C(l,N(2,2),I(d),M),[S.GreaterThan]:C(l,N(2,2),I(d),M),[S.GreaterThanOrEqualTo]:C(l,N(2,2),I(d),M),[S.LessThan]:C(l,N(2,2),I(d),M),[S.LessThanOrEqualTo]:C(l,N(2,2),I(d),M),[S.Multiply]:C(t=>{let e=h|c;for(let i=0;i<t.length;i++)e&=t[i].type;return e},N(2,1/0),I(h|c),M),[S.Divide]:C(h,N(2,2),I(h)),[S.Add]:C(h,N(2,1/0),I(h)),[S.Subtract]:C(h,N(2,2),I(h)),[S.Clamp]:C(h,N(3,3),I(h)),[S.Mod]:C(h,N(2,2),I(h)),[S.Pow]:C(h,N(2,2),I(h)),[S.Abs]:C(h,N(1,1),I(h)),[S.Floor]:C(h,N(1,1),I(h)),[S.Ceil]:C(h,N(1,1),I(h)),[S.Round]:C(h,N(1,1),I(h)),[S.Sin]:C(h,N(1,1),I(h)),[S.Cos]:C(h,N(1,1),I(h)),[S.Atan]:C(h,N(1,2),I(h)),[S.Sqrt]:C(h,N(1,1),I(h)),[S.Match]:C(t=>{let e=d;for(let i=2;i<t.length;i+=2)e&=t[i].type;return e&t[t.length-1].type},N(4,1/0),P,function(t,e,i,r){let o=t.length-1,n=_(t[1],e).type,a=_(t[t.length-1],e),c=void 0!==r?r&a.type:a.type,f=Array(o-2);for(let i=0;i<o-2;i+=2){let r=_(t[i+2],e),o=_(t[i+3],e);n&=r.type,c&=o.type,f[i]=r,f[i+1]=o}let d=u|h|l;if(!(d&n))throw Error(`Expected an input of type ${m(d)} for the interpolate operation, got ${m(n)} instead`);if(c===s)throw Error("Could not find a common output type for the following match operation: "+JSON.stringify(t));for(let i=0;i<o-2;i+=2){let r=_(t[i+2],e,n),o=_(t[i+3],e,c);f[i]=r,f[i+1]=o}return[_(t[1],e,n),...f,_(t[t.length-1],e,c)]}),[S.Between]:C(l,N(3,3),I(h)),[S.Interpolate]:C(t=>{let e=c|h;for(let i=3;i<t.length;i+=2)e&=t[i].type;return e},N(6,1/0),P,function(t,e,i,r){let o;let n=t[1];switch(n[0]){case"linear":o=1;break;case"exponential":if("number"!=typeof(o=n[1]))throw Error(`Expected a number base for exponential interpolation, got ${JSON.stringify(o)} instead`);break;default:o=null}if(!o)throw Error(`Invalid interpolation type: ${JSON.stringify(n)}`);o=_(o,e);let a=_(t[2],e);if(!(h&a.type))throw Error(`Expected an input of type number for the interpolate operation, got ${m(a.type)} instead`);a=_(t[2],e,h);let s=Array(t.length-3);for(let i=0;i<s.length;i+=2){let r=_(t[i+3],e);if(!(h&r.type))throw Error(`Expected all stop input values in the interpolate operation to be of type number, got ${m(r.type)} at position ${i+2} instead`);let o=_(t[i+4],e);if(!((h|c)&o.type))throw Error(`Expected all stop output values in the interpolate operation to be a number or color, got ${m(o.type)} at position ${i+3} instead`);r=_(t[i+3],e,h),o=_(t[i+4],e,h|c),s[i]=r,s[i+1]=o}return[o,a,...s]}),[S.Case]:C(t=>{let e=d;for(let i=1;i<t.length;i+=2)e&=t[i].type;return e&t[t.length-1].type},N(3,1/0),function(t,e){let i=t[0],r=t.length-1;if(r%2==0)throw Error(`An odd amount of arguments was expected for operation ${i}, got ${JSON.stringify(r)} instead`)},function(t,e,i,r){let o=_(t[t.length-1],e),n=void 0!==r?r&o.type:o.type,a=Array(t.length-1);for(let i=0;i<a.length-1;i+=2){let r=_(t[i+1],e),o=_(t[i+2],e);if(!(l&r.type))throw Error(`Expected all conditions in the case operation to be of type boolean, got ${m(r.type)} at position ${i} instead`);n&=o.type,a[i]=r,a[i+1]=o}if(n===s)throw Error("Could not find a common output type for the following case operation: "+JSON.stringify(t));for(let i=0;i<a.length-1;i+=2)a[i+1]=_(t[i+2],e,n);return a[a.length-1]=_(t[t.length-1],e,n),a}),[S.In]:C(l,N(2,2),function(t,e){let i=t[2];if(!Array.isArray(i))throw Error('The "in" operator was provided a literal value which was not an array as second argument.');if("string"==typeof i[0]){if("literal"!==i[0])throw Error('For the "in" operator, a string array should be wrapped in a "literal" operator to disambiguate from expressions.');if(!Array.isArray(i[1]))throw Error('The "in" operator was provided a literal value which was not an array as second argument.');i=i[1]}let r=u|h,o=Array(i.length);for(let t=0;t<o.length;t++){let n=_(i[t],e);r&=n.type,o[t]=n}if(r===s)throw Error("Could not find a common type for the following in operation: "+JSON.stringify(t));return[_(t[1],e,r),...o]}),[S.Number]:C(h,N(1,1/0),I(d)),[S.String]:C(u,N(1,1/0),I(d)),[S.Array]:C(t=>3===t.length||4===t.length?f|c:f,N(1,1/0),I(h)),[S.Color]:C(c,N(3,4),I(h)),[S.Band]:C(h,N(1,3),I(h)),[S.Palette]:C(c,N(2,2),function(t,e){let i=_(t[1],e,h);if(i.type!==h)throw Error(`The first argument of palette must be an number, got ${m(i.type)} instead`);let r=t[2];if(!Array.isArray(r))throw Error("The second argument of palette must be an array");let o=Array(r.length);for(let t=0;t<o.length;t++){let i=_(r[t],e,c);if(!(i instanceof v))throw Error(`The palette color at index ${t} must be a literal value`);if(!(i.type&c))throw Error(`The palette color at index ${t} should be of type color, got ${m(i.type)} instead`);o[t]=i}return[i,...o]})};function A(t,e){let i=t[0];if(1!==t.length)throw Error(`Expected no arguments for ${i} operation`);return[]}function N(t,e){return function(i,r){let o=i[0],n=i.length-1;if(t===e){if(n!==t)throw Error(`Expected ${t} argument${1===t?"":"s"} for ${o}, got ${n}`)}else if(n<t||n>e){let i=e===1/0?`${t} or more`:`${t} to ${e}`;throw Error(`Expected ${i} arguments for ${o}, got ${n}`)}}}function I(t){return function(e,i){let r=e[0],o=e.length-1,n=Array(o);for(let a=0;a<o;++a){let o=_(e[a+1],i);if(!(t&o.type)){let e=m(t),i=m(o.type);throw Error(`Unexpected type for argument ${a} of ${r} operation, got ${e} but expected ${i}`)}o.type&=t,n[a]=o}return n}}function M(t,e,i){let r=t[0],o=t.length-1,n=d;for(let t=0;t<i.length;++t)n&=i[t].type;if(n===s)throw Error(`No common type could be found for arguments of ${r} operation`);let a=Array(o);for(let i=0;i<o;++i)a[i]=_(t[i+1],e,n);return a}function P(t,e){let i=t[0],r=t.length-1;if(r%2==1)throw Error(`An even amount of arguments was expected for operation ${i}, got ${JSON.stringify(r)} instead`)}function C(t,...e){return function(i,r,o){let n=i[0],a=[];for(let t=0;t<e.length;t++)a=e[t](i,r,a,o)||a;let l="function"==typeof t?t(a):t;if(void 0!==o){if(!(l&o))throw Error(`The following expression was expected to return ${m(o)}, but returns ${m(l)} instead: ${JSON.stringify(i)}`);l&=o}if(l===s)throw Error(`No matching type was found for the following expression: ${JSON.stringify(i)}`);return new b(l,n,...a)}}}),a("5lv5y",function(t,i){e(t.exports,"newEvaluationContext",()=>a),e(t.exports,"buildExpression",()=>s);var r=n("3oUFG"),o=n("lqNjm");function a(){return{variables:{},properties:{},resolution:NaN,featureId:null}}function s(t,e,i){let n=(0,r.parse)(t,i);if(!(0,r.overlapsType)(e,n.type)){let t=(0,r.typeName)(e),i=(0,r.typeName)(n.type);throw Error(`Expected expression to be of type ${t}, got ${i}`)}return function t(e,i){if(e instanceof r.LiteralExpression){if(e.type===r.ColorType&&"string"==typeof e.value){let t=(0,o.fromString)(e.value);return function(){return t}}return function(){return e.value}}let n=e.operator;switch(n){case r.Ops.Number:case r.Ops.String:return function(e,i){let o=e.operator,n=e.args.length,a=Array(n);for(let r=0;r<n;++r)a[r]=t(e.args[r],i);switch(o){case r.Ops.Number:case r.Ops.String:return t=>{for(let e=0;e<n;++e){let i=a[e](t);if(typeof i===o)return i}throw Error(`Expected one of the values to be a ${o}`)};default:throw Error(`Unsupported assertion operator ${o}`)}}(e,i);case r.Ops.Get:case r.Ops.Var:return function(t,e){let i=t.args[0].value;switch(t.operator){case r.Ops.Get:return t=>t.properties[i];case r.Ops.Var:return t=>t.variables[i];default:throw Error(`Unsupported accessor operator ${t.operator}`)}}(e,0);case r.Ops.Id:return t=>t.featureId;case r.Ops.Concat:{let r=e.args.map(e=>t(e,i));return t=>"".concat(...r.map(e=>e(t).toString()))}case r.Ops.Resolution:return t=>t.resolution;case r.Ops.Any:case r.Ops.All:case r.Ops.Not:return function(e,i){let o=e.operator,n=e.args.length,a=Array(n);for(let r=0;r<n;++r)a[r]=t(e.args[r],i);switch(o){case r.Ops.Any:return t=>{for(let e=0;e<n;++e)if(a[e](t))return!0;return!1};case r.Ops.All:return t=>{for(let e=0;e<n;++e)if(!a[e](t))return!1;return!0};case r.Ops.Not:return t=>!a[0](t);default:throw Error(`Unsupported logical operator ${o}`)}}(e,i);case r.Ops.Equal:case r.Ops.NotEqual:case r.Ops.LessThan:case r.Ops.LessThanOrEqualTo:case r.Ops.GreaterThan:case r.Ops.GreaterThanOrEqualTo:return function(e,i){let o=e.operator,n=t(e.args[0],i),a=t(e.args[1],i);switch(o){case r.Ops.Equal:return t=>n(t)===a(t);case r.Ops.NotEqual:return t=>n(t)!==a(t);case r.Ops.LessThan:return t=>n(t)<a(t);case r.Ops.LessThanOrEqualTo:return t=>n(t)<=a(t);case r.Ops.GreaterThan:return t=>n(t)>a(t);case r.Ops.GreaterThanOrEqualTo:return t=>n(t)>=a(t);default:throw Error(`Unsupported comparison operator ${o}`)}}(e,i);case r.Ops.Multiply:case r.Ops.Divide:case r.Ops.Add:case r.Ops.Subtract:case r.Ops.Clamp:case r.Ops.Mod:case r.Ops.Pow:case r.Ops.Abs:case r.Ops.Floor:case r.Ops.Ceil:case r.Ops.Round:case r.Ops.Sin:case r.Ops.Cos:case r.Ops.Atan:case r.Ops.Sqrt:return function(e,i){let o=e.operator,n=e.args.length,a=Array(n);for(let r=0;r<n;++r)a[r]=t(e.args[r],i);switch(o){case r.Ops.Multiply:return t=>{let e=1;for(let i=0;i<n;++i)e*=a[i](t);return e};case r.Ops.Divide:return t=>a[0](t)/a[1](t);case r.Ops.Add:return t=>{let e=0;for(let i=0;i<n;++i)e+=a[i](t);return e};case r.Ops.Subtract:return t=>a[0](t)-a[1](t);case r.Ops.Clamp:return t=>{let e=a[0](t),i=a[1](t);if(e<i)return i;let r=a[2](t);return e>r?r:e};case r.Ops.Mod:return t=>a[0](t)%a[1](t);case r.Ops.Pow:return t=>Math.pow(a[0](t),a[1](t));case r.Ops.Abs:return t=>Math.abs(a[0](t));case r.Ops.Floor:return t=>Math.floor(a[0](t));case r.Ops.Ceil:return t=>Math.ceil(a[0](t));case r.Ops.Round:return t=>Math.round(a[0](t));case r.Ops.Sin:return t=>Math.sin(a[0](t));case r.Ops.Cos:return t=>Math.cos(a[0](t));case r.Ops.Atan:if(2===n)return t=>Math.atan2(a[0](t),a[1](t));return t=>Math.atan(a[0](t));case r.Ops.Sqrt:return t=>Math.sqrt(a[0](t));default:throw Error(`Unsupported numeric operator ${o}`)}}(e,i);case r.Ops.Match:return function(e,i){let r=e.args.length,o=Array(r);for(let n=0;n<r;++n)o[n]=t(e.args[n],i);return t=>{let e=o[0](t);for(let i=1;i<r;i+=2)if(e===o[i](t))return o[i+1](t);return o[r-1](t)}}(e,i);case r.Ops.Interpolate:return function(e,i){let r=e.args.length,n=Array(r);for(let o=0;o<r;++o)n[o]=t(e.args[o],i);return t=>{let e,i;let a=n[0](t),s=n[1](t);for(let h=2;h<r;h+=2){let r=n[h](t),u=n[h+1](t),c=Array.isArray(u);if(c&&(u=(0,o.withAlpha)(u)),r>=s){if(2===h)return u;if(c)return function(t,e,i,r,n,a){if(0==n-i)return r;let s=(0,o.rgbaToLcha)(r),h=(0,o.rgbaToLcha)(a),u=h[2]-s[2];u>180?u-=360:u<-180&&(u+=360);let c=[l(t,e,i,s[0],n,h[0]),l(t,e,i,s[1],n,h[1]),s[2]+l(t,e,i,0,n,u),l(t,e,i,r[3],n,a[3])];return(0,o.normalize)((0,o.lchaToRgba)(c))}(a,s,e,i,r,u);return l(a,s,e,i,r,u)}e=r,i=u}return i}}(e,i);default:throw Error(`Unsupported operator ${n}`)}}(n,i)}function l(t,e,i,r,o,n){let a=o-i;if(0===a)return r;let s=e-i;return r+(1===t?s/a:(Math.pow(t,s)-1)/(Math.pow(t,a)-1))*(n-r)}}),a("6M65l",function(t,i){e(t.exports,"default",()=>v);var r=n("8vXOK"),o=n("ddIVC"),a=n("dVSax"),s=n("6ej6F"),l=n("bCUH1"),h=n("3CYjy"),u=n("14PDX"),c=n("jZquI"),f=n("cgxQK"),d=n("713Fw"),p=n("kBSVF"),g=n("gzr8q"),m=n("lVQul"),y=n("d1ltq");class x extends o.default{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.animatingOrInteracting_,this.hitDetectionImageData_=null,this.renderedFeatures_=null,this.renderedRevision_=-1,this.renderedResolution_=NaN,this.renderedExtent_=(0,c.createEmpty)(),this.wrappedRenderedExtent_=(0,c.createEmpty)(),this.renderedRotation_,this.renderedCenter_=null,this.renderedProjection_=null,this.renderedRenderOrder_=null,this.replayGroup_=null,this.replayGroupChanged=!0,this.declutterExecutorGroup=null,this.clipping=!0,this.compositionContext_=null,this.opacity_=1}renderWorlds(t,e,i){let r=e.extent,o=e.viewState,n=o.center,a=o.resolution,s=o.projection,h=o.rotation,u=s.getExtent(),f=this.getLayer().getSource(),d=e.pixelRatio,p=e.viewHints,g=!(p[l.default.ANIMATING]||p[l.default.INTERACTING]),m=this.compositionContext_,y=Math.round(e.size[0]*d),x=Math.round(e.size[1]*d),v=f.getWrapX()&&s.canWrapX(),b=v?(0,c.getWidth)(u):null,w=v?Math.ceil((r[2]-u[2])/b)+1:1,_=v?Math.floor((r[0]-u[0])/b):0;do{let e=this.getRenderTransform(n,a,h,d,y,x,_*b);t.execute(m,1,e,h,g,void 0,i)}while(++_<w)}setupCompositionContext_(){if(1!==this.opacity_){let t=(0,f.createCanvasContext2D)(this.context.canvas.width,this.context.canvas.height,o.canvasPool);this.compositionContext_=t}else this.compositionContext_=this.context}releaseCompositionContext_(){if(1!==this.opacity_){let t=this.context.globalAlpha;this.context.globalAlpha=this.opacity_,this.context.drawImage(this.compositionContext_.canvas,0,0),this.context.globalAlpha=t,(0,f.releaseCanvas)(this.compositionContext_),(0,o.canvasPool).push(this.compositionContext_.canvas),this.compositionContext_=null}}renderDeclutter(t){this.declutterExecutorGroup&&(this.setupCompositionContext_(),this.renderWorlds(this.declutterExecutorGroup,t,t.declutterTree),this.releaseCompositionContext_())}renderFrame(t,e){let i=t.pixelRatio,r=t.layerStatesArray[t.layerIndex];(0,u.makeScale)(this.pixelTransform,1/i,1/i),(0,u.makeInverse)(this.inversePixelTransform,this.pixelTransform);let o=(0,u.toString)(this.pixelTransform);this.useContainer(e,o,this.getBackground(t));let n=this.context,a=n.canvas,l=this.replayGroup_,h=this.declutterExecutorGroup,f=l&&!l.isEmpty()||h&&!h.isEmpty();if(!f&&!(this.getLayer().hasListener(s.default.PRERENDER)||this.getLayer().hasListener(s.default.POSTRENDER)))return null;let d=Math.round(t.size[0]*i),p=Math.round(t.size[1]*i);a.width!=d||a.height!=p?(a.width=d,a.height=p,a.style.transform!==o&&(a.style.transform=o)):this.containerReused||n.clearRect(0,0,d,p),this.preRender(n,t);let m=t.viewState,y=m.projection;this.opacity_=r.opacity,this.setupCompositionContext_();let x=!1;if(f&&r.extent&&this.clipping){let e=(0,g.fromUserExtent)(r.extent,y);(x=(f=(0,c.intersects)(e,t.extent))&&!(0,c.containsExtent)(e,t.extent))&&this.clipUnrotated(this.compositionContext_,t,e)}return f&&this.renderWorlds(l,t),x&&this.compositionContext_.restore(),this.releaseCompositionContext_(),this.postRender(n,t),this.renderedRotation_!==m.rotation&&(this.renderedRotation_=m.rotation,this.hitDetectionImageData_=null),this.container}getFeatures(t){return new Promise(e=>{if(!this.hitDetectionImageData_&&!this.animatingOrInteracting_){let t=[this.context.canvas.width,this.context.canvas.height];(0,u.apply)(this.pixelTransform,t);let e=this.renderedCenter_,i=this.renderedResolution_,r=this.renderedRotation_,o=this.renderedProjection_,n=this.wrappedRenderedExtent_,a=this.getLayer(),s=[],l=t[0]*h.HIT_DETECT_RESOLUTION,f=t[1]*h.HIT_DETECT_RESOLUTION;s.push(this.getRenderTransform(e,i,r,h.HIT_DETECT_RESOLUTION,l,f,0).slice());let d=a.getSource(),p=o.getExtent();if(d.getWrapX()&&o.canWrapX()&&!(0,c.containsExtent)(p,n)){let t,o=n[0],a=(0,c.getWidth)(p),u=0;for(;o<p[0];)t=a*--u,s.push(this.getRenderTransform(e,i,r,h.HIT_DETECT_RESOLUTION,l,f,t).slice()),o+=a;for(u=0,o=n[2];o>p[2];)t=a*++u,s.push(this.getRenderTransform(e,i,r,h.HIT_DETECT_RESOLUTION,l,f,t).slice()),o-=a}this.hitDetectionImageData_=(0,h.createHitDetectionImageData)(t,s,this.renderedFeatures_,a.getStyleFunction(),n,i,r)}e((0,h.hitDetect)(t,this.renderedFeatures_,this.hitDetectionImageData_))})}forEachFeatureAtCoordinate(t,e,i,r,o){let n;if(!this.replayGroup_)return;let a=e.viewState.resolution,s=e.viewState.rotation,l=this.getLayer(),h={},u=function(t,e,i){let n=(0,m.getUid)(t),a=h[n];if(a){if(!0!==a&&i<a.distanceSq){if(0===i)return h[n]=!0,o.splice(o.lastIndexOf(a),1),r(t,l,e);a.geometry=e,a.distanceSq=i}}else{if(0===i)return h[n]=!0,r(t,l,e);o.push(h[n]={feature:t,layer:l,geometry:e,distanceSq:i,callback:r})}},c=[this.replayGroup_];return this.declutterExecutorGroup&&c.push(this.declutterExecutorGroup),c.some(r=>n=r.forEachFeatureAtCoordinate(t,a,s,i,u,r===this.declutterExecutorGroup&&e.declutterTree?e.declutterTree.all().map(t=>t.value):null)),n}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&this.replayGroup_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}prepareFrame(t){let e,i;let o=this.getLayer(),n=o.getSource();if(!n)return!1;let s=t.viewHints[l.default.ANIMATING],h=t.viewHints[l.default.INTERACTING],u=o.getUpdateWhileAnimating(),f=o.getUpdateWhileInteracting();if(this.ready&&!u&&s||!f&&h)return this.animatingOrInteracting_=!0,!0;this.animatingOrInteracting_=!1;let m=t.extent,x=t.viewState,v=x.projection,b=x.resolution,w=t.pixelRatio,_=o.getRevision(),S=o.getRenderBuffer(),E=o.getRenderOrder();void 0===E&&(E=d.defaultOrder);let A=x.center.slice(),N=(0,c.buffer)(m,S*b),I=N.slice(),M=[N.slice()],P=v.getExtent();if(n.getWrapX()&&v.canWrapX()&&!(0,c.containsExtent)(P,t.extent)){let t=(0,c.getWidth)(P),e=Math.max((0,c.getWidth)(N)/2,t);N[0]=P[0]-e,N[2]=P[2]+e,(0,y.wrapX)(A,v);let i=(0,c.wrapX)(M[0],v);i[0]<P[0]&&i[2]<P[2]?M.push([i[0]+t,i[1],i[2]+t,i[3]]):i[0]>P[0]&&i[2]>P[2]&&M.push([i[0]-t,i[1],i[2]-t,i[3]])}if(this.ready&&this.renderedResolution_==b&&this.renderedRevision_==_&&this.renderedRenderOrder_==E&&(0,c.containsExtent)(this.wrappedRenderedExtent_,N))return(0,p.equals)(this.renderedExtent_,I)||(this.hitDetectionImageData_=null,this.renderedExtent_=I),this.renderedCenter_=A,this.replayGroupChanged=!1,!0;this.replayGroup_=null;let C=new r.default((0,d.getTolerance)(b,w),N,b,w);this.getLayer().getDeclutter()&&(e=new r.default((0,d.getTolerance)(b,w),N,b,w));let T=(0,g.getUserProjection)();if(T){for(let t=0,e=M.length;t<e;++t){let e=M[t],i=(0,g.toUserExtent)(e,v);n.loadFeatures(i,(0,g.toUserResolution)(b,v),T)}i=(0,g.getTransformFromProjections)(T,v)}else for(let t=0,e=M.length;t<e;++t)n.loadFeatures(M[t],b,v);let L=(0,d.getSquaredTolerance)(b,w),R=!0,O=t=>{let r;let n=t.getStyleFunction()||o.getStyleFunction();if(n&&(r=n(t,b)),r){let o=this.renderFeature(t,L,r,C,i,e);R=R&&!o}},k=(0,g.toUserExtent)(N,v),G=n.getFeaturesInExtent(k);E&&G.sort(E);for(let t=0,e=G.length;t<e;++t)O(G[t]);this.renderedFeatures_=G,this.ready=R;let Z=C.finish(),F=new a.default(N,b,w,n.getOverlaps(),Z,o.getRenderBuffer());return e&&(this.declutterExecutorGroup=new a.default(N,b,w,n.getOverlaps(),e.finish(),o.getRenderBuffer())),this.renderedResolution_=b,this.renderedRevision_=_,this.renderedRenderOrder_=E,this.renderedExtent_=I,this.wrappedRenderedExtent_=N,this.renderedCenter_=A,this.renderedProjection_=v,this.replayGroup_=F,this.hitDetectionImageData_=null,this.replayGroupChanged=!0,!0}renderFeature(t,e,i,r,o,n){if(!i)return!1;let a=!1;if(Array.isArray(i))for(let s=0,l=i.length;s<l;++s)a=(0,d.renderFeature)(r,t,i[s],e,this.boundHandleStyleImageChange_,o,n)||a;else a=(0,d.renderFeature)(r,t,i,e,this.boundHandleStyleImageChange_,o,n);return a}}var v=x}),a("8vXOK",function(t,i){e(t.exports,"default",()=>u);var r=n("hycMe"),o=n("6sg4t"),a=n("1aWBL"),s=n("jODk1"),l=n("a0SEX");let h={Circle:s.default,Default:r.default,Image:o.default,LineString:a.default,Polygon:s.default,Text:l.default};var u=class{constructor(t,e,i,r){this.tolerance_=t,this.maxExtent_=e,this.pixelRatio_=r,this.resolution_=i,this.buildersByZIndex_={}}finish(){let t={};for(let e in this.buildersByZIndex_){t[e]=t[e]||{};let i=this.buildersByZIndex_[e];for(let r in i){let o=i[r].finish();t[e][r]=o}}return t}getBuilder(t,e){let i=void 0!==t?t.toString():"0",r=this.buildersByZIndex_[i];void 0===r&&(r={},this.buildersByZIndex_[i]=r);let o=r[e];return void 0===o&&(o=new h[e](this.tolerance_,this.maxExtent_,this.resolution_,this.pixelRatio_),r[e]=o),o}}}),a("hycMe",function(t,i){e(t.exports,"default",()=>d);var r=n("2CzCP"),o=n("iweSO"),a=n("eGc18"),s=n("hlW0i"),l=n("jZquI"),h=n("aHG4Z"),u=n("kBSVF"),c=n("iTdJV");class f extends a.default{constructor(t,e,i,r){super(),this.tolerance=t,this.maxExtent=e,this.pixelRatio=r,this.maxLineWidth=0,this.resolution=i,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_=null,this.bufferedMaxExtent_=null,this.instructions=[],this.coordinates=[],this.tmpCoordinate_=[],this.hitDetectionInstructions=[],this.state={}}applyPixelRatio(t){let e=this.pixelRatio;return 1==e?t:t.map(function(t){return t*e})}appendFlatPointCoordinates(t,e){let i=this.getBufferedMaxExtent(),r=this.tmpCoordinate_,o=this.coordinates,n=o.length;for(let a=0,s=t.length;a<s;a+=e)r[0]=t[a],r[1]=t[a+1],(0,l.containsCoordinate)(i,r)&&(o[n++]=r[0],o[n++]=r[1]);return n}appendFlatLineCoordinates(t,e,i,r,n,a){let s,h,u;let c=this.coordinates,f=c.length,d=this.getBufferedMaxExtent();a&&(e+=r);let p=t[e],g=t[e+1],m=this.tmpCoordinate_,y=!0;for(s=e+r;s<i;s+=r)m[0]=t[s],m[1]=t[s+1],(u=(0,l.coordinateRelationship)(d,m))!==h?(y&&(c[f++]=p,c[f++]=g,y=!1),c[f++]=m[0],c[f++]=m[1]):u===o.default.INTERSECTING?(c[f++]=m[0],c[f++]=m[1],y=!1):y=!0,p=m[0],g=m[1],h=u;return(n&&y||s===e+r)&&(c[f++]=p,c[f++]=g),f}drawCustomCoordinates_(t,e,i,r,o){for(let n=0,a=i.length;n<a;++n){let a=i[n],s=this.appendFlatLineCoordinates(t,e,a,r,!1,!1);o.push(s),e=a}return e}drawCustom(t,e,i,o){let n,a,s,l,h;this.beginGeometry(t,e);let u=t.getType(),f=t.getStride(),d=this.coordinates.length;switch(u){case"MultiPolygon":n=t.getOrientedFlatCoordinates(),l=[];let p=t.getEndss();h=0;for(let t=0,e=p.length;t<e;++t){let e=[];h=this.drawCustomCoordinates_(n,h,p[t],f,e),l.push(e)}this.instructions.push([r.default.CUSTOM,d,l,t,i,c.inflateMultiCoordinatesArray]),this.hitDetectionInstructions.push([r.default.CUSTOM,d,l,t,o||i,c.inflateMultiCoordinatesArray]);break;case"Polygon":case"MultiLineString":s=[],n="Polygon"==u?t.getOrientedFlatCoordinates():t.getFlatCoordinates(),h=this.drawCustomCoordinates_(n,0,t.getEnds(),f,s),this.instructions.push([r.default.CUSTOM,d,s,t,i,c.inflateCoordinatesArray]),this.hitDetectionInstructions.push([r.default.CUSTOM,d,s,t,o||i,c.inflateCoordinatesArray]);break;case"LineString":case"Circle":n=t.getFlatCoordinates(),a=this.appendFlatLineCoordinates(n,0,n.length,f,!1,!1),this.instructions.push([r.default.CUSTOM,d,a,t,i,c.inflateCoordinates]),this.hitDetectionInstructions.push([r.default.CUSTOM,d,a,t,o||i,c.inflateCoordinates]);break;case"MultiPoint":n=t.getFlatCoordinates(),(a=this.appendFlatPointCoordinates(n,f))>d&&(this.instructions.push([r.default.CUSTOM,d,a,t,i,c.inflateCoordinates]),this.hitDetectionInstructions.push([r.default.CUSTOM,d,a,t,o||i,c.inflateCoordinates]));break;case"Point":n=t.getFlatCoordinates(),this.coordinates.push(n[0],n[1]),a=this.coordinates.length,this.instructions.push([r.default.CUSTOM,d,a,t,i]),this.hitDetectionInstructions.push([r.default.CUSTOM,d,a,t,o||i])}this.endGeometry(e)}beginGeometry(t,e){this.beginGeometryInstruction1_=[r.default.BEGIN_GEOMETRY,e,0,t],this.instructions.push(this.beginGeometryInstruction1_),this.beginGeometryInstruction2_=[r.default.BEGIN_GEOMETRY,e,0,t],this.hitDetectionInstructions.push(this.beginGeometryInstruction2_)}finish(){return{instructions:this.instructions,hitDetectionInstructions:this.hitDetectionInstructions,coordinates:this.coordinates}}reverseHitDetectionInstructions(){let t,e,i;let o=this.hitDetectionInstructions;o.reverse();let n=o.length,a=-1;for(t=0;t<n;++t)(i=(e=o[t])[0])==r.default.END_GEOMETRY?a=t:i==r.default.BEGIN_GEOMETRY&&(e[2]=t,(0,u.reverseSubArray)(this.hitDetectionInstructions,a,t),a=-1)}setFillStrokeStyle(t,e){let i=this.state;if(t){let e=t.getColor();i.fillStyle=(0,s.asColorLike)(e||h.defaultFillStyle)}else i.fillStyle=void 0;if(e){let t=e.getColor();i.strokeStyle=(0,s.asColorLike)(t||h.defaultStrokeStyle);let r=e.getLineCap();i.lineCap=void 0!==r?r:h.defaultLineCap;let o=e.getLineDash();i.lineDash=o?o.slice():h.defaultLineDash;let n=e.getLineDashOffset();i.lineDashOffset=n||h.defaultLineDashOffset;let a=e.getLineJoin();i.lineJoin=void 0!==a?a:h.defaultLineJoin;let l=e.getWidth();i.lineWidth=void 0!==l?l:h.defaultLineWidth;let u=e.getMiterLimit();i.miterLimit=void 0!==u?u:h.defaultMiterLimit,i.lineWidth>this.maxLineWidth&&(this.maxLineWidth=i.lineWidth,this.bufferedMaxExtent_=null)}else i.strokeStyle=void 0,i.lineCap=void 0,i.lineDash=null,i.lineDashOffset=void 0,i.lineJoin=void 0,i.lineWidth=void 0,i.miterLimit=void 0}createFill(t){let e=t.fillStyle,i=[r.default.SET_FILL_STYLE,e];return"string"!=typeof e&&i.push(!0),i}applyStroke(t){this.instructions.push(this.createStroke(t))}createStroke(t){return[r.default.SET_STROKE_STYLE,t.strokeStyle,t.lineWidth*this.pixelRatio,t.lineCap,t.lineJoin,t.miterLimit,this.applyPixelRatio(t.lineDash),t.lineDashOffset*this.pixelRatio]}updateFillStyle(t,e){let i=t.fillStyle;("string"!=typeof i||t.currentFillStyle!=i)&&(void 0!==i&&this.instructions.push(e.call(this,t)),t.currentFillStyle=i)}updateStrokeStyle(t,e){let i=t.strokeStyle,r=t.lineCap,o=t.lineDash,n=t.lineDashOffset,a=t.lineJoin,s=t.lineWidth,l=t.miterLimit;t.currentStrokeStyle==i&&t.currentLineCap==r&&(o==t.currentLineDash||(0,u.equals)(t.currentLineDash,o))&&t.currentLineDashOffset==n&&t.currentLineJoin==a&&t.currentLineWidth==s&&t.currentMiterLimit==l||(void 0!==i&&e.call(this,t),t.currentStrokeStyle=i,t.currentLineCap=r,t.currentLineDash=o,t.currentLineDashOffset=n,t.currentLineJoin=a,t.currentLineWidth=s,t.currentMiterLimit=l)}endGeometry(t){this.beginGeometryInstruction1_[2]=this.instructions.length,this.beginGeometryInstruction1_=null,this.beginGeometryInstruction2_[2]=this.hitDetectionInstructions.length,this.beginGeometryInstruction2_=null;let e=[r.default.END_GEOMETRY,t];this.instructions.push(e),this.hitDetectionInstructions.push(e)}getBufferedMaxExtent(){if(!this.bufferedMaxExtent_&&(this.bufferedMaxExtent_=(0,l.clone)(this.maxExtent),this.maxLineWidth>0)){let t=this.resolution*(this.maxLineWidth+1)/2;(0,l.buffer)(this.bufferedMaxExtent_,t,this.bufferedMaxExtent_)}return this.bufferedMaxExtent_}}var d=f}),a("2CzCP",function(t,i){e(t.exports,"fillInstruction",()=>o),e(t.exports,"strokeInstruction",()=>n),e(t.exports,"beginPathInstruction",()=>a),e(t.exports,"closePathInstruction",()=>s),e(t.exports,"default",()=>l);let r={BEGIN_GEOMETRY:0,BEGIN_PATH:1,CIRCLE:2,CLOSE_PATH:3,CUSTOM:4,DRAW_CHARS:5,DRAW_IMAGE:6,END_GEOMETRY:7,FILL:8,MOVE_TO_LINE_TO:9,SET_FILL_STYLE:10,SET_STROKE_STYLE:11,STROKE:12},o=[r.FILL],n=[r.STROKE],a=[r.BEGIN_PATH],s=[r.CLOSE_PATH];var l=r}),a("eGc18",function(t,i){e(t.exports,"default",()=>r);var r=class{drawCustom(t,e,i,r){}drawGeometry(t){}setStyle(t){}drawCircle(t,e){}drawFeature(t,e){}drawGeometryCollection(t,e){}drawLineString(t,e){}drawMultiLineString(t,e){}drawMultiPoint(t,e){}drawMultiPolygon(t,e){}drawPoint(t,e){}drawPolygon(t,e){}drawText(t,e){}setFillStrokeStyle(t,e){}setImageStyle(t,e){}setTextStyle(t,e){}}}),a("6sg4t",function(t,i){e(t.exports,"default",()=>s);var r=n("hycMe"),o=n("2CzCP");class a extends r.default{constructor(t,e,i,r){super(t,e,i,r),this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.anchorX_=void 0,this.anchorY_=void 0,this.height_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.scale_=void 0,this.width_=void 0,this.declutterMode_=void 0,this.declutterImageWithText_=void 0}drawPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([o.default.DRAW_IMAGE,n,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,n,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}drawMultiPoint(t,e){if(!this.image_)return;this.beginGeometry(t,e);let i=t.getFlatCoordinates(),r=t.getStride(),n=this.coordinates.length,a=this.appendFlatPointCoordinates(i,r);this.instructions.push([o.default.DRAW_IMAGE,n,a,this.image_,this.anchorX_*this.imagePixelRatio_,this.anchorY_*this.imagePixelRatio_,Math.ceil(this.height_*this.imagePixelRatio_),this.opacity_,this.originX_*this.imagePixelRatio_,this.originY_*this.imagePixelRatio_,this.rotateWithView_,this.rotation_,[this.scale_[0]*this.pixelRatio/this.imagePixelRatio_,this.scale_[1]*this.pixelRatio/this.imagePixelRatio_],Math.ceil(this.width_*this.imagePixelRatio_),this.declutterMode_,this.declutterImageWithText_]),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,n,a,this.hitDetectionImage_,this.anchorX_,this.anchorY_,this.height_,1,this.originX_,this.originY_,this.rotateWithView_,this.rotation_,this.scale_,this.width_,this.declutterMode_,this.declutterImageWithText_]),this.endGeometry(e)}finish(){return this.reverseHitDetectionInstructions(),this.anchorX_=void 0,this.anchorY_=void 0,this.hitDetectionImage_=null,this.image_=null,this.imagePixelRatio_=void 0,this.height_=void 0,this.scale_=void 0,this.opacity_=void 0,this.originX_=void 0,this.originY_=void 0,this.rotateWithView_=void 0,this.rotation_=void 0,this.width_=void 0,super.finish()}setImageStyle(t,e){let i=t.getAnchor(),r=t.getSize(),o=t.getOrigin();this.imagePixelRatio_=t.getPixelRatio(this.pixelRatio),this.anchorX_=i[0],this.anchorY_=i[1],this.hitDetectionImage_=t.getHitDetectionImage(),this.image_=t.getImage(this.pixelRatio),this.height_=r[1],this.opacity_=t.getOpacity(),this.originX_=o[0],this.originY_=o[1],this.rotateWithView_=t.getRotateWithView(),this.rotation_=t.getRotation(),this.scale_=t.getScaleArray(),this.width_=r[0],this.declutterMode_=t.getDeclutterMode(),this.declutterImageWithText_=e}}var s=a}),a("1aWBL",function(t,i){e(t.exports,"default",()=>l);var r=n("hycMe"),o=n("2CzCP"),a=n("aHG4Z");class s extends r.default{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinates_(t,e,i,r){let n=this.coordinates.length,a=this.appendFlatLineCoordinates(t,e,i,r,!1,!1),s=[o.default.MOVE_TO_LINE_TO,n,a];return this.instructions.push(s),this.hitDetectionInstructions.push(s),i}drawLineString(t,e){let i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0===r||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.defaultLineDash,a.defaultLineDashOffset],o.beginPathInstruction);let s=t.getFlatCoordinates(),l=t.getStride();this.drawFlatCoordinates_(s,0,s.length,l),this.hitDetectionInstructions.push(o.strokeInstruction),this.endGeometry(e)}drawMultiLineString(t,e){let i=this.state,r=i.strokeStyle,n=i.lineWidth;if(void 0===r||void 0===n)return;this.updateStrokeStyle(i,this.applyStroke),this.beginGeometry(t,e),this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.defaultLineDash,a.defaultLineDashOffset],o.beginPathInstruction);let s=t.getEnds(),l=t.getFlatCoordinates(),h=t.getStride(),u=0;for(let t=0,e=s.length;t<e;++t)u=this.drawFlatCoordinates_(l,u,s[t],h);this.hitDetectionInstructions.push(o.strokeInstruction),this.endGeometry(e)}finish(){let t=this.state;return void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&this.instructions.push(o.strokeInstruction),this.reverseHitDetectionInstructions(),this.state=null,super.finish()}applyStroke(t){void 0!=t.lastStroke&&t.lastStroke!=this.coordinates.length&&(this.instructions.push(o.strokeInstruction),t.lastStroke=this.coordinates.length),t.lastStroke=0,super.applyStroke(t),this.instructions.push(o.beginPathInstruction)}}var l=s}),a("jODk1",function(t,i){e(t.exports,"default",()=>h);var r=n("hycMe"),o=n("2CzCP"),a=n("aHG4Z"),s=n("exEDy");class l extends r.default{constructor(t,e,i,r){super(t,e,i,r)}drawFlatCoordinatess_(t,e,i,r){let n=this.state,a=void 0!==n.fillStyle,s=void 0!==n.strokeStyle,l=i.length;this.instructions.push(o.beginPathInstruction),this.hitDetectionInstructions.push(o.beginPathInstruction);for(let n=0;n<l;++n){let a=i[n],l=this.coordinates.length,h=this.appendFlatLineCoordinates(t,e,a,r,!0,!s),u=[o.default.MOVE_TO_LINE_TO,l,h];this.instructions.push(u),this.hitDetectionInstructions.push(u),s&&(this.instructions.push(o.closePathInstruction),this.hitDetectionInstructions.push(o.closePathInstruction)),e=a}return a&&(this.instructions.push(o.fillInstruction),this.hitDetectionInstructions.push(o.fillInstruction)),s&&(this.instructions.push(o.strokeInstruction),this.hitDetectionInstructions.push(o.strokeInstruction)),e}drawCircle(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([o.default.SET_FILL_STYLE,a.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.defaultLineDash,a.defaultLineDashOffset]);let s=t.getFlatCoordinates(),l=t.getStride(),h=this.coordinates.length;this.appendFlatLineCoordinates(s,0,s.length,l,!1,!1);let u=[o.default.CIRCLE,h];this.instructions.push(o.beginPathInstruction,u),this.hitDetectionInstructions.push(o.beginPathInstruction,u),void 0!==i.fillStyle&&(this.instructions.push(o.fillInstruction),this.hitDetectionInstructions.push(o.fillInstruction)),void 0!==i.strokeStyle&&(this.instructions.push(o.strokeInstruction),this.hitDetectionInstructions.push(o.strokeInstruction)),this.endGeometry(e)}drawPolygon(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([o.default.SET_FILL_STYLE,a.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.defaultLineDash,a.defaultLineDashOffset]);let s=t.getEnds(),l=t.getOrientedFlatCoordinates(),h=t.getStride();this.drawFlatCoordinatess_(l,0,s,h),this.endGeometry(e)}drawMultiPolygon(t,e){let i=this.state,r=i.fillStyle,n=i.strokeStyle;if(void 0===r&&void 0===n)return;this.setFillStrokeStyles_(),this.beginGeometry(t,e),void 0!==i.fillStyle&&this.hitDetectionInstructions.push([o.default.SET_FILL_STYLE,a.defaultFillStyle]),void 0!==i.strokeStyle&&this.hitDetectionInstructions.push([o.default.SET_STROKE_STYLE,i.strokeStyle,i.lineWidth,i.lineCap,i.lineJoin,i.miterLimit,a.defaultLineDash,a.defaultLineDashOffset]);let s=t.getEndss(),l=t.getOrientedFlatCoordinates(),h=t.getStride(),u=0;for(let t=0,e=s.length;t<e;++t)u=this.drawFlatCoordinatess_(l,u,s[t],h);this.endGeometry(e)}finish(){this.reverseHitDetectionInstructions(),this.state=null;let t=this.tolerance;if(0!==t){let e=this.coordinates;for(let i=0,r=e.length;i<r;++i)e[i]=(0,s.snap)(e[i],t)}return super.finish()}setFillStrokeStyles_(){let t=this.state;void 0!==t.fillStyle&&this.updateFillStyle(t,this.createFill),void 0!==t.strokeStyle&&this.updateStrokeStyle(t,this.applyStroke)}}var h=l}),a("a0SEX",function(t,i){e(t.exports,"TEXT_ALIGN",()=>f),e(t.exports,"default",()=>p);var r=n("hycMe"),o=n("2CzCP"),a=n("hlW0i"),s=n("aHG4Z"),l=n("lVQul"),h=n("jZquI"),u=n("aGiJY"),c=n("b6jom");let f={left:0,center:.5,right:1,top:0,middle:.5,hanging:.2,alphabetic:.8,ideographic:.8,bottom:1};class d extends r.default{constructor(t,e,i,r){super(t,e,i,r),this.labels_=null,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=void 0,this.textRotation_=0,this.textFillState_=null,this.fillStates={},this.fillStates[s.defaultFillStyle]={fillStyle:s.defaultFillStyle},this.textStrokeState_=null,this.strokeStates={},this.textState_={},this.textStates={},this.textKey_="",this.fillKey_="",this.strokeKey_="",this.declutterImageWithText_=void 0}finish(){let t=super.finish();return t.textStates=this.textStates,t.fillStates=this.fillStates,t.strokeStates=this.strokeStates,t}drawText(t,e){let i=this.textFillState_,r=this.textStrokeState_,n=this.textState_;if(""===this.text_||!n||!i&&!r)return;let a=this.coordinates,l=a.length,f=t.getType(),d=null,p=t.getStride();if("line"===n.placement&&("LineString"==f||"MultiLineString"==f||"Polygon"==f||"MultiPolygon"==f)){let i;if(!(0,h.intersects)(this.getBufferedMaxExtent(),t.getExtent()))return;if(d=t.getFlatCoordinates(),"LineString"==f)i=[d.length];else if("MultiLineString"==f)i=t.getEnds();else if("Polygon"==f)i=t.getEnds().slice(0,1);else if("MultiPolygon"==f){let e=t.getEndss();i=[];for(let t=0,r=e.length;t<r;++t)i.push(e[t][0])}this.beginGeometry(t,e);let r=n.repeat,o=r?void 0:n.textAlign,s=0;for(let t=0,e=i.length;t<e;++t){let e;e=r?(0,u.lineChunk)(r*this.resolution,d,s,i[t],p):[d.slice(s,i[t])];for(let r=0,h=e.length;r<h;++r){let h=e[r],u=0,f=h.length;if(void 0==o){let t=(0,c.matchingChunk)(n.maxAngle,h,0,h.length,2);u=t[0],f=t[1]}for(let t=u;t<f;t+=p)a.push(h[t],h[t+1]);let d=a.length;s=i[t],this.drawChars_(l,d),l=d}}this.endGeometry(e)}else{let i=n.overflow?null:[];switch(f){case"Point":case"MultiPoint":d=t.getFlatCoordinates();break;case"LineString":d=t.getFlatMidpoint();break;case"Circle":d=t.getCenter();break;case"MultiLineString":d=t.getFlatMidpoints(),p=2;break;case"Polygon":d=t.getFlatInteriorPoint(),n.overflow||i.push(d[2]/this.resolution),p=3;break;case"MultiPolygon":let r=t.getFlatInteriorPoints();d=[];for(let t=0,e=r.length;t<e;t+=3)n.overflow||i.push(r[t+2]/this.resolution),d.push(r[t],r[t+1]);if(0===d.length)return;p=2}let h=this.appendFlatPointCoordinates(d,p);if(h===l)return;if(i&&(h-l)/2!=d.length/p){let t=l/2;i=i.filter((e,i)=>{let r=a[(t+i)*2]===d[i*p]&&a[(t+i)*2+1]===d[i*p+1];return!r&&--t,r})}this.saveTextStates_(),(n.backgroundFill||n.backgroundStroke)&&(this.setFillStrokeStyle(n.backgroundFill,n.backgroundStroke),n.backgroundFill&&this.updateFillStyle(this.state,this.createFill),n.backgroundStroke&&(this.updateStrokeStyle(this.state,this.applyStroke),this.hitDetectionInstructions.push(this.createStroke(this.state)))),this.beginGeometry(t,e);let u=n.padding;if(u!=s.defaultPadding&&(n.scale[0]<0||n.scale[1]<0)){let t=n.padding[0],e=n.padding[1],i=n.padding[2],r=n.padding[3];n.scale[0]<0&&(e=-e,r=-r),n.scale[1]<0&&(t=-t,i=-i),u=[t,e,i,r]}let c=this.pixelRatio;this.instructions.push([o.default.DRAW_IMAGE,l,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[1,1],NaN,void 0,this.declutterImageWithText_,u==s.defaultPadding?s.defaultPadding:u.map(function(t){return t*c}),!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]);let g=1/c,m=this.state.fillStyle;n.backgroundFill&&(this.state.fillStyle=s.defaultFillStyle,this.hitDetectionInstructions.push(this.createFill(this.state))),this.hitDetectionInstructions.push([o.default.DRAW_IMAGE,l,h,null,NaN,NaN,NaN,1,0,0,this.textRotateWithView_,this.textRotation_,[g,g],NaN,void 0,this.declutterImageWithText_,u,!!n.backgroundFill,!!n.backgroundStroke,this.text_,this.textKey_,this.strokeKey_,this.fillKey_?s.defaultFillStyle:this.fillKey_,this.textOffsetX_,this.textOffsetY_,i]),n.backgroundFill&&(this.state.fillStyle=m,this.hitDetectionInstructions.push(this.createFill(this.state))),this.endGeometry(e)}}saveTextStates_(){let t=this.textStrokeState_,e=this.textState_,i=this.textFillState_,r=this.strokeKey_;!t||r in this.strokeStates||(this.strokeStates[r]={strokeStyle:t.strokeStyle,lineCap:t.lineCap,lineDashOffset:t.lineDashOffset,lineWidth:t.lineWidth,lineJoin:t.lineJoin,miterLimit:t.miterLimit,lineDash:t.lineDash});let o=this.textKey_;o in this.textStates||(this.textStates[o]={font:e.font,textAlign:e.textAlign||s.defaultTextAlign,justify:e.justify,textBaseline:e.textBaseline||s.defaultTextBaseline,scale:e.scale});let n=this.fillKey_;!i||n in this.fillStates||(this.fillStates[n]={fillStyle:i.fillStyle})}drawChars_(t,e){let i=this.textStrokeState_,r=this.textState_,n=this.strokeKey_,a=this.textKey_,l=this.fillKey_;this.saveTextStates_();let h=this.pixelRatio,u=f[r.textBaseline],c=this.textOffsetY_*h,d=this.text_,p=i?i.lineWidth*Math.abs(r.scale[0])/2:0;this.instructions.push([o.default.DRAW_CHARS,t,e,u,r.overflow,l,r.maxAngle,h,c,n,p*h,d,a,1]),this.hitDetectionInstructions.push([o.default.DRAW_CHARS,t,e,u,r.overflow,l?s.defaultFillStyle:l,r.maxAngle,h,c,n,p*h,d,a,1/h])}setTextStyle(t,e){let i,r,o;if(t){let e=t.getFill();e?((r=this.textFillState_)||(r={},this.textFillState_=r),r.fillStyle=(0,a.asColorLike)(e.getColor()||s.defaultFillStyle)):(r=null,this.textFillState_=r);let n=t.getStroke();if(n){(o=this.textStrokeState_)||(o={},this.textStrokeState_=o);let t=n.getLineDash(),e=n.getLineDashOffset(),i=n.getWidth(),r=n.getMiterLimit();o.lineCap=n.getLineCap()||s.defaultLineCap,o.lineDash=t?t.slice():s.defaultLineDash,o.lineDashOffset=void 0===e?s.defaultLineDashOffset:e,o.lineJoin=n.getLineJoin()||s.defaultLineJoin,o.lineWidth=void 0===i?s.defaultLineWidth:i,o.miterLimit=void 0===r?s.defaultMiterLimit:r,o.strokeStyle=(0,a.asColorLike)(n.getColor()||s.defaultStrokeStyle)}else o=null,this.textStrokeState_=o;i=this.textState_;let h=t.getFont()||s.defaultFont;(0,s.registerFont)(h);let u=t.getScaleArray();i.overflow=t.getOverflow(),i.font=h,i.maxAngle=t.getMaxAngle(),i.placement=t.getPlacement(),i.textAlign=t.getTextAlign(),i.repeat=t.getRepeat(),i.justify=t.getJustify(),i.textBaseline=t.getTextBaseline()||s.defaultTextBaseline,i.backgroundFill=t.getBackgroundFill(),i.backgroundStroke=t.getBackgroundStroke(),i.padding=t.getPadding()||s.defaultPadding,i.scale=void 0===u?[1,1]:u;let c=t.getOffsetX(),f=t.getOffsetY(),d=t.getRotateWithView(),p=t.getRotation();this.text_=t.getText()||"",this.textOffsetX_=void 0===c?0:c,this.textOffsetY_=void 0===f?0:f,this.textRotateWithView_=void 0!==d&&d,this.textRotation_=void 0===p?0:p,this.strokeKey_=o?("string"==typeof o.strokeStyle?o.strokeStyle:(0,l.getUid)(o.strokeStyle))+o.lineCap+o.lineDashOffset+"|"+o.lineWidth+o.lineJoin+o.miterLimit+"["+o.lineDash.join()+"]":"",this.textKey_=i.font+i.scale+(i.textAlign||"?")+(i.repeat||"?")+(i.justify||"?")+(i.textBaseline||"?"),this.fillKey_=r?"string"==typeof r.fillStyle?r.fillStyle:"|"+(0,l.getUid)(r.fillStyle):""}else this.text_="";this.declutterImageWithText_=e}}var p=d}),a("aGiJY",function(t,i){e(t.exports,"lineChunk",()=>o);var r=n("a6roo");function o(t,e,i,o,n){let a=[],s=i,l=0,h=e.slice(i,2);for(;l<t&&s+n<o;){let[i,o]=h.slice(-2),u=e[s+n],c=e[s+n+1],f=Math.sqrt((u-i)*(u-i)+(c-o)*(c-o));if((l+=f)>=t){let e=(t-l+f)/f,d=(0,r.lerp)(i,u,e),p=(0,r.lerp)(o,c,e);h.push(d,p),a.push(h),h=[d,p],l==t&&(s+=n),l=0}else if(l<t)h.push(e[s+n],e[s+n+1]),s+=n;else{let t=f-l,e=(0,r.lerp)(i,u,t/f),d=(0,r.lerp)(o,c,t/f);h.push(e,d),a.push(h),h=[e,d],l=0,s+=n}}return l>0&&a.push(h),a}}),a("b6jom",function(t,i){e(t.exports,"matchingChunk",()=>r);function r(t,e,i,r,o){let n,a,s,l,h,u,c,f,d,p=i,g=i,m=0,y=0,x=i;for(n=i;n<r;n+=o){let i=e[n],r=e[n+1];void 0!==l&&(s=Math.sqrt((f=i-l)*f+(d=r-h)*d),void 0!==u&&(y+=a,Math.acos((u*f+c*d)/(a*s))>t&&(y>m&&(m=y,p=x,g=n),y=0,x=n-o)),a=s,u=f,c=d),l=i,h=r}return(y+=s)>m?[x,n]:[p,g]}}),a("ddIVC",function(t,i){e(t.exports,"canvasPool",()=>f),e(t.exports,"default",()=>g);var r=n("lgqLq"),o=n("fj1q7"),a=n("6ej6F"),s=n("14PDX"),l=n("lqNjm"),h=n("cgxQK"),u=n("kBSVF"),c=n("jZquI");let f=[],d=null;class p extends r.default{constructor(t){super(t),this.container=null,this.renderedResolution,this.tempTransform=(0,s.create)(),this.pixelTransform=(0,s.create)(),this.inversePixelTransform=(0,s.create)(),this.context=null,this.containerReused=!1,this.pixelContext_=null,this.frameState=null}getImageData(t,e,i){let r;d||(d=(0,h.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})),d.clearRect(0,0,1,1);try{d.drawImage(t,e,i,1,1,0,0,1,1),r=d.getImageData(0,0,1,1).data}catch(t){return d=null,null}return r}getBackground(t){let e=this.getLayer().getBackground();return"function"==typeof e&&(e=e(t.viewState.resolution)),e||void 0}useContainer(t,e,i){let r,o;let n=this.getLayer().getClassName();if(t&&t.className===n&&(!i||t&&t.style.backgroundColor&&(0,u.equals)((0,l.asArray)(t.style.backgroundColor),(0,l.asArray)(i)))){let e=t.firstElementChild;e instanceof HTMLCanvasElement&&(o=e.getContext("2d"))}if(o&&o.canvas.style.transform===e?(this.container=t,this.context=o,this.containerReused=!0):this.containerReused?(this.container=null,this.context=null,this.containerReused=!1):this.container&&(this.container.style.backgroundColor=null),!this.container){(r=document.createElement("div")).className=n;let t=r.style;t.position="absolute",t.width="100%",t.height="100%";let e=(o=(0,h.createCanvasContext2D)()).canvas;r.appendChild(e),(t=e.style).position="absolute",t.left="0",t.transformOrigin="top left",this.container=r,this.context=o}this.containerReused||!i||this.container.style.backgroundColor||(this.container.style.backgroundColor=i)}clipUnrotated(t,e,i){let r=(0,c.getTopLeft)(i),o=(0,c.getTopRight)(i),n=(0,c.getBottomRight)(i),a=(0,c.getBottomLeft)(i);(0,s.apply)(e.coordinateToPixelTransform,r),(0,s.apply)(e.coordinateToPixelTransform,o),(0,s.apply)(e.coordinateToPixelTransform,n),(0,s.apply)(e.coordinateToPixelTransform,a);let l=this.inversePixelTransform;(0,s.apply)(l,r),(0,s.apply)(l,o),(0,s.apply)(l,n),(0,s.apply)(l,a),t.save(),t.beginPath(),t.moveTo(Math.round(r[0]),Math.round(r[1])),t.lineTo(Math.round(o[0]),Math.round(o[1])),t.lineTo(Math.round(n[0]),Math.round(n[1])),t.lineTo(Math.round(a[0]),Math.round(a[1])),t.clip()}dispatchRenderEvent_(t,e,i){let r=this.getLayer();if(r.hasListener(t)){let n=new o.default(t,this.inversePixelTransform,i,e);r.dispatchEvent(n)}}preRender(t,e){this.frameState=e,this.dispatchRenderEvent_(a.default.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(a.default.POSTRENDER,t,e)}getRenderTransform(t,e,i,r,o,n,a){let l=r/e,h=-t[0]+a,u=-t[1];return(0,s.compose)(this.tempTransform,o/2,n/2,l,-l,-i,h,u)}disposeInternal(){delete this.frameState,super.disposeInternal()}}var g=p}),a("lgqLq",function(t,i){e(t.exports,"default",()=>h);var r=n("cw4dl"),o=n("50PZ9"),a=n("ejLRd"),s=n("lVQul");class l extends a.default{constructor(t){super(),this.ready=!0,this.boundHandleImageChange_=this.handleImageChange_.bind(this),this.layer_=t,this.declutterExecutorGroup=null}getFeatures(t){return(0,s.abstract)()}getData(t){return null}prepareFrame(t){return(0,s.abstract)()}renderFrame(t,e){return(0,s.abstract)()}loadedTileCallback(t,e,i){t[e]||(t[e]={}),t[e][i.tileCoord.toString()]=i}createLoadedTileFinder(t,e,i){return(r,o)=>{let n=this.loadedTileCallback.bind(this,i,r);return t.forEachLoadedTile(e,r,o,n)}}forEachFeatureAtCoordinate(t,e,i,r,o){}getLayer(){return this.layer_}handleFontsChanged(){}handleImageChange_(t){let e=t.target;(e.getState()===o.default.LOADED||e.getState()===o.default.ERROR)&&this.renderIfReadyAndVisible()}loadImage(t){let e=t.getState();return e!=o.default.LOADED&&e!=o.default.ERROR&&t.addEventListener(r.default.CHANGE,this.boundHandleImageChange_),e==o.default.IDLE&&(t.load(),e=t.getState()),e==o.default.LOADED}renderIfReadyAndVisible(){let t=this.getLayer();t&&t.getVisible()&&"ready"===t.getSourceState()&&t.changed()}disposeInternal(){delete this.layer_,super.disposeInternal()}}var h=l}),a("dVSax",function(t,i){e(t.exports,"default",()=>d);var r=n("c46kz"),o=n("kBSVF"),a=n("jZquI"),s=n("14PDX"),l=n("cgxQK"),h=n("kKEgb"),u=n("bsQCi");let c=["Polygon","Circle","LineString","Image","Text","Default"],f={};var d=class{constructor(t,e,i,r,o,n){this.maxExtent_=t,this.overlaps_=r,this.pixelRatio_=i,this.resolution_=e,this.renderBuffer_=n,this.executorsByZIndex_={},this.hitDetectionContext_=null,this.hitDetectionTransform_=(0,s.create)(),this.createExecutors_(o)}clip(t,e){let i=this.getClipCoords(e);t.beginPath(),t.moveTo(i[0],i[1]),t.lineTo(i[2],i[3]),t.lineTo(i[4],i[5]),t.lineTo(i[6],i[7]),t.clip()}createExecutors_(t){for(let e in t){let i=this.executorsByZIndex_[e];void 0===i&&(i={},this.executorsByZIndex_[e]=i);let o=t[e];for(let t in o){let e=o[t];i[t]=new r.default(this.resolution_,this.pixelRatio_,this.overlaps_,e)}}}hasExecutors(t){for(let e in this.executorsByZIndex_){let i=this.executorsByZIndex_[e];for(let e=0,r=t.length;e<r;++e)if(t[e]in i)return!0}return!1}forEachFeatureAtCoordinate(t,e,i,r,n,h){let u,d,p,g,m,y,x;let v=2*(r=Math.round(r))+1,b=(0,s.compose)(this.hitDetectionTransform_,r+.5,r+.5,1/e,-1/e,-i,-t[0],-t[1]),w=!this.hitDetectionContext_;w&&(this.hitDetectionContext_=(0,l.createCanvasContext2D)(v,v,void 0,{willReadFrequently:!0}));let _=this.hitDetectionContext_;_.canvas.width!==v||_.canvas.height!==v?(_.canvas.width=v,_.canvas.height=v):w||_.clearRect(0,0,v,v),void 0!==this.renderBuffer_&&(u=(0,a.createEmpty)(),(0,a.extendCoordinate)(u,t),(0,a.buffer)(u,e*(this.renderBuffer_+r),u));let S=function(t){if(void 0!==f[t])return f[t];let e=2*t+1,i=t*t,r=Array(i+1);for(let o=0;o<=t;++o)for(let n=0;n<=t;++n){let a=o*o+n*n;if(a>i)break;let s=r[a];s||(s=[],r[a]=s),s.push(((t+o)*e+(t+n))*4+3),o>0&&s.push(((t-o)*e+(t+n))*4+3),n>0&&(s.push(((t+o)*e+(t-n))*4+3),o>0&&s.push(((t-o)*e+(t-n))*4+3))}let o=[];for(let t=0,e=r.length;t<e;++t)r[t]&&o.push(...r[t]);return f[t]=o,o}(r);function E(t,e){let i=_.getImageData(0,0,v,v).data;for(let o=0,a=S.length;o<a;o++)if(i[S[o]]>0){if(!h||"Image"!==d&&"Text"!==d||h.includes(t)){let i=(S[o]-3)/4,a=r-i%v,s=r-(i/v|0),l=n(t,e,a*a+s*s);if(l)return l}_.clearRect(0,0,v,v);break}}let A=Object.keys(this.executorsByZIndex_).map(Number);for(A.sort(o.ascending),p=A.length-1;p>=0;--p){let t=A[p].toString();for(m=this.executorsByZIndex_[t],g=c.length-1;g>=0;--g)if(void 0!==(y=m[d=c[g]])&&(x=y.executeHitDetection(_,b,i,E,u)))return x}}getClipCoords(t){let e=this.maxExtent_;if(!e)return null;let i=e[0],r=e[1],o=e[2],n=e[3],a=[i,r,i,n,o,n,o,r];return(0,u.transform2D)(a,0,8,2,t,a),a}isEmpty(){return(0,h.isEmpty)(this.executorsByZIndex_)}execute(t,e,i,r,n,a,s){let l,h,u,f,d,p;let g=Object.keys(this.executorsByZIndex_).map(Number);for(g.sort(o.ascending),this.maxExtent_&&(t.save(),this.clip(t,i)),a=a||c,s&&g.reverse(),l=0,h=g.length;l<h;++l){let o=g[l].toString();for(u=0,d=this.executorsByZIndex_[o],f=a.length;u<f;++u)void 0!==(p=d[a[u]])&&p.execute(t,e,i,r,n,s)}this.maxExtent_&&t.restore()}}}),a("c46kz",function(t,i){e(t.exports,"default",()=>_);var r=n("2CzCP"),o=n("a0SEX"),a=n("14PDX"),s=n("jZquI"),l=n("aHG4Z"),h=n("2soc3"),u=n("kBSVF"),c=n("aSafW"),f=n("bsQCi");let d=(0,s.createEmpty)(),p=[],g=[],m=[],y=[];function x(t){return t[3].declutterBox}let v=RegExp("["+String.fromCharCode(1425)+"-"+String.fromCharCode(2303)+String.fromCharCode(64285)+"-"+String.fromCharCode(65023)+String.fromCharCode(65136)+"-"+String.fromCharCode(65276)+String.fromCharCode(67584)+"-"+String.fromCharCode(69631)+String.fromCharCode(124928)+"-"+String.fromCharCode(126975)+"]");function b(t,e){return"start"===e?e=v.test(t)?"right":"left":"end"===e&&(e=v.test(t)?"left":"right"),o.TEXT_ALIGN[e]}function w(t,e,i){return i>0&&t.push("\n",""),t.push(e,""),t}var _=class{constructor(t,e,i,r){this.overlaps=i,this.pixelRatio=e,this.resolution=t,this.alignFill_,this.instructions=r.instructions,this.coordinates=r.coordinates,this.coordinateCache_={},this.renderedTransform_=(0,a.create)(),this.hitDetectionInstructions=r.hitDetectionInstructions,this.pixelCoordinates_=null,this.viewRotation_=0,this.fillStates=r.fillStates||{},this.strokeStates=r.strokeStates||{},this.textStates=r.textStates||{},this.widths_={},this.labels_={}}createLabel(t,e,i,r){let n;let a=t+e+i+r;if(this.labels_[a])return this.labels_[a];let s=r?this.strokeStates[r]:null,h=i?this.fillStates[i]:null,u=this.textStates[e],c=this.pixelRatio,f=[u.scale[0]*c,u.scale[1]*c],d=Array.isArray(t),p=u.justify?o.TEXT_ALIGN[u.justify]:b(Array.isArray(t)?t[0]:t,u.textAlign||l.defaultTextAlign),g=r&&s.lineWidth?s.lineWidth:0,m=d?t:t.split("\n").reduce(w,[]),{width:y,height:x,widths:v,heights:_,lineWidths:S}=(0,l.getTextDimensions)(u,m),E=y+g,A=[],N=(E+2)*f[0],I=(x+g)*f[1],M={width:N<0?Math.floor(N):Math.ceil(N),height:I<0?Math.floor(I):Math.ceil(I),contextInstructions:A};(1!=f[0]||1!=f[1])&&A.push("scale",f),r&&(A.push("strokeStyle",s.strokeStyle),A.push("lineWidth",g),A.push("lineCap",s.lineCap),A.push("lineJoin",s.lineJoin),A.push("miterLimit",s.miterLimit),A.push("setLineDash",[s.lineDash]),A.push("lineDashOffset",s.lineDashOffset)),i&&A.push("fillStyle",h.fillStyle),A.push("textBaseline","middle"),A.push("textAlign","center");let P=.5-p,C=p*E+P*g,T=[],L=[],R=0,O=0,k=0,G=0;for(let t=0,e=m.length;t<e;t+=2){let e=m[t];if("\n"===e){O+=R,R=0,C=p*E+P*g,++G;continue}let o=m[t+1]||u.font;o!==n&&(r&&T.push("font",o),i&&L.push("font",o),n=o),R=Math.max(R,_[k]);let a=[e,C+P*v[k]+p*(v[k]-S[G]),.5*(g+R)+O];C+=v[k],r&&T.push("strokeText",a),i&&L.push("fillText",a),++k}return Array.prototype.push.apply(A,T),Array.prototype.push.apply(A,L),this.labels_[a]=M,M}replayTextBackground_(t,e,i,r,o,n,a){t.beginPath(),t.moveTo.apply(t,e),t.lineTo.apply(t,i),t.lineTo.apply(t,r),t.lineTo.apply(t,o),t.lineTo.apply(t,e),n&&(this.alignFill_=n[2],this.fill_(t)),a&&(this.setStrokeStyle_(t,a),t.stroke())}calculateImageOrLabelDimensions_(t,e,i,r,o,n,l,h,u,c,f,x,v,b,w,_){let S;l*=x[0],h*=x[1];let E=i-l,A=r-h,N=o+u>t?t-u:o,I=n+c>e?e-c:n,M=b[3]+N*x[0]+b[1],P=b[0]+I*x[1]+b[2],C=E-b[3],T=A-b[0];return(w||0!==f)&&(p[0]=C,y[0]=C,p[1]=T,g[1]=T,g[0]=C+M,m[0]=g[0],m[1]=T+P,y[1]=m[1]),0!==f?(S=(0,a.compose)((0,a.create)(),i,r,1,1,f,-i,-r),(0,a.apply)(S,p),(0,a.apply)(S,g),(0,a.apply)(S,m),(0,a.apply)(S,y),(0,s.createOrUpdate)(Math.min(p[0],g[0],m[0],y[0]),Math.min(p[1],g[1],m[1],y[1]),Math.max(p[0],g[0],m[0],y[0]),Math.max(p[1],g[1],m[1],y[1]),d)):(0,s.createOrUpdate)(Math.min(C,C+M),Math.min(T,T+P),Math.max(C,C+M),Math.max(T,T+P),d),v&&(E=Math.round(E),A=Math.round(A)),{drawImageX:E,drawImageY:A,drawImageW:N,drawImageH:I,originX:u,originY:c,declutterBox:{minX:d[0],minY:d[1],maxX:d[2],maxY:d[3],value:_},canvasTransform:S,scale:x}}replayImageOrLabel_(t,e,i,r,o,n,a){let s=!!(n||a),h=r.declutterBox,u=t.canvas,c=a?a[2]*r.scale[0]/2:0;return h.minX-c<=u.width/e&&h.maxX+c>=0&&h.minY-c<=u.height/e&&h.maxY+c>=0&&(s&&this.replayTextBackground_(t,p,g,m,y,n,a),(0,l.drawImageOrLabel)(t,r.canvasTransform,o,i,r.originX,r.originY,r.drawImageW,r.drawImageH,r.drawImageX,r.drawImageY,r.scale)),!0}fill_(t){if(this.alignFill_){let e=(0,a.apply)(this.renderedTransform_,[0,0]),i=512*this.pixelRatio;t.save(),t.translate(e[0]%i,e[1]%i),t.rotate(this.viewRotation_)}t.fill(),this.alignFill_&&t.restore()}setStrokeStyle_(t,e){t.strokeStyle=e[1],t.lineWidth=e[2],t.lineCap=e[3],t.lineJoin=e[4],t.miterLimit=e[5],t.lineDashOffset=e[7],t.setLineDash(e[6])}drawLabelWithPointPlacement_(t,e,i,r){let n=this.textStates[e],a=this.createLabel(t,e,r,i),s=this.strokeStates[i],h=this.pixelRatio,u=b(Array.isArray(t)?t[0]:t,n.textAlign||l.defaultTextAlign),c=o.TEXT_ALIGN[n.textBaseline||l.defaultTextBaseline],f=s&&s.lineWidth?s.lineWidth:0,d=a.width/h-2*n.scale[0],p=c*a.height/h+2*(.5-c)*f;return{label:a,anchorX:u*d+2*(.5-u)*f,anchorY:p}}execute_(t,e,i,o,n,d,p,g){let m,y,v,w,_,S,E,A,N,I,M,P,C,T,L,R,O;this.pixelCoordinates_&&(0,u.equals)(i,this.renderedTransform_)?m=this.pixelCoordinates_:(this.pixelCoordinates_||(this.pixelCoordinates_=[]),m=(0,f.transform2D)(this.coordinates,0,this.coordinates.length,2,i,this.pixelCoordinates_),(0,a.setFromArray)(this.renderedTransform_,i));let k=0,G=o.length,Z=0,F=0,D=0,j=null,q=null,U=this.coordinateCache_,B=this.viewRotation_,z=Math.round(1e12*Math.atan2(-i[1],i[0]))/1e12,H={context:t,pixelRatio:this.pixelRatio,resolution:this.resolution,rotation:B},V=this.instructions!=o||this.overlaps?0:200;for(;k<G;){let i=o[k];switch(i[0]){case r.default.BEGIN_GEOMETRY:T=i[1],O=i[3],T.getGeometry()?void 0===p||(0,s.intersects)(p,O.getExtent())?++k:k=i[2]+1:k=i[2];break;case r.default.BEGIN_PATH:F>V&&(this.fill_(t),F=0),D>V&&(t.stroke(),D=0),F||D||(t.beginPath(),_=NaN,S=NaN),++k;break;case r.default.CIRCLE:let a=m[Z=i[1]],u=m[Z+1],f=m[Z+2],G=m[Z+3],Y=f-a,W=G-u,X=Math.sqrt(Y*Y+W*W);t.moveTo(a+X,u),t.arc(a,u,X,0,2*Math.PI,!0),++k;break;case r.default.CLOSE_PATH:t.closePath(),++k;break;case r.default.CUSTOM:Z=i[1],y=i[2];let K=i[3],J=i[4],$=6==i.length?i[5]:void 0;H.geometry=K,H.feature=T,k in U||(U[k]=[]);let Q=U[k];$?$(m,Z,y,2,Q):(Q[0]=m[Z],Q[1]=m[Z+1],Q.length=2),J(Q,H),++k;break;case r.default.DRAW_IMAGE:let tt,te,ti,tr;Z=i[1],y=i[2],N=i[3],v=i[4],w=i[5];let to=i[6],tn=i[7],ta=i[8],ts=i[9],tl=i[10],th=i[11],tu=i[12],tc=i[13],tf=i[14],td=i[15];if(!N&&i.length>=20){I=i[19],M=i[20],P=i[21],C=i[22];let t=this.drawLabelWithPointPlacement_(I,M,P,C);N=t.label,i[3]=N;let e=i[23];v=(t.anchorX-e)*this.pixelRatio,i[4]=v;let r=i[24];w=(t.anchorY-r)*this.pixelRatio,i[5]=w,to=N.height,i[6]=to,tc=N.width,i[13]=tc}i.length>25&&(tt=i[25]),i.length>17?(te=i[16],ti=i[17],tr=i[18]):(te=l.defaultPadding,ti=!1,tr=!1),tl&&z?th+=B:tl||z||(th-=B);let tp=0;for(;Z<y;Z+=2){if(tt&&tt[tp++]<tc/this.pixelRatio)continue;let i=this.calculateImageOrLabelDimensions_(N.width,N.height,m[Z],m[Z+1],tc,to,v,w,ta,ts,th,tu,n,te,ti||tr,T),r=[t,e,N,i,tn,ti?j:null,tr?q:null];if(g){if("none"===tf)continue;if("obstacle"===tf){g.insert(i.declutterBox);continue}{let t,e;if(td){let i=y-Z;if(!td[i]){td[i]=r;continue}if(t=td[i],delete td[i],e=x(t),g.collides(e))continue}if(g.collides(i.declutterBox))continue;t&&(g.insert(e),this.replayImageOrLabel_.apply(this,t)),g.insert(i.declutterBox)}}this.replayImageOrLabel_.apply(this,r)}++k;break;case r.default.DRAW_CHARS:let tg;let tm=i[1],ty=i[2],tx=i[3],tv=i[4];C=i[5];let tb=i[6],tw=i[7],t_=i[8];P=i[9];let tS=i[10];I=i[11],M=i[12];let tE=[i[13],i[13]],tA=this.textStates[M],tN=tA.font,tI=[tA.scale[0]*tw,tA.scale[1]*tw];tN in this.widths_?tg=this.widths_[tN]:(tg={},this.widths_[tN]=tg);let tM=(0,c.lineStringLength)(m,tm,ty,2),tP=Math.abs(tI[0])*(0,l.measureAndCacheTextWidth)(tN,I,tg);if(tv||tP<=tM){let i=(tM-tP)*b(I,this.textStates[M].textAlign),r=(0,h.drawTextOnPath)(m,tm,ty,2,I,i,tb,Math.abs(tI[0]),l.measureAndCacheTextWidth,tN,tg,z?0:this.viewRotation_);t:if(r){let i,o,n,a,s;let h=[];if(P)for(i=0,o=r.length;i<o;++i){n=(s=r[i])[4],a=this.createLabel(n,M,"",P),v=s[2]+(tI[0]<0?-tS:tS),w=tx*a.height+(.5-tx)*2*tS*tI[1]/tI[0]-t_;let o=this.calculateImageOrLabelDimensions_(a.width,a.height,s[0],s[1],a.width,a.height,v,w,0,0,s[3],tE,!1,l.defaultPadding,!1,T);if(g&&g.collides(o.declutterBox))break t;h.push([t,e,a,o,1,null,null])}if(C)for(i=0,o=r.length;i<o;++i){n=(s=r[i])[4],a=this.createLabel(n,M,C,""),v=s[2],w=tx*a.height-t_;let o=this.calculateImageOrLabelDimensions_(a.width,a.height,s[0],s[1],a.width,a.height,v,w,0,0,s[3],tE,!1,l.defaultPadding,!1,T);if(g&&g.collides(o.declutterBox))break t;h.push([t,e,a,o,1,null,null])}g&&g.load(h.map(x));for(let t=0,e=h.length;t<e;++t)this.replayImageOrLabel_.apply(this,h[t])}}++k;break;case r.default.END_GEOMETRY:if(void 0!==d){let t=d(T=i[1],O);if(t)return t}++k;break;case r.default.FILL:V?F++:this.fill_(t),++k;break;case r.default.MOVE_TO_LINE_TO:for(Z=i[1],y=i[2],L=m[Z],R=m[Z+1],E=L+.5|0,A=R+.5|0,(E!==_||A!==S)&&(t.moveTo(L,R),_=E,S=A),Z+=2;Z<y;Z+=2)L=m[Z],R=m[Z+1],E=L+.5|0,A=R+.5|0,(Z==y-2||E!==_||A!==S)&&(t.lineTo(L,R),_=E,S=A);++k;break;case r.default.SET_FILL_STYLE:j=i,this.alignFill_=i[2],F&&(this.fill_(t),F=0,D&&(t.stroke(),D=0)),t.fillStyle=i[1],++k;break;case r.default.SET_STROKE_STYLE:q=i,D&&(t.stroke(),D=0),this.setStrokeStyle_(t,i),++k;break;case r.default.STROKE:V?D++:t.stroke(),++k;break;default:++k}}F&&this.fill_(t),D&&t.stroke()}execute(t,e,i,r,o,n){this.viewRotation_=r,this.execute_(t,e,i,this.instructions,o,void 0,void 0,n)}executeHitDetection(t,e,i,r,o){return this.viewRotation_=i,this.execute_(t,1,e,this.hitDetectionInstructions,!0,r,o)}}}),a("2soc3",function(t,i){e(t.exports,"drawTextOnPath",()=>a);var r=n("a6roo"),o=n("bsQCi");function a(t,e,i,n,a,s,l,h,u,c,f,d){let p,g,m=t[e],y=t[e+1],x=0,v=0,b=0,w=0;function _(){x=m,v=y,e+=n,m=t[e],y=t[e+1],w+=b,b=Math.sqrt((m-x)*(m-x)+(y-v)*(y-v))}do _();while(e<i-n&&w+b<s)let S=0===b?0:(s-w)/b,E=(0,r.lerp)(x,m,S),A=(0,r.lerp)(v,y,S),N=e-n,I=w,M=s+h*u(c,a,f);for(;e<i-n&&w+b<M;)_();S=0===b?0:(M-w)/b;let P=(0,r.lerp)(x,m,S),C=(0,r.lerp)(v,y,S);if(d){let t=[E,A,P,C];(0,o.rotate)(t,0,4,2,d,t,t),p=t[0]>t[2]}else p=E>P;let T=Math.PI,L=[],R=N+n===e;if(e=N,b=0,w=I,m=t[e],y=t[e+1],R){_(),g=Math.atan2(y-v,m-x),p&&(g+=g>0?-T:T);let t=(P+E)/2,e=(C+A)/2;return L[0]=[t,e,(M-s)/2,g,a],L}a=a.replace(/\n/g," ");for(let t=0,o=a.length;t<o;){_();let d=Math.atan2(y-v,m-x);if(p&&(d+=d>0?-T:T),void 0!==g){let t=d-g;if(Math.abs(t+=t>T?-2*T:t<-T?2*T:0)>l)return null}g=d;let E=t,A=0;for(;t<o;++t){let r=h*u(c,a[p?o-t-1:t],f);if(e+n<i&&w+b<s+A+r/2)break;A+=r}if(t===E)continue;let N=p?a.substring(o-E,o-t):a.substring(E,t);S=0===b?0:(s+A/2-w)/b;let I=(0,r.lerp)(x,m,S),M=(0,r.lerp)(v,y,S);L.push([I,M,A/2,d,N]),s+=A}return L}}),a("3CYjy",function(t,i){e(t.exports,"HIT_DETECT_RESOLUTION",()=>u),e(t.exports,"createHitDetectionImageData",()=>c),e(t.exports,"hitDetect",()=>f);var r=n("htGzg"),o=n("ayeEa"),a=n("kBSVF"),s=n("a6roo"),l=n("cgxQK"),h=n("jZquI");let u=.5;function c(t,e,i,n,s,c,f){let d=t[0]*u,p=t[1]*u,g=(0,l.createCanvasContext2D)(d,p);g.imageSmoothingEnabled=!1;let m=g.canvas,y=new r.default(g,u,s,null,f),x=i.length,v=Math.floor(16777215/x),b={};for(let t=1;t<=x;++t){let e=i[t-1],r=e.getStyleFunction()||n;if(!r)continue;let a=r(e,c);if(!a)continue;Array.isArray(a)||(a=[a]);let u=(t*v).toString(16).padStart(7,"#00000");for(let t=0,i=a.length;t<i;++t){let i=a[t],r=i.getGeometryFunction()(e);if(!r||!(0,h.intersects)(s,r.getExtent()))continue;let n=i.clone(),c=n.getFill();c&&c.setColor(u);let f=n.getStroke();f&&(f.setColor(u),f.setLineDash(null)),n.setText(void 0);let d=i.getImage();if(d){let t=d.getImageSize();if(!t)continue;let e=(0,l.createCanvasContext2D)(t[0],t[1],void 0,{alpha:!1}),i=e.canvas;e.fillStyle=u,e.fillRect(0,0,i.width,i.height),n.setImage(new o.default({img:i,anchor:d.getAnchor(),anchorXUnits:"pixels",anchorYUnits:"pixels",offset:d.getOrigin(),opacity:1,size:d.getSize(),scale:d.getScale(),rotation:d.getRotation(),rotateWithView:d.getRotateWithView()}))}let p=n.getZIndex()||0,g=b[p];g||(g={},b[p]=g,g.Polygon=[],g.Circle=[],g.LineString=[],g.Point=[]);let m=r.getType();if("GeometryCollection"===m){let t=r.getGeometriesArrayRecursive();for(let e=0,i=t.length;e<i;++e){let i=t[e];g[i.getType().replace("Multi","")].push(i,n)}}else g[m.replace("Multi","")].push(r,n)}}let w=Object.keys(b).map(Number).sort(a.ascending);for(let t=0,i=w.length;t<i;++t){let i=b[w[t]];for(let t in i){let r=i[t];for(let t=0,i=r.length;t<i;t+=2){y.setStyle(r[t+1]);for(let i=0,o=e.length;i<o;++i)y.setTransform(e[i]),y.drawGeometry(r[t])}}}return g.getImageData(0,0,m.width,m.height)}function f(t,e,i){let r=[];if(i){let o=Math.floor(Math.round(t[0])*u),n=Math.floor(Math.round(t[1])*u),a=((0,s.clamp)(o,0,i.width-1)+(0,s.clamp)(n,0,i.height-1)*i.width)*4,l=i.data[a],h=i.data[a+1],c=i.data[a+2]+256*(h+256*l),f=Math.floor(16777215/e.length);c&&c%f==0&&r.push(e[c/f-1])}return r}}),a("htGzg",function(t,i){e(t.exports,"default",()=>p);var r=n("eGc18"),o=n("hlW0i"),a=n("14PDX"),s=n("aHG4Z"),l=n("kBSVF"),h=n("jZquI"),u=n("a6roo"),c=n("bsQCi"),f=n("63y7W");class d extends r.default{constructor(t,e,i,r,o,n,s){super(),this.context_=t,this.pixelRatio_=e,this.extent_=i,this.transform_=r,this.transformRotation_=r?(0,u.toFixed)(Math.atan2(r[1],r[0]),10):0,this.viewRotation_=o,this.squaredTolerance_=n,this.userTransform_=s,this.contextFillState_=null,this.contextStrokeState_=null,this.contextTextState_=null,this.fillState_=null,this.strokeState_=null,this.image_=null,this.imageAnchorX_=0,this.imageAnchorY_=0,this.imageHeight_=0,this.imageOpacity_=0,this.imageOriginX_=0,this.imageOriginY_=0,this.imageRotateWithView_=!1,this.imageRotation_=0,this.imageScale_=[0,0],this.imageWidth_=0,this.text_="",this.textOffsetX_=0,this.textOffsetY_=0,this.textRotateWithView_=!1,this.textRotation_=0,this.textScale_=[0,0],this.textFillState_=null,this.textStrokeState_=null,this.textState_=null,this.pixelCoordinates_=[],this.tmpLocalTransform_=(0,a.create)()}drawImages_(t,e,i,r){if(!this.image_)return;let o=(0,c.transform2D)(t,e,i,r,this.transform_,this.pixelCoordinates_),n=this.context_,s=this.tmpLocalTransform_,l=n.globalAlpha;1!=this.imageOpacity_&&(n.globalAlpha=l*this.imageOpacity_);let h=this.imageRotation_;0===this.transformRotation_&&(h-=this.viewRotation_),this.imageRotateWithView_&&(h+=this.viewRotation_);for(let t=0,e=o.length;t<e;t+=2){let e=o[t]-this.imageAnchorX_,i=o[t+1]-this.imageAnchorY_;if(0!==h||1!=this.imageScale_[0]||1!=this.imageScale_[1]){let t=e+this.imageAnchorX_,r=i+this.imageAnchorY_;(0,a.compose)(s,t,r,1,1,h,-t,-r),n.save(),n.transform.apply(n,s),n.translate(t,r),n.scale(this.imageScale_[0],this.imageScale_[1]),n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,-this.imageAnchorX_,-this.imageAnchorY_,this.imageWidth_,this.imageHeight_),n.restore()}else n.drawImage(this.image_,this.imageOriginX_,this.imageOriginY_,this.imageWidth_,this.imageHeight_,e,i,this.imageWidth_,this.imageHeight_)}1!=this.imageOpacity_&&(n.globalAlpha=l)}drawText_(t,e,i,r){if(!this.textState_||""===this.text_)return;this.textFillState_&&this.setContextFillState_(this.textFillState_),this.textStrokeState_&&this.setContextStrokeState_(this.textStrokeState_),this.setContextTextState_(this.textState_);let o=(0,c.transform2D)(t,e,i,r,this.transform_,this.pixelCoordinates_),n=this.context_,a=this.textRotation_;for(0===this.transformRotation_&&(a-=this.viewRotation_),this.textRotateWithView_&&(a+=this.viewRotation_);e<i;e+=r){let t=o[e]+this.textOffsetX_,i=o[e+1]+this.textOffsetY_;0!==a||1!=this.textScale_[0]||1!=this.textScale_[1]?(n.save(),n.translate(t-this.textOffsetX_,i-this.textOffsetY_),n.rotate(a),n.translate(this.textOffsetX_,this.textOffsetY_),n.scale(this.textScale_[0],this.textScale_[1]),this.textStrokeState_&&n.strokeText(this.text_,0,0),this.textFillState_&&n.fillText(this.text_,0,0),n.restore()):(this.textStrokeState_&&n.strokeText(this.text_,t,i),this.textFillState_&&n.fillText(this.text_,t,i))}}moveToLineTo_(t,e,i,r,o){let n=this.context_,a=(0,c.transform2D)(t,e,i,r,this.transform_,this.pixelCoordinates_);n.moveTo(a[0],a[1]);let s=a.length;o&&(s-=2);for(let t=2;t<s;t+=2)n.lineTo(a[t],a[t+1]);return o&&n.closePath(),i}drawRings_(t,e,i,r){for(let o=0,n=i.length;o<n;++o)e=this.moveToLineTo_(t,e,i[o],r,!0);return e}drawCircle(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.fillState_||this.strokeState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=(0,f.transformGeom2D)(t,this.transform_,this.pixelCoordinates_),i=e[2]-e[0],r=e[3]-e[1],o=this.context_;o.beginPath(),o.arc(e[0],e[1],Math.sqrt(i*i+r*r),0,2*Math.PI),this.fillState_&&o.fill(),this.strokeState_&&o.stroke()}""!==this.text_&&this.drawText_(t.getCenter(),0,2,2)}}setStyle(t){this.setFillStrokeStyle(t.getFill(),t.getStroke()),this.setImageStyle(t.getImage()),this.setTextStyle(t.getText())}setTransform(t){this.transform_=t}drawGeometry(t){switch(t.getType()){case"Point":this.drawPoint(t);break;case"LineString":this.drawLineString(t);break;case"Polygon":this.drawPolygon(t);break;case"MultiPoint":this.drawMultiPoint(t);break;case"MultiLineString":this.drawMultiLineString(t);break;case"MultiPolygon":this.drawMultiPolygon(t);break;case"GeometryCollection":this.drawGeometryCollection(t);break;case"Circle":this.drawCircle(t)}}drawFeature(t,e){let i=e.getGeometryFunction()(t);i&&(this.setStyle(e),this.drawGeometry(i))}drawGeometryCollection(t){let e=t.getGeometriesArray();for(let t=0,i=e.length;t<i;++t)this.drawGeometry(e[t])}drawPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawMultiPoint(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getFlatCoordinates(),i=t.getStride();this.image_&&this.drawImages_(e,0,e.length,i),""!==this.text_&&this.drawText_(e,0,e.length,i)}drawLineString(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates();e.beginPath(),this.moveToLineTo_(i,0,i.length,t.getStride(),!1),e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoint();this.drawText_(e,0,2,2)}}}drawMultiLineString(t){this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_));let e=t.getExtent();if((0,h.intersects)(this.extent_,e)){if(this.strokeState_){this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getFlatCoordinates(),r=0,o=t.getEnds(),n=t.getStride();e.beginPath();for(let t=0,e=o.length;t<e;++t)r=this.moveToLineTo_(i,r,o[t],n,!1);e.stroke()}if(""!==this.text_){let e=t.getFlatMidpoints();this.drawText_(e,0,e.length,2)}}}drawPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_;e.beginPath(),this.drawRings_(t.getOrientedFlatCoordinates(),0,t.getEnds(),t.getStride()),this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoint();this.drawText_(e,0,2,2)}}}drawMultiPolygon(t){if(this.squaredTolerance_&&(t=t.simplifyTransformed(this.squaredTolerance_,this.userTransform_)),(0,h.intersects)(this.extent_,t.getExtent())){if(this.strokeState_||this.fillState_){this.fillState_&&this.setContextFillState_(this.fillState_),this.strokeState_&&this.setContextStrokeState_(this.strokeState_);let e=this.context_,i=t.getOrientedFlatCoordinates(),r=0,o=t.getEndss(),n=t.getStride();e.beginPath();for(let t=0,e=o.length;t<e;++t){let e=o[t];r=this.drawRings_(i,r,e,n)}this.fillState_&&e.fill(),this.strokeState_&&e.stroke()}if(""!==this.text_){let e=t.getFlatInteriorPoints();this.drawText_(e,0,e.length,2)}}}setContextFillState_(t){let e=this.context_,i=this.contextFillState_;i?i.fillStyle!=t.fillStyle&&(i.fillStyle=t.fillStyle,e.fillStyle=t.fillStyle):(e.fillStyle=t.fillStyle,this.contextFillState_={fillStyle:t.fillStyle})}setContextStrokeState_(t){let e=this.context_,i=this.contextStrokeState_;i?(i.lineCap!=t.lineCap&&(i.lineCap=t.lineCap,e.lineCap=t.lineCap),(0,l.equals)(i.lineDash,t.lineDash)||e.setLineDash(i.lineDash=t.lineDash),i.lineDashOffset!=t.lineDashOffset&&(i.lineDashOffset=t.lineDashOffset,e.lineDashOffset=t.lineDashOffset),i.lineJoin!=t.lineJoin&&(i.lineJoin=t.lineJoin,e.lineJoin=t.lineJoin),i.lineWidth!=t.lineWidth&&(i.lineWidth=t.lineWidth,e.lineWidth=t.lineWidth),i.miterLimit!=t.miterLimit&&(i.miterLimit=t.miterLimit,e.miterLimit=t.miterLimit),i.strokeStyle!=t.strokeStyle&&(i.strokeStyle=t.strokeStyle,e.strokeStyle=t.strokeStyle)):(e.lineCap=t.lineCap,e.setLineDash(t.lineDash),e.lineDashOffset=t.lineDashOffset,e.lineJoin=t.lineJoin,e.lineWidth=t.lineWidth,e.miterLimit=t.miterLimit,e.strokeStyle=t.strokeStyle,this.contextStrokeState_={lineCap:t.lineCap,lineDash:t.lineDash,lineDashOffset:t.lineDashOffset,lineJoin:t.lineJoin,lineWidth:t.lineWidth,miterLimit:t.miterLimit,strokeStyle:t.strokeStyle})}setContextTextState_(t){let e=this.context_,i=this.contextTextState_,r=t.textAlign?t.textAlign:s.defaultTextAlign;i?(i.font!=t.font&&(i.font=t.font,e.font=t.font),i.textAlign!=r&&(i.textAlign=r,e.textAlign=r),i.textBaseline!=t.textBaseline&&(i.textBaseline=t.textBaseline,e.textBaseline=t.textBaseline)):(e.font=t.font,e.textAlign=r,e.textBaseline=t.textBaseline,this.contextTextState_={font:t.font,textAlign:r,textBaseline:t.textBaseline})}setFillStrokeStyle(t,e){if(t){let e=t.getColor();this.fillState_={fillStyle:(0,o.asColorLike)(e||s.defaultFillStyle)}}else this.fillState_=null;if(e){let t=e.getColor(),i=e.getLineCap(),r=e.getLineDash(),n=e.getLineDashOffset(),a=e.getLineJoin(),l=e.getWidth(),h=e.getMiterLimit(),u=r||s.defaultLineDash;this.strokeState_={lineCap:void 0!==i?i:s.defaultLineCap,lineDash:1===this.pixelRatio_?u:u.map(t=>t*this.pixelRatio_),lineDashOffset:(n||s.defaultLineDashOffset)*this.pixelRatio_,lineJoin:void 0!==a?a:s.defaultLineJoin,lineWidth:(void 0!==l?l:s.defaultLineWidth)*this.pixelRatio_,miterLimit:void 0!==h?h:s.defaultMiterLimit,strokeStyle:(0,o.asColorLike)(t||s.defaultStrokeStyle)}}else this.strokeState_=null}setImageStyle(t){let e;if(!t||!(e=t.getSize())){this.image_=null;return}let i=t.getPixelRatio(this.pixelRatio_),r=t.getAnchor(),o=t.getOrigin();this.image_=t.getImage(this.pixelRatio_),this.imageAnchorX_=r[0]*i,this.imageAnchorY_=r[1]*i,this.imageHeight_=e[1]*i,this.imageOpacity_=t.getOpacity(),this.imageOriginX_=o[0],this.imageOriginY_=o[1],this.imageRotateWithView_=t.getRotateWithView(),this.imageRotation_=t.getRotation();let n=t.getScaleArray();this.imageScale_=[n[0]*this.pixelRatio_/i,n[1]*this.pixelRatio_/i],this.imageWidth_=e[0]*i}setTextStyle(t){if(t){let e=t.getFill();if(e){let t=e.getColor();this.textFillState_={fillStyle:(0,o.asColorLike)(t||s.defaultFillStyle)}}else this.textFillState_=null;let i=t.getStroke();if(i){let t=i.getColor(),e=i.getLineCap(),r=i.getLineDash(),n=i.getLineDashOffset(),a=i.getLineJoin(),l=i.getWidth(),h=i.getMiterLimit();this.textStrokeState_={lineCap:void 0!==e?e:s.defaultLineCap,lineDash:r||s.defaultLineDash,lineDashOffset:n||s.defaultLineDashOffset,lineJoin:void 0!==a?a:s.defaultLineJoin,lineWidth:void 0!==l?l:s.defaultLineWidth,miterLimit:void 0!==h?h:s.defaultMiterLimit,strokeStyle:(0,o.asColorLike)(t||s.defaultStrokeStyle)}}else this.textStrokeState_=null;let r=t.getFont(),n=t.getOffsetX(),a=t.getOffsetY(),l=t.getRotateWithView(),h=t.getRotation(),u=t.getScaleArray(),c=t.getText(),f=t.getTextAlign(),d=t.getTextBaseline();this.textState_={font:void 0!==r?r:s.defaultFont,textAlign:void 0!==f?f:s.defaultTextAlign,textBaseline:void 0!==d?d:s.defaultTextBaseline},this.text_=void 0!==c?Array.isArray(c)?c.reduce((t,e,i)=>t+=i%2?" ":e,""):c:"",this.textOffsetX_=void 0!==n?this.pixelRatio_*n:0,this.textOffsetY_=void 0!==a?this.pixelRatio_*a:0,this.textRotateWithView_=void 0!==l&&l,this.textRotation_=void 0!==h?h:0,this.textScale_=[this.pixelRatio_*u[0],this.pixelRatio_*u[1]]}else this.text_=""}}var p=d}),a("713Fw",function(t,i){e(t.exports,"defaultOrder",()=>s),e(t.exports,"getSquaredTolerance",()=>l),e(t.exports,"getTolerance",()=>h),e(t.exports,"renderFeature",()=>u);var r=n("50PZ9"),o=n("lVQul");let a={Point:function(t,e,i,o,n){let a;let s=i.getImage(),l=i.getText();if(s){if(s.getImageState()!=r.default.LOADED)return;let h=t;if(n){let r=s.getDeclutterMode();if("none"!==r){if(h=n,"obstacle"===r){let r=t.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,a),r.drawPoint(e,o)}else l&&l.getText()&&(a={})}}let u=h.getBuilder(i.getZIndex(),"Image");u.setImageStyle(s,a),u.drawPoint(e,o)}if(l&&l.getText()){let r=t;n&&(r=n);let s=r.getBuilder(i.getZIndex(),"Text");s.setTextStyle(l,a),s.drawText(e,o)}},LineString:function(t,e,i,r,o){let n=i.getStroke();if(n){let o=t.getBuilder(i.getZIndex(),"LineString");o.setFillStrokeStyle(null,n),o.drawLineString(e,r)}let a=i.getText();if(a&&a.getText()){let n=(o||t).getBuilder(i.getZIndex(),"Text");n.setTextStyle(a),n.drawText(e,r)}},Polygon:function(t,e,i,r,o){let n=i.getFill(),a=i.getStroke();if(n||a){let o=t.getBuilder(i.getZIndex(),"Polygon");o.setFillStrokeStyle(n,a),o.drawPolygon(e,r)}let s=i.getText();if(s&&s.getText()){let n=(o||t).getBuilder(i.getZIndex(),"Text");n.setTextStyle(s),n.drawText(e,r)}},MultiPoint:function(t,e,i,o,n){let a;let s=i.getImage(),l=i.getText();if(s){if(s.getImageState()!=r.default.LOADED)return;let h=t;if(n){let r=s.getDeclutterMode();if("none"!==r){if(h=n,"obstacle"===r){let r=t.getBuilder(i.getZIndex(),"Image");r.setImageStyle(s,a),r.drawMultiPoint(e,o)}else l&&l.getText()&&(a={})}}let u=h.getBuilder(i.getZIndex(),"Image");u.setImageStyle(s,a),u.drawMultiPoint(e,o)}if(l&&l.getText()){let r=t;n&&(r=n);let s=r.getBuilder(i.getZIndex(),"Text");s.setTextStyle(l,a),s.drawText(e,o)}},MultiLineString:function(t,e,i,r,o){let n=i.getStroke();if(n){let o=t.getBuilder(i.getZIndex(),"LineString");o.setFillStrokeStyle(null,n),o.drawMultiLineString(e,r)}let a=i.getText();if(a&&a.getText()){let n=(o||t).getBuilder(i.getZIndex(),"Text");n.setTextStyle(a),n.drawText(e,r)}},MultiPolygon:function(t,e,i,r,o){let n=i.getFill(),a=i.getStroke();if(a||n){let o=t.getBuilder(i.getZIndex(),"Polygon");o.setFillStrokeStyle(n,a),o.drawMultiPolygon(e,r)}let s=i.getText();if(s&&s.getText()){let n=(o||t).getBuilder(i.getZIndex(),"Text");n.setTextStyle(s),n.drawText(e,r)}},GeometryCollection:function(t,e,i,r,o){let n,s;let l=e.getGeometriesArray();for(n=0,s=l.length;n<s;++n)(0,a[l[n].getType()])(t,l[n],i,r,o)},Circle:function(t,e,i,r,o){let n=i.getFill(),a=i.getStroke();if(n||a){let o=t.getBuilder(i.getZIndex(),"Circle");o.setFillStrokeStyle(n,a),o.drawCircle(e,r)}let s=i.getText();if(s&&s.getText()){let n=(o||t).getBuilder(i.getZIndex(),"Text");n.setTextStyle(s),n.drawText(e,r)}}};function s(t,e){return parseInt((0,o.getUid)(t),10)-parseInt((0,o.getUid)(e),10)}function l(t,e){let i=h(t,e);return i*i}function h(t,e){return .5*t/e}function u(t,e,i,o,n,s,l){let h=!1,u=i.getImage();if(u){let t=u.getImageState();t==r.default.LOADED||t==r.default.ERROR?u.unlistenImageChange(n):(t==r.default.IDLE&&u.load(),u.listenImageChange(n),h=!0)}return function(t,e,i,r,o,n){let s=i.getGeometryFunction()(e);if(!s)return;let l=s.simplifyTransformed(r,o);i.getRenderer()?function t(e,i,r,o){if("GeometryCollection"==i.getType()){let n=i.getGeometries();for(let i=0,a=n.length;i<a;++i)t(e,n[i],r,o);return}e.getBuilder(r.getZIndex(),"Default").drawCustom(i,o,r.getRenderer(),r.getHitDetectionRenderer())}(t,l,i,e):(0,a[l.getType()])(t,l,i,e,n)}(t,e,i,o,s,l),h}}),a("aIaid",function(t,i){e(t.exports,"default",()=>h);var r=n("ejLRd"),o=n("7lBr2"),a=n("gbCDL"),s=n("VCbYw"),l=class extends o.default{constructor(t){t=t||{},super({handleEvent:function(t){return"pointermove"==t.type&&this.handleMove_(t),!0}}),this.maps=t.maps||[],!1===t.active&&this.setActive(!1)}setMap(t){this._listener&&((0,r.unByKey)(this._listener.center),(0,r.unByKey)(this._listener.rotation),(0,r.unByKey)(this._listener.resolution),this.getMap().getTargetElement().removeEventListener("mouseout",this._listener.mouseout)),this._listener=null,super.setMap(t),t&&(this._listener={},this._listener.center=this.getMap().getView().on("change:center",this.syncMaps.bind(this)),this._listener.rotation=this.getMap().getView().on("change:rotation",this.syncMaps.bind(this)),this._listener.resolution=this.getMap().getView().on("change:resolution",this.syncMaps.bind(this)),this._listener.mouseout=this.handleMouseOut_.bind(this),this.getMap().getTargetElement()&&this.getMap().getTargetElement().addEventListener("mouseout",this._listener.mouseout),this.syncMaps())}setActive(t){super.setActive(t),this.syncMaps()}syncMaps(){if(this.getActive()){var t=this.getMap();if(t){if(t.get("lockView"))return;for(var e=0;e<this.maps.length;e++)this.maps[e].set("lockView",!0),this.maps[e].getView().getRotation()!=t.getView().getRotation()&&this.maps[e].getView().setRotation(t.getView().getRotation()),this.maps[e].getView().getCenter()!=t.getView().getCenter()&&this.maps[e].getView().setCenter(t.getView().getCenter()),this.maps[e].getView().getResolution()!=t.getView().getResolution()&&this.maps[e].getView().setResolution(t.getView().getResolution()),this.maps[e].set("lockView",!1)}}}handleMove_(t){for(var e=0;e<this.maps.length;e++)this.maps[e].showTarget(t.coordinate);this.getMap().showTarget()}handleMouseOut_(){for(var t=0;t<this.maps.length;t++)this.maps[t]._targetOverlay&&this.maps[t]._targetOverlay.setPosition(void 0)}};a.default.prototype.showTarget=function(t){if(!this._targetOverlay){var e=document.createElement("div");e.classList.add("ol-target"),this._targetOverlay=new s.default({element:e}),this._targetOverlay.setPositioning("center-center"),this.addOverlay(this._targetOverlay),e.parentElement.classList.add("ol-target-overlay"),this._targetOverlay.setPosition([0,0])}this._targetOverlay.setPosition(t)},a.default.prototype.hideTarget=function(){this.removeOverlay(this._targetOverlay),this._targetOverlay=void 0};var h=l}),a("VCbYw",function(t,i){e(t.exports,"default",()=>f);var r=n("fnScq"),o=n("2u1lG"),a=n("erROg"),s=n("jZquI"),l=n("bsgMw"),h=n("cgxQK");let u={ELEMENT:"element",MAP:"map",OFFSET:"offset",POSITION:"position",POSITIONING:"positioning"};class c extends r.default{constructor(t){super(),this.on,this.once,this.un,this.options=t,this.id=t.id,this.insertFirst=void 0===t.insertFirst||t.insertFirst,this.stopEvent=void 0===t.stopEvent||t.stopEvent,this.element=document.createElement("div"),this.element.className=void 0!==t.className?t.className:"ol-overlay-container "+a.CLASS_SELECTABLE,this.element.style.position="absolute",this.element.style.pointerEvents="auto",this.autoPan=!0===t.autoPan?{}:t.autoPan||void 0,this.rendered={transform_:"",visible:!0},this.mapPostrenderListenerKey=null,this.addChangeListener(u.ELEMENT,this.handleElementChanged),this.addChangeListener(u.MAP,this.handleMapChanged),this.addChangeListener(u.OFFSET,this.handleOffsetChanged),this.addChangeListener(u.POSITION,this.handlePositionChanged),this.addChangeListener(u.POSITIONING,this.handlePositioningChanged),void 0!==t.element&&this.setElement(t.element),this.setOffset(void 0!==t.offset?t.offset:[0,0]),this.setPositioning(t.positioning||"top-left"),void 0!==t.position&&this.setPosition(t.position)}getElement(){return this.get(u.ELEMENT)}getId(){return this.id}getMap(){return this.get(u.MAP)||null}getOffset(){return this.get(u.OFFSET)}getPosition(){return this.get(u.POSITION)}getPositioning(){return this.get(u.POSITIONING)}handleElementChanged(){(0,h.removeChildren)(this.element);let t=this.getElement();t&&this.element.appendChild(t)}handleMapChanged(){this.mapPostrenderListenerKey&&((0,h.removeNode)(this.element),(0,l.unlistenByKey)(this.mapPostrenderListenerKey),this.mapPostrenderListenerKey=null);let t=this.getMap();if(t){this.mapPostrenderListenerKey=(0,l.listen)(t,o.default.POSTRENDER,this.render,this),this.updatePixelPosition();let e=this.stopEvent?t.getOverlayContainerStopEvent():t.getOverlayContainer();this.insertFirst?e.insertBefore(this.element,e.childNodes[0]||null):e.appendChild(this.element),this.performAutoPan()}}render(){this.updatePixelPosition()}handleOffsetChanged(){this.updatePixelPosition()}handlePositionChanged(){this.updatePixelPosition(),this.performAutoPan()}handlePositioningChanged(){this.updatePixelPosition()}setElement(t){this.set(u.ELEMENT,t)}setMap(t){this.set(u.MAP,t)}setOffset(t){this.set(u.OFFSET,t)}setPosition(t){this.set(u.POSITION,t)}performAutoPan(){this.autoPan&&this.panIntoView(this.autoPan)}panIntoView(t){let e=this.getMap();if(!e||!e.getTargetElement()||!this.get(u.POSITION))return;let i=this.getRect(e.getTargetElement(),e.getSize()),r=this.getElement(),o=this.getRect(r,[(0,h.outerWidth)(r),(0,h.outerHeight)(r)]),n=void 0===(t=t||{}).margin?20:t.margin;if(!(0,s.containsExtent)(i,o)){let r=o[0]-i[0],a=i[2]-o[2],s=o[1]-i[1],l=i[3]-o[3],h=[0,0];if(r<0?h[0]=r-n:a<0&&(h[0]=Math.abs(a)+n),s<0?h[1]=s-n:l<0&&(h[1]=Math.abs(l)+n),0!==h[0]||0!==h[1]){let i=e.getView().getCenterInternal(),r=e.getPixelFromCoordinateInternal(i);if(!r)return;let o=[r[0]+h[0],r[1]+h[1]],n=t.animation||{};e.getView().animateInternal({center:e.getCoordinateFromPixelInternal(o),duration:n.duration,easing:n.easing})}}}getRect(t,e){let i=t.getBoundingClientRect(),r=i.left+window.pageXOffset,o=i.top+window.pageYOffset;return[r,o,r+e[0],o+e[1]]}setPositioning(t){this.set(u.POSITIONING,t)}setVisible(t){this.rendered.visible!==t&&(this.element.style.display=t?"":"none",this.rendered.visible=t)}updatePixelPosition(){let t=this.getMap(),e=this.getPosition();if(!t||!t.isRendered()||!e){this.setVisible(!1);return}let i=t.getPixelFromCoordinate(e),r=t.getSize();this.updateRenderedPosition(i,r)}updateRenderedPosition(t,e){let i=this.element.style,r=this.getOffset(),o=this.getPositioning();this.setVisible(!0);let n=Math.round(t[0]+r[0])+"px",a=Math.round(t[1]+r[1])+"px",s="0%",l="0%";"bottom-right"==o||"center-right"==o||"top-right"==o?s="-100%":("bottom-center"==o||"center-center"==o||"top-center"==o)&&(s="-50%"),"bottom-left"==o||"bottom-center"==o||"bottom-right"==o?l="-100%":("center-left"==o||"center-center"==o||"center-right"==o)&&(l="-50%");let h=`translate(${s}, ${l}) translate(${n}, ${a})`;this.rendered.transform_!=h&&(this.rendered.transform_=h,i.transform=h)}getOptions(){return this.options}}var f=c}),a("1NiL5",function(t,i){e(t.exports,"default",()=>l);var r=n("aZxrf"),o=n("kBBZ2"),a=n("fkmMz");class s extends r.default{constructor(t){super({title:t.title||"MVT",type:"MVT",attributions:t.attributions,declutter:!0}),t.url&&this.loadMapboxStyle({url:t.url,useTitle:!t.title})}}r.default.prototype.loadMapboxStyle=function(t){this.set("styleUrl",t.url),(0,a.default).get({url:t.url,success:e=>{t.useTitle&&(console.log("useTitle"),this.set("title",e.name||"MVT")),t.source||(t.source=Object.keys(e.sources)[0]),this.applyStyle(e,t.source),this.dispatchEvent({type:"style:load",source:t.source,style:e})}})},r.default.prototype.applyStyle=function(t,e){e||(e=Object.keys(t.sources)[0]),this._glStyle=t,(0,o.applyStyle)(this,t,e).then(()=>{this.dispatchEvent({type:"style:apply",source:e,style:t})})};var l=s}),a("aZxrf",function(t,i){e(t.exports,"default",()=>l);var r=n("gNqjI"),o=n("jPVWI");n("juLo9");var a=n("cWXYt");class s extends r.default{constructor(t){super(t),this.selectable(!1),this.setStyle((0,a.getStyleFn)())}}s.prototype.setSource=function(t){t&&(t.on("tileloadend",t=>{t.tile.getFeatures().forEach(t=>t.setLayer(this))}),!t.getAttributions()&&this.get("attributions")&&t.setAttributions(this.get("attributions"))),(0,r.default).prototype.setSource.call(this,t)},r.default.prototype.setIgnStyle=o.default.prototype.setIgnStyle,r.default.prototype.getIgnStyle=o.default.prototype.getIgnStyle,r.default.prototype.defaultIgnStyle=o.default.prototype.defaultIgnStyle,r.default.prototype.getPopupContent=o.default.prototype.getPopupContent,r.default.prototype.setPopupContent=o.default.prototype.setPopupContent,r.default.prototype.selectable=o.default.prototype.selectable;var l=s}),a("gNqjI",function(t,i){e(t.exports,"default",()=>h);var r=n("2YyN3"),o=n("iHrN6"),a=n("8ElLP"),s=n("eJ4LZ");class l extends r.default{constructor(t){let e=Object.assign({},t=t||{});delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un;let i=t.renderMode||"hybrid";(0,s.assert)("hybrid"==i||"vector"==i,"`renderMode` must be `'hybrid'` or `'vector'`"),this.renderMode_=i,this.setPreload(t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError),this.getBackground,this.setBackground}createRenderer(){return new o.default(this)}getFeatures(t){return super.getFeatures(t)}getRenderMode(){return this.renderMode_}getPreload(){return this.get(a.default.PRELOAD)}getUseInterimTilesOnError(){return this.get(a.default.USE_INTERIM_TILES_ON_ERROR)}setPreload(t){this.set(a.default.PRELOAD,t)}setUseInterimTilesOnError(t){this.set(a.default.USE_INTERIM_TILES_ON_ERROR,t)}}var h=l}),a("iHrN6",function(t,i){e(t.exports,"default",()=>v);var r=n("8vXOK"),o=n("dVSax"),a=n("1FnBm"),s=n("av38f"),l=n("bCUH1"),h=n("3CYjy"),u=n("14PDX"),c=n("jZquI"),f=n("713Fw"),d=n("lVQul"),p=n("6BjcK"),g=n("d1ltq");let m={image:["Polygon","Circle","LineString","Image","Text"],hybrid:["Polygon","LineString"],vector:[]},y={hybrid:["Image","Text","Default"],vector:["Polygon","Circle","LineString","Image","Text","Default"]};class x extends a.default{constructor(t){super(t),this.boundHandleStyleImageChange_=this.handleStyleImageChange_.bind(this),this.renderedLayerRevision_,this.renderedPixelToCoordinateTransform_=null,this.renderedRotation_,this.tmpTransform_=(0,u.create)()}prepareTile(t,e,i){let r;let o=t.getState();return(o===s.default.LOADED||o===s.default.ERROR)&&(this.updateExecutorGroup_(t,e,i),this.tileImageNeedsRender_(t)&&(r=!0)),r}getTile(t,e,i,r){let o=r.pixelRatio,n=r.viewState,a=n.resolution,s=n.projection,h=this.getLayer(),u=h.getSource().getTile(t,e,i,o,s),c=r.viewHints,f=!(c[l.default.ANIMATING]||c[l.default.INTERACTING]);return(f||!u.wantedResolution)&&(u.wantedResolution=a),this.prepareTile(u,o,s)&&(f||Date.now()-r.time<8)&&"vector"!==h.getRenderMode()&&this.renderTileImage_(u,r),super.getTile(t,e,i,r)}isDrawableTile(t){let e=this.getLayer();return super.isDrawableTile(t)&&("vector"===e.getRenderMode()?(0,d.getUid)(e) in t.executorGroups:t.hasContext(e))}getTileImage(t){return t.getImage(this.getLayer())}prepareFrame(t){let e=this.getLayer().getRevision();return this.renderedLayerRevision_!==e&&(this.renderedLayerRevision_=e,this.renderedTiles.length=0),super.prepareFrame(t)}updateExecutorGroup_(t,e,i){let n=this.getLayer(),a=n.getRevision(),l=n.getRenderOrder()||null,h=t.wantedResolution,u=t.getReplayState(n);if(!u.dirty&&u.renderedResolution===h&&u.renderedRevision==a&&u.renderedRenderOrder==l)return;let p=n.getSource(),g=n.getDeclutter(),m=p.getTileGrid(),y=p.getTileGridForProjection(i).getTileCoordExtent(t.wrappedTileCoord),x=p.getSourceTiles(e,i,t),v=(0,d.getUid)(n);delete t.hitDetectionImageData[v],t.executorGroups[v]=[],g&&(t.declutterExecutorGroups[v]=[]),u.dirty=!1;for(let i=0,a=x.length;i<a;++i){let a=x[i];if(a.getState()!=s.default.LOADED)continue;let d=a.tileCoord,b=m.getTileCoordExtent(d),w=(0,c.getIntersection)(y,b),_=(0,c.buffer)(w,n.getRenderBuffer()*h,this.tmpExtent),S=(0,c.equals)(b,w)?null:_,E=new r.default(0,_,h,e),A=g?new r.default(0,w,h,e):void 0,N=(0,f.getSquaredTolerance)(h,e),I=function(t){let e;let i=t.getStyleFunction()||n.getStyleFunction();if(i&&(e=i(t,h)),e){let i=this.renderFeature(t,N,e,E,A);u.dirty=u.dirty||i}},M=a.getFeatures();l&&l!==u.renderedRenderOrder&&M.sort(l);for(let t=0,e=M.length;t<e;++t){let e=M[t];(!S||(0,c.intersects)(S,e.getGeometry().getExtent()))&&I.call(this,e)}let P=E.finish(),C="vector"!==n.getRenderMode()&&g&&1===x.length?null:w,T=new o.default(C,h,e,p.getOverlaps(),P,n.getRenderBuffer());if(t.executorGroups[v].push(T),A){let i=new o.default(null,h,e,p.getOverlaps(),A.finish(),n.getRenderBuffer());t.declutterExecutorGroups[v].push(i)}}u.renderedRevision=a,u.renderedRenderOrder=l,u.renderedResolution=h}forEachFeatureAtCoordinate(t,e,i,r,o){let n;let a=e.viewState.resolution,s=e.viewState.rotation;i=void 0==i?0:i;let l=this.getLayer(),h=l.getSource().getTileGridForProjection(e.viewState.projection),u=(0,c.boundingExtent)([t]);(0,c.buffer)(u,a*i,u);let f={},p=function(t,e,i){let n=t.getId();void 0===n&&(n=(0,d.getUid)(t));let a=f[n];if(a){if(!0!==a&&i<a.distanceSq){if(0===i)return f[n]=!0,o.splice(o.lastIndexOf(a),1),r(t,l,e);a.geometry=e,a.distanceSq=i}}else{if(0===i)return f[n]=!0,r(t,l,e);o.push(f[n]={feature:t,layer:l,geometry:e,distanceSq:i,callback:r})}},g=this.renderedTiles;for(let r=0,o=g.length;!n&&r<o;++r){let o=g[r],f=h.getTileCoordExtent(o.wrappedTileCoord);if(!(0,c.intersects)(f,u))continue;let m=(0,d.getUid)(l),y=[o.executorGroups[m]],x=o.declutterExecutorGroups[m];x&&y.push(x),y.some(r=>{let o=r===x?e.declutterTree.all().map(t=>t.value):null;for(let e=0,l=r.length;e<l;++e)if(n=r[e].forEachFeatureAtCoordinate(t,a,s,i,p,o))return!0})}return n}getFeatures(t){return new Promise((e,i)=>{let r;let o=this.getLayer(),n=(0,d.getUid)(o),a=o.getSource(),l=this.renderedProjection,f=l.getExtent(),m=this.renderedResolution,y=a.getTileGridForProjection(l),x=(0,u.apply)(this.renderedPixelToCoordinateTransform_,t.slice()),v=y.getTileCoordForCoordAndResolution(x,m);for(let t=0,e=this.renderedTiles.length;t<e;++t)if(v.toString()===this.renderedTiles[t].tileCoord.toString()){if((r=this.renderedTiles[t]).getState()===s.default.LOADED){let t=y.getTileCoordExtent(r.tileCoord);a.getWrapX()&&l.canWrapX()&&!(0,c.containsExtent)(f,t)&&(0,g.wrapX)(x,l);break}r=void 0}if(!r||r.loadingSourceTiles>0){e([]);return}let b=y.getTileCoordExtent(r.wrappedTileCoord),w=(0,c.getTopLeft)(b),_=[(x[0]-w[0])/m,(w[1]-x[1])/m],S=r.getSourceTiles().reduce(function(t,e){return t.concat(e.getFeatures())},[]),E=r.hitDetectionImageData[n];if(!E){let t=(0,p.toSize)(y.getTileSize(y.getZForResolution(m,a.zDirection))),e=this.renderedRotation_,i=[this.getRenderTransform(y.getTileCoordCenter(r.wrappedTileCoord),m,0,h.HIT_DETECT_RESOLUTION,t[0]*h.HIT_DETECT_RESOLUTION,t[1]*h.HIT_DETECT_RESOLUTION,0)];E=(0,h.createHitDetectionImageData)(t,i,S,o.getStyleFunction(),y.getTileCoordExtent(r.wrappedTileCoord),r.getReplayState(o).renderedResolution,e),r.hitDetectionImageData[n]=E}e((0,h.hitDetect)(_,S,E))})}handleFontsChanged(){let t=this.getLayer();t.getVisible()&&void 0!==this.renderedLayerRevision_&&t.changed()}handleStyleImageChange_(t){this.renderIfReadyAndVisible()}renderDeclutter(t){let e=this.context,i=e.globalAlpha;e.globalAlpha=this.getLayer().getOpacity();let r=t.viewHints,o=!(r[l.default.ANIMATING]||r[l.default.INTERACTING]),n=this.renderedTiles;for(let e=0,i=n.length;e<i;++e){let i=n[e],r=i.declutterExecutorGroups[(0,d.getUid)(this.getLayer())];if(r)for(let e=r.length-1;e>=0;--e)r[e].execute(this.context,1,this.getTileRenderTransform(i,t),t.viewState.rotation,o,void 0,t.declutterTree)}e.globalAlpha=i}getTileRenderTransform(t,e){let i=e.pixelRatio,r=e.viewState,o=r.center,n=r.resolution,a=r.rotation,s=e.size,l=Math.round(s[0]*i),h=Math.round(s[1]*i),c=this.getLayer().getSource().getTileGridForProjection(e.viewState.projection),f=t.tileCoord,d=c.getTileCoordExtent(t.wrappedTileCoord),p=c.getTileCoordExtent(f,this.tmpExtent)[0]-d[0];return(0,u.multiply)((0,u.scale)(this.inversePixelTransform.slice(),1/i,1/i),this.getRenderTransform(o,n,a,i,l,h,p))}postRender(t,e){let i=e.viewHints,r=!(i[l.default.ANIMATING]||i[l.default.INTERACTING]);this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice(),this.renderedRotation_=e.viewState.rotation;let o=this.getLayer(),n=o.getRenderMode(),a=t.globalAlpha;t.globalAlpha=o.getOpacity();let s=y[n],h=e.viewState,u=h.rotation,f=o.getSource(),p=f.getTileGridForProjection(h.projection).getZForResolution(h.resolution,f.zDirection),g=this.renderedTiles,m=[],x=[],v=!0;for(let i=g.length-1;i>=0;--i){let n=g[i];v=v&&!n.getReplayState(o).dirty;let a=n.executorGroups[(0,d.getUid)(o)].filter(t=>t.hasExecutors(s));if(0===a.length)continue;let l=this.getTileRenderTransform(n,e),h=n.tileCoord[0],f=!1,y=a[0].getClipCoords(l);if(y){for(let e=0,i=m.length;e<i;++e)if(p!==h&&h<x[e]){let i=m[e];(0,c.intersects)([y[0],y[3],y[4],y[7]],[i[0],i[3],i[4],i[7]])&&(f||(t.save(),f=!0),t.beginPath(),t.moveTo(y[0],y[1]),t.lineTo(y[2],y[3]),t.lineTo(y[4],y[5]),t.lineTo(y[6],y[7]),t.moveTo(i[6],i[7]),t.lineTo(i[4],i[5]),t.lineTo(i[2],i[3]),t.lineTo(i[0],i[1]),t.clip())}m.push(y),x.push(h)}for(let e=0,i=a.length;e<i;++e)a[e].execute(t,1,l,u,r,s);f&&t.restore()}t.globalAlpha=a,this.ready=v,super.postRender(t,e)}renderFeature(t,e,i,r,o){if(!i)return!1;let n=!1;if(Array.isArray(i))for(let a=0,s=i.length;a<s;++a)n=(0,f.renderFeature)(r,t,i[a],e,this.boundHandleStyleImageChange_,void 0,o)||n;else n=(0,f.renderFeature)(r,t,i,e,this.boundHandleStyleImageChange_,void 0,o);return n}tileImageNeedsRender_(t){let e=this.getLayer();if("vector"===e.getRenderMode())return!1;let i=t.getReplayState(e),r=e.getRevision(),o=t.wantedResolution;return i.renderedTileResolution!==o||i.renderedTileRevision!==r}renderTileImage_(t,e){let i=this.getLayer(),r=t.getReplayState(i),o=i.getRevision(),n=t.executorGroups[(0,d.getUid)(i)];r.renderedTileRevision=o;let a=t.wrappedTileCoord,s=a[0],l=i.getSource(),h=e.pixelRatio,c=e.viewState.projection,f=l.getTileGridForProjection(c),p=f.getResolution(t.tileCoord[0]),g=e.pixelRatio/t.wantedResolution*p,y=f.getResolution(s),x=t.getContext(i);h=Math.round(Math.max(h,g/h));let v=l.getTilePixelSize(s,h,c);x.canvas.width=v[0],x.canvas.height=v[1];let b=h/g;if(1!==b){let t=(0,u.reset)(this.tmpTransform_);(0,u.scale)(t,b,b),x.setTransform.apply(x,t)}let w=f.getTileCoordExtent(a,this.tmpExtent),_=g/y,S=(0,u.reset)(this.tmpTransform_);(0,u.scale)(S,_,-_),(0,u.translate)(S,-w[0],-w[3]);for(let t=0,e=n.length;t<e;++t)n[t].execute(x,b,S,0,!0,m[i.getRenderMode()]);r.renderedTileResolution=t.wantedResolution}}var v=x}),a("1FnBm",function(t,i){e(t.exports,"default",()=>m);var r=n("ddIVC"),o=n("6EHBB"),a=n("lUH7Q"),s=n("jRKCY"),l=n("av38f"),h=n("14PDX"),u=n("kBSVF"),c=n("jZquI"),f=n("gzr8q"),d=n("lVQul"),p=n("6BjcK");class g extends r.default{constructor(t){super(t),this.extentChanged=!0,this.renderedExtent_=null,this.renderedPixelRatio,this.renderedProjection=null,this.renderedRevision,this.renderedTiles=[],this.newTiles_=!1,this.tmpExtent=(0,c.createEmpty)(),this.tmpTileRange_=new s.default(0,0,0,0)}isDrawableTile(t){let e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==l.default.LOADED||i==l.default.EMPTY||i==l.default.ERROR&&!r}getTile(t,e,i,r){let o=r.pixelRatio,n=r.viewState.projection,a=this.getLayer(),s=a.getSource().getTile(t,e,i,o,n);return s.getState()==l.default.ERROR&&a.getUseInterimTilesOnError()&&a.getPreload()>0&&(this.newTiles_=!0),this.isDrawableTile(s)||(s=s.getInterimTile()),s}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),r=(0,h.apply)(e.pixelToCoordinateTransform,t.slice()),n=i.getExtent();if(n&&!(0,c.containsCoordinate)(n,r))return null;let s=e.pixelRatio,u=e.viewState.projection,f=e.viewState,d=i.getRenderSource(),g=d.getTileGridForProjection(f.projection),m=d.getTilePixelRatio(e.pixelRatio);for(let t=g.getZForResolution(f.resolution);t>=g.getMinZoom();--t){let e=g.getTileCoordForCoordAndZ(r,t),i=d.getTile(t,e[1],e[2],s,u);if(!(i instanceof o.default||i instanceof a.default)||i instanceof a.default&&i.getState()===l.default.EMPTY)break;if(i.getState()!==l.default.LOADED)continue;let n=g.getOrigin(t),h=(0,p.toSize)(g.getTileSize(t)),c=g.getResolution(t),y=Math.floor(m*((r[0]-n[0])/c-e[1]*h[0])),x=Math.floor(m*((n[1]-r[1])/c-e[2]*h[1])),v=Math.round(m*d.getGutterForProjection(f.projection));return this.getImageData(i.getImage(),y+v,x+v)}return null}loadedTileCallback(t,e,i){return!!this.isDrawableTile(i)&&super.loadedTileCallback(t,e,i)}prepareFrame(t){return!!this.getLayer().getSource()}renderFrame(t,e){let i,r,o;let n=t.layerStatesArray[t.layerIndex],a=t.viewState,s=a.projection,p=a.resolution,g=a.center,m=a.rotation,y=t.pixelRatio,x=this.getLayer(),v=x.getSource(),b=v.getRevision(),w=v.getTileGridForProjection(s),_=w.getZForResolution(p,v.zDirection),S=w.getResolution(_),E=t.extent,A=t.viewState.resolution,N=v.getTilePixelRatio(y),I=Math.round((0,c.getWidth)(E)/A*y),M=Math.round((0,c.getHeight)(E)/A*y),P=n.extent&&(0,f.fromUserExtent)(n.extent,s);P&&(E=(0,c.getIntersection)(E,(0,f.fromUserExtent)(n.extent,s)));let C=S*I/2/N,T=S*M/2/N,L=[g[0]-C,g[1]-T,g[0]+C,g[1]+T],R=w.getTileRangeForExtentAndZ(E,_),O={};O[_]={};let k=this.createLoadedTileFinder(v,s,O),G=this.tmpExtent,Z=this.tmpTileRange_;this.newTiles_=!1;let F=m?(0,c.getRotatedViewport)(a.center,A,m,t.size):void 0;for(let e=R.minX;e<=R.maxX;++e)for(let i=R.minY;i<=R.maxY;++i){if(m&&!w.tileCoordIntersectsViewport([_,e,i],F))continue;let r=this.getTile(_,e,i,t);if(this.isDrawableTile(r)){let e=(0,d.getUid)(this);if(r.getState()==l.default.LOADED){O[_][r.tileCoord.toString()]=r;let t=r.inTransition(e);t&&1!==n.opacity&&(r.endTransition(e),t=!1),this.newTiles_||!t&&this.renderedTiles.includes(r)||(this.newTiles_=!0)}if(1===r.getAlpha(e,t.time))continue}let o=w.getTileCoordChildTileRange(r.tileCoord,Z,G),a=!1;o&&(a=k(_+1,o)),a||w.forEachTileCoordParentTileRange(r.tileCoord,k,Z,G)}let D=S/p*y/N;(0,h.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/y,1/y,m,-I/2,-M/2);let j=(0,h.toString)(this.pixelTransform);this.useContainer(e,j,this.getBackground(t));let q=this.context,U=q.canvas;(0,h.makeInverse)(this.inversePixelTransform,this.pixelTransform),(0,h.compose)(this.tempTransform,I/2,M/2,D,D,0,-I/2,-M/2),U.width!=I||U.height!=M?(U.width=I,U.height=M):this.containerReused||q.clearRect(0,0,I,M),P&&this.clipUnrotated(q,t,P),v.getInterpolate()||(q.imageSmoothingEnabled=!1),this.preRender(q,t),this.renderedTiles.length=0;let B=Object.keys(O).map(Number);B.sort(u.ascending),1===n.opacity&&(!this.containerReused||v.getOpaque(t.viewState.projection))?B=B.reverse():(i=[],r=[]);for(let e=B.length-1;e>=0;--e){let n=B[e],a=v.getTilePixelSize(n,y,s),l=w.getResolution(n)/S,u=a[0]*l*D,f=a[1]*l*D,p=w.getTileCoordForCoordAndZ((0,c.getTopLeft)(L),n),g=w.getTileCoordExtent(p),m=(0,h.apply)(this.tempTransform,[N*(g[0]-L[0])/S,N*(L[3]-g[3])/S]),x=N*v.getGutterForProjection(s),b=O[n];for(let e in b){let a=b[e],s=a.tileCoord,l=p[1]-s[1],h=Math.round(m[0]-(l-1)*u),g=p[2]-s[2],y=Math.round(m[1]-(g-1)*f),w=Math.round(m[0]-l*u),S=Math.round(m[1]-g*f),E=h-w,A=y-S,N=_===n,I=N&&1!==a.getAlpha((0,d.getUid)(this),t.time),M=!1;if(!I){if(i){o=[w,S,w+E,S,w+E,S+A,w,S+A];for(let t=0,e=i.length;t<e;++t)if(_!==n&&n<r[t]){let e=i[t];(0,c.intersects)([w,S,w+E,S+A],[e[0],e[3],e[4],e[7]])&&(M||(q.save(),M=!0),q.beginPath(),q.moveTo(o[0],o[1]),q.lineTo(o[2],o[3]),q.lineTo(o[4],o[5]),q.lineTo(o[6],o[7]),q.moveTo(e[6],e[7]),q.lineTo(e[4],e[5]),q.lineTo(e[2],e[3]),q.lineTo(e[0],e[1]),q.clip())}i.push(o),r.push(n)}else q.clearRect(w,S,E,A)}this.drawTileImage(a,t,w,S,E,A,x,N),i&&!I?(M&&q.restore(),this.renderedTiles.unshift(a)):this.renderedTiles.push(a),this.updateUsedTiles(t.usedTiles,v,a)}}return this.renderedRevision=b,this.renderedResolution=S,this.extentChanged=!this.renderedExtent_||!(0,c.equals)(this.renderedExtent_,L),this.renderedExtent_=L,this.renderedPixelRatio=y,this.renderedProjection=s,this.manageTilePyramid(t,v,w,y,s,E,_,x.getPreload()),this.scheduleExpireCache(t,v),this.postRender(q,t),n.extent&&q.restore(),q.imageSmoothingEnabled=!0,j!==U.style.transform&&(U.style.transform=j),this.container}drawTileImage(t,e,i,r,o,n,a,s){let l=this.getTileImage(t);if(!l)return;let h=(0,d.getUid)(this),u=e.layerStatesArray[e.layerIndex],c=u.opacity*(s?t.getAlpha(h,e.time):1),f=c!==this.context.globalAlpha;f&&(this.context.save(),this.context.globalAlpha=c),this.context.drawImage(l,a,a,l.width-2*a,l.height-2*a,i,r,o,n),f&&this.context.restore(),c!==u.opacity?e.animate=!0:s&&t.endTransition(h)}getImage(){let t=this.context;return t?t.canvas:null}getTileImage(t){return t.getImage()}scheduleExpireCache(t,e){if(e.canExpireCache()){let i=(function(t,e,i){let r=(0,d.getUid)(t);r in i.usedTiles&&t.expireCache(i.viewState.projection,i.usedTiles[r])}).bind(null,e);t.postRenderFunctions.push(i)}}updateUsedTiles(t,e,i){let r=(0,d.getUid)(e);r in t||(t[r]={}),t[r][i.getKey()]=!0}manageTilePyramid(t,e,i,r,o,n,a,s,h){let u,f,p,g,m,y;let x=(0,d.getUid)(e);x in t.wantedTiles||(t.wantedTiles[x]={});let v=t.wantedTiles[x],b=t.tileQueue,w=i.getMinZoom(),_=t.viewState.rotation,S=_?(0,c.getRotatedViewport)(t.viewState.center,t.viewState.resolution,_,t.size):void 0,E=0;for(y=w;y<=a;++y)for(f=i.getTileRangeForExtentAndZ(n,y,f),p=i.getResolution(y),g=f.minX;g<=f.maxX;++g)for(m=f.minY;m<=f.maxY;++m)(!_||i.tileCoordIntersectsViewport([y,g,m],S))&&(a-y<=s?(++E,(u=e.getTile(y,g,m,r,o)).getState()!=l.default.IDLE||(v[u.getKey()]=!0,b.isKeyQueued(u.getKey())||b.enqueue([u,x,i.getTileCoordCenter(u.tileCoord),p])),void 0!==h&&h(u)):e.useTile(y,g,m,o));e.updateCacheSize(E,o)}}var m=g}),a("6EHBB",function(t,i){e(t.exports,"default",()=>h);var r=n("hMeZw"),o=n("av38f"),a=n("cgxQK"),s=n("kUxvm");class l extends r.default{constructor(t,e,i,r,o,n){super(t,e,n),this.crossOrigin_=r,this.src_=i,this.key=i,this.image_=new Image,null!==r&&(this.image_.crossOrigin=r),this.unlisten_=null,this.tileLoadFunction_=o}getImage(){return this.image_}setImage(t){this.image_=t,this.state=o.default.LOADED,this.unlistenImage_(),this.changed()}handleImageError_(){this.state=o.default.ERROR,this.unlistenImage_(),this.image_=function(){let t=(0,a.createCanvasContext2D)(1,1);return t.fillStyle="rgba(0,0,0,0)",t.fillRect(0,0,1,1),t.canvas}(),this.changed()}handleImageLoad_(){let t=this.image_;t.naturalWidth&&t.naturalHeight?this.state=o.default.LOADED:this.state=o.default.EMPTY,this.unlistenImage_(),this.changed()}load(){this.state==o.default.ERROR&&(this.state=o.default.IDLE,this.image_=new Image,null!==this.crossOrigin_&&(this.image_.crossOrigin=this.crossOrigin_)),this.state==o.default.IDLE&&(this.state=o.default.LOADING,this.changed(),this.tileLoadFunction_(this,this.src_),this.unlisten_=(0,s.listenImage)(this.image_,this.handleImageLoad_.bind(this),this.handleImageError_.bind(this)))}unlistenImage_(){this.unlisten_&&(this.unlisten_(),this.unlisten_=null)}}var h=l}),a("hMeZw",function(t,i){e(t.exports,"default",()=>u);var r=n("9LzRi"),o=n("cw4dl"),a=n("av38f"),s=n("lVQul"),l=n("jZ9vT");class h extends r.default{constructor(t,e,i){super(),i=i||{},this.tileCoord=t,this.state=e,this.interimTile=null,this.key="",this.transition_=void 0===i.transition?250:i.transition,this.transitionStarts_={},this.interpolate=!!i.interpolate}changed(){this.dispatchEvent(o.default.CHANGE)}release(){this.state===a.default.ERROR&&this.setState(a.default.EMPTY)}getKey(){return this.key+"/"+this.tileCoord}getInterimTile(){let t=this.interimTile;if(!t)return this;do{if(t.getState()==a.default.LOADED)return this.transition_=0,t;t=t.interimTile}while(t)return this}refreshInterimChain(){let t=this.interimTile;if(!t)return;let e=this;do{if(t.getState()==a.default.LOADED){t.interimTile=null;break}t.getState()==a.default.LOADING?e=t:t.getState()==a.default.IDLE?e.interimTile=t.interimTile:e=t,t=e.interimTile}while(t)}getTileCoord(){return this.tileCoord}getState(){return this.state}setState(t){if(this.state!==a.default.ERROR&&this.state>t)throw Error("Tile load sequence violation");this.state=t,this.changed()}load(){(0,s.abstract)()}getAlpha(t,e){if(!this.transition_)return 1;let i=this.transitionStarts_[t];if(i){if(-1===i)return 1}else i=e,this.transitionStarts_[t]=i;let r=e-i+1e3/60;return r>=this.transition_?1:(0,l.easeIn)(r/this.transition_)}inTransition(t){return!!this.transition_&&-1!==this.transitionStarts_[t]}endTransition(t){this.transition_&&(this.transitionStarts_[t]=-1)}}var u=h}),a("lUH7Q",function(t,i){e(t.exports,"default",()=>g);var r=n("9ndmc"),o=n("cw4dl"),a=n("hMeZw"),s=n("av38f"),l=n("9JHmh"),h=n("gpSXC"),u=n("a6roo"),c=n("jZquI"),f=n("bsgMw"),d=n("cgxQK");class p extends a.default{constructor(t,e,i,o,n,a,f,d,p,g,m,y){super(n,s.default.IDLE,y),this.renderEdges_=void 0!==m&&m,this.pixelRatio_=f,this.gutter_=d,this.canvas_=null,this.sourceTileGrid_=e,this.targetTileGrid_=o,this.wrappedTileCoord_=a||n,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let x=o.getTileCoordExtent(this.wrappedTileCoord_),v=this.targetTileGrid_.getExtent(),b=this.sourceTileGrid_.getExtent(),w=v?(0,c.getIntersection)(x,v):x;if(0===(0,c.getArea)(w)){this.state=s.default.EMPTY;return}let _=t.getExtent();_&&(b=b?(0,c.getIntersection)(b,_):_);let S=o.getResolution(this.wrappedTileCoord_[0]),E=(0,h.calculateSourceExtentResolution)(t,i,w,S);if(!isFinite(E)||E<=0){this.state=s.default.EMPTY;return}let A=void 0!==g?g:r.ERROR_THRESHOLD;if(this.triangulation_=new l.default(t,i,w,b,E*A,S),0===this.triangulation_.getTriangles().length){this.state=s.default.EMPTY;return}this.sourceZ_=e.getZForResolution(E);let N=this.triangulation_.calculateSourceExtent();if(b&&(t.canWrapX()?(N[1]=(0,u.clamp)(N[1],b[1],b[3]),N[3]=(0,u.clamp)(N[3],b[1],b[3])):N=(0,c.getIntersection)(N,b)),(0,c.getArea)(N)){let t=e.getTileRangeForExtentAndZ(N,this.sourceZ_);for(let e=t.minX;e<=t.maxX;e++)for(let i=t.minY;i<=t.maxY;i++){let t=p(this.sourceZ_,e,i,f);t&&this.sourceTiles_.push(t)}0===this.sourceTiles_.length&&(this.state=s.default.EMPTY)}else this.state=s.default.EMPTY}getImage(){return this.canvas_}reproject_(){let t=[];if(this.sourceTiles_.forEach(e=>{e&&e.getState()==s.default.LOADED&&t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),image:e.getImage()})}),this.sourceTiles_.length=0,0===t.length)this.state=s.default.ERROR;else{let e=this.wrappedTileCoord_[0],i=this.targetTileGrid_.getTileSize(e),r="number"==typeof i?i:i[0],o="number"==typeof i?i:i[1],n=this.targetTileGrid_.getResolution(e),a=this.sourceTileGrid_.getResolution(this.sourceZ_),l=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_);this.canvas_=(0,h.render)(r,o,this.pixelRatio_,a,this.sourceTileGrid_.getExtent(),n,l,this.triangulation_,t,this.gutter_,this.renderEdges_,this.interpolate),this.state=s.default.LOADED}this.changed()}load(){if(this.state==s.default.IDLE){this.state=s.default.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{let i=e.getState();if(i==s.default.IDLE||i==s.default.LOADING){t++;let i=(0,f.listen)(e,o.default.CHANGE,function(r){let o=e.getState();(o==s.default.LOADED||o==s.default.ERROR||o==s.default.EMPTY)&&((0,f.unlistenByKey)(i),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(i)}}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t,e,i){t.getState()==s.default.IDLE&&t.load()})}}unlistenSources_(){this.sourcesListenerKeys_.forEach(f.unlistenByKey),this.sourcesListenerKeys_=null}release(){this.canvas_&&((0,d.releaseCanvas)(this.canvas_.getContext("2d")),(0,h.canvasPool).push(this.canvas_),this.canvas_=null),super.release()}}var g=p}),a("9ndmc",function(t,i){e(t.exports,"ERROR_THRESHOLD",()=>r);let r=.5}),a("9JHmh",function(t,i){e(t.exports,"default",()=>s);var r=n("jZquI"),o=n("gzr8q"),a=n("a6roo"),s=class{constructor(t,e,i,n,a,s){this.sourceProj_=t,this.targetProj_=e;let l={},h=(0,o.getTransform)(this.targetProj_,this.sourceProj_);this.transformInv_=function(t){let e=t[0]+"/"+t[1];return l[e]||(l[e]=h(t)),l[e]},this.maxSourceExtent_=n,this.errorThresholdSquared_=a*a,this.triangles_=[],this.wrapsXInSource_=!1,this.canWrapXInSource_=this.sourceProj_.canWrapX()&&!!n&&!!this.sourceProj_.getExtent()&&(0,r.getWidth)(n)>=(0,r.getWidth)(this.sourceProj_.getExtent()),this.sourceWorldWidth_=this.sourceProj_.getExtent()?(0,r.getWidth)(this.sourceProj_.getExtent()):null,this.targetWorldWidth_=this.targetProj_.getExtent()?(0,r.getWidth)(this.targetProj_.getExtent()):null;let u=(0,r.getTopLeft)(i),c=(0,r.getTopRight)(i),f=(0,r.getBottomRight)(i),d=(0,r.getBottomLeft)(i),p=this.transformInv_(u),g=this.transformInv_(c),m=this.transformInv_(f),y=this.transformInv_(d),x=10+(s?Math.max(0,Math.ceil(Math.log2((0,r.getArea)(i)/(s*s*65536)))):0);if(this.addQuad_(u,c,f,d,p,g,m,y,x),this.wrapsXInSource_){let t=1/0;this.triangles_.forEach(function(e,i,r){t=Math.min(t,e.source[0][0],e.source[1][0],e.source[2][0])}),this.triangles_.forEach(e=>{if(Math.max(e.source[0][0],e.source[1][0],e.source[2][0])-t>this.sourceWorldWidth_/2){let i=[[e.source[0][0],e.source[0][1]],[e.source[1][0],e.source[1][1]],[e.source[2][0],e.source[2][1]]];i[0][0]-t>this.sourceWorldWidth_/2&&(i[0][0]-=this.sourceWorldWidth_),i[1][0]-t>this.sourceWorldWidth_/2&&(i[1][0]-=this.sourceWorldWidth_),i[2][0]-t>this.sourceWorldWidth_/2&&(i[2][0]-=this.sourceWorldWidth_);let r=Math.min(i[0][0],i[1][0],i[2][0]);Math.max(i[0][0],i[1][0],i[2][0])-r<this.sourceWorldWidth_/2&&(e.source=i)}})}l={}}addTriangle_(t,e,i,r,o,n){this.triangles_.push({source:[r,o,n],target:[t,e,i]})}addQuad_(t,e,i,o,n,s,l,h,u){let c=(0,r.boundingExtent)([n,s,l,h]),f=this.sourceWorldWidth_?(0,r.getWidth)(c)/this.sourceWorldWidth_:null,d=this.sourceWorldWidth_,p=this.sourceProj_.canWrapX()&&f>.5&&f<1,g=!1;if(u>0){if(this.targetProj_.isGlobal()&&this.targetWorldWidth_){let n=(0,r.boundingExtent)([t,e,i,o]);g=(0,r.getWidth)(n)/this.targetWorldWidth_>.25||g}!p&&this.sourceProj_.isGlobal()&&f&&(g=f>.25||g)}if(!g&&this.maxSourceExtent_&&isFinite(c[0])&&isFinite(c[1])&&isFinite(c[2])&&isFinite(c[3])&&!(0,r.intersects)(c,this.maxSourceExtent_))return;let m=0;if(!g&&(!isFinite(n[0])||!isFinite(n[1])||!isFinite(s[0])||!isFinite(s[1])||!isFinite(l[0])||!isFinite(l[1])||!isFinite(h[0])||!isFinite(h[1]))){if(u>0)g=!0;else if(1!=(m=(isFinite(n[0])&&isFinite(n[1])?0:8)+(isFinite(s[0])&&isFinite(s[1])?0:4)+(isFinite(l[0])&&isFinite(l[1])?0:2)+(isFinite(h[0])&&isFinite(h[1])?0:1))&&2!=m&&4!=m&&8!=m)return}if(u>0){if(!g){let e;let r=[(t[0]+i[0])/2,(t[1]+i[1])/2],o=this.transformInv_(r);e=p?((0,a.modulo)(n[0],d)+(0,a.modulo)(l[0],d))/2-(0,a.modulo)(o[0],d):(n[0]+l[0])/2-o[0];let s=(n[1]+l[1])/2-o[1];g=e*e+s*s>this.errorThresholdSquared_}if(g){if(Math.abs(t[0]-i[0])<=Math.abs(t[1]-i[1])){let r=[(e[0]+i[0])/2,(e[1]+i[1])/2],a=this.transformInv_(r),c=[(o[0]+t[0])/2,(o[1]+t[1])/2],f=this.transformInv_(c);this.addQuad_(t,e,r,c,n,s,a,f,u-1),this.addQuad_(c,r,i,o,f,a,l,h,u-1)}else{let r=[(t[0]+e[0])/2,(t[1]+e[1])/2],a=this.transformInv_(r),c=[(i[0]+o[0])/2,(i[1]+o[1])/2],f=this.transformInv_(c);this.addQuad_(t,r,c,o,n,a,f,h,u-1),this.addQuad_(r,e,i,c,a,s,l,f,u-1)}return}}if(p){if(!this.canWrapXInSource_)return;this.wrapsXInSource_=!0}(11&m)==0&&this.addTriangle_(t,i,o,n,l,h),(14&m)==0&&this.addTriangle_(t,i,e,n,l,s),m&&((13&m)==0&&this.addTriangle_(e,o,t,s,h,n),(7&m)==0&&this.addTriangle_(e,o,i,s,h,l))}calculateSourceExtent(){let t=(0,r.createEmpty)();return this.triangles_.forEach(function(e,i,o){let n=e.source;(0,r.extendCoordinate)(t,n[0]),(0,r.extendCoordinate)(t,n[1]),(0,r.extendCoordinate)(t,n[2])}),t}getTriangles(){return this.triangles_}}}),a("gpSXC",function(t,i){let r;e(t.exports,"canvasPool",()=>h),e(t.exports,"calculateSourceResolution",()=>f),e(t.exports,"calculateSourceExtentResolution",()=>d),e(t.exports,"render",()=>p);var o=n("jZquI"),a=n("cgxQK"),s=n("gzr8q"),l=n("a6roo");let h=[];function u(t,e,i,r,o){t.beginPath(),t.moveTo(0,0),t.lineTo(e,i),t.lineTo(r,o),t.closePath(),t.save(),t.clip(),t.fillRect(0,0,Math.max(e,r)+1,Math.max(i,o)),t.restore()}function c(t,e){return Math.abs(t[4*e]-210)>2||Math.abs(t[4*e+3]-191.25)>2}function f(t,e,i,r){let n=(0,s.transform)(i,e,t),a=(0,s.getPointResolution)(e,r,i),l=e.getMetersPerUnit();void 0!==l&&(a*=l);let h=t.getMetersPerUnit();void 0!==h&&(a/=h);let u=t.getExtent();if(!u||(0,o.containsCoordinate)(u,n)){let e=(0,s.getPointResolution)(t,a,n)/a;isFinite(e)&&e>0&&(a/=e)}return a}function d(t,e,i,r){let n=f(t,e,(0,o.getCenter)(i),r);return(!isFinite(n)||n<=0)&&(0,o.forEachCorner)(i,function(i){return isFinite(n=f(t,e,i,r))&&n>0}),n}function p(t,e,i,n,s,f,d,p,g,m,y,x,v){let b;let w=(0,a.createCanvasContext2D)(Math.round(i*t),Math.round(i*e),h);if(x||(w.imageSmoothingEnabled=!1),0===g.length)return w.canvas;function _(t){return Math.round(t*i)/i}w.scale(i,i),w.globalCompositeOperation="lighter";let S=(0,o.createEmpty)();if(g.forEach(function(t,e,i){(0,o.extend)(S,t.extent)}),!v||1!==g.length||0!==m){let t=(0,o.getWidth)(S),e=(0,o.getHeight)(S);b=(0,a.createCanvasContext2D)(Math.round(i*t/n),Math.round(i*e/n),h),x||(b.imageSmoothingEnabled=!1);let r=i/n;g.forEach(function(t,e,i){let n=t.extent[0]-S[0],a=-(t.extent[3]-S[3]),s=(0,o.getWidth)(t.extent),l=(0,o.getHeight)(t.extent);t.image.width>0&&t.image.height>0&&b.drawImage(t.image,m,m,t.image.width-2*m,t.image.height-2*m,n*r,a*r,s*r,l*r)})}let E=(0,o.getTopLeft)(d);return p.getTriangles().forEach(function(t,e,s){let d;let p=t.source,m=t.target,y=p[0][0],v=p[0][1],A=p[1][0],N=p[1][1],I=p[2][0],M=p[2][1],P=_((m[0][0]-E[0])/f),C=_(-(m[0][1]-E[1])/f),T=_((m[1][0]-E[0])/f),L=_(-(m[1][1]-E[1])/f),R=_((m[2][0]-E[0])/f),O=_(-(m[2][1]-E[1])/f),k=y,G=v;y=0,v=0;let Z=[[A-=k,N-=G,0,0,T-P],[I-=k,M-=G,0,0,R-P],[0,0,A,N,L-C],[0,0,I,M,O-C]],F=(0,l.solveLinearSystem)(Z);if(F){if(w.save(),w.beginPath(),function(){if(void 0===r){let t=(0,a.createCanvasContext2D)(6,6,h);t.globalCompositeOperation="lighter",t.fillStyle="rgba(210, 0, 0, 0.75)",u(t,4,5,4,0),u(t,4,5,0,5);let e=t.getImageData(0,0,3,3).data;r=c(e,0)||c(e,4)||c(e,8),(0,a.releaseCanvas)(t),h.push(t.canvas)}return r}()||!x){w.moveTo(T,L);let t=P-T,e=C-L;for(let i=0;i<4;i++)w.lineTo(T+_((i+1)*t/4),L+_(i*e/3)),3!=i&&w.lineTo(T+_((i+1)*t/4),L+_((i+1)*e/3));w.lineTo(R,O)}else w.moveTo(T,L),w.lineTo(P,C),w.lineTo(R,O);if(w.clip(),w.transform(F[0],F[2],F[1],F[3],P,C),w.translate(S[0]-k,S[3]-G),b)d=b.canvas,w.scale(n/i,-n/i);else{let t=g[0],e=t.extent;d=t.image,w.scale((0,o.getWidth)(e)/d.width,-(0,o.getHeight)(e)/d.height)}w.drawImage(d,0,0),w.restore()}}),b&&((0,a.releaseCanvas)(b),h.push(b.canvas)),y&&(w.save(),w.globalCompositeOperation="source-over",w.strokeStyle="black",w.lineWidth=1,p.getTriangles().forEach(function(t,e,i){let r=t.target,o=(r[0][0]-E[0])/f,n=-(r[0][1]-E[1])/f,a=(r[1][0]-E[0])/f,s=-(r[1][1]-E[1])/f,l=(r[2][0]-E[0])/f,h=-(r[2][1]-E[1])/f;w.beginPath(),w.moveTo(a,s),w.lineTo(o,n),w.lineTo(l,h),w.closePath(),w.stroke()}),w.restore()),w.canvas}}),a("jRKCY",function(t,i){e(t.exports,"createOrUpdate",()=>o),e(t.exports,"default",()=>n);class r{constructor(t,e,i,r){this.minX=t,this.maxX=e,this.minY=i,this.maxY=r}contains(t){return this.containsXY(t[1],t[2])}containsTileRange(t){return this.minX<=t.minX&&t.maxX<=this.maxX&&this.minY<=t.minY&&t.maxY<=this.maxY}containsXY(t,e){return this.minX<=t&&t<=this.maxX&&this.minY<=e&&e<=this.maxY}equals(t){return this.minX==t.minX&&this.minY==t.minY&&this.maxX==t.maxX&&this.maxY==t.maxY}extend(t){t.minX<this.minX&&(this.minX=t.minX),t.maxX>this.maxX&&(this.maxX=t.maxX),t.minY<this.minY&&(this.minY=t.minY),t.maxY>this.maxY&&(this.maxY=t.maxY)}getHeight(){return this.maxY-this.minY+1}getSize(){return[this.getWidth(),this.getHeight()]}getWidth(){return this.maxX-this.minX+1}intersects(t){return this.minX<=t.maxX&&this.maxX>=t.minX&&this.minY<=t.maxY&&this.maxY>=t.minY}}function o(t,e,i,o,n){return void 0!==n?(n.minX=t,n.maxX=e,n.minY=i,n.maxY=o,n):new r(t,e,i,o)}var n=r}),a("8ElLP",function(t,i){e(t.exports,"default",()=>r);var r={PRELOAD:"preload",USE_INTERIM_TILES_ON_ERROR:"useInterimTilesOnError"}}),a("jPVWI",function(t,i){e(t.exports,"default",()=>g);var r=n("3VGVQ"),o=n("610XN"),a=n("7qsnY"),s=n("gYZ48"),l=n("bFM0O"),h=n("j2K3b"),u=n("jZquI");n("agkzb"),n("eXEIX"),n("juLo9");var c=n("gIJof"),f=n("cWXYt"),d=n("86esn");class p extends r.default{constructor(t){super(t=t||{}),t.renderOrder=f.ordering,t.style=(0,f.getStyleFn)({ghost:t.ghostStyle}),t.displayInLayerSwitcher=!1,t.dessin=!0,t.popupHoverSelect=!1,this.layerVector_=new o.default(t),this.layerVector_.set("parent",this),this.getSource().setAttributions(t.copyright||""),this.layerVector_.selectable=()=>this.selectable(),this.layerVector_.set("name","vector"),this.getLayers().push(this.layerVector_),this.layerImage_=new a.default(t),this.layerImage_.set("parent",this),this.layerImage_.set("name","image"),this.getLayers().push(this.layerImage_),this.layerImage_.selectable=()=>this.selectable(),this.layerImage_.on(["filter","change:visible"],()=>{setTimeout(()=>{if(this._mcFilter&&this.layerImage_.getVisible()){let t=document.body.querySelector(".ol-viewport .ol-layers ."+this.layerImage_.getClassName());if(t){let e=[],i=[];this._mcFilter.get("filter")&&e.push(this._mcFilter.get("filter")),this._mcFilter.get("blend")&&i.push(this._mcFilter.get("blend")),t.style.filter=e.join(" "),t.style.mixBlendMode=i.join(" ")}}})}),this.on("change:visible",()=>this.layerImage_.dispatchEvent("filter")),this.getSource().getFeatures().forEach(t=>t._layer=this),this.setMode("vector"),this.getSource().on("addfeature",(function(e){let i=e.feature;i._layer=this;let r=Object.values(this.getAttributes());if(r.length){let t=i.getProperties();r.forEach(e=>{Object.prototype.hasOwnProperty.call(t,e.name)||i.set(e.name,e.default)})}t.onaddfeature&&t.onaddfeature(e)}).bind(this)),this.getSource().on("removefeature",(function(t){delete t.feature._layer}).bind(this)),(0,c.default)(()=>{this.clearCache(),this.layerVector_.changed()}),this.layerVector_.on("prerender",t=>{"cluster"===this.getMode()&&t.frameState.viewState.zoom<=this.get("maxZoomCluster")&&(this.layerVector_.setVisible(!1),this.layerCluster_.setVisible(!0),this.activateCluster(!0))})}}p.prototype.addFilter=function(t){(0,r.default).prototype.addFilter.call(this,t),this.layerVector_.addFilter(t),this.layerCluster_&&this.layerCluster_.addFilter(t),this.layerImage_.addFilter(t),this.layerImage_.dispatchEvent({type:"filter"})},p.prototype.removeFilter=function(t){(0,r.default).prototype.removeFilter.call(this,t),this.layerVector_.removeFilter(t),this.layerCluster_&&this.layerCluster_.removeFilter(t),this.layerImage_.removeFilter(t),this.layerImage_.dispatchEvent({type:"filter"})},p.prototype.getSource=function(){return this.layerVector_.getSource()},p.prototype.getStyle=function(){return this.layerVector_.getStyle()},p.prototype.getGeomTypes=function(t){var e={};return(this.getSource().getFeatures().forEach(t=>e[t.getGeometry().getType()]=!0),t)?!(Object.getOwnPropertyNames(e).length>2)&&e[t]:e},p.prototype.getPopupContent=function(t){return t?t.getPopupContent(this._popupContent||{}):this._popupContent||{}},p.prototype.setPopupContent=function(t){!t||t instanceof Array?this._popupContent={}:this._popupContent=t},p.prototype.setIgnStyle=function(t,e){(!this._ignStyle||Array.isArray(this._ignStyle))&&(this._ignStyle={}),void 0===e?this._ignStyle=t:""!==e&&/width|radius|size|offset/i.test(t)&&(e=Number(e)),""!==e&&e!=p.prototype.defaultIgnStyle[t]?this._ignStyle[t]=e:delete this._ignStyle[t]},p.prototype.getIgnStyle=function(t){return t?!0===t?Object.assign({},d.defaultIgnStyle,this._ignStyle):(0,f.getIgnStyle)(t):this._ignStyle},p.prototype.defaultIgnStyle=d.defaultIgnStyle,p.prototype.getConditionStyle=function(){return this._conditionStyle||[]},p.prototype.setConditionStyle=function(t){this._conditionStyle=t},p.prototype.getAttributes=function(){return this._attributes||(this._attributes={}),this._attributes},p.prototype.setAttributes=function(t){Array.isArray(t)?(this._attributes={},t.forEach(t=>this._attributes[t.name]=t)):this._attributes=t},p.prototype.clearCache=function(){(0,f.clearCache)()},p.prototype.setMode=function(t,e){switch(e=e||{},this._renderMode=t,this.layerVector_.setVisible(!1),this.layerImage_.setVisible(!1),this.layerCluster_&&(this.layerCluster_.setVisible(!1),this.activateCluster(!1)),isNaN(parseFloat(e.maxZoomCluster))||this.set("maxZoomCluster",parseFloat(e.maxZoomCluster)),void 0===e.clusterDistance&&(e.clusterDistance=e.distance),this.set("clusterDistance",parseFloat(e.clusterDistance||e.distance)||40),this.set("clusterDash",!!e.clusterDash),this.set("clusterColor",!!e.clusterColor),t){case"cluster":if(!this.layerCluster_){var i=new s.default({geometryFunction:function(t){var e=t.getGeometry();return"Point"===e.getType()?e:new h.default((0,u.getCenter)(e.getExtent()))},distance:e.clusterDistance||40,source:this.getSource()});this.layerCluster_=new l.default({name:"cluster",className:this.getClassName(),displayInLayerSwitcher:!1,source:i,animationDuration:e.animationDuration}),this.getLayers().push(this.layerCluster_),this.layerCluster_.set("parent",this),this.layerCluster_.selectable=()=>this.selectable(),this.layerCluster_.on("prerender",t=>{t.frameState.viewState.zoom>this.get("maxZoomCluster")&&(this.layerVector_.setVisible(!0),this.layerCluster_.setVisible(!1),this.activateCluster(!1))})}e.clusterDistance&&this.layerCluster_.getSource().setDistance(e.clusterDistance),this.layerCluster_.setStyle((0,f.getStyleFn)(e)),this.layerCluster_.setVisible(!0),this.activateCluster(!0);break;case"image":this.layerImage_.setVisible(!0);break;default:this.layerVector_.setVisible(!0)}},p.prototype.selectable=function(t){return!0===t?this.set("selectable",!0):!1===t&&this.set("selectable",!1),!1!==this.get("selectable")},p.prototype.getMode=function(){return this._renderMode||"vector"},p.prototype.getLayer=function(){switch(this.getMode()){case"cluster":return this.layerCluster_;case"image":return this.layerImage_;default:return this.layerVector_}},p.prototype.setDeclutter=function(t){this.layerVector_.declutter_=!!t,this.layerImage_.declutter_=!!t},p.prototype.getDeclutter=function(){return this.layerVector_.getDeclutter()},p.prototype.activateCluster=function(t,e){this.layerCluster_&&(this.layerCluster_.getSource().set("inactive",!t),t&&!e&&this.layerCluster_.getSource().refresh())};var g=p}),a("7qsnY",function(t,i){e(t.exports,"default",()=>s);var r=n("2YyN3"),o=n("kVTQK");class a extends r.default{constructor(t){let e=Object.assign({},t=t||{});delete e.imageRatio,super(e),this.imageRatio_=void 0!==t.imageRatio?t.imageRatio:1}getImageRatio(){return this.imageRatio_}createRenderer(){return new o.default(this)}}var s=a}),a("kVTQK",function(i,r){e(i.exports,"default",()=>m);var o=n("fnQuI"),a=n("6M65l"),s=n("cw4dl"),l=n("34ffr"),h=n("50PZ9"),u=n("4wfAy"),c=n("bCUH1"),f=n("14PDX"),d=n("djufG"),p=n("jZquI");class g extends o.default{constructor(t){super(t),this.vectorRenderer_=new a.default(t),this.layerImageRatio_=t.getImageRatio(),this.coordinateToVectorPixelTransform_=(0,f.create)(),this.renderedPixelToCoordinateTransform_=null}disposeInternal(){this.vectorRenderer_.dispose(),super.disposeInternal()}getFeatures(t){if(!this.vectorRenderer_)return Promise.resolve([]);let e=(0,f.apply)(this.coordinateToVectorPixelTransform_,(0,f.apply)(this.renderedPixelToCoordinateTransform_,t.slice()));return this.vectorRenderer_.getFeatures(e)}handleFontsChanged(){this.vectorRenderer_.handleFontsChanged()}prepareFrame(e){let i=e.pixelRatio,r=e.viewState,o=r.resolution,n=e.viewHints,a=this.vectorRenderer_,g=e.extent;1!==this.layerImageRatio_&&(g=g.slice(0),(0,p.scaleFromCenter)(g,this.layerImageRatio_));let m=(0,p.getWidth)(g)/o,y=(0,p.getHeight)(g)/o;if(!n[c.default.ANIMATING]&&!n[c.default.INTERACTING]&&!(0,p.isEmpty)(g)){a.useContainer(null,null);let n=a.context,c=Object.assign({},e.layerStatesArray[e.layerIndex],{opacity:1}),p=Object.assign({},e,{declutterTree:new(t(u))(9),extent:g,size:[m,y],viewState:Object.assign({},e.viewState,{rotation:0}),layerStatesArray:[c],layerIndex:0}),x=!0,v=new l.default(g,o,i,n.canvas,function(t){a.prepareFrame(p)&&a.replayGroupChanged&&(a.clipping=!1,a.renderFrame(p,null)&&(a.renderDeclutter(p),x=!1),t())});v.addEventListener(s.default.CHANGE,()=>{if(v.getState()!==h.default.LOADED)return;this.image_=x?null:v;let t=v.getPixelRatio(),e=(0,d.fromResolutionLike)(v.getResolution())*i/t;this.renderedResolution=e,this.coordinateToVectorPixelTransform_=(0,f.compose)(this.coordinateToVectorPixelTransform_,m/2,y/2,1/e,-1/e,0,-r.center[0],-r.center[1])}),v.load()}return this.image_&&(this.renderedPixelToCoordinateTransform_=e.pixelToCoordinateTransform.slice()),!!this.image_}preRender(){}postRender(){}renderDeclutter(){}forEachFeatureAtCoordinate(t,e,i,r,o){return this.vectorRenderer_?this.vectorRenderer_.forEachFeatureAtCoordinate(t,e,i,r,o):super.forEachFeatureAtCoordinate(t,e,i,r,o)}}var m=g}),a("fnQuI",function(t,i){e(t.exports,"default",()=>c);var r=n("ddIVC"),o=n("50PZ9"),a=n("bCUH1"),s=n("14PDX"),l=n("jZquI"),h=n("gzr8q");class u extends r.default{constructor(t){super(t),this.image_=null}getImage(){return this.image_?this.image_.getImage():null}prepareFrame(t){let e=t.layerStatesArray[t.layerIndex],i=t.pixelRatio,r=t.viewState,n=r.resolution,s=this.getLayer().getSource(),u=t.viewHints,c=t.extent;if(void 0!==e.extent&&(c=(0,l.getIntersection)(c,(0,h.fromUserExtent)(e.extent,r.projection))),!u[a.default.ANIMATING]&&!u[a.default.INTERACTING]&&!(0,l.isEmpty)(c)){if(s){let t=r.projection,e=s.getImage(c,n,i,t);e&&(this.loadImage(e)?this.image_=e:e.getState()===o.default.EMPTY&&(this.image_=null))}else this.image_=null}return!!this.image_}getData(t){let e=this.frameState;if(!e)return null;let i=this.getLayer(),r=(0,s.apply)(e.pixelToCoordinateTransform,t.slice()),o=i.getExtent();if(o&&!(0,l.containsCoordinate)(o,r))return null;let n=this.image_.getExtent(),a=this.image_.getImage(),h=(0,l.getWidth)(n),u=Math.floor(a.width*((r[0]-n[0])/h));if(u<0||u>=a.width)return null;let c=(0,l.getHeight)(n),f=Math.floor(a.height*((n[3]-r[1])/c));return f<0||f>=a.height?null:this.getImageData(a,u,f)}renderFrame(t,e){let i=this.image_,r=i.getExtent(),o=i.getResolution(),[n,a]=Array.isArray(o)?o:[o,o],u=i.getPixelRatio(),c=t.layerStatesArray[t.layerIndex],f=t.pixelRatio,d=t.viewState,p=d.center,g=d.resolution,m=t.extent,y=d.resolution,x=d.rotation,v=Math.round((0,l.getWidth)(m)/y*f),b=Math.round((0,l.getHeight)(m)/y*f);(0,s.compose)(this.pixelTransform,t.size[0]/2,t.size[1]/2,1/f,1/f,x,-v/2,-b/2),(0,s.makeInverse)(this.inversePixelTransform,this.pixelTransform);let w=(0,s.toString)(this.pixelTransform);this.useContainer(e,w,this.getBackground(t));let _=this.context,S=_.canvas;S.width!=v||S.height!=b?(S.width=v,S.height=b):this.containerReused||_.clearRect(0,0,v,b);let E=!1,A=!0;if(c.extent){let e=(0,h.fromUserExtent)(c.extent,d.projection);(E=(A=(0,l.intersects)(e,t.extent))&&!(0,l.containsExtent)(e,t.extent))&&this.clipUnrotated(_,t,e)}let N=i.getImage(),I=(0,s.compose)(this.tempTransform,v/2,b/2,f*n/(g*u),f*a/(g*u),0,u*(r[0]-p[0])/n,u*(p[1]-r[3])/a);this.renderedResolution=a*f/u;let M=N.width*I[0],P=N.height*I[3];if(this.getLayer().getSource().getInterpolate()||(_.imageSmoothingEnabled=!1),this.preRender(_,t),A&&M>=.5&&P>=.5){let t;let e=I[4],i=I[5],r=c.opacity;1!==r&&(t=_.globalAlpha,_.globalAlpha=r),_.drawImage(N,0,0,+N.width,+N.height,e,i,M,P),1!==r&&(_.globalAlpha=t)}return this.postRender(_,t),E&&_.restore(),_.imageSmoothingEnabled=!0,w!==S.style.transform&&(S.style.transform=w),this.container}}var c=u}),a("34ffr",function(t,i){e(t.exports,"default",()=>s);var r=n("50PZ9"),o=n("kUxvm");class a extends o.default{constructor(t,e,i,o,n){super(t,e,i,void 0!==n?r.default.IDLE:r.default.LOADED),this.loader_=void 0!==n?n:null,this.canvas_=o,this.error_=null}getError(){return this.error_}handleLoad_(t){t?(this.error_=t,this.state=r.default.ERROR):this.state=r.default.LOADED,this.changed()}load(){this.state==r.default.IDLE&&(this.state=r.default.LOADING,this.changed(),this.loader_(this.handleLoad_.bind(this)))}getImage(){return this.canvas_}}var s=a}),a("djufG",function(t,i){e(t.exports,"fromResolutionLike",()=>r);function r(t){return Array.isArray(t)?Math.min(...t):t}}),a("gYZ48",function(t,i){e(t.exports,"default",()=>s);var r=n("hyHoG"),o=r.default.prototype.cluster;r.default.prototype.cluster=function(){this.get("inactive")||o.call(this)};var a=r.default.prototype.refresh;r.default.prototype.refresh=function(){this.get("inactive")||a.call(this)};var s=r.default}),a("hyHoG",function(t,i){e(t.exports,"default",()=>d);var r=n("cw4dl"),o=n("iGyOD"),a=n("j2K3b"),s=n("20LS2"),l=n("d1ltq"),h=n("eJ4LZ"),u=n("jZquI"),c=n("lVQul");class f extends s.default{constructor(t){super({attributions:t.attributions,wrapX:t.wrapX}),this.resolution=void 0,this.distance=void 0!==t.distance?t.distance:20,this.minDistance=t.minDistance||0,this.interpolationRatio=0,this.features=[],this.geometryFunction=t.geometryFunction||function(t){let e=t.getGeometry();return(0,h.assert)(!e||"Point"===e.getType(),"The default `geometryFunction` can only handle `Point` or null geometries"),e},this.createCustomCluster_=t.createCluster,this.source=null,this.boundRefresh_=this.refresh.bind(this),this.updateDistance(this.distance,this.minDistance),this.setSource(t.source||null)}clear(t){this.features.length=0,super.clear(t)}getDistance(){return this.distance}getSource(){return this.source}loadFeatures(t,e,i){this.source.loadFeatures(t,e,i),e!==this.resolution&&(this.resolution=e,this.refresh())}setDistance(t){this.updateDistance(t,this.minDistance)}setMinDistance(t){this.updateDistance(this.distance,t)}getMinDistance(){return this.minDistance}setSource(t){this.source&&this.source.removeEventListener(r.default.CHANGE,this.boundRefresh_),this.source=t,t&&t.addEventListener(r.default.CHANGE,this.boundRefresh_),this.refresh()}refresh(){this.clear(),this.cluster(),this.addFeatures(this.features)}updateDistance(t,e){let i=0===t?0:Math.min(e,t)/t,r=t!==this.distance||this.interpolationRatio!==i;this.distance=t,this.minDistance=e,this.interpolationRatio=i,r&&this.refresh()}cluster(){if(void 0===this.resolution||!this.source)return;let t=(0,u.createEmpty)(),e=this.distance*this.resolution,i=this.source.getFeatures(),r={};for(let o=0,n=i.length;o<n;o++){let n=i[o];if(!((0,c.getUid)(n) in r)){let i=this.geometryFunction(n);if(i){let o=i.getCoordinates();(0,u.createOrUpdateFromCoordinate)(o,t),(0,u.buffer)(t,e,t);let n=this.source.getFeaturesInExtent(t).filter(function(t){let e=(0,c.getUid)(t);return!(e in r)&&(r[e]=!0,!0)});this.features.push(this.createCluster(n,t))}}}}createCluster(t,e){let i=[0,0];for(let e=t.length-1;e>=0;--e){let r=this.geometryFunction(t[e]);r?(0,l.add)(i,r.getCoordinates()):t.splice(e,1)}(0,l.scale)(i,1/t.length);let r=(0,u.getCenter)(e),n=this.interpolationRatio,s=new a.default([i[0]*(1-n)+r[0]*n,i[1]*(1-n)+r[1]*n]);return this.createCustomCluster_?this.createCustomCluster_(s,t):new o.default({geometry:s,features:t})}}var d=f}),a("20LS2",function(t,i){e(t.exports,"default",()=>E);var r=n("31ZqB"),o=n("eHnTw"),a=n("iTTi2"),s=n("cw4dl"),l=n("5dXmB"),h=n("9iujS"),u=n("29SgV"),c=n("205E0"),f=n("gKdkP"),d=n("eQaCk"),p=n("gmEQj"),g=n("eJ4LZ"),m=n("jZquI"),y=n("kBSVF"),x=n("lVQul"),v=n("kKEgb"),b=n("bsgMw"),w=n("kWPIP");class _ extends a.default{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class S extends c.default{constructor(t){let e,i;t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=d.VOID,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,g.assert)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,w.xhr)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:p.all;let o=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=o?new h.default:null,this.loadedExtentsRtree_=new h.default,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(e=t.features).getArray()),o||void 0!==e||(e=new r.default(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==e&&this.bindFeaturesCollection_(e)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=(0,x.getUid)(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new _(f.default.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof u.default||(this.featureChangeKeys_[t]=[(0,b.listen)(e,s.default.CHANGE,this.handleFeatureChange_,this),(0,b.listen)(e,l.default.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){let t=String(e.getId());if(t in this.idIndex_){if(e instanceof u.default){let r=this.idIndex_[t];r instanceof u.default?Array.isArray(r)?r.push(e):this.idIndex_[t]=[r,e]:i=!1}else i=!1}else this.idIndex_[t]=e}return i&&((0,g.assert)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],r=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],o=(0,x.getUid)(r);this.addToIndex_(o,r)&&i.push(r)}for(let t=0,o=i.length;t<o;t++){let o=i[t],n=(0,x.getUid)(o);this.setupChangeEvents_(n,o);let a=o.getGeometry();if(a){let t=a.getExtent();e.push(t),r.push(o)}else this.nullGeometryFeatures_[n]=o}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(f.default.ADDFEATURE))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new _(f.default.ADDFEATURE,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(f.default.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(f.default.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(o.default.ADD,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(o.default.REMOVE,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(b.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let t in this.featuresRtree_.forEach(t=>{this.removeFeatureInternal(t)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new _(f.default.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){let r=i.getGeometry();if(r instanceof u.default||r.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){let r=i.getGeometry();if(r instanceof u.default||r.intersectsExtent(t)){let t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,v.isEmpty)(this.nullGeometryFeatures_)||(0,y.extend)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){return this.featuresRtree_?e&&e.canWrapX()&&this.getWrapX()?[].concat(...(0,m.wrapAndSliceX)(t,e).map(t=>this.featuresRtree_.getInExtent(t))):this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],r=t[1],o=null,n=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return e=e||d.TRUE,this.featuresRtree_.forEachInExtent(s,function(t){if(e(t)){let e=t.getGeometry(),l=a;if((a=e instanceof u.default?0:e.closestPointXY(i,r,n,a))<l){o=t;let e=Math.sqrt(a);s[0]=i-e,s[1]=r-e,s[2]=i+e,s[3]=r+e}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=(0,x.getUid)(e),r=e.getGeometry();if(r){let t=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);let o=e.getId();if(void 0!==o){let t=o.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new _(f.default.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return void 0!==e?e in this.idIndex_:(0,x.getUid)(t) in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){let r=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let t=0,n=o.length;t<n;++t){let n=o[t];r.forEachInExtent(n,function(t){return(0,m.containsExtent)(t.extent,n)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADSTART)),this.loader_.call(this,n,e,i,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADERROR))}),r.insert(n,{extent:n.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e;let i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if((0,m.equals)(i.extent,t))return e=i,!0}),e&&i.remove(e)}removeFeature(t){if(!t)return;let e=(0,x.getUid)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=(0,x.getUid)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(b.unlistenByKey),delete this.featureChangeKeys_[e];let r=t.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new _(f.default.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_){let r=this.idIndex_[i];if(t instanceof u.default&&Array.isArray(r)&&r.includes(t))r.splice(r.indexOf(t),1);else if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,g.assert)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,w.xhr)(t,this.format_))}}var E=S}),a("9iujS",function(i,r){e(i.exports,"default",()=>h);var o=n("4wfAy"),a=n("jZquI"),s=n("lVQul"),l=n("kKEgb"),h=class{constructor(e){this.rbush_=new(t(o))(e),this.items_={}}insert(t,e){let i={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3],value:e};this.rbush_.insert(i),this.items_[(0,s.getUid)(e)]=i}load(t,e){let i=Array(e.length);for(let r=0,o=e.length;r<o;r++){let o=t[r],n=e[r],a={minX:o[0],minY:o[1],maxX:o[2],maxY:o[3],value:n};i[r]=a,this.items_[(0,s.getUid)(n)]=a}this.rbush_.load(i)}remove(t){let e=(0,s.getUid)(t),i=this.items_[e];return delete this.items_[e],null!==this.rbush_.remove(i)}update(t,e){let i=this.items_[(0,s.getUid)(e)],r=[i.minX,i.minY,i.maxX,i.maxY];(0,a.equals)(r,t)||(this.remove(e),this.insert(t,e))}getAll(){return this.rbush_.all().map(function(t){return t.value})}getInExtent(t){let e={minX:t[0],minY:t[1],maxX:t[2],maxY:t[3]};return this.rbush_.search(e).map(function(t){return t.value})}forEach(t){return this.forEach_(this.getAll(),t)}forEachInExtent(t,e){return this.forEach_(this.getInExtent(t),e)}forEach_(t,e){let i;for(let r=0,o=t.length;r<o&&!(i=e(t[r]));r++);return i}isEmpty(){return(0,l.isEmpty)(this.items_)}clear(){this.rbush_.clear(),this.items_={}}getExtent(t){let e=this.rbush_.toJSON();return(0,a.createOrUpdate)(e.minX,e.minY,e.maxX,e.maxY,t)}concat(t){for(let e in this.rbush_.load(t.rbush_.all()),t.items_)this.items_[e]=t.items_[e]}}}),a("205E0",function(t,i){e(t.exports,"default",()=>l);var r=n("fnScq"),o=n("gzr8q");class a extends r.default{constructor(t){super(),this.projection=(0,o.get)(t.projection),this.attributions_=s(t.attributions),this.attributionsCollapsible_=void 0===t.attributionsCollapsible||t.attributionsCollapsible,this.loading=!1,this.state_=void 0!==t.state?t.state:"ready",this.wrapX_=void 0!==t.wrapX&&t.wrapX,this.interpolate_=!!t.interpolate,this.viewResolver=null,this.viewRejector=null;let e=this;this.viewPromise_=new Promise(function(t,i){e.viewResolver=t,e.viewRejector=i})}getAttributions(){return this.attributions_}getAttributionsCollapsible(){return this.attributionsCollapsible_}getProjection(){return this.projection}getResolutions(t){return null}getView(){return this.viewPromise_}getState(){return this.state_}getWrapX(){return this.wrapX_}getInterpolate(){return this.interpolate_}refresh(){this.changed()}setAttributions(t){this.attributions_=s(t),this.changed()}setState(t){this.state_=t,this.changed()}}function s(t){return t?Array.isArray(t)?function(e){return t}:"function"==typeof t?t:function(e){return[t]}:null}var l=a}),a("gKdkP",function(t,i){e(t.exports,"default",()=>r);var r={ADDFEATURE:"addfeature",CHANGEFEATURE:"changefeature",CLEAR:"clear",REMOVEFEATURE:"removefeature",FEATURESLOADSTART:"featuresloadstart",FEATURESLOADEND:"featuresloadend",FEATURESLOADERROR:"featuresloaderror"}}),a("gmEQj",function(t,i){e(t.exports,"all",()=>o),e(t.exports,"bbox",()=>a),e(t.exports,"tile",()=>s);var r=n("gzr8q");function o(t,e){return[[-1/0,-1/0,1/0,1/0]]}function a(t,e){return[t]}function s(t){return function(e,i,o){let n=t.getZForResolution((0,r.fromUserResolution)(i,o)),a=t.getTileRangeForExtentAndZ((0,r.fromUserExtent)(e,o),n),s=[],l=[n,0,0];for(l[1]=a.minX;l[1]<=a.maxX;++l[1])for(l[2]=a.minY;l[2]<=a.maxY;++l[2])s.push((0,r.toUserExtent)(t.getTileCoordExtent(l),o));return s}}}),a("kWPIP",function(t,i){e(t.exports,"loadFeaturesXhr",()=>o),e(t.exports,"xhr",()=>a);var r=n("eQaCk");function o(t,e,i,r,o,n,a){let s=new XMLHttpRequest;s.open("GET","function"==typeof t?t(i,r,o):t,!0),"arraybuffer"==e.getType()&&(s.responseType="arraybuffer"),s.withCredentials=!1,s.onload=function(t){if(!s.status||s.status>=200&&s.status<300){let t;let r=e.getType();"json"==r?t=JSON.parse(s.responseText):"text"==r?t=s.responseText:"xml"==r?(t=s.responseXML)||(t=new DOMParser().parseFromString(s.responseText,"application/xml")):"arraybuffer"==r&&(t=s.response),t?n(e.readFeatures(t,{extent:i,featureProjection:o}),e.readProjection(t)):a()}else a()},s.onerror=a,s.send()}function a(t,e){return function(i,n,a,s,l){let h=this;o(t,e,i,n,a,function(t,e){h.addFeatures(t),void 0!==s&&s(t)},l||r.VOID)}}}),a("bFM0O",function(t,i){e(t.exports,"default",()=>f);var r=n("610XN"),o=n("20LS2"),a=n("iGyOD"),s=n("jZ9vT"),l=n("jZquI"),h=n("j2K3b"),u=n("kTGMi"),c=n("bQRGA"),f=class extends r.default{constructor(t){var e=t||{};super(e),this.oldcluster=new o.default,this.clusters=[],this.animation={start:!1},this.set("animationDuration","number"==typeof e.animationDuration?e.animationDuration:700),this.set("animationMethod",e.animationMethod||s.easeOut),this.getSource().on("change",this.saveCluster.bind(this)),this.on(["precompose","prerender"],this.animate.bind(this)),this.on(["postcompose","postrender"],this.postanimate.bind(this))}saveCluster(){if(this.oldcluster&&(this.oldcluster.clear(),this.get("animationDuration"))){var t=this.getSource().getFeatures();t.length&&t[0].get("features")&&(this.oldcluster.addFeatures(this.clusters),this.clusters=t.slice(0),this.sourceChanged=!0)}}getClusterForFeature(t,e){for(var i,r=0;i=e[r];r++){var o=i.get("features");if(o&&o.length){for(var n,a=0;n=o[a];a++)if(t===n)return i}}return!1}stopAnimation(){this.animation.start=!1,this.animation.cA=[],this.animation.cB=[]}animate(t){var e=this.get("animationDuration");if(e){var i,r,o=t.frameState.viewState.resolution,n=this.animation,s=t.frameState.time;if(n.resolution!=o&&this.sourceChanged){var f=t.frameState.extent;for(n.resolution<o?(f=(0,l.buffer)(f,100*o),n.cA=this.oldcluster.getFeaturesInExtent(f),n.cB=this.getSource().getFeaturesInExtent(f),n.revers=!1):(f=(0,l.buffer)(f,100*o),n.cA=this.getSource().getFeaturesInExtent(f),n.cB=this.oldcluster.getFeaturesInExtent(f),n.revers=!0),n.clusters=[],i=0;r=n.cA[i];i++){var d=r.get("features");if(d&&d.length){var p=this.getClusterForFeature(d[0],n.cB);p&&n.clusters.push({f:r,pt:p.getGeometry().getCoordinates()})}}if(n.resolution=o,this.sourceChanged=!1,!n.clusters.length||n.clusters.length>1e3){this.stopAnimation();return}s=n.start=new Date().getTime()}if(n.start){var g=t.vectorContext||(0,u.default)(t),m=(s-n.start)/e;m>1&&(this.stopAnimation(),m=1),m=this.get("animationMethod")(m);var y=this.getStyle(),x="function"==typeof y?y:y.length?function(){return y}:function(){return[y]};for(t.context.save(),t.context.globalAlpha=this.getOpacity(),i=0;p=n.clusters[i];i++){var v=p.f.getGeometry().getCoordinates(),b=v[0]-p.pt[0],w=v[1]-p.pt[1];n.revers?(v[0]=p.pt[0]+m*b,v[1]=p.pt[1]+m*w):(v[0]=v[0]-m*b,v[1]=v[1]-m*w);var _=x(p.f,o,!0);if(_.length||(_=[_]),1!==p.f.get("features").length||b||w){var S=new h.default(v);d=new a.default(S)}else d=p.f.get("features")[0];for(var E,A=0;E=_[A];A++)if(E.getText()&&/\n/.test(E.getText().getText())){var N,I=E.getText().getOffsetX(),M=E.getText().getOffsetY(),P=E.getText().getRotation()||0,C=1.2*Number((E.getText().getFont()||"10px").match(/\d+/)),T=E.getText().getText().split("\n"),L=T.length-1,R=E.clone();T.forEach(function(e,i){switch(1==i&&(R.setImage(),R.setFill(),R.setStroke()),E.getText().getTextBaseline()){case"alphabetic":case"ideographic":case"bottom":N=L;break;case"hanging":case"top":N=0;break;default:N=L/2}R.getText().setOffsetX(I-Math.sin(P)*C*(i-N)),R.getText().setOffsetY(M+Math.cos(P)*C*(i-N)),R.getText().setText(e),g.drawFeature(d,(0,c.default)(t,R))})}else g.drawFeature(d,(0,c.default)(t,E))}t.context.restore(),t.frameState.animate=!0,t.context.save(),t.context.beginPath(),t.context.rect(0,0,0,0),t.context.clip(),this.clip_=!0}}}postanimate(t){this.clip_&&(t.context.restore(),this.clip_=!1)}}}),a("kTGMi",function(t,i){e(t.exports,"default",()=>a);var r=n("14PDX"),o=n("htGzg"),a=function(t){let e=t.frameState,i=(0,r.multiply)(t.inversePixelTransform.slice(),e.coordinateToPixelTransform);return new o.default(t.context,e.pixelRatio,e.extent,i,e.viewState.rotation)}}),a("bQRGA",function(t,i){e(t.exports,"default",()=>s);var r=n("lVQul"),o=n("ayeEa"),a=(0,r.VERSION).split(".");a=100*parseInt(a[0])+parseInt(a[1]);var s=function(t,e){var i=t.frameState.pixelRatio;if(a>605&&a<700&&1!==i&&e.getImage() instanceof o.default){var r=(e=e.clone()).getImage();r.setScale(r.getScale()*i);var n=r.getAnchor();if(n&&r.setDisplacement){var s=r.getDisplacement();s&&(s[0]-=n[0]/i,s[1]+=n[1]/i,r.setAnchor([0,0]))}else n&&(n[0]/=i,n[1]/=i)}return e}}),a("cWXYt",function(t,i){e(t.exports,"clearCache",()=>E),e(t.exports,"getIgnStyle",()=>M),e(t.exports,"ordering",()=>P),e(t.exports,"getStyleFn",()=>k),e(t.exports,"getSelectStyleFn",()=>Z),e(t.exports,"style2IgnStyle",()=>n("hwcfb").default),e(t.exports,"defaultIgnStyle",()=>n("86esn").defaultIgnStyle);var r=n("l9IGS"),o=n("kuKBR"),a=n("9yR4T"),s=n("4lFOe"),l=n("d5AAH"),h=n("2zf1Y"),u=n("lqNjm"),c=n("lW8xZ"),f=n("j2K3b"),d=n("cgPpQ"),p=n("ljDIj"),g=n("boqwt"),m=n("h1ihb"),y=n("3yg5q"),x=n("foAUE");n("hwcfb");var v=n("2iBkg"),b=n("gVmm4"),w=n("l956U"),_=n("86esn");let S={};function E(){S={},window.devicePixelRatio}function A(t){return new p.default(function t(e){if(!e||!e[0].length||!e[0][0].length)return e;for(var i=[],r=0;r<e.length;r++)i=i.concat(t(e[r]));return i}(t.getGeometry().getCoordinates()))}window.devicePixelRatio;let N={};function I(t,e){var i=t.join(",");if(!Object.prototype.hasOwnProperty.call(N,i))try{for(var r=[],o=0;o<3;o++){var n=t[o]/255;n<=.03928?r[o]=n/12.92:r[o]=Math.pow((n+.055)/1.055,2.4)}N[i]=.2126*r[0]+.7152*r[1]+.0722*r[2]}catch(t){N[i]=1}return N[i]<(e||.3)}function M(t,e){var i={};for(var r in _.defaultIgnStyle)i[r]=t.getIgnStyle(r,e);e||!t.getIgnStyle().pointGlyph||t.getIgnStyle().pointIcon||(i.pointIcon="");var o=!i.pointIcon&&/poi|bubble|marker|coma|shield|triangle|blazon/.test(t.getIgnStyle("pointForm",e));switch(i.pointShadow=o,i.pointOffsetY=o?1:0,/Point/.test(t.getGeometry().getType())?i.textPlacement="point":/Line/.test(t.getGeometry().getType())?"point"===i.textPlacement&&(i.textAlign="center",i.textBaseline="middle"):(i.textAlign="center",i.textPlacement="point",i.textBaseline="middle"),i.strokeDash){case"flecheRond":i.strokeDash="",i.strokeArrow="circle";break;case"flecheCarre":i.strokeDash="",i.strokeArrow="square";break;case"flecheTriangle":i.strokeDash="",i.strokeArrow="triangle"}return i}function P(t,e){let i=Number((t.getIgnStyle()||{}).zIndex||0),r=Number((e.getIgnStyle()||{}).zIndex||0);return i===r?e.getGeometry().getFirstCoordinate()[1]-t.getGeometry().getFirstCoordinate()[1]:i-r}function C(t){return Math.max(8,Math.min(.75*t,20))}function T(t){var e,i=(t=t||{}).color||(t.size>25?[192,0,0]:t.size>8?[255,128,0]:[0,128,0]),r=C(t.size);return!1!==t.dash&&(e=[0,e=2*Math.PI*r/6,e,e,e,e,e]),new s.default({radius:r,stroke:new l.default({color:"rgba("+i.join(",")+",0.5)",width:15,lineDash:e,lineCap:"butt"}),fill:new h.default({color:"rgba("+i.join(",")+",1)"}),declutterMode:"none"})}function L(t){var e=t.get("features");return e&&1===e.length?t.get("features")[0].getGeometry():t.getGeometry()}let R=new b.default,O={Point:/point/i,LineString:/linestring/i,Polygon:/polygon/i};function k(t){let e;t||(t={});let i="#fff";t.clusterColor&&(i=I(e=(0,u.asArray)(t.clusterColor).slice(0,3))?"#fff":"#000");let n=t.clusterDash,a=(t.clusterColor||"")+"-"+(!1===t.clusterDash?0:1);return function(s,l,u){window.devicePixelRatio;var c,f,d,p,g,m=s.get("features");if(m){if(1!=m.length)return c=e,f=i,(g=S[p="cluster:"+(d=m.length)+"-"+a])||(g=S[p]=new r.default({image:T({size:d,color:c,dash:n}),text:new o.default({text:d.toString(),fill:new h.default({color:f})})})),[g];s=m[0]}return s.getLayer()&&s.getLayer().getConditionStyle&&s.getLayer().getConditionStyle().length?function(t,e,i,r){let o=t.getLayer().getConditionStyle();for(let a=0;a<o.length;a++){let s=o[a];if(!s.symbol||O[s.symbol.getType()].test(t.getGeometry().getType())){let e=s.condition.conditions;var n=s.condition.all;for(let i=0;i<e.length;i++){let r=e[i];r.attr&&(n=s.condition.all?n&&R._checkCondition(t,r,s.condition.useCase):n||R._checkCondition(t,r,s.condition.useCase))}}if(n){if(!s.symbol)return[];return G(t,e,i,s.symbol.getIgnStyle(),r)}}return G(t,e,i,t.getLayer().getIgnStyle(!0),r)}(s,u,t,e):G(s,u,t,null,e)}}function G(t,e,i,n,a){var d,p,b,_,E,A=M(t,n);A.pointIcon=(0,w.default).doData(A.pointIcon,t.getProperties());var N=t.getGeometry().getType(),P=t.get(A.labelAttribute)||A.labelAttribute,C={main:(R=(R=i.select)?"sel":"")+(e?"mainc":"main:")+A.pointRadius+"-"+A.pointIcon+"-"+A.pointFrame+"-"+A.pointCrop+"-"+A.pointGlyph+"-"+A.pointForm+"-"+A.symbolColor+"-"+A.pointColor+"-"+A.pointStrokeColor+"-"+A.pointStrokeWidth+"-"+A.pointRotation+"-"+A.pointGradient+"-"+A.strokeWidth+"-"+A.strokeDash+"-"+A.strokeColor+"-"+A.fillColor+"-"+A.fillPattern+"-"+A.sizePattern+"-"+A.spacingPattern+"-"+A.anglePattern+"-"+A.offsetPattern+"-"+A.scalePattern+"-"+A.fillColorPattern+"-",shadow:R+"shad:"+A.poointRadius,arrow:R+"arrow:"+A.strokeWidth+"-"+A.strokeArrow+"-"+A.strokeColor+"-",text:R+"text:"+A.pointRadius+"-"+A.textColor+"-"+A.textStyle+"-"+A.textSize+"-"+A.textFont+"-"+A.textOutlineColor+"-"+A.textOutlineWidth+"-"+A.textAlign+"-"+A.textBaseline+"-"+A.textBgFill+"-"+A.textBgStroke+"-"+A.textBgStrokeWidth+"-"+A.textPlacement+"-"+A.textOverflow};if(!(k=S[C.main])){var R,O,k,G,Z=function(t){var e=t.strokeDash;if(e&&"string"==typeof e&&(e=t.strokeDash.split(","),t.strokeWidth>0))for(var i in e)e[i]=Math.max(0,(Number(e[i])+i%2*2-1)*t.strokeWidth)*(c.DEVICE_PIXEL_RATIO||1);return e}(A);G=e&&"Point"!==N?T({size:1,color:a}):function(t,e,i,r,o){var n;if(e.pointIcon&&e.pointRadius){let r=(0,v.getMediaURL)(e.pointIcon),o=(0,u.asArray)(e.pointColor||"transparent")[3],a=e.pointFrame&&o&&0!==e.pointStrokeWidth?2:0,s=Math.min(e.pointRadius,e.pointFrame?e.pointStrokeWidth:0);(n=new g.default({src:r,crossOrigin:"anonymous",kind:e.pointFrame,crop:e.pointCrop,radius:e.pointRadius-s,offsetX:a,offsetY:"anchored"===e.pointFrame?8-a-e.pointRadius:a,shadow:2*a,onload:function(){S[t]&&(S[t].setImage(n),i.changed())},stroke:new l.default({width:s,color:e.pointFrame?e.pointColor:"transparent"}),declutterMode:"none"})).declutterMode_="none",n.getPhoto().addEventListener("error",()=>{n._gethit=null,n.img_=null,n._crossOrigin=!1,n.getImage()})}else if(!r||o||e.pointRadius){let t=(0,u.asArray)(e.pointGlyph?e.pointColor:e.symbolColor);t[3]||(t[3]=1e-4),(n=new m.default({radius:e.pointRadius,glyph:e.pointGlyph,color:e.symbolColor,form:e.pointForm||(e.pointGlyph?void 0:"circle"),rotation:e.pointRotation*Math.PI/180,gradient:Number(e.pointGradient),offsetX:0,offsetY:-e.pointOffsetY*e.pointRadius,fill:new h.default({color:t}),stroke:new l.default({color:e.pointStrokeWidth?e.pointStrokeColor:"transparent",width:Math.min(e.pointStrokeWidth,e.pointRadius/2)}),declutterMode:"none"})).declutterMode_="none"}else n=new s.default({radius:5,fill:new h.default({color:"rgba(0,0,0,0.5)"}),stroke:new l.default({color:"rgba(255,255,255,1)",width:1.5}),declutterMode:"none"});return n}(C.main,A,t,i.ghost,P);var F=A.fillPattern&&"vide"!=A.fillPattern?new y.default({pattern:A.fillPattern,image:void 0,ratio:1,color:A.fillColor,size:A.sizePattern,spacing:A.spacingPattern,angle:A.anglePattern,offset:A.offsetPattern,scale:A.scalePattern,fill:new h.default({color:A.fillColorPattern})}):new h.default({color:A.fillColor}),D=new l.default({color:A.strokeWidth?A.strokeColor:i.ghost&&/line/i.test(N)?"rgba(0,0,0,0.25)":"transparent",width:A.strokeWidth||(i.ghost&&/line/i.test(N)?.5:0),lineDash:Z});i.select&&/highlight|zoom/.test(i.select)&&D.setWidth(D.getWidth()+Math.max(3,1.2*D.getWidth())),k=S[C.main]=new r.default({image:G,fill:F,stroke:D,geometry:L})}return(k.setZIndex(i.zIndex||0),O=[k],A.pointShadow&&"Point"==N)?((k=S[C.shadow+"-"+A.pointRadius])||(k=S[C.shadow+"-"+A.pointRadius]=function(t){let e=new r.default({image:new x.default({radius:.5*t.pointRadius,declutterMode:"none"}),zIndex:-1,geometry:L});return e.getImage().declutterMode_="none",e}(A)),k.setZIndex(i.zIndex||0),O.unshift(k)):!e&&A.strokeArrow&&"LineString"==N&&((k=S[C.arrow])||(k=S[C.arrow]=function(t){var e=t.strokeWidth+6;let i=new m.default({form:t.strokeArrow,radius:e,offsetY:"triangle"===t.strokeArrow?-5:0,rotation:0,rotateWithView:!0,fill:new h.default({color:t.strokeColor}),declutterMode:"none"});return i.declutterMode_="none",new r.default({image:i,geometry:function(t){return new f.default(t.get("features")?t.get("features")[0].getGeometry().getLastCoordinate():t.getGeometry().getLastCoordinate())}})}(A)),d=k,b=(p=t.getGeometry().getCoordinates()).pop(),_=p.pop(),E=0,b&&_&&(E=Math.atan2(_[0]-b[0],_[1]-b[1])),d.getImage().setRotation(E),k.setZIndex(i.zIndex||0),O.push(k)),(P?((k=S[C.text])||(k=S[C.text]=function(t){if(!t.textOutlineColor)try{t.textOutlineColor=I((0,u.asArray)(t.textColor))?[255,255,255,.6]:[0,0,0,.6]}catch(e){t.textOutlineColor=[255,255,255,.6]}let e="rgba(0, 0, 0, 0)"!==t.textBgFill,i="rgba(0, 0, 0, 0)"!==t.textBgStroke,n=e||i?[4,2,2,4]:[0,0,0,0],a={font:t.textStyle+" "+t.textSize+"px "+t.textFont,fill:new h.default({color:t.textColor}),stroke:e?void 0:new l.default({color:t.textOutlineColor,width:t.textOutlineWidth}),textAlign:t.textAlign,maxAngle:3,textBaseline:t.textBaseline,placement:t.textPlacement,overflow:t.textOverflow,backgroundFill:e?new h.default({color:t.textBgFill}):void 0,backgroundStroke:i?new l.default({color:t.textBgStroke,width:t.textBgStrokeWidth}):void 0,padding:n};return"point"===t.textPlacement&&(a.offsetX="left"==t.textAlign?t.pointRadius+n[3]:"right"==t.textAlign?-t.pointRadius-n[1]:0,a.offsetY=/^top|^hanging/.test(t.textBaseline)?t.pointRadius+n[0]:/^bottom|^alphabetic/.test(t.textBaseline)?-t.pointRadius-n[2]:0),new r.default({text:new o.default(a),geometry:L})}(A)),k.getText().setText(P.replace?t.getLabelContent("(("+P.replace(/\\n/g,"\n")+"))"):t.getLabelContent("(("+P+"))")),k.setZIndex(i.zIndex||0),O.push(k)):P="",P.trim().length||A.pointRadius)?O:[new r.default({fill:new h.default({color:"rgba(255, 255, 255, 0.2)"}),stroke:new l.default({color:"#ffcc33",width:2}),image:new s.default({radius:4,fill:new h.default({color:"#ffcc33"}),declutterMode:"none"}),geometry:L})]}function Z(t){var e=(t=t||{}).styleFn||k({zIndex:1/0,select:t.type});let i=t.color?(0,u.asArray)(t.color):[255,0,0],o=i.slice();o[3]=.5;var n=t.stroke||new l.default({color:i,width:2}),c=t.fill||new h.default({color:o}),f=t.radius||5,p=n.getColor(),g=!1!==t.showObject,m=t.points instanceof a.default?t.points:new s.default({stroke:new l.default({color:p,width:1}),radius:5,declutterMode:"none"}),y=new r.default({image:m,geometry:A,zIndex:1/0}),x=new l.default({color:p,width:5}),v=new r.default({fill:c,zIndex:1/0}),b=new r.default({image:new s.default({stroke:n,fill:c,radius:f,declutterMode:"none"}),stroke:n,fill:c,zIndex:1/0});return function(i,o){var a,l;let h=!(t.features.getLength()>10)&&t.points;switch(t.type){case"highlight":case"zoom":return l=e(i,o),a=[],l.forEach(t=>{t.getImage()&&(t.getImage().setScale(1.25),t.getImage().setRotation(t.getImage().getRotation())),!t.getStroke()&&!t.getFill()&&t.getText()&&t.getText().setScale(1.2),a.push(t)}),a.push(v),h&&a.push(y),a;case"overlay":return(a=g?e(i,o):[]).push(b),h&&a.push(y),a;default:a=g?e(i,o):[];var u=i.getGeometry();if("Point"===u.getType()){var c=i.get("features");c&&1==c.length&&(i=c[0],c=!1);let t=(c?C(c.length):i.getIgnStyle("pointRadius")||5)+f;a.unshift(new r.default({image:new s.default({stroke:x,radius:t,declutterMode:"none"}),zIndex:1/0}))}else h&&a.push(y),a.unshift(new r.default({stroke:n,geometry:(0,d.fromExtent)(u.getExtent()),zIndex:1/0}));return a}}}}),a("boqwt",function(t,i){e(t.exports,"default",()=>h);var r=n("h6Aha"),o=n("lqNjm"),a=n("d5AAH"),s=n("2zf1Y"),l=class extends r.default{constructor(t){(t=t||{}).displacement||(t.displacement=[t.offsetX||0,-t.offsetY||0]);var e="anchored"===t.kind?8:0,i=Number(t.shadow)||0;t.stroke||(t.stroke=new a.default({width:0,color:"#000"}));var o=t.stroke.getWidth();if(o<0&&(o=0),"folio"==t.kind&&(o+=6),t.stroke.setWidth(o),super({radius:t.radius+o+e/2+i/2,points:0,displacement:[t.displacement[0]||0,(t.displacement[1]||0)+e],fill:r.default.prototype.render?new s.default({color:[0,0,0,0]}):null,declutterMode:t.declutterMode}),this.sanchor_=e,this._shadow=i,!this.getHitDetectionImage){var n=super.getImage.call(this);if(!this.hitDetectionCanvas_){for(var l in this)if(this[l]&&this[l].getContext&&this[l]!==n){this.hitDetectionCanvas_=this[l];break}}this.hitDetectionCanvas_=document.createElement("canvas"),this.hitDetectionCanvas_.width=n.width,this.hitDetectionCanvas_.height=n.height;var h=this.hitDetectionCanvas_;this.getHitDetectionImage=function(){return h}}this._stroke=t.stroke,this._fill=t.fill,this._crop=t.crop,this._crossOrigin=t.crossOrigin,this._kind=t.kind||"default",this._radius=t.radius,this._src=t.src,this._offset=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],this._onload=t.onload,this._onerror=t.onerror,"number"==typeof t.opacity&&this.setOpacity(t.opacity),"number"==typeof t.rotation&&this.setRotation(t.rotation),this.getImage()}setOffset(t){this._offset=[t[0]||0,t[1]||0],this.getImage()}clone(){var t=new l({stroke:this._stroke,fill:this._fill,shadow:this._shadow,crop:this._crop,crossOrigin:this._crossOrigin,kind:this._kind,radius:this._radius,src:this._src,offsetX:this._offset[0],offsetY:this._offset[1],opacity:this.getOpacity(),rotation:this.getRotation(),declutterMode:this.getDeclutterMode?this.getDeclutterMode():null});return t.getImage(),t}drawBack_(t,e,i,r){var o=this._shadow,n=t.canvas;t.beginPath(),t.fillStyle=e,t.clearRect(0,0,n.width,n.height);var a=n.width/r,s=n.height/r;switch(this._kind){case"square":t.rect(0,0,a-o,s-o);break;case"circle":t.arc(this._radius+i,this._radius+i,this._radius+i,0,2*Math.PI,!1);break;case"folio":i-=6,t.strokeStyle="rgba(0,0,0,0.5)",t.lineWidth=1;var l=a-o-12,h=Math.atan(6/l);t.save(),t.rotate(-h),t.translate(-6,2),t.beginPath(),t.rect(6,6,l,l),t.stroke(),t.fill(),t.restore(),t.save(),t.translate(6,-1),t.rotate(h),t.beginPath(),t.rect(6,6,l,l),t.stroke(),t.fill(),t.restore(),t.beginPath(),t.rect(6,6,l,l),t.stroke();break;case"anchored":t.roundRect(this.sanchor_/2,0,a-this.sanchor_-o,s-this.sanchor_-o,i),t.moveTo(a/2-this.sanchor_-o/2,s-this.sanchor_-o),t.lineTo(a/2+this.sanchor_-o/2,s-this.sanchor_-o),t.lineTo(a/2-o/2,s-o);break;default:t.roundRect(0,0,a-o,s-o,i)}t.closePath()}getImage(t){t=t||window.devicePixelRatio;var e,i=(0,r.default).prototype.getImage.call(this,t);if((this._gethit||this.img_)&&this._currentRatio===t)return i;this._currentRatio=t;var n=0;this._stroke&&(e=(0,o.asString)(this._stroke.getColor()),n=this._stroke.getWidth()),this._gethit=!0;var a=this.getHitDetectionImage().getContext("2d");a.save(),a.setTransform(1,0,0,1,0,0),this.drawBack_(a,"#000",n,1),a.fill(),a.restore(),this._gethit=!1,(a=i.getContext("2d")).save(),a.setTransform(t,0,0,t,0,0),this.drawBack_(a,e,n,t),this._shadow&&(a.shadowColor="rgba(0,0,0,0.5)",a.shadowBlur=t*this._shadow/2,a.shadowOffsetX=t*this._shadow/2,a.shadowOffsetY=t*this._shadow/2),a.fill(),a.restore();var s=this,l=this.img_=new Image;if(this._crossOrigin&&(l.crossOrigin=this._crossOrigin),l.src=this._src,l.width?s.drawImage_(i,l,t):(l.onload=function(){s.drawImage_(i,l,t),s._onload&&s._onload()},s._onerror&&(l.onerror=function(){s._onerror()})),!this.getDisplacement){var h=this.getAnchor();h[0]=(i.width/t-this._shadow)/2-this._offset[0],this.sanchor_?h[1]=i.height/t-this._shadow-this._offset[1]:h[1]=(i.height/t-this._shadow)/2-this._offset[1]}return i}getPhoto(){return this.img_}drawImage_(t,e,i){var n,a,s,l,h,u,c,f,d,p=t.getContext("2d"),g=0;this._stroke&&(g=this._stroke.getWidth());var m=2*this._radius;p.save(),r.default.prototype.render&&p.setTransform(i,0,0,i,0,0),"circle"==this._kind&&(p.beginPath(),p.arc(this._radius+g,this._radius+g,this._radius,0,2*Math.PI,!1),p.clip()),this._crop?(f=d=(n=Math.min(e.width/m,e.height/m))*m,u=(e.width-f)/2,c=(e.height-d)/2,a=s=0,l=h=m+1):(n=Math.min(m/e.width,m/e.height),u=c=0,f=e.width,d=e.height,l=n*f,h=n*d,a=(m-l)/2,s=(m-h)/2),a+=g+this.sanchor_/2,s+=g,p.drawImage(e,u,c,f,d,a,s,l,h),"circle"==this._kind&&g&&(p.beginPath(),p.strokeStyle=(0,o.asString)(this._stroke.getColor()),p.lineWidth=g/4,p.arc(this._radius+g,this._radius+g,this._radius,0,2*Math.PI,!1),p.stroke()),p.restore()}};CanvasRenderingContext2D.prototype.roundRect=function(t,e,i,r,o){return o?(i<2*o&&(o=i/2),r<2*o&&(o=r/2),this.beginPath(),this.moveTo(t+o,e),this.arcTo(t+i,e,t+i,e+r,o),this.arcTo(t+i,e+r,t,e+r,o),this.arcTo(t,e+r,t,e,o),this.arcTo(t,e,t+i,e,o),this.closePath()):this.rect(t,e,i,r),this};var h=l}),a("3yg5q",function(t,i){e(t.exports,"default",()=>l);var r=n("lW8xZ"),o=n("2zf1Y"),a=n("lqNjm"),s=class extends o.default{constructor(t){super(),t=t||{};var e=this.canvas_=document.createElement("canvas"),i=(Number(t.scale)>0?Number(t.scale):1)*r.DEVICE_PIXEL_RATIO||r.DEVICE_PIXEL_RATIO,o=e.getContext("2d");if(t.image){t.image.load();var n,s,l=t.image.getImage();if(l.width)e.width=Math.round(l.width*i),e.height=Math.round(l.height*i),o.globalAlpha="number"==typeof t.opacity?t.opacity:1,o.drawImage(l,0,0,l.width,l.height,0,0,e.width,e.height),n=o.createPattern(e,"repeat");else{var h=this;n=[0,0,0,0],l.onload=function(){e.width=Math.round(l.width*i),e.height=Math.round(l.height*i),o.globalAlpha="number"==typeof t.opacity?t.opacity:1,o.drawImage(l,0,0,l.width,l.height,0,0,e.width,e.height),n=o.createPattern(e,"repeat"),h.setColor(n)}}}else{var u=this.getPattern_(t);if(e.width=Math.round(u.width*i),e.height=Math.round(u.height*i),o.beginPath(),t.fill&&(o.fillStyle=(0,a.asString)(t.fill.getColor()),o.fillRect(0,0,e.width,e.height)),o.scale(i,i),o.lineCap="round",o.lineWidth=u.stroke||1,o.fillStyle=(0,a.asString)(t.color||"#000"),o.strokeStyle=(0,a.asString)(t.color||"#000"),u.circles)for(s=0;s<u.circles.length;s++){var c=u.circles[s];o.beginPath(),o.arc(c[0],c[1],c[2],0,2*Math.PI),u.fill&&o.fill(),u.stroke&&o.stroke()}if(u.repeat||(u.repeat=[[0,0]]),u.char&&(o.font=u.font||u.width+"px Arial",o.textAlign="center",o.textBaseline="middle",u.angle?(o.fillText(u.char,u.width/4,u.height/4),o.fillText(u.char,5*u.width/4,5*u.height/4),o.fillText(u.char,u.width/4,5*u.height/4),o.fillText(u.char,5*u.width/4,u.height/4),o.fillText(u.char,3*u.width/4,3*u.height/4),o.fillText(u.char,-u.width/4,-u.height/4),o.fillText(u.char,3*u.width/4,-u.height/4),o.fillText(u.char,-u.width/4,3*u.height/4)):o.fillText(u.char,u.width/2,u.height/2)),u.lines)for(s=0;s<u.lines.length;s++)for(var f=0;f<u.repeat.length;f++){var d=u.lines[s];o.beginPath(),o.moveTo(d[0]+u.repeat[f][0],d[1]+u.repeat[f][1]);for(var p=2;p<d.length;p+=2)o.lineTo(d[p]+u.repeat[f][0],d[p+1]+u.repeat[f][1]);u.fill&&o.fill(),u.stroke&&o.stroke(),o.save(),o.strokeStyle="red",o.strokeWidth=.1,o.restore()}if(n=o.createPattern(e,"repeat"),t.offset){var g=t.offset;if("number"==typeof g&&(g=[g,g]),g instanceof Array){var m=Math.round(g[0]*i),y=Math.round(g[1]*i);o.scale(1/i,1/i),o.clearRect(0,0,e.width,e.height),o.translate(m,y),o.fillStyle=n,o.fillRect(-m,-y,e.width,e.height),n=o.createPattern(e,"repeat")}}}this.setColor(n)}static addPattern(t,e){e||(e={}),s.patterns[t||e.char]={width:e.width||e.size||10,height:e.height||e.size||10,font:e.font,char:e.char,circles:e.circles,lines:e.lines,repeat:e.repeat,stroke:e.stroke,angle:e.angle,fill:e.fill}}clone(){var t=super.clone();return t.canvas_=this.canvas_,t}getImage(){return this.canvas_}getPattern_(t){var e,i=s.patterns[t.pattern]||s.patterns.dot,r=Math.round(t.spacing)||10;switch(t.pattern){case"dot":case"circle":e=0===t.size?0:t.size/2||2,t.angle?(r=i.width=i.height=Math.round(1.4*r),i.circles=[[r/4,r/4,e],[3*r/4,3*r/4,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[r/4+r,r/4,e],[r/4,r/4+r,e],[3*r/4-r,3*r/4,e],[3*r/4,3*r/4-r,e],[r/4+r,r/4+r,e],[3*r/4-r,3*r/4-r,e]]))):(i.width=i.height=r,i.circles=[[r/2,r/2,e]],"circle"==t.pattern&&(i.circles=i.circles.concat([[r/2+r,r/2,e],[r/2-r,r/2,e],[r/2,r/2+r,e],[r/2,r/2-r,e],[r/2+r,r/2+r,e],[r/2+r,r/2-r,e],[r/2-r,r/2+r,e],[r/2-r,r/2-r,e]])));break;case"tile":case"square":e=0===t.size?0:t.size/2||2,t.angle?(i.width=i.height=r,i.lines=[[r/2-e,r/2,r/2,r/2-e,r/2+e,r/2,r/2,r/2+e,r/2-e,r/2]]):(i.width=i.height=r,i.lines=[[r/2-e,r/2-e,r/2+e,r/2-e,r/2+e,r/2+e,r/2-e,r/2+e,r/2-e,r/2-e]]),"square"==t.pattern&&(i.repeat=[[0,0],[0,r],[r,0],[0,-r],[-r,0],[-r,-r],[r,r],[-r,r],[r,-r]]);break;case"cross":t.angle&&(t.angle=45);case"hatch":var o=Math.round(((t.angle||0)-90)%360);o>180&&(o-=360);var n=Math.cos(o*=Math.PI/180),a=Math.sin(o);if(1e-4>Math.abs(a))i.width=i.height=r,i.lines=[[0,.5,r,.5]],i.repeat=[[0,0],[0,r]];else if(1e-4>Math.abs(n))i.width=i.height=r,i.lines=[[.5,0,.5,r]],i.repeat=[[0,0],[r,0]],"cross"==t.pattern&&(i.lines.push([0,.5,r,.5]),i.repeat.push([0,r]));else{var l=i.width=Math.round(Math.abs(r/a))||1,h=i.height=Math.round(Math.abs(r/n))||1;"cross"==t.pattern?(i.lines=[[-l,-h,2*l,2*h],[2*l,-h,-l,2*h]],i.repeat=[[0,0]]):n*a>0?(i.lines=[[-l,-h,2*l,2*h]],i.repeat=[[0,0],[l,0],[0,h]]):(i.lines=[[2*l,-h,-l,2*h]],i.repeat=[[0,0],[-l,0],[0,h]])}i.stroke=0===t.size?0:t.size||4}return i}};s.patterns={hatch:{width:5,height:5,lines:[[0,2.5,5,2.5]],stroke:1},cross:{width:7,height:7,lines:[[0,3,10,3],[3,0,3,10]],stroke:1},dot:{width:8,height:8,circles:[[5,5,2]],stroke:!1,fill:!0},circle:{width:10,height:10,circles:[[5,5,2]],stroke:1,fill:!1},square:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],stroke:1,fill:!1},tile:{width:10,height:10,lines:[[3,3,3,8,8,8,8,3,3,3]],fill:!0},woven:{width:12,height:12,lines:[[3,3,9,9],[0,12,3,9],[9,3,12,0],[-1,1,1,-1],[13,11,11,13]],stroke:1},crosses:{width:8,height:8,lines:[[2,2,6,6],[2,6,6,2]],stroke:1},caps:{width:8,height:8,lines:[[2,6,4,2,6,6]],stroke:1},nylon:{width:20,height:20,lines:[[1,6,1,1,6,1],[6,11,11,11,11,6],[11,16,11,21,16,21],[16,11,21,11,21,16]],repeat:[[0,0],[-20,0],[0,-20]],stroke:1},hexagon:{width:20,height:12,lines:[[0,10,4,4,10,4,14,10,10,16,4,16,0,10]],stroke:1,repeat:[[0,0],[10,6],[10,-6],[-10,-6]]},cemetry:{width:15,height:19,lines:[[0,3.5,7,3.5],[3.5,0,3.5,10]],stroke:1,repeat:[[0,0],[7,9]]},sand:{width:20,height:20,circles:[[1,2,1],[9,3,1],[2,16,1],[7,8,1],[6,14,1],[4,19,1],[14,2,1],[12,10,1],[14,18,1],[18,8,1],[18,14,1]],fill:1},conglomerate:{width:60,height:40,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],repeat:[[30,0],[-15,20],[15,20],[45,20]],stroke:1},conglomerate2:{width:60,height:40,circles:[[2,4,1],[17,3,1],[26,18,1],[12,17,1],[5,17,2],[28,11,2]],lines:[[7,5,6,7,9,9,11,8,11,6,9,5,7,5],[16,10,15,13,16,14,19,15,21,13,22,9,20,8,19,8,16,10],[24,6,26,7,27,5,26,4,24,4,24,6]],repeat:[[30,0],[-15,20],[15,20],[45,20]],fill:1},gravel:{width:15,height:10,circles:[[4,2,1],[5,9,1],[1,7,1]],lines:[[7,5,6,6,7,7,8,7,9,7,10,5,9,4,7,5],[11,2,14,4,14,1,12,1,11,2]],stroke:1},brick:{width:18,height:16,lines:[[0,1,18,1],[0,10,18,10],[6,1,6,10],[12,10,12,18],[12,0,12,1]],stroke:1},dolomite:{width:20,height:16,lines:[[0,1,20,1],[0,9,20,9],[1,9,6,1],[11,9,14,16],[14,0,14.4,1]],stroke:1},coal:{width:20,height:16,lines:[[1,5,7,1,7,7],[11,10,12,5,18,9],[5,10,2,15,9,15],[15,16,15,13,20,16],[15,0,15,2,20,0]],fill:1},breccia:{width:20,height:16,lines:[[1,5,7,1,7,7,1,5],[11,10,12,5,18,9,11,10],[5,10,2,15,9,15,5,10],[15,16,15,13,22,18],[15,0,15,2,20,0]],stroke:1},clay:{width:20,height:20,lines:[[0,0,3,11,0,20],[11,0,10,3,13,13,11,20],[0,0,10,3,20,0],[0,12,3,11,13,13,20,12]],stroke:1},flooded:{width:15,height:10,lines:[[0,1,10,1],[0,6,5,6],[10,6,15,6]],stroke:1},chaos:{width:40,height:40,lines:[[40,2,40,0,38,0,40,2],[4,0,3,2,2,5,0,0,0,3,2,7,5,6,7,7,8,10,9,12,9,13,9,14,8,14,6,15,2,15,0,20,0,22,2,20,5,19,8,15,10,14,11,12.25,10,12,10,10,12,9,13,7,12,6,13,4,16,7,17,4,20,0,18,0,15,3,14,2,14,0,12,1,11,0,10,1,11,4,10,7,9,8,8,5,6,4,5,3,5,1,5,0,4,0],[7,1,7,3,8,3,8,2,7,1],[4,3,5,5,4,5,4,3],[34,5,33,7,38,10,38,8,36,5,34,5],[27,0,23,2,21,8,30,0,27,0],[25,8,26,12,26,16,22.71875,15.375,20,13,18,15,17,18,13,22,17,21,19,22,21,20,19,18,22,17,30,25,26,26,24,28,21.75,33.34375,20,36,18,40,20,40,24,37,25,32,27,31,26,38,27,37,30,32,32,35,36,37,38,40,38,39,40,40,37,36,34,32,37,31,36,29,33,27,34,24,39,21,40,21,40,16,37,20,31,22,32,25,27,20,29,15,30,20,32,20,34,18,33,12,31,11,29,14,26,9,25,8],[39,24,37,26,40,28,39,24],[13,15,9,19,14,18,13,15],[18,23,14,27,16,27,17,25,20,26,18,23],[6,24,2,26,1,28,2,30,5,28,12,30,16,32,18,30,15,30,12,28,9,25,7,27,6,24],[29,27,32,28,33,31,30,29,27,28,29,27],[5,35,1,33,3,36,13,38,15,35,10,36,5,35]],fill:1},grass:{width:27,height:22,lines:[[0,10.5,13,10.5],[2.5,10,1.5,7],[4.5,10,4.5,5,3.5,4],[7,10,7.5,6,8.5,3],[10,10,11,6]],repeat:[[0,0],[14,10]],stroke:1},swamp:{width:24,height:23,lines:[[0,10.5,9.5,10.5],[2.5,10,2.5,7],[4.5,10,4.5,4],[6.5,10,6.5,6],[3,12.5,7,12.5]],repeat:[[0,0],[14,10]],stroke:1},reed:{width:26,height:23,lines:[[2.5,10,2,7],[4.5,10,4.2,4],[6.5,10,6.8,4],[8.5,10,9,6],[3.7,4,3.7,2.5],[4.7,4,4.7,2.5],[6.3,4,6.3,2.5],[7.3,4,7.3,2.5]],circles:[[4.2,2.5,.5],[18.2,12.5,.5],[6.8,2.5,.5],[20.8,12.5,.5],[9,6,.5],[23,16,.5]],repeat:[[0,0],[14,10]],stroke:1},wave:{width:10,height:8,lines:[[0,0,5,4,10,0]],stroke:1},vine:{width:13,height:13,lines:[[3,0,3,6],[9,7,9,13]],stroke:1},forest:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],stroke:1},forest2:{width:55,height:30,circles:[[7,7,3.5],[20,20,1.5],[42,22,3.5],[35,5,1.5]],fill:1,stroke:1},scrub:{width:26,height:20,lines:[[1,4,4,8,6,4]],circles:[[20,13,1.5]],stroke:1},tree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78]],repeat:[[3,1],[18,16]],stroke:1},tree2:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61]],repeat:[[3,1],[18,16]],fill:1,stroke:1},pine:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49]],repeat:[[3,1],[18,16]],stroke:1},pine2:{width:30,height:30,lines:[[5.66,11.31,2.83,11.31,2.83,8.49,0,8.49,2.83,0,5.66,8.49,2.83,8.49,2.83,11.31,5.66,11.31]],repeat:[[3,1],[18,16]],fill:1,stroke:1},mixtree:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61],[23.66,27.31,20.83,27.31,20.83,24.49,18,24.49,20.83,16,23.66,24.49,20.83,24.49,20.83,27.31,23.66,27.31]],repeat:[[3,1]],stroke:1},mixtree2:{width:30,height:30,lines:[[7.78,10.61,4.95,10.61,4.95,7.78,3.54,7.78,2.12,6.36,.71,6.36,0,4.24,.71,2.12,4.24,0,7.78,.71,9.19,3.54,7.78,4.95,7.07,7.07,4.95,7.78,4.95,10.61,7.78,10.61],[23.66,27.31,20.83,27.31,20.83,24.49,18,24.49,20.83,16,23.66,24.49,20.83,24.49,20.83,27.31,23.66,27.31]],repeat:[[3,1]],fill:1,stroke:1},pines:{width:22,height:20,lines:[[1,4,3.5,1,6,4],[1,8,3.5,5,6,8],[3.5,1,3.5,11],[12,14.5,14.5,14,17,14.5],[12,18,17,18],[14.5,12,14.5,18]],repeat:[[2,1]],stroke:1},rock:{width:20,height:20,lines:[[1,0,1,9],[4,0,4,9],[7,0,7,9],[10,1,19,1],[10,4,19,4],[10,7,19,7],[0,11,9,11],[0,14,9,14],[0,17,9,17],[12,10,12,19],[15,10,15,19],[18,10,18,19]],repeat:[[.5,.5]],stroke:1},rocks:{width:20,height:20,lines:[[5,0,3,0,5,4,4,6,0,3,0,5,3,6,5,9,3.75,10,2.5,10,0,9,0,10,4,11,5,14,4,15,0,13,0,13,0,13,0,14,0,14,5,16,5,18,3,19,0,19,-.25,19.9375,5,20,10,19,10,20,11,20,12,19,14,20,15,20,17,19,20,20,20,19,19,16,20,15,20,11,20,10,19,8,20,5,20,0,19,0,20,2,19,4,17,4,16,3,15,0,14,0,15,4,11,5,10,4,11,0,10,0,9,4,6,5,5,0],[18,5,19,6,18,10,16,10,14,9,16,5,18,5],[5,6,9,5,10,6,10,9,6,10,5,6],[14,5,14,8,13,9,12,9,11,7,12,5,14,5],[5,11,8,10,9,11,10,14,6,15,6,15,5,11],[13,10,14,11,15,14,15,14,15,14,11,15,10,11,11,10,13,10],[15,12,16,11,19,11,19,15,16,14,16,14,15,12],[6,16,9,15,10,18,5,19,6,16],[10,16,14,16,14,18,13,19,11,18,10,16],[15,15,18,16,18,18,16,19,15,18,15,15]],stroke:1}};var l=s}),a("foAUE",function(t,i){e(t.exports,"default",()=>s);var r=n("2zf1Y"),o=n("h6Aha"),a=class extends o.default{constructor(t){t=t||{},super({radius:t.radius,fill:t.fill,displacement:t.displacement,declutterMode:t.declutterMode}),this._fill=t.fill||new r.default({color:"rgba(0,0,0,0.5)"}),this._radius=t.radius,this._blur=0===t.blur?0:t.blur||t.radius/3,this._offset=[t.offsetX?t.offsetX:0,t.offsetY?t.offsetY:0],t.displacement||(t.displacement=[t.offsetX||0,-t.offsetY||0]),this.setDisplacement||this.getImage()}clone(){var t=new a({fill:this._fill,radius:this._radius,blur:this._blur,offsetX:this._offset[0],offsetY:this._offset[1],declutterMode:this.getDeclutterMode?this.getDeclutterMode():null});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}getImage(t){t=t||1;var e=this._radius,i=super.getImage(t),r=i.getContext("2d");if(r.save(),r.resetTransform(),r.clearRect(0,0,i.width,i.height),r.beginPath(),r.setTransform(t,0,0,t,0,0),r.scale(1,.5),r.arc(e,-e,e-this._blur,0,2*Math.PI,!1),r.fillStyle="#000",r.shadowColor=this._fill.getColor(),r.shadowBlur=.7*this._blur*t,r.shadowOffsetX=0,r.shadowOffsetY=1.5*e*t,r.closePath(),r.fill(),r.shadowColor="transparent",r.restore(),!this.getDisplacement){var o=this.getAnchor();o[0]=i.width/2-this._offset[0],o[1]=i.height/2-this._offset[1]}return i}},s=a}),a("hwcfb",function(t,i){e(t.exports,"default",()=>s),n("juLo9");var r=n("lqNjm"),o=n("4lFOe"),a=n("h1ihb"),s=function(t,e){let i=t.getStyle();if(i){"function"==typeof i&&(i=i(t)),i instanceof Array||(i=[i]),e&&t.setStyle(!1);for(let e=0;e<i.length&&!function(t,e){let i=e.getImage();if(i){if(i instanceof o.default)t.setIgnStyle("pointForm","circle"),t.setIgnStyle("pointGlyph","ign-form-rond"),t.setIgnStyle("pointRadius",i.getRadius()),t.setIgnStyle("pointStrokeWidth",i.getStroke()?i.getStroke().getWidth():0),t.setIgnStyle("pointColor",(0,r.asString)(i.getFill()?i.getFill().getColor():"rgba(255,255,255,0)")),t.setIgnStyle("symbolColor",t.getIgnStyle("pointColor")),t.setIgnStyle("pointStrokeColor",(0,r.asString)(i.getStroke()?i.getStroke().getColor():"rgba(255,255,255,0)"));else if(!(i instanceof a.default))return!1;return!0}return!1}(t,i[e]);e++);for(let e=0;e<i.length&&!function(t,e){let i=e.getStroke();return i?(t.setIgnStyle("strokeWidth",i.getWidth()),t.setIgnStyle("strokeColor",(0,r.asString)(i.getColor())),!0):(t.setIgnStyle("strokeWidth",0),t.setIgnStyle("strokeColor","rgba(255,255,255,0)"),!1)}(t,i[e]);e++);for(let e=0;e<i.length&&!function(t,e){let i=e.getFill();return!!i&&(t.setIgnStyle("fillColor",(0,r.asString)(i.getColor())),!0)}(t,i[e]);e++);return t.getIgnStyle()}}}),a("gVmm4",function(t,i){e(t.exports,"default",()=>h);var r=n("4DafG"),o=n("31ZqB"),a=n("20LS2"),s=n("iQyfo"),l=class extends r.default{constructor(t){t=t||{};var e=document.createElement("div");super({element:e,target:t.target}),this._features=this.setFeatures(t.features),t.target||(e.className="ol-select ol-unselectable ol-control ol-collapsed",(0,s.default).create("BUTTON",{type:"button",on:{"click touchstart":function(t){e.classList.toggle("ol-collapsed"),t.preventDefault()}},parent:e})),t.className&&e.classList.add(t.className);var i=t.content||(0,s.default).create("DIV");e.appendChild(i),(0,s.default).create("BUTTON",{html:t.btInfo||"OK",className:"ol-ok",on:{click:this.doSelect.bind(this)},parent:i}),this.setSources(t.source)}setSources(t){t?this.set("source",t instanceof Array?t:[t]):this.unset("source")}setFeatures(t){t instanceof o.default?this._features=t:this._features=null}getFeatures(){return this._features}_escape(t){return String(t||"").replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}_checkCondition(t,e,i){if(!e.attr)return!0;var r=t.get(e.attr),o=Number(r)==r&&Number(e.val)==e.val;switch(o&&(r=Number(r)),e.op){case"=":if(o)return r==e.val;return RegExp("^"+this._escape(e.val)+"$",i?"":"i").test(r);case"!=":if(o)return r!=e.val;return!RegExp("^"+this._escape(e.val)+"$",i?"":"i").test(r);case"<":return r<e.val;case"<=":return r<=e.val;case">":return r>e.val;case">=":return r>=e.val;case"contain":return new RegExp(this._escape(e.val),i?"":"i").test(r);case"!contain":return!new RegExp(this._escape(e.val),i?"":"i").test(r);case"regexp":return new RegExp(e.val,i?"":"i").test(r);case"!regexp":return!new RegExp(e.val,i?"":"i").test(r);default:return!1}}_selectFeatures(t,e,i,r,o){i=i||[];for(var n=e.length-1;a=e[n];n--){for(var a,s,l=r,h=0;s=i[h];h++)s.attr&&(l=r?l&&this._checkCondition(a,s,o):l||this._checkCondition(a,s,o));l?t.push(a):this._features&&this._features.removeAt(n)}return t}getSources(){if(this.get("source"))return this.get("source");var t=[];return this.getMap()&&function e(i){i.forEach(function(i){i.getLayers?e(i.getLayers()):i.getSource&&i.getSource() instanceof a.default&&t.push(i.getSource())})}(this.getMap().getLayers()),t}doSelect(t){var e=[];return(t=t||{}).features?this._selectFeatures(e,t.features,t.conditions,t.matchAll,t.useCase):this._features?this._selectFeatures(e,this._features.getArray(),t.conditions,t.matchAll,t.useCase):(t.sources||this.getSources()).forEach((function(i){this._selectFeatures(e,i.getFeatures(),t.conditions,t.matchAll,t.useCase)}).bind(this)),this.dispatchEvent({type:"select",features:e}),e}};l.prototype.operationsList={"=":"=","!=":"≠","<":"<","<=":"≤",">=":"≥",">":">",contain:"⊂","!contain":"⊄",regexp:"≃","!regexp":"≄"};var h=l}),a("kBBZ2",function(t,i){e(t.exports,"applyStyle",()=>ia);var r,o,a,s,l,h=n("4lFOe"),u=n("2zf1Y"),c=n("ayeEa"),f=n("29SgV"),d=n("d5AAH"),p=n("l9IGS"),g=n("kuKBR"),m=n("aHG4Z"),y=n("kPMpK"),x=n("9MiJs");n("gbCDL");var v=n("co8nU"),b=n("4evd8");n("eEuqc");var w=n("610XN"),_=n("20LS2"),S=n("gNqjI"),E=n("5Nyxy");n("4QhZh"),n("5NhYx");var A=n("gzr8q"),N={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function I(t){return(t=Math.round(t))<0?0:t>255?255:t}function M(t){return t<0?0:t>1?1:t}function P(t){return"%"===t[t.length-1]?I(parseFloat(t)/100*255):I(parseInt(t))}function C(t){return"%"===t[t.length-1]?M(parseFloat(t)/100):M(parseFloat(t))}function T(t,e,i){return(i<0?i+=1:i>1&&(i-=1),6*i<1)?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}try{r=({}).parseCSSColor=function(t){var e=t.replace(/ /g,"").toLowerCase();if(e in N)return N[e].slice();if("#"===e[0]){if(4===e.length){var i=parseInt(e.substr(1),16);return i>=0&&i<=4095?[(3840&i)>>4|(3840&i)>>8,240&i|(240&i)>>4,15&i|(15&i)<<4,1]:null}if(7===e.length){var i=parseInt(e.substr(1),16);return i>=0&&i<=16777215?[(16711680&i)>>16,(65280&i)>>8,255&i,1]:null}return null}var r=e.indexOf("("),o=e.indexOf(")");if(-1!==r&&o+1===e.length){var n=e.substr(0,r),a=e.substr(r+1,o-(r+1)).split(","),s=1;switch(n){case"rgba":if(4!==a.length)break;s=C(a.pop());case"rgb":if(3!==a.length)break;return[P(a[0]),P(a[1]),P(a[2]),s];case"hsla":if(4!==a.length)break;s=C(a.pop());case"hsl":if(3!==a.length)break;var l=(parseFloat(a[0])%360+360)%360/360,h=C(a[1]),u=C(a[2]),c=u<=.5?u*(h+1):u+h-u*h,f=2*u-c;return[I(255*T(f,c,l+1/3)),I(255*T(f,c,l)),I(255*T(f,c,l-1/3)),s]}}return null}}catch(t){}var L=function(t,e,i,r){void 0===r&&(r=1),this.r=t,this.g=e,this.b=i,this.a=r};function R(t){return"object"==typeof t?["literal",t]:t}function O(t){switch(t.colorSpace){case"hcl":return"interpolate-hcl";case"lab":return"interpolate-lab";default:return"interpolate"}}function k(t,e){var i,r,o=R((i=t.default,r=e.default,void 0!==i?i:void 0!==r?r:void 0));return void 0===o&&"resolvedImage"===e.type?"":o}function G(t,e,i){var r=D(t,e),o=["get",t.property];if("categorical"===r&&"boolean"==typeof i[0][0]){for(var n=["case"],a=0;a<i.length;a+=1){var s=i[a];n.push(["==",o,s[0]],s[1])}return n.push(k(t,e)),n}if("categorical"===r){for(var l=["match",o],h=0;h<i.length;h+=1){var u=i[h];F(l,u[0],u[1],!1)}return l.push(k(t,e)),l}if("interval"===r){for(var c=["step",["number",o]],f=0;f<i.length;f+=1){var d=i[f];F(c,d[0],d[1],!0)}return Z(c),void 0===t.default?c:["case",["==",["typeof",o],"number"],c,R(t.default)]}if("exponential"===r){for(var p=void 0!==t.base?t.base:1,g=[O(t),1===p?["linear"]:["exponential",p],["number",o]],m=0;m<i.length;m+=1){var y=i[m];F(g,y[0],y[1],!1)}return void 0===t.default?g:["case",["==",["typeof",o],"number"],g,R(t.default)]}throw Error("Unknown property function type "+r)}function Z(t){"step"===t[0]&&3===t.length&&(t.push(0),t.push(t[3]))}function F(t,e,i,r){t.length>3&&e===t[t.length-2]||(r&&2===t.length||t.push(e),t.push(i))}function D(t,e){return t.type?t.type:e.expression.interpolated?"exponential":"interval"}L.parse=function(t){if(t){if(t instanceof L)return t;if("string"==typeof t){var e=r(t);if(e)return new L(e[0]/255*e[3],e[1]/255*e[3],e[2]/255*e[3],e[3])}}},L.prototype.toString=function(){var t=this.toArray();return"rgba("+Math.round(t[0])+","+Math.round(t[1])+","+Math.round(t[2])+","+t[3]+")"},L.prototype.toArray=function(){var t=this.r,e=this.g,i=this.b,r=this.a;return 0===r?[0,0,0,0]:[255*t/r,255*e/r,255*i/r,r]},L.prototype.toArray01=function(){var t=this.r,e=this.g,i=this.b,r=this.a;return 0===r?[0,0,0,0]:[t/r,e/r,i/r,r]},L.prototype.toArray01PremultipliedAlpha=function(){return[this.r,this.g,this.b,this.a]},L.black=new L(0,0,0,1),L.white=new L(1,1,1,1),L.transparent=new L(0,0,0,0),L.red=new L(1,0,0,1),L.blue=new L(0,0,1,1);var j=function(t){function e(e,i){t.call(this,i),this.message=i,this.key=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error),q=function(t,e){void 0===e&&(e=[]),this.parent=t,this.bindings={};for(var i=0,r=e;i<r.length;i+=1){var o=r[i],n=o[0],a=o[1];this.bindings[n]=a}};q.prototype.concat=function(t){return new q(this,t)},q.prototype.get=function(t){if(this.bindings[t])return this.bindings[t];if(this.parent)return this.parent.get(t);throw Error(t+" not found in scope.")},q.prototype.has=function(t){return!!this.bindings[t]||!!this.parent&&this.parent.has(t)};var U={kind:"null"},B={kind:"number"},z={kind:"string"},H={kind:"boolean"},V={kind:"color"},Y={kind:"object"},W={kind:"value"},X={kind:"collator"},K={kind:"formatted"},J={kind:"resolvedImage"};function $(t,e){return{kind:"array",itemType:t,N:e}}function Q(t){if("array"!==t.kind)return t.kind;var e=Q(t.itemType);return"number"==typeof t.N?"array<"+e+", "+t.N+">":"value"===t.itemType.kind?"array":"array<"+e+">"}var tt=[U,B,z,H,V,K,Y,$(W),J];function te(t,e){if("error"===e.kind)return null;if("array"===t.kind){if("array"===e.kind&&(0===e.N&&"value"===e.itemType.kind||!te(t.itemType,e.itemType))&&("number"!=typeof t.N||t.N===e.N))return null}else if(t.kind===e.kind)return null;else if("value"===t.kind){for(var i=0;i<tt.length;i+=1)if(!te(tt[i],e))return null}return"Expected "+Q(t)+" but found "+Q(e)+" instead."}function ti(t,e){return e.some(function(e){return e.kind===t.kind})}function tr(t,e){return e.some(function(e){return"null"===e?null===t:"array"===e?Array.isArray(t):"object"===e?t&&!Array.isArray(t)&&"object"==typeof t:e===typeof t})}var to=function(t,e,i){t?this.sensitivity=e?"variant":"case":this.sensitivity=e?"accent":"base",this.locale=i,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};to.prototype.compare=function(t,e){return this.collator.compare(t,e)},to.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var tn=function(t,e,i,r,o){this.text=t.normalize?t.normalize():t,this.image=e,this.scale=i,this.fontStack=r,this.textColor=o},ta=function(t){this.sections=t};ta.fromString=function(t){return new ta([new tn(t,null,null,null,null)])},ta.prototype.isEmpty=function(){return 0===this.sections.length||!this.sections.some(function(t){return 0!==t.text.length||t.image&&0!==t.image.name.length})},ta.factory=function(t){return t instanceof ta?t:ta.fromString(t)},ta.prototype.toString=function(){return 0===this.sections.length?"":this.sections.map(function(t){return t.text}).join("")},ta.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];if(r.image){t.push(["image",r.image.name]);continue}t.push(r.text);var o={};r.fontStack&&(o["text-font"]=["literal",r.fontStack.split(",")]),r.scale&&(o["font-scale"]=r.scale),r.textColor&&(o["text-color"]=["rgba"].concat(r.textColor.toArray())),t.push(o)}return t};var ts=function(t){this.name=t.name,this.available=t.available};function tl(t,e,i,r){return"number"==typeof t&&t>=0&&t<=255&&"number"==typeof e&&e>=0&&e<=255&&"number"==typeof i&&i>=0&&i<=255?void 0===r||"number"==typeof r&&r>=0&&r<=1?null:"Invalid rgba value ["+[t,e,i,r].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+("number"==typeof r?[t,e,i,r]:[t,e,i]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function th(t){if(null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)return!0;if(t instanceof L)return!0;if(t instanceof to)return!0;if(t instanceof ta)return!0;else if(t instanceof ts)return!0;else if(Array.isArray(t)){for(var e=0;e<t.length;e+=1)if(!th(t[e]))return!1;return!0}else{if("object"!=typeof t)return!1;for(var i in t)if(!th(t[i]))return!1;return!0}}function tu(t){if(null===t)return U;if("string"==typeof t)return z;if("boolean"==typeof t)return H;if("number"==typeof t)return B;if(t instanceof L)return V;if(t instanceof to)return X;if(t instanceof ta)return K;if(t instanceof ts)return J;if(!Array.isArray(t))return Y;for(var e,i=t.length,r=0;r<t.length;r+=1){var o=tu(t[r]);if(e){if(e===o)continue;e=W;break}e=o}return $(e||W,i)}function tc(t){var e=typeof t;return null===t?"":"string"===e||"number"===e||"boolean"===e?String(t):t instanceof L||t instanceof ta||t instanceof ts?t.toString():JSON.stringify(t)}ts.prototype.toString=function(){return this.name},ts.fromString=function(t){return t?new ts({name:t,available:!1}):null},ts.prototype.serialize=function(){return["image",this.name]};var tf=function(t,e){this.type=t,this.value=e};tf.parse=function(t,e){if(2!==t.length)return e.error("'literal' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(!th(t[1]))return e.error("invalid value");var i=t[1],r=tu(i),o=e.expectedType;return"array"===r.kind&&0===r.N&&o&&"array"===o.kind&&("number"!=typeof o.N||0===o.N)&&(r=o),new tf(r,i)},tf.prototype.evaluate=function(){return this.value},tf.prototype.eachChild=function(){},tf.prototype.outputDefined=function(){return!0},tf.prototype.serialize=function(){return"array"===this.type.kind||"object"===this.type.kind?["literal",this.value]:this.value instanceof L?["rgba"].concat(this.value.toArray()):this.value instanceof ta?this.value.serialize():this.value};var td=function(t){this.name="ExpressionEvaluationError",this.message=t};td.prototype.toJSON=function(){return this.message};var tp={string:z,number:B,boolean:H,object:Y},tg=function(t,e){this.type=t,this.args=e};tg.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=1,r=t[0];if("array"===r){if(t.length>2){var o,n,a,s=t[1];if("string"!=typeof s||!(s in tp)||"object"===s)return e.error('The item type argument of "array" must be one of string, number, boolean',1);n=tp[s],i++}else n=W;if(t.length>3){if(null!==t[2]&&("number"!=typeof t[2]||t[2]<0||t[2]!==Math.floor(t[2])))return e.error('The length argument to "array" must be a positive integer literal',2);a=t[2],i++}o=$(n,a)}else o=tp[r];for(var l=[];i<t.length;i++){var h=e.parse(t[i],i,W);if(!h)return null;l.push(h)}return new tg(o,l)},tg.prototype.evaluate=function(t){for(var e=0;e<this.args.length;e++){var i=this.args[e].evaluate(t);if(!te(this.type,tu(i)))return i;if(e===this.args.length-1)throw new td("Expected value to be of type "+Q(this.type)+", but found "+Q(tu(i))+" instead.")}return null},tg.prototype.eachChild=function(t){this.args.forEach(t)},tg.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},tg.prototype.serialize=function(){var t=this.type,e=[t.kind];if("array"===t.kind){var i=t.itemType;if("string"===i.kind||"number"===i.kind||"boolean"===i.kind){e.push(i.kind);var r=t.N;("number"==typeof r||this.args.length>1)&&e.push(r)}}return e.concat(this.args.map(function(t){return t.serialize()}))};var tm=function(t){this.type=K,this.sections=t};tm.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[1];if(!Array.isArray(i)&&"object"==typeof i)return e.error("First argument must be an image or text section.");for(var r=[],o=!1,n=1;n<=t.length-1;++n){var a=t[n];if(o&&"object"==typeof a&&!Array.isArray(a)){o=!1;var s=null;if(a["font-scale"]&&!(s=e.parse(a["font-scale"],1,B)))return null;var l=null;if(a["text-font"]&&!(l=e.parse(a["text-font"],1,$(z))))return null;var h=null;if(a["text-color"]&&!(h=e.parse(a["text-color"],1,V)))return null;var u=r[r.length-1];u.scale=s,u.font=l,u.textColor=h}else{var c=e.parse(t[n],1,W);if(!c)return null;var f=c.type.kind;if("string"!==f&&"value"!==f&&"null"!==f&&"resolvedImage"!==f)return e.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");o=!0,r.push({content:c,scale:null,font:null,textColor:null})}}return new tm(r)},tm.prototype.evaluate=function(t){return new ta(this.sections.map(function(e){var i=e.content.evaluate(t);return tu(i)===J?new tn("",i,null,null,null):new tn(tc(i),null,e.scale?e.scale.evaluate(t):null,e.font?e.font.evaluate(t).join(","):null,e.textColor?e.textColor.evaluate(t):null)}))},tm.prototype.eachChild=function(t){for(var e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t(r.content),r.scale&&t(r.scale),r.font&&t(r.font),r.textColor&&t(r.textColor)}},tm.prototype.outputDefined=function(){return!1},tm.prototype.serialize=function(){for(var t=["format"],e=0,i=this.sections;e<i.length;e+=1){var r=i[e];t.push(r.content.serialize());var o={};r.scale&&(o["font-scale"]=r.scale.serialize()),r.font&&(o["text-font"]=r.font.serialize()),r.textColor&&(o["text-color"]=r.textColor.serialize()),t.push(o)}return t};var ty=function(t){this.type=J,this.input=t};ty.parse=function(t,e){if(2!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,z);return i?new ty(i):e.error("No image name provided.")},ty.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=ts.fromString(e);return i&&t.availableImages&&(i.available=t.availableImages.indexOf(e)>-1),i},ty.prototype.eachChild=function(t){t(this.input)},ty.prototype.outputDefined=function(){return!1},ty.prototype.serialize=function(){return["image",this.input.serialize()]};var tx={"to-boolean":H,"to-color":V,"to-number":B,"to-string":z},tv=function(t,e){this.type=t,this.args=e};tv.parse=function(t,e){if(t.length<2)return e.error("Expected at least one argument.");var i=t[0];if(("to-boolean"===i||"to-string"===i)&&2!==t.length)return e.error("Expected one argument.");for(var r=tx[i],o=[],n=1;n<t.length;n++){var a=e.parse(t[n],n,W);if(!a)return null;o.push(a)}return new tv(r,o)},tv.prototype.evaluate=function(t){if("boolean"===this.type.kind)return!!this.args[0].evaluate(t);if("color"===this.type.kind){for(var e,i,r=0,o=this.args;r<o.length;r+=1){if(e=o[r].evaluate(t),i=null,e instanceof L)return e;if("string"==typeof e){var n=t.parseColor(e);if(n)return n}else if(Array.isArray(e)&&!(i=e.length<3||e.length>4?"Invalid rbga value "+JSON.stringify(e)+": expected an array containing either three or four numeric values.":tl(e[0],e[1],e[2],e[3])))return new L(e[0]/255,e[1]/255,e[2]/255,e[3])}throw new td(i||"Could not parse color from value '"+("string"==typeof e?e:String(JSON.stringify(e)))+"'")}if("number"===this.type.kind){for(var a=null,s=0,l=this.args;s<l.length;s+=1){if(null===(a=l[s].evaluate(t)))return 0;var h=Number(a);if(!isNaN(h))return h}throw new td("Could not convert "+JSON.stringify(a)+" to number.")}return"formatted"===this.type.kind?ta.fromString(tc(this.args[0].evaluate(t))):"resolvedImage"===this.type.kind?ts.fromString(tc(this.args[0].evaluate(t))):tc(this.args[0].evaluate(t))},tv.prototype.eachChild=function(t){this.args.forEach(t)},tv.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},tv.prototype.serialize=function(){if("formatted"===this.type.kind)return new tm([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if("resolvedImage"===this.type.kind)return new ty(this.args[0]).serialize();var t=["to-"+this.type.kind];return this.eachChild(function(e){t.push(e.serialize())}),t};var tb=["Unknown","Point","LineString","Polygon"],tw=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null};tw.prototype.id=function(){return this.feature&&"id"in this.feature&&this.feature.id?this.feature.id:null},tw.prototype.geometryType=function(){return this.feature?"number"==typeof this.feature.type?tb[this.feature.type]:this.feature.type:null},tw.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},tw.prototype.canonicalID=function(){return this.canonical},tw.prototype.properties=function(){return this.feature&&this.feature.properties||{}},tw.prototype.distanceFromCenter=function(){if(this.featureTileCoord&&this.featureDistanceData){var t=this.featureDistanceData.center,e=this.featureDistanceData.scale,i=this.featureTileCoord,r=i.x,o=i.y,n=r*e-t[0],a=o*e-t[1];return this.featureDistanceData.bearing[0]*n+this.featureDistanceData.bearing[1]*a}return 0},tw.prototype.parseColor=function(t){var e=this._parseColorCache[t];return e||(e=this._parseColorCache[t]=L.parse(t)),e};var t_=function(t,e,i,r){this.name=t,this.type=e,this._evaluate=i,this.args=r};t_.prototype.evaluate=function(t){return this._evaluate(t,this.args)},t_.prototype.eachChild=function(t){this.args.forEach(t)},t_.prototype.outputDefined=function(){return!1},t_.prototype.serialize=function(){return[this.name].concat(this.args.map(function(t){return t.serialize()}))},t_.parse=function(t,e){var i,r=t[0],o=t_.definitions[r];if(!o)return e.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0);for(var n=Array.isArray(o)?o[0]:o.type,a=Array.isArray(o)?[[o[1],o[2]]]:o.overloads,s=a.filter(function(e){var i=e[0];return!Array.isArray(i)||i.length===t.length-1}),l=null,h=0;h<s.length;h+=1){var u=s[h],c=u[0],f=u[1];l=new tD(e.registry,e.path,null,e.scope);for(var d=[],p=!1,g=1;g<t.length;g++){var m=t[g],y=Array.isArray(c)?c[g-1]:c.type,x=l.parse(m,1+d.length,y);if(!x){p=!0;break}d.push(x)}if(!p){if(Array.isArray(c)&&c.length!==d.length){l.error("Expected "+c.length+" arguments, but found "+d.length+" instead.");continue}for(var v=0;v<d.length;v++){var b=Array.isArray(c)?c[v]:c.type,w=d[v];l.concat(v+1).checkSubtype(b,w.type)}if(0===l.errors.length)return new t_(r,n,f,d)}}if(1===s.length)(i=e.errors).push.apply(i,l.errors);else{for(var _=(s.length?s:a).map(function(t){var e;return Array.isArray(e=t[0])?"("+e.map(Q).join(", ")+")":"("+Q(e.type)+"...)"}).join(" | "),S=[],E=1;E<t.length;E++){var A=e.parse(t[E],1+S.length);if(!A)return null;S.push(Q(A.type))}e.error("Expected arguments of type "+_+", but found ("+S.join(", ")+") instead.")}return null},t_.register=function(t,e){for(var i in t_.definitions=e,e)t[i]=t_};var tS=function(t,e,i){this.type=X,this.locale=i,this.caseSensitive=t,this.diacriticSensitive=e};function tE(t,e){t[0]=Math.min(t[0],e[0]),t[1]=Math.min(t[1],e[1]),t[2]=Math.max(t[2],e[0]),t[3]=Math.max(t[3],e[1])}function tA(t,e){return!(t[0]<=e[0])&&!(t[2]>=e[2])&&!(t[1]<=e[1])&&!(t[3]>=e[3])}function tN(t,e){for(var i=!1,r=0,o=e.length;r<o;r++)for(var n,a,s=e[r],l=0,h=s.length;l<h-1;l++){if(function(t,e,i){var r=t[0]-e[0],o=t[1]-e[1],n=t[0]-i[0],a=t[1]-i[1];return r*a-n*o==0&&r*n<=0&&o*a<=0}(t,s[l],s[l+1]))return!1;n=s[l],a=s[l+1],n[1]>t[1]!=a[1]>t[1]&&t[0]<(a[0]-n[0])*(t[1]-n[1])/(a[1]-n[1])+n[0]&&(i=!i)}return i}function tI(t,e,i,r){var o=t[0]-i[0],n=t[1]-i[1],a=e[0]-i[0],s=e[1]-i[1],l=r[0]-i[0],h=r[1]-i[1],u=o*h-l*n,c=a*h-l*s;return u>0&&c<0||u<0&&c>0}function tM(t,e){for(var i=0;i<t.length;++i)if(!tN(t[i],e))return!1;for(var r=0;r<t.length-1;++r)if(function(t,e,i){for(var r=0;r<i.length;r+=1)for(var o=i[r],n=0;n<o.length-1;++n)if(function(t,e,i,r){var o,n=[e[0]-t[0],e[1]-t[1]];return 0!=(o=[r[0]-i[0],r[1]-i[1]])[0]*n[1]-o[1]*n[0]&&!!(tI(t,e,i,r)&&tI(i,r,t,e))}(t,e,o[n],o[n+1]))return!0;return!1}(t[r],t[r+1],e))return!1;return!0}function tP(t,e,i){for(var r=[],o=0;o<t.length;o++){for(var n=[],a=0;a<t[o].length;a++){var s=function(t,e){var i=(180+t[0])/360,r=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+t[1]*Math.PI/360)))/360,o=Math.pow(2,e.z);return[Math.round(i*o*8192),Math.round(r*o*8192)]}(t[o][a],i);tE(e,s),n.push(s)}r.push(n)}return r}function tC(t,e,i){for(var r=[],o=0;o<t.length;o++){var n=tP(t[o],e,i);r.push(n)}return r}function tT(t,e,i,r){if(t[0]<i[0]||t[0]>i[2]){var o=.5*r,n=t[0]-i[0]>o?-r:i[0]-t[0]>o?r:0;0===n&&(n=t[0]-i[2]>o?-r:i[2]-t[0]>o?r:0),t[0]+=n}tE(e,t)}function tL(t,e,i,r){var o=8192*Math.pow(2,r.z),n=[8192*r.x,8192*r.y],a=[];if(!t)return a;for(var s=0;s<t.length;s+=1)for(var l=t[s],h=0;h<l.length;h+=1){var u=l[h],c=[u.x+n[0],u.y+n[1]];tT(c,e,i,o),a.push(c)}return a}function tR(t,e,i,r){var o=8192*Math.pow(2,r.z),n=[8192*r.x,8192*r.y],a=[];if(!t)return a;for(var s=0;s<t.length;s+=1){for(var l=t[s],h=[],u=0;u<l.length;u+=1){var c=l[u],f=[c.x+n[0],c.y+n[1]];tE(e,f),h.push(f)}a.push(h)}if(e[2]-e[0]<=o/2){e[0]=e[1]=1/0,e[2]=e[3]=-1/0;for(var d=0;d<a.length;d+=1)for(var p=a[d],g=0;g<p.length;g+=1)tT(p[g],e,i,o)}return a}tS.parse=function(t,e){if(2!==t.length)return e.error("Expected one argument.");var i=t[1];if("object"!=typeof i||Array.isArray(i))return e.error("Collator options argument must be an object.");var r=e.parse(void 0!==i["case-sensitive"]&&i["case-sensitive"],1,H);if(!r)return null;var o=e.parse(void 0!==i["diacritic-sensitive"]&&i["diacritic-sensitive"],1,H);if(!o)return null;var n=null;return!i.locale||(n=e.parse(i.locale,1,z))?new tS(r,o,n):null},tS.prototype.evaluate=function(t){return new to(this.caseSensitive.evaluate(t),this.diacriticSensitive.evaluate(t),this.locale?this.locale.evaluate(t):null)},tS.prototype.eachChild=function(t){t(this.caseSensitive),t(this.diacriticSensitive),this.locale&&t(this.locale)},tS.prototype.outputDefined=function(){return!1},tS.prototype.serialize=function(){var t={};return t["case-sensitive"]=this.caseSensitive.serialize(),t["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(t.locale=this.locale.serialize()),["collator",t]};var tO=function(t,e){this.type=H,this.geojson=t,this.geometries=e};function tk(t){if(t instanceof t_){if("get"===t.name&&1===t.args.length||"feature-state"===t.name)return!1;if("has"===t.name&&1===t.args.length)return!1;if("properties"===t.name||"geometry-type"===t.name||"id"===t.name)return!1;else if(/^filter-/.test(t.name))return!1}if(t instanceof tO)return!1;var e=!0;return t.eachChild(function(t){e&&!tk(t)&&(e=!1)}),e}function tG(t){if(t instanceof t_&&"feature-state"===t.name)return!1;var e=!0;return t.eachChild(function(t){e&&!tG(t)&&(e=!1)}),e}function tZ(t,e){if(t instanceof t_&&e.indexOf(t.name)>=0)return!1;var i=!0;return t.eachChild(function(t){i&&!tZ(t,e)&&(i=!1)}),i}tO.parse=function(t,e){if(2!==t.length)return e.error("'within' expression requires exactly one argument, but found "+(t.length-1)+" instead.");if(th(t[1])){var i=t[1];if("FeatureCollection"===i.type)for(var r=0;r<i.features.length;++r){var o=i.features[r].geometry.type;if("Polygon"===o||"MultiPolygon"===o)return new tO(i,i.features[r].geometry)}else if("Feature"===i.type){var n=i.geometry.type;if("Polygon"===n||"MultiPolygon"===n)return new tO(i,i.geometry)}else if("Polygon"===i.type||"MultiPolygon"===i.type)return new tO(i,i)}return e.error("'within' expression requires valid geojson object that contains polygon geometry type.")},tO.prototype.evaluate=function(t){if(null!=t.geometry()&&null!=t.canonicalID()){if("Point"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if("Polygon"===e.type){var n=tP(e.coordinates,r,o),a=tL(t.geometry(),i,r,o);if(!tA(i,r))return!1;for(var s=0;s<a.length;s+=1)if(!tN(a[s],n))return!1}if("MultiPolygon"===e.type){var l=tC(e.coordinates,r,o),h=tL(t.geometry(),i,r,o);if(!tA(i,r))return!1;for(var u=0;u<h.length;u+=1)if(!function(t,e){for(var i=0;i<e.length;i++)if(tN(t,e[i]))return!0;return!1}(h[u],l))return!1}return!0}(t,this.geometries);if("LineString"===t.geometryType())return function(t,e){var i=[1/0,1/0,-1/0,-1/0],r=[1/0,1/0,-1/0,-1/0],o=t.canonicalID();if(!o)return!1;if("Polygon"===e.type){var n=tP(e.coordinates,r,o),a=tR(t.geometry(),i,r,o);if(!tA(i,r))return!1;for(var s=0;s<a.length;s+=1)if(!tM(a[s],n))return!1}if("MultiPolygon"===e.type){var l=tC(e.coordinates,r,o),h=tR(t.geometry(),i,r,o);if(!tA(i,r))return!1;for(var u=0;u<h.length;u+=1)if(!function(t,e){for(var i=0;i<e.length;i++)if(tM(t,e[i]))return!0;return!1}(h[u],l))return!1}return!0}(t,this.geometries)}return!1},tO.prototype.eachChild=function(){},tO.prototype.outputDefined=function(){return!0},tO.prototype.serialize=function(){return["within",this.geojson]};var tF=function(t,e){this.type=e.type,this.name=t,this.boundExpression=e};tF.parse=function(t,e){if(2!==t.length||"string"!=typeof t[1])return e.error("'var' expression requires exactly one string literal argument.");var i=t[1];return e.scope.has(i)?new tF(i,e.scope.get(i)):e.error('Unknown variable "'+i+'". Make sure "'+i+'" has been bound in an enclosing "let" expression before using it.',1)},tF.prototype.evaluate=function(t){return this.boundExpression.evaluate(t)},tF.prototype.eachChild=function(){},tF.prototype.outputDefined=function(){return!1},tF.prototype.serialize=function(){return["var",this.name]};var tD=function(t,e,i,r,o){void 0===e&&(e=[]),void 0===r&&(r=new q),void 0===o&&(o=[]),this.registry=t,this.path=e,this.key=e.map(function(t){return"["+t+"]"}).join(""),this.scope=r,this.errors=o,this.expectedType=i};function tj(t,e){for(var i,r,o=t.length-1,n=0,a=o,s=0;n<=a;)if(i=t[s=Math.floor((n+a)/2)],r=t[s+1],i<=e){if(s===o||e<r)return s;n=s+1}else if(i>e)a=s-1;else throw new td("Input is not a number.");return 0}tD.prototype.parse=function(t,e,i,r,o){return(void 0===o&&(o={}),e)?this.concat(e,i,r)._parse(t,o):this._parse(t,o)},tD.prototype._parse=function(t,e){function i(t,e,i){return"assert"===i?new tg(e,[t]):"coerce"===i?new tv(e,[t]):t}if((null===t||"string"==typeof t||"boolean"==typeof t||"number"==typeof t)&&(t=["literal",t]),Array.isArray(t)){if(0===t.length)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var r=t[0];if("string"!=typeof r)return this.error("Expression name must be a string, but found "+typeof r+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var o=this.registry[r];if(o){var n=o.parse(t,this);if(!n)return null;if(this.expectedType){var a=this.expectedType,s=n.type;if(("string"===a.kind||"number"===a.kind||"boolean"===a.kind||"object"===a.kind||"array"===a.kind)&&"value"===s.kind)n=i(n,a,e.typeAnnotation||"assert");else if(("color"===a.kind||"formatted"===a.kind||"resolvedImage"===a.kind)&&("value"===s.kind||"string"===s.kind))n=i(n,a,e.typeAnnotation||"coerce");else if(this.checkSubtype(a,s))return null}if(!(n instanceof tf)&&"resolvedImage"!==n.type.kind&&function t(e){if(e instanceof tF)return t(e.boundExpression);if(e instanceof t_&&"error"===e.name||e instanceof tS||e instanceof tO)return!1;var i=e instanceof tv||e instanceof tg,r=!0;return e.eachChild(function(e){r=i?r&&t(e):r&&e instanceof tf}),!!r&&tk(e)&&tZ(e,["zoom","heatmap-density","line-progress","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center"])}(n)){var l=new tw;try{n=new tf(n.type,n.evaluate(l))}catch(t){return this.error(t.message),null}}return n}return this.error('Unknown expression "'+r+'". If you wanted a literal array, use ["literal", [...]].',0)}return void 0===t?this.error("'undefined' value invalid. Use null instead."):"object"==typeof t?this.error('Bare objects invalid. Use ["literal", {...}] instead.'):this.error("Expected an array, but found "+typeof t+" instead.")},tD.prototype.concat=function(t,e,i){var r="number"==typeof t?this.path.concat(t):this.path,o=i?this.scope.concat(i):this.scope;return new tD(this.registry,r,e||null,o,this.errors)},tD.prototype.error=function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];var r=""+this.key+e.map(function(t){return"["+t+"]"}).join("");this.errors.push(new j(r,t))},tD.prototype.checkSubtype=function(t,e){var i=te(t,e);return i&&this.error(i),i};var tq=function(t,e,i){this.type=t,this.input=e,this.labels=[],this.outputs=[];for(var r=0;r<i.length;r+=1){var o=i[r],n=o[0],a=o[1];this.labels.push(n),this.outputs.push(a)}};function tU(t,e,i,r){this.cx=3*t,this.bx=3*(i-t)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*e,this.by=3*(r-e)-this.cy,this.ay=1-this.cy-this.by,this.p1x=t,this.p1y=r,this.p2x=i,this.p2y=r}function tB(t,e,i){return t*(1-i)+e*i}tq.parse=function(t,e){if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");var i=e.parse(t[1],1,B);if(!i)return null;var r=[],o=null;e.expectedType&&"value"!==e.expectedType.kind&&(o=e.expectedType);for(var n=1;n<t.length;n+=2){var a=1===n?-1/0:t[n],s=t[n+1],l=n,h=n+1;if("number"!=typeof a)return e.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',l);if(r.length&&r[r.length-1][0]>=a)return e.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',l);var u=e.parse(s,h,o);if(!u)return null;o=o||u.type,r.push([a,u])}return new tq(o,i,r)},tq.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var o=e.length;return r>=e[o-1]?i[o-1].evaluate(t):i[tj(e,r)].evaluate(t)},tq.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},tq.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},tq.prototype.serialize=function(){for(var t=["step",this.input.serialize()],e=0;e<this.labels.length;e++)e>0&&t.push(this.labels[e]),t.push(this.outputs[e].serialize());return t},tU.prototype.sampleCurveX=function(t){return((this.ax*t+this.bx)*t+this.cx)*t},tU.prototype.sampleCurveY=function(t){return((this.ay*t+this.by)*t+this.cy)*t},tU.prototype.sampleCurveDerivativeX=function(t){return(3*this.ax*t+2*this.bx)*t+this.cx},tU.prototype.solveCurveX=function(t,e){for(void 0===e&&(e=1e-6),o=t,a=0;a<8;a++){if(Math.abs(n=this.sampleCurveX(o)-t)<e)return o;var i,r,o,n,a,s=this.sampleCurveDerivativeX(o);if(1e-6>Math.abs(s))break;o-=n/s}if(i=0,r=1,(o=t)<i)return i;if(o>r)return r;for(;i<r&&!(Math.abs((n=this.sampleCurveX(o))-t)<e);)t>n?i=o:r=o,o=(r-i)*.5+i;return o},tU.prototype.solve=function(t,e){return this.sampleCurveY(this.solveCurveX(t,e))};var tz=Object.freeze({__proto__:null,number:tB,color:function(t,e,i){return new L(tB(t.r,e.r,i),tB(t.g,e.g,i),tB(t.b,e.b,i),tB(t.a,e.a,i))},array:function(t,e,i){return t.map(function(t,r){return tB(t,e[r],i)})}}),tH=4/29,tV=6/29,tY=6/29*3*(6/29),tW=6/29*(6/29)*(6/29),tX=Math.PI/180,tK=180/Math.PI;function tJ(t){return t>tW?Math.pow(t,1/3):t/tY+tH}function t$(t){return t>tV?t*t*t:tY*(t-tH)}function tQ(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function t0(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function t1(t){var e=t0(t.r),i=t0(t.g),r=t0(t.b),o=tJ((.4124564*e+.3575761*i+.1804375*r)/.95047),n=tJ((.2126729*e+.7151522*i+.072175*r)/1);return{l:116*n-16,a:500*(o-n),b:200*(n-tJ((.0193339*e+.119192*i+.9503041*r)/1.08883)),alpha:t.a}}function t2(t){var e=(t.l+16)/116,i=isNaN(t.a)?e:e+t.a/500,r=isNaN(t.b)?e:e-t.b/200;return e=1*t$(e),new L(tQ(3.2404542*(i=.95047*t$(i))-1.5371385*e-.4985314*(r=1.08883*t$(r))),tQ(-.969266*i+1.8760108*e+.041556*r),tQ(.0556434*i-.2040259*e+1.0572252*r),t.alpha)}var t5={forward:t1,reverse:t2,interpolate:function(t,e,i){return{l:tB(t.l,e.l,i),a:tB(t.a,e.a,i),b:tB(t.b,e.b,i),alpha:tB(t.alpha,e.alpha,i)}}},t4={forward:function(t){var e=t1(t),i=e.l,r=e.a,o=e.b,n=Math.atan2(o,r)*tK;return{h:n<0?n+360:n,c:Math.sqrt(r*r+o*o),l:i,alpha:t.a}},reverse:function(t){var e=t.h*tX,i=t.c;return t2({l:t.l,a:Math.cos(e)*i,b:Math.sin(e)*i,alpha:t.alpha})},interpolate:function(t,e,i){var r,o;return{h:(r=t.h,o=e.h-r,r+i*(o>180||o<-180?o-360*Math.round(o/360):o)),c:tB(t.c,e.c,i),l:tB(t.l,e.l,i),alpha:tB(t.alpha,e.alpha,i)}}},t6=function(t,e,i,r,o){this.type=t,this.operator=e,this.interpolation=i,this.input=r,this.labels=[],this.outputs=[];for(var n=0;n<o.length;n+=1){var a=o[n],s=a[0],l=a[1];this.labels.push(s),this.outputs.push(l)}};function t3(t,e,i,r){var o=r-i,n=t-i;return 0===o?0:1===e?n/o:(Math.pow(e,n)-1)/(Math.pow(e,o)-1)}t6.interpolationFactor=function(t,e,i,r){var o=0;if("exponential"===t.name)o=t3(e,t.base,i,r);else if("linear"===t.name)o=t3(e,1,i,r);else if("cubic-bezier"===t.name){var n=t.controlPoints;o=new tU(n[0],n[1],n[2],n[3]).solve(t3(e,1,i,r))}return o},t6.parse=function(t,e){var i=t[0],r=t[1],o=t[2],n=t.slice(3);if(!Array.isArray(r)||0===r.length)return e.error("Expected an interpolation type expression.",1);if("linear"===r[0])r={name:"linear"};else if("exponential"===r[0]){var a=r[1];if("number"!=typeof a)return e.error("Exponential interpolation requires a numeric base.",1,1);r={name:"exponential",base:a}}else{if("cubic-bezier"!==r[0])return e.error("Unknown interpolation type "+String(r[0]),1,0);var s=r.slice(1);if(4!==s.length||s.some(function(t){return"number"!=typeof t||t<0||t>1}))return e.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);r={name:"cubic-bezier",controlPoints:s}}if(t.length-1<4)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if((t.length-1)%2!=0)return e.error("Expected an even number of arguments.");if(!(o=e.parse(o,2,B)))return null;var l=[],h=null;"interpolate-hcl"===i||"interpolate-lab"===i?h=V:e.expectedType&&"value"!==e.expectedType.kind&&(h=e.expectedType);for(var u=0;u<n.length;u+=2){var c=n[u],f=n[u+1],d=u+3,p=u+4;if("number"!=typeof c)return e.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',d);if(l.length&&l[l.length-1][0]>=c)return e.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',d);var g=e.parse(f,p,h);if(!g)return null;h=h||g.type,l.push([c,g])}return"number"===h.kind||"color"===h.kind||"array"===h.kind&&"number"===h.itemType.kind&&"number"==typeof h.N?new t6(h,i,r,o,l):e.error("Type "+Q(h)+" is not interpolatable.")},t6.prototype.evaluate=function(t){var e=this.labels,i=this.outputs;if(1===e.length)return i[0].evaluate(t);var r=this.input.evaluate(t);if(r<=e[0])return i[0].evaluate(t);var o=e.length;if(r>=e[o-1])return i[o-1].evaluate(t);var n=tj(e,r),a=e[n],s=e[n+1],l=t6.interpolationFactor(this.interpolation,r,a,s),h=i[n].evaluate(t),u=i[n+1].evaluate(t);return"interpolate"===this.operator?tz[this.type.kind.toLowerCase()](h,u,l):"interpolate-hcl"===this.operator?t4.reverse(t4.interpolate(t4.forward(h),t4.forward(u),l)):t5.reverse(t5.interpolate(t5.forward(h),t5.forward(u),l))},t6.prototype.eachChild=function(t){t(this.input);for(var e=0,i=this.outputs;e<i.length;e+=1)t(i[e])},t6.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})},t6.prototype.serialize=function(){t="linear"===this.interpolation.name?["linear"]:"exponential"===this.interpolation.name?1===this.interpolation.base?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var t,e=[this.operator,t,this.input.serialize()],i=0;i<this.labels.length;i++)e.push(this.labels[i],this.outputs[i].serialize());return e};var t8=function(t,e){this.type=t,this.args=e};t8.parse=function(t,e){if(t.length<2)return e.error("Expectected at least one argument.");var i=null,r=e.expectedType;r&&"value"!==r.kind&&(i=r);for(var o=[],n=0,a=t.slice(1);n<a.length;n+=1){var s=a[n],l=e.parse(s,1+o.length,i,void 0,{typeAnnotation:"omit"});if(!l)return null;i=i||l.type,o.push(l)}return r&&o.some(function(t){return te(r,t.type)})?new t8(W,o):new t8(i,o)},t8.prototype.evaluate=function(t){for(var e,i=null,r=0,o=0,n=this.args;o<n.length;o+=1){var a=n[o];if(r++,(i=a.evaluate(t))&&i instanceof ts&&!i.available&&(e||(e=i),i=null,r===this.args.length))return e;if(null!==i)break}return i},t8.prototype.eachChild=function(t){this.args.forEach(t)},t8.prototype.outputDefined=function(){return this.args.every(function(t){return t.outputDefined()})},t8.prototype.serialize=function(){var t=["coalesce"];return this.eachChild(function(e){t.push(e.serialize())}),t};var t7=function(t,e){this.type=e.type,this.bindings=[].concat(t),this.result=e};t7.prototype.evaluate=function(t){return this.result.evaluate(t)},t7.prototype.eachChild=function(t){for(var e=0,i=this.bindings;e<i.length;e+=1)t(i[e][1]);t(this.result)},t7.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found "+(t.length-1)+" instead.");for(var i=[],r=1;r<t.length-1;r+=2){var o=t[r];if("string"!=typeof o)return e.error("Expected string, but found "+typeof o+" instead.",r);if(/[^a-zA-Z0-9_]/.test(o))return e.error("Variable names must contain only alphanumeric characters or '_'.",r);var n=e.parse(t[r+1],r+1);if(!n)return null;i.push([o,n])}var a=e.parse(t[t.length-1],t.length-1,e.expectedType,i);return a?new t7(i,a):null},t7.prototype.outputDefined=function(){return this.result.outputDefined()},t7.prototype.serialize=function(){for(var t=["let"],e=0,i=this.bindings;e<i.length;e+=1){var r=i[e],o=r[0],n=r[1];t.push(o,n.serialize())}return t.push(this.result.serialize()),t};var t9=function(t,e,i){this.type=t,this.index=e,this.input=i};t9.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,B),r=e.parse(t[2],2,$(e.expectedType||W));return i&&r?new t9(r.type.itemType,i,r):null},t9.prototype.evaluate=function(t){var e=this.index.evaluate(t),i=this.input.evaluate(t);if(e<0)throw new td("Array index out of bounds: "+e+" < 0.");if(e>=i.length)throw new td("Array index out of bounds: "+e+" > "+(i.length-1)+".");if(e!==Math.floor(e))throw new td("Array index must be an integer, but found "+e+" instead.");return i[e]},t9.prototype.eachChild=function(t){t(this.index),t(this.input)},t9.prototype.outputDefined=function(){return!1},t9.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var et=function(t,e){this.type=H,this.needle=t,this.haystack=e};et.parse=function(t,e){if(3!==t.length)return e.error("Expected 2 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,W),r=e.parse(t[2],2,W);return i&&r?ti(i.type,[H,z,B,U,W])?new et(i,r):e.error("Expected first argument to be of type boolean, string, number or null, but found "+Q(i.type)+" instead"):null},et.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(null==i)return!1;if(!tr(e,["boolean","string","number","null"]))throw new td("Expected first argument to be of type boolean, string, number or null, but found "+Q(tu(e))+" instead.");if(!tr(i,["string","array"]))throw new td("Expected second argument to be of type array or string, but found "+Q(tu(i))+" instead.");return i.indexOf(e)>=0},et.prototype.eachChild=function(t){t(this.needle),t(this.haystack)},et.prototype.outputDefined=function(){return!0},et.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var ee=function(t,e,i){this.type=B,this.needle=t,this.haystack=e,this.fromIndex=i};ee.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,W),r=e.parse(t[2],2,W);if(!i||!r)return null;if(!ti(i.type,[H,z,B,U,W]))return e.error("Expected first argument to be of type boolean, string, number or null, but found "+Q(i.type)+" instead");if(4!==t.length)return new ee(i,r);var o=e.parse(t[3],3,B);return o?new ee(i,r,o):null},ee.prototype.evaluate=function(t){var e=this.needle.evaluate(t),i=this.haystack.evaluate(t);if(!tr(e,["boolean","string","number","null"]))throw new td("Expected first argument to be of type boolean, string, number or null, but found "+Q(tu(e))+" instead.");if(!tr(i,["string","array"]))throw new td("Expected second argument to be of type array or string, but found "+Q(tu(i))+" instead.");if(this.fromIndex){var r=this.fromIndex.evaluate(t);return i.indexOf(e,r)}return i.indexOf(e)},ee.prototype.eachChild=function(t){t(this.needle),t(this.haystack),this.fromIndex&&t(this.fromIndex)},ee.prototype.outputDefined=function(){return!1},ee.prototype.serialize=function(){if(null!=this.fromIndex&&void 0!==this.fromIndex){var t=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),t]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var ei=function(t,e,i,r,o,n){this.inputType=t,this.type=e,this.input=i,this.cases=r,this.outputs=o,this.otherwise=n};ei.parse=function(t,e){if(t.length<5)return e.error("Expected at least 4 arguments, but found only "+(t.length-1)+".");if(t.length%2!=1)return e.error("Expected an even number of arguments.");e.expectedType&&"value"!==e.expectedType.kind&&(r=e.expectedType);for(var i,r,o={},n=[],a=2;a<t.length-1;a+=2){var s=t[a],l=t[a+1];Array.isArray(s)||(s=[s]);var h=e.concat(a);if(0===s.length)return h.error("Expected at least one branch label.");for(var u=0,c=s;u<c.length;u+=1){var f=c[u];if("number"!=typeof f&&"string"!=typeof f)return h.error("Branch labels must be numbers or strings.");if("number"==typeof f&&Math.abs(f)>Number.MAX_SAFE_INTEGER)return h.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if("number"==typeof f&&Math.floor(f)!==f)return h.error("Numeric branch labels must be integer values.");if(i){if(h.checkSubtype(i,tu(f)))return null}else i=tu(f);if(void 0!==o[String(f)])return h.error("Branch labels must be unique.");o[String(f)]=n.length}var d=e.parse(l,a,r);if(!d)return null;r=r||d.type,n.push(d)}var p=e.parse(t[1],1,W);if(!p)return null;var g=e.parse(t[t.length-1],t.length-1,r);return!g||"value"!==p.type.kind&&e.concat(1).checkSubtype(i,p.type)?null:new ei(i,r,p,o,n,g)},ei.prototype.evaluate=function(t){var e=this.input.evaluate(t);return(tu(e)===this.inputType&&this.outputs[this.cases[e]]||this.otherwise).evaluate(t)},ei.prototype.eachChild=function(t){t(this.input),this.outputs.forEach(t),t(this.otherwise)},ei.prototype.outputDefined=function(){return this.outputs.every(function(t){return t.outputDefined()})&&this.otherwise.outputDefined()},ei.prototype.serialize=function(){for(var t=this,e=["match",this.input.serialize()],i=Object.keys(this.cases).sort(),r=[],o={},n=0;n<i.length;n+=1){var a=i[n],s=o[this.cases[a]];void 0===s?(o[this.cases[a]]=r.length,r.push([this.cases[a],[a]])):r[s][1].push(a)}for(var l=function(e){return"number"===t.inputType.kind?Number(e):e},h=0;h<r.length;h+=1){var u=r[h],s=u[0],c=u[1];1===c.length?e.push(l(c[0])):e.push(c.map(l)),e.push(this.outputs[outputIndex$1].serialize())}return e.push(this.otherwise.serialize()),e};var er=function(t,e,i){this.type=t,this.branches=e,this.otherwise=i};er.parse=function(t,e){if(t.length<4)return e.error("Expected at least 3 arguments, but found only "+(t.length-1)+".");if(t.length%2!=0)return e.error("Expected an odd number of arguments.");e.expectedType&&"value"!==e.expectedType.kind&&(i=e.expectedType);for(var i,r=[],o=1;o<t.length-1;o+=2){var n=e.parse(t[o],o,H);if(!n)return null;var a=e.parse(t[o+1],o+1,i);if(!a)return null;r.push([n,a]),i=i||a.type}var s=e.parse(t[t.length-1],t.length-1,i);return s?new er(i,r,s):null},er.prototype.evaluate=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],o=r[0],n=r[1];if(o.evaluate(t))return n.evaluate(t)}return this.otherwise.evaluate(t)},er.prototype.eachChild=function(t){for(var e=0,i=this.branches;e<i.length;e+=1){var r=i[e],o=r[0],n=r[1];t(o),t(n)}t(this.otherwise)},er.prototype.outputDefined=function(){return this.branches.every(function(t){return t[0],t[1].outputDefined()})&&this.otherwise.outputDefined()},er.prototype.serialize=function(){var t=["case"];return this.eachChild(function(e){t.push(e.serialize())}),t};var eo=function(t,e,i,r){this.type=t,this.input=e,this.beginIndex=i,this.endIndex=r};function en(t,e){return"=="===t||"!="===t?"boolean"===e.kind||"string"===e.kind||"number"===e.kind||"null"===e.kind||"value"===e.kind:"string"===e.kind||"number"===e.kind||"value"===e.kind}function ea(t,e,i,r){return 0===r.compare(e,i)}function es(t,e,i){var r="=="!==t&&"!="!==t;return function(){function o(t,e,i){this.type=H,this.lhs=t,this.rhs=e,this.collator=i,this.hasUntypedArgument="value"===t.type.kind||"value"===e.type.kind}return o.parse=function(t,e){if(3!==t.length&&4!==t.length)return e.error("Expected two or three arguments.");var i=t[0],n=e.parse(t[1],1,W);if(!n)return null;if(!en(i,n.type))return e.concat(1).error('"'+i+"\" comparisons are not supported for type '"+Q(n.type)+"'.");var a=e.parse(t[2],2,W);if(!a)return null;if(!en(i,a.type))return e.concat(2).error('"'+i+"\" comparisons are not supported for type '"+Q(a.type)+"'.");if(n.type.kind!==a.type.kind&&"value"!==n.type.kind&&"value"!==a.type.kind)return e.error("Cannot compare types '"+Q(n.type)+"' and '"+Q(a.type)+"'.");r&&("value"===n.type.kind&&"value"!==a.type.kind?n=new tg(a.type,[n]):"value"!==n.type.kind&&"value"===a.type.kind&&(a=new tg(n.type,[a])));var s=null;if(4===t.length){if("string"!==n.type.kind&&"string"!==a.type.kind&&"value"!==n.type.kind&&"value"!==a.type.kind)return e.error("Cannot use collator to compare non-string types.");if(!(s=e.parse(t[3],3,X)))return null}return new o(n,a,s)},o.prototype.evaluate=function(o){var n=this.lhs.evaluate(o),a=this.rhs.evaluate(o);if(r&&this.hasUntypedArgument){var s=tu(n),l=tu(a);if(s.kind!==l.kind||!("string"===s.kind||"number"===s.kind))throw new td('Expected arguments for "'+t+'" to be (string, string) or (number, number), but found ('+s.kind+", "+l.kind+") instead.")}if(this.collator&&!r&&this.hasUntypedArgument){var h=tu(n),u=tu(a);if("string"!==h.kind||"string"!==u.kind)return e(o,n,a)}return this.collator?i(o,n,a,this.collator.evaluate(o)):e(o,n,a)},o.prototype.eachChild=function(t){t(this.lhs),t(this.rhs),this.collator&&t(this.collator)},o.prototype.outputDefined=function(){return!0},o.prototype.serialize=function(){var e=[t];return this.eachChild(function(t){e.push(t.serialize())}),e},o}()}eo.parse=function(t,e){if(t.length<=2||t.length>=5)return e.error("Expected 3 or 4 arguments, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1,W),r=e.parse(t[2],2,B);if(!i||!r)return null;if(!ti(i.type,[$(W),z,W]))return e.error("Expected first argument to be of type array or string, but found "+Q(i.type)+" instead");if(4!==t.length)return new eo(i.type,i,r);var o=e.parse(t[3],3,B);return o?new eo(i.type,i,r,o):null},eo.prototype.evaluate=function(t){var e=this.input.evaluate(t),i=this.beginIndex.evaluate(t);if(!tr(e,["string","array"]))throw new td("Expected first argument to be of type array or string, but found "+Q(tu(e))+" instead.");if(this.endIndex){var r=this.endIndex.evaluate(t);return e.slice(i,r)}return e.slice(i)},eo.prototype.eachChild=function(t){t(this.input),t(this.beginIndex),this.endIndex&&t(this.endIndex)},eo.prototype.outputDefined=function(){return!1},eo.prototype.serialize=function(){if(null!=this.endIndex&&void 0!==this.endIndex){var t=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),t]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var el=es("==",function(t,e,i){return e===i},ea),eh=es("!=",function(t,e,i){return e!==i},function(t,e,i,r){return!ea(t,e,i,r)}),eu=es("<",function(t,e,i){return e<i},function(t,e,i,r){return 0>r.compare(e,i)}),ec=es(">",function(t,e,i){return e>i},function(t,e,i,r){return r.compare(e,i)>0}),ef=es("<=",function(t,e,i){return e<=i},function(t,e,i,r){return 0>=r.compare(e,i)}),ed=es(">=",function(t,e,i){return e>=i},function(t,e,i,r){return r.compare(e,i)>=0}),ep=function(t,e,i,r,o){this.type=z,this.number=t,this.locale=e,this.currency=i,this.minFractionDigits=r,this.maxFractionDigits=o};ep.parse=function(t,e){if(3!==t.length)return e.error("Expected two arguments.");var i=e.parse(t[1],1,B);if(!i)return null;var r=t[2];if("object"!=typeof r||Array.isArray(r))return e.error("NumberFormat options argument must be an object.");var o=null;if(r.locale&&!(o=e.parse(r.locale,1,z)))return null;var n=null;if(r.currency&&!(n=e.parse(r.currency,1,z)))return null;var a=null;if(r["min-fraction-digits"]&&!(a=e.parse(r["min-fraction-digits"],1,B)))return null;var s=null;return!r["max-fraction-digits"]||(s=e.parse(r["max-fraction-digits"],1,B))?new ep(i,o,n,a,s):null},ep.prototype.evaluate=function(t){return new Intl.NumberFormat(this.locale?this.locale.evaluate(t):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(t):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(t):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(t):void 0}).format(this.number.evaluate(t))},ep.prototype.eachChild=function(t){t(this.number),this.locale&&t(this.locale),this.currency&&t(this.currency),this.minFractionDigits&&t(this.minFractionDigits),this.maxFractionDigits&&t(this.maxFractionDigits)},ep.prototype.outputDefined=function(){return!1},ep.prototype.serialize=function(){var t={};return this.locale&&(t.locale=this.locale.serialize()),this.currency&&(t.currency=this.currency.serialize()),this.minFractionDigits&&(t["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(t["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),t]};var eg=function(t){this.type=B,this.input=t};eg.parse=function(t,e){if(2!==t.length)return e.error("Expected 1 argument, but found "+(t.length-1)+" instead.");var i=e.parse(t[1],1);return i?"array"!==i.type.kind&&"string"!==i.type.kind&&"value"!==i.type.kind?e.error("Expected argument of type string or array, but found "+Q(i.type)+" instead."):new eg(i):null},eg.prototype.evaluate=function(t){var e=this.input.evaluate(t);if("string"==typeof e||Array.isArray(e))return e.length;throw new td("Expected value to be of type string or array, but found "+Q(tu(e))+" instead.")},eg.prototype.eachChild=function(t){t(this.input)},eg.prototype.outputDefined=function(){return!1},eg.prototype.serialize=function(){var t=["length"];return this.eachChild(function(e){t.push(e.serialize())}),t};var em={"==":el,"!=":eh,">":ec,"<":eu,">=":ed,"<=":ef,array:tg,at:t9,boolean:tg,case:er,coalesce:t8,collator:tS,format:tm,image:ty,in:et,"index-of":ee,interpolate:t6,"interpolate-hcl":t6,"interpolate-lab":t6,length:eg,let:t7,literal:tf,match:ei,number:tg,"number-format":ep,object:tg,slice:eo,step:tq,string:tg,"to-boolean":tv,"to-color":tv,"to-number":tv,"to-string":tv,var:tF,within:tO};function ey(t,e){var i=e[0],r=e[1],o=e[2],n=e[3];i=i.evaluate(t),r=r.evaluate(t),o=o.evaluate(t);var a=n?n.evaluate(t):1,s=tl(i,r,o,a);if(s)throw new td(s);return new L(i/255*a,r/255*a,o/255*a,a)}function ex(t,e){var i=e[t];return void 0===i?null:i}function ev(t){return{type:t}}function eb(t){return{result:"success",value:t}}function ew(t){return{result:"error",value:t}}function e_(t){return"object"==typeof t&&null!==t&&!Array.isArray(t)}t_.register(em,{error:[{kind:"error"},[z],function(t,e){throw new td(e[0].evaluate(t))}],typeof:[z,[W],function(t,e){return Q(tu(e[0].evaluate(t)))}],"to-rgba":[$(B,4),[V],function(t,e){return e[0].evaluate(t).toArray()}],rgb:[V,[B,B,B],ey],rgba:[V,[B,B,B,B],ey],has:{type:H,overloads:[[[z],function(t,e){return e[0].evaluate(t) in t.properties()}],[[z,Y],function(t,e){var i=e[0],r=e[1];return i.evaluate(t) in r.evaluate(t)}]]},get:{type:W,overloads:[[[z],function(t,e){return ex(e[0].evaluate(t),t.properties())}],[[z,Y],function(t,e){var i=e[0],r=e[1];return ex(i.evaluate(t),r.evaluate(t))}]]},"feature-state":[W,[z],function(t,e){return ex(e[0].evaluate(t),t.featureState||{})}],properties:[Y,[],function(t){return t.properties()}],"geometry-type":[z,[],function(t){return t.geometryType()}],id:[W,[],function(t){return t.id()}],zoom:[B,[],function(t){return t.globals.zoom}],pitch:[B,[],function(t){return t.globals.pitch||0}],"distance-from-center":[B,[],function(t){return t.distanceFromCenter()}],"heatmap-density":[B,[],function(t){return t.globals.heatmapDensity||0}],"line-progress":[B,[],function(t){return t.globals.lineProgress||0}],"sky-radial-progress":[B,[],function(t){return t.globals.skyRadialProgress||0}],accumulated:[W,[],function(t){return void 0===t.globals.accumulated?null:t.globals.accumulated}],"+":[B,ev(B),function(t,e){for(var i=0,r=0;r<e.length;r+=1)i+=e[r].evaluate(t);return i}],"*":[B,ev(B),function(t,e){for(var i=1,r=0;r<e.length;r+=1)i*=e[r].evaluate(t);return i}],"-":{type:B,overloads:[[[B,B],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)-r.evaluate(t)}],[[B],function(t,e){return-e[0].evaluate(t)}]]},"/":[B,[B,B],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)/r.evaluate(t)}],"%":[B,[B,B],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)%r.evaluate(t)}],ln2:[B,[],function(){return Math.LN2}],pi:[B,[],function(){return Math.PI}],e:[B,[],function(){return Math.E}],"^":[B,[B,B],function(t,e){var i=e[0],r=e[1];return Math.pow(i.evaluate(t),r.evaluate(t))}],sqrt:[B,[B],function(t,e){return Math.sqrt(e[0].evaluate(t))}],log10:[B,[B],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN10}],ln:[B,[B],function(t,e){return Math.log(e[0].evaluate(t))}],log2:[B,[B],function(t,e){return Math.log(e[0].evaluate(t))/Math.LN2}],sin:[B,[B],function(t,e){return Math.sin(e[0].evaluate(t))}],cos:[B,[B],function(t,e){return Math.cos(e[0].evaluate(t))}],tan:[B,[B],function(t,e){return Math.tan(e[0].evaluate(t))}],asin:[B,[B],function(t,e){return Math.asin(e[0].evaluate(t))}],acos:[B,[B],function(t,e){return Math.acos(e[0].evaluate(t))}],atan:[B,[B],function(t,e){return Math.atan(e[0].evaluate(t))}],min:[B,ev(B),function(t,e){return Math.min.apply(Math,e.map(function(e){return e.evaluate(t)}))}],max:[B,ev(B),function(t,e){return Math.max.apply(Math,e.map(function(e){return e.evaluate(t)}))}],abs:[B,[B],function(t,e){return Math.abs(e[0].evaluate(t))}],round:[B,[B],function(t,e){var i=e[0].evaluate(t);return i<0?-Math.round(-i):Math.round(i)}],floor:[B,[B],function(t,e){return Math.floor(e[0].evaluate(t))}],ceil:[B,[B],function(t,e){return Math.ceil(e[0].evaluate(t))}],"filter-==":[H,[z,W],function(t,e){var i=e[0],r=e[1];return t.properties()[i.value]===r.value}],"filter-id-==":[H,[W],function(t,e){var i=e[0];return t.id()===i.value}],"filter-type-==":[H,[z],function(t,e){var i=e[0];return t.geometryType()===i.value}],"filter-<":[H,[z,W],function(t,e){var i=e[0],r=e[1],o=t.properties()[i.value],n=r.value;return typeof o==typeof n&&o<n}],"filter-id-<":[H,[W],function(t,e){var i=e[0],r=t.id(),o=i.value;return typeof r==typeof o&&r<o}],"filter->":[H,[z,W],function(t,e){var i=e[0],r=e[1],o=t.properties()[i.value],n=r.value;return typeof o==typeof n&&o>n}],"filter-id->":[H,[W],function(t,e){var i=e[0],r=t.id(),o=i.value;return typeof r==typeof o&&r>o}],"filter-<=":[H,[z,W],function(t,e){var i=e[0],r=e[1],o=t.properties()[i.value],n=r.value;return typeof o==typeof n&&o<=n}],"filter-id-<=":[H,[W],function(t,e){var i=e[0],r=t.id(),o=i.value;return typeof r==typeof o&&r<=o}],"filter->=":[H,[z,W],function(t,e){var i=e[0],r=e[1],o=t.properties()[i.value],n=r.value;return typeof o==typeof n&&o>=n}],"filter-id->=":[H,[W],function(t,e){var i=e[0],r=t.id(),o=i.value;return typeof r==typeof o&&r>=o}],"filter-has":[H,[W],function(t,e){return e[0].value in t.properties()}],"filter-has-id":[H,[],function(t){return null!==t.id()&&void 0!==t.id()}],"filter-type-in":[H,[$(z)],function(t,e){return e[0].value.indexOf(t.geometryType())>=0}],"filter-id-in":[H,[$(W)],function(t,e){return e[0].value.indexOf(t.id())>=0}],"filter-in-small":[H,[z,$(W)],function(t,e){var i=e[0];return e[1].value.indexOf(t.properties()[i.value])>=0}],"filter-in-large":[H,[z,$(W)],function(t,e){var i=e[0],r=e[1];return function(t,e,i,r){for(;i<=r;){var o=i+r>>1;if(e[o]===t)return!0;e[o]>t?r=o-1:i=o+1}return!1}(t.properties()[i.value],r.value,0,r.value.length-1)}],all:{type:H,overloads:[[[H,H],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)&&r.evaluate(t)}],[ev(H),function(t,e){for(var i=0;i<e.length;i+=1)if(!e[i].evaluate(t))return!1;return!0}]]},any:{type:H,overloads:[[[H,H],function(t,e){var i=e[0],r=e[1];return i.evaluate(t)||r.evaluate(t)}],[ev(H),function(t,e){for(var i=0;i<e.length;i+=1)if(e[i].evaluate(t))return!0;return!1}]]},"!":[H,[H],function(t,e){return!e[0].evaluate(t)}],"is-supported-script":[H,[z],function(t,e){var i=e[0],r=t.globals&&t.globals.isSupportedScript;return!r||r(i.evaluate(t))}],upcase:[z,[z],function(t,e){return e[0].evaluate(t).toUpperCase()}],downcase:[z,[z],function(t,e){return e[0].evaluate(t).toLowerCase()}],concat:[z,ev(W),function(t,e){return e.map(function(e){return tc(e.evaluate(t))}).join("")}],"resolved-locale":[z,[X],function(t,e){return e[0].evaluate(t).resolvedLocale()}]});var eS=function(t,e){this.expression=t,this._warningHistory={},this._evaluator=new tw,this._defaultValue=e?"color"===e.type&&(e_(e.default)||Array.isArray(e.default))?new L(0,0,0,0):"color"===e.type?L.parse(e.default)||null:void 0===e.default?null:e.default:null,this._enumValues=e&&"enum"===e.type?e.values:null};function eE(t,e){var i,r=new tD(em,[],e?(i={color:V,string:z,number:B,enum:z,boolean:H,formatted:K,resolvedImage:J},"array"===e.type?$(i[e.value]||W,e.length):i[e.type]):void 0),o=r.parse(t,void 0,void 0,void 0,e&&"string"===e.type?{typeAnnotation:"coerce"}:void 0);return o?eb(new eS(o,e)):ew(r.errors)}eS.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,o,n,a,s){return this._evaluator.globals=t,this._evaluator.feature=e,this._evaluator.featureState=i,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=n,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null,this.expression.evaluate(this._evaluator)},eS.prototype.evaluate=function(t,e,i,r,o,n,a,s){this._evaluator.globals=t,this._evaluator.feature=e||null,this._evaluator.featureState=i||null,this._evaluator.canonical=r||null,this._evaluator.availableImages=o||null,this._evaluator.formattedSection=n||null,this._evaluator.featureTileCoord=a||null,this._evaluator.featureDistanceData=s||null;try{var l=this.expression.evaluate(this._evaluator);if(null==l||"number"==typeof l&&l!=l)return this._defaultValue;if(this._enumValues&&!(l in this._enumValues))throw new td("Expected value to be one of "+Object.keys(this._enumValues).map(function(t){return JSON.stringify(t)}).join(", ")+", but found "+JSON.stringify(l)+" instead.");return l}catch(t){return this._warningHistory[t.message]||(this._warningHistory[t.message]=!0,"undefined"!=typeof console&&console.warn(t.message)),this._defaultValue}};var eA=function(t,e){this.kind=t,this._styleExpression=e,this.isStateDependent="constant"!==t&&!tG(e.expression)};eA.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,o,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,o,n)},eA.prototype.evaluate=function(t,e,i,r,o,n){return this._styleExpression.evaluate(t,e,i,r,o,n)};var eN=function(t,e,i,r){this.kind=t,this.zoomStops=i,this._styleExpression=e,this.isStateDependent="camera"!==t&&!tG(e.expression),this.interpolationType=r};eN.prototype.evaluateWithoutErrorHandling=function(t,e,i,r,o,n){return this._styleExpression.evaluateWithoutErrorHandling(t,e,i,r,o,n)},eN.prototype.evaluate=function(t,e,i,r,o,n){return this._styleExpression.evaluate(t,e,i,r,o,n)},eN.prototype.interpolationFactor=function(t,e,i){return this.interpolationType?t6.interpolationFactor(this.interpolationType,t,e,i):0};var eI={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},terrain:{type:"terrain"},fog:{type:"fog"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},projection:{type:"projection"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{},sky:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background","layout_sky"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_sky:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_symbol:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature","pitch","distance-from-center"]}},filter_fill:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_line:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_circle:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},"filter_fill-extrusion":{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_heatmap:{type:"boolean",default:!1,transition:!1,"property-type":"data-driven",expression:{interpolated:!1,parameters:["zoom","feature"]}},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},expression_name:{type:"enum",values:{let:{group:"Variable binding"},var:{group:"Variable binding"},literal:{group:"Types"},array:{group:"Types"},at:{group:"Lookup"},in:{group:"Lookup"},"index-of":{group:"Lookup"},slice:{group:"Lookup"},case:{group:"Decision"},match:{group:"Decision"},coalesce:{group:"Decision"},step:{group:"Ramps, scales, curves"},interpolate:{group:"Ramps, scales, curves"},"interpolate-hcl":{group:"Ramps, scales, curves"},"interpolate-lab":{group:"Ramps, scales, curves"},ln2:{group:"Math"},pi:{group:"Math"},e:{group:"Math"},typeof:{group:"Types"},string:{group:"Types"},number:{group:"Types"},boolean:{group:"Types"},object:{group:"Types"},collator:{group:"Types"},format:{group:"Types"},image:{group:"Types"},"number-format":{group:"Types"},"to-string":{group:"Types"},"to-number":{group:"Types"},"to-boolean":{group:"Types"},"to-rgba":{group:"Color"},"to-color":{group:"Types"},rgb:{group:"Color"},rgba:{group:"Color"},get:{group:"Lookup"},has:{group:"Lookup"},length:{group:"Lookup"},properties:{group:"Feature data"},"feature-state":{group:"Feature data"},"geometry-type":{group:"Feature data"},id:{group:"Feature data"},zoom:{group:"Camera"},pitch:{group:"Camera"},"distance-from-center":{group:"Camera"},"heatmap-density":{group:"Heatmap"},"line-progress":{group:"Feature data"},"sky-radial-progress":{group:"sky"},accumulated:{group:"Feature data"},"+":{group:"Math"},"*":{group:"Math"},"-":{group:"Math"},"/":{group:"Math"},"%":{group:"Math"},"^":{group:"Math"},sqrt:{group:"Math"},log10:{group:"Math"},ln:{group:"Math"},log2:{group:"Math"},sin:{group:"Math"},cos:{group:"Math"},tan:{group:"Math"},asin:{group:"Math"},acos:{group:"Math"},atan:{group:"Math"},min:{group:"Math"},max:{group:"Math"},round:{group:"Math"},abs:{group:"Math"},ceil:{group:"Math"},floor:{group:"Math"},distance:{group:"Math"},"==":{group:"Decision"},"!=":{group:"Decision"},">":{group:"Decision"},"<":{group:"Decision"},">=":{group:"Decision"},"<=":{group:"Decision"},all:{group:"Decision"},any:{group:"Decision"},"!":{group:"Decision"},within:{group:"Decision"},"is-supported-script":{group:"String"},upcase:{group:"String"},downcase:{group:"String"},concat:{group:"String"},"resolved-locale":{group:"String"}}},fog:{range:{type:"array",default:[.5,10],minimum:-20,maximum:20,length:2,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"high-color":{type:"color","property-type":"data-constant",default:"#245cdf",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"space-color":{type:"color","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"horizon-blend":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],4,.2,7,.1],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0},"star-intensity":{type:"number","property-type":"data-constant",default:["interpolate",["linear"],["zoom"],5,.35,6,0],minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},projection:{name:{type:"enum",values:{albers:{},equalEarth:{},equirectangular:{},lambertConformalConic:{},mercator:{},naturalEarth:{},winkelTripel:{},globe:{}},default:"mercator",required:!0},center:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-180,-90],maximum:[180,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]},parallels:{type:"array",length:2,value:"number","property-type":"data-constant",minimum:[-90,-90],maximum:[90,90],transition:!1,requires:[{name:["albers","lambertConformalConic"]}]}},terrain:{source:{type:"string",required:!0},exaggeration:{type:"number","property-type":"data-constant",default:1,minimum:0,maximum:1e3,expression:{interpolated:!0,parameters:["zoom"]},transition:!0,requires:["source"]}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background","paint_sky"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{type:"array",value:"number",length:2,default:[0,0],minimum:[0,0],maximum:[1,1],transition:!1,requires:[{source:"geojson",has:{lineMetrics:!0}}],"property-type":"constant"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_sky:{"sky-type":{type:"enum",values:{gradient:{},atmosphere:{}},default:"atmosphere",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{type:"array",value:"number",length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,requires:[{"sky-type":"atmosphere"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{type:"number",requires:[{"sky-type":"atmosphere"}],default:10,minimum:0,maximum:100,transition:!1,"property-type":"data-constant"},"sky-gradient-center":{type:"array",requires:[{"sky-type":"gradient"}],value:"number",default:[0,0],length:2,units:"degrees",minimum:[0,0],maximum:[360,180],transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{type:"number",requires:[{"sky-type":"gradient"}],default:90,minimum:0,maximum:180,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"sky-gradient":{type:"color",default:["interpolate",["linear"],["sky-radial-progress"],.8,"#87ceeb",1,"white"],transition:!1,requires:[{"sky-type":"gradient"}],expression:{interpolated:!0,parameters:["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-atmosphere-color":{type:"color",default:"white",transition:!1,requires:[{"sky-type":"atmosphere"}],"property-type":"data-constant"},"sky-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}};function eM(t){if(!Array.isArray(t))return!1;if("pitch"===(e=t[0])||"distance-from-center"===e)return!0;for(var e,i=1;i<t.length;i++)if(eM(t[i]))return!0;return!1}var eP=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function eC(t,e){return t<e?-1:t>e?1:0}function eT(t,e,i){switch(t){case"$type":return["filter-type-"+i,e];case"$id":return["filter-id-"+i,e];default:return["filter-"+i,t,e]}}function eL(t,e){if(0===e.length)return!1;switch(t){case"$type":return["filter-type-in",["literal",e]];case"$id":return["filter-id-in",["literal",e]];default:if(e.length>200&&!e.some(function(t){return typeof t!=typeof e[0]}))return["filter-in-large",t,["literal",e.sort(eC)]];return["filter-in-small",t,["literal",e]]}}function eR(t){switch(t){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",t]}}function eO(t){return["!",t]}var ek=["type","source","source-layer","minzoom","maxzoom","filter","layout"],eG={thin:100,hairline:100,"ultra-light":100,"extra-light":100,light:200,book:300,regular:400,normal:400,plain:400,roman:400,standard:400,medium:500,"semi-bold":600,"demi-bold":600,bold:700,heavy:800,black:800,"extra-bold":800,"ultra-black":900,"extra-black":900,"ultra-bold":900,"heavy-black":900,fat:900,poster:900},eZ=/(italic|oblique)$/i,eF={},eD=function(t,e,i){var r=eF[t];if(!r){Array.isArray(t)||(t=[t]);for(var o,n,a=400,s="normal",l=[],h=0,u=t.length;h<u;++h){var c=t[h].split(" "),f=c[c.length-1].toLowerCase();for(var d in"normal"==f||"italic"==f||"oblique"==f?(s=n?s:f,c.pop(),f=c[c.length-1].toLowerCase()):eZ.test(f)&&(f=f.replace(eZ,""),s=n?s:c[c.length-1].replace(f,"")),eG){var p=c.length>1?c[c.length-2].toLowerCase():"";if(f==d||f==d.replace("-","")||p+"-"+f==d){a=o?a:eG[d],c.pop(),p&&d.startsWith(p)&&c.pop();break}}o||"number"!=typeof f||(a=f);var g=c.join(" ").replace("Klokantech Noto Sans","Noto Sans");-1!==g.indexOf(" ")&&(g='"'+g+'"'),l.push(g)}r=eF[t]=[s,a,l]}return r[0]+" "+r[1]+" "+e+"px"+(i?"/"+i:"")+" "+r[2]},ej="https://api.mapbox.com";function eq(t){var e="mapbox://";return 0!==t.indexOf(e)?"":t.slice(e.length)}function eU(t,e){var i=eq(t);if(!i)return decodeURI(new URL(t,location.href).href);var r="styles/";if(0!==i.indexOf(r))throw Error("unexpected style url: "+t);return ej+"/styles/v1/"+i.slice(r.length)+"?&access_token="+e}function eB(t,e,i,r){var o=new URL(t,r),n=eq(t);return n?"https://{a-d}.tiles.mapbox.com/v4/"+n+"/{z}/{x}/{y}.vector.pbf?access_token="+e:(e&&o.searchParams.set(i,e),decodeURI(o.href))}function ez(t){return t*Math.PI/180}var eH=function(){for(var t=[],e=78271.51696402048;t.length<=24;e/=2)t.push(e);return t}();function eV(t,e){if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&"undefined"!=typeof OffscreenCanvas)return new OffscreenCanvas(t,e);var i=document.createElement("canvas");return i.width=t,i.height=e,i}var eY={};function eW(t,e,i){if(void 0===i&&(i={}),e in eY)return eY[e];var r=i.transformRequest&&i.transformRequest(e,t)||new Request(e);r.headers.get("Accept")||r.headers.set("Accept","application/json");var o=fetch(r).then(function(t){return delete eY[e],t.ok?t.json():Promise.reject(Error("Error fetching source "+e))}).catch(function(t){return delete eY[e],Promise.reject(Error("Error fetching source "+e))});return eY[e]=o,o}var eX={},eK=Array(256).join(" ");function eJ(t,e){if(e>=.05){for(var i="",r=t.split("\n"),o=eK.slice(0,Math.round(e/.1)),n=0,a=r.length;n<a;++n)n>0&&(i+="\n"),i+=r[n].split("").join(o);return i}return t}function e$(){return o||(o=eV(1,1).getContext("2d")),o}function eQ(t,e){return e$().measureText(t).width+(t.length-1)*e}var e0={};function e1(t,e,i,r){if(-1!==t.indexOf("\n")){for(var o=t.split("\n"),n=[],a=0,s=o.length;a<s;++a)n.push(e1(o[a],e,i,r));return n.join("\n")}var l=i+","+e+","+t+","+r,h=e0[l];if(!h){var u=t.split(" ");if(u.length>1){var c=e$();c.font=e;for(var f=c.measureText("M").width*i,d="",p=[],g=0,m=u.length;g<m;++g){var y=u[g],x=d+(d?" ":"")+y;eQ(x,r)<=f?d=x:(d&&p.push(d),d=y)}d&&p.push(d);for(var v=0,b=p.length;v<b&&b>1;++v){var w=p[v];if(eQ(w,r)<.35*f){var _=v>0?eQ(p[v-1],r):1/0,S=v<b-1?eQ(p[v+1],r):1/0;p.splice(v,1),b-=1,_<S?(p[v-1]+=" "+w,v-=1):p[v]=w+" "+p[v]}}for(var E=0,A=p.length-1;E<A;++E){var N=p[E],I=p[E+1];if(eQ(N,r)>.7*f&&eQ(I,r)<.6*f){var M=N.split(" "),P=M.pop();eQ(P,r)<.2*f&&(p[E]=M.join(" "),p[E+1]=P+" "+I),A-=1}}h=p.join("\n")}else h=t;h=eJ(h,r),e0[l]=h}return h}var e2=/font-family: ?([^;]*);/,e5=/("|')/g,e4={};function e6(t){var e=t.toString();if(e in e4)return e4[e];for(var i=[],r=0,o=t.length;r<o;++r){t[r]=t[r].replace("Arial Unicode MS","Arial");var n=eD(t[r],1);(0,m.registerFont)(n);var s=n.split(" ");i.push([s.slice(3).join(" ").replace(/"/g,""),s[1],s[0]])}for(var l=0,h=i.length;l<h;++l){var u=i[l],c=u[0];if(!function(t){if(!a){a={};for(var e=document.styleSheets,i=0,r=e.length;i<r;++i){var o=e[i];try{var n=o.rules||o.cssRules;if(n)for(var s=0,l=n.length;s<l;++s){var h=n[s];5==h.type&&(a[h.cssText.match(e2)[1].replace(e5,"")]=!0)}}catch(t){}}}return t in a}(c)&&100!==(0,m.checkedFonts).get(u[2]+"\n"+u[1]+" \n"+c)){var f="https://fonts.googleapis.com/css?family="+c.replace(/ /g,"+")+":"+u[1]+u[2];if(!document.querySelector('link[href="'+f+'"]')){var d=document.createElement("link");d.href=f,d.rel="stylesheet",document.head.appendChild(d)}}}return e4[e]=t,t}var e3={Point:1,MultiPoint:1,LineString:2,MultiLineString:2,Polygon:3,MultiPolygon:3},e8={center:[.5,.5],left:[0,.5],right:[1,.5],top:[.5,0],bottom:[.5,1],"top-left":[0,0],"top-right":[1,0],"bottom-left":[0,1],"bottom-right":[1,1]},e7=function(t,e){var i=function(t,e){if("error"===(t=eE(t,e)).result)return t;var i=t.value.expression,r=tk(i);if(!r&&!("data-driven"===e["property-type"]||"cross-faded-data-driven"===e["property-type"]))return ew([new j("","data expressions not supported")]);var o=tZ(i,["zoom","pitch","distance-from-center"]);if(!o&&!(e.expression&&e.expression.parameters.indexOf("zoom")>-1))return ew([new j("","zoom expressions not supported")]);var n=function t(e){var i=null;if(e instanceof t7)i=t(e.result);else if(e instanceof t8)for(var r=0,o=e.args;r<o.length&&!(i=t(o[r]));r+=1);else(e instanceof tq||e instanceof t6)&&e.input instanceof t_&&"zoom"===e.input.name&&(i=e);return i instanceof j||e.eachChild(function(e){var r=t(e);r instanceof j?i=r:!i&&r?i=new j("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):i&&r&&i!==r&&(i=new j("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),i}(i);if(!n&&!o)return ew([new j("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')]);if(n instanceof j)return ew([n]);if(n instanceof t6&&!(e.expression&&e.expression.interpolated))return ew([new j("",'"interpolate" expressions cannot be used with this property')]);if(!n)return eb(r?new eA("constant",t.value):new eA("source",t.value));var a=n instanceof t6?n.interpolation:void 0;return eb(r?new eN("camera",t.value,n.labels,a):new eN("composite",t.value,n.labels,a))}(t,e);if("error"===i.result)throw Error(i.value.map(function(t){return t.key+": "+t.message}).join(", "));return i.value},e9={},it={zoom:0};function ie(t,e,i,r,o,n,a){var s=t.id;n||(n={},console.warn("No functionCache provided to getValue()")),n[s]||(n[s]={});var l=n[s];if(!l[i]){var h,u=(t[e]||e9)[i],c=eI[e+"_"+t.type][i];void 0===u&&(u=c.default);var f=Array.isArray(h=u)&&h.length>0&&"string"==typeof h[0]&&h[0]in em;if(!f&&e_(u)&&(u=function(t,e){var i=t.stops;if(!i)return function(t,e){var i=["get",t.property];if(void 0===t.default)return"string"===e.type?["string",i]:i;if("enum"===e.type)return["match",i,Object.keys(e.values),i,t.default];var r=["color"===e.type?"to-color":e.type,i,R(t.default)];return"array"===e.type&&r.splice(1,0,e.value,e.length||null),r}(t,e);var r=i&&"object"==typeof i[0][0],o=r||void 0!==t.property;return(i=i.map(function(t){return!o&&e.tokens&&"string"==typeof t[1]?[t[0],function(t){for(var e=["concat"],i=/{([^{}]+)}/g,r=0,o=i.exec(t);null!==o;o=i.exec(t)){var n=t.slice(r,i.lastIndex-o[0].length);r=i.lastIndex,n.length>0&&e.push(n),e.push(["get",o[1]])}if(1===e.length)return t;if(r<t.length)e.push(t.slice(r));else if(2===e.length)return["to-string",e[1]];return e}(t[1])]:[t[0],R(t[1])]}),r)?function(t,e,i){for(var r={},o={},n=[],a=0;a<i.length;a++){var s=i[a],l=s[0].zoom;void 0===r[l]&&(r[l]={zoom:l,type:t.type,property:t.property,default:t.default},o[l]=[],n.push(l)),o[l].push([s[0].value,s[1]])}if("exponential"===D({},e)){for(var h=[O(t),["linear"],["zoom"]],u=0;u<n.length;u+=1){var c=n[u],f=G(r[c],e,o[c]);F(h,c,f,!1)}return h}for(var d=["step",["zoom"]],p=0;p<n.length;p+=1){var g=n[p],m=G(r[g],e,o[g]);F(d,g,m,!0)}return Z(d),d}(t,e,i):r||!o?function(t,e,i,r){void 0===r&&(r=["zoom"]);var o,n=D(t,e),a=!1;if("interval"===n)o=["step",r],a=!0;else if("exponential"===n){var s=void 0!==t.base?t.base:1;o=[O(t),1===s?["linear"]:["exponential",s],r]}else throw Error('Unknown zoom function type "'+n+'"');for(var l=0;l<i.length;l+=1){var h=i[l];F(o,h[0],h[1],a)}return Z(o),o}(t,e,i):G(t,e,i)}(u,c),f=!0),f){var d=e7(u,c);l[i]=d.evaluate.bind(d)}else"color"==c.type&&(u=L.parse(u)),l[i]=function(){return u}}return it.zoom=r,l[i](it,o,a)}function ii(t,e){if(t){if(0===t.a||0===e)return;var i=t.a;return e=void 0===e?1:e,0===i?"transparent":"rgba("+Math.round(255*t.r/i)+","+Math.round(255*t.g/i)+","+Math.round(255*t.b/i)+","+i*e+")"}return t}var ir=/\{[^{}}]*\}/g;function io(t,e){return t.replace(ir,function(t){return e[t.slice(1,-1)]||""})}function ia(t,e,i,r,o){var n,a,m,y,N;return void 0===i&&(i=""),void 0===r&&(r={}),void 0===o&&(o=void 0),"string"==typeof r?(n=r,m={}):(n=r.styleUrl,m=r),o||(o=m.resolutions),n||"string"!=typeof e||e.trim().startsWith("{")||(n=e),n&&(y=n=n.startsWith("data:")?location.href:eU(n,m.accessToken),(N=m).accessToken||(N=Object.assign({},N),new URL(y).searchParams.forEach(function(t,e){N.accessToken=t,N.accessTokenParam=e})),m=N),new Promise(function(r,y){(function(t,e){if("string"!=typeof t)return Promise.resolve(t);if(!t.trim().startsWith("{"))return eW("Style",t=eU(t,e.accessToken),e);try{var i=JSON.parse(t);return Promise.resolve(i)}catch(t){return Promise.reject(t)}})(e,m).then(function(e){if(8!=e.version)return y(Error("glStyle version 8 required."));if(!(t instanceof w.default||t instanceof S.default))return y(Error("Can only apply to VectorLayer or VectorTileLayer"));var N,I,M,P=t instanceof S.default?"vector":"geojson";if(i?a=Array.isArray(i)?e.layers.find(function(t){return t.id===i[0]}).source:i:i=a=Object.keys(e.sources).find(function(t){return e.sources[t].type===P}),!a)return y(Error("No "+P+" source found in the glStyle."));function C(){if(t instanceof S.default){var i,r,o;return(i=e.sources[a],r=n,o=m,new Promise(function(t,e){(function(t,e,i){void 0===i&&(i={});var r=[e,JSON.stringify(t)].toString(),o=eX[r];if(!o||i.transformRequest){var n=t.url;if(n&&!t.tiles){var a=eB(n,i.accessToken,i.accessTokenParam||"access_token",e||location.href);o=n.startsWith("mapbox://")?Promise.resolve(Object.assign({},t,{url:void 0,tiles:a})):eW("Source",a,i).then(function(t){for(var e=0,r=t.tiles.length;e<r;++e){var o=t.tiles[e];if(i.transformRequest){var n=i.transformRequest(a,"Source");n&&(a=n.url)}var s=eB(o,i.accessToken,i.accessTokenParam||"access_token",a);if(i.transformRequest){var l=i.transformRequest(s,"Tiles");l instanceof Request&&(s=decodeURI(l.url))}t.tiles[e]=s}return Promise.resolve(t)})}else o=Promise.resolve(Object.assign({},t=Object.assign({},t,{tiles:t.tiles.map(function(t){return eB(t,i.accessToken,i.accessTokenParam||"access_token",e||location.href)})})));eX[r]=o}return o})(i,r,o).then(function(e){var i=new b.default({tileJSON:e}),r=i.getTileJSON(),o=i.getTileGrid(),n=function(t){var e=t.bounds;if(e){var i=(0,A.fromLonLat)([e[0],e[1]]),r=(0,A.fromLonLat)([e[2],e[3]]);return[i[0],i[1],r[0],r[1]]}}(r),a=r.minzoom||0,s=r.maxzoom||22,l={attributions:i.getAttributions(),format:new x.default,tileGrid:new v.default({origin:o.getOrigin(0),extent:n||o.getExtent(),minZoom:a,resolutions:eH.slice(0,s+1),tileSize:512})};Array.isArray(r.tiles)?l.urls=r.tiles:l.url=r.tiles,e.olSourceOptions&&Object.assign(l,e.olSourceOptions),t(new E.default(l))}).catch(e)})).then(function(e){var i=t.getSource();if(i?e!==i&&(i.setTileUrlFunction(e.getTileUrlFunction()),i.format_||(i.format_=e.format_),i.getAttributions()||i.setAttributions(e.getAttributions()),i.getTileLoadFunction()===E.defaultLoadFunction&&i.setTileLoadFunction(e.getTileLoadFunction()),(0,A.equivalent)(i.getProjection(),e.getProjection())&&(i.tileGrid=e.getTileGrid())):t.setSource(e),!isFinite(t.getMaxResolution())&&!isFinite(t.getMinZoom())){var r=t.getSource().getTileGrid();t.setMaxResolution(r.getResolution(r.getMinZoom()))}})}var s=e.sources[a],l=t.getSource();l&&l.get("mapbox-source")===s||(l=function(t,e,i){var r=t.data,o={};if("string"==typeof r){var n=eB(r,i.accessToken,i.accessTokenParam||"access_token",e||location.href);if(i.transformRequest){var a=i.transformRequest(n,"GeoJSON");a instanceof Request&&(n=encodeURI(a.url))}o.url=n}else o.features=is.readFeatures(r,{featureProjection:(0,A.getUserProjection)()||"EPSG:3857"});var s=new _.default(Object.assign({attributions:t.attribution,format:is},o));return s.set("mapbox-source",t),s}(s,n,m));var h=t.getSource();return h?l!==h&&(h.getAttributions()||h.setAttributions(l.getAttributions()),h.format_||(h.format_=l.getFormat()),h.url_=l.getUrl()):t.setSource(l),Promise.resolve()}function T(){M||e.sprite&&!N?M?(t.setStyle(M),C().then(r).catch(y)):y(Error("Something went wrong trying to apply style.")):(M=function(t,e,i,r,o,n,a){if(void 0===r&&(r=eH),void 0===o&&(o=void 0),void 0===n&&(n=void 0),void 0===a&&(a=void 0),"string"==typeof e&&(e=JSON.parse(e)),8!=e.version)throw Error("glStyle version 8 required.");if(n){if("undefined"!=typeof Image){var m,y,x,v=new Image;v.crossOrigin="anonymous",v.onload=function(){m=v,y=[v.width,v.height],t.changed(),v.onload=null},v.src=n}else if("undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope){var b=self;b.postMessage({action:"loadImage",src:n}),b.addEventListener("message",function(t){"imageLoaded"===t.data.action&&t.data.src===n&&(y=[(m=t.data.image).width,m.height])})}}for(var w=function(t){t=t.slice();for(var e=Object.create(null),i=0;i<t.length;i++)e[t[i].id]=t[i];for(var r=0;r<t.length;r++)"ref"in t[r]&&(t[r]=function(t,e){var i={};for(var r in t)"ref"!==r&&(i[r]=t[r]);return ek.forEach(function(t){t in e&&(i[t]=e[t])}),i}(t[r],e[t[r].ref]));return t}(e.layers),_={},S=[],E={},A={},N={},I={},M=0,P=w.length;M<P;++M){var C=w[M],T=C.id;if("string"==typeof i&&C.source==i||-1!==i.indexOf(T)){var L=C["source-layer"];if(x){if(C.source!==x)throw Error('Layer "'+T+'" does not use source "'+x)}else{x=C.source;var R=e.sources[x];if(!R)throw Error('Source "'+x+'" is not defined');var O=R.type;if("vector"!==O&&"geojson"!==O)throw Error('Source "'+x+'" is not of type "vector" or "geojson", but "'+O+'"')}var k=_[L];k||(k=[],_[L]=k),k.push({layer:C,index:M}),S.push(T)}}var G=new d.default,Z=new u.default,F=[],D=function(e,i){var n=e.getProperties(),x=_[n.layer];if(x){var v=r.indexOf(i);-1==v&&(v=function(t,e){for(var i=0,r=e.length;i<r;++i)if(e[i]<t&&i+1<r){var o=e[i]/e[i+1];return i+Math.log(e[i]/t)/Math.log(o)}return r-1}(i,r));for(var b=e3[e.getGeometry().getType()],w={properties:n,type:b},S=t.get("mapbox-featurestate")[e.getId()],M=-1,P=0,C=x.length;P<C;++P){var T=x[P],L=T.layer,R=L.id,O=L.layout||e9,k=L.paint||e9;if("none"!==O.visibility&&(!("minzoom"in L)||!(v<L.minzoom))&&(!("maxzoom"in L)||!(v>=L.maxzoom))){var D=L.filter;if(!D||(tM=v,I||console.warn("No filterCache provided to evaluateFilter()"),R in I||(I[R]=function(t,e){if(void 0===e&&(e="fill"),null==t)return{filter:function(){return!0},needGeometry:!1,needFeature:!1};!function t(e){if(!0===e||!1===e)return!0;if(!Array.isArray(e)||0===e.length)return!1;switch(e[0]){case"has":return e.length>=2&&"$id"!==e[1]&&"$type"!==e[1];case"in":return e.length>=3&&("string"!=typeof e[1]||Array.isArray(e[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return 3!==e.length||Array.isArray(e[1])||Array.isArray(e[2]);case"any":case"all":for(var i=0,r=e.slice(1);i<r.length;i+=1){var o=r[i];if(!t(o)&&"boolean"!=typeof o)return!1}return!0;default:return!0}}(t)&&(t=function t(e){if(!e)return!0;var i=e[0];return e.length<=1?"any"!==i:"=="===i?eT(e[1],e[2],"=="):"!="===i?eO(eT(e[1],e[2],"==")):"<"===i||">"===i||"<="===i||">="===i?eT(e[1],e[2],i):"any"===i?["any"].concat(e.slice(1).map(t)):"all"===i?["all"].concat(e.slice(1).map(t)):"none"===i?["all"].concat(e.slice(1).map(t).map(eO)):"in"===i?eL(e[1],e.slice(2)):"!in"===i?eO(eL(e[1],e.slice(2))):"has"===i?eR(e[1]):"!has"===i?eO(eR(e[1])):"within"!==i||e}(t));var i=t,r=!0;try{r=function(t){if(!eM(t))return t;var e=function t(e){if(Array.isArray(e))return e.map(t);if(e instanceof Object&&!(e instanceof Number||e instanceof String||e instanceof Boolean)){var i={};for(var r in e)i[r]=t(e[r]);return i}return e instanceof Number||e instanceof String||e instanceof Boolean?e.valueOf():e}(t);return function t(e){var i=!1,r=[];if("case"===e[0]){for(var o=1;o<e.length-1;o+=2)i=i||eM(e[o]),r.push(e[o+1]);r.push(e[e.length-1])}else if("match"===e[0]){i=i||eM(e[1]);for(var n=2;n<e.length-1;n+=2)r.push(e[n+1]);r.push(e[e.length-1])}else if("step"===e[0]){i=i||eM(e[1]);for(var a=1;a<e.length-1;a+=2)r.push(e[a+1])}i&&(e.length=0,e.push.apply(e,["any"].concat(r)));for(var s=1;s<e.length;s++)t(e[s])}(e),e=function t(e){if(!Array.isArray(e))return e;var i=function(t){if(eP.has(t[0])){for(var e=1;e<t.length;e++)if(eM(t[e]))return!0}return t}(e);return!0===i?i:i.map(function(e){return t(e)})}(e)}(i)}catch(t){console.warn("Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.\nThis is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md\nand paste the contents of this message in the report.\nThank you!\nFilter Expression:\n"+JSON.stringify(i,null,2)+"\n        ")}var o=eI["filter_"+e],n=eE(r,o),a=null;if("error"===n.result)throw Error(n.value.map(function(t){return t.key+": "+t.message}).join(", "));a=function(t,e,i){return n.value.evaluate(t,e,{},i)};var s=null,l=null;if(r!==i){var h=eE(i,o);if("error"===h.result)throw Error(h.value.map(function(t){return t.key+": "+t.message}).join(", "));s=function(t,e,i,r,o){return h.value.evaluate(t,e,{},i,void 0,void 0,r,o)},l=!tk(h.value.expression)}return{filter:a,dynamicFilter:s||void 0,needGeometry:function t(e){if(!Array.isArray(e))return!1;if("within"===e[0])return!0;for(var i=1;i<e.length;i++)if(t(e[i]))return!0;return!1}(r),needFeature:!!l}}(D).filter),it.zoom=tM,I[R](it,w))){var j=void 0,q=void 0,U=void 0,B=void 0,z=void 0,H=void 0,V=T.index;if(3==b&&("fill"==L.type||"fill-extrusion"==L.type)){if(q=ie(L,"paint",L.type+"-opacity",v,w,N,S),L.type+"-pattern" in k){var Y=ie(L,"paint",L.type+"-pattern",v,w,N,S);if(Y){var W="string"==typeof Y?io(Y,n):Y.toString();if(m&&o&&o[W]){(!(H=F[++M])||!H.getFill()||H.getStroke()||H.getText())&&(H=new p.default({fill:new u.default}),F[M]=H),U=H.getFill(),H.setZIndex(V);var X=W+"."+q,K=A[X];if(!K){var J=o[W],$=eV(J.width,J.height),Q=$.getContext("2d");Q.globalAlpha=q,Q.drawImage(m,J.x,J.y,J.width,J.height,0,0,J.width,J.height),K=Q.createPattern($,"repeat"),A[X]=K}U.setColor(K)}}}else j=ii(ie(L,"paint",L.type+"-color",v,w,N,S),q),L.type+"-outline-color" in k&&(z=ii(ie(L,"paint",L.type+"-outline-color",v,w,N,S),q)),z||(z=j),(j||z)&&((!(H=F[++M])||j&&!H.getFill()||!j&&H.getFill()||z&&!H.getStroke()||!z&&H.getStroke()||H.getText())&&(H=new p.default({fill:j?new u.default:void 0,stroke:z?new d.default:void 0}),F[M]=H),j&&(U=H.getFill()).setColor(j),z&&((B=H.getStroke()).setColor(z),B.setWidth(.5)),H.setZIndex(V))}if(1!=b&&"line"==L.type){j=!("line-pattern"in k)&&"line-color"in k?ii(ie(L,"paint","line-color",v,w,N,S),ie(L,"paint","line-opacity",v,w,N,S)):void 0;var tt=ie(L,"paint","line-width",v,w,N,S);j&&tt>0&&((!(H=F[++M])||!H.getStroke()||H.getFill()||H.getText())&&(H=new p.default({stroke:new d.default}),F[M]=H),(B=H.getStroke()).setLineCap(ie(L,"layout","line-cap",v,w,N,S)),B.setLineJoin(ie(L,"layout","line-join",v,w,N,S)),B.setMiterLimit(ie(L,"layout","line-miter-limit",v,w,N,S)),B.setColor(j),B.setWidth(tt),B.setLineDash(k["line-dasharray"]?ie(L,"paint","line-dasharray",v,w,N,S).map(function(t){return t*tt}):null),H.setZIndex(V))}var te=!1,ti=null,tr=0,to=void 0,tn=void 0,ta=void 0;if((1==b||2==b)&&"icon-image"in O){var ts=ie(L,"layout","icon-image",v,w,N,S);if(ts){to="string"==typeof ts?io(ts,n):ts.toString();var tl=void 0;if(m&&o&&o[to]){var th=ie(L,"layout","icon-rotation-alignment",v,w,N,S);if(2==b){var tu=e.getGeometry();if(tu.getFlatMidpoint||tu.getFlatMidpoints){var tc=tu.getExtent();if(Math.sqrt(Math.max(Math.pow((tc[2]-tc[0])/i,2),Math.pow((tc[3]-tc[1])/i,2)))>150){var tf="MultiLineString"===tu.getType()?tu.getFlatMidpoints():tu.getFlatMidpoint();if(l||(s=[NaN,NaN],l=new f.default("Point",s,[],{},null)),tl=l,s[0]=tf[0],s[1]=tf[1],"line"===ie(L,"layout","symbol-placement",v,w,N,S)&&"map"===th)for(var td=tu.getStride(),tp=tu.getFlatCoordinates(),tg=0,tm=tp.length-td;tg<tm;tg+=td){var ty=tp[tg],tx=tp[tg+1],tv=tp[tg+td],tb=tp[tg+td+1],tw=Math.min(ty,tv),t_=Math.min(tx,tb),tS=Math.max(ty,tv),tE=Math.max(tx,tb);if(tf[0]>=tw&&tf[0]<=tS&&tf[1]>=t_&&tf[1]<=tE){tr=Math.atan2(tx-tb,tv-ty);break}}}}}if(2!==b||tl){var tA=ie(L,"layout","icon-size",v,w,N,S),tN=void 0!==k["icon-color"]?ie(L,"paint","icon-color",v,w,N,S):null;if(!tN||0!==tN.a){var tI=to+"."+tA;if(null!==tN&&(tI+="."+tN),!(tn=E[tI])){var tM,tP,tC=o[to],tT=ie(L,"layout","icon-allow-overlap",tP=v,w,N)?ie(L,"layout","icon-ignore-placement",tP,w,N)?"none":"obstacle":"declutter";tn=new c.default({color:tN?[255*tN.r,255*tN.g,255*tN.b,tN.a]:void 0,img:m,imgSize:y,size:[tC.width,tC.height],offset:[tC.x,tC.y],rotateWithView:"map"===th,scale:tA/tC.pixelRatio,displacement:"icon-offset"in O?ie(L,"layout","icon-offset",v,w,N,S).map(function(t){return-t*tC.pixelRatio}):void 0,declutterMode:tT}),E[tI]=tn}}tn&&((!(H=F[++M])||!H.getImage()||H.getFill()||H.getStroke())&&(H=new p.default,F[M]=H),H.setGeometry(tl),tn.setRotation(tr+ez(ie(L,"layout","icon-rotate",v,w,N,S))),tn.setOpacity(ie(L,"paint","icon-opacity",v,w,N,S)),tn.setAnchor(e8[ie(L,"layout","icon-anchor",v,w,N,S)]),H.setImage(tn),ti=H.getText(),H.setText(void 0),H.setZIndex(V),te=!0,ta=!1)}else ta=!0}}}if(1==b&&"circle"===L.type){(!(H=F[++M])||!H.getImage()||H.getFill()||H.getStroke())&&(H=new p.default,F[M]=H);var tL="circle-radius"in k?ie(L,"paint","circle-radius",v,w,N,S):5,tR=ii(ie(L,"paint","circle-stroke-color",v,w,N,S),ie(L,"paint","circle-stroke-opacity",v,w,N,S)),tO=ii(ie(L,"paint","circle-color",v,w,N,S),ie(L,"paint","circle-opacity",v,w,N,S)),tG=ie(L,"paint","circle-stroke-width",v,w,N,S),tZ=tL+"."+tR+"."+tO+"."+tG;(tn=E[tZ])||(tn=new h.default({radius:tL,stroke:tR&&tG>0?new d.default({width:tG,color:tR}):void 0,fill:tO?new u.default({color:tO}):void 0,declutterMode:"none"}),E[tZ]=tn),H.setImage(tn),ti=H.getText(),H.setText(void 0),H.setGeometry(void 0),H.setZIndex(V),te=!0}var tF=void 0,tD=void 0,tj=void 0,tq=void 0,tU=void 0,tB=void 0;if("text-field"in O){tq=Math.round(ie(L,"layout","text-size",v,w,N,S));var tz=ie(L,"layout","text-font",v,w,N,S);tj=ie(L,"layout","text-line-height",v,w,N,S),(tD=eD(a?a(tz):tz,tq,tj)).includes("sans-serif")||(tD+=",sans-serif"),tU=ie(L,"layout","text-letter-spacing",v,w,N,S),tB=ie(L,"layout","text-max-width",v,w,N,S);var tH=ie(L,"layout","text-field",v,w,N,S);tF="object"==typeof tH&&tH.sections?1===tH.sections.length?tH.toString():tH.sections.reduce(function(t,e,i){var r=e.fontStack?e.fontStack.split(","):tz,o=eD(a?a(r):r,tq*(e.scale||1),tj),n=e.text;if("\n"===n)return t.push("\n",""),t;if(2==b){t.push(eJ(n,tU),o);return}n=e1(n,o,tB,tU).split("\n");for(var s=0,l=n.length;s<l;++s)s>0&&t.push("\n",""),t.push(n[s],o);return t},[]):io(tH,n).trim(),q=ie(L,"paint","text-opacity",v,w,N,S)}if(tF&&q&&!ta){te||((!(H=F[++M])||!H.getText()||H.getFill()||H.getStroke())&&(H=new p.default,F[M]=H),H.setImage(void 0),H.setGeometry(void 0)),H.getText()||H.setText(ti||new g.default({padding:[2,2,2,2]})),ti=H.getText();var tV=O["text-transform"];"uppercase"==tV?tF=Array.isArray(tF)?tF.map(function(t,e){return e%2?t:t.toUpperCase()}):tF.toUpperCase():"lowercase"==tV&&(tF=Array.isArray(tF)?tF.map(function(t,e){return e%2?t:t.toLowerCase()}):tF.toLowerCase());var tY=Array.isArray(tF)?tF:2==b?eJ(tF,tU):e1(tF,tD,tB,tU);ti.setText(tY),ti.setFont(tD),ti.setRotation(ez(ie(L,"layout","text-rotate",v,w,N,S)));var tW=ie(L,"layout","text-anchor",v,w,N,S),tX=te||1==b?"point":ie(L,"layout","symbol-placement",v,w,N,S);ti.setPlacement(tX),ti.setOverflow("point"===tX);var tK=ie(L,"paint","text-halo-width",v,w,N,S),tJ=ie(L,"layout","text-offset",v,w,N,S),t$=ie(L,"paint","text-translate",v,w,N,S),tQ=0,t0=0;if("point"==tX){var t1="center";-1!==tW.indexOf("left")?(t1="left",t0=tK):-1!==tW.indexOf("right")&&(t1="right",t0=-tK),ti.setTextAlign(t1);var t2=ie(L,"layout","text-rotation-alignment",v,w,N,S);ti.setRotateWithView("map"==t2)}else ti.setMaxAngle(ez(ie(L,"layout","text-max-angle",v,w,N,S))*tF.length/tY.length),ti.setTextAlign(),ti.setRotateWithView(!1);var t5="middle";0==tW.indexOf("bottom")?(t5="bottom",tQ=-tK-.5*(tj-1)*tq):0==tW.indexOf("top")&&(t5="top",tQ=tK+.5*(tj-1)*tq),ti.setTextBaseline(t5),ti.setOffsetX(tJ[0]*tq+t0+t$[0]),ti.setOffsetY(tJ[1]*tq+tQ+t$[1]),Z.setColor(ii(ie(L,"paint","text-color",v,w,N,S),q)),ti.setFill(Z);var t4=ii(ie(L,"paint","text-halo-color",v,w,N,S),q);if(t4){G.setColor(t4),tK*=2;var t6=.5*tq;G.setWidth(tK<=t6?tK:t6),ti.setStroke(G)}else ti.setStroke(void 0);var t3=ie(L,"layout","text-padding",v,w,N,S),t8=ti.getPadding();t3!==t8[0]&&(t8[0]=t3,t8[1]=t3,t8[2]=t3,t8[3]=t3),H.setZIndex(V)}}}}if(M>-1)return F.length=M+1,F}};return t.setStyle(D),t.set("mapbox-source",x),t.set("mapbox-layers",S),t.set("mapbox-featurestate",{}),D}(t,e,i,o,N,I,e6),t.getStyle()?C().then(r).catch(y):y(Error("Nothing to show for source ["+a+"]")))}if(e.sprite){var L=new URL(function(t,e,i){var r=eq(t);if(!r)return decodeURI(new URL(t,i).href);var o="sprites/";if(0!==r.indexOf(o))throw Error("unexpected sprites url: "+t);return ej+"/styles/v1/"+r.slice(o.length)+"/sprite?access_token="+e}(e.sprite,m.accessToken,n||location.href)),R=.5==(window.devicePixelRatio>=1.5?.5:1)?"@2x":"",O=L.origin+L.pathname+R+".json"+L.search;new Promise(function(t,e){eW("Sprite",O,m).then(t).catch(function(i){eW("Sprite",O=L.origin+L.pathname+".json"+L.search,m).then(t).catch(e)})}).then(function(t){if(void 0===t&&y(Error("No sprites found.")),N=t,I=L.origin+L.pathname+R+".png"+L.search,m.transformRequest){var e=m.transformRequest(I,"SpriteImage");e instanceof Request&&(I=encodeURI(e.url))}T()}).catch(function(t){y(Error("Sprites cannot be loaded: "+O+": "+t.message))})}else T()}).catch(y)})}var is=new y.default}),a("kPMpK",function(t,i){e(t.exports,"default",()=>g);var r=n("iGyOD"),o=n("k8QYM"),a=n("29SgV"),s=n("9z1G1"),l=n("ee3b9"),h=n("63y7W"),u=n("gzr8q"),c=n("kKEgb");class f extends o.default{constructor(t){t=t||{},super(),this.dataProjection=(0,u.get)(t.dataProjection?t.dataProjection:"EPSG:4326"),t.featureProjection&&(this.defaultFeatureProjection=(0,u.get)(t.featureProjection)),t.featureClass&&(this.featureClass=t.featureClass),this.geometryName_=t.geometryName,this.extractGeometryName_=t.extractGeometryName,this.supportedMediaTypes=["application/geo+json","application/vnd.geo+json"]}readFeatureFromObject(t,e){let i=null,o=d((i="Feature"===t.type?t:{type:"Feature",geometry:t,properties:null}).geometry,e);if(this.featureClass===a.default)return(0,s.createRenderFeature)({geometry:o,id:i.id,properties:i.properties},e);let n=new r.default;return this.geometryName_?n.setGeometryName(this.geometryName_):this.extractGeometryName_&&n.setGeometryName(i.geometry_name),n.setGeometry((0,s.createGeometry)(o,e)),"id"in i&&n.setId(i.id),i.properties&&n.setProperties(i.properties,!0),n}readFeaturesFromObject(t,e){let i=null;if("FeatureCollection"===t.type){i=[];let r=t.features;for(let t=0,o=r.length;t<o;++t){let o=this.readFeatureFromObject(r[t],e);o&&i.push(o)}}else i=[this.readFeatureFromObject(t,e)];return i.flat()}readGeometryFromObject(t,e){return function(t,e){let i=d(t,e);return(0,s.createGeometry)(i,e)}(t,e)}readProjectionFromObject(t){let e;let i=t.crs;if(i){if("name"==i.type)e=(0,u.get)(i.properties.name);else if("EPSG"===i.type)e=(0,u.get)("EPSG:"+i.properties.code);else throw Error("Unknown SRS type")}else e=this.dataProjection;return e}writeFeatureObject(t,e){e=this.adaptOptions(e);let i={type:"Feature",geometry:null,properties:null},r=t.getId();if(void 0!==r&&(i.id=r),!t.hasProperties())return i;let o=t.getProperties(),n=t.getGeometry();return n&&(i.geometry=p(n,e),delete o[t.getGeometryName()]),(0,c.isEmpty)(o)||(i.properties=o),i}writeFeaturesObject(t,e){e=this.adaptOptions(e);let i=[];for(let r=0,o=t.length;r<o;++r)i.push(this.writeFeatureObject(t[r],e));return{type:"FeatureCollection",features:i}}writeGeometryObject(t,e){return p(t,this.adaptOptions(e))}}function d(t,e){let i;if(!t)return null;switch(t.type){case"Point":i=function(t){let e=t.coordinates;return{type:"Point",flatCoordinates:e,layout:(0,h.getLayoutForStride)(e.length)}}(t);break;case"LineString":i=function(t){let e=t.coordinates,i=e.flat();return{type:"LineString",flatCoordinates:i,ends:[i.length],layout:(0,h.getLayoutForStride)(e[0].length)}}(t);break;case"Polygon":i=function(t){let e=t.coordinates,i=[],r=e[0][0].length,o=(0,l.deflateCoordinatesArray)(i,0,e,r);return{type:"Polygon",flatCoordinates:i,ends:o,layout:(0,h.getLayoutForStride)(r)}}(t);break;case"MultiPoint":i=function(t){let e=t.coordinates;return{type:"MultiPoint",flatCoordinates:e.flat(),layout:(0,h.getLayoutForStride)(e[0].length)}}(t);break;case"MultiLineString":i=function(t){let e=t.coordinates,i=e[0][0].length,r=[],o=(0,l.deflateCoordinatesArray)(r,0,e,i);return{type:"MultiLineString",flatCoordinates:r,ends:o,layout:(0,h.getLayoutForStride)(i)}}(t);break;case"MultiPolygon":i=function(t){let e=t.coordinates,i=[],r=e[0][0][0].length,o=(0,l.deflateMultiCoordinatesArray)(i,0,e,r);return{type:"MultiPolygon",flatCoordinates:i,ends:o,layout:(0,h.getLayoutForStride)(r)}}(t);break;case"GeometryCollection":i=t.geometries.map(function(t){return d(t,void 0)});break;default:throw Error("Unsupported GeoJSON type: "+t.type)}return i}function p(t,e){var i,r,o,n;let a,l,h;let u=(t=(0,s.transformGeometryWithOptions)(t,!0,e)).getType();switch(u){case"Point":a={type:"Point",coordinates:t.getCoordinates()};break;case"LineString":a={type:"LineString",coordinates:t.getCoordinates()};break;case"Polygon":i=t,e&&(l=e.rightHanded),a={type:"Polygon",coordinates:i.getCoordinates(l)};break;case"MultiPoint":a={type:"MultiPoint",coordinates:t.getCoordinates()};break;case"MultiLineString":a={type:"MultiLineString",coordinates:t.getCoordinates()};break;case"MultiPolygon":r=t,e&&(h=e.rightHanded),a={type:"MultiPolygon",coordinates:r.getCoordinates(h)};break;case"GeometryCollection":o=t,n=Object.assign({},n=e),delete n.featureProjection,a={type:"GeometryCollection",geometries:o.getGeometriesArray().map(function(t){return p(t,n)})};break;case"Circle":a={type:"GeometryCollection",geometries:[]};break;default:throw Error("Unsupported geometry type: "+u)}return a}var g=f}),a("k8QYM",function(t,i){e(t.exports,"default",()=>l);var r=n("9z1G1"),o=n("lVQul");class a extends r.default{constructor(){super()}getType(){return"json"}readFeature(t,e){return this.readFeatureFromObject(s(t),this.getReadOptions(t,e))}readFeatures(t,e){return this.readFeaturesFromObject(s(t),this.getReadOptions(t,e))}readFeatureFromObject(t,e){return(0,o.abstract)()}readFeaturesFromObject(t,e){return(0,o.abstract)()}readGeometry(t,e){return this.readGeometryFromObject(s(t),this.getReadOptions(t,e))}readGeometryFromObject(t,e){return(0,o.abstract)()}readProjection(t){return this.readProjectionFromObject(s(t))}readProjectionFromObject(t){return(0,o.abstract)()}writeFeature(t,e){return JSON.stringify(this.writeFeatureObject(t,e))}writeFeatureObject(t,e){return(0,o.abstract)()}writeFeatures(t,e){return JSON.stringify(this.writeFeaturesObject(t,e))}writeFeaturesObject(t,e){return(0,o.abstract)()}writeGeometry(t,e){return JSON.stringify(this.writeGeometryObject(t,e))}writeGeometryObject(t,e){return(0,o.abstract)()}}function s(t){return"string"==typeof t?JSON.parse(t)||null:null!==t?t:null}var l=a}),a("9z1G1",function(t,i){e(t.exports,"default",()=>m),e(t.exports,"transformGeometryWithOptions",()=>y),e(t.exports,"createRenderFeature",()=>function t(e,i){var r,n;let a=e.geometry;if(!a)return[];if(Array.isArray(a))return a.map(i=>t({...e,geometry:i})).flat();let s="MultiPolygon"===a.type?"Polygon":a.type;if("GeometryCollection"===s||"Circle"===s)throw Error("Unsupported geometry type: "+s);let l=a.layout.length;return y(new(0,o.default)(s,"Polygon"===s?(r=a.flatCoordinates,Array.isArray((n=a.ends)[0])?(0,g.linearRingssAreOriented)(r,0,n,l)||(r=r.slice(),(0,g.orientLinearRingsArray)(r,0,n,l)):(0,g.linearRingsAreOriented)(r,0,n,l)||(r=r.slice(),(0,g.orientLinearRings)(r,0,n,l)),r):a.flatCoordinates,a.ends?.flat(),l,e.properties||{},e.id).enableSimplifyTransformed(),!1,i)}),e(t.exports,"createGeometry",()=>function t(e,i){if(!e)return null;if(Array.isArray(e)){let r=e.map(e=>t(e,i));return new f.default(r)}return y(new x[e.type](e.flatCoordinates,e.layout,e.ends),!1,i)});var r=n("iGyOD"),o=n("29SgV"),a=n("j2K3b"),s=n("hvEnP"),l=n("cgPpQ"),h=n("ljDIj"),u=n("7TB1l"),c=n("dEQmT"),f=n("6pyIt"),d=n("lVQul"),p=n("gzr8q"),g=n("2cCpz"),m=class{constructor(){this.dataProjection=void 0,this.defaultFeatureProjection=void 0,this.featureClass=r.default,this.supportedMediaTypes=null}getReadOptions(t,e){if(e){let i=e.dataProjection?(0,p.get)(e.dataProjection):this.readProjection(t);e.extent&&i&&"tile-pixels"===i.getUnits()&&(i=(0,p.get)(i)).setWorldExtent(e.extent),e={dataProjection:i,featureProjection:e.featureProjection}}return this.adaptOptions(e)}adaptOptions(t){return Object.assign({dataProjection:this.dataProjection,featureProjection:this.defaultFeatureProjection,featureClass:this.featureClass},t)}getType(){return(0,d.abstract)()}readFeature(t,e){return(0,d.abstract)()}readFeatures(t,e){return(0,d.abstract)()}readGeometry(t,e){return(0,d.abstract)()}readProjection(t){return(0,d.abstract)()}writeFeature(t,e){return(0,d.abstract)()}writeFeatures(t,e){return(0,d.abstract)()}writeGeometry(t,e){return(0,d.abstract)()}};function y(t,e,i){let r=i?(0,p.get)(i.featureProjection):null,o=i?(0,p.get)(i.dataProjection):null,n=t;if(r&&o&&!(0,p.equivalent)(r,o)){e&&(n=t.clone());let i=e?r:o,a=e?o:r;"tile-pixels"===i.getUnits()?n.transform(i,a):n.applyTransform((0,p.getTransform)(i,a))}if(e&&i&&void 0!==i.decimals){let e=Math.pow(10,i.decimals);n===t&&(n=t.clone()),n.applyTransform(function(t){for(let i=0,r=t.length;i<r;++i)t[i]=Math.round(t[i]*e)/e;return t})}return n}let x={Point:a.default,LineString:s.default,Polygon:l.default,MultiPoint:h.default,MultiLineString:u.default,MultiPolygon:c.default}}),a("6pyIt",function(t,i){e(t.exports,"default",()=>u);var r=n("cw4dl"),o=n("fvrVu"),a=n("jZquI"),s=n("bsgMw");class l extends o.default{constructor(t){super(),this.geometries_=t||null,this.changeEventsKeys_=[],this.listenGeometriesChange_()}unlistenGeometriesChange_(){this.changeEventsKeys_.forEach(s.unlistenByKey),this.changeEventsKeys_.length=0}listenGeometriesChange_(){if(this.geometries_)for(let t=0,e=this.geometries_.length;t<e;++t)this.changeEventsKeys_.push((0,s.listen)(this.geometries_[t],r.default.CHANGE,this.changed,this))}clone(){let t=new l(null);return t.setGeometries(this.geometries_),t.applyProperties(this),t}closestPointXY(t,e,i,r){if(r<(0,a.closestSquaredDistanceXY)(this.getExtent(),t,e))return r;let o=this.geometries_;for(let n=0,a=o.length;n<a;++n)r=o[n].closestPointXY(t,e,i,r);return r}containsXY(t,e){let i=this.geometries_;for(let r=0,o=i.length;r<o;++r)if(i[r].containsXY(t,e))return!0;return!1}computeExtent(t){(0,a.createOrUpdateEmpty)(t);let e=this.geometries_;for(let i=0,r=e.length;i<r;++i)(0,a.extend)(t,e[i].getExtent());return t}getGeometries(){return h(this.geometries_)}getGeometriesArray(){return this.geometries_}getGeometriesArrayRecursive(){let t=[],e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].getType()===this.getType()?t=t.concat(e[i].getGeometriesArrayRecursive()):t.push(e[i]);return t}getSimplifiedGeometry(t){if(this.simplifiedGeometryRevision!==this.getRevision()&&(this.simplifiedGeometryMaxMinSquaredTolerance=0,this.simplifiedGeometryRevision=this.getRevision()),t<0||0!==this.simplifiedGeometryMaxMinSquaredTolerance&&t<this.simplifiedGeometryMaxMinSquaredTolerance)return this;let e=[],i=this.geometries_,r=!1;for(let o=0,n=i.length;o<n;++o){let n=i[o],a=n.getSimplifiedGeometry(t);e.push(a),a!==n&&(r=!0)}if(r){let t=new l(null);return t.setGeometriesArray(e),t}return this.simplifiedGeometryMaxMinSquaredTolerance=t,this}getType(){return"GeometryCollection"}intersectsExtent(t){let e=this.geometries_;for(let i=0,r=e.length;i<r;++i)if(e[i].intersectsExtent(t))return!0;return!1}isEmpty(){return 0===this.geometries_.length}rotate(t,e){let i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].rotate(t,e);this.changed()}scale(t,e,i){i||(i=(0,a.getCenter)(this.getExtent()));let r=this.geometries_;for(let o=0,n=r.length;o<n;++o)r[o].scale(t,e,i);this.changed()}setGeometries(t){this.setGeometriesArray(h(t))}setGeometriesArray(t){this.unlistenGeometriesChange_(),this.geometries_=t,this.listenGeometriesChange_(),this.changed()}applyTransform(t){let e=this.geometries_;for(let i=0,r=e.length;i<r;++i)e[i].applyTransform(t);this.changed()}translate(t,e){let i=this.geometries_;for(let r=0,o=i.length;r<o;++r)i[r].translate(t,e);this.changed()}disposeInternal(){this.unlistenGeometriesChange_(),super.disposeInternal()}}function h(t){let e=[];for(let i=0,r=t.length;i<r;++i)e.push(t[i].clone());return e}var u=l}),a("9MiJs",function(i,r){e(i.exports,"default",()=>w);var o=n("9z1G1"),a=n("hvEnP"),s=n("7TB1l"),l=n("ljDIj"),h=n("dEQmT"),u=n("88FmG"),c=n("j2K3b"),f=n("cgPpQ"),d=n("5zIbz"),p=n("29SgV"),g=n("gzr8q"),m=n("2cCpz");class y extends o.default{constructor(t){super(),t=t||{},this.dataProjection=new d.default({code:"",units:"tile-pixels"}),this.featureClass_=t.featureClass?t.featureClass:p.default,this.geometryName_=t.geometryName,this.layerName_=t.layerName?t.layerName:"layer",this.layers_=t.layers?t.layers:null,this.idProperty_=t.idProperty,this.supportedMediaTypes=["application/vnd.mapbox-vector-tile","application/x-protobuf"]}readRawGeometry_(t,e,i,r){t.pos=e.geometry;let o=t.readVarint()+t.pos,n=1,a=0,s=0,l=0,h=0,u=0;for(;t.pos<o;){if(!a){let e=t.readVarint();n=7&e,a=e>>3}if(a--,1===n||2===n)s+=t.readSVarint(),l+=t.readSVarint(),1===n&&h>u&&(r.push(h),u=h),i.push(s,l),h+=2;else if(7===n)h>u&&(i.push(i[u],i[u+1]),h+=2);else throw Error("Invalid command found in the PBF")}h>u&&(r.push(h),u=h)}createFeature_(t,e,i){var r;let n,u,d;let g=e.type;if(0===g)return null;let y=e.properties;this.idProperty_?(u=y[this.idProperty_],delete y[this.idProperty_]):u=e.id,y[this.layerName_]=e.layer.name;let x=[],v=[];this.readRawGeometry_(t,e,x,v);let b=(r=v.length,1===g?d=1===r?"Point":"MultiPoint":2===g?d=1===r?"LineString":"MultiLineString":3===g&&(d="Polygon"),d);if(this.featureClass_===p.default)(n=new this.featureClass_(b,x,v,2,y,u)).transform(i.dataProjection);else{let t;if("Polygon"==b){let e=(0,m.inflateEnds)(x,v);t=e.length>1?new h.default(x,"XY",e):new f.default(x,"XY",v)}else t="Point"===b?new c.default(x,"XY"):"LineString"===b?new a.default(x,"XY"):"MultiPoint"===b?new l.default(x,"XY"):"MultiLineString"===b?new s.default(x,"XY",v):null;n=new this.featureClass_,this.geometryName_&&n.setGeometryName(this.geometryName_);let e=(0,o.transformGeometryWithOptions)(t,!1,i);n.setGeometry(e),void 0!==u&&n.setId(u),n.setProperties(y,!0)}return n}getType(){return"arraybuffer"}readFeatures(e,i){let r=this.layers_;i=this.adaptOptions(i);let o=(0,g.get)(i.dataProjection);o.setWorldExtent(i.extent),i.dataProjection=o;let n=new(t(u))(e),a=n.readFields(x,{}),s=[];for(let t in a){if(r&&!r.includes(t))continue;let e=a[t],l=e?[0,0,e.extent,e.extent]:null;o.setExtent(l);for(let t=0,r=e.length;t<r;++t){let r=function(t,e,i){t.pos=e.features[i];let r=t.readVarint()+t.pos,o={layer:e,type:0,properties:{}};return t.readFields(b,o,r),o}(n,e,t),o=this.createFeature_(n,r,i);null!==o&&s.push(o)}}return s}readProjection(t){return this.dataProjection}setLayers(t){this.layers_=t}}function x(t,e,i){if(3===t){let t={keys:[],values:[],features:[]},r=i.readVarint()+i.pos;i.readFields(v,t,r),t.length=t.features.length,t.length&&(e[t.name]=t)}}function v(t,e,i){if(15===t)e.version=i.readVarint();else if(1===t)e.name=i.readString();else if(5===t)e.extent=i.readVarint();else if(2===t)e.features.push(i.pos);else if(3===t)e.keys.push(i.readString());else if(4===t){let r=null,o=i.readVarint()+i.pos;for(;i.pos<o;)r=1==(t=i.readVarint()>>3)?i.readString():2===t?i.readFloat():3===t?i.readDouble():4===t?i.readVarint64():5===t?i.readVarint():6===t?i.readSVarint():7===t?i.readBoolean():null;e.values.push(r)}}function b(t,e,i){if(1==t)e.id=i.readVarint();else if(2==t){let t=i.readVarint()+i.pos;for(;i.pos<t;){let t=e.layer.keys[i.readVarint()],r=e.layer.values[i.readVarint()];e.properties[t]=r}}else 3==t?e.type=i.readVarint():4==t&&(e.geometry=i.pos)}var w=y}),a("88FmG",function(t,e){t.exports=r;var i=n("7y6mg");function r(t){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(t)?t:new Uint8Array(t||0),this.pos=0,this.type=0,this.length=this.buf.length}r.Varint=0,r.Fixed64=1,r.Bytes=2,r.Fixed32=5;var o="undefined"==typeof TextDecoder?null:new TextDecoder("utf8");function a(t){return t.type===r.Bytes?t.readVarint()+t.pos:t.pos+1}function s(t,e,i){var r=e<=16383?1:e<=2097151?2:e<=268435455?3:Math.floor(Math.log(e)/(7*Math.LN2));i.realloc(r);for(var o=i.pos-1;o>=t;o--)i.buf[o+r]=i.buf[o]}function l(t,e){for(var i=0;i<t.length;i++)e.writeVarint(t[i])}function h(t,e){for(var i=0;i<t.length;i++)e.writeSVarint(t[i])}function u(t,e){for(var i=0;i<t.length;i++)e.writeFloat(t[i])}function c(t,e){for(var i=0;i<t.length;i++)e.writeDouble(t[i])}function f(t,e){for(var i=0;i<t.length;i++)e.writeBoolean(t[i])}function d(t,e){for(var i=0;i<t.length;i++)e.writeFixed32(t[i])}function p(t,e){for(var i=0;i<t.length;i++)e.writeSFixed32(t[i])}function g(t,e){for(var i=0;i<t.length;i++)e.writeFixed64(t[i])}function m(t,e){for(var i=0;i<t.length;i++)e.writeSFixed64(t[i])}function y(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+16777216*t[e+3]}function x(t,e,i){t[i]=e,t[i+1]=e>>>8,t[i+2]=e>>>16,t[i+3]=e>>>24}function v(t,e){return(t[e]|t[e+1]<<8|t[e+2]<<16)+(t[e+3]<<24)}r.prototype={destroy:function(){this.buf=null},readFields:function(t,e,i){for(i=i||this.length;this.pos<i;){var r=this.readVarint(),o=r>>3,n=this.pos;this.type=7&r,t(o,e,this),this.pos===n&&this.skip(r)}return e},readMessage:function(t,e){return this.readFields(t,e,this.readVarint()+this.pos)},readFixed32:function(){var t=y(this.buf,this.pos);return this.pos+=4,t},readSFixed32:function(){var t=v(this.buf,this.pos);return this.pos+=4,t},readFixed64:function(){var t=y(this.buf,this.pos)+4294967296*y(this.buf,this.pos+4);return this.pos+=8,t},readSFixed64:function(){var t=y(this.buf,this.pos)+4294967296*v(this.buf,this.pos+4);return this.pos+=8,t},readFloat:function(){var t=i.read(this.buf,this.pos,!0,23,4);return this.pos+=4,t},readDouble:function(){var t=i.read(this.buf,this.pos,!0,52,8);return this.pos+=8,t},readVarint:function(t){var e,i,r=this.buf;return(e=127&(i=r[this.pos++]),i<128)?e:(e|=(127&(i=r[this.pos++]))<<7,i<128)?e:(e|=(127&(i=r[this.pos++]))<<14,i<128)?e:(e|=(127&(i=r[this.pos++]))<<21,i<128)?e:function(t,e,i){var r,o,n,a,s=i.buf;if(n=(112&(a=s[i.pos++]))>>4,a<128||(n|=(127&(a=s[i.pos++]))<<3,a<128)||(n|=(127&(a=s[i.pos++]))<<10,a<128)||(n|=(127&(a=s[i.pos++]))<<17,a<128)||(n|=(127&(a=s[i.pos++]))<<24,a<128)||(n|=(1&(a=s[i.pos++]))<<31,a<128)){return r=t,o=n,e?4294967296*o+(r>>>0):(o>>>0)*4294967296+(r>>>0)}throw Error("Expected varint not more than 10 bytes")}(e|=(15&(i=r[this.pos]))<<28,t,this)},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var t=this.readVarint();return t%2==1?-((t+1)/2):t/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var t,e=this.readVarint()+this.pos,i=this.pos;return(this.pos=e,e-i>=12&&o)?(t=this.buf,o.decode(t.subarray(i,e))):function(t,e,i){for(var r="",o=e;o<i;){var n,a,s,l=t[o],h=null,u=l>239?4:l>223?3:l>191?2:1;if(o+u>i)break;1===u?l<128&&(h=l):2===u?(192&(n=t[o+1]))==128&&(h=(31&l)<<6|63&n)<=127&&(h=null):3===u?(n=t[o+1],a=t[o+2],(192&n)==128&&(192&a)==128&&((h=(15&l)<<12|(63&n)<<6|63&a)<=2047||h>=55296&&h<=57343)&&(h=null)):4===u&&(n=t[o+1],a=t[o+2],s=t[o+3],(192&n)==128&&(192&a)==128&&(192&s)==128&&((h=(15&l)<<18|(63&n)<<12|(63&a)<<6|63&s)<=65535||h>=1114112)&&(h=null)),null===h?(h=65533,u=1):h>65535&&(h-=65536,r+=String.fromCharCode(h>>>10&1023|55296),h=56320|1023&h),r+=String.fromCharCode(h),o+=u}return r}(this.buf,i,e)},readBytes:function(){var t=this.readVarint()+this.pos,e=this.buf.subarray(this.pos,t);return this.pos=t,e},readPackedVarint:function(t,e){if(this.type!==r.Bytes)return t.push(this.readVarint(e));var i=a(this);for(t=t||[];this.pos<i;)t.push(this.readVarint(e));return t},readPackedSVarint:function(t){if(this.type!==r.Bytes)return t.push(this.readSVarint());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSVarint());return t},readPackedBoolean:function(t){if(this.type!==r.Bytes)return t.push(this.readBoolean());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readBoolean());return t},readPackedFloat:function(t){if(this.type!==r.Bytes)return t.push(this.readFloat());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFloat());return t},readPackedDouble:function(t){if(this.type!==r.Bytes)return t.push(this.readDouble());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readDouble());return t},readPackedFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed32());return t},readPackedSFixed32:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed32());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed32());return t},readPackedFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readFixed64());return t},readPackedSFixed64:function(t){if(this.type!==r.Bytes)return t.push(this.readSFixed64());var e=a(this);for(t=t||[];this.pos<e;)t.push(this.readSFixed64());return t},skip:function(t){var e=7&t;if(e===r.Varint)for(;this.buf[this.pos++]>127;);else if(e===r.Bytes)this.pos=this.readVarint()+this.pos;else if(e===r.Fixed32)this.pos+=4;else if(e===r.Fixed64)this.pos+=8;else throw Error("Unimplemented type: "+e)},writeTag:function(t,e){this.writeVarint(t<<3|e)},realloc:function(t){for(var e=this.length||16;e<this.pos+t;)e*=2;if(e!==this.length){var i=new Uint8Array(e);i.set(this.buf),this.buf=i,this.length=e}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeSFixed32:function(t){this.realloc(4),x(this.buf,t,this.pos),this.pos+=4},writeFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(23283064365386963e-26*t),this.pos+4),this.pos+=8},writeSFixed64:function(t){this.realloc(8),x(this.buf,-1&t,this.pos),x(this.buf,Math.floor(23283064365386963e-26*t),this.pos+4),this.pos+=8},writeVarint:function(t){if((t=+t||0)>268435455||t<0){(function(t,e){var i,r,o,n,a,s;if(t>=0?(i=t%4294967296|0,r=t/4294967296|0):(i=~(-t%4294967296),r=~(-t/4294967296),4294967295^i?i=i+1|0:(i=0,r=r+1|0)),t>=18446744073709552e3||t<-18446744073709552e3)throw Error("Given varint doesn't fit into 10 bytes");e.realloc(10),o=i,e.buf[e.pos++]=127&o|128,o>>>=7,e.buf[e.pos++]=127&o|128,o>>>=7,e.buf[e.pos++]=127&o|128,o>>>=7,e.buf[e.pos++]=127&o|128,o>>>=7,e.buf[e.pos]=127&o,n=r,a=e,s=(7&n)<<4,a.buf[a.pos++]|=s|((n>>>=3)?128:0),!n||(a.buf[a.pos++]=127&n|((n>>>=7)?128:0),!n)||(a.buf[a.pos++]=127&n|((n>>>=7)?128:0),!n)||(a.buf[a.pos++]=127&n|((n>>>=7)?128:0),n&&(a.buf[a.pos++]=127&n|((n>>>=7)?128:0),n&&(a.buf[a.pos++]=127&n)))})(t,this);return}this.realloc(4),this.buf[this.pos++]=127&t|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),!(t<=127)&&(this.buf[this.pos++]=127&(t>>>=7)|(t>127?128:0),t<=127||(this.buf[this.pos++]=t>>>7&127)))},writeSVarint:function(t){this.writeVarint(t<0?-(2*t)-1:2*t)},writeBoolean:function(t){this.writeVarint(!!t)},writeString:function(t){t=String(t),this.realloc(4*t.length),this.pos++;var e=this.pos;this.pos=function(t,e,i){for(var r,o,n=0;n<e.length;n++){if((r=e.charCodeAt(n))>55295&&r<57344){if(o){if(r<56320){t[i++]=239,t[i++]=191,t[i++]=189,o=r;continue}r=o-55296<<10|r-56320|65536,o=null}else{r>56319||n+1===e.length?(t[i++]=239,t[i++]=191,t[i++]=189):o=r;continue}}else o&&(t[i++]=239,t[i++]=191,t[i++]=189,o=null);r<128?t[i++]=r:(r<2048?t[i++]=r>>6|192:(r<65536?t[i++]=r>>12|224:(t[i++]=r>>18|240,t[i++]=r>>12&63|128),t[i++]=r>>6&63|128),t[i++]=63&r|128)}return i}(this.buf,t,this.pos);var i=this.pos-e;i>=128&&s(e,i,this),this.pos=e-1,this.writeVarint(i),this.pos+=i},writeFloat:function(t){this.realloc(4),i.write(this.buf,t,this.pos,!0,23,4),this.pos+=4},writeDouble:function(t){this.realloc(8),i.write(this.buf,t,this.pos,!0,52,8),this.pos+=8},writeBytes:function(t){var e=t.length;this.writeVarint(e),this.realloc(e);for(var i=0;i<e;i++)this.buf[this.pos++]=t[i]},writeRawMessage:function(t,e){this.pos++;var i=this.pos;t(e,this);var r=this.pos-i;r>=128&&s(i,r,this),this.pos=i-1,this.writeVarint(r),this.pos+=r},writeMessage:function(t,e,i){this.writeTag(t,r.Bytes),this.writeRawMessage(e,i)},writePackedVarint:function(t,e){e.length&&this.writeMessage(t,l,e)},writePackedSVarint:function(t,e){e.length&&this.writeMessage(t,h,e)},writePackedBoolean:function(t,e){e.length&&this.writeMessage(t,f,e)},writePackedFloat:function(t,e){e.length&&this.writeMessage(t,u,e)},writePackedDouble:function(t,e){e.length&&this.writeMessage(t,c,e)},writePackedFixed32:function(t,e){e.length&&this.writeMessage(t,d,e)},writePackedSFixed32:function(t,e){e.length&&this.writeMessage(t,p,e)},writePackedFixed64:function(t,e){e.length&&this.writeMessage(t,g,e)},writePackedSFixed64:function(t,e){e.length&&this.writeMessage(t,m,e)},writeBytesField:function(t,e){this.writeTag(t,r.Bytes),this.writeBytes(e)},writeFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeFixed32(e)},writeSFixed32Field:function(t,e){this.writeTag(t,r.Fixed32),this.writeSFixed32(e)},writeFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeFixed64(e)},writeSFixed64Field:function(t,e){this.writeTag(t,r.Fixed64),this.writeSFixed64(e)},writeVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeVarint(e)},writeSVarintField:function(t,e){this.writeTag(t,r.Varint),this.writeSVarint(e)},writeStringField:function(t,e){this.writeTag(t,r.Bytes),this.writeString(e)},writeFloatField:function(t,e){this.writeTag(t,r.Fixed32),this.writeFloat(e)},writeDoubleField:function(t,e){this.writeTag(t,r.Fixed64),this.writeDouble(e)},writeBooleanField:function(t,e){this.writeVarintField(t,!!e)}}}),a("co8nU",function(t,i){e(t.exports,"default",()=>p);var r=n("jRKCY"),o=n("3QMf6"),a=n("eJ4LZ"),s=n("a6roo"),l=n("jZquI"),h=n("9YraL"),u=n("4NB4B"),c=n("kBSVF"),f=n("6BjcK");let d=[0,0,0];var p=class{constructor(t){let e;if(this.minZoom=void 0!==t.minZoom?t.minZoom:0,this.resolutions_=t.resolutions,(0,a.assert)((0,c.isSorted)(this.resolutions_,(t,e)=>e-t,!0),"`resolutions` must be sorted in descending order"),!t.origins)for(let t=0,i=this.resolutions_.length-1;t<i;++t)if(e){if(this.resolutions_[t]/this.resolutions_[t+1]!==e){e=void 0;break}}else e=this.resolutions_[t]/this.resolutions_[t+1];this.zoomFactor_=e,this.maxZoom=this.resolutions_.length-1,this.origin_=void 0!==t.origin?t.origin:null,this.origins_=null,void 0!==t.origins&&(this.origins_=t.origins,(0,a.assert)(this.origins_.length==this.resolutions_.length,"Number of `origins` and `resolutions` must be equal"));let i=t.extent;void 0===i||this.origin_||this.origins_||(this.origin_=(0,l.getTopLeft)(i)),(0,a.assert)(!this.origin_&&this.origins_||this.origin_&&!this.origins_,"Either `origin` or `origins` must be configured, never both"),this.tileSizes_=null,void 0!==t.tileSizes&&(this.tileSizes_=t.tileSizes,(0,a.assert)(this.tileSizes_.length==this.resolutions_.length,"Number of `tileSizes` and `resolutions` must be equal")),this.tileSize_=void 0!==t.tileSize?t.tileSize:this.tileSizes_?null:o.DEFAULT_TILE_SIZE,(0,a.assert)(!this.tileSize_&&this.tileSizes_||this.tileSize_&&!this.tileSizes_,"Either `tileSize` or `tileSizes` must be configured, never both"),this.extent_=void 0!==i?i:null,this.fullTileRanges_=null,this.tmpSize_=[0,0],this.tmpExtent_=[0,0,0,0],void 0!==t.sizes?this.fullTileRanges_=t.sizes.map((t,e)=>{let o=new r.default(Math.min(0,t[0]),Math.max(t[0]-1,-1),Math.min(0,t[1]),Math.max(t[1]-1,-1));if(i){let t=this.getTileRangeForExtentAndZ(i,e);o.minX=Math.max(t.minX,o.minX),o.maxX=Math.min(t.maxX,o.maxX),o.minY=Math.max(t.minY,o.minY),o.maxY=Math.min(t.maxY,o.maxY)}return o}):i&&this.calculateTileRanges_(i)}forEachTileCoord(t,e,i){let r=this.getTileRangeForExtentAndZ(t,e);for(let t=r.minX,o=r.maxX;t<=o;++t)for(let o=r.minY,n=r.maxY;o<=n;++o)i([e,t,o])}forEachTileCoordParentTileRange(t,e,i,o){let n,a,s;let l=null,h=t[0]-1;for(2===this.zoomFactor_?(a=t[1],s=t[2]):l=this.getTileCoordExtent(t,o);h>=this.minZoom;){if(void 0!==a&&void 0!==s?(a=Math.floor(a/2),s=Math.floor(s/2),n=(0,r.createOrUpdate)(a,a,s,s,i)):n=this.getTileRangeForExtentAndZ(l,h,i),e(h,n))return!0;--h}return!1}getExtent(){return this.extent_}getMaxZoom(){return this.maxZoom}getMinZoom(){return this.minZoom}getOrigin(t){return this.origin_?this.origin_:this.origins_[t]}getResolution(t){return this.resolutions_[t]}getResolutions(){return this.resolutions_}getTileCoordChildTileRange(t,e,i){if(t[0]<this.maxZoom){if(2===this.zoomFactor_){let i=2*t[1],o=2*t[2];return(0,r.createOrUpdate)(i,i+1,o,o+1,e)}let o=this.getTileCoordExtent(t,i||this.tmpExtent_);return this.getTileRangeForExtentAndZ(o,t[0]+1,e)}return null}getTileRangeForTileCoordAndZ(t,e,i){if(e>this.maxZoom||e<this.minZoom)return null;let o=t[0],n=t[1],a=t[2];if(e===o)return(0,r.createOrUpdate)(n,a,n,a,i);if(this.zoomFactor_){let t=Math.pow(this.zoomFactor_,e-o),s=Math.floor(n*t),l=Math.floor(a*t);if(e<o)return(0,r.createOrUpdate)(s,s,l,l,i);let h=Math.floor(t*(n+1))-1,u=Math.floor(t*(a+1))-1;return(0,r.createOrUpdate)(s,h,l,u,i)}let s=this.getTileCoordExtent(t,this.tmpExtent_);return this.getTileRangeForExtentAndZ(s,e,i)}getTileRangeForExtentAndZ(t,e,i){this.getTileCoordForXYAndZ_(t[0],t[3],e,!1,d);let o=d[1],n=d[2];this.getTileCoordForXYAndZ_(t[2],t[1],e,!0,d);let a=d[1],s=d[2];return(0,r.createOrUpdate)(o,a,n,s,i)}getTileCoordCenter(t){let e=this.getOrigin(t[0]),i=this.getResolution(t[0]),r=(0,f.toSize)(this.getTileSize(t[0]),this.tmpSize_);return[e[0]+(t[1]+.5)*r[0]*i,e[1]-(t[2]+.5)*r[1]*i]}getTileCoordExtent(t,e){let i=this.getOrigin(t[0]),r=this.getResolution(t[0]),o=(0,f.toSize)(this.getTileSize(t[0]),this.tmpSize_),n=i[0]+t[1]*o[0]*r,a=i[1]-(t[2]+1)*o[1]*r,s=n+o[0]*r,h=a+o[1]*r;return(0,l.createOrUpdate)(n,a,s,h,e)}getTileCoordForCoordAndResolution(t,e,i){return this.getTileCoordForXYAndResolution_(t[0],t[1],e,!1,i)}getTileCoordForXYAndResolution_(t,e,i,r,o){let n=this.getZForResolution(i),a=i/this.getResolution(n),l=this.getOrigin(n),u=(0,f.toSize)(this.getTileSize(n),this.tmpSize_),c=a*(t-l[0])/i/u[0],d=a*(l[1]-e)/i/u[1];return r?(c=(0,s.ceil)(c,5)-1,d=(0,s.ceil)(d,5)-1):(c=(0,s.floor)(c,5),d=(0,s.floor)(d,5)),(0,h.createOrUpdate)(n,c,d,o)}getTileCoordForXYAndZ_(t,e,i,r,o){let n=this.getOrigin(i),a=this.getResolution(i),l=(0,f.toSize)(this.getTileSize(i),this.tmpSize_),u=(t-n[0])/a/l[0],c=(n[1]-e)/a/l[1];return r?(u=(0,s.ceil)(u,5)-1,c=(0,s.ceil)(c,5)-1):(u=(0,s.floor)(u,5),c=(0,s.floor)(c,5)),(0,h.createOrUpdate)(i,u,c,o)}getTileCoordForCoordAndZ(t,e,i){return this.getTileCoordForXYAndZ_(t[0],t[1],e,!1,i)}getTileCoordResolution(t){return this.resolutions_[t[0]]}getTileSize(t){return this.tileSize_?this.tileSize_:this.tileSizes_[t]}getFullTileRange(t){return this.fullTileRanges_?this.fullTileRanges_[t]:this.extent_?this.getTileRangeForExtentAndZ(this.extent_,t):null}getZForResolution(t,e){let i=(0,c.linearFindNearest)(this.resolutions_,t,e||0);return(0,s.clamp)(i,this.minZoom,this.maxZoom)}tileCoordIntersectsViewport(t,e){return(0,u.intersectsLinearRing)(e,0,e.length,2,this.getTileCoordExtent(t))}calculateTileRanges_(t){let e=this.resolutions_.length,i=Array(e);for(let r=this.minZoom;r<e;++r)i[r]=this.getTileRangeForExtentAndZ(t,r);this.fullTileRanges_=i}}}),a("9YraL",function(t,i){function r(t,e,i,r){return void 0!==r?(r[0]=t,r[1]=e,r[2]=i,r):[t,e,i]}function o(t,e,i){return t+"/"+e+"/"+i}function n(t){return o(t[0],t[1],t[2])}function a(t){let[e,i,r]=t.substring(t.lastIndexOf("/")+1,t.length).split(",").map(Number);return o(e,i,r)}function s(t){return t.split("/").map(Number)}function l(t){return(t[1]<<t[0])+t[2]}function h(t,e){let i=t[0],r=t[1],o=t[2];if(e.getMinZoom()>i||i>e.getMaxZoom())return!1;let n=e.getFullTileRange(i);return!n||n.containsXY(r,o)}e(t.exports,"createOrUpdate",()=>r),e(t.exports,"getKeyZXY",()=>o),e(t.exports,"getKey",()=>n),e(t.exports,"getCacheKeyForTileKey",()=>a),e(t.exports,"fromKey",()=>s),e(t.exports,"hash",()=>l),e(t.exports,"withinExtentAndZ",()=>h)}),a("4evd8",function(t,i){e(t.exports,"default",()=>c);var r=n("42VYg"),o=n("jZquI"),a=n("ga5CQ"),s=n("5NhYx"),l=n("gzr8q"),h=n("gNxZS");class u extends r.default{constructor(t){if(super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:(0,l.get)("EPSG:3857"),reprojectionErrorThreshold:t.reprojectionErrorThreshold,state:"loading",tileLoadFunction:t.tileLoadFunction,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.tileJSON_=null,this.tileSize_=t.tileSize,t.url){if(t.jsonp)(0,h.jsonp)(t.url,this.handleTileJSONResponse.bind(this),this.handleTileJSONError.bind(this));else{let e=new XMLHttpRequest;e.addEventListener("load",this.onXHRLoad_.bind(this)),e.addEventListener("error",this.onXHRError_.bind(this)),e.open("GET",t.url),e.send()}}else if(t.tileJSON)this.handleTileJSONResponse(t.tileJSON);else throw Error("Either `url` or `tileJSON` options must be provided")}onXHRLoad_(t){let e=t.target;if(!e.status||e.status>=200&&e.status<300){let t;try{t=JSON.parse(e.responseText)}catch(t){this.handleTileJSONError();return}this.handleTileJSONResponse(t)}else this.handleTileJSONError()}onXHRError_(t){this.handleTileJSONError()}getTileJSON(){return this.tileJSON_}handleTileJSONResponse(t){let e;let i=(0,l.get)("EPSG:4326"),r=this.getProjection();if(void 0!==t.bounds){let n=(0,l.getTransformFromProjections)(i,r);e=(0,o.applyTransform)(t.bounds,n)}let n=(0,s.extentFromProjection)(r),h=t.minzoom||0,u=t.maxzoom||22,c=(0,s.createXYZ)({extent:n,maxZoom:u,minZoom:h,tileSize:this.tileSize_});if(this.tileGrid=c,this.tileUrlFunction=(0,a.createFromTemplates)(t.tiles,c),t.attribution&&!this.getAttributions()){let i=void 0!==e?e:n;this.setAttributions(function(e){return(0,o.intersects)(i,e.extent)?[t.attribution]:null})}this.tileJSON_=t,this.setState("ready")}handleTileJSONError(){this.setState("error")}}var c=u}),a("42VYg",function(t,i){e(t.exports,"default",()=>m);var r=n("cw4dl"),o=n("6EHBB"),a=n("lUH7Q"),s=n("85w1a"),l=n("av38f"),h=n("5k6kp"),u=n("gzr8q"),c=n("9YraL"),f=n("5NhYx"),d=n("lVQul");class p extends h.default{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:g,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:t.wrapX,transition:t.transition,interpolate:void 0===t.interpolate||t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.crossOrigin=void 0!==t.crossOrigin?t.crossOrigin:null,this.tileClass=void 0!==t.tileClass?t.tileClass:o.default,this.tileCacheForProjection={},this.tileGridForProjection={},this.reprojectionErrorThreshold_=t.reprojectionErrorThreshold,this.renderReprojectionEdges_=!1}canExpireCache(){if(this.tileCache.canExpireCache())return!0;for(let t in this.tileCacheForProjection)if(this.tileCacheForProjection[t].canExpireCache())return!0;return!1}expireCache(t,e){let i=this.getTileCacheForProjection(t);for(let t in this.tileCache.expireCache(this.tileCache==i?e:{}),this.tileCacheForProjection){let r=this.tileCacheForProjection[t];r.expireCache(r==i?e:{})}}getGutterForProjection(t){return this.getProjection()&&t&&!(0,u.equivalent)(this.getProjection(),t)?0:this.getGutter()}getGutter(){return 0}getKey(){let t=super.getKey();return this.getInterpolate()||(t+=":disable-interpolation"),t}getOpaque(t){return(!this.getProjection()||!t||!!(0,u.equivalent)(this.getProjection(),t))&&super.getOpaque(t)}getTileGridForProjection(t){let e=this.getProjection();if(this.tileGrid&&(!e||(0,u.equivalent)(e,t)))return this.tileGrid;let i=(0,d.getUid)(t);return i in this.tileGridForProjection||(this.tileGridForProjection[i]=(0,f.getForProjection)(t)),this.tileGridForProjection[i]}getTileCacheForProjection(t){let e=this.getProjection();if(!e||(0,u.equivalent)(e,t))return this.tileCache;let i=(0,d.getUid)(t);return i in this.tileCacheForProjection||(this.tileCacheForProjection[i]=new s.default(this.tileCache.highWaterMark)),this.tileCacheForProjection[i]}createTile_(t,e,i,o,n,a){let s=[t,e,i],h=this.getTileCoordForTileUrlFunction(s,n),u=h?this.tileUrlFunction(h,o,n):void 0,c=new this.tileClass(s,void 0!==u?l.default.IDLE:l.default.EMPTY,void 0!==u?u:"",this.crossOrigin,this.tileLoadFunction,this.tileOptions);return c.key=a,c.addEventListener(r.default.CHANGE,this.handleTileChange.bind(this)),c}getTile(t,e,i,r,o){let n;let s=this.getProjection();if(!s||!o||(0,u.equivalent)(s,o))return this.getTileInternal(t,e,i,r,s||o);let l=this.getTileCacheForProjection(o),h=[t,e,i],f=(0,c.getKey)(h);l.containsKey(f)&&(n=l.get(f));let d=this.getKey();if(n&&n.key==d)return n;let p=this.getTileGridForProjection(s),g=this.getTileGridForProjection(o),m=this.getTileCoordForTileUrlFunction(h,o),y=new a.default(s,p,o,g,h,m,this.getTilePixelRatio(r),this.getGutter(),(t,e,i,r)=>this.getTileInternal(t,e,i,r,s),this.reprojectionErrorThreshold_,this.renderReprojectionEdges_,this.tileOptions);return y.key=d,n?(y.interimTile=n,y.refreshInterimChain(),l.replace(f,y)):l.set(f,y),y}getTileInternal(t,e,i,r,o){let n=null,a=(0,c.getKeyZXY)(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)){if((n=this.tileCache.get(a)).key!=s){let h=n;n=this.createTile_(t,e,i,r,o,s),h.getState()==l.default.IDLE?n.interimTile=h.interimTile:n.interimTile=h,n.refreshInterimChain(),this.tileCache.replace(a,n)}}else n=this.createTile_(t,e,i,r,o,s),this.tileCache.set(a,n);return n}setRenderReprojectionEdges(t){if(this.renderReprojectionEdges_!=t){for(let e in this.renderReprojectionEdges_=t,this.tileCacheForProjection)this.tileCacheForProjection[e].clear();this.changed()}}setTileGridForProjection(t,e){let i=(0,u.get)(t);if(i){let t=(0,d.getUid)(i);t in this.tileGridForProjection||(this.tileGridForProjection[t]=e)}}clear(){for(let t in super.clear(),this.tileCacheForProjection)this.tileCacheForProjection[t].clear()}}function g(t,e){t.getImage().src=e}var m=p}),a("85w1a",function(t,i){e(t.exports,"default",()=>s);var r=n("1rfTO"),o=n("9YraL");class a extends r.default{clear(){for(;this.getCount()>0;)this.pop().release();super.clear()}expireCache(t){for(;this.canExpireCache()&&!(this.peekLast().getKey() in t);)this.pop().release()}pruneExceptNewestZ(){if(0===this.getCount())return;let t=this.peekFirstKey(),e=(0,o.fromKey)(t)[0];this.forEach(t=>{t.tileCoord[0]!==e&&(this.remove((0,o.getKey)(t.tileCoord)),t.release())})}}var s=a}),a("1rfTO",function(t,i){e(t.exports,"default",()=>o);var r=n("eJ4LZ"),o=class{constructor(t){this.highWaterMark=void 0!==t?t:2048,this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}canExpireCache(){return this.highWaterMark>0&&this.getCount()>this.highWaterMark}expireCache(t){for(;this.canExpireCache();)this.pop()}clear(){this.count_=0,this.entries_={},this.oldest_=null,this.newest_=null}containsKey(t){return this.entries_.hasOwnProperty(t)}forEach(t){let e=this.oldest_;for(;e;)t(e.value_,e.key_,this),e=e.newer}get(t,e){let i=this.entries_[t];return(0,r.assert)(void 0!==i,"Tried to get a value for a key that does not exist in the cache"),i===this.newest_||(i===this.oldest_?(this.oldest_=this.oldest_.newer,this.oldest_.older=null):(i.newer.older=i.older,i.older.newer=i.newer),i.newer=null,i.older=this.newest_,this.newest_.newer=i,this.newest_=i),i.value_}remove(t){let e=this.entries_[t];return(0,r.assert)(void 0!==e,"Tried to get a value for a key that does not exist in the cache"),e===this.newest_?(this.newest_=e.older,this.newest_&&(this.newest_.newer=null)):e===this.oldest_?(this.oldest_=e.newer,this.oldest_&&(this.oldest_.older=null)):(e.newer.older=e.older,e.older.newer=e.newer),delete this.entries_[t],--this.count_,e.value_}getCount(){return this.count_}getKeys(){let t;let e=Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.key_;return e}getValues(){let t;let e=Array(this.count_),i=0;for(t=this.newest_;t;t=t.older)e[i++]=t.value_;return e}peekLast(){return this.oldest_.value_}peekLastKey(){return this.oldest_.key_}peekFirstKey(){return this.newest_.key_}peek(t){return this.entries_[t]?.value_}pop(){let t=this.oldest_;return delete this.entries_[t.key_],t.newer&&(t.newer.older=null),this.oldest_=t.newer,this.oldest_||(this.newest_=null),--this.count_,t.value_}replace(t,e){this.get(t),this.entries_[t].value_=e}set(t,e){(0,r.assert)(!(t in this.entries_),"Tried to set a value for a key that is used already");let i={key_:t,newer:null,older:this.newest_,value_:e};this.newest_?this.newest_.newer=i:this.oldest_=i,this.newest_=i,this.entries_[t]=i,++this.count_}setSize(t){this.highWaterMark=t}}}),a("5k6kp",function(t,i){e(t.exports,"default",()=>c);var r=n("65P3L"),o=n("cpPSZ"),a=n("av38f"),s=n("ga5CQ"),l=n("9YraL"),h=n("lVQul");class u extends o.default{constructor(t){super({attributions:t.attributions,cacheSize:t.cacheSize,opaque:t.opaque,projection:t.projection,state:t.state,tileGrid:t.tileGrid,tilePixelRatio:t.tilePixelRatio,wrapX:t.wrapX,transition:t.transition,interpolate:t.interpolate,key:t.key,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.generateTileUrlFunction_=this.tileUrlFunction===u.prototype.tileUrlFunction,this.tileLoadFunction=t.tileLoadFunction,t.tileUrlFunction&&(this.tileUrlFunction=t.tileUrlFunction),this.urls=null,t.urls?this.setUrls(t.urls):t.url&&this.setUrl(t.url),this.tileLoadingKeys_={}}getTileLoadFunction(){return this.tileLoadFunction}getTileUrlFunction(){return Object.getPrototypeOf(this).tileUrlFunction===this.tileUrlFunction?this.tileUrlFunction.bind(this):this.tileUrlFunction}getUrls(){return this.urls}handleTileChange(t){let e;let i=t.target,n=(0,h.getUid)(i),s=i.getState();s==a.default.LOADING?(this.tileLoadingKeys_[n]=!0,e=r.default.TILELOADSTART):n in this.tileLoadingKeys_&&(delete this.tileLoadingKeys_[n],e=s==a.default.ERROR?r.default.TILELOADERROR:s==a.default.LOADED?r.default.TILELOADEND:void 0),void 0!=e&&this.dispatchEvent(new o.TileSourceEvent(e,i))}setTileLoadFunction(t){this.tileCache.clear(),this.tileLoadFunction=t,this.changed()}setTileUrlFunction(t,e){this.tileUrlFunction=t,this.tileCache.pruneExceptNewestZ(),void 0!==e?this.setKey(e):this.changed()}setUrl(t){let e=(0,s.expandUrl)(t);this.urls=e,this.setUrls(e)}setUrls(t){this.urls=t;let e=t.join("\n");this.generateTileUrlFunction_?this.setTileUrlFunction((0,s.createFromTemplates)(t,this.tileGrid),e):this.setKey(e)}tileUrlFunction(t,e,i){}useTile(t,e,i){let r=(0,l.getKeyZXY)(t,e,i);this.tileCache.containsKey(r)&&this.tileCache.get(r)}}var c=u}),a("65P3L",function(t,i){e(t.exports,"default",()=>r);var r={TILELOADSTART:"tileloadstart",TILELOADEND:"tileloadend",TILELOADERROR:"tileloaderror"}}),a("cpPSZ",function(t,i){e(t.exports,"TileSourceEvent",()=>g),e(t.exports,"default",()=>m);var r=n("iTTi2"),o=n("205E0"),a=n("85w1a"),s=n("av38f"),l=n("lVQul"),h=n("eJ4LZ"),u=n("gzr8q"),c=n("9YraL"),f=n("5NhYx"),d=n("6BjcK");class p extends o.default{constructor(t){super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,projection:t.projection,state:t.state,wrapX:t.wrapX,interpolate:t.interpolate}),this.on,this.once,this.un,this.opaque_=void 0!==t.opaque&&t.opaque,this.tilePixelRatio_=void 0!==t.tilePixelRatio?t.tilePixelRatio:1,this.tileGrid=void 0!==t.tileGrid?t.tileGrid:null,this.tileGrid&&(0,d.toSize)(this.tileGrid.getTileSize(this.tileGrid.getMinZoom()),[256,256]),this.tileCache=new a.default(t.cacheSize||0),this.tmpSize=[0,0],this.key_=t.key||"",this.tileOptions={transition:t.transition,interpolate:t.interpolate},this.zDirection=t.zDirection?t.zDirection:0}canExpireCache(){return this.tileCache.canExpireCache()}expireCache(t,e){let i=this.getTileCacheForProjection(t);i&&i.expireCache(e)}forEachLoadedTile(t,e,i,r){let o,n,a;let l=this.getTileCacheForProjection(t);if(!l)return!1;let h=!0;for(let t=i.minX;t<=i.maxX;++t)for(let u=i.minY;u<=i.maxY;++u)n=(0,c.getKeyZXY)(e,t,u),a=!1,l.containsKey(n)&&(a=(o=l.get(n)).getState()===s.default.LOADED)&&(a=!1!==r(o)),a||(h=!1);return h}getGutterForProjection(t){return 0}getKey(){return this.key_}setKey(t){this.key_!==t&&(this.key_=t,this.changed())}getOpaque(t){return this.opaque_}getResolutions(t){let e=t?this.getTileGridForProjection(t):this.tileGrid;return e?e.getResolutions():null}getTile(t,e,i,r,o){return(0,l.abstract)()}getTileGrid(){return this.tileGrid}getTileGridForProjection(t){return this.tileGrid?this.tileGrid:(0,f.getForProjection)(t)}getTileCacheForProjection(t){let e=this.getProjection();return(0,h.assert)(null===e||(0,u.equivalent)(e,t),"A VectorTile source can only be rendered if it has a projection compatible with the view projection."),this.tileCache}getTilePixelRatio(t){return this.tilePixelRatio_}getTilePixelSize(t,e,i){let r=this.getTileGridForProjection(i),o=this.getTilePixelRatio(e),n=(0,d.toSize)(r.getTileSize(t),this.tmpSize);return 1==o?n:(0,d.scale)(n,o,this.tmpSize)}getTileCoordForTileUrlFunction(t,e){e=void 0!==e?e:this.getProjection();let i=this.getTileGridForProjection(e);return this.getWrapX()&&e.isGlobal()&&(t=(0,f.wrapX)(i,t,e)),(0,c.withinExtentAndZ)(t,i)?t:null}clear(){this.tileCache.clear()}refresh(){this.clear(),super.refresh()}updateCacheSize(t,e){let i=this.getTileCacheForProjection(e);t>i.highWaterMark&&(i.highWaterMark=t)}useTile(t,e,i,r){}}class g extends r.default{constructor(t,e){super(t),this.tile=e}}var m=p}),a("5NhYx",function(t,i){e(t.exports,"getForProjection",()=>h),e(t.exports,"wrapX",()=>u),e(t.exports,"extentFromProjection",()=>d),e(t.exports,"createXYZ",()=>c);var r=n("co8nU"),o=n("3QMf6"),a=n("gzr8q"),s=n("jZquI"),l=n("6BjcK");function h(t){let e=t.getDefaultTileGrid();return e||(e=function(t,e,i,o){o=void 0!==o?o:"top-left";let n=f(t,e,i);return new r.default({extent:t,origin:(0,s.getCorner)(t,o),resolutions:n,tileSize:i})}(d(t),void 0,void 0,void 0),t.setDefaultTileGrid(e)),e}function u(t,e,i){let r=e[0],o=t.getTileCoordCenter(e),n=d(i);if(!(0,s.containsCoordinate)(n,o)){let e=(0,s.getWidth)(n),i=Math.ceil((n[0]-o[0])/e);return o[0]+=e*i,t.getTileCoordForCoordAndZ(o,r)}return e}function c(t){let e=t||{},i=e.extent||(0,a.get)("EPSG:3857").getExtent(),o={extent:i,minZoom:e.minZoom,tileSize:e.tileSize,resolutions:f(i,e.maxZoom,e.tileSize,e.maxResolution)};return new r.default(o)}function f(t,e,i,r){e=void 0!==e?e:o.DEFAULT_MAX_ZOOM,i=(0,l.toSize)(void 0!==i?i:o.DEFAULT_TILE_SIZE);let n=(0,s.getHeight)(t),a=(0,s.getWidth)(t);r=r>0?r:Math.max(a/i[0],n/i[1]);let h=e+1,u=Array(h);for(let t=0;t<h;++t)u[t]=r/Math.pow(2,t);return u}function d(t){let e=(t=(0,a.get)(t)).getExtent();if(!e){let i=180*a.METERS_PER_UNIT.degrees/t.getMetersPerUnit();e=(0,s.createOrUpdate)(-i,-i,i,i)}return e}}),a("ga5CQ",function(t,i){e(t.exports,"createFromTemplates",()=>a),e(t.exports,"createFromTileUrlFunctions",()=>s),e(t.exports,"expandUrl",()=>l);var r=n("a6roo"),o=n("9YraL");function a(t,e){let i=t.length,r=Array(i);for(let o=0;o<i;++o)r[o]=function(t,e){let i=/\{z\}/g,r=/\{x\}/g,o=/\{y\}/g,n=/\{-y\}/g;return function(a,s,l){if(a)return t.replace(i,a[0].toString()).replace(r,a[1].toString()).replace(o,a[2].toString()).replace(n,function(){let t=a[0],i=e.getFullTileRange(t);if(!i)throw Error("The {-y} placeholder requires a tile grid with extent");return(i.getHeight()-a[2]-1).toString()})}}(t[o],e);return s(r)}function s(t){return 1===t.length?t[0]:function(e,i,n){if(!e)return;let a=(0,o.hash)(e),s=(0,r.modulo)(a,t.length);return t[s](e,i,n)}}function l(t){let e=[],i=/\{([a-z])-([a-z])\}/.exec(t);if(i){let r;let o=i[1].charCodeAt(0),n=i[2].charCodeAt(0);for(r=o;r<=n;++r)e.push(t.replace(i[0],String.fromCharCode(r)));return e}if(i=/\{(\d+)-(\d+)\}/.exec(t)){let r=parseInt(i[2],10);for(let o=parseInt(i[1],10);o<=r;o++)e.push(t.replace(i[0],o.toString()));return e}return e.push(t),e}}),a("gNxZS",function(t,i){e(t.exports,"jsonp",()=>o);var r=n("lVQul");function o(t,e,i,o){let n=document.createElement("script"),a="olc_"+(0,r.getUid)(e);function s(){delete window[a],n.parentNode.removeChild(n)}n.async=!0,n.src=t+(t.includes("?")?"&":"?")+(o||"callback")+"="+a;let l=setTimeout(function(){s(),i&&i()},1e4);window[a]=function(t){clearTimeout(l),s(),e(t)},document.head.appendChild(n)}}),a("eEuqc",function(t,i){e(t.exports,"default",()=>s);var r=n("g0oXy"),o=n("1FnBm");class a extends r.default{constructor(t){super(t)}createRenderer(){return new o.default(this)}}var s=a}),a("g0oXy",function(t,i){e(t.exports,"default",()=>s);var r=n("2K2IB"),o=n("8ElLP");class a extends r.default{constructor(t){let e=Object.assign({},t=t||{});delete e.preload,delete e.useInterimTilesOnError,super(e),this.on,this.once,this.un,this.setPreload(void 0!==t.preload?t.preload:0),this.setUseInterimTilesOnError(void 0===t.useInterimTilesOnError||t.useInterimTilesOnError)}getPreload(){return this.get(o.default.PRELOAD)}setPreload(t){this.set(o.default.PRELOAD,t)}getUseInterimTilesOnError(){return this.get(o.default.USE_INTERIM_TILES_ON_ERROR)}setUseInterimTilesOnError(t){this.set(o.default.USE_INTERIM_TILES_ON_ERROR,t)}getData(t){return super.getData(t)}}var s=a}),a("5Nyxy",function(t,i){e(t.exports,"defaultLoadFunction",()=>b),e(t.exports,"default",()=>v);var r=n("cw4dl"),o=n("cFxEe"),a=n("85w1a"),s=n("co8nU"),l=n("av38f"),h=n("5k6kp"),u=n("25aE7"),c=n("3QMf6"),f=n("jZquI"),d=n("5NhYx"),p=n("9YraL"),g=n("kKEgb"),m=n("kWPIP"),y=n("6BjcK");class x extends h.default{constructor(t){let e=t.projection||"EPSG:3857";super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,interpolate:!0,opaque:!1,projection:e,state:t.state,tileGrid:t.tileGrid||(0,d.createXYZ)({extent:t.extent||(0,d.extentFromProjection)(e),maxResolution:t.maxResolution,maxZoom:void 0!==t.maxZoom?t.maxZoom:22,minZoom:t.minZoom,tileSize:t.tileSize||512}),tileLoadFunction:t.tileLoadFunction?t.tileLoadFunction:b,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:void 0===t.zDirection?1:t.zDirection}),this.format_=t.format?t.format:null,this.sourceTileCache=new a.default(this.tileCache.highWaterMark),this.overlaps_=void 0==t.overlaps||t.overlaps,this.tileClass=t.tileClass?t.tileClass:o.default,this.tileGrids_={}}getFeaturesInExtent(t){let e=[],i=this.tileCache;if(0===i.getCount())return e;let r=(0,p.fromKey)(i.peekFirstKey())[0],o=this.tileGrid;return i.forEach(function(i){if(i.tileCoord[0]!==r||i.getState()!==l.default.LOADED)return;let n=i.getSourceTiles();for(let i=0,r=n.length;i<r;++i){let r=n[i],a=r.tileCoord;if((0,f.intersects)(t,o.getTileCoordExtent(a))){let i=r.getFeatures();if(i)for(let r=0,o=i.length;r<o;++r){let o=i[r],n=o.getGeometry();(0,f.intersects)(t,n.getExtent())&&e.push(o)}}}}),e}getOverlaps(){return this.overlaps_}clear(){this.tileCache.clear(),this.sourceTileCache.clear()}expireCache(t,e){let i=this.getTileCacheForProjection(t),r=Object.keys(e).reduce((t,e)=>{let r=(0,p.getCacheKeyForTileKey)(e),o=i.peek(r);if(o){let e=o.sourceTiles;for(let i=0,r=e.length;i<r;++i)t[e[i].getKey()]=!0}return t},{});super.expireCache(t,e),this.sourceTileCache.expireCache(r)}getSourceTiles(t,e,i){if(i.getState()===l.default.IDLE){i.setState(l.default.LOADING);let o=i.wrappedTileCoord,n=this.getTileGridForProjection(e),a=n.getTileCoordExtent(o),s=o[0],h=n.getResolution(s);(0,f.buffer)(a,-h,a);let u=this.tileGrid,c=u.getExtent();c&&(0,f.getIntersection)(a,c,a);let d=u.getZForResolution(h,this.zDirection);u.forEachTileCoord(a,d,o=>{let n=this.tileUrlFunction(o,t,e),a=this.sourceTileCache.containsKey(n)?this.sourceTileCache.get(n):new this.tileClass(o,n?l.default.IDLE:l.default.EMPTY,n,this.format_,this.tileLoadFunction);i.sourceTiles.push(a);let s=a.getState();if(s<l.default.LOADED){let t=e=>{this.handleTileChange(e);let o=a.getState();if(o===l.default.LOADED||o===l.default.ERROR){let e=a.getKey();e in i.errorTileKeys?a.getState()===l.default.LOADED&&delete i.errorTileKeys[e]:i.loadingSourceTiles--,o===l.default.ERROR?i.errorTileKeys[e]=!0:a.removeEventListener(r.default.CHANGE,t),0===i.loadingSourceTiles&&i.setState((0,g.isEmpty)(i.errorTileKeys)?l.default.LOADED:l.default.ERROR)}};a.addEventListener(r.default.CHANGE,t),i.loadingSourceTiles++}s===l.default.IDLE&&(a.extent=u.getTileCoordExtent(o),a.projection=e,a.resolution=u.getResolution(o[0]),this.sourceTileCache.set(n,a),a.load())}),i.loadingSourceTiles||i.setState(i.sourceTiles.some(t=>t.getState()===l.default.ERROR)?l.default.ERROR:l.default.LOADED)}return i.sourceTiles}getTile(t,e,i,r,o){let n;let a=(0,p.getKeyZXY)(t,e,i),s=this.getKey();if(this.tileCache.containsKey(a)&&(n=this.tileCache.get(a)).key===s)return n;let h=[t,e,i],c=this.getTileCoordForTileUrlFunction(h,o),d=this.getTileGrid().getExtent(),g=this.getTileGridForProjection(o);if(c&&d){let e=g.getTileCoordExtent(c);(0,f.buffer)(e,-g.getResolution(t),e),(0,f.intersects)(d,e)||(c=null)}let m=!0;if(null!==c){let e=this.tileGrid,i=g.getResolution(t),n=e.getZForResolution(i,1),a=g.getTileCoordExtent(c);(0,f.buffer)(a,-i,a),e.forEachTileCoord(a,n,t=>{m=m&&!this.tileUrlFunction(t,r,o)})}let y=new u.default(h,m?l.default.EMPTY:l.default.IDLE,c,this.getSourceTiles.bind(this,r,o));return y.key=s,n?(y.interimTile=n,y.refreshInterimChain(),this.tileCache.replace(a,y)):this.tileCache.set(a,y),y}getTileGridForProjection(t){let e=t.getCode(),i=this.tileGrids_[e];if(!i){let t=this.tileGrid,r=t.getResolutions().slice(),o=r.map(function(e,i){return t.getOrigin(i)}),n=r.map(function(e,i){return t.getTileSize(i)}),a=c.DEFAULT_MAX_ZOOM+1;for(let t=r.length;t<a;++t)r.push(r[t-1]/2),o.push(o[t-1]),n.push(n[t-1]);i=new s.default({extent:t.getExtent(),origins:o,resolutions:r,tileSizes:n}),this.tileGrids_[e]=i}return i}getTilePixelRatio(t){return t}getTilePixelSize(t,e,i){let r=this.getTileGridForProjection(i),o=(0,y.toSize)(r.getTileSize(t),this.tmpSize);return[Math.round(o[0]*e),Math.round(o[1]*e)]}updateCacheSize(t,e){super.updateCacheSize(2*t,e),this.sourceTileCache.highWaterMark=this.getTileCacheForProjection(e).highWaterMark}}var v=x;function b(t,e){t.setLoader(function(i,r,o){(0,m.loadFeaturesXhr)(e,t.getFormat(),i,r,o,t.onLoad.bind(t),t.onError.bind(t))})}}),a("cFxEe",function(t,i){e(t.exports,"default",()=>s);var r=n("hMeZw"),o=n("av38f");class a extends r.default{constructor(t,e,i,r,o,n){super(t,e,n),this.extent=null,this.format_=r,this.features_=null,this.loader_,this.projection=null,this.resolution,this.tileLoadFunction_=o,this.url_=i,this.key=i}getFormat(){return this.format_}getFeatures(){return this.features_}load(){this.state==o.default.IDLE&&(this.setState(o.default.LOADING),this.tileLoadFunction_(this,this.url_),this.loader_&&this.loader_(this.extent,this.resolution,this.projection))}onLoad(t,e){this.setFeatures(t)}onError(){this.setState(o.default.ERROR)}setFeatures(t){this.features_=t,this.setState(o.default.LOADED)}setLoader(t){this.loader_=t}}var s=a}),a("25aE7",function(t,i){e(t.exports,"default",()=>h);var r=n("hMeZw"),o=n("cgxQK"),a=n("lVQul");let s=[];class l extends r.default{constructor(t,e,i,r){super(t,e,{transition:0}),this.context_={},this.executorGroups={},this.declutterExecutorGroups={},this.loadingSourceTiles=0,this.hitDetectionImageData={},this.replayState_={},this.sourceTiles=[],this.errorTileKeys={},this.wantedResolution,this.getSourceTiles=r.bind(void 0,this),this.wrappedTileCoord=i}getContext(t){let e=(0,a.getUid)(t);return e in this.context_||(this.context_[e]=(0,o.createCanvasContext2D)(1,1,s)),this.context_[e]}hasContext(t){return(0,a.getUid)(t) in this.context_}getImage(t){return this.hasContext(t)?this.getContext(t).canvas:null}getReplayState(t){let e=(0,a.getUid)(t);return e in this.replayState_||(this.replayState_[e]={dirty:!1,renderedRenderOrder:null,renderedResolution:NaN,renderedRevision:-1,renderedTileResolution:NaN,renderedTileRevision:-1,renderedTileZ:-1}),this.replayState_[e]}load(){this.getSourceTiles()}release(){for(let t in this.context_){let e=this.context_[t];(0,o.releaseCanvas)(e),s.push(e.canvas),delete this.context_[t]}super.release()}}var h=l}),a("fkmMz",function(t,i){e(t.exports,"default",()=>a);var r=n("fnScq"),o=class extends r.default{constructor(t){t=t||{},super(),this._auth=t.auth,this.set("dataType",t.dataType||"JSON")}static get(t){var e=new o(t);t.success&&e.on("success",function(e){t.success(e.response,e)}),t.error&&e.on("error",function(e){t.error(e)}),e.send(t.url,t.data,t.options)}static getCORS(t,e){var i=new XMLHttpRequest;i.open("GET",t,!0),i.send(),i.onreadystatechange=function(){this.readyState==this.HEADERS_RECEIVED&&e(i.getResponseHeader("Access-Control-Allow-Origin"))}}send(t,e,i){var r=this,o=!1!==(i=i||{}).encode;o&&(t=encodeURI(t));var n="";for(var a in e)e.hasOwnProperty(a)&&void 0!==e[a]&&(n+=(n?"&":"?")+a+"="+(o?encodeURIComponent(e[a]):e[a]));this._request&&!1!==i.abort&&this._request.abort();var s=this._request=new XMLHttpRequest;s.open("GET",t+n,!0),i.timeout&&(s.timeout=i.timeout),this._auth&&s.setRequestHeader("Authorization","Basic "+this._auth),this.dispatchEvent({type:"loadstart"}),s.onload=function(){if(r._request=null,r.dispatchEvent({type:"loadend"}),this.status>=200&&this.status<400){var t;try{t="JSON"===r.get("dataType")?JSON.parse(this.response):this.response}catch(t){r.dispatchEvent({type:"error",status:0,statusText:"parsererror",error:t,options:i,jqXHR:this});return}r.dispatchEvent({type:"success",response:t,status:this.status,statusText:this.statusText,options:i,jqXHR:this})}else r.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},s.ontimeout=function(){r._request=null,r.dispatchEvent({type:"loadend"}),r.dispatchEvent({type:"error",status:this.status,statusText:"Timeout",options:i,jqXHR:this})},s.onerror=function(){r._request=null,r.dispatchEvent({type:"loadend"}),r.dispatchEvent({type:"error",status:this.status,statusText:this.statusText,options:i,jqXHR:this})},s.send()}},a=o}),a("6cpWg",function(t,i){e(t.exports,"default",()=>o);var r=n("4DafG"),o=class extends r.default{constructor(t){t=t||{};var e=document.createElement("DIV");if(e.classList.add("ol-unselectable","ol-control","ol-bar"),t.className){var i=t.className.split(" ").filter(function(t){return t.length>0});e.classList.add.apply(e.classList,i)}if(t.group&&e.classList.add("ol-group"),super({element:e,target:t.target}),this.set("toggleOne",t.toggleOne),this.set("autoDeactivate",t.autoDeactivate),this.controls_=[],t.controls instanceof Array)for(var r=0;r<t.controls.length;r++)this.addControl(t.controls[r])}setVisible(t){t?this.element.style.display="":this.element.style.display="none"}getVisible(){return"none"!=this.element.style.display}setMap(t){super.setMap(t);for(var e=0;e<this.controls_.length;e++)this.controls_[e].setMap(t)}getControls(){return this.controls_}setPosition(t){this.element.classList.remove("ol-left","ol-top","ol-bottom","ol-right"),t=t.split("-");for(var e=0;e<t.length;e++)switch(t[e]){case"top":case"left":case"bottom":case"right":this.element.classList.add("ol-"+t[e])}}addControl(t){this.controls_.push(t),t.setTarget(this.element),this.getMap()&&this.getMap().addControl(t),t._activateBar&&t.un("change:active",t._activateBar),t._activateBar=(function(e){this.onActivateControl_(e,t)}).bind(this),t.on("change:active",t._activateBar),t.getActive&&this.onActivateControl_({target:t,active:t.getActive()},t)}removeControl(t){let e=this.controls_.indexOf(t);e>-1&&(this.controls_.splice(e,1),this.getMap()&&this.getMap().removeControl(t),t._activateBar&&t.un("change:active",t._activateBar),delete t._activateBar)}deactivateControls(t){for(var e=0;e<this.controls_.length;e++)this.controls_[e]!==t&&this.controls_[e].setActive&&this.controls_[e].setActive(!1)}getActiveControls(){for(var t,e=[],i=0;t=this.controls_[i];i++)t.getActive&&t.getActive()&&e.push(t);return e}setActive(t){if(!t&&this.get("autoDeactivate")&&this.deactivateControls(),t)for(var e,i=this.getControls(),r=0;e=i[r];r++)e.get("autoActivate")&&e.setActive(!0)}onActivateControl_(t,e){if(this.get("toggleOne")){if(t.active){var i;for(i=0;i<this.controls_.length&&this.controls_[i]!==e;i++);if(i==this.controls_.length)return;this.deactivateControls(this.controls_[i])}else if(!this.getActiveControls().length){for(var r,o=0;r=this.controls_[o];o++)if(r.get("autoActivate")){r.setActive(!0);break}}}t.type?this.dispatchEvent({type:"control:active",control:e,active:t.active}):this.dispatchEvent({type:"control:add",control:e,active:t.active})}getControlsByName(t){return this.getControls().filter(function(e){return e.get("name")===t})}}}),a("93mJv",function(t,i){e(t.exports,"default",()=>u);var r=n("ejLRd"),o=n("ao9pQ"),a=n("l9IGS"),s=n("lqNjm"),l=n("6sFdl"),h=n("iQyfo"),u=class extends o.default{constructor(t){super(t=t||{}),this.element.classList.add("ol-canvas-control"),this.setCanvas(!!t.canvas),t||(t={}),t.style||(t.style=new a.default),this.setStyle(t.style)}setCanvas(t){if(this.isCanvas_=t,t&&this.setCollapsed(!1),this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(t){}}setStyle(t){var e=t.getText();this.font_=e?e.getFont():"10px sans-serif";var i=e?e.getStroke():null,r=e?e.getFill():null;this.fontStrokeStyle_=i?(0,s.asString)(i.getColor()):"#fff",this.fontFillStyle_=r?(0,s.asString)(r.getColor()):"#000",this.fontStrokeWidth_=i?i.getWidth():3,this.getMap()&&this.getMap().render()}setMap(t){(0,l.default).prototype.getCanvas.call(this,t);var e=this.getMap();if(this._listener&&(0,r.unByKey)(this._listener),this._listener=null,super.setMap(t),e)try{e.renderSync()}catch(t){}t&&(this._listener=t.on("postcompose",this.drawAttribution_.bind(this))),this.setCanvas(this.isCanvas_)}drawAttribution_(t){if(this.isCanvas_){var e,i=this.getContext(t);if(i){var r="";Array.prototype.slice.call(this.element.querySelectorAll("li")).filter(function(t){return"none"!==t.style.display}).map(function(t){r+=(r?" - ":"")+t.textContent});var o=t.frameState.pixelRatio;i.save(),i.scale(o,o);var n=this.element.getBoundingClientRect(),a=this.getMap().getViewport().getBoundingClientRect(),s=this.getMap().getSize()[0]/a.width;i.translate((n.left-a.left)*s,(n.top-a.top)*s);var l=this.element.clientHeight,u=this.element.clientWidth,c=(0,h.default).getStyle(this.element,"textAlign")||"center";switch(c){case"left":e=0;break;case"right":e=u;break;default:e=u/2}i.beginPath(),i.strokeStyle=this.fontStrokeStyle_,i.fillStyle=this.fontFillStyle_,i.lineWidth=this.fontStrokeWidth_,i.textAlign=c,i.textBaseline="middle",i.font=this.font_,i.lineJoin="round",i.strokeText(r,e,l/2),i.fillText(r,e,l/2),i.closePath(),i.restore()}}}getContext(t){return(0,l.default).prototype.getContext.call(this,t)}}}),a("6sFdl",function(t,i){e(t.exports,"default",()=>c);var r=n("4DafG"),o=n("ejLRd"),a=n("l9IGS"),s=n("2zf1Y"),l=n("d5AAH"),h=n("kuKBR"),u=n("9EqYA"),c=class extends r.default{constructor(t){super(t=t||{}),this.setStyle(t.style)}setMap(t){this.getCanvas(t);var e=this.getMap();if(this._listener&&((0,o.unByKey)(this._listener),this._listener=null),super.setMap(t),e)try{e.renderSync()}catch(t){}t&&(this._listener=t.on("postcompose",this._draw.bind(this)))}getCanvas(t){return(0,u.default)(t)}getContext(t){var e=t.context;if(!e&&this.getMap()){var i=this.getMap().getViewport().getElementsByClassName("ol-fixedoverlay")[0];e=i?i.getContext("2d"):null}return e}setStyle(t){this._style=t||new a.default({})}getStyle(){return this._style}getStroke(){return this._style.getStroke()||this._style.setStroke(new l.default({color:"#000",width:1.25})),this._style.getStroke()}getFill(){return this._style.getFill()||this._style.setFill(new s.default({color:"#fff"})),this._style.getFill()}getTextStroke(){var t=this._style.getText();return t||(t=new h.default({})),t.getStroke()||t.setStroke(new l.default({color:"#fff",width:3})),t.getStroke()}getTextFill(){var t=this._style.getText();return t||(t=new h.default({})),t.getFill()||t.setFill(new s.default({color:"#fff"})),t.getFill()}getTextFont(){var t=this._style.getText();return t||(t=new h.default({})),t.getFont()||t.setFont("12px sans-serif"),t.getFont()}_draw(){console.warn("[CanvasBase] draw function not implemented.")}}}),a("9EqYA",function(t,i){e(t.exports,"default",()=>r);var r=function(t){if(!t)return null;var e=t.getViewport().getElementsByClassName("ol-fixedoverlay")[0];return e||(t.getViewport().querySelector(".ol-layers")?((e=document.createElement("canvas")).className="ol-fixedoverlay",t.getViewport().querySelector(".ol-layers").after(e),t.on("precompose",function(i){e.width=t.getSize()[0]*i.frameState.pixelRatio,e.height=t.getSize()[1]*i.frameState.pixelRatio})):e=t.getViewport().querySelector("canvas")),e}}),a("945U7",function(t,i){e(t.exports,"default",()=>u);var r=n("ejLRd"),o=n("19kfR"),a=n("l9IGS"),s=n("lqNjm"),l=n("6sFdl"),h=n("iQyfo"),u=class extends o.default{constructor(t){super(t),this.element.classList.add("ol-canvas-control"),this.scaleHeight_=6,t||(t={}),t.style||(t.style=new a.default),this.setStyle(t.style)}setMap(t){(0,l.default).prototype.getCanvas.call(this,t);var e=this.getMap();if(this._listener&&(0,r.unByKey)(this._listener),this._listener=null,super.setMap(t),e)try{e.renderSync()}catch(t){}t&&(this._listener=t.on("postcompose",this.drawScale_.bind(this))),this.element.style.visibility="hidden",this.olscale=this.element.querySelector(".ol-scale-line-inner")}setStyle(t){var e=t.getStroke();this.strokeStyle_=e?(0,s.asString)(e.getColor()):"#000",this.strokeWidth_=e?e.getWidth():2;var i=t.getFill();this.fillStyle_=i?(0,s.asString)(i.getColor()):"#fff";var r=t.getText();this.font_=r?r.getFont():"10px Arial",e=r?r.getStroke():null,i=r?r.getFill():null,this.fontStrokeStyle_=e?(0,s.asString)(e.getColor()):this.fillStyle_,this.fontStrokeWidth_=e?e.getWidth():3,this.fontFillStyle_=i?(0,s.asString)(i.getColor()):this.strokeStyle_,this.getMap()&&this.getMap().render()}drawScale_(t){if("hidden"===this.element.style.visibility&&"none"!==(0,h.default).getStyle(this.element,"display")){var e=this.getContext(t);if(e){var i=parseInt(this.olscale.style.width);if(i){var r=this.olscale.textContent,o={left:this.element.offsetLeft,top:this.element.offsetTop},n=t.frameState.pixelRatio;e.save(),e.scale(n,n),o.top+=this.element.clientHeight-this.scaleHeight_,e.beginPath(),e.strokeStyle=this.fontStrokeStyle_,e.fillStyle=this.fontFillStyle_,e.lineWidth=this.fontStrokeWidth_,e.textAlign="center",e.textBaseline="bottom",e.font=this.font_,e.lineJoin="round",e.strokeText(r,o.left+i/2,o.top),e.fillText(r,o.left+i/2,o.top),e.closePath(),o.top+=2,e.lineWidth=this.strokeWidth_,e.strokeStyle=this.strokeStyle_;for(var a=4,s=parseInt(r);s%10==0;)s/=10;s%5==0&&(a=5);for(var l=0;l<a;l++)e.beginPath(),e.fillStyle=l%2?this.fillStyle_:this.strokeStyle_,e.rect(o.left+l*i/a,o.top,i/a,this.scaleHeight_),e.stroke(),e.fill(),e.closePath();e.restore()}}}}getContext(t){return(0,l.default).prototype.getContext.call(this,t)}}}),a("19kfR",function(t,i){e(t.exports,"default",()=>c);var r=n("4DafG"),o=n("erROg"),a=n("gzr8q");let s="units",l=[1,2,5],h=25.4/.28;class u extends r.default{constructor(t){t=t||{};let e=document.createElement("div");e.style.pointerEvents="none",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un;let i=void 0!==t.className?t.className:t.bar?"ol-scale-bar":"ol-scale-line";this.innerElement_=document.createElement("div"),this.innerElement_.className=i+"-inner",this.element.className=i+" "+o.CLASS_UNSELECTABLE,this.element.appendChild(this.innerElement_),this.viewState_=null,this.minWidth_=void 0!==t.minWidth?t.minWidth:64,this.maxWidth_=t.maxWidth,this.renderedVisible_=!1,this.renderedWidth_=void 0,this.renderedHTML_="",this.addChangeListener(s,this.handleUnitsChanged_),this.setUnits(t.units||"metric"),this.scaleBar_=t.bar||!1,this.scaleBarSteps_=t.steps||4,this.scaleBarText_=t.text||!1,this.dpi_=t.dpi||void 0}getUnits(){return this.get(s)}handleUnitsChanged_(){this.updateElement_()}setUnits(t){this.set(s,t)}setDpi(t){this.dpi_=t}updateElement_(){let t,e,i,r,o,n;let s=this.viewState_;if(!s){this.renderedVisible_&&(this.element.style.display="none",this.renderedVisible_=!1);return}let u=s.center,c=s.projection,f=this.getUnits(),d=(0,a.getPointResolution)(c,s.resolution,u,"degrees"==f?"degrees":"m"),p=this.minWidth_*(this.dpi_||h)/h,g=void 0!==this.maxWidth_?this.maxWidth_*(this.dpi_||h)/h:void 0,m=p*d,y="";if("degrees"==f){let t=a.METERS_PER_UNIT.degrees;(m*=t)<t/60?(y="″",d*=3600):m<t?(y="′",d*=60):y="°"}else if("imperial"==f)m<.9144?(y="in",d/=.0254):m<1609.344?(y="ft",d/=.3048):(y="mi",d/=1609.344);else if("nautical"==f)d/=1852,y="NM";else if("metric"==f)m<.001?(y="μm",d*=1e6):m<1?(y="mm",d*=1e3):m<1e3?y="m":(y="km",d/=1e3);else if("us"==f)m<.9144?(y="in",d*=39.37):m<1609.344?(y="ft",d/=.30480061):(y="mi",d/=1609.3472);else throw Error("Invalid units");let x=3*Math.floor(Math.log(p*d)/Math.log(10));for(;;){let a=Math.pow(10,i=Math.floor(x/3));if(isNaN(e=Math.round((t=l[(x%3+3)%3]*a)/d))){this.element.style.display="none",this.renderedVisible_=!1;return}if(void 0!==g&&e>=g){t=r,e=o,i=n;break}if(e>=p)break;r=t,o=e,n=i,++x}let v=this.scaleBar_?this.createScaleBar(e,t,y):t.toFixed(i<0?-i:0)+" "+y;this.renderedHTML_!=v&&(this.innerElement_.innerHTML=v,this.renderedHTML_=v),this.renderedWidth_!=e&&(this.innerElement_.style.width=e+"px",this.renderedWidth_=e),this.renderedVisible_||(this.element.style.display="",this.renderedVisible_=!0)}createScaleBar(t,e,i){let r=this.getScaleForResolution(),o=r<1?Math.round(1/r).toLocaleString()+" : 1":"1 : "+Math.round(r).toLocaleString(),n=this.scaleBarSteps_,a=t/n,s=[this.createMarker("absolute")];for(let r=0;r<n;++r){let o=r%2==0?"ol-scale-singlebar-odd":"ol-scale-singlebar-even";s.push(`<div><div class="ol-scale-singlebar ${o}" style="width: ${a}px;"></div>`+this.createMarker("relative")+(r%2==0||2===n?this.createStepText(r,t,!1,e,i):"")+"</div>")}return s.push(this.createStepText(n,t,!0,e,i)),(this.scaleBarText_?`<div class="ol-scale-text" style="width: ${t}px;">`+o+"</div>":"")+s.join("")}createMarker(t){return`<div class="ol-scale-step-marker" style="position: ${t}; top: ${"absolute"===t?3:-10}px;"></div>`}createStepText(t,e,i,r,o){let n=0===t?0:Math.round(r/this.scaleBarSteps_*t*100)/100,a=0===t?-3:-(e/this.scaleBarSteps_*1),s=0===t?0:e/this.scaleBarSteps_*2;return`<div class="ol-scale-step-text" style="margin-left: ${a}px;text-align: ${0===t?"left":"center"};min-width: ${s}px;left: ${i?e+"px":"unset"};">`+n+(0===t?"":" "+o)+"</div>"}getScaleForResolution(){return 1e3/25.4*(0,a.getPointResolution)(this.viewState_.projection,this.viewState_.resolution,this.viewState_.center,"m")*(this.dpi_||h)}render(t){let e=t.frameState;e?this.viewState_=e.viewState:this.viewState_=null,this.updateElement_()}}var c=u}),a("jHzwa",function(t,i){e(t.exports,"default",()=>a);var r=n("oelnd");class o extends r.default{constructor(t){super(t),this.set("url","https://wxs.ign.fr/essentiels/geoportail/geocodage/rest/0.1/completion")}}var a=o}),a("oelnd",function(t,i){e(t.exports,"default",()=>s);var r=n("gzr8q"),o=n("lMlc8"),a=n("fSP3G"),s=class extends a.default{constructor(t){(t=t||{}).className=t.className||"IGNF",t.typing=t.typing||500,"gpf"==t.version?t.url="https://data.geopf.fr/geocodage/completion":1==t.version?t.url="https://wxs.ign.fr/"+(t.apiKey||"essentiels")+"/ols/apis/completion":t.url="https://wxs.ign.fr/"+(t.apiKey||"essentiels")+"/geoportail/geocodage/rest/0.1/completion",t.copy='<a href="https://www.geoportail.gouv.fr/" target="new">&copy; IGN-Géoportail</a>',super(t),this.set("position",t.position),this.set("useExtent",t.useExtent),this.set("bbox",t.bbox),this.set("type",t.type||"StreetAddress,PositionOfInterest"),this.set("terr",t.terr),this.set("timeout",t.timeout||2e3)}reverseGeocode(t,e){var i=(0,r.transform)(t,this.getMap().getView().getProjection(),"EPSG:4326");this._handleSelect({x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)},!0,e);var o="Commune"===this.get("type")?"PositionOfInterest":this.get("type")||"StreetAddress";/,/.test(o)&&(o="StreetAddress");var n=this.get("url").replace("ols/apis/completion","geoportail/ols").replace("completion","reverse");if(/ols/.test(n)){var a='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"> <Request requestID="1" version="1.2" methodName="ReverseGeocodeRequest" maximumResponses="1" >  <ReverseGeocodeRequest>   <ReverseGeocodePreference>'+o+"</ReverseGeocodePreference>   <Position>    <gml:Point><gml:pos>"+i[1]+" "+i[0]+"</gml:pos></gml:Point>   </Position>  </ReverseGeocodeRequest> </Request></XLS>";this.ajax(n,{xls:a},(function(t){var r={};if(t){var o=(t=t.replace(/\n|\r/g,"")).replace(/.*<gml:pos>(.*)<\/gml:pos>.*/,"$1").split(" ");if(Number(o[1])||Number(o[0])){if(r.x=i[0],r.y=i[1],r.city=t.replace(/.*<Place type="Municipality">([^<]*)<\/Place>.*/,"$1"),r.insee=t.replace(/.*<Place type="INSEE">([^<]*)<\/Place>.*/,"$1"),r.zipcode=t.replace(/.*<PostalCode>([^<]*)<\/PostalCode>.*/,"$1"),/<Street>/.test(t)){r.kind="",r.country="StreetAddress",r.street=t.replace(/.*<Street>([^<]*)<\/Street>.*/,"$1");var n=t.replace(/.*<Building number="([^"]*).*/,"$1");r.fulltext=n+" "+r.street+", "+r.zipcode+" "+r.city}else r.kind=t.replace(/.*<Place type="Nature">([^<]*)<\/Place>.*/,"$1"),r.country="PositionOfInterest",r.street="",r.fulltext=r.zipcode+" "+r.city}else r={x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)}}else r={x:i[0],y:i[1],fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)};"function"==typeof e?e.call(this,[r]):(this.getHistory().shift(),this._handleSelect(r,!0,e))}).bind(this),{timeout:this.get("timeout"),dataType:"XML"})}else this.ajax(n+"?lon="+i[0]+"&lat="+i[1],{},(function(t){var r;try{(r=(t=JSON.parse(t).features[0]).properties).x=t.geometry.coordinates[0],r.y=t.geometry.coordinates[1],r.click=i,r.name?r.fulltext=r.name+", "+r.postcode+" "+r.city:r.fulltext=r.postcode+" "+r.city}catch(t){r={x:i[0],y:i[1],lonlat:i,fulltext:i[0].toFixed(6)+","+i[1].toFixed(6)}}"function"==typeof e?e.call(this,[r]):(this.getHistory().shift(),this._handleSelect(r,!0,e))}).bind(this),{timeout:this.get("timeout"),dataType:"XML"})}getTitle(t){return t.fulltext}requestData(t){var e={text:t,type:"Commune"===this.get("type")?"PositionOfInterest":this.get("type")||"StreetAddress,PositionOfInterest",terr:this.get("terr")||void 0,maximumResponses:this.get("maxItems")};if(this.get("position")){var i=this.getMap().getView().getCenter();e.lonlat=(0,r.transform)(i,this.getMap().getView().getProjection(),"EPSG:4326").join(",")}if(this.get("bbox"))e.bbox=(0,r.transformExtent)(this.get("bbox"),this.getMap().getView().getProjection(),"EPSG:4326").join(",");else if(this.get("useExtent")){var o=this.getMap().getView().calculateExtent();e.bbox=(0,r.transformExtent)(o,this.getMap().getView().getProjection(),"EPSG:4326").join(",")}return e}handleResponse(t){var e=t.results;if("Commune"===this.get("type"))for(var i=e.length-1;i>=0;i--)e[i].poiType&&e[i].poiType.indexOf?0>e[i].poiType.indexOf("commune")&&e.splice(i,1):"commune"!==e[i].kind&&e.splice(i,1);return e}select(t,e,i,n){if(t.x||t.y){var a=[Number(t.x),Number(t.y)];try{a=(0,r.transform)(a,"EPSG:4326",this.getMap().getView().getProjection())}catch(t){}"Commune"===this.get("type")?this.searchCommune(t,(function(){(0,o.default).prototype.select.call(this,t,e,a,n)}).bind(this)):super.select(t,e,a,n)}else this.searchCommune(t)}searchCommune(t,e){var i=this.get("url").replace("ols/apis/completion","geoportail/ols").replace("completion","reverse");if(/ols/.test(i)){var r='<?xml version="1.0" encoding="UTF-8"?><XLS xmlns:xls="http://www.opengis.net/xls" xmlns:gml="http://www.opengis.net/gml" xmlns="http://www.opengis.net/xls" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" version="1.2" xsi:schemaLocation="http://www.opengis.net/xls http://schemas.opengis.net/ols/1.2/olsAll.xsd"><RequestHeader/><Request requestID="1" version="1.2" methodName="LocationUtilityService"><GeocodeRequest returnFreeForm="false"><Address countryCode="PositionOfInterest"><freeFormAddress>'+t.zipcode+" "+t.city+"+</freeFormAddress></Address></GeocodeRequest></Request></XLS>";this.ajax(this.get("url").replace("ols/apis/completion","geoportail/ols"),{xls:r},(function(i){if(i){var r=new DOMParser().parseFromString(i,"text/xml").getElementsByTagName("GeocodedAddress")[0],o=r.getElementsByTagName("gml:Point")[0].textContent.trim().split(" ");t.x=Number(o[1]),t.y=Number(o[0]);for(var n=r.getElementsByTagName("Place"),a=0;a<n.length;a++)switch(n[a].attributes.type.value){case"Nature":t.kind=n[a].textContent;break;case"INSEE":t.insee=n[a].textContent}(t.x||t.y)&&(e?e.call(this,[t]):this._handleSelect(t))}}).bind(this),{dataType:"XML"})}else this.ajax(i+"?lon="+t.x+"&lat="+t.y+"&index=parcel&limit=1",{},(function(i){try{var r=JSON.parse(i).features[0];t.insee=r.properties.departmentcode+r.properties.municipalitycode,e?e.call(this,[t]):this._handleSelect(t)}catch(t){}}).bind(this),{timeout:this.get("timeout"),dataType:"XML"})}}}),a("lMlc8",function(t,i){e(t.exports,"default",()=>l);var r=n("4DafG"),o=n("ejLRd"),a=n("iQyfo"),s=class extends r.default{constructor(t){var e=((t=t||{}).className||"")+" ol-search"+(t.target?"":" ol-unselectable ol-control"),i=(0,a.default).create("DIV",{className:e});super({element:i,target:t.target});var r=this;if(void 0==t.typing&&(t.typing=300),this._classname=t.className||"search",!1!==t.collapsed&&i.classList.add("ol-collapsed"),t.target||(this.button=document.createElement("BUTTON"),this.button.setAttribute("type","button"),this.button.setAttribute("title",t.title||t.label||"Search"),this.button.addEventListener("click",function(){if(i.classList.toggle("ol-collapsed"),!i.classList.contains("ol-collapsed")){i.querySelector("input.search").focus();for(var t=i.querySelectorAll("li"),e=0;e<t.length;e++)t[e].classList.remove("select");l.value||r.drawList_()}}),i.appendChild(this.button)),t.inputLabel){var o=document.createElement("LABEL");o.innerText=t.inputLabel,i.appendChild(o)}var n,s="",l=this._input=document.createElement("INPUT");l.setAttribute("type","search"),l.setAttribute("class","search"),l.setAttribute("autocomplete","off"),l.setAttribute("placeholder",t.placeholder||"Search..."),l.addEventListener("change",function(t){r.dispatchEvent({type:"change:input",input:t,value:l.value})});var h=function(e){var o=i.querySelector("ul.autocomplete li.select"),a=l.value;if("ArrowDown"==e.key||"ArrowUp"==e.key||"Down"==e.key||"Up"==e.key)o?(o.classList.remove("select"),(o=/Down/.test(e.key)?o.nextElementSibling:o.previousElementSibling)&&o.classList.add("select")):i.querySelector("ul.autocomplete li").classList.add("select");else if("input"!=e.type||a){if(o&&("search"==e.type||"Enter"==e.key))i.classList.contains("ol-control")&&l.blur(),o.classList.remove("select"),s=a,r._handleSelect(r._list[o.getAttribute("data-search")]);else if("search"==e.type||"Enter"==e.key||s!=a&&t.typing>=0){if(s=a){n&&clearTimeout(n);var h=r.get("minLength");n=setTimeout(function(){if(s.length>=h){var t=r.autocomplete(s,function(t){r.drawList_(t)});t&&r.drawList_(t)}else r.drawList_()},t.typing)}else r.drawList_()}else(o=i.querySelector("ul.autocomplete li"))&&o.classList.remove("select")}else setTimeout(function(){r.drawList_()},200)};if(l.addEventListener("keyup",h),l.addEventListener("search",h),l.addEventListener("cut",h),l.addEventListener("paste",h),l.addEventListener("input",h),t.noCollapse||(l.addEventListener("blur",(function(){setTimeout((function(){l!==document.activeElement&&(i.classList.add("ol-collapsed"),this.set("reverse",!1),i.classList.remove("ol-revers"))}).bind(this),200)}).bind(this)),l.addEventListener("focus",(function(){this.get("reverse")||(i.classList.remove("ol-collapsed"),i.classList.remove("ol-revers"))}).bind(this))),i.appendChild(l),t.reverse){var u=(0,a.default).create("BUTTON",{type:"button",class:"ol-revers",title:t.reverseTitle||"click on the map",click:(function(){this.get("reverse")?this.set("reverse",!1):(this.set("reverse",!this.get("reverse")),l.focus(),i.classList.add("ol-revers"))}).bind(this)});i.appendChild(u)}var c=document.createElement("UL");c.classList.add("autocomplete"),i.appendChild(c),"function"==typeof t.getTitle&&(this.getTitle=t.getTitle),"function"==typeof t.autocomplete&&(this.autocomplete=t.autocomplete),this.set("copy",t.copy),this.set("minLength",t.minLength||1),this.set("maxItems",t.maxItems||10),this.set("maxHistory",t.maxHistory||t.maxItems||10),t.onselect&&this.on("select",t.onselect),t.centerOnSelect&&this.on("select",(function(t){var e=this.getMap();e&&e.getView().setCenter(t.coordinate)}).bind(this)),t.zoomOnSelect&&this.on("select",(function(e){var i=this.getMap();i&&(i.getView().setCenter(e.coordinate),i.getView().getZoom()<t.zoomOnSelect&&i.getView().setZoom(t.zoomOnSelect))}).bind(this)),this.restoreHistory(),this.drawList_()}setMap(t){this._listener&&(0,o.unByKey)(this._listener),this._listener=null,super.setMap(t),t&&(this._listener=t.on("click",this._handleClick.bind(this)))}collapse(t){!1===t?this.element.classList.remove("ol-collapsed"):this.element.classList.add("ol-collapsed")}getInputField(){return this._input}getTitle(t){return t.name||"No title"}_getTitleTxt(t){return(0,a.default).create("DIV",{html:this.getTitle(t)}).innerText}search(){var t=this.element.querySelector("input.search");this._triggerCustomEvent("search",t)}_handleClick(t){this.get("reverse")&&(document.activeElement.blur(),this.reverseGeocode(t.coordinate))}reverseGeocode(){}_triggerCustomEvent(t,e){(0,a.default).dispatchEvent(t,e)}setInput(t,e){var i=this.element.querySelector("input.search");i.value=t,e&&this._triggerCustomEvent("keyup",i)}select(t,e,i,r){var o={type:"select",search:t,reverse:!!e,coordinate:i};if(r)for(var n in r)o[n]=r[n];this.dispatchEvent(o)}_handleSelect(t,e,i){if(t){var r,o=this.get("history");try{var n=JSON.stringify(t);for(r=o.length-1;r>=0;r--)o[r]&&JSON.stringify(o[r])!==n||o.splice(r,1)}catch(e){for(r=o.length-1;r>=0;r--)o[r]===t&&o.splice(r,1)}o.unshift(t);for(var a=Math.max(0,this.get("maxHistory")||10)||0;o.length>a;)o.pop();this.saveHistory(),this.select(t,e,null,i),e&&(this.setInput(this._getTitleTxt(t)),this.drawList_(),setTimeout((function(){this.collapse(!1)}).bind(this),300))}}saveHistory(){try{this.get("maxHistory")>=0?localStorage["ol@search-"+this._classname]=JSON.stringify(this.get("history")):localStorage.removeItem("ol@search-"+this._classname)}catch(t){console.warn("Failed to access localStorage...")}}restoreHistory(){if(this._history[this._classname])this.set("history",this._history[this._classname]);else try{this._history[this._classname]=JSON.parse(localStorage["ol@search-"+this._classname]),this.set("history",this._history[this._classname])}catch(t){this.set("history",[])}}clearHistory(){this.set("history",[]),this.saveHistory(),this.drawList_()}getHistory(){return this.get("history")}autocomplete(t,e){return e([]),!1}drawList_(t){var e=this,i=this.element.querySelector("ul.autocomplete");if(i.innerHTML="",this._list=[],t)i.setAttribute("class","autocomplete");else{if(this.element.querySelector("input.search").value)return;t=this.get("history"),i.setAttribute("class","autocomplete history")}for(var r,o=Math.min(e.get("maxItems"),t.length),n=0;n<o;n++)if(t[n]&&(!n||!e.equalFeatures(t[n],t[n-1]))){(r=document.createElement("LI")).setAttribute("data-search",this._list.length),this._list.push(t[n]),r.addEventListener("click",function(t){e._handleSelect(e._list[t.currentTarget.getAttribute("data-search")])});var a=e.getTitle(t[n]);a instanceof Element?r.appendChild(a):r.innerHTML=a,i.appendChild(r)}o&&this.get("copy")&&((r=document.createElement("LI")).classList.add("copy"),r.innerHTML=this.get("copy"),i.appendChild(r))}equalFeatures(){return!1}};s.prototype._history={};var l=s}),a("fSP3G",function(t,i){e(t.exports,"default",()=>a);var r=n("lMlc8"),o=n("fkmMz"),a=class extends r.default{constructor(t){(t=t||{}).className=t.className||"JSON",delete t.autocomplete,t.minLength=t.minLength||3,t.typing=t.typing||800,super(t);var e=t.url||"";if("https:"===window.location.protocol){var i=document.createElement("a");i.href=e,i.protocol=window.location.protocol,e=i.href}this.set("url",e),this._ajax=new o.default({dataType:"JSON",auth:t.authentication}),this._ajax.on("success",(function(t){t.status>=200&&t.status<400?"function"==typeof this._callback&&this._callback(t.response):("function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments))}).bind(this)),this._ajax.on("error",(function(){"function"==typeof this._callback&&this._callback(!1,"error"),console.log("AJAX ERROR",arguments)}).bind(this)),this._ajax.on("loadstart",(function(){this.element.classList.add("searching")}).bind(this)),this._ajax.on("loadend",(function(){this.element.classList.remove("searching")}).bind(this)),"function"==typeof t.handleResponse&&(this.handleResponse=t.handleResponse)}ajax(t,e,i,r){r=r||{},this._callback=i,this._ajax.set("dataType",r.dataType||"JSON"),this._ajax.send(t,e,r)}autocomplete(t,e){var i=this.requestData(t),r=encodeURI(this.get("url"));this.ajax(r,i,function(t){"function"==typeof e&&e(this.handleResponse(t))})}requestData(t){return{q:t}}handleResponse(t){return t}}}),a("jEzQ5",function(t,i){e(t.exports,"default",()=>h);var r=n("ejLRd"),o=n("4DafG"),a=n("gzr8q"),s=n("iQyfo"),l=n("4TTbe"),h=class extends o.default{constructor(t){var e=t||{},i=document.createElement("div");super({element:i,target:e.target});var r=this,o=document.createElement("button");if((0,s.default).create("I",{parent:o}),this.replaceState_=!1!==e.urlReplace,this.fixed_=e.fixed||6,this.hash_=e.anchor?"#":"?",this._localStorage=e.localStorage,!this._localStorage)try{localStorage.removeItem("ol@permalink")}catch(t){console.warn("Failed to access localStorage...")}function n(){"function"==typeof e.onclick?e.onclick(r.getLink()):r.setUrlReplace(!r.replaceState_)}o.addEventListener("click",n,!1),o.addEventListener("touchstart",n,!1),i.className=(e.className||"ol-permalink")+" ol-unselectable ol-control",i.appendChild(o),(e.hidden||!1===e.visible)&&(0,s.default).hide(i),this.set("geohash",e.geohash),this.set("initial",!1),this.on("change",this.viewChange_.bind(this)),this.search_={};var a={},h=document.location.hash||document.location.search||"";if(this.replaceState_&&!h&&this._localStorage)try{h=localStorage["ol@permalink"]}catch(t){console.warn("Failed to access localStorage...")}if(h){h=h.replace(/(^#|^\?)/,"").split("&");for(var u=0;u<h.length;u++){var c=h[u].split("=");switch(c[0]){case"lon":case"lat":case"z":case"r":a[c[0]]=c[1];break;case"gh":{let t=c[1].split("-"),e=(0,l.toLonLat)(t[0]);a.lon=e[0],a.lat=e[1],a.z=t[1];break}case"l":break;default:this.search_[c[0]]=c[1]}}}a.hasOwnProperty("lon")&&this.set("initial",a),this.replaceState_&&this.setPosition()}getInitialPosition(){return this.get("initial")}setMap(t){this._listener&&((0,r.unByKey)(this._listener.change),(0,r.unByKey)(this._listener.moveend)),this._listener=null,super.setMap.call(this,t),t&&(this._listener={change:t.getLayerGroup().on("change",this.layerChange_.bind(this)),moveend:t.on("moveend",this.viewChange_.bind(this))},this.setPosition())}getLayerByLink(t,e){!e&&this.getMap()&&(e=this.getMap().getLayers().getArray());for(var i=0;i<e.length;i++){if(e[i].get("permalink")==t)return e[i];if(e[i].getLayers){var r=this.getLayerByLink(t,e[i].getLayers().getArray());if(r)return r}}return!1}setGeohash(t){this.set("geohash",t),this.setUrlParam()}setPosition(t){var e=this.getMap();if(e){var i=this.replaceState_||t?document.location.hash||document.location.search:"";if(!i&&this._localStorage)try{i=localStorage["ol@permalink"]}catch(t){console.warn("Failed to access localStorage...")}if(i){var r,o,n={};for(r=0,i=i.replace(/(^#|^\?)/,"").split("&");r<i.length;r++)n[(o=i[r].split("="))[0]]=o[1];if(n.gh){var s=n.gh.split("-"),h=(0,l.toLonLat)(s[0]);n.lon=h[0],n.lat=h[1],n.z=s[1]}var u=(0,a.transform)([Number(n.lon),Number(n.lat)],"EPSG:4326",e.getView().getProjection());if(u[0]&&u[1]&&e.getView().setCenter(u),n.z&&e.getView().setZoom(Number(n.z)),n.r&&e.getView().setRotation(Number(n.r)),n.l){(function t(i){i||(i=e.getLayers().getArray());for(var r=0;r<i.length;r++)i[r].get("permalink")&&i[r].setVisible(!1),i[r].getLayers&&t(i[r].getLayers().getArray())})();var c=n.l.split("|");for(r=0;r<c.length;r++){o=c[r].split(":");var f=this.getLayerByLink(o[0]),d=Number(o[1]);f&&(f.setOpacity(d),f.setVisible(!0))}}}}}getUrlParams(){return this.search_}setUrlParam(t,e){t&&(void 0===e||""===e?delete this.search_[encodeURIComponent(t)]:this.search_[encodeURIComponent(t)]=encodeURIComponent(e)),this.viewChange_()}getUrlParam(t){return decodeURIComponent(this.search_[encodeURIComponent(t)]||"")}hasUrlParam(t){return this.search_.hasOwnProperty(encodeURIComponent(t))}getLink(t){var e=this.getMap(),i=(0,a.transform)(e.getView().getCenter(),e.getView().getProjection(),"EPSG:4326"),r=Math.round(10*e.getView().getZoom())/10,o=e.getView().getRotation(),n=this.layerStr_,s=(o?"&r="+Math.round(1e4*o)/1e4:"")+(n?"&l="+n:"");if(s=this.get("geohash")?"gh="+(0,l.fromLonLat)(i,8)+"-"+r+s:"lon="+i[0].toFixed(this.fixed_)+"&lat="+i[1].toFixed(this.fixed_)+"&z="+r+s,"position"===t)return s;for(var h in this.search_)s+="&"+h+(void 0!==this.search_[h]?"="+this.search_[h]:"");return t?s:document.location.protocol+"//"+document.location.host+document.location.pathname+this.hash_+s}getUrlReplace(){return this.replaceState_}setUrlReplace(t){try{if(this.replaceState_=t,t)window.history.replaceState(null,null,this.getLink());else{var e="";for(var i in this.search_)e+=(""==e?"?":"&")+i+(void 0!==this.search_[i]?"="+this.search_[i]:"");window.history.replaceState(null,null,document.location.origin+document.location.pathname+e)}}catch(t){}}viewChange_(){try{this.replaceState_&&window.history.replaceState(null,null,this.getLink())}catch(t){}if(this._localStorage)try{localStorage["ol@permalink"]=this.getLink(this._localStorage)}catch(t){console.warn("Failed to access localStorage...")}}layerChange_(){this._tout&&(clearTimeout(this._tout),this._tout=null),this._tout=setTimeout((function(){this._tout=null;var t="";(function e(i){for(var r=0;r<i.length;r++)i[r].getVisible()&&i[r].get("permalink")&&(t&&(t+="|"),t+=i[r].get("permalink")+":"+i[r].get("opacity")),i[r].getLayers&&e(i[r].getLayers().getArray())})(this.getMap().getLayers().getArray()),this.layerStr_=t,this.viewChange_()}).bind(this),200)}}}),a("4TTbe",function(t,i){e(t.exports,"fromLonLat",()=>o),e(t.exports,"toLonLat",()=>n);var r={base32:"0123456789bcdefghjkmnpqrstuvwxyz"},o=function(t,e){var i=t[0],a=t[1];if(!e){for(var s=1;s<=12;s++){var l=o([i,a],s),h=n(l);if(h.lat==a&&h.lon==i)return l}e=12}(e<1||e>12)&&(e=12);for(var u=0,c=0,f=!0,d="",p=-90,g=90,m=-180,y=180;d.length<e;){if(f){var x=(m+y)/2;i>=x?(u=2*u+1,m=x):(u*=2,y=x)}else{var v=(p+g)/2;a>=v?(u=2*u+1,p=v):(u*=2,g=v)}f=!f,5==++c&&(d+=r.base32.charAt(u),c=0,u=0)}return d},n=function(t){var e=a(t),i=e[1],r=e[0],o=e[3],n=e[2],s=(i+o)/2,l=(r+n)/2;return s=s.toFixed(Math.floor(2-Math.log(o-i)/Math.LN10)),[Number(l=l.toFixed(Math.floor(2-Math.log(n-r)/Math.LN10))),Number(s)]},a=function(t){if(!t)return!1;t=t.toLowerCase();for(var e=!0,i=-90,o=90,n=-180,a=180,s=0;s<t.length;s++){var l=t.charAt(s),h=r.base32.indexOf(l);if(-1==h)return!1;for(var u=4;u>=0;u--){var c=h>>u&1;if(e){var f=(n+a)/2;1==c?n=f:a=f}else{var d=(i+o)/2;1==c?i=d:o=d}e=!e}}return[n,i,a,o]}}),a("3cHIk",function(t,i){e(t.exports,"default",()=>g);var r=n("ejLRd"),o=n("4DafG"),a=n("d5AAH"),s=n("iQyfo"),l=n("6od7S"),h=n("rnKfx"),u=n("hQ5BY"),c=n("e9bRc"),f=n("bbejh"),d=n("6RZDJ"),p=class extends o.default{constructor(t){t=t||{};var e,i,o,n,p=(0,s.default).create("DIV",{className:(t.className||"ol-print")+" ol-unselectable ol-control"});super({element:p}),this._lang=t.lang||"en",t.target||(0,s.default).create("BUTTON",{type:"button",title:t.title||"Print",click:(function(){this.print()}).bind(this),parent:p}),t.openWindow&&this.on("print",function(t){t.canvas&&window.open().document.write('<img src="'+t.canvas.toDataURL()+'"/>')}),t.target=t.target||(0,s.default).create("DIV");var g=this._printCtrl=new u.default(t);g.on(["print","error","printing"],(function(t){y.setAttribute("data-status",t.type),t.clipboard||this.dispatchEvent(t)}).bind(this)),this._compass=new d.default({src:t.northImage||"compact",visible:!1,className:"olext-print-compass",style:new a.default({color:"#333",width:0})});var m=this._printDialog=new l.default({target:t.targetDialog||document.body,closeBox:!0,className:"ol-ext-print-dialog"}),y=m.getContentElement();this._input={};var x=(0,s.default).create("DIV",{className:"ol-print-param",parent:y});this._pages=[(0,s.default).create("DIV",{className:"ol-page"})];var v=(0,s.default).create("DIV",{className:"ol-map",parent:this._pages[0]});(0,s.default).create("DIV",{html:this._pages[0],className:"ol-print-map",parent:y}),(0,s.default).create("H2",{html:this.i18n("title"),parent:x});var b=(0,s.default).create("UL",{parent:x}),w=(0,s.default).create("LI",{className:"ol-orientation",parent:b});this._input.orientation={list:w};var _=(0,s.default).create("LABEL",{className:"portrait",parent:w});this._input.orientation.portrait=(0,s.default).create("INPUT",{type:"radio",name:"ol-print-orientation",value:"portrait",checked:!0,on:{change:(function(t){this.setOrientation(t.target.value)}).bind(this)},parent:_}),(0,s.default).create("SPAN",{html:this.i18n("portrait"),parent:_}),_=(0,s.default).create("LABEL",{className:"landscape",parent:w}),this._input.orientation.landscape=(0,s.default).create("INPUT",{type:"radio",name:"ol-print-orientation",value:"landscape",on:{change:(function(t){this.setOrientation(t.target.value)}).bind(this)},parent:_}),(0,s.default).create("SPAN",{html:this.i18n("landscape"),parent:_}),w=(0,s.default).create("LI",{html:(0,s.default).create("LABEL",{html:this.i18n("size")}),className:"ol-size",parent:b});var S=this._input.size=(0,s.default).create("SELECT",{on:{change:(function(){this.setSize(S.value||o)}).bind(this)},parent:w});for(e in this.paperSize)(0,s.default).create("OPTION",{html:e+(this.paperSize[e]?" - "+this.paperSize[e][0]+"x"+this.paperSize[e][1]+" mm":this.i18n("custom")),value:e,parent:S});w=(0,s.default).create("LI",{html:(0,s.default).create("LABEL",{html:this.i18n("margin")}),className:"ol-margin",parent:b});var E=this._input.margin=(0,s.default).create("SELECT",{on:{change:(function(){this.setMargin(E.value)}).bind(this)},parent:w});for(e in this.marginSize)(0,s.default).create("OPTION",{html:this.i18n(e)+" - "+this.marginSize[e]+" mm",value:this.marginSize[e],parent:E});w=(0,s.default).create("LI",{html:(0,s.default).create("LABEL",{html:this.i18n("scale")}),className:"ol-scale",parent:b});var A=this._input.scale=(0,s.default).create("SELECT",{on:{change:(function(){this.setScale(parseInt(A.value))}).bind(this)},parent:w});Object.keys(this.scales).forEach((function(t){(0,s.default).create("OPTION",{html:this.scales[t],value:t,parent:A})}).bind(this)),w=(0,s.default).create("LI",{className:"ol-legend",parent:b});var N=(0,s.default).createSwitch({html:this.i18n("legend"),checked:!1,on:{change:(function(){G.legend.control.setCanvas(N.checked)}).bind(this)},parent:w});w=(0,s.default).create("LI",{className:"ol-print-north",parent:b});var I=this._input.north=(0,s.default).createSwitch({html:this.i18n("north"),checked:"checked",on:{change:(function(){I.checked?this._compass.element.classList.add("ol-print-compass"):this._compass.element.classList.remove("ol-print-compass"),this.getMap().render()}).bind(this)},parent:w});w=(0,s.default).create("LI",{className:"ol-print-title",parent:b});var M=(0,s.default).createSwitch({html:this.i18n("mapTitle"),checked:!1,on:{change:(function(t){G.title.control.setVisible(t.target.checked)}).bind(this)},parent:w}),P=(0,s.default).create("INPUT",{type:"text",placeholder:this.i18n("mapTitle"),on:{keydown:function(t){13===t.keyCode&&t.preventDefault()},keyup:function(){G.title.control.setTitle(P.value)},change:(function(){G.title.control.setTitle(P.value)}).bind(this)},parent:w}),C=(0,s.default).create("DIV",{className:"ol-user-param",parent:x});w=(0,s.default).create("LI",{className:"ol-saveas",parent:b});var T=(0,s.default).create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:w}),L=(0,s.default).create("SELECT",{on:{change:(function(){if(this.formats[L.value].clipboard)g.copyMap(this.formats[L.value],function(t){t&&(T.classList.add("visible"),setTimeout(function(){T.classList.remove("visible")},1e3))});else{var t="string"==typeof this.getSize()?this.getSize():null,e=Object.assign({format:t,size:t?this.paperSize[t]:null,orient:this.getOrientation(),margin:this.getMargin()},this.formats[L.value]);g.print(e)}L.value=""}).bind(this)},parent:w});(0,s.default).create("OPTION",{html:this.i18n("saveas"),style:{display:"none"},value:"",parent:L}),this.formats.forEach((function(e,i){if(e.pdf){if(!1===t.pdf)return}else if(e.clipboard){if(!1===t.copy)return}else if(!1===t.save)return;(0,s.default).create("OPTION",{html:this.i18n(e.title),value:i,parent:L})}).bind(this)),w=(0,s.default).create("LI",{className:"ol-savelegend",parent:b});var R=(0,s.default).create("DIV",{html:this.i18n("copied"),className:"ol-clipboard-copy",parent:w}),O=(0,s.default).create("SELECT",{on:{change:(function(){var t,e=G.legend.control.getLegend().getCanvas(),i=document.createElement("CANVAS");i.width=e.width,i.height=e.height;var r=i.getContext("2d");if(r.fillStyle="#fff",r.fillRect(0,0,i.width,i.height),r.drawImage(e,0,0),this.formats[O.value].clipboard)i.toBlob(function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),R.classList.add("visible"),setTimeout(function(){R.classList.remove("visible")},1e3)}catch(t){}},"image/png");else try{t=i.toDataURL(this.formats[O.value].imageType,this.formats[O.value].quality);var o="string"==typeof this.getSize()?this.getSize():"A4",n=i.width/96*25.4,a=i.height/96*25.4,s=this.paperSize[o];"landscape"===this.getOrientation()&&(s=[s[1],s[0]]);var l=[(s[0]-n)/2,(s[1]-a)/2];this.dispatchEvent({type:"print",print:{legend:!0,format:o,orientation:this.getOrientation(),unit:"mm",size:this.paperSize[o],position:l,imageWidth:n,imageHeight:a},image:t,imageType:this.formats[O.value].imageType,pdf:this.formats[O.value].pdf,quality:this.formats[O.value].quality,canvas:i})}catch(t){}O.value=""}).bind(this)},parent:w});(0,s.default).create("OPTION",{html:this.i18n("saveLegend"),style:{display:"none"},value:"",parent:O}),this.formats.forEach((function(t,e){(0,s.default).create("OPTION",{html:this.i18n(t.title),value:e,parent:O})}).bind(this));var k=(0,s.default).create("DIV",{className:"ol-ext-buttons",parent:x});(0,s.default).create("BUTTON",{html:this.i18n("printBt"),type:"submit",click:function(t){t.preventDefault(),window.print()},parent:k}),(0,s.default).create("BUTTON",{html:this.i18n("cancel"),type:"button",click:function(){m.hide()},parent:k}),(0,s.default).create("DIV",{html:this.i18n("errorMsg"),className:"ol-error",parent:x});var G={};m.on("show",(function(){this.dispatchEvent({type:"show",userElement:C,dialog:this._printDialog,page:this.getPage()});var t=this.getMap();t&&(document.body.classList.add("ol-print-document"),i=t.getTargetElement(),o=t.getSize(),"string"==typeof this.getSize()?this.setSize(this.getSize()):this.setSize(o),t.setTarget(v),n&&(0,r.unByKey)(n),n=t.on("moveend",(function(){this.setScale((0,f.getMapScale)(t))}).bind(this)),this.setScale((0,f.getMapScale)(t)),G={},this.getMap().getControls().forEach((function(t){t instanceof h.default&&(G.legend={control:t}),t instanceof c.default&&(G.title={control:t}),t instanceof d.default&&(G.compass?t.element.classList.remove("ol-print-compass"):(this._input.north.checked?t.element.classList.add("ol-print-compass"):t.element.classList.remove("ol-print-compass"),this._compass=t,G.compass={control:t}))}).bind(this)),G.title?(M.checked=G.title.isVisible=G.title.control.getVisible(),P.value=G.title.control.getTitle(),M.parentNode.parentNode.classList.remove("hidden")):M.parentNode.parentNode.classList.add("hidden"),G.legend?(G.legend.ison=G.legend.control.onCanvas(),G.legend.collapsed=G.legend.control.isCollapsed(),G.legend.control.collapse(!1),O.parentNode.classList.remove("hidden"),N.parentNode.parentNode.classList.remove("hidden"),N.checked=!G.legend.collapsed,G.legend.control.setCanvas(!G.legend.collapsed)):(O.parentNode.classList.add("hidden"),N.parentNode.parentNode.classList.add("hidden")))}).bind(this)),m.on("hide",(function(){document.body.classList.remove("ol-print-document"),i&&(this.getMap().setTarget(i),i=null,n&&(0,r.unByKey)(n),G.title&&G.title.control.setVisible(G.title.isVisible),G.legend&&(G.legend.control.setCanvas(G.legend.ison),G.legend.control.collapse(G.legend.collapsed)),this.dispatchEvent({type:"hide"}))}).bind(this)),window.addEventListener("resize",(function(){this.setSize()}).bind(this)),t.saveAs&&this.on("print",function(e){e.pdf||e.canvas.toBlob(function(i){var r=(e.print.legend?"legend.":"map.")+e.imageType.replace("image/","");t.saveAs(i,r)},e.imageType,e.quality)}),t.jsPDF&&this.on("print",function(e){if(e.pdf){var i=new t.jsPDF({orientation:e.print.orientation,unit:e.print.unit,format:e.print.size});i.addImage(e.image,"JPEG",e.print.position[0],e.print.position[0],e.print.imageWidth,e.print.imageHeight),i.save(e.print.legend?"legend.pdf":"map.pdf")}})}static addLang(t,e){p.prototype._labels[t]=e}isOpen(){return this._printDialog.isOpen()}i18n(t){var e=this._labels.en[t]||t;return this._labels[this._lang]&&this._labels[this._lang][t]&&(e=this._labels[this._lang][t]),e}getOrientation(){return this._orientation||"portrait"}setOrientation(t){this._orientation="landscape"===t?"landscape":"portrait",this._input.orientation[this._orientation].checked=!0,this.setSize()}getMargin(){return this._margin||0}setMargin(t){this._margin=t,this._input.margin.value=t,this.setSize()}getSize(){return this._size}setSize(t){if(this._printDialog.getContentElement().setAttribute("data-status",""),t?this._size=t:t=this._size,t){if("string"==typeof t){for(var e in this.paperSize)e&&RegExp(e,"i").test(t)&&(t=e);this.paperSize[t]||(t=this._size="A4"),this._input.size.value=t,t=[Math.trunc(96*this.paperSize[t][0]/25.4),Math.trunc(96*this.paperSize[t][1]/25.4)],"landscape"===this.getOrientation()&&(t=[t[1],t[0]]),this.getPage().classList.remove("margin")}else this._input.size.value="",this.getPage().classList.add("margin");var i=this.getPage(),r=i.parentNode.getBoundingClientRect(),o=Math.min((r.width-40)/t[0],(r.height-40)/t[1],1);i.style.width=t[0]+"px",i.style.height=t[1]+"px",i.style["-webkit-transform"]=i.style.transform="translate(-50%,-50%) scale("+o+")";var n=Math.round(5/o);i.style["-webkit-box-shadow"]=i.style["box-shadow"]=n+"px "+n+"px "+n+"px rgba(0,0,0,.6)",i.style.padding=96*this.getMargin()/25.4+"px",this.getMap()&&this.getMap().updateSize(),this.dispatchEvent({type:"dialog:refresh"})}}getContentElement(){return this._printDialog.getContentElement()}getUserElement(){return this._printDialog.getContentElement().querySelector(".ol-user-param")}getPage(){return this._pages[0]}setMap(t){this.getMap()&&(this.getMap().removeControl(this._compass),this.getMap().removeControl(this._printCtrl),this.getMap().removeControl(this._printDialog)),super.setMap(t),this.getMap()&&(this.getMap().addControl(this._compass),this.getMap().addControl(this._printCtrl),this.getMap().addControl(this._printDialog))}setScale(t){(0,f.setMapScale)(this.getMap(),t),this._input.scale.value=" "+100*Math.round(t/100)}getScale(){return(0,f.getMapScale)(this.getMap())}print(t){(t=t||{}).size&&this.setSize(t.size),t.scale&&this.setScale(t.scale),t.orientation&&this.setOrientation(t.orientation),t.margin&&this.setMargin(t.margin),this._printDialog.show()}getrintControl(){return this._printCtrl}};p.prototype._labels={en:{title:"Print",orientation:"Orientation",portrait:"Portrait",landscape:"Landscape",size:"Page size",custom:"screen size",margin:"Margin",scale:"Scale",legend:"Legend",north:"North arrow",mapTitle:"Map title",saveas:"Save as...",saveLegend:"Save legend...",copied:"✔ Copied to clipboard",errorMsg:"Can't save map canvas...",printBt:"Print...",clipboardFormat:"copy to clipboard...",jpegFormat:"save as jpeg",pngFormat:"save as png",pdfFormat:"save as pdf",none:"none",small:"small",large:"large",cancel:"cancel"},fr:{title:"Imprimer",orientation:"Orientation",portrait:"Portrait",landscape:"Paysage",size:"Taille du papier",custom:"taille écran",margin:"Marges",scale:"Echelle",legend:"Légende",north:"Flèche du nord",mapTitle:"Titre de la carte",saveas:"Enregistrer sous...",saveLegend:"Enregistrer la légende...",copied:"✔ Carte copiée",errorMsg:"Impossible d'enregistrer la carte",printBt:"Imprimer",clipboardFormat:"copier dans le presse-papier...",jpegFormat:"enregistrer un jpeg",pngFormat:"enregistrer un png",pdfFormat:"enregistrer un pdf",none:"aucune",small:"petites",large:"larges",cancel:"annuler"},de:{title:"Drucken",orientation:"Ausrichtung",portrait:"Hochformat",landscape:"Querformat",size:"Papierformat",custom:"Bildschirmgröße",margin:"Rand",scale:"Maßstab",legend:"Legende",north:"Nordpfeil",mapTitle:"Kartentitel",saveas:"Speichern als...",saveLegend:"Legende speichern...",copied:"✔ In die Zwischenablage kopiert",errorMsg:"Kann Karte nicht speichern...",printBt:"Drucken...",clipboardFormat:"in die Zwischenablage kopieren...",jpegFormat:"speichern als jpeg",pngFormat:"speichern als png",pdfFormat:"speichern als pdf",none:"kein",small:"klein",large:"groß",cancel:"abbrechen"},zh:{title:"打印",orientation:"方向",portrait:"纵向",landscape:"横向",size:"页面大小",custom:"屏幕大小",margin:"外边距",scale:"尺度",legend:"图例",north:"指北针",mapTitle:"地图名字",saveas:"保存为...",saveLegend:"保存图例为...",copied:"✔ 已复制到剪贴板",errorMsg:"无法保存地图...",printBt:"打印...",cancel:"取消"}},p.prototype.paperSize={"":null,A0:[841,1189],A1:[594,841],A2:[420,594],A3:[297,420],A4:[210,297],"US Letter":[215.9,279.4],A5:[148,210],B4:[257,364],B5:[182,257]},p.prototype.marginSize={none:0,small:5,large:10},p.prototype.formats=[{title:"clipboardFormat",imageType:"image/png",clipboard:!0},{title:"jpegFormat",imageType:"image/jpeg",quality:.8},{title:"pngFormat",imageType:"image/png",quality:.8},{title:"pdfFormat",imageType:"image/jpeg",pdf:!0}],p.prototype.scales={" 5000":"1/5.000"," 10000":"1/10.000"," 25000":"1/25.000"," 50000":"1/50.000"," 100000":"1/100.000"," 250000":"1/250.000"," 1000000":"1/1.000.000"};var g=p}),a("rnKfx",function(t,i){e(t.exports,"default",()=>a);var r=n("lqNjm"),o=n("6sFdl");n("3HxCM");var a=class extends o.default{constructor(t){t=t||{};var e=document.createElement("div");if(super({element:e,target:t.target}),t.target)e.className=t.className||"ol-legend";else{e.className=(t.className||"ol-legend")+" ol-unselectable ol-control"+(!1===t.collapsible?" ol-uncollapsible":" ol-collapsed");var i=document.createElement("button");i.setAttribute("type","button"),i.addEventListener("click",(function(){this.toggle()}).bind(this)),e.appendChild(i),(i=document.createElement("button")).setAttribute("type","button"),i.className="ol-closebox",i.addEventListener("click",(function(){this.toggle()}).bind(this)),e.appendChild(i)}this._legend=t.legend,this._legend.getCanvas().className="ol-legendImg",e.appendChild(this._legend.getCanvas()),e.appendChild(this._legend.getListElement()),!1!==t.collapsible&&!1===t.collapsed&&this.show(),this._legend.on("select",(function(t){this.dispatchEvent(t)}).bind(this)),this._legend.on("refresh",(function(){if(this._onCanvas&&this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this)),this._legend.on("items",(function(e){e.nb?(this.element.classList.remove("ol-empty"),this.element.title=t.title||"legend"):(this.element.classList.add("ol-empty"),this.element.title=t.emptyTitle||"no legend"),this.dispatchEvent(e)}).bind(this))}getLegend(){return this._legend}setCanvas(t){if(this._onCanvas=t,this.element.style.visibility=t?"hidden":"visible",this.getMap())try{this.getMap().renderSync()}catch(t){}}onCanvas(){return!!this._onCanvas}_draw(t){if(this._onCanvas&&!this.element.classList.contains("ol-collapsed")){var e=this._legend.getCanvas(),i=this.getContext(t),o=i.canvas.height-e.height;i.save(),i.rect(0,o,e.width,e.height);var n="#fff";this._legend.getTextStyle().getBackgroundFill()&&(n=(0,r.asString)(this._legend.getTextStyle().getBackgroundFill().getColor())),i.fillStyle=i.strokeStyle=n,i.lineWidth=10,i.lineJoin="round",i.stroke(),i.clearRect(0,o,e.width,e.height),i.fill(),i.drawImage(e,0,o),i.restore()}}show(){if(this.element.classList.contains("ol-collapsed")&&(this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!1}),this.getMap()))try{this.getMap().renderSync()}catch(t){}}hide(){if(!this.element.classList.contains("ol-collapsed")&&(this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:!0}),this.getMap()))try{this.getMap().renderSync()}catch(t){}}collapse(t){!1===t?this.show():this.hide()}isCollapsed(){return this.element.classList.contains("ol-collapsed")}toggle(){if(this.element.classList.toggle("ol-collapsed"),this.dispatchEvent({type:"change:collapse",collapsed:this.element.classList.contains("ol-collapsed")}),this.getMap())try{this.getMap().renderSync()}catch(t){}}}}),a("3HxCM",function(t,i){e(t.exports,"default",()=>w);var r=n("fnScq"),o=n("ejLRd"),a=n("31ZqB"),s=n("lW8xZ"),l=n("jtzGF"),h=n("lqNjm"),u=n("iGyOD"),c=n("j2K3b"),f=n("hvEnP"),d=n("cgPpQ"),p=n("jZquI"),g=n("iQyfo"),m=n("kuKBR"),y=n("2zf1Y"),x=n("bJF7J"),v=n("3xROf"),b=class extends r.default{constructor(t){super(),t=t||{},this._items=new a.default;var e,i=[];this._items.on("add",(function(t){i.push({item:t.element,on:t.element.on("change",(function(){this.refresh()}).bind(this))}),e&&(clearTimeout(e),e=null),e=setTimeout((function(){this.refresh()}).bind(this),0)}).bind(this)),this._items.on("remove",(function(t){for(var r=0;r<i;r++)if(t.element===i[r].item){(0,o.unByKey)(i[r].on),i.splice(r,1);break}e&&(clearTimeout(e),e=null),e=setTimeout((function(){this.refresh()}).bind(this),0)}).bind(this)),this._listElement=(0,g.default).create("UL",{className:"ol-legend"}),this._canvas=document.createElement("canvas"),this.setLayer(t.layer),this.set("maxWidth",t.maxWidth,!0),this.set("size",t.size||[40,25],!0),this.set("margin",0===t.margin?0:t.margin||10,!0),this._textStyle=t.textStyle||new m.default({font:"16px sans-serif",fill:new y.default({color:"#333"}),backgroundFill:new y.default({color:"rgba(255,255,255,.8)"})}),this._title=new x.default({title:t.title||"",className:"ol-title"}),t.titleStyle?this._titleStyle=t.titleStyle:(this._titleStyle=this._textStyle.clone(),this._titleStyle.setFont("bold "+this._titleStyle.getFont())),this.setStyle(t.style),t.items instanceof Array&&t.items.forEach((function(t){this.addItem(t)}).bind(this)),this.refresh()}static getLegendImage(t,e,i){void 0===(t=t||{}).margin&&(t.margin=10);var r,o,n,a,h=t.size||[40,25];t.width&&(h[0]=t.width),t.heigth&&(h[1]=t.heigth),t.onload=t.onload||function(){setTimeout(function(){b.getLegendImage(t,e,i)},100)};var g=h[0]+2*t.margin,m=t.lineHeight||h[1]+2*t.margin,y=t.pixelratio||s.DEVICE_PIXEL_RATIO;e||(i=0,(e=document.createElement("canvas")).width=g*y,e.height=m*y);var x=e.getContext("2d");x.save();var v=(0,l.toContext)(x,{pixelRatio:y}),w=t.typeGeom,_=t.feature;!_&&w&&(_=new u.default(/Point/.test(w)?new c.default([0,0]):/LineString/.test(w)?new f.default([0,0]):new d.default([[0,0]])),t.properties&&_.setProperties(t.properties)),_?("function"==typeof(r=_.getStyle())&&(r=r(_)),r||(r="function"==typeof t.style?t.style(_):t.style||[]),w=_.getGeometry().getType()):r=[],r instanceof Array||(r=[r]);var S=g/2,E=m/2,A=h[0]/2,N=h[1]/2;if("Point"===w){var I=null;for(o=0;n=r[o];o++){var M=n.getImage();if(M){var P=M.getPhoto?M.getPhoto():M.getImage();if(P&&P instanceof HTMLImageElement&&!P.naturalWidth&&("function"==typeof t.onload&&P.addEventListener("load",function(){setTimeout(function(){t.onload()},100)}),M.load()),M.getAnchor){var C=M.getAnchor();if(C){var T=M.getSize(),L=C[0]-T[0],R=C[1]-T[1];I?(0,p.extend)(I,[L,R,L+T[0],R+T[1]]):I=[L,R,L+T[0],R+T[1]]}}}}I&&(S+=(I[2]+I[0])/2,E+=(I[3]+I[1])/2)}for(E+=i||0,o=0;n=r[o];o++){switch(v.setStyle(n),x.save(),w){case c.default:case"Point":case"MultiPoint":a=new c.default([S,E]);break;case f.default:case"LineString":case"MultiLineString":x.rect(t.margin*y,0,h[0]*y,e.height),x.clip(),a=new f.default([[S-A,E],[S+A,E]]);break;case d.default:case"Polygon":case"MultiPolygon":a=new d.default([[[S-A,E-N],[S+A,E-N],[S+A,E+N],[S-A,E+N],[S-A,E-N]]])}n.getGeometryFunction()&&(a=n.getGeometryFunction()(new u.default(a))),v.drawGeometry(a),x.restore()}return x.restore(),e}setTitle(t){this._title.setTitle(t),this.refresh()}getTitle(){return this._title.get("title")}setLayer(t){this._layerListener&&(0,o.unByKey)(this._layerListener),this._layer=t,t?this._layerListener=t.on("change:visible",(function(){this.refresh()}).bind(this)):this._layerListener=null}getTextStyle(){return this._textStyle}set(t,e,i){super.set(t,e,i),i||this.refresh()}getListElement(){return this._listElement}getCanvas(){return this._canvas}setStyle(t){this._style=t,this.refresh()}addItem(t){t instanceof b?(this._items.push(t),t.on("refresh",(function(){this.refresh(!0)}).bind(this))):t instanceof x.default||t instanceof v.default?this._items.push(t):this._items.push(new x.default(t))}removeItem(t){this._items.remove(t)}removeItemAt(t){this._items.removeAt(t)}getItems(){return this._items}_drawText(t,e,i,r){t.save(),t.scale(s.DEVICE_PIXEL_RATIO,s.DEVICE_PIXEL_RATIO);var o=(e=e||"").split("\n");1===o.length?t.fillText(e,i,r):(t.textBaseline="bottom",t.fillText(o[0],i,r),t.textBaseline="top",t.fillText(o[1],i,r)),t.restore()}_measureText(t,e){var i=(e||"").split("\n");if(1===i.length)return t.measureText(e);var r=t.measureText(i[0]),o=t.measureText(i[1]);return{width:Math.max(r.width,o.width),height:r.height+o.height}}refresh(t){var e=this._listElement;if(e){e.innerHTML="";var i=this.get("margin"),r=this.get("size")[0]+2*i,o=this.get("lineHeight")||this.get("size")[1]+2*i,n=this.getCanvas(),a=n.getContext("2d");a.textAlign="left",a.textBaseline="middle";var l=s.DEVICE_PIXEL_RATIO,u=Math.min(this.getWidth(),this.get("maxWidth")||1/0),c=this.getHeight();n.width=u*l,n.height=c*l,n.style.height=c+"px",a.textBaseline="middle",a.fillStyle=(0,h.asString)(this._textStyle.getFill().getColor()),this.getTitle()&&(e.appendChild(this._title.getElement([r,o],(function(t){this.dispatchEvent({type:"select",index:-1,symbol:t,item:this._title})}).bind(this))),a.font=this._titleStyle.getFont(),a.textAlign="center",this._drawText(a,this.getTitle(),n.width/l/2,o/2));var f=0;this.getTitle()&&(f=o);var d=0;this._items.forEach((function(t,s){if(t instanceof b){if((!t._layer||t._layer.getVisible())&&t.getCanvas().height){a.drawImage(t.getCanvas(),0,f*l);for(var h=t._listElement.querySelectorAll("li"),u=0;u<h.length;u++){var c=h[u].cloneNode();c.innerHTML=h[u].innerHTML,e.appendChild(c),d++}f+=t.getHeight()}}else{if(t instanceof v.default){t.get("title")&&(e.appendChild(this._title.getElement([r,o],(function(t){this.dispatchEvent({type:"select",index:-1,symbol:t,item:this._title})}).bind(this))),a.font=t.get("textStyle")?t.get("textStyle").getFont():this._titleStyle.getFont(),/\bcenter\b/.test(t.get("className"))?(a.textAlign="center",this._drawText(a,t.get("title"),n.width/l/2,f+o/2)):this._drawText(a,t.get("title"),i,f+o/2),f+=o);var p=t.getImage();try{a.drawImage(p,0,0,p.naturalWidth,p.naturalHeight,0,f*l,t.getWidth()*l,t.getHeight()*l)}catch(t){}f+=t.getHeight()}else{var g=t.getProperties(),m=g.height||o;a.textAlign="left",g.feature||g.typeGeom?(n=this.getLegendImage(g,n,f),a.font=t.get("textStyle")?t.get("textStyle").getFont():this._textStyle.getFont(),this._drawText(a,t.get("title"),r+i,f+m/2)):(a.font=t.get("textStyle")?t.get("textStyle").getFont():this._titleStyle.getFont(),/\bcenter\b/.test(g.className)?(a.textAlign="center",this._drawText(a,t.get("title"),n.width/l/2,f+m/2)):this._drawText(a,t.get("title"),i,f+m/2)),f+=m}e.appendChild(t.getElement([r,o],(function(e){this.dispatchEvent({type:"select",index:s,symbol:e,item:t})}).bind(this))),d++}}).bind(this)),this.set("items",d,!0),this.dispatchEvent({type:"items",nb:d}),t||this.dispatchEvent({type:"refresh",width:r,height:(this._items.length+1)*o})}}getHeight(){var t=this.get("margin"),e=this.get("lineHeight")||this.get("size")[1]+2*t,i=this.getTitle()?e:0;return this._items.forEach(function(r){r instanceof b?(!r._layer||r._layer.getVisible())&&(i+=r.getHeight()):r instanceof v.default?(r.get("title")&&(i+=e),i+=r.getHeight()):r.get("height")?i+=r.get("height")+2*t:i+=e}),i}getWidth(){var t=this.getCanvas().getContext("2d"),e=this.get("margin"),i=this.get("size")[0]+2*e;t.font=this._titleStyle.getFont();var r=this._measureText(t,this.getTitle("title")).width;return this._items.forEach((function(e){e instanceof b?(!e._layer||e._layer.getVisible())&&(r=Math.max(r,e.getWidth())):e instanceof v.default?(r=Math.max(r,e.getWidth()),e.get("title")&&(t.font=e.get("textStyle")?e.get("textStyle").getFont():this._titleStyle.getFont(),r=Math.max(r,this._measureText(t,e.get("title")).width))):e.get("feature")||e.get("typeGeom")?(t.font=e.get("textStyle")?e.get("textStyle").getFont():this._textStyle.getFont(),r=Math.max(r,this._measureText(t,e.get("title")).width+i)):(t.font=e.get("textStyle")?e.get("textStyle").getFont():this._titleStyle.getFont(),r=Math.max(r,this._measureText(t,e.get("title")).width))}).bind(this)),r+2*e}getLegendImage(t,e,i){t=t||{};var r=this.get("size");return b.getLegendImage({className:t.className,feature:t.feature,typeGeom:t.typeGeom,style:t.style||this._style,properties:t.properties,margin:t.margin||this.get("margin"),size:[t.width||r[0],t.height||r[1]],lineHeight:t.lineHeight||this.get("lineHeight"),onload:(function(){this.refresh()}).bind(this)},e,i)}},w=b}),a("jtzGF",function(t,i){e(t.exports,"toContext",()=>s);var r=n("htGzg"),o=n("lW8xZ"),a=n("14PDX");function s(t,e){let i=t.canvas,n=(e=e||{}).pixelRatio||o.DEVICE_PIXEL_RATIO,s=e.size;s&&(i.width=s[0]*n,i.height=s[1]*n,i.style.width=s[0]+"px",i.style.height=s[1]+"px");let l=[0,0,i.width,i.height],h=(0,a.scale)((0,a.create)(),n,n);return new r.default(t,n,l,h,0)}n("713Fw"),n("gzr8q")}),a("bJF7J",function(t,i){e(t.exports,"default",()=>a);var r=n("fnScq"),o=n("iQyfo"),a=class extends r.default{constructor(t){super(t=t||{}),t.feature&&this.set("feature",t.feature.clone()),this.setWidth(t.width),this.setHeight(t.height)}setTitle(t){this.set("title",t||""),this.changed()}setWidth(t){this.set("width",t||null),this.changed()}setHeight(t){this.set("heigth",t||null),this.changed()}getElement(t,e){this.get("width")&&(t[0]=this.get("width")),this.get("height")&&(t[1]=this.get("height"));var i=(0,o.default).create("LI",{className:this.get("className"),click:function(t){e(!1),t.stopPropagation()},style:{height:t[1]+"px"},"aria-label":this.get("title")});return(0,o.default).create("DIV",{click:function(t){e(!0),t.stopPropagation()},style:{width:t[0]+"px",height:t[1]+"px"},parent:i}),i}}}),a("3xROf",function(t,i){e(t.exports,"default",()=>a);var r=n("fnScq"),o=n("iQyfo"),a=class extends r.default{constructor(t){super(t=t||{}),this.set("width",t.width),this._img=t.img||new Image,this._img.onload=(function(){this.changed()}).bind(this),t.img||(this._img.src=t.src)}setTitle(t){this.set("title",t||""),this.changed()}setWidth(t){this.set("width",t||null),this.changed()}getWidth(){return this._img.naturalWidth?this.get("width")||this._img.naturalWidth:0}getHeight(){return this._img.naturalWidth?this.get("width")?this.get("width")*this._img.naturalHeight/this._img.naturalWidth:this._img.naturalHeight||0:0}getImage(){return this._img}getElement(t,e){this.get("width")&&(t[0]=this.get("width")),this.get("height")&&(t[1]=this.get("height"));var i=(0,o.default).create("LI",{className:this.get("className"),click:function(t){e(!1),t.stopPropagation()},style:{height:this.getHeight()+"px"},"aria-label":this.get("title")});return(0,o.default).create("DIV",{click:function(t){e(!0),t.stopPropagation()},style:{width:this.getWidth()+"px",height:this.getHeight()+"px"},parent:i}),i}}}),a("hQ5BY",function(t,i){e(t.exports,"default",()=>a);var r=n("4DafG"),o=n("iQyfo"),a=class extends r.default{constructor(t){t=t||{};var e=(0,o.default).create("DIV",{className:t.className||"ol-print"});super({element:e,target:t.target}),t.target||(e.classList.add("ol-unselectable","ol-control"),(0,o.default).create("BUTTON",{type:"button",title:t.title||"Print",click:(function(){this.print()}).bind(this),parent:e})),this.set("immediate",t.immediate),this.set("imageType",t.imageType||"image/jpeg"),this.set("quality",t.quality||.8),this.set("orientation",t.orientation)}toClipboard(t,e){try{t.canvas.toBlob(function(t){try{navigator.clipboard.write([new window.ClipboardItem(Object.defineProperty({},t.type,{value:t,enumerable:!0}))]),"function"==typeof e&&e(!0)}catch(t){"function"==typeof e&&e(!1)}})}catch(t){"function"==typeof e&&e(!1)}}copyMap(t,e){this.once("print",(function(t){this.toClipboard(t,e)}).bind(this)),this.print(t)}_getCanvas(t,e,i){var r;if(t.context)i=t.context.canvas;else{if(i)r=i.getContext("2d");else{i=document.createElement("canvas");var n=this.getMap().getSize();i.width=n[0],i.height=n[1],r=i.getContext("2d"),/jp.*g$/.test(e)&&(r.fillStyle=this.get("bgColor")||"white",r.fillRect(0,0,i.width,i.height))}this.getMap().getViewport().querySelectorAll(".ol-layers canvas, canvas.ol-fixedoverlay").forEach((function(t){if(t.width&&(r.save(),"0"!==t.parentNode.style.opacity)){r.globalAlpha=parseFloat(t.parentNode.style.opacity)||1,r.globalCompositeOperation=(0,o.default).getStyle(t.parentNode,"mix-blend-mode"),r.filter=(0,o.default).getStyle(t.parentNode,"filter");var e=(0,o.default).getStyle(t,"transform")||(0,o.default).getStyle(t,"-webkit-transform");/^matrix/.test(e)?((e=e.replace(/^matrix\(|\)$/g,"").split(",")).forEach(function(t,i){e[i]=parseFloat(t)}),r.transform(e[0],e[1],e[2],e[3],e[4],e[5]),r.drawImage(t,0,0)):r.drawImage(t,0,0,(0,o.default).getStyle(t,"width"),(0,o.default).getStyle(t,"height")),r.restore()}}).bind(this))}return i}fastPrint(t,e){t=t||{},this._ol6?requestAnimationFrame((function(){e(this._getCanvas({},t.imageType,t.canvas))}).bind(this)):(this.getMap().once("postcompose",(function(i){i.context||(this._ol6=!0),e(this._getCanvas(i,t.imageType,t.canvas))}).bind(this)),this.getMap().render())}print(t){var e=(t=t||{}).imageType||this.get("imageType"),i=t.quality||this.get("quality");if(this.getMap()){if("silent"!==t.immediate&&this.dispatchEvent(Object.assign({type:"printing"},t)),!t.immediate){setTimeout((function(){(t=Object.assign({},t)).immediate="silent",this.print(t)}).bind(this),200);return}this.getMap().once(this.get("immediate")?"postcompose":"rendercomplete",(function(r){var o,n,a,s,l=this._getCanvas(r,e),h=t.size||[210,297],u=t.format||"a4",c=t.orient||this.get("orientation"),f="number"==typeof t.margin?t.margin:10;if(l){"landscape"!==c&&"portrait"!==c&&(c=l.width>l.height?"landscape":"portrait"),"landscape"===c&&(h=[h[1],h[0]]);var d=Math.min((h[0]-2*f)/l.width,(h[1]-2*f)/l.height);o=d*l.width,n=d*l.height,a=[(h[0]-o)/2,(h[1]-n)/2]}try{s=l?l.toDataURL(e,i):null}catch(t){this.dispatchEvent({type:"error",canvas:l});return}var p=Object.assign({type:"print",print:{format:u,orientation:c,unit:"mm",size:h,position:a,imageWidth:o,imageHeight:n},image:s,imageType:e,quality:i,canvas:l},t);this.dispatchEvent(p)}).bind(this)),this.getMap().render()}}}}),a("e9bRc",function(t,i){e(t.exports,"default",()=>s);var r=n("lqNjm"),o=n("6sFdl"),a=n("iQyfo"),s=class extends o.default{constructor(t){t=t||{},super({element:(0,a.default).create("DIV",{className:(t.className||"")+" ol-control-title ol-unselectable",style:{display:"block",visibility:"hidden"}}),style:t.style}),this.setTitle(t.title||""),this.setVisible(!1!==t.visible),this.element.style.font=this.getTextFont()}setStyle(t){super.setStyle(t),this.element&&(this.element.style.font=this.getTextFont()),this.getMap()&&this.getMap().render()}setTitle(t){if(this.element.textContent=t,this.set("title",t),this.getMap())try{this.getMap().renderSync()}catch(t){}}getTitle(){return this.get("title")}setVisible(t){if(this.element.style.display=t?"block":"none",this.getMap())try{this.getMap().renderSync()}catch(t){}}getVisible(){return"none"!==this.element.style.display}_draw(t){if(this.getVisible()){var e=this.getContext(t);if(e){var i=t.frameState.pixelRatio;e.save(),e.scale(i,i);var o=this.element.getBoundingClientRect(),n=this.getMap().getViewport().getBoundingClientRect(),a=this.getMap().getSize()[0]/n.width;e.translate(Math.round((o.left-n.left)*a),Math.round((o.top-n.top)*a));var s=this.element.clientHeight,l=this.element.clientWidth,h=l/2;e.beginPath(),e.fillStyle=(0,r.asString)(this.getFill().getColor()),e.rect(0,0,l,s),e.fill(),e.closePath(),e.beginPath(),e.fillStyle=(0,r.asString)(this.getTextFill().getColor()),e.strokeStyle=(0,r.asString)(this.getTextStroke().getColor()),e.lineWidth=this.getTextStroke().getWidth(),e.textAlign="center",e.textBaseline="middle",e.font=this.getTextFont(),e.lineJoin="round",e.lineWidth&&e.strokeText(this.getTitle(),h,s/2),e.fillText(this.getTitle(),h,s/2),e.closePath(),e.restore()}}}}}),a("bbejh",function(t,i){e(t.exports,"getMapScale",()=>a),e(t.exports,"setMapScale",()=>s);var r=n("7qu5m"),o=n("gzr8q"),a=function(t,e){var i=t.getView(),n=i.getProjection(),a=i.getCenter(),s=t.getPixelFromCoordinate(a);s[1]+=1;var l=t.getCoordinateFromPixel(s);return(e||96)/.0254*(0,r.getDistance)((0,o.transform)(a,n,"EPSG:4326"),(0,o.transform)(l,n,"EPSG:4326"))},s=function(t,e,i){if(t&&e){var n=e;if("string"==typeof e&&((n=(e=e.replace(":","/").split("/"))[1])||(n=e[0]||""),n=parseInt(n=n.replace(/[^\d]/g,"")),e[1])){var a=parseInt(e[0]);a&&(n/=a)}if(n){var s=t.getView(),l=s.getProjection(),h=s.getCenter(),u=t.getPixelFromCoordinate(h);u[1]+=1;var c=t.getCoordinateFromPixel(u),f=(0,r.getDistance)((0,o.transform)(h,l,"EPSG:4326"),(0,o.transform)(c,l,"EPSG:4326"));return f*=(i||96)/.0254,s.setResolution(s.getResolution()*n/f),n}}}}),a("6RZDJ",function(t,i){e(t.exports,"default",()=>l);var r=n("6sFdl"),o=n("l9IGS"),a=n("d5AAH"),s=n("iQyfo"),l=class extends r.default{constructor(t){t=t||{};var e=document.createElement("div");e.className="ol-control ol-compassctrl ol-unselectable ol-hidden"+(t.className?" "+t.className:""),e.style.position="absolute",e.style.visibility="hidden";var i=t.style instanceof a.default?new o.default({stroke:t.style}):t.style;t.style||(i=new o.default({stroke:new a.default({width:0})})),super({element:e,style:i}),this.set("rotateVithView",!1!==t.rotateWithView),this.setVisible(!1!==t.visible),this.setImage(t.image||t.src)}setImage(t){if(t instanceof Image)this.img_=t,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this);else if("string"==typeof t)switch(t){case"compact":this.img_=this.compactCompass_(this.element.clientWidth,this.getStroke().getColor());break;case"default":this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor());break;default:this.img_=new Image,this.img_.onload=(function(){if(this.getMap())try{this.getMap().renderSync()}catch(t){}}).bind(this),this.img_.src=t}else this.img_=this.defaultCompass_(this.element.clientWidth,this.getStroke().getColor())}compactCompass_(t,e){var i=document.createElement("canvas"),r=i.getContext("2d"),o=(t=i.width=i.height=t||150)/2;return r.translate(o,o),r.fillStyle=e||"#963",r.lineWidth=5,r.lineJoin=r.lineCap="round",r.font="bold "+.4*o+"px sans-serif",r.textBaseline="bottom",r.textAlign="center",r.strokeStyle="#fff",r.globalAlpha=.75,r.strokeText("N",0,-o/2),r.globalAlpha=1,r.fillText("N",0,-o/2),r.beginPath(),r.moveTo(0,o/4),r.lineTo(o/3,o/2),r.lineTo(0,-o/2),r.lineTo(-o/3,o/2),r.lineTo(0,o/4),r.lineWidth=12,r.fillStyle="#fff",r.globalAlpha=.75,r.fill(),r.stroke(),r.globalAlpha=1,r.fillStyle=r.strokeStyle=e||"#963",r.lineWidth=5,r.beginPath(),r.moveTo(0,o/4),r.lineTo(0,-o/2),r.lineTo(o/3,o/2),r.lineTo(0,o/4),r.fill(),r.stroke(),r.beginPath(),r.moveTo(0,o/4),r.lineTo(0,-o/2),r.lineTo(-o/3,o/2),r.lineTo(0,o/4),r.stroke(),i}defaultCompass_(t,e){var i=document.createElement("canvas"),r=i.getContext("2d"),o=(t=i.width=i.height=t||150)/2,n=.22*o;function a(t,i){r.fillStyle=e||"#963",r.beginPath(),r.moveTo(0,0),r.lineTo(t,0),r.lineTo(i,i),r.moveTo(0,0),r.lineTo(-t,0),r.lineTo(-i,-i),r.moveTo(0,0),r.lineTo(0,t),r.lineTo(-i,i),r.moveTo(0,0),r.lineTo(0,-t),r.lineTo(i,-i),r.moveTo(0,0),r.fill(),r.stroke()}function s(t,e){r.globalCompositeOperation="destination-out",r.fillStyle="#fff",r.beginPath(),r.moveTo(0,0),r.lineTo(t,0),r.lineTo(e,-e),r.moveTo(0,0),r.lineTo(-t,0),r.lineTo(-e,e),r.moveTo(0,0),r.lineTo(0,t),r.lineTo(e,e),r.moveTo(0,0),r.lineTo(0,-t),r.lineTo(-e,-e),r.moveTo(0,0),r.fill(),r.globalCompositeOperation="source-over",r.beginPath(),r.moveTo(0,0),r.lineTo(t,0),r.lineTo(e,-e),r.moveTo(0,0),r.lineTo(-t,0),r.lineTo(-e,e),r.moveTo(0,0),r.lineTo(0,t),r.lineTo(e,e),r.moveTo(0,0),r.lineTo(0,-t),r.lineTo(-e,-e),r.moveTo(0,0),r.stroke()}return r.translate(o,o),r.strokeStyle=e||"#963",r.lineWidth=1.5,r.beginPath(),r.arc(0,0,.41*t,0,2*Math.PI),r.arc(0,0,.44*t,0,2*Math.PI),r.stroke(),r.rotate(Math.PI/4),a(.9*o,.8*n),s(.9*o,.8*n),r.rotate(-Math.PI/4),a(o,n),s(o,n),i}getVisible(){return"block"===(0,s.default).getStyle(this.element,"display")}setVisible(t){t?this.element.classList.add("ol-visible"):this.element.classList.remove("ol-visible"),this.getMap()&&this.getMap().render()}_draw(t){var e=this.getContext(t);if(e&&this.getVisible()){var i,r=e.canvas,o=[];for(i=0;i<8;i++)o[i]=[Math.cos(Math.PI*i/8),Math.sin(Math.PI*i/8)];var n=t.frameState.pixelRatio;e.save(),e.scale(n,n);var a=this.element.clientWidth,s=this.element.clientHeight,l={left:this.element.offsetLeft,top:this.element.offsetTop},h=this.img_,u=t.frameState.viewState.rotation;if(e.beginPath(),e.translate(l.left+a/2,l.top+s/2),this.get("rotateVithView")&&e.rotate(u),this.getStroke().getWidth()){e.beginPath(),e.strokeStyle=this.getStroke().getColor(),e.lineWidth=this.getStroke().getWidth();var c=Math.max(r.width,r.height);for(i=0;i<8;i++)e.moveTo(-o[i][0]*c,-o[i][1]*c),e.lineTo(o[i][0]*c,o[i][1]*c);e.stroke()}h.width&&e.drawImage(h,-a/2,-s/2,a,s),e.closePath(),e.restore()}}}}),a("loIjs",function(t,i){e(t.exports,"default",()=>f);var r=n("4DafG"),o=n("kShgF"),a=n("gzr8q"),s=n("bsgMw"),l=n("d1ltq");let h="projection",u="coordinateFormat";class c extends r.default{constructor(t){t=t||{};let e=document.createElement("div");e.className=void 0!==t.className?t.className:"ol-mouse-position",super({element:e,render:t.render,target:t.target}),this.on,this.once,this.un,this.addChangeListener(h,this.handleProjectionChanged_),t.coordinateFormat&&this.setCoordinateFormat(t.coordinateFormat),t.projection&&this.setProjection(t.projection),this.renderOnMouseOut_=void 0!==t.placeholder,this.placeholder_=this.renderOnMouseOut_?t.placeholder:"&#160;",this.renderedHTML_=e.innerHTML,this.mapProjection_=null,this.transform_=null,this.wrapX_=!1!==t.wrapX}handleProjectionChanged_(){this.transform_=null}getCoordinateFormat(){return this.get(u)}getProjection(){return this.get(h)}handleMouseMove(t){let e=this.getMap();this.updateHTML_(e.getEventPixel(t))}handleMouseOut(t){this.updateHTML_(null)}setMap(t){if(super.setMap(t),t){let e=t.getViewport();this.listenerKeys.push((0,s.listen)(e,o.default.POINTERMOVE,this.handleMouseMove,this)),this.renderOnMouseOut_&&this.listenerKeys.push((0,s.listen)(e,o.default.POINTEROUT,this.handleMouseOut,this)),this.updateHTML_(null)}}setCoordinateFormat(t){this.set(u,t)}setProjection(t){this.set(h,(0,a.get)(t))}updateHTML_(t){let e=this.placeholder_;if(t&&this.mapProjection_){if(!this.transform_){let t=this.getProjection();t?this.transform_=(0,a.getTransformFromProjections)(this.mapProjection_,t):this.transform_=a.identityTransform}let i=this.getMap().getCoordinateFromPixelInternal(t);if(i){let t=(0,a.getUserProjection)();if(t&&(this.transform_=(0,a.getTransformFromProjections)(this.mapProjection_,t)),this.transform_(i,i),this.wrapX_){let e=t||this.getProjection()||this.mapProjection_;(0,l.wrapX)(i,e)}let r=this.getCoordinateFormat();e=r?r(i):i.toString()}}this.renderedHTML_&&e===this.renderedHTML_||(this.element.innerHTML=e,this.renderedHTML_=e)}render(t){let e=t.frameState;e?this.mapProjection_!=e.viewState.projection&&(this.mapProjection_=e.viewState.projection,this.transform_=null):this.mapProjection_=null}}var f=c}),a("dbRSi",function(t,i){e(t.exports,"default",()=>a);var r=n("8rtB0"),o=n("gmF1Q"),a=class extends r.default{constructor(t){(t=t||{}).followTrack=t.followTrack||"auto",t.zoom=t.zoom||16;var e,i=new o.default(t);super({className:t.className=((t.className||"")+" ol-geobt").trim(),interaction:i,title:t.title||"Geolocation",onToggle:function(){i.pause(!0),i.setFollowTrack(t.followTrack||"auto")}}),this.setActive(!1),i.on("tracking",(function(t){this.dispatchEvent({type:"position",coordinate:t.geolocation.getPosition()})}).bind(this)),i.on("change:active",(function(){this.dispatchEvent({type:"position"}),e&&(clearTimeout(e),e=null),i.getActive()&&(e=setTimeout((function(){i.setActive(!1),e=null}).bind(this),t.delay||3e3))}).bind(this))}}}),a("8rtB0",function(t,i){e(t.exports,"default",()=>o);var r=n("QtBcx"),o=class extends r.default{constructor(t){(t=t||{}).toggleFn&&(t.onToggle=t.toggleFn),t.handleClick=function(){e.toggle(),t.onToggle&&t.onToggle.call(e,e.getActive())},t.className=(t.className||"")+" ol-toggle",super(t);var e=this;this.interaction_=t.interaction,this.interaction_&&(this.interaction_.setActive(t.active),this.interaction_.on("change:active",function(){e.setActive(e.interaction_.getActive())})),this.set("title",t.title),this.set("autoActivate",t.autoActivate),t.bar&&this.setSubBar(t.bar),this.setActive(t.active),this.setDisable(t.disable)}setMap(t){!t&&this.getMap()&&(this.interaction_&&this.getMap().removeInteraction(this.interaction_),this.subbar_&&this.getMap().removeControl(this.subbar_)),super.setMap(t),t&&(this.interaction_&&t.addInteraction(this.interaction_),this.subbar_&&t.addControl(this.subbar_))}getSubBar(){return this.subbar_}setSubBar(t){var e=this.getMap();e&&this.subbar_&&e.removeControl(this.subbar_),this.subbar_=t,t&&(this.subbar_.setTarget(this.element),this.subbar_.element.classList.add("ol-option-bar"),e&&e.addControl(this.subbar_))}getDisable(){var t=this.element.querySelector("button");return t&&t.disabled}setDisable(t){this.getDisable()!=t&&(this.element.querySelector("button").disabled=t,t&&this.getActive()&&this.setActive(!1),this.dispatchEvent({type:"change:disable",key:"disable",oldValue:!t,disable:t}))}getActive(){return this.element.classList.contains("ol-active")}toggle(){this.getActive()?this.setActive(!1):this.setActive(!0)}setActive(t){this.interaction_&&this.interaction_.setActive(t),this.subbar_&&this.subbar_.setActive(t),this.getActive()!==t&&(t?this.element.classList.add("ol-active"):this.element.classList.remove("ol-active"),this.dispatchEvent({type:"change:active",key:"active",oldValue:!t,active:t}))}setInteraction(t){this.interaction_=t}getInteraction(){return this.interaction_}}}),a("QtBcx",function(t,i){e(t.exports,"default",()=>a);var r=n("4DafG"),o=n("iQyfo"),a=class extends r.default{constructor(t){t=t||{};var e=document.createElement("div");e.className=(t.className||"")+" ol-button ol-unselectable ol-control",super({element:e,target:t.target});var i=this,r=this.button_=document.createElement(/ol-text-button/.test(t.className)?"div":"button");r.type="button",t.title&&(r.title=t.title),t.name&&(r.name=t.name),t.html instanceof Element?r.appendChild(t.html):r.innerHTML=t.html||"",r.addEventListener("click",function(e){e&&e.preventDefault&&(e.preventDefault(),e.stopPropagation()),t.handleClick&&t.handleClick.call(i,e)}),e.appendChild(r),!t.title&&r.firstElementChild&&(r.title=r.firstElementChild.title),t.title&&this.set("title",t.title),t.title&&this.set("title",t.title),t.name&&this.set("name",t.name)}setVisible(t){t?(0,o.default).show(this.element):(0,o.default).hide(this.element)}setTitle(t){this.button_.setAttribute("title",t)}setHtml(t){(0,o.default).setHTML(this.button_,t)}getButtonElement(){return this.button_}}}),a("gmF1Q",function(t,i){e(t.exports,"default",()=>w);var r=n("7lBr2"),o=n("hQfiM"),a=n("4lFOe"),s=n("d5AAH"),l=n("j2K3b"),h=n("hvEnP"),u=n("cgPpQ"),c=n("iTxNH"),f=n("l9IGS"),d=n("h6Aha"),p=n("2zf1Y"),g=n("610XN"),m=n("20LS2"),y=n("iGyOD"),x=n("jZquI"),v=n("gzr8q"),b=n("7qu5m"),w=class extends r.default{constructor(t){t=t||{},super({handleEvent:function(){return!this.get("followTrack")||"auto"==this.get("followTrack")}}),this.geolocation=new o.default({projection:"EPSG:4326",trackingOptions:{maximumAge:1e4,enableHighAccuracy:!0,timeout:6e5}}),this.geolocation.on("change",this.draw_.bind(this)),this.path_=[],this.lastPosition_=!1;var e=[255,255,255,1],i=[0,153,255,1],r=new a.default({radius:6,fill:new p.default({color:i}),stroke:new s.default({color:e,width:1.5})}),n=[new f.default({stroke:new s.default({color:e,width:5})}),new f.default({stroke:new s.default({color:i,width:3}),fill:new p.default({color:[255,255,255,.5]})})],l=new d.default({radius:10.5,points:3,rotation:0,fill:new p.default({color:i}),stroke:new s.default({color:e,width:1.5})}),h=l.getImage(),u=h.getContext("2d"),c=document.createElement("canvas");c.width=c.height=h.width,c.getContext("2d").drawImage(h,0,0),u.clearRect(0,0,h.width,h.height),u.drawImage(c,0,0,h.width,h.height,3,0,h.width-6,h.height),this.locStyle={error:new f.default({fill:new p.default({color:[255,0,0,.2]})}),warn:new f.default({fill:new p.default({color:[255,192,0,.2]})}),ok:new f.default({fill:new p.default({color:[0,255,0,.2]})})},this.overlayLayer_=new g.default({source:new m.default,name:"GeolocationDraw overlay",style:t.style||function(t){return void 0===t.get("heading")?n[1].setImage(r):(n[1].setImage(l),l.setRotation(t.get("heading")||0)),n}}),this.sketch_=[new y.default,new y.default,new y.default],this.overlayLayer_.getSource().addFeatures(this.sketch_),this.features_=t.features,this.source_=t.source,this.condition_=t.condition||function(t){return t.getAccuracy()<this.get("minAccuracy")},this.set("type",t.type||"LineString"),this.set("attributes",t.attributes||{}),this.set("minAccuracy",t.minAccuracy||20),this.set("tolerance",t.tolerance||5),this.set("zoom",t.zoom),this.set("minZoom",t.minZoom),this.setFollowTrack(void 0===t.followTrack||t.followTrack),this.setActive(!1)}simplify3D(t,e){var i=t.getCoordinates(),r=this.getMap().getView().getProjection();"Polygon"===this.get("type")&&(i=i[0]);for(var o,n=[i[0]],a=(0,v.transform)(i[0],r,"EPSG:4326"),s=1;s<i.length;s++)o=(0,v.transform)(i[s],r,"EPSG:4326"),(0,b.getDistance)(a,o)>e&&(n.push(i[s]),a=o);return n[n.length-1]!==i[i.length-1]&&n.push(i[i.length-1]),t="Polygon"===this.get("type")?new u.default([n],"XYZM"):new h.default(n,"XYZM")}setMap(t){this.getMap()&&this.getMap().removeLayer(this.overlayLayer_),super.setMap(t),this.overlayLayer_.setMap(t),t&&this.geolocation.setProjection(t.getView().getProjection())}setActive(t){if(t!==this.getActive()){if(super.setActive(t),this.getMap()){this.geolocation.setTracking(t);try{this.getMap().renderSync()}catch(t){}}if(this.overlayLayer_){if(this.overlayLayer_.setVisible(t),this.pause(!t),t)this.reset(),this.dispatchEvent({type:"drawstart",feature:this.sketch_[1]});else{var e=this.sketch_[1].clone();e.getGeometry()&&(this.features_&&this.features_.push(e),this.source_&&this.source_.addFeature(e)),this.dispatchEvent({type:"drawend",feature:e})}}}}simulate(t,e){if(this._track&&clearTimeout(this._track.timeout),!t){this._track=!1;return}var i=(e=e||{}).delay||1e3;this._track={track:t,pos:0,timeout:setTimeout((function t(){if(this._track.pos>=this._track.track.length){this._track=!1;return}var r=this._track.track[this._track.pos];r[2]=r[3]||0,r[3]=new Date().getTime(),this._track.pos++,!1!==e.repeat&&(this._track.pos=this._track.pos%this._track.track.length),this.getActive()&&this.draw_(!0,r,e.accuracy),this._track.timeout=setTimeout(t.bind(this),i)}).bind(this),0)}}simulating(){return!!this._track}reset(){this.sketch_[1].setGeometry(),this.path_=[],this.lastPosition_=!1}start(){this.setActive(!0)}stop(){this.setActive(!1)}pause(t){this.pause_=!1!==t}isPaused(){return this.pause_}setFollowTrack(t){this.set("followTrack",t);var e,i=this.getMap();if(this.getActive()&&i){if("position"!==t&&(e=this.get("minZoom")?Math.max(this.get("minZoom"),i.getView().getZoom()):this.get("zoom")),!1===t||this.lastPosition_)"auto"===t&&this.lastPosition_&&i.getView().animate({center:this.lastPosition_,zoom:e});else{var r=this.path_[this.path_.length-1];r&&i.getView().animate({center:r,zoom:e})}}this.lastPosition_=!1,this.dispatchEvent({type:"follow",following:!1!==t})}draw_(t,e,i){var r,o,n,a,s,f,d=this.getMap();if(d){if(this._track){if(!0!==t)return;if(o=e,r=i||10,this.path_&&this.path_.length){var p=this.path_[this.path_.length-1];s=Math.atan2(e[0]-p[0],e[1]-p[1])}var g=new c.default(o,d.getView().getResolution()*r);n=(0,u.fromCircle)(g)}else r=(a=this.geolocation).getAccuracy(),o=this.getPosition(a),n=a.getAccuracyGeometry(),s=a.getHeading();switch(this.get("followTrack")){case!0:!0!=this.get("followTrack")||(this.get("minZoom")?this.get("minZoom")>d.getView().getZoom()&&d.getView().setZoom(this.get("minZoom")):d.getView().setZoom(this.get("zoom")||16),(0,x.containsExtent)(d.getView().calculateExtent(d.getSize()),n.getExtent())||d.getView().fit(n.getExtent())),d.getView().setCenter(o);break;case"position":d.getView().setCenter(o);break;case"auto":if(this.lastPosition_){var m=d.getView().getCenter();m[0]!=this.lastPosition_[0]||m[1]!=this.lastPosition_[1]?this.setFollowTrack(!1):(d.getView().setCenter(o),this.lastPosition_=o)}else d.getView().setCenter(o),this.get("minZoom")?this.get("minZoom")>d.getView().getZoom()&&d.getView().setZoom(this.get("minZoom")):this.get("zoom")&&d.getView().setZoom(this.get("zoom")),this.lastPosition_=o;break;case"visible":(0,x.containsCoordinate)(d.getView().calculateExtent(d.getSize()),o)||d.getView().setCenter(o)}var y=this.sketch_[0];if(y.setGeometry(n),r<this.get("minAccuracy")/2?y.setStyle(this.locStyle.ok):r<this.get("minAccuracy")?y.setStyle(this.locStyle.warn):y.setStyle(this.locStyle.error),this.pause_&&(this.lastPosition_=o),!this.pause_&&(!a||this.condition_.call(this,a))){switch(y=this.sketch_[1],this.path_.push(o),this.get("type")){case"Point":this.path_=[o],y.setGeometry(new l.default(o,"XYZM"));var v=this.get("attributes");v.heading&&y.set("heading",a.getHeading()),v.accuracy&&y.set("accuracy",a.getAccuracy()),v.altitudeAccuracy&&y.set("altitudeAccuracy",a.getAltitudeAccuracy()),v.speed&&y.set("speed",a.getSpeed());break;case"LineString":this.path_.length>1?(f=new h.default(this.path_,"XYZM"),this.get("tolerance")&&(f=this.simplify3D(f,this.get("tolerance"))),y.setGeometry(f)):y.setGeometry();break;case"Polygon":this.path_.length>2?(f=new u.default([this.path_],"XYZM"),this.get("tolerance")&&(f=this.simplify3D(f,this.get("tolerance"))),y.setGeometry(f)):y.setGeometry()}this.dispatchEvent({type:"drawing",feature:this.sketch_[1],geolocation:a})}this.sketch_[2].setGeometry(new l.default(o)),this.sketch_[2].set("heading",s),this.dispatchEvent({type:"tracking",feature:this.sketch_[1],geolocation:a})}}getPosition(t){var e=t.getPosition();return e.push(Math.round(100*(t.getAltitude()||0))/100),e.push(Math.round(new Date().getTime()/1e3)),e}}}),a("hQfiM",function(t,i){e(t.exports,"default",()=>f);var r=n("iTTi2"),o=n("fnScq"),a=n("cgPpQ"),s=n("gzr8q"),l=n("a6roo");let h={ACCURACY:"accuracy",ACCURACY_GEOMETRY:"accuracyGeometry",ALTITUDE:"altitude",ALTITUDE_ACCURACY:"altitudeAccuracy",HEADING:"heading",POSITION:"position",PROJECTION:"projection",SPEED:"speed",TRACKING:"tracking",TRACKING_OPTIONS:"trackingOptions"};class u extends r.default{constructor(t){super("error"),this.code=t.code,this.message=t.message}}class c extends o.default{constructor(t){super(),this.on,this.once,this.un,t=t||{},this.position_=null,this.transform_=s.identityTransform,this.watchId_=void 0,this.addChangeListener(h.PROJECTION,this.handleProjectionChanged_),this.addChangeListener(h.TRACKING,this.handleTrackingChanged_),void 0!==t.projection&&this.setProjection(t.projection),void 0!==t.trackingOptions&&this.setTrackingOptions(t.trackingOptions),this.setTracking(void 0!==t.tracking&&t.tracking)}disposeInternal(){this.setTracking(!1),super.disposeInternal()}handleProjectionChanged_(){let t=this.getProjection();t&&(this.transform_=(0,s.getTransformFromProjections)((0,s.get)("EPSG:4326"),t),this.position_&&this.set(h.POSITION,this.transform_(this.position_)))}handleTrackingChanged_(){if("geolocation"in navigator){let t=this.getTracking();t&&void 0===this.watchId_?this.watchId_=navigator.geolocation.watchPosition(this.positionChange_.bind(this),this.positionError_.bind(this),this.getTrackingOptions()):t||void 0===this.watchId_||(navigator.geolocation.clearWatch(this.watchId_),this.watchId_=void 0)}}positionChange_(t){let e=t.coords;this.set(h.ACCURACY,e.accuracy),this.set(h.ALTITUDE,null===e.altitude?void 0:e.altitude),this.set(h.ALTITUDE_ACCURACY,null===e.altitudeAccuracy?void 0:e.altitudeAccuracy),this.set(h.HEADING,null===e.heading?void 0:(0,l.toRadians)(e.heading)),this.position_?(this.position_[0]=e.longitude,this.position_[1]=e.latitude):this.position_=[e.longitude,e.latitude];let i=this.transform_(this.position_);this.set(h.POSITION,i.slice()),this.set(h.SPEED,null===e.speed?void 0:e.speed);let r=(0,a.circular)(this.position_,e.accuracy);r.applyTransform(this.transform_),this.set(h.ACCURACY_GEOMETRY,r),this.changed()}positionError_(t){this.dispatchEvent(new u(t))}getAccuracy(){return this.get(h.ACCURACY)}getAccuracyGeometry(){return this.get(h.ACCURACY_GEOMETRY)||null}getAltitude(){return this.get(h.ALTITUDE)}getAltitudeAccuracy(){return this.get(h.ALTITUDE_ACCURACY)}getHeading(){return this.get(h.HEADING)}getPosition(){return this.get(h.POSITION)}getProjection(){return this.get(h.PROJECTION)}getSpeed(){return this.get(h.SPEED)}getTracking(){return this.get(h.TRACKING)}getTrackingOptions(){return this.get(h.TRACKING_OPTIONS)}setProjection(t){this.set(h.PROJECTION,(0,s.get)(t))}setTracking(t){this.set(h.TRACKING,t)}setTrackingOptions(t){this.set(h.TRACKING_OPTIONS,t)}}var f=c}),a("bS8Lk",function(t,i){e(t.exports,"default",()=>l);var r=n("9Idxm"),o=n("iQyfo"),a=n("kOWwI");let s=new r.default({target:document.body,className:"ol-collapsed"});(0,a.default).addControl(s),s.cancel=function(t,e,i){let r=(0,o.default).create("DIV",{html:t});"function"==typeof e&&(0,o.default).create("A",{html:i||"annuler",className:"cancel",click:()=>{s.hide(),e()},parent:r}),s.show(r,8e3)};var l=s}),a("9Idxm",function(t,i){e(t.exports,"default",()=>a);var r=n("4DafG"),o=n("iQyfo"),a=class extends r.default{constructor(t){t=t||{};var e=document.createElement("DIV");super({element:e,target:t.target}),this.contentElement=(0,o.default).create("DIV",{click:(function(){this.get("hideOnClick")&&this.hide()}).bind(this),parent:e});var i=(t.className||"")+" ol-notification";t.target||(i+=" ol-unselectable ol-control ol-collapsed"),e.setAttribute("class",i),this.set("closeBox",t.closeBox),this.set("hideOnClick",t.hideOnClick)}show(t,e){var i=this,r=this.element;t&&(t instanceof Node?(this.contentElement.innerHTML="",this.contentElement.appendChild(t)):this.contentElement.innerHTML=t,this.get("closeBox")?(this.contentElement.classList.add("ol-close"),(0,o.default).create("SPAN",{className:"closeBox",click:(function(){this.hide()}).bind(this),parent:this.contentElement})):this.contentElement.classList.remove("ol-close")),this._listener&&(clearTimeout(this._listener),this._listener=null),r.classList.add("ol-collapsed"),this._listener=setTimeout(function(){r.classList.remove("ol-collapsed"),!e||e>=0?i._listener=setTimeout(function(){r.classList.add("ol-collapsed"),i._listener=null},e||3e3):i._listener=null},100)}hide(){this._listener&&(clearTimeout(this._listener),this._listener=null),this.element.classList.add("ol-collapsed")}toggle(t){this.element.classList.contains("ol-collapsed")?this.show(null,t):this.hide()}}}),a("lUmQH",function(i,r){e(i.exports,"default",()=>g);var o=n("jQ8kQ"),a=n("iQyfo"),s=n("l956U"),l=n("kbFhP"),h=n("keikI"),u=n("1EpmD"),c=n("kPMpK"),f=n("iArnh"),d=n("bS8Lk"),p=n("2iBkg"),g=function(){let e=new o.default({switcherClass:"mainSwitcher ol-layer-shop ol-layerswitcher",oninfo:i=>{!function(e,i){let r=(0,a.default).create("DIV",{className:"md"});(0,a.default).create("DIV",{html:(0,s.default)(e.get("desc")||e.get("description"),e.getProperties()),parent:r}),e.getSource().getAttributions()&&(0,a.default).create("DIV",{className:"copy",html:e.getSource().getAttributions()({extent:[-1/0,-1/0,1/0,1/0]}).join(" - "),parent:r}),(0,l.default).show({className:"layer-info"+(e.get("exportable")?" exportable":""),title:e.get("title"),content:r,buttons:{pk:"ok"}}),(0,s.default).renderWidget(r),e.get("exportable")&&(0,a.default).create("BUTTON",{html:'<i class="fi-download"></i> télécharger',className:"button, button-ghost",click:()=>{let r=e.getSource().getFeatures();if(!r.length){dialogMessage.showAlert("Aucune données à enregistrer<br/>dans ce calque...");return}let o=(new c.default).writeFeatures(r,{featureProjection:i.getView().getProjection(),rightHanded:!0});var n=new Blob([o],{type:"text/plain;charset=utf-8"});t(f).saveAs(n,e.get("title")+".geojson"),(0,l.default).close(),(0,d.default).show(r.length+" objets enregistrés...")},parent:(0,l.default).element.querySelector(".ol-buttons")})}(i,e.getMap())},selection:!1,minibar:!0});return e.set("selection",!1),e.on("drawlist",t=>{(t.layer.get("inview")||t.layer.getVisible())&&(t.layer.get("inview")||t.layer.set("inview",!0),t.li.dataset.inview="")}),(0,a.default).create("BUTTON",{html:"+ de données",click:()=>{(function(t){let e;let i=t.getMap().getLayers(),r=(0,a.default).create("DIV"),o=(0,a.default).create("INPUT",{type:"search",placeHolder:"rechercher...",parent:r});(0,a.default).addListener(o,["input"],()=>{e&&clearTimeout(e),setTimeout(()=>{let t=RegExp((0,u.default)(o.value),"i");(0,l.default).getContentElement().querySelectorAll(".theme li").forEach(e=>{t.test((0,u.default)(e.innerText))?(delete e.dataset.hidden,e.dataset.visible=""):(delete e.dataset.visible,e.dataset.hidden="")}),(0,l.default).getContentElement().querySelectorAll(".theme").forEach(t=>{t.querySelector("li[data-visible]")?delete t.dataset.hidden:t.dataset.hidden=""})},300)});let n=(0,a.default).create("UL",{parent:r}),c={};i.forEach(t=>{let e=t.get("theme")||"";c[e]||(c[e]=[]),c[e].push(t)}),Object.keys(c).reverse().forEach(t=>{let e=(0,a.default).create("LI",{class:"theme",html:(0,a.default).create("H3",{html:(0,s.default).iconize(t),click:()=>{void 0!==e.dataset.expended?delete e.dataset.expended:e.dataset.expended=""}}),parent:n});(0,a.default).create("SPAN",{className:"count",parent:e});let i=(0,a.default).create("UL",{parent:e});c[t].forEach(t=>{let e=(0,a.default).create("LI");i.prepend(e);let r=new h.default({type:"checkbox",after:t.get("title")||t.get("name"),checked:t.get("inview")||t.getVisible(),parent:e});t.get("logo")&&(0,a.default).create("DIV",{className:"img",html:(0,a.default).create("IMG",{src:(0,p.getMediaURL)(t.get("logo"))}),parent:e}),(0,a.default).create("DIV",{html:(0,s.default)(t.get("desc")||t.get("description"),t.getProperties()),parent:e}),r.on("check",e=>{t.setVisible(e.checked),t.set("inview",e.checked),f()})});let r=(0,a.default).create("LI",{className:"selall"});i.prepend(r),(0,a.default).create("BUTTON",{text:"tout sélectionner",click:()=>{r.parentNode.querySelectorAll('[type="checkbox"]').forEach(t=>{t.checked||t.click()})},parent:r}),(0,a.default).create("SPAN",{text:"/",parent:r}),(0,a.default).create("BUTTON",{text:"tout supprimer",click:()=>{r.parentNode.querySelectorAll('[type="checkbox"]').forEach(t=>{t.checked&&t.click()})},parent:r})});let f=function(){n.querySelectorAll(".count").forEach(t=>{let e=t.parentNode.querySelectorAll('[type="checkbox"]:checked').length,i=t.parentNode.querySelectorAll('[type="checkbox"]').length;t.innerText=e+" / "+i})};f(),(0,l.default).show({className:"layer-inview medium",title:"Ajouter des données",closeBox:!1,content:r,buttons:["Terminé"],onButton:()=>{t.drawPanel()}}),(0,l.default).set("hideOnBack",!0),(0,l.default).once("hide",()=>{(0,l.default).set("hideOnBack",!1)})})(e)},parent:e.getBarElement("bottom")}),e}}),a("jQ8kQ",function(t,i){e(t.exports,"default",()=>a);var r=n("iQyfo"),o=n("hddSm"),a=class extends o.default{constructor(t){(t=t||{}).selection=!0,t.noScroll=!0,super(t),this.element.classList.add("ol-layer-shop");var e=this.element.insertBefore((0,r.default).create("DIV",{className:"ol-title-bar"}),this.getPanel());this.on("select",(function(t){e.innerText=t.layer?t.layer.get("title"):"",this.element.setAttribute("data-layerClass",this.getLayerClass(t.layer))}).bind(this)),this._topbar=this.element.insertBefore((0,r.default).create("DIV",{className:"ol-bar ol-top-bar"}),this.getPanel()),this._bottombar=(0,r.default).create("DIV",{className:"ol-bar ol-bottom-bar",parent:this.element}),this._controls=[]}setMap(t){this.getMap()&&this._controls.forEach((function(t){this.getMap().removeControl(t)}).bind(this)),super.setMap(t),t&&(this.selectLayer(),this._listener.removeLayer=t.getLayers().on("remove",(function(t){t.element===this.getSelection()&&this.selectLayer()}).bind(this)),this._controls.forEach((function(t){this.getMap().addControl(t)}).bind(this)))}getBarElement(t){return"bottom"===t?this._bottombar:this._topbar}addControl(t,e){this._controls.push(t),t.setTarget("bottom"===e?this._bottombar:this._topbar),this.getMap()&&this.getMap().addControl(t)}}}),a("hddSm",function(t,i){e(t.exports,"default",()=>p);var r=n("ejLRd"),o=n("4DafG"),a=n("eEuqc"),s=n("610XN"),l=n("gNqjI"),h=n("dMe05"),u=n("8WefF"),c=n("jZquI"),f=n("iQyfo"),d=class extends o.default{constructor(t){t=t||{};var e=(0,f.default).create("DIV",{className:t.switcherClass||"ol-layerswitcher"});super({element:e,target:t.target});var i=this;this.dcount=0,this.show_progress=t.show_progress,this.oninfo="function"==typeof t.oninfo?t.oninfo:null,this.onextent="function"==typeof t.onextent?t.onextent:null,this.hasextent=t.extent||t.onextent,this.hastrash=t.trash,this.reordering=!1!==t.reordering,this._layers=[],this._layerGroup=t.layerGroup&&t.layerGroup.getLayers?t.layerGroup:null,this.onchangeCheck="function"==typeof t.onchangeCheck?t.onchangeCheck:null,"function"==typeof t.displayInLayerSwitcher&&(this.displayInLayerSwitcher=t.displayInLayerSwitcher),t.target||(e.classList.add("ol-unselectable"),e.classList.add("ol-control"),e.classList.add(!1!==t.collapsed?"ol-collapsed":"ol-forceopen"),this.button=(0,f.default).create("BUTTON",{type:"button",parent:e}),this.button.addEventListener("touchstart",function(t){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:e.classList.contains("ol-collapsed")}),t.preventDefault(),i.overflow()}),this.button.addEventListener("click",function(){e.classList.toggle("ol-forceopen"),e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!e.classList.contains("ol-forceopen")}),i.overflow()}),t.mouseover&&(e.addEventListener("mouseleave",function(){e.classList.add("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!0})}),e.addEventListener("mouseover",function(){e.classList.remove("ol-collapsed"),i.dispatchEvent({type:"toggle",collapsed:!1})})),t.minibar&&(t.noScroll=!0),t.noScroll||(this.topv=(0,f.default).create("DIV",{className:"ol-switchertopdiv",parent:e,click:function(){i.overflow("+50%")}}),this.botv=(0,f.default).create("DIV",{className:"ol-switcherbottomdiv",parent:e,click:function(){i.overflow("-50%")}})),this._noScroll=t.noScroll),this.panel_=(0,f.default).create("UL",{className:"panel"}),this.panelContainer_=(0,f.default).create("DIV",{className:"panel-container",html:this.panel_,parent:e}),t.target||t.noScroll||(0,f.default).addListener(this.panel_,"mousewheel DOMMouseScroll onmousewheel",function(t){i.overflow(Math.max(-1,Math.min(1,t.wheelDelta||-t.detail)))&&(t.stopPropagation(),t.preventDefault())}),this.header_=(0,f.default).create("LI",{className:"ol-header",parent:this.panel_}),this.set("drawDelay",t.drawDelay||0),this.set("selection",t.selection),t.minibar&&setTimeout((function(){var t=(0,f.default).scrollDiv(this.panelContainer_,{mousewheel:!0,vertical:!0,minibar:!0});this.on(["drawlist","toggle"],function(){t.refresh()})}).bind(this))}displayInLayerSwitcher(t){return!1!==t.get("displayInLayerSwitcher")}setMap(t){if(super.setMap(t),this.drawPanel(),this._listener)for(var e in this._listener)(0,r.unByKey)(this._listener[e]);this._listener=null,t&&(this._listener={moveend:t.on("moveend",this.viewChange.bind(this)),size:t.on("change:size",this.overflow.bind(this))},this._layerGroup?this._listener.change=this._layerGroup.getLayers().on("change:length",this.drawPanel.bind(this)):this._listener.change=t.getLayerGroup().getLayers().on("change:length",this.drawPanel.bind(this)))}show(){this.element.classList.add("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!1})}hide(){this.element.classList.remove("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!0})}toggle(){this.element.classList.toggle("ol-forceopen"),this.overflow(),this.dispatchEvent({type:"toggle",collapsed:!this.isOpen()})}isOpen(){return this.element.classList.contains("ol-forceopen")}setHeader(t){(0,f.default).setHTML(this.header_,t)}overflow(t){if(!this.button||this._noScroll)return!1;if((0,f.default).hidden(this.panel_)){(0,f.default).setStyle(this.element,{height:"auto"});return}var e=(0,f.default).outerHeight(this.element),i=(0,f.default).outerHeight(this.panel_),r=this.button.offsetTop+(0,f.default).outerHeight(this.button),o=this.panel_.offsetTop-r;if(!(i>e-r))return(0,f.default).setStyle(this.element,{height:"auto"}),(0,f.default).setStyle(this.panel_,{top:0}),(0,f.default).hide(this.botv),(0,f.default).hide(this.topv),!1;(0,f.default).setStyle(this.element,{height:"100%"});var n=this.panel_.querySelectorAll("li.ol-visible .li-content")[0],a=n?2*(0,f.default).getStyle(n,"height"):0;switch(t){case 1:o+=a;break;case -1:o-=a;break;case"+50%":o+=Math.round(e/2);break;case"-50%":o-=Math.round(e/2)}return o+i<=e-3*r/2?(o=e-3*r/2-i,(0,f.default).hide(this.botv)):(0,f.default).show(this.botv),o>=0?(o=0,(0,f.default).hide(this.topv)):(0,f.default).show(this.topv),(0,f.default).setStyle(this.panel_,{top:o+"px"}),!0}_setLayerForLI(t,e){var i=[];e.getLayers&&i.push(e.getLayers().on("change:length",this.drawPanel.bind(this))),t&&(i.push(e.on("change:opacity",(function(){this.setLayerOpacity(e,t)}).bind(this))),i.push(e.on("change:visible",(function(){this.setLayerVisibility(e,t)}).bind(this)))),i.push(e.on("propertychange",(function(t){("displayInLayerSwitcher"===t.key||"openInLayerSwitcher"===t.key||"title"===t.key||"name"===t.key)&&this.drawPanel(t)}).bind(this))),this._layers.push({li:t,layer:e,listeners:i})}setLayerOpacity(t,e){var i=e.querySelector(".layerswitcher-opacity-cursor");i&&(i.style.left=100*t.getOpacity()+"%"),this.dispatchEvent({type:"layer:opacity",layer:t})}setLayerVisibility(t,e){var i=e.querySelector(".ol-visibility");i&&(i.checked=t.getVisible()),t.getVisible()?e.classList.add("ol-visible"):e.classList.remove("ol-visible"),this.dispatchEvent({type:"layer:visible",layer:t})}_clearLayerForLI(){this._layers.forEach(function(t){t.listeners.forEach(function(t){(0,r.unByKey)(t)})}),this._layers=[]}_getLayerForLI(t){for(var e,i=0;e=this._layers[i];i++)if(e.li===t)return e.layer;return null}viewChange(){this.panel_.querySelectorAll("li").forEach((function(t){var e=this._getLayerForLI(t);e&&(this.testLayerVisibility(e)?t.classList.remove("ol-layer-hidden"):t.classList.add("ol-layer-hidden"))}).bind(this))}getPanel(){return this.panelContainer_}drawPanel(){if(this.getMap()){var t=this;this.dcount++,setTimeout(function(){t.drawPanel_()},this.get("drawDelay")||0)}}drawPanel_(){if(!--this.dcount&&!this.dragging_){var t=this.panelContainer_.scrollTop;this._clearLayerForLI(),this.panel_.querySelectorAll("li").forEach((function(t){t.classList.contains("ol-header")||t.remove()}).bind(this)),this._layerGroup?this.drawList(this.panel_,this._layerGroup.getLayers()):this.getMap()&&this.drawList(this.panel_,this.getMap().getLayers()),this.panelContainer_.scrollTop=t}}switchLayerVisibility(t,e){t.get("baseLayer")?(t.getVisible()||t.setVisible(!0),e.forEach(function(e){t!==e&&e.get("baseLayer")&&e.getVisible()&&e.setVisible(!1)})):t.setVisible(!t.getVisible())}testLayerVisibility(t){if(!this.getMap())return!0;var e=this.getMap().getView().getResolution(),i=this.getMap().getView().getZoom();if(t.getMaxResolution()<=e||t.getMinResolution()>=e||t.getMinZoom&&(t.getMinZoom()>=i||t.getMaxZoom()<i))return!1;var r=t.getExtent();if(r){var o=this.getMap().getView().calculateExtent(this.getMap().getSize());return(0,c.intersects)(o,r)}return!0}dragOrdering_(t){t.stopPropagation(),t.preventDefault();var e,i,r,o,n,a=this,s=t.currentTarget.parentNode.parentNode,l=!0,h=this.panel_,u=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY;function c(t){if(e=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,l&&Math.abs(u-e)>2&&(l=!1,s.classList.add("drag"),o=a._getLayerForLI(s),i=!1,n=a._getLayerForLI(s.parentNode.parentNode),r=(0,f.default).create("LI",{className:"ol-dragover",html:s.innerHTML,style:{position:"absolute","z-index":1e4,left:s.offsetLeft,opacity:.5,width:(0,f.default).outerWidth(s),height:(0,f.default).getStyle(s,"height")},parent:h}),a.element.classList.add("drag"),a.dispatchEvent({type:"reorder-start",layer:o,group:n})),!l){var c;for(t.preventDefault(),t.stopPropagation(),(0,f.default).setStyle(r,{top:e-(0,f.default).offsetRect(h).top+h.scrollTop+5}),(c=t.touches?document.elementFromPoint(t.touches[0].clientX,t.touches[0].clientY):t.target).classList.contains("ol-switcherbottomdiv")?a.overflow(-1):c.classList.contains("ol-switchertopdiv")&&a.overflow(1);c&&"LI"!==c.tagName;)c=c.parentNode;c&&c.classList.contains("dropover")||s.parentNode.querySelectorAll("li").forEach(function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")}),c&&c.parentNode.classList.contains("drag")&&c!==s?((i=a._getLayerForLI(c))&&!i.get("allwaysOnTop")==!o.get("allwaysOnTop")?(c.classList.add("dropover"),c.classList.add(s.offsetTop<c.offsetTop?"dropover-after":"dropover-before")):i=!1,(0,f.default).show(r)):(i=!1,c===s?(0,f.default).hide(r):(0,f.default).show(r)),i?r.classList.remove("forbidden"):r.classList.add("forbidden")}}s.parentNode.classList.add("drag"),(0,f.default).addListener(document,"mousemove touchmove",c),(0,f.default).addListener(document,"mouseup touchend touchcancel",function t(){if(i){var e=o,l=a.getSelection()===e;if(e&&i){for(var h,u=(h=n?n.getLayers():a._layerGroup?a._layerGroup.getLayers():a.getMap().getLayers()).getArray(),d=0;d<u.length;d++)if(u[d]==e){h.removeAt(d);break}for(var p=0;p<u.length;p++)if(u[p]===i){d>p?h.insertAt(p,e):h.insertAt(p+1,e);break}}l&&a.selectLayer(e),a.dispatchEvent({type:"reorder-end",layer:e,group:n})}s.parentNode.querySelectorAll("li").forEach(function(t){t.classList.remove("dropover"),t.classList.remove("dropover-after"),t.classList.remove("dropover-before")}),s.classList.remove("drag"),s.parentNode.classList.remove("drag"),a.element.classList.remove("drag"),r&&r.remove(),(0,f.default).removeListener(document,"mousemove touchmove",c),(0,f.default).removeListener(document,"mouseup touchend touchcancel",t)})}dragOpacity_(t){t.stopPropagation(),t.preventDefault();var e=this,i=t.target,r=this._getLayerForLI(i.parentNode.parentNode.parentNode);if(r){var o=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,n=(0,f.default).getStyle(i,"left")-o;e.dragging_=!0,(0,f.default).addListener(document,"mouseup touchend touchcancel",function t(){(0,f.default).removeListener(document,"mouseup touchend touchcancel",t),(0,f.default).removeListener(document,"mousemove touchmove",a),e.dragging_=!1}),(0,f.default).addListener(document,"mousemove touchmove",a)}function a(t){var e=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,o=Math.max(0,Math.min(1,(n+e)/(0,f.default).getStyle(i.parentNode,"width")));(0,f.default).setStyle(i,{left:100*o+"%"}),i.parentNode.nextElementSibling.innerHTML=Math.round(100*o),r.setOpacity(o)}}drawList(t,e){var i=this,r=e.getArray(),o=function(t){t.stopPropagation(),t.preventDefault();var r=i._getLayerForLI(this.parentNode.parentNode);i.switchLayerVisibility(r,e),i.get("selection")&&r.getVisible()&&i.selectLayer(r),i.onchangeCheck&&i.onchangeCheck(r)};function n(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.oninfo(e),i.dispatchEvent({type:"info",layer:e})}function s(t){t.stopPropagation(),t.preventDefault();var e=i._getLayerForLI(this.parentNode.parentNode);i.onextent?i.onextent(e):i.getMap().getView().fit(e.getExtent(),i.getMap().getSize()),i.dispatchEvent({type:"extent",layer:e})}function l(t){t.stopPropagation(),t.preventDefault();var e,r=this.parentNode.parentNode.parentNode.parentNode,o=i._getLayerForLI(r);o?(e=i._getLayerForLI(this.parentNode.parentNode),o.getLayers().remove(e),0!=o.getLayers().getLength()||o.get("noSwitcherDelete")||l.call(r.querySelectorAll(".layerTrash")[0],t)):(r=this.parentNode.parentNode,i.getMap().removeLayer(i._getLayerForLI(r)))}function h(e){if(!this.displayInLayerSwitcher(e)){this._setLayerForLI(null,e);return}var h=(0,f.default).create("LI",{className:(e.getVisible()?"ol-visible ":" ")+(e.get("baseLayer")?"baselayer":""),parent:t});this._setLayerForLI(h,e),this._selectedLayer===e&&h.classList.add("ol-layer-select");var c=(0,f.default).create("DIV",{className:"ol-layerswitcher-buttons",parent:h}),d=(0,f.default).create("DIV",{className:"li-content",parent:h});(0,f.default).create("INPUT",{type:e.get("baseLayer")?"radio":"checkbox",className:"ol-visibility",checked:e.getVisible(),click:o,parent:d});var p=(0,f.default).create("LABEL",{title:e.get("title")||e.get("name"),click:o,style:{userSelect:"none"},parent:d});if(p.addEventListener("selectstart",function(){return!1}),(0,f.default).create("SPAN",{html:e.get("title")||e.get("name"),click:(function(t){this.get("selection")&&(t.stopPropagation(),this.selectLayer(e))}).bind(this),parent:p}),this.reordering&&(u<r.length-1&&(e.get("allwaysOnTop")||!r[u+1].get("allwaysOnTop"))||u>0&&(!e.get("allwaysOnTop")||r[u-1].get("allwaysOnTop")))&&(0,f.default).create("DIV",{className:"layerup ol-noscroll",title:this.tip.up,on:{"mousedown touchstart":function(t){i.dragOrdering_(t)}},parent:c}),e.getLayers){var g=0;e.getLayers().forEach(function(t){i.displayInLayerSwitcher(t)&&g++}),g&&(0,f.default).create("DIV",{className:e.get("openInLayerSwitcher")?"collapse-layers":"expend-layers",title:this.tip.plus,click:function(){var t=i._getLayerForLI(this.parentNode.parentNode);t.set("openInLayerSwitcher",!t.get("openInLayerSwitcher"))},parent:c})}if(this.oninfo&&(0,f.default).create("DIV",{className:"layerInfo",title:this.tip.info,click:n,parent:c}),this.hastrash&&!e.get("noSwitcherDelete")&&(0,f.default).create("DIV",{className:"layerTrash",title:this.tip.trash,click:l,parent:c}),this.hasextent&&r[u].getExtent()){var m=r[u].getExtent();4==m.length&&m[0]<m[2]&&m[1]<m[3]&&(0,f.default).create("DIV",{className:"layerExtent",title:this.tip.extent,click:s,parent:c})}if(this.show_progress&&e instanceof a.default){var y=(0,f.default).create("DIV",{className:"layerswitcher-progress",parent:d});this.setprogress_(e),e.layerswitcher_progress=(0,f.default).create("DIV",{parent:y})}var x=(0,f.default).create("DIV",{className:"layerswitcher-opacity",click:function(t){if(t.target===this){t.stopPropagation(),t.preventDefault();var e=Math.max(0,Math.min(1,t.offsetX/(0,f.default).getStyle(this,"width")));i._getLayerForLI(this.parentNode.parentNode).setOpacity(e),this.parentNode.querySelectorAll(".layerswitcher-opacity-label")[0].innerHTML=Math.round(100*e)}},parent:d});if((0,f.default).create("DIV",{className:"layerswitcher-opacity-cursor ol-noscroll",style:{left:100*e.getOpacity()+"%"},on:{"mousedown touchstart":function(t){i.dragOpacity_(t)}},parent:x}),(0,f.default).create("DIV",{className:"layerswitcher-opacity-label",html:Math.round(100*e.getOpacity()),parent:d}),e.getLayers&&(h.classList.add("ol-layer-group"),!0===e.get("openInLayerSwitcher"))){var v=(0,f.default).create("UL",{parent:h});this.drawList(v,e.getLayers())}h.classList.add(this.getLayerClass(e)),this.dispatchEvent({type:"drawlist",layer:e,li:h})}for(var u=r.length-1;u>=0;u--)h.call(this,r[u]);this.viewChange(),t===this.panel_&&this.overflow()}getLayerClass(t){return t?t.getLayers?"ol-layer-group":t instanceof s.default?"ol-layer-vector":t instanceof l.default?"ol-layer-vectortile":t instanceof a.default?"ol-layer-tile":t instanceof h.default?"ol-layer-image":t instanceof u.default?"ol-layer-heatmap":t.getFeatures?"ol-layer-vectorimage":"unknown":"none"}selectLayer(t,e){if(!t){if(!this.getMap())return;t=this.getMap().getLayers().item(this.getMap().getLayers().getLength()-1)}this._selectedLayer=t,this.drawPanel(),e||this.dispatchEvent({type:"select",layer:t})}getSelection(){return this._selectedLayer}setprogress_(t){if(!t.layerswitcher_progress){var e=0,i=0,r=function(){i===e?(i=e=0,(0,f.default).setStyle(t.layerswitcher_progress,{width:0})):(0,f.default).setStyle(t.layerswitcher_progress,{width:(e/i*100).toFixed(1)+"%"})};t.getSource().on("tileloadstart",function(){i++,r()}),t.getSource().on("tileloadend",function(){e++,r()}),t.getSource().on("tileloaderror",function(){e++,r()})}}};d.prototype.tip={up:"up/down",down:"down",info:"informations...",extent:"zoom to extent",trash:"remove layer",plus:"expand/shrink"};var p=d}),a("dMe05",function(t,i){e(t.exports,"default",()=>s);var r=n("55uKe"),o=n("fnQuI");class a extends r.default{constructor(t){super(t)}createRenderer(){return new o.default(this)}getData(t){return super.getData(t)}}var s=a}),a("55uKe",function(t,i){e(t.exports,"default",()=>a);var r=n("2K2IB");class o extends r.default{constructor(t){super(t=t||{})}}var a=o}),a("8WefF",function(t,i){e(t.exports,"default",()=>f);var r=n("2YyN3"),o=n("14k51"),a=n("2q51R"),s=n("a6roo"),l=n("cgxQK");let h={BLUR:"blur",GRADIENT:"gradient",RADIUS:"radius"},u=["#00f","#0ff","#0f0","#ff0","#f00"];class c extends r.default{constructor(t){let e=Object.assign({},t=t||{});delete e.gradient,delete e.radius,delete e.blur,delete e.weight,super(e),this.gradient_=null,this.addChangeListener(h.GRADIENT,this.handleGradientChanged_),this.setGradient(t.gradient?t.gradient:u),this.setBlur(void 0!==t.blur?t.blur:15),this.setRadius(void 0!==t.radius?t.radius:8);let i=t.weight?t.weight:"weight";"string"==typeof i?this.weightFunction_=function(t){return t.get(i)}:this.weightFunction_=i,this.setRenderOrder(null)}getBlur(){return this.get(h.BLUR)}getGradient(){return this.get(h.GRADIENT)}getRadius(){return this.get(h.RADIUS)}handleGradientChanged_(){this.gradient_=function(t){let e=(0,l.createCanvasContext2D)(1,256),i=e.createLinearGradient(0,0,1,256),r=1/(t.length-1);for(let e=0,o=t.length;e<o;++e)i.addColorStop(e*r,t[e]);return e.fillStyle=i,e.fillRect(0,0,1,256),e.canvas}(this.getGradient())}setBlur(t){this.set(h.BLUR,t)}setGradient(t){this.set(h.GRADIENT,t)}setRadius(t){this.set(h.RADIUS,t)}createRenderer(){let t=new(0,a.ShaderBuilder)().addAttribute("float a_prop_weight").addVarying("v_prop_weight","float","a_prop_weight").addUniform("float u_size").addUniform("float u_blurSlope").setSymbolSizeExpression("vec2(u_size)").setSymbolColorExpression("vec4(smoothstep(0., 1., (1. - length(coordsPx * 2. / v_quadSizePx)) * u_blurSlope) * v_prop_weight)");return new o.default(this,{className:this.getClassName(),attributes:[{name:"weight",callback:t=>{let e=this.weightFunction_(t);return void 0!==e?(0,s.clamp)(e,0,1):1}}],uniforms:{u_size:()=>(this.get(h.RADIUS)+this.get(h.BLUR))*2,u_blurSlope:()=>this.get(h.RADIUS)/Math.max(1,this.get(h.BLUR))},hitDetectionEnabled:!0,vertexShader:t.getSymbolVertexShader(),fragmentShader:t.getSymbolFragmentShader(),postProcesses:[{fragmentShader:`
            precision mediump float;

            uniform sampler2D u_image;
            uniform sampler2D u_gradientTexture;
            uniform float u_opacity;

            varying vec2 v_texCoord;

            void main() {
              vec4 color = texture2D(u_image, v_texCoord);
              gl_FragColor.a = color.a * u_opacity;
              gl_FragColor.rgb = texture2D(u_gradientTexture, vec2(0.5, color.a)).rgb;
              gl_FragColor.rgb *= gl_FragColor.a;
            }`,uniforms:{u_gradientTexture:()=>this.gradient_,u_opacity:()=>this.getOpacity()}}]})}renderDeclutter(){}}var f=c}),a("14k51",function(t,i){e(t.exports,"default",()=>S);var r=n("2YyN3"),o=n("gKdkP"),a=n("bCUH1"),s=n("77SUz"),l=n("iHIuK"),h=n("4WkA9"),u=n("5XVOZ"),c=n("knkkM"),f=n("RJ0Sz"),d=n("14PDX"),p=n("eJ4LZ"),g=n("jZquI"),m=n("bxq6G"),y=n("6AH2e"),x=n("gzr8q"),v=n("lVQul"),b=n("hQEK0"),w=n("bsgMw");class _ extends l.default{constructor(t,e){let i=e.uniforms||{},r=(0,d.create)();i[c.DefaultUniform.PROJECTION_MATRIX]=r,super(t,{uniforms:i,postProcesses:e.postProcesses}),this.sourceRevision_=-1,this.verticesBuffer_=new s.default(u.ARRAY_BUFFER,u.DYNAMIC_DRAW),this.indicesBuffer_=new s.default(u.ELEMENT_ARRAY_BUFFER,u.DYNAMIC_DRAW),this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.program_,this.hitDetectionEnabled_=e.hitDetectionEnabled??!0;let n=e.attributes?e.attributes.map(function(t){return{name:"a_prop_"+t.name,size:1,type:c.AttributeType.FLOAT}}):[];this.attributes=[{name:"a_position",size:2,type:c.AttributeType.FLOAT},{name:"a_index",size:1,type:c.AttributeType.FLOAT}],this.hitDetectionEnabled_&&(this.attributes.push({name:"a_hitColor",size:4,type:c.AttributeType.FLOAT}),this.attributes.push({name:"a_featureUid",size:1,type:c.AttributeType.FLOAT})),this.attributes.push(...n),this.customAttributes=e.attributes?e.attributes:[],this.previousExtent_=(0,g.createEmpty)(),this.currentTransform_=r,this.renderTransform_=(0,d.create)(),this.invertRenderTransform_=(0,d.create)(),this.renderInstructions_=new Float32Array(0),this.hitRenderTarget_,this.lastSentId=0,this.worker_=(0,y.create)(),this.worker_.addEventListener("message",t=>{let e=t.data;if(e.type===f.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS){let i=e.projectionTransform;this.verticesBuffer_.fromArrayBuffer(e.vertexBuffer),this.helper.flushBufferData(this.verticesBuffer_),this.indicesBuffer_.fromArrayBuffer(e.indexBuffer),this.helper.flushBufferData(this.indicesBuffer_),this.renderTransform_=i,(0,d.makeInverse)(this.invertRenderTransform_,this.renderTransform_),this.renderInstructions_=new Float32Array(t.data.renderInstructions),e.id===this.lastSentId&&(this.ready=!0),this.getLayer().changed()}}),this.featureCache_={},this.featureCount_=0;let a=this.getLayer().getSource();this.sourceListenKeys_=[(0,w.listen)(a,o.default.ADDFEATURE,this.handleSourceFeatureAdded_,this),(0,w.listen)(a,o.default.CHANGEFEATURE,this.handleSourceFeatureChanged_,this),(0,w.listen)(a,o.default.REMOVEFEATURE,this.handleSourceFeatureDelete_,this),(0,w.listen)(a,o.default.CLEAR,this.handleSourceFeatureClear_,this)],a.forEachFeature(t=>{this.featureCache_[(0,v.getUid)(t)]={feature:t,properties:t.getProperties(),geometry:t.getGeometry()},this.featureCount_++})}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.hitDetectionEnabled_&&(this.hitRenderTarget_=new h.default(this.helper))}handleSourceFeatureAdded_(t){let e=t.feature;this.featureCache_[(0,v.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()},this.featureCount_++}handleSourceFeatureChanged_(t){let e=t.feature;this.featureCache_[(0,v.getUid)(e)]={feature:e,properties:e.getProperties(),geometry:e.getGeometry()}}handleSourceFeatureDelete_(t){let e=t.feature;delete this.featureCache_[v.getUid(e)],this.featureCount_--}handleSourceFeatureClear_(){this.featureCache_={},this.featureCount_=0}renderFrame(t){let e=this.helper.getGL();this.preRender(e,t);let[i,r,o]=(0,b.getWorldParameters)(t,this.getLayer());return this.renderWorlds(t,!1,i,r,o),this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent),this.hitDetectionEnabled_&&(this.renderWorlds(t,!0,i,r,o),this.hitRenderTarget_.clearCachedData()),this.postRender(e,t),this.helper.getCanvas()}prepareFrameInternal(t){let e=this.getLayer(),i=e.getSource(),o=t.viewState,n=!t.viewHints[a.default.ANIMATING]&&!t.viewHints[a.default.INTERACTING],s=!(0,g.equals)(this.previousExtent_,t.extent),l=this.sourceRevision_<i.getRevision();if(l&&(this.sourceRevision_=i.getRevision()),n&&(s||l)){let n=o.projection,a=o.resolution,s=e instanceof r.default?e.getRenderBuffer():0,l=(0,g.buffer)(t.extent,s*a);i.loadFeatures(l,a,n),this.rebuildBuffers_(t),this.previousExtent_=t.extent.slice()}return this.helper.useProgram(this.program_,t),this.helper.prepareDraw(t),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes),!0}rebuildBuffers_(t){let e,i;let r=(0,d.create)();this.helper.makeProjectionTransform(t,r);let o=(0,x.getUserProjection)(),n=(this.hitDetectionEnabled_?7:2)+this.customAttributes.length,a=n*this.featureCount_;this.renderInstructions_&&this.renderInstructions_.length===a||(this.renderInstructions_=new Float32Array(a));let s=[],l=[],h=-1;for(let n in this.featureCache_)if((i=(e=this.featureCache_[n]).geometry)&&"Point"===i.getType()){if(o){let e=(0,x.fromUserCoordinate)(i.getFlatCoordinates(),t.viewState.projection);s[0]=e[0],s[1]=e[1]}else s[0]=i.getFlatCoordinates()[0],s[1]=i.getFlatCoordinates()[1];if((0,d.apply)(r,s),this.renderInstructions_[++h]=s[0],this.renderInstructions_[++h]=s[1],this.hitDetectionEnabled_){let t=(0,m.colorEncodeId)(h+5,l);this.renderInstructions_[++h]=t[0],this.renderInstructions_[++h]=t[1],this.renderInstructions_[++h]=t[2],this.renderInstructions_[++h]=t[3],this.renderInstructions_[++h]=Number(n)}for(let t=0;t<this.customAttributes.length;t++){let i=this.customAttributes[t].callback(e.feature,e.properties);this.renderInstructions_[++h]=i}}let u={id:++this.lastSentId,type:f.WebGLWorkerMessageType.GENERATE_POINT_BUFFERS,renderInstructions:this.renderInstructions_.buffer,customAttributesSize:n-2};u.projectionTransform=r,this.ready=!1,this.worker_.postMessage(u,[this.renderInstructions_.buffer]),this.renderInstructions_=null}forEachFeatureAtCoordinate(t,e,i,r,o){if((0,p.assert)(this.hitDetectionEnabled_,"`forEachFeatureAtCoordinate` cannot be used on a WebGL layer if the hit detection logic has been disabled using the `disableHitDetection: true` option."),!this.renderInstructions_||!this.hitDetectionEnabled_)return;let n=(0,d.apply)(e.coordinateToPixelTransform,t.slice()),a=this.hitRenderTarget_.readPixel(n[0]/2,n[1]/2),s=[a[0]/255,a[1]/255,a[2]/255,a[3]/255],l=(0,m.colorDecodeId)(s),h=Math.floor(this.renderInstructions_[l]).toString(),u=this.getLayer().getSource().getFeatureByUid(h);if(u)return r(u,this.getLayer(),null)}renderWorlds(t,e,i,r,o){let n=i;this.helper.useProgram(this.program_,t),e&&(this.hitRenderTarget_.setSize([Math.floor(t.size[0]/2),Math.floor(t.size[1]/2)]),this.helper.prepareDrawToRenderTarget(t,this.hitRenderTarget_,!0)),this.helper.bindBuffer(this.verticesBuffer_),this.helper.bindBuffer(this.indicesBuffer_),this.helper.enableAttributes(this.attributes);do{this.helper.makeProjectionTransform(t,this.currentTransform_),(0,d.translate)(this.currentTransform_,n*o,0),(0,d.multiply)(this.currentTransform_,this.invertRenderTransform_),this.helper.applyUniforms(t),this.helper.applyHitDetectionUniform(e);let i=this.indicesBuffer_.getSize();this.helper.drawElements(0,i)}while(++n<r)}disposeInternal(){this.worker_.terminate(),this.layer_=null,this.sourceListenKeys_.forEach(function(t){(0,w.unlistenByKey)(t)}),this.sourceListenKeys_=null,super.disposeInternal()}}var S=_}),a("77SUz",function(t,i){e(t.exports,"default",()=>l);var r=n("5XVOZ"),o=n("eJ4LZ");let a={STATIC_DRAW:r.STATIC_DRAW,STREAM_DRAW:r.STREAM_DRAW,DYNAMIC_DRAW:r.DYNAMIC_DRAW};function s(t){switch(t){case r.ARRAY_BUFFER:return Float32Array;case r.ELEMENT_ARRAY_BUFFER:return Uint32Array;default:return Float32Array}}var l=class{constructor(t,e){this.array_=null,this.type_=t,(0,o.assert)(t===r.ARRAY_BUFFER||t===r.ELEMENT_ARRAY_BUFFER,"A `WebGLArrayBuffer` must either be of type `ELEMENT_ARRAY_BUFFER` or `ARRAY_BUFFER`"),this.usage_=void 0!==e?e:a.STATIC_DRAW}ofSize(t){return this.array_=new(s(this.type_))(t),this}fromArray(t){return this.array_=s(this.type_).from(t),this}fromArrayBuffer(t){return this.array_=new(s(this.type_))(t),this}getType(){return this.type_}getArray(){return this.array_}getUsage(){return this.usage_}getSize(){return this.array_?this.array_.length:0}}}),a("5XVOZ",function(t,i){e(t.exports,"ARRAY_BUFFER",()=>o),e(t.exports,"ELEMENT_ARRAY_BUFFER",()=>a),e(t.exports,"STREAM_DRAW",()=>s),e(t.exports,"STATIC_DRAW",()=>l),e(t.exports,"DYNAMIC_DRAW",()=>h),e(t.exports,"UNSIGNED_BYTE",()=>u),e(t.exports,"UNSIGNED_SHORT",()=>c),e(t.exports,"UNSIGNED_INT",()=>f),e(t.exports,"FLOAT",()=>d),e(t.exports,"getContext",()=>g);var r=n("lW8xZ");let o=34962,a=34963,s=35040,l=35044,h=35048,u=5121,c=5123,f=5125,d=5126,p=["experimental-webgl","webgl","webkit-3d","moz-webgl"];function g(t,e){e=Object.assign({preserveDrawingBuffer:!0,antialias:!r.SAFARI_BUG_237906},e);let i=p.length;for(let r=0;r<i;++r)try{let i=t.getContext(p[r],e);if(i)return i}catch(t){}return null}}),a("iHIuK",function(t,i){e(t.exports,"default",()=>c);var r=n("7xQTT"),o=n("lgqLq"),a=n("fj1q7"),s=n("6ej6F"),l=n("knkkM"),h=n("14PDX");class u extends o.default{constructor(t,e){super(t),e=e||{},this.inversePixelTransform_=(0,h.create)(),this.pixelContext_=null,this.postProcesses_=e.postProcesses,this.uniforms_=e.uniforms,this.helper,t.addChangeListener(r.default.MAP,this.removeHelper.bind(this)),this.dispatchPreComposeEvent=this.dispatchPreComposeEvent.bind(this),this.dispatchPostComposeEvent=this.dispatchPostComposeEvent.bind(this)}dispatchPreComposeEvent(t,e){let i=this.getLayer();if(i.hasListener(s.default.PRECOMPOSE)){let r=new a.default(s.default.PRECOMPOSE,void 0,e,t);i.dispatchEvent(r)}}dispatchPostComposeEvent(t,e){let i=this.getLayer();if(i.hasListener(s.default.POSTCOMPOSE)){let r=new a.default(s.default.POSTCOMPOSE,void 0,e,t);i.dispatchEvent(r)}}reset(t){this.uniforms_=t.uniforms,this.helper&&this.helper.setUniforms(this.uniforms_)}removeHelper(){this.helper&&(this.helper.dispose(),delete this.helper)}prepareFrame(t){if(this.getLayer().getRenderSource()){let e,i=!0,r=-1;for(let o=0,n=t.layerStatesArray.length;o<n;o++){let n=t.layerStatesArray[o].layer,a=n.getRenderer();if(!(a instanceof u)){i=!0;continue}let s=n.getClassName();if((i||s!==e)&&(r+=1,i=!1),e=s,a===this)break}let o="map/"+t.mapId+"/group/"+r;(!this.helper||!this.helper.canvasCacheKeyMatches(o)||this.helper.needsToBeRecreated())&&(this.removeHelper(),this.helper=new l.default({postProcesses:this.postProcesses_,uniforms:this.uniforms_,canvasCacheKey:o}),e&&(this.helper.getCanvas().className=e),this.afterHelperCreated())}return this.prepareFrameInternal(t)}afterHelperCreated(){}prepareFrameInternal(t){return!0}disposeInternal(){this.removeHelper(),super.disposeInternal()}dispatchRenderEvent_(t,e,i){let r=this.getLayer();if(r.hasListener(t)){(0,h.compose)(this.inversePixelTransform_,0,0,i.pixelRatio,-i.pixelRatio,0,0,-i.size[1]);let o=new a.default(t,this.inversePixelTransform_,i,e);r.dispatchEvent(o)}}preRender(t,e){this.dispatchRenderEvent_(s.default.PRERENDER,t,e)}postRender(t,e){this.dispatchRenderEvent_(s.default.POSTRENDER,t,e)}}var c=u}),a("knkkM",function(t,i){e(t.exports,"DefaultUniform",()=>f),e(t.exports,"AttributeType",()=>d),e(t.exports,"default",()=>x);var r=n("6M4MS"),o=n("jjfV9"),a=n("aMlwv"),s=n("5XVOZ"),l=n("kKEgb"),h=n("14PDX"),u=n("jYEYW"),c=n("lVQul");let f={PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix",TIME:"u_time",ZOOM:"u_zoom",RESOLUTION:"u_resolution",ROTATION:"u_rotation",VIEWPORT_SIZE_PX:"u_viewportSizePx",PIXEL_RATIO:"u_pixelRatio",HIT_DETECTION:"u_hitDetection"},d={UNSIGNED_BYTE:s.UNSIGNED_BYTE,UNSIGNED_SHORT:s.UNSIGNED_SHORT,UNSIGNED_INT:s.UNSIGNED_INT,FLOAT:s.FLOAT},p={},g=0;class m extends o.default{constructor(t){super(),t=t||{},this.boundHandleWebGLContextLost_=this.handleWebGLContextLost.bind(this),this.boundHandleWebGLContextRestored_=this.handleWebGLContextRestored.bind(this),this.canvasCacheKey_=t.canvasCacheKey?"shared/"+t.canvasCacheKey:function(){let t="unique/"+g;return g+=1,t}(),this.gl_=function(t){let e=p[t];if(!e){let i=document.createElement("canvas");i.width=1,i.height=1,i.style.position="absolute",i.style.left="0",e={users:0,context:(0,s.getContext)(i)},p[t]=e}return e.users+=1,e.context}(this.canvasCacheKey_),this.bufferCache_={},this.extensionCache_={},this.currentProgram_=null,this.needsToBeRecreated_=!1;let e=this.gl_.canvas;e.addEventListener(r.default.LOST,this.boundHandleWebGLContextLost_),e.addEventListener(r.default.RESTORED,this.boundHandleWebGLContextRestored_),this.offsetRotateMatrix_=(0,h.create)(),this.offsetScaleMatrix_=(0,h.create)(),this.tmpMat4_=(0,u.create)(),this.uniformLocationsByProgram_={},this.attribLocationsByProgram_={},this.uniforms_=[],t.uniforms&&this.setUniforms(t.uniforms),this.postProcessPasses_=t.postProcesses?t.postProcesses.map(t=>new a.default({webGlContext:this.gl_,scaleRatio:t.scaleRatio,vertexShader:t.vertexShader,fragmentShader:t.fragmentShader,uniforms:t.uniforms})):[new a.default({webGlContext:this.gl_})],this.shaderCompileErrors_=null,this.startTime_=Date.now()}setUniforms(t){this.uniforms_=[],this.addUniforms(t)}addUniforms(t){for(let e in t)this.uniforms_.push({name:e,value:t[e]})}canvasCacheKeyMatches(t){return this.canvasCacheKey_==="shared/"+t}getExtension(t){if(t in this.extensionCache_)return this.extensionCache_[t];let e=this.gl_.getExtension(t);return this.extensionCache_[t]=e,e}bindBuffer(t){let e=this.gl_,i=(0,c.getUid)(t),r=this.bufferCache_[i];r||(r={buffer:t,webGlBuffer:e.createBuffer()},this.bufferCache_[i]=r),e.bindBuffer(t.getType(),r.webGlBuffer)}flushBufferData(t){let e=this.gl_;this.bindBuffer(t),e.bufferData(t.getType(),t.getArray(),t.getUsage())}deleteBuffer(t){let e=this.gl_,i=(0,c.getUid)(t),r=this.bufferCache_[i];r&&!e.isContextLost()&&e.deleteBuffer(r.webGlBuffer),delete this.bufferCache_[i]}disposeInternal(){let t=this.gl_.canvas;t.removeEventListener(r.default.LOST,this.boundHandleWebGLContextLost_),t.removeEventListener(r.default.RESTORED,this.boundHandleWebGLContextRestored_),function(t){let e=p[t];if(!e||(e.users-=1,e.users>0))return;let i=e.context,r=i.getExtension("WEBGL_lose_context");r&&r.loseContext();let o=i.canvas;o.width=1,o.height=1,delete p[t]}(this.canvasCacheKey_),delete this.gl_}prepareDraw(t,e,i){let r=this.gl_,o=this.getCanvas(),n=t.size,a=t.pixelRatio;(o.width!==n[0]*a||o.height!==n[1]*a)&&(o.width=n[0]*a,o.height=n[1]*a,o.style.width=n[0]+"px",o.style.height=n[1]+"px");for(let e=this.postProcessPasses_.length-1;e>=0;e--)this.postProcessPasses_[e].init(t);r.bindTexture(r.TEXTURE_2D,null),r.clearColor(0,0,0,0),r.depthRange(0,1),r.clearDepth(1),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT),r.enable(r.BLEND),r.blendFunc(r.ONE,e?r.ZERO:r.ONE_MINUS_SRC_ALPHA),i?(r.enable(r.DEPTH_TEST),r.depthFunc(r.LEQUAL)):r.disable(r.DEPTH_TEST)}bindTexture(t,e,i){let r=this.gl_;r.activeTexture(r.TEXTURE0+e),r.bindTexture(r.TEXTURE_2D,t),r.uniform1i(this.getUniformLocation(i),e)}prepareDrawToRenderTarget(t,e,i,r){let o=this.gl_,n=e.getSize();o.bindFramebuffer(o.FRAMEBUFFER,e.getFramebuffer()),o.bindRenderbuffer(o.RENDERBUFFER,e.getDepthbuffer()),o.viewport(0,0,n[0],n[1]),o.bindTexture(o.TEXTURE_2D,e.getTexture()),o.clearColor(0,0,0,0),o.depthRange(0,1),o.clearDepth(1),o.clear(o.COLOR_BUFFER_BIT|o.DEPTH_BUFFER_BIT),o.enable(o.BLEND),o.blendFunc(o.ONE,i?o.ZERO:o.ONE_MINUS_SRC_ALPHA),r?(o.enable(o.DEPTH_TEST),o.depthFunc(o.LEQUAL)):o.disable(o.DEPTH_TEST)}drawElements(t,e){let i=this.gl_;this.getExtension("OES_element_index_uint");let r=i.UNSIGNED_INT;i.drawElements(i.TRIANGLES,e-t,r,4*t)}finalizeDraw(t,e,i){for(let r=0,o=this.postProcessPasses_.length;r<o;r++)r===o-1?this.postProcessPasses_[r].apply(t,null,e,i):this.postProcessPasses_[r].apply(t,this.postProcessPasses_[r+1])}getCanvas(){return this.gl_.canvas}getGL(){return this.gl_}applyFrameState(t){let e=t.size,i=t.viewState.rotation,r=t.pixelRatio;this.setUniformFloatValue(f.TIME,(Date.now()-this.startTime_)*.001),this.setUniformFloatValue(f.ZOOM,t.viewState.zoom),this.setUniformFloatValue(f.RESOLUTION,t.viewState.resolution),this.setUniformFloatValue(f.PIXEL_RATIO,r),this.setUniformFloatVec2(f.VIEWPORT_SIZE_PX,[e[0],e[1]]),this.setUniformFloatValue(f.ROTATION,i)}applyHitDetectionUniform(t){let e=this.getUniformLocation(f.HIT_DETECTION);this.getGL().uniform1i(e,t?1:0),t&&this.setUniformFloatValue(f.PIXEL_RATIO,.5)}applyUniforms(t){let e;let i=this.gl_,r=0;this.uniforms_.forEach(o=>{if((e="function"==typeof o.value?o.value(t):o.value)instanceof HTMLCanvasElement||e instanceof HTMLImageElement||e instanceof ImageData)o.texture||(o.prevValue=void 0,o.texture=i.createTexture()),this.bindTexture(o.texture,r,o.name),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e instanceof HTMLImageElement&&!e.complete||o.prevValue===e||(o.prevValue=e,i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e)),r++;else if(Array.isArray(e)&&6===e.length)this.setUniformMatrixValue(o.name,(0,u.fromTransform)(this.tmpMat4_,e));else if(Array.isArray(e)&&e.length<=4)switch(e.length){case 2:i.uniform2f(this.getUniformLocation(o.name),e[0],e[1]);return;case 3:i.uniform3f(this.getUniformLocation(o.name),e[0],e[1],e[2]);return;case 4:i.uniform4f(this.getUniformLocation(o.name),e[0],e[1],e[2],e[3]);return;default:return}else"number"==typeof e&&i.uniform1f(this.getUniformLocation(o.name),e)})}useProgram(t,e){this.gl_.useProgram(t),this.currentProgram_=t,this.applyFrameState(e),this.applyUniforms(e)}compileShader(t,e){let i=this.gl_,r=i.createShader(e);return i.shaderSource(r,t),i.compileShader(r),r}getProgram(t,e){let i=this.gl_,r=this.compileShader(t,i.FRAGMENT_SHADER),o=this.compileShader(e,i.VERTEX_SHADER),n=i.createProgram();if(i.attachShader(n,r),i.attachShader(n,o),i.linkProgram(n),!i.getShaderParameter(r,i.COMPILE_STATUS))throw Error(`Fragment shader compilation failed: ${i.getShaderInfoLog(r)}`);if(i.deleteShader(r),!i.getShaderParameter(o,i.COMPILE_STATUS))throw Error(`Vertex shader compilation failed: ${i.getShaderInfoLog(o)}`);if(i.deleteShader(o),!i.getProgramParameter(n,i.LINK_STATUS))throw Error(`GL program linking failed: ${i.getProgramInfoLog(n)}`);return n}getUniformLocation(t){let e=(0,c.getUid)(this.currentProgram_);return void 0===this.uniformLocationsByProgram_[e]&&(this.uniformLocationsByProgram_[e]={}),void 0===this.uniformLocationsByProgram_[e][t]&&(this.uniformLocationsByProgram_[e][t]=this.gl_.getUniformLocation(this.currentProgram_,t)),this.uniformLocationsByProgram_[e][t]}getAttributeLocation(t){let e=(0,c.getUid)(this.currentProgram_);return void 0===this.attribLocationsByProgram_[e]&&(this.attribLocationsByProgram_[e]={}),void 0===this.attribLocationsByProgram_[e][t]&&(this.attribLocationsByProgram_[e][t]=this.gl_.getAttribLocation(this.currentProgram_,t)),this.attribLocationsByProgram_[e][t]}makeProjectionTransform(t,e){let i=t.size,r=t.viewState.rotation,o=t.viewState.resolution,n=t.viewState.center;return(0,h.compose)(e,0,0,2/(o*i[0]),2/(o*i[1]),-r,-n[0],-n[1]),e}setUniformFloatValue(t,e){this.gl_.uniform1f(this.getUniformLocation(t),e)}setUniformFloatVec2(t,e){this.gl_.uniform2fv(this.getUniformLocation(t),e)}setUniformFloatVec4(t,e){this.gl_.uniform4fv(this.getUniformLocation(t),e)}setUniformMatrixValue(t,e){this.gl_.uniformMatrix4fv(this.getUniformLocation(t),!1,e)}enableAttributeArray_(t,e,i,r,o){let n=this.getAttributeLocation(t);n<0||(this.gl_.enableVertexAttribArray(n),this.gl_.vertexAttribPointer(n,e,i,!1,r,o))}enableAttributes(t){let e=function(t){let e=0;for(let i=0;i<t.length;i++){let r=t[i];e+=r.size*y(r.type)}return e}(t),i=0;for(let r=0;r<t.length;r++){let o=t[r];this.enableAttributeArray_(o.name,o.size,o.type||s.FLOAT,e,i),i+=o.size*y(o.type)}}handleWebGLContextLost(t){(0,l.clear)(this.bufferCache_),this.currentProgram_=null,t.preventDefault()}handleWebGLContextRestored(){this.needsToBeRecreated_=!0}needsToBeRecreated(){return this.needsToBeRecreated_}createTexture(t,e,i){let r=this.gl_;i=i||r.createTexture();let o=r.RGBA,n=r.RGBA,a=r.UNSIGNED_BYTE;return r.bindTexture(r.TEXTURE_2D,i),e?r.texImage2D(r.TEXTURE_2D,0,o,n,a,e):r.texImage2D(r.TEXTURE_2D,0,o,t[0],t[1],0,n,a,null),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_MIN_FILTER,r.LINEAR),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_S,r.CLAMP_TO_EDGE),r.texParameteri(r.TEXTURE_2D,r.TEXTURE_WRAP_T,r.CLAMP_TO_EDGE),i}}function y(t){switch(t){case d.UNSIGNED_BYTE:return Uint8Array.BYTES_PER_ELEMENT;case d.UNSIGNED_SHORT:return Uint16Array.BYTES_PER_ELEMENT;case d.UNSIGNED_INT:return Uint32Array.BYTES_PER_ELEMENT;case d.FLOAT:default:return Float32Array.BYTES_PER_ELEMENT}}var x=m}),a("6M4MS",function(t,i){e(t.exports,"default",()=>r);var r={LOST:"webglcontextlost",RESTORED:"webglcontextrestored"}}),a("aMlwv",function(t,i){e(t.exports,"default",()=>s);var r=n("lVQul");let o=`
  precision mediump float;
  
  attribute vec2 a_position;
  varying vec2 v_texCoord;
  varying vec2 v_screenCoord;
  
  uniform vec2 u_screenSize;
   
  void main() {
    v_texCoord = a_position * 0.5 + 0.5;
    v_screenCoord = v_texCoord * u_screenSize;
    gl_Position = vec4(a_position, 0.0, 1.0);
  }
`,a=`
  precision mediump float;
   
  uniform sampler2D u_image;
  uniform float u_opacity;
   
  varying vec2 v_texCoord;
   
  void main() {
    gl_FragColor = texture2D(u_image, v_texCoord) * u_opacity;
  }
`;var s=class{constructor(t){this.gl_=t.webGlContext;let e=this.gl_;this.scaleRatio_=t.scaleRatio||1,this.renderTargetTexture_=e.createTexture(),this.renderTargetTextureSize_=null,this.frameBuffer_=e.createFramebuffer(),this.depthBuffer_=e.createRenderbuffer();let i=e.createShader(e.VERTEX_SHADER);e.shaderSource(i,t.vertexShader||o),e.compileShader(i);let r=e.createShader(e.FRAGMENT_SHADER);e.shaderSource(r,t.fragmentShader||a),e.compileShader(r),this.renderTargetProgram_=e.createProgram(),e.attachShader(this.renderTargetProgram_,i),e.attachShader(this.renderTargetProgram_,r),e.linkProgram(this.renderTargetProgram_),this.renderTargetVerticesBuffer_=e.createBuffer(),e.bindBuffer(e.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),e.bufferData(e.ARRAY_BUFFER,new Float32Array([-1,-1,1,-1,-1,1,1,-1,1,1,-1,1]),e.STATIC_DRAW),this.renderTargetAttribLocation_=e.getAttribLocation(this.renderTargetProgram_,"a_position"),this.renderTargetUniformLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_screenSize"),this.renderTargetOpacityLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_opacity"),this.renderTargetTextureLocation_=e.getUniformLocation(this.renderTargetProgram_,"u_image"),this.uniforms_=[],t.uniforms&&Object.keys(t.uniforms).forEach(i=>{this.uniforms_.push({value:t.uniforms[i],location:e.getUniformLocation(this.renderTargetProgram_,i)})})}getGL(){return this.gl_}init(t){let e=this.getGL(),i=[e.drawingBufferWidth*this.scaleRatio_,e.drawingBufferHeight*this.scaleRatio_];if(e.bindFramebuffer(e.FRAMEBUFFER,this.getFrameBuffer()),e.bindRenderbuffer(e.RENDERBUFFER,this.getDepthBuffer()),e.viewport(0,0,i[0],i[1]),!this.renderTargetTextureSize_||this.renderTargetTextureSize_[0]!==i[0]||this.renderTargetTextureSize_[1]!==i[1]){this.renderTargetTextureSize_=i;let t=e.RGBA,r=e.RGBA,o=e.UNSIGNED_BYTE;e.bindTexture(e.TEXTURE_2D,this.renderTargetTexture_),e.texImage2D(e.TEXTURE_2D,0,t,i[0],i[1],0,r,o,null),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_S,e.CLAMP_TO_EDGE),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_WRAP_T,e.CLAMP_TO_EDGE),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.renderTargetTexture_,0),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,i[0],i[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthBuffer_)}}apply(t,e,i,o){let n=this.getGL(),a=t.size;if(n.bindFramebuffer(n.FRAMEBUFFER,e?e.getFrameBuffer():null),n.activeTexture(n.TEXTURE0),n.bindTexture(n.TEXTURE_2D,this.renderTargetTexture_),!e){let e=(0,r.getUid)(n.canvas);if(!t.renderTargets[e]){let i=n.getContextAttributes();i&&i.preserveDrawingBuffer&&(n.clearColor(0,0,0,0),n.clearDepth(1),n.clear(n.COLOR_BUFFER_BIT|n.DEPTH_BUFFER_BIT)),t.renderTargets[e]=!0}}n.disable(n.DEPTH_TEST),n.enable(n.BLEND),n.blendFunc(n.ONE,n.ONE_MINUS_SRC_ALPHA),n.viewport(0,0,n.drawingBufferWidth,n.drawingBufferHeight),n.bindBuffer(n.ARRAY_BUFFER,this.renderTargetVerticesBuffer_),n.useProgram(this.renderTargetProgram_),n.enableVertexAttribArray(this.renderTargetAttribLocation_),n.vertexAttribPointer(this.renderTargetAttribLocation_,2,n.FLOAT,!1,0,0),n.uniform2f(this.renderTargetUniformLocation_,a[0],a[1]),n.uniform1i(this.renderTargetTextureLocation_,0);let s=t.layerStatesArray[t.layerIndex].opacity;n.uniform1f(this.renderTargetOpacityLocation_,s),this.applyUniforms(t),i&&i(n,t),n.drawArrays(n.TRIANGLES,0,6),o&&o(n,t)}getFrameBuffer(){return this.frameBuffer_}getDepthBuffer(){return this.depthBuffer_}applyUniforms(t){let e;let i=this.getGL(),r=1;this.uniforms_.forEach(function(o){if((e="function"==typeof o.value?o.value(t):o.value)instanceof HTMLCanvasElement||e instanceof ImageData)o.texture||(o.texture=i.createTexture()),i.activeTexture(i[`TEXTURE${r}`]),i.bindTexture(i.TEXTURE_2D,o.texture),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_MIN_FILTER,i.LINEAR),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_S,i.CLAMP_TO_EDGE),i.texParameteri(i.TEXTURE_2D,i.TEXTURE_WRAP_T,i.CLAMP_TO_EDGE),e instanceof ImageData?i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,e.width,e.height,0,i.UNSIGNED_BYTE,new Uint8Array(e.data)):i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,e),i.uniform1i(o.location,r++);else if(Array.isArray(e))switch(e.length){case 2:i.uniform2f(o.location,e[0],e[1]);return;case 3:i.uniform3f(o.location,e[0],e[1],e[2]);return;case 4:i.uniform4f(o.location,e[0],e[1],e[2],e[3]);return;default:return}else"number"==typeof e&&i.uniform1f(o.location,e)})}}}),a("jYEYW",function(t,i){function r(){return[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]}function o(t,e){return t[0]=e[0],t[1]=e[1],t[4]=e[2],t[5]=e[3],t[12]=e[4],t[13]=e[5],t}e(t.exports,"create",()=>r),e(t.exports,"fromTransform",()=>o)}),a("4WkA9",function(t,i){e(t.exports,"default",()=>a);var r=n("kBSVF");let o=new Uint8Array(4);var a=class{constructor(t,e){this.helper_=t;let i=t.getGL();this.texture_=i.createTexture(),this.framebuffer_=i.createFramebuffer(),this.depthbuffer_=i.createRenderbuffer(),this.size_=e||[1,1],this.data_=new Uint8Array(0),this.dataCacheDirty_=!0,this.updateSize_()}setSize(t){(0,r.equals)(t,this.size_)||(this.size_[0]=t[0],this.size_[1]=t[1],this.updateSize_())}getSize(){return this.size_}clearCachedData(){this.dataCacheDirty_=!0}readAll(){if(this.dataCacheDirty_){let t=this.size_,e=this.helper_.getGL();e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.readPixels(0,0,t[0],t[1],e.RGBA,e.UNSIGNED_BYTE,this.data_),this.dataCacheDirty_=!1}return this.data_}readPixel(t,e){if(t<0||e<0||t>this.size_[0]||e>=this.size_[1])return o[0]=0,o[1]=0,o[2]=0,o[3]=0,o;this.readAll();let i=Math.floor(t)+(this.size_[1]-Math.floor(e)-1)*this.size_[0];return o[0]=this.data_[4*i],o[1]=this.data_[4*i+1],o[2]=this.data_[4*i+2],o[3]=this.data_[4*i+3],o}getTexture(){return this.texture_}getFramebuffer(){return this.framebuffer_}getDepthbuffer(){return this.depthbuffer_}updateSize_(){let t=this.size_,e=this.helper_.getGL();this.texture_=this.helper_.createTexture(t,null,this.texture_),e.bindFramebuffer(e.FRAMEBUFFER,this.framebuffer_),e.viewport(0,0,t[0],t[1]),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture_,0),e.bindRenderbuffer(e.RENDERBUFFER,this.depthbuffer_),e.renderbufferStorage(e.RENDERBUFFER,e.DEPTH_COMPONENT16,t[0],t[1]),e.framebufferRenderbuffer(e.FRAMEBUFFER,e.DEPTH_ATTACHMENT,e.RENDERBUFFER,this.depthbuffer_),this.data_=new Uint8Array(t[0]*t[1]*4)}}}),a("RJ0Sz",function(t,i){e(t.exports,"WebGLWorkerMessageType",()=>r);let r={GENERATE_POLYGON_BUFFERS:"GENERATE_POLYGON_BUFFERS",GENERATE_POINT_BUFFERS:"GENERATE_POINT_BUFFERS",GENERATE_LINE_STRING_BUFFERS:"GENERATE_LINE_STRING_BUFFERS"}}),a("bxq6G",function(t,i){e(t.exports,"LINESTRING_ANGLE_COSINE_CUTOFF",()=>r),e(t.exports,"colorEncodeId",()=>o),e(t.exports,"colorDecodeId",()=>a),n("lIQYe"),n("14PDX"),n("a6roo");let r=.985;function o(t,e){return(e=e||[])[0]=Math.floor(t/256/256/256)/255,e[1]=Math.floor(t/256/256)%256/255,e[2]=Math.floor(t/256)%256/255,e[3]=t%256/255,e}function a(t){return 0+(Math.round(16777216*t[0]*255)+Math.round(65536*t[1]*255)+Math.round(256*t[2]*255)+Math.round(255*t[3]))}}),a("lIQYe",function(t,e){function i(t,e,i){i=i||2;var c,f,g,y,x,v,b,w=e&&e.length,_=w?e[0]*i:t.length,S=r(t,0,_,i,!0),E=[];if(!S||S.next===S.prev)return E;if(w&&(S=function(t,e,i,a){var h,u,c,f,g,m=[];for(h=0,u=e.length;h<u;h++)c=e[h]*a,f=h<u-1?e[h+1]*a:t.length,(g=r(t,c,f,a,!1))===g.next&&(g.steiner=!0),m.push(function(t){var e=t,i=t;do(e.x<i.x||e.x===i.x&&e.y<i.y)&&(i=e),e=e.next;while(e!==t)return i}(g));for(m.sort(n),h=0;h<m.length;h++)i=function(t,e){var i=function(t,e){var i,r,o,n=e,a=t.x,h=t.y,u=-1/0;do{if(h<=n.y&&h>=n.next.y&&n.next.y!==n.y){var c=n.x+(h-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(c<=a&&c>u&&(u=c,o=n.x<n.next.x?n:n.next,c===a))return o}n=n.next}while(n!==e)if(!o)return null;var f,p=o,g=o.x,m=o.y,y=1/0;n=o;do a>=n.x&&n.x>=g&&a!==n.x&&s(h<m?a:u,h,g,m,h<m?u:a,h,n.x,n.y)&&(f=Math.abs(h-n.y)/(a-n.x),d(n,t)&&(f<y||f===y&&(n.x>o.x||n.x===o.x&&(i=o,r=n,0>l(i.prev,i,r.prev)&&0>l(r.next,i,i.next))))&&(o=n,y=f)),n=n.next;while(n!==p)return o}(t,e);if(!i)return e;var r=p(i,t);return o(r,r.next),o(i,i.next)}(m[h],i);return i}(t,e,S,i)),t.length>80*i){c=g=t[0],f=y=t[1];for(var A=i;A<_;A+=i)x=t[A],v=t[A+1],x<c&&(c=x),v<f&&(f=v),x>g&&(g=x),v>y&&(y=v);b=0!==(b=Math.max(g-c,y-f))?32767/b:0}return function t(e,i,r,n,c,f,g){if(e){!g&&f&&function(t,e,i,r){var o=t;do 0===o.z&&(o.z=a(o.x,o.y,e,i,r)),o.prevZ=o.prev,o.nextZ=o.next,o=o.next;while(o!==t)o.prevZ.nextZ=null,o.prevZ=null,function(t){var e,i,r,o,n,a,s,l,h=1;do{for(i=t,t=null,n=null,a=0;i;){for(a++,r=i,s=0,e=0;e<h&&(s++,r=r.nextZ);e++);for(l=h;s>0||l>0&&r;)0!==s&&(0===l||!r||i.z<=r.z)?(o=i,i=i.nextZ,s--):(o=r,r=r.nextZ,l--),n?n.nextZ=o:t=o,o.prevZ=n,n=o;i=r}n.nextZ=null,h*=2}while(a>1)}(o)}(e,n,c,f);for(var y,x,v=e;e.prev!==e.next;){if(y=e.prev,x=e.next,f?function(t,e,i,r){var o=t.prev,n=t.next;if(l(o,t,n)>=0)return!1;for(var h=o.x,u=t.x,c=n.x,f=o.y,d=t.y,p=n.y,g=h<u?h<c?h:c:u<c?u:c,m=f<d?f<p?f:p:d<p?d:p,y=h>u?h>c?h:c:u>c?u:c,x=f>d?f>p?f:p:d>p?d:p,v=a(g,m,e,i,r),b=a(y,x,e,i,r),w=t.prevZ,_=t.nextZ;w&&w.z>=v&&_&&_.z<=b;){if(w.x>=g&&w.x<=y&&w.y>=m&&w.y<=x&&w!==o&&w!==n&&s(h,f,u,d,c,p,w.x,w.y)&&l(w.prev,w,w.next)>=0||(w=w.prevZ,_.x>=g&&_.x<=y&&_.y>=m&&_.y<=x&&_!==o&&_!==n&&s(h,f,u,d,c,p,_.x,_.y)&&l(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;w&&w.z>=v;){if(w.x>=g&&w.x<=y&&w.y>=m&&w.y<=x&&w!==o&&w!==n&&s(h,f,u,d,c,p,w.x,w.y)&&l(w.prev,w,w.next)>=0)return!1;w=w.prevZ}for(;_&&_.z<=b;){if(_.x>=g&&_.x<=y&&_.y>=m&&_.y<=x&&_!==o&&_!==n&&s(h,f,u,d,c,p,_.x,_.y)&&l(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}(e,n,c,f):function(t){var e=t.prev,i=t.next;if(l(e,t,i)>=0)return!1;for(var r=e.x,o=t.x,n=i.x,a=e.y,h=t.y,u=i.y,c=r<o?r<n?r:n:o<n?o:n,f=a<h?a<u?a:u:h<u?h:u,d=r>o?r>n?r:n:o>n?o:n,p=a>h?a>u?a:u:h>u?h:u,g=i.next;g!==e;){if(g.x>=c&&g.x<=d&&g.y>=f&&g.y<=p&&s(r,a,o,h,n,u,g.x,g.y)&&l(g.prev,g,g.next)>=0)return!1;g=g.next}return!0}(e)){i.push(y.i/r|0),i.push(e.i/r|0),i.push(x.i/r|0),m(e),e=x.next,v=x.next;continue}if((e=x)===v){g?1===g?t(e=function(t,e,i){var r=t;do{var n=r.prev,a=r.next.next;!h(n,a)&&u(n,r,r.next,a)&&d(n,a)&&d(a,n)&&(e.push(n.i/i|0),e.push(r.i/i|0),e.push(a.i/i|0),m(r),m(r.next),r=t=a),r=r.next}while(r!==t)return o(r)}(o(e),i,r),i,r,n,c,f,2):2===g&&function(e,i,r,n,a,s){var c=e;do{for(var f,g,m=c.next.next;m!==c.prev;){if(c.i!==m.i&&(f=c,g=m,f.next.i!==g.i&&f.prev.i!==g.i&&!function(t,e){var i=t;do{if(i.i!==t.i&&i.next.i!==t.i&&i.i!==e.i&&i.next.i!==e.i&&u(i,i.next,t,e))return!0;i=i.next}while(i!==t)return!1}(f,g)&&(d(f,g)&&d(g,f)&&function(t,e){var i=t,r=!1,o=(t.x+e.x)/2,n=(t.y+e.y)/2;do i.y>n!=i.next.y>n&&i.next.y!==i.y&&o<(i.next.x-i.x)*(n-i.y)/(i.next.y-i.y)+i.x&&(r=!r),i=i.next;while(i!==t)return r}(f,g)&&(l(f.prev,f,g.prev)||l(f,g.prev,g))||h(f,g)&&l(f.prev,f,f.next)>0&&l(g.prev,g,g.next)>0))){var y=p(c,m);c=o(c,c.next),y=o(y,y.next),t(c,i,r,n,a,s,0),t(y,i,r,n,a,s,0);return}m=m.next}c=c.next}while(c!==e)}(e,i,r,n,c,f):t(o(e),i,r,n,c,f,1);break}}}}(S,E,i,c,f,b,0),E}function r(t,e,i,r,o){var n,a;if(o===x(t,e,i,r)>0)for(n=e;n<i;n+=r)a=g(n,t[n],t[n+1],a);else for(n=i-r;n>=e;n-=r)a=g(n,t[n],t[n+1],a);return a&&h(a,a.next)&&(m(a),a=a.next),a}function o(t,e){if(!t)return t;e||(e=t);var i,r=t;do if(i=!1,!r.steiner&&(h(r,r.next)||0===l(r.prev,r,r.next))){if(m(r),(r=e=r.prev)===r.next)break;i=!0}else r=r.next;while(i||r!==e)return e}function n(t,e){return t.x-e.x}function a(t,e,i,r,o){return(t=((t=((t=((t=((t=(t-i)*o|0)|t<<8)&16711935)|t<<4)&252645135)|t<<2)&858993459)|t<<1)&1431655765)|(e=((e=((e=((e=((e=(e-r)*o|0)|e<<8)&16711935)|e<<4)&252645135)|e<<2)&858993459)|e<<1)&1431655765)<<1}function s(t,e,i,r,o,n,a,s){return(o-a)*(e-s)>=(t-a)*(n-s)&&(t-a)*(r-s)>=(i-a)*(e-s)&&(i-a)*(n-s)>=(o-a)*(r-s)}function l(t,e,i){return(e.y-t.y)*(i.x-e.x)-(e.x-t.x)*(i.y-e.y)}function h(t,e){return t.x===e.x&&t.y===e.y}function u(t,e,i,r){var o=f(l(t,e,i)),n=f(l(t,e,r)),a=f(l(i,r,t)),s=f(l(i,r,e));return!!(o!==n&&a!==s||0===o&&c(t,i,e)||0===n&&c(t,r,e)||0===a&&c(i,t,r)||0===s&&c(i,e,r))}function c(t,e,i){return e.x<=Math.max(t.x,i.x)&&e.x>=Math.min(t.x,i.x)&&e.y<=Math.max(t.y,i.y)&&e.y>=Math.min(t.y,i.y)}function f(t){return t>0?1:t<0?-1:0}function d(t,e){return 0>l(t.prev,t,t.next)?l(t,e,t.next)>=0&&l(t,t.prev,e)>=0:0>l(t,e,t.prev)||0>l(t,t.next,e)}function p(t,e){var i=new y(t.i,t.x,t.y),r=new y(e.i,e.x,e.y),o=t.next,n=e.prev;return t.next=e,e.prev=t,i.next=o,o.prev=i,r.next=i,i.prev=r,n.next=r,r.prev=n,r}function g(t,e,i,r){var o=new y(t,e,i);return r?(o.next=r.next,o.prev=r,r.next.prev=o,r.next=o):(o.prev=o,o.next=o),o}function m(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function y(t,e,i){this.i=t,this.x=e,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function x(t,e,i,r){for(var o=0,n=e,a=i-r;n<i;n+=r)o+=(t[a]-t[n])*(t[n+1]+t[a+1]),a=n;return o}t.exports=i,t.exports.default=i,i.deviation=function(t,e,i,r){var o=e&&e.length,n=o?e[0]*i:t.length,a=Math.abs(x(t,0,n,i));if(o)for(var s=0,l=e.length;s<l;s++){var h=e[s]*i,u=s<l-1?e[s+1]*i:t.length;a-=Math.abs(x(t,h,u,i))}var c=0;for(s=0;s<r.length;s+=3){var f=r[s]*i,d=r[s+1]*i,p=r[s+2]*i;c+=Math.abs((t[f]-t[p])*(t[d+1]-t[f+1])-(t[f]-t[d])*(t[p+1]-t[f+1]))}return 0===a&&0===c?0:Math.abs((c-a)/a)},i.flatten=function(t){for(var e=t[0][0].length,i={vertices:[],holes:[],dimensions:e},r=0,o=0;o<t.length;o++){for(var n=0;n<t[o].length;n++)for(var a=0;a<e;a++)i.vertices.push(t[o][n][a]);o>0&&(r+=t[o-1].length,i.holes.push(r))}return i}}),a("6AH2e",function(t,i){e(t.exports,"create",()=>o);var r=n("awmEs").Buffer;function o(){let t='const e="GENERATE_POLYGON_BUFFERS",t="GENERATE_POINT_BUFFERS",n="GENERATE_LINE_STRING_BUFFERS";function r(e,t){const n=t[0],r=t[1];return t[0]=e[0]*n+e[2]*r+e[4],t[1]=e[1]*n+e[3]*r+e[5],t}function x(e,t){const n=(r=t)[0]*r[3]-r[1]*r[2];var r;!function(e,t){if(!e)throw new Error(t)}(0!==n,"Transformation matrix cannot be inverted");const x=t[0],i=t[1],u=t[2],o=t[3],f=t[4],s=t[5];return e[0]=o/n,e[1]=-i/n,e[2]=-u/n,e[3]=x/n,e[4]=(u*s-o*f)/n,e[5]=-(x*s-i*f)/n,e}function i(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}new Array(6);var u={exports:{}};function o(e,t,n){n=n||2;var r,x,i,u,o,s,l,v=t&&t.length,h=v?t[0]*n:e.length,c=f(e,0,h,n,!0),g=[];if(!c||c.next===c.prev)return g;if(v&&(c=function(e,t,n,r){var x,i,u,o=[];for(x=0,i=t.length;x<i;x++)(u=f(e,t[x]*r,x<i-1?t[x+1]*r:e.length,r,!1))===u.next&&(u.steiner=!0),o.push(d(u));for(o.sort(p),x=0;x<o.length;x++)n=y(o[x],n);return n}(e,t,c,n)),e.length>80*n){r=i=e[0],x=u=e[1];for(var b=n;b<h;b+=n)(o=e[b])<r&&(r=o),(s=e[b+1])<x&&(x=s),o>i&&(i=o),s>u&&(u=s);l=0!==(l=Math.max(i-r,u-x))?32767/l:0}return a(c,g,n,r,x,l,0),g}function f(e,t,n,r,x){var i,u;if(x===O(e,t,n,r)>0)for(i=t;i<n;i+=r)u=P(i,e[i],e[i+1],u);else for(i=n-r;i>=t;i-=r)u=P(i,e[i],e[i+1],u);return u&&m(u,u.next)&&(B(u),u=u.next),u}function s(e,t){if(!e)return e;t||(t=e);var n,r=e;do{if(n=!1,r.steiner||!m(r,r.next)&&0!==w(r.prev,r,r.next))r=r.next;else{if(B(r),(r=t=r.prev)===r.next)break;n=!0}}while(n||r!==t);return t}function a(e,t,n,r,x,i,u){if(e){!u&&i&&function(e,t,n,r){var x=e;do{0===x.z&&(x.z=b(x.x,x.y,t,n,r)),x.prevZ=x.prev,x.nextZ=x.next,x=x.next}while(x!==e);x.prevZ.nextZ=null,x.prevZ=null,function(e){var t,n,r,x,i,u,o,f,s=1;do{for(n=e,e=null,i=null,u=0;n;){for(u++,r=n,o=0,t=0;t<s&&(o++,r=r.nextZ);t++);for(f=s;o>0||f>0&&r;)0!==o&&(0===f||!r||n.z<=r.z)?(x=n,n=n.nextZ,o--):(x=r,r=r.nextZ,f--),i?i.nextZ=x:e=x,x.prevZ=i,i=x;n=r}i.nextZ=null,s*=2}while(u>1)}(x)}(e,r,x,i);for(var o,f,p=e;e.prev!==e.next;)if(o=e.prev,f=e.next,i?v(e,r,x,i):l(e))t.push(o.i/n|0),t.push(e.i/n|0),t.push(f.i/n|0),B(e),e=f.next,p=f.next;else if((e=f)===p){u?1===u?a(e=h(s(e),t,n),t,n,r,x,i,2):2===u&&c(e,t,n,r,x,i):a(s(e),t,n,r,x,i,1);break}}}function l(e){var t=e.prev,n=e,r=e.next;if(w(t,n,r)>=0)return!1;for(var x=t.x,i=n.x,u=r.x,o=t.y,f=n.y,s=r.y,a=x<i?x<u?x:u:i<u?i:u,l=o<f?o<s?o:s:f<s?f:s,v=x>i?x>u?x:u:i>u?i:u,h=o>f?o>s?o:s:f>s?f:s,c=r.next;c!==t;){if(c.x>=a&&c.x<=v&&c.y>=l&&c.y<=h&&M(x,o,i,f,u,s,c.x,c.y)&&w(c.prev,c,c.next)>=0)return!1;c=c.next}return!0}function v(e,t,n,r){var x=e.prev,i=e,u=e.next;if(w(x,i,u)>=0)return!1;for(var o=x.x,f=i.x,s=u.x,a=x.y,l=i.y,v=u.y,h=o<f?o<s?o:s:f<s?f:s,c=a<l?a<v?a:v:l<v?l:v,p=o>f?o>s?o:s:f>s?f:s,y=a>l?a>v?a:v:l>v?l:v,g=b(h,c,t,n,r),d=b(p,y,t,n,r),Z=e.prevZ,m=e.nextZ;Z&&Z.z>=g&&m&&m.z<=d;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;if(Z=Z.prevZ,m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}for(;Z&&Z.z>=g;){if(Z.x>=h&&Z.x<=p&&Z.y>=c&&Z.y<=y&&Z!==x&&Z!==u&&M(o,a,f,l,s,v,Z.x,Z.y)&&w(Z.prev,Z,Z.next)>=0)return!1;Z=Z.prevZ}for(;m&&m.z<=d;){if(m.x>=h&&m.x<=p&&m.y>=c&&m.y<=y&&m!==x&&m!==u&&M(o,a,f,l,s,v,m.x,m.y)&&w(m.prev,m,m.next)>=0)return!1;m=m.nextZ}return!0}function h(e,t,n){var r=e;do{var x=r.prev,i=r.next.next;!m(x,i)&&A(x,r,r.next,i)&&z(x,i)&&z(i,x)&&(t.push(x.i/n|0),t.push(r.i/n|0),t.push(i.i/n|0),B(r),B(r.next),r=e=i),r=r.next}while(r!==e);return s(r)}function c(e,t,n,r,x,i){var u=e;do{for(var o=u.next.next;o!==u.prev;){if(u.i!==o.i&&Z(u,o)){var f=F(u,o);return u=s(u,u.next),f=s(f,f.next),a(u,t,n,r,x,i,0),void a(f,t,n,r,x,i,0)}o=o.next}u=u.next}while(u!==e)}function p(e,t){return e.x-t.x}function y(e,t){var n=function(e,t){var n,r=t,x=e.x,i=e.y,u=-1/0;do{if(i<=r.y&&i>=r.next.y&&r.next.y!==r.y){var o=r.x+(i-r.y)*(r.next.x-r.x)/(r.next.y-r.y);if(o<=x&&o>u&&(u=o,n=r.x<r.next.x?r:r.next,o===x))return n}r=r.next}while(r!==t);if(!n)return null;var f,s=n,a=n.x,l=n.y,v=1/0;r=n;do{x>=r.x&&r.x>=a&&x!==r.x&&M(i<l?x:u,i,a,l,i<l?u:x,i,r.x,r.y)&&(f=Math.abs(i-r.y)/(x-r.x),z(r,e)&&(f<v||f===v&&(r.x>n.x||r.x===n.x&&g(n,r)))&&(n=r,v=f)),r=r.next}while(r!==s);return n}(e,t);if(!n)return t;var r=F(n,e);return s(r,r.next),s(n,n.next)}function g(e,t){return w(e.prev,e,t.prev)<0&&w(t.next,e,e.next)<0}function b(e,t,n,r,x){return(e=1431655765&((e=858993459&((e=252645135&((e=16711935&((e=(e-n)*x|0)|e<<8))|e<<4))|e<<2))|e<<1))|(t=1431655765&((t=858993459&((t=252645135&((t=16711935&((t=(t-r)*x|0)|t<<8))|t<<4))|t<<2))|t<<1))<<1}function d(e){var t=e,n=e;do{(t.x<n.x||t.x===n.x&&t.y<n.y)&&(n=t),t=t.next}while(t!==e);return n}function M(e,t,n,r,x,i,u,o){return(x-u)*(t-o)>=(e-u)*(i-o)&&(e-u)*(r-o)>=(n-u)*(t-o)&&(n-u)*(i-o)>=(x-u)*(r-o)}function Z(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!function(e,t){var n=e;do{if(n.i!==e.i&&n.next.i!==e.i&&n.i!==t.i&&n.next.i!==t.i&&A(n,n.next,e,t))return!0;n=n.next}while(n!==e);return!1}(e,t)&&(z(e,t)&&z(t,e)&&function(e,t){var n=e,r=!1,x=(e.x+t.x)/2,i=(e.y+t.y)/2;do{n.y>i!=n.next.y>i&&n.next.y!==n.y&&x<(n.next.x-n.x)*(i-n.y)/(n.next.y-n.y)+n.x&&(r=!r),n=n.next}while(n!==e);return r}(e,t)&&(w(e.prev,e,t.prev)||w(e,t.prev,t))||m(e,t)&&w(e.prev,e,e.next)>0&&w(t.prev,t,t.next)>0)}function w(e,t,n){return(t.y-e.y)*(n.x-t.x)-(t.x-e.x)*(n.y-t.y)}function m(e,t){return e.x===t.x&&e.y===t.y}function A(e,t,n,r){var x=I(w(e,t,n)),i=I(w(e,t,r)),u=I(w(n,r,e)),o=I(w(n,r,t));return x!==i&&u!==o||(!(0!==x||!E(e,n,t))||(!(0!==i||!E(e,r,t))||(!(0!==u||!E(n,e,r))||!(0!==o||!E(n,t,r)))))}function E(e,t,n){return t.x<=Math.max(e.x,n.x)&&t.x>=Math.min(e.x,n.x)&&t.y<=Math.max(e.y,n.y)&&t.y>=Math.min(e.y,n.y)}function I(e){return e>0?1:e<0?-1:0}function z(e,t){return w(e.prev,e,e.next)<0?w(e,t,e.next)>=0&&w(e,e.prev,t)>=0:w(e,t,e.prev)<0||w(e,e.next,t)<0}function F(e,t){var n=new _(e.i,e.x,e.y),r=new _(t.i,t.x,t.y),x=e.next,i=t.prev;return e.next=t,t.prev=e,n.next=x,x.prev=n,r.next=n,n.prev=r,i.next=r,r.prev=i,r}function P(e,t,n,r){var x=new _(e,t,n);return r?(x.next=r.next,x.prev=r,r.next.prev=x,r.next=x):(x.prev=x,x.next=x),x}function B(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function _(e,t,n){this.i=e,this.x=t,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}function O(e,t,n,r){for(var x=0,i=t,u=n-r;i<n;i+=r)x+=(e[u]-e[i])*(e[i+1]+e[u+1]),u=i;return x}u.exports=o,u.exports.default=o,o.deviation=function(e,t,n,r){var x=t&&t.length,i=x?t[0]*n:e.length,u=Math.abs(O(e,0,i,n));if(x)for(var o=0,f=t.length;o<f;o++){var s=t[o]*n,a=o<f-1?t[o+1]*n:e.length;u-=Math.abs(O(e,s,a,n))}var l=0;for(o=0;o<r.length;o+=3){var v=r[o]*n,h=r[o+1]*n,c=r[o+2]*n;l+=Math.abs((e[v]-e[c])*(e[h+1]-e[v+1])-(e[v]-e[h])*(e[c+1]-e[v+1]))}return 0===u&&0===l?0:Math.abs((l-u)/u)},o.flatten=function(e){for(var t=e[0][0].length,n={vertices:[],holes:[],dimensions:t},r=0,x=0;x<e.length;x++){for(var i=0;i<e[x].length;i++)for(var u=0;u<t;u++)n.vertices.push(e[x][i][u]);x>0&&(r+=e[x-1].length,n.holes.push(r))}return n};var N=i(u.exports);const R=[],S={vertexPosition:0,indexPosition:0};function T(e,t,n,r,x){e[t+0]=n,e[t+1]=r,e[t+2]=x}function U(e,t,n,r,x,i){const u=3+x,o=e[t+0],f=e[t+1],s=R;s.length=x;for(let n=0;n<s.length;n++)s[n]=e[t+2+n];let a=i?i.vertexPosition:0,l=i?i.indexPosition:0;const v=a/u;return T(n,a,o,f,0),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,1),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,2),s.length&&n.set(s,a+3),a+=u,T(n,a,o,f,3),s.length&&n.set(s,a+3),a+=u,r[l++]=v,r[l++]=v+1,r[l++]=v+3,r[l++]=v+1,r[l++]=v+2,r[l++]=v+3,S.vertexPosition=a,S.indexPosition=l,S}function k(e,t,n,x,i,u,o,f,s,a,l){const v=8+f.length,h=u.length/v,c=[e[t+0],e[t+1]],p=[e[n],e[n+1]],y=r(s,[...c]),g=r(s,[...p]);function b(e,t,n){const r=Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])),x=[(t[0]-e[0])/r,(t[1]-e[1])/r],i=[-x[1],x[0]],u=Math.sqrt((n[0]-e[0])*(n[0]-e[0])+(n[1]-e[1])*(n[1]-e[1])),o=[(n[0]-e[0])/u,(n[1]-e[1])/u],f=0===r||0===u?0:Math.acos((s=o[0]*x[0]+o[1]*x[1],a=-1,l=1,Math.min(Math.max(s,a),l)));var s,a,l;return o[0]*i[0]+o[1]*i[1]>0?f:2*Math.PI-f}let d=-1,M=-1,Z=l;const w=null!==i;if(null!==x){d=b(y,g,r(s,[...[e[x],e[x+1]]])),Math.cos(d)<=.985&&(Z+=Math.tan((d-Math.PI)/2))}if(w){M=b(g,y,r(s,[...[e[i],e[i+1]]])),Math.cos(M)<=.985&&(Z+=Math.tan((Math.PI-M)/2))}function m(e,t){return 0===t?1e4*e:Math.sign(t)*(1e4*e+Math.abs(t))}return u.push(c[0],c[1],p[0],p[1],d,M,a,m(0,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(1,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(2,l)),u.push(...f),u.push(c[0],c[1],p[0],p[1],d,M,a,m(3,l)),u.push(...f),o.push(h,h+1,h+2,h+1,h+3,h+2),{length:a+Math.sqrt((g[0]-y[0])*(g[0]-y[0])+(g[1]-y[1])*(g[1]-y[1])),angle:Z}}function G(e,t,n,r,x){const i=2+x;let u=t;const o=e.slice(u,u+x);u+=x;const f=e[u++];let s=0;const a=new Array(f-1);for(let t=0;t<f;t++)s+=e[u++],t<f-1&&(a[t]=s);const l=e.slice(u,u+2*s),v=N(l,a,2);for(let e=0;e<v.length;e++)r.push(v[e]+n.length/i);for(let e=0;e<l.length;e+=2)n.push(l[e],l[e+1],...o);return u+2*s}const j=self;j.onmessage=r=>{const i=r.data;switch(i.type){case t:{const e=3,t=2,n=i.customAttributesSize,r=t+n,x=new Float32Array(i.renderInstructions),u=x.length/r,o=4*u*(n+e),f=new Uint32Array(6*u),s=new Float32Array(o);let a;for(let e=0;e<x.length;e+=r)a=U(x,e,s,f,n,a);const l=Object.assign({vertexBuffer:s.buffer,indexBuffer:f.buffer,renderInstructions:x.buffer},i);j.postMessage(l,[s.buffer,f.buffer,x.buffer]);break}case n:{const e=[],t=[],n=i.customAttributesSize,r=2,u=new Float32Array(i.renderInstructions);let o=0;const f=[1,0,0,1,0,0];let s,a;for(x(f,i.renderInstructionsTransform);o<u.length;){a=Array.from(u.slice(o,o+n)),o+=n,s=u[o++];const x=o,i=o+(s-1)*r,l=u[x]===u[i]&&u[x+1]===u[i+1];let v=0,h=0;for(let n=0;n<s-1;n++){let c=null;n>0?c=o+(n-1)*r:l&&(c=i-r);let p=null;n<s-2?p=o+(n+2)*r:l&&(p=x+r);const y=k(u,o+n*r,o+(n+1)*r,c,p,e,t,a,f,v,h);v=y.length,h=y.angle}o+=s*r}const l=Uint32Array.from(t),v=Float32Array.from(e),h=Object.assign({vertexBuffer:v.buffer,indexBuffer:l.buffer,renderInstructions:u.buffer},i);j.postMessage(h,[v.buffer,l.buffer,u.buffer]);break}case e:{const e=[],t=[],n=i.customAttributesSize,r=new Float32Array(i.renderInstructions);let x=0;for(;x<r.length;)x=G(r,x,e,t,n);const u=Uint32Array.from(t),o=Float32Array.from(e),f=Object.assign({vertexBuffer:o.buffer,indexBuffer:u.buffer,renderInstructions:r.buffer},i);j.postMessage(f,[o.buffer,u.buffer,r.buffer]);break}}};';return new Worker("undefined"==typeof Blob?"data:application/javascript;base64,"+r.from(t,"binary").toString("base64"):URL.createObjectURL(new Blob([t],{type:"application/javascript"})))}}),a("hQEK0",function(t,i){e(t.exports,"getWorldParameters",()=>o);var r=n("jZquI");function o(t,e){let i=t.viewState.projection,o=e.getSource().getWrapX()&&i.canWrapX(),n=i.getExtent(),a=t.extent,s=o?(0,r.getWidth)(n):null,l=o?Math.ceil((a[2]-n[2])/s)+1:1;return[o?Math.floor((a[0]-n[0])/s):0,l,s]}}),a("2q51R",function(t,i){e(t.exports,"ShaderBuilder",()=>h);var r=n("bxq6G"),o=n("avk8s"),a=n("77Abf");let s=`#ifdef GL_FRAGMENT_PRECISION_HIGH
precision highp float;
#else
precision mediump float;
#endif
uniform mat4 u_projectionMatrix;
uniform mat4 u_screenToWorldMatrix;
uniform vec2 u_viewportSizePx;
uniform float u_pixelRatio;
uniform float u_globalAlpha;
uniform float u_time;
uniform float u_zoom;
uniform float u_resolution;
uniform float u_rotation;
uniform vec4 u_renderExtent;
uniform vec2 u_patternOrigin;
uniform float u_depth;
uniform mediump int u_hitDetection;

const float PI = 3.141592653589793238;
const float TWO_PI = 2.0 * PI;

// this used to produce an alpha-premultiplied color from a texture
vec4 samplePremultiplied(sampler2D sampler, vec2 texCoord) {
  vec4 color = texture2D(sampler, texCoord);
  return vec4(color.rgb * color.a, color.a);
}
`,l=(0,a.createDefaultStyle)();class h{constructor(){this.uniforms_=[],this.attributes_=[],this.varyings_=[],this.hasSymbol_=!1,this.symbolSizeExpression_=`vec2(${(0,o.numberToGlsl)(l["circle-radius"])} + ${(0,o.numberToGlsl)(.5*l["circle-stroke-width"])})`,this.symbolRotationExpression_="0.0",this.symbolOffsetExpression_="vec2(0.0)",this.symbolColorExpression_=(0,o.colorToGlsl)(l["circle-fill-color"]),this.texCoordExpression_="vec4(0.0, 0.0, 1.0, 1.0)",this.discardExpression_="false",this.symbolRotateWithView_=!1,this.hasStroke_=!1,this.strokeWidthExpression_=(0,o.numberToGlsl)(l["stroke-width"]),this.strokeColorExpression_=(0,o.colorToGlsl)(l["stroke-color"]),this.strokeOffsetExpression_="0.",this.strokeCapExpression_=(0,o.stringToGlsl)("round"),this.strokeJoinExpression_=(0,o.stringToGlsl)("round"),this.strokeMiterLimitExpression_="10.",this.strokeDistanceFieldExpression_="-1000.",this.hasFill_=!1,this.fillColorExpression_=(0,o.colorToGlsl)(l["fill-color"]),this.vertexShaderFunctions_=[],this.fragmentShaderFunctions_=[]}addUniform(t){return this.uniforms_.push(t),this}addAttribute(t){return this.attributes_.push(t),this}addVarying(t,e,i){return this.varyings_.push({name:t,type:e,expression:i}),this}setSymbolSizeExpression(t){return this.hasSymbol_=!0,this.symbolSizeExpression_=t,this}getSymbolSizeExpression(){return this.symbolSizeExpression_}setSymbolRotationExpression(t){return this.symbolRotationExpression_=t,this}setSymbolOffsetExpression(t){return this.symbolOffsetExpression_=t,this}getSymbolOffsetExpression(){return this.symbolOffsetExpression_}setSymbolColorExpression(t){return this.hasSymbol_=!0,this.symbolColorExpression_=t,this}getSymbolColorExpression(){return this.symbolColorExpression_}setTextureCoordinateExpression(t){return this.texCoordExpression_=t,this}setFragmentDiscardExpression(t){return this.discardExpression_=t,this}getFragmentDiscardExpression(){return this.discardExpression_}setSymbolRotateWithView(t){return this.symbolRotateWithView_=t,this}setStrokeWidthExpression(t){return this.hasStroke_=!0,this.strokeWidthExpression_=t,this}setStrokeColorExpression(t){return this.hasStroke_=!0,this.strokeColorExpression_=t,this}getStrokeColorExpression(){return this.strokeColorExpression_}setStrokeOffsetExpression(t){return this.strokeOffsetExpression_=t,this}setStrokeCapExpression(t){return this.strokeCapExpression_=t,this}setStrokeJoinExpression(t){return this.strokeJoinExpression_=t,this}setStrokeMiterLimitExpression(t){return this.strokeMiterLimitExpression_=t,this}setStrokeDistanceFieldExpression(t){return this.strokeDistanceFieldExpression_=t,this}setFillColorExpression(t){return this.hasFill_=!0,this.fillColorExpression_=t,this}getFillColorExpression(){return this.fillColorExpression_}addVertexShaderFunction(t){this.vertexShaderFunctions_.includes(t)||this.vertexShaderFunctions_.push(t)}addFragmentShaderFunction(t){this.fragmentShaderFunctions_.includes(t)||this.fragmentShaderFunctions_.push(t)}getSymbolVertexShader(){return this.hasSymbol_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
attribute vec2 a_position;
attribute float a_index;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join("\n")}
varying vec2 v_texCoord;
varying vec2 v_quadCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.vertexShaderFunctions_.join("\n")}
vec2 pxToScreen(vec2 coordPx) {
  vec2 scaled = coordPx / u_viewportSizePx / 0.5;
  return scaled;
}

vec2 screenToPx(vec2 coordScreen) {
  return (coordScreen * 0.5 + 0.5) * u_viewportSizePx;
}

void main(void) {
  v_quadSizePx = ${this.symbolSizeExpression_};
  vec2 halfSizePx = v_quadSizePx * 0.5;
  vec2 centerOffsetPx = ${this.symbolOffsetExpression_};
  vec2 offsetPx = centerOffsetPx;
  if (a_index == 0.0) {
    offsetPx -= halfSizePx;
  } else if (a_index == 1.0) {
    offsetPx += halfSizePx * vec2(1., -1.);
  } else if (a_index == 2.0) {
    offsetPx += halfSizePx;
  } else {
    offsetPx += halfSizePx * vec2(-1., 1.);
  }
  float angle = ${this.symbolRotationExpression_};
  ${this.symbolRotateWithView_?"angle += u_rotation;":""}
  float c = cos(-angle);
  float s = sin(-angle);
  offsetPx = vec2(c * offsetPx.x - s * offsetPx.y, s * offsetPx.x + c * offsetPx.y);
  vec4 center = u_projectionMatrix * vec4(a_position, 0.0, 1.0);
  gl_Position = center + vec4(pxToScreen(offsetPx), u_depth, 0.);
  vec4 texCoord = ${this.texCoordExpression_};
  float u = a_index == 0.0 || a_index == 3.0 ? texCoord.s : texCoord.p;
  float v = a_index == 2.0 || a_index == 3.0 ? texCoord.t : texCoord.q;
  v_texCoord = vec2(u, v);
  v_hitColor = a_hitColor;
  v_angle = angle;
  c = cos(-v_angle);
  s = sin(-v_angle);
  centerOffsetPx = vec2(c * centerOffsetPx.x - s * centerOffsetPx.y, s * centerOffsetPx.x + c * centerOffsetPx.y); 
  v_centerPx = screenToPx(center.xy) + centerOffsetPx;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join("\n")}
}`:null}getSymbolFragmentShader(){return this.hasSymbol_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
varying vec2 v_texCoord;
varying vec4 v_hitColor;
varying vec2 v_centerPx;
varying float v_angle;
varying vec2 v_quadSizePx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.fragmentShaderFunctions_.join("\n")}

void main(void) {
  if (${this.discardExpression_}) { discard; }
  vec2 coordsPx = gl_FragCoord.xy / u_pixelRatio - v_centerPx; // relative to center
  float c = cos(v_angle);
  float s = sin(v_angle);
  coordsPx = vec2(c * coordsPx.x - s * coordsPx.y, s * coordsPx.x + c * coordsPx.y);
  gl_FragColor = ${this.symbolColorExpression_};
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.05) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getStrokeVertexShader(){return this.hasStroke_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
attribute vec2 a_position;
attribute float a_index;
attribute vec2 a_segmentStart;
attribute vec2 a_segmentEnd;
attribute float a_parameters;
attribute float a_distance;
attribute vec2 a_joinAngles;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join("\n")}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.vertexShaderFunctions_.join("\n")}
vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

vec4 pxToScreen(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return vec4(screenPos, u_depth, 1.0);
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

vec2 getJoinOffsetDirection(vec2 normalPx, float joinAngle) {
  float halfAngle = joinAngle / 2.0;
  float c = cos(halfAngle);
  float s = sin(halfAngle);
  vec2 angleBisectorNormal = vec2(s * normalPx.x + c * normalPx.y, -c * normalPx.x + s * normalPx.y);
  float length = 1.0 / s;
  return angleBisectorNormal * length;
}

vec2 getOffsetPoint(vec2 point, vec2 normal, float joinAngle, float offsetPx) {
  // if on a cap or the join angle is too high, offset the line along the segment normal
  if (cos(joinAngle) > 0.998 || isCap(joinAngle)) {
    return point - normal * offsetPx;
  }
  // offset is applied along the inverted normal (positive offset goes "right" relative to line direction)
  return point - getJoinOffsetDirection(normal, joinAngle) * offsetPx;
}

void main(void) {
  v_angleStart = a_joinAngles.x;
  v_angleEnd = a_joinAngles.y;
  float vertexNumber = floor(abs(a_parameters) / 10000. + 0.5);
  // we're reading the fractional part while keeping the sign (so -4.12 gives -0.12, 3.45 gives 0.45)
  float angleTangentSum = fract(abs(a_parameters) / 10000.) * 10000. * sign(a_parameters);

  float lineWidth = ${this.strokeWidthExpression_};
  float lineOffsetPx = ${this.strokeOffsetExpression_};

  // compute segment start/end in px with offset
  vec2 segmentStartPx = worldToPx(a_segmentStart);
  vec2 segmentEndPx = worldToPx(a_segmentEnd);
  vec2 tangentPx = normalize(segmentEndPx - segmentStartPx);
  vec2 normalPx = vec2(-tangentPx.y, tangentPx.x);
  segmentStartPx = getOffsetPoint(segmentStartPx, normalPx, v_angleStart, lineOffsetPx),
  segmentEndPx = getOffsetPoint(segmentEndPx, normalPx, v_angleEnd, lineOffsetPx);
  
  // compute current vertex position
  float normalDir = vertexNumber < 0.5 || (vertexNumber > 1.5 && vertexNumber < 2.5) ? 1.0 : -1.0;
  float tangentDir = vertexNumber < 1.5 ? 1.0 : -1.0;
  float angle = vertexNumber < 1.5 ? v_angleStart : v_angleEnd;
  vec2 joinDirection;
  vec2 positionPx = vertexNumber < 1.5 ? segmentStartPx : segmentEndPx;
  // if angle is too high, do not make a proper join
  if (cos(angle) > ${r.LINESTRING_ANGLE_COSINE_CUTOFF} || isCap(angle)) {
    joinDirection = normalPx * normalDir - tangentPx * tangentDir;
  } else {
    joinDirection = getJoinOffsetDirection(normalPx * normalDir, angle);
  }
  positionPx = positionPx + joinDirection * lineWidth * 0.5;
  gl_Position = pxToScreen(positionPx);

  v_segmentStart = segmentStartPx;
  v_segmentEnd = segmentEndPx;
  v_width = lineWidth;
  v_hitColor = a_hitColor;
  v_distanceOffsetPx = a_distance / u_resolution - (lineOffsetPx * angleTangentSum);
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join("\n")}
}`:null}getStrokeFragmentShader(){return this.hasStroke_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
varying vec2 v_segmentStart;
varying vec2 v_segmentEnd;
varying float v_angleStart;
varying float v_angleEnd;
varying float v_width;
varying vec4 v_hitColor;
varying float v_distanceOffsetPx;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.fragmentShaderFunctions_.join("\n")}

vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

bool isCap(float joinAngle) {
  return joinAngle < -0.1;
}

float segmentDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  vec2 tangent = normalize(end - start);
  vec2 normal = vec2(-tangent.y, tangent.x);
  vec2 startToPoint = point - start;
  return abs(dot(startToPoint, normal)) - width * 0.5;
}

float buttCapDistanceField(vec2 point, vec2 start, vec2 end) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  return dot(startToPoint, -tangent);
}

float squareCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return buttCapDistanceField(point, start, end) - width * 0.5;
}

float roundCapDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  float onSegment = max(0., 1000. * dot(point - start, end - start)); // this is very high when inside the segment
  return length(point - start) - width * 0.5 - onSegment;
}

float roundJoinDistanceField(vec2 point, vec2 start, vec2 end, float width) {
  return roundCapDistanceField(point, start, end, width);
}

float bevelJoinField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  vec2 startToPoint = point - start;
  vec2 tangent = normalize(end - start);
  float c = cos(joinAngle * 0.5);
  float s = sin(joinAngle * 0.5);
  float direction = -sign(sin(joinAngle));
  vec2 bisector = vec2(c * tangent.x - s * tangent.y, s * tangent.x + c * tangent.y);
  float radius = width * 0.5 * s;
  return dot(startToPoint, bisector * direction) - radius;
}

float miterJoinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle) {
  if (cos(joinAngle) > ${r.LINESTRING_ANGLE_COSINE_CUTOFF}) { // avoid risking a division by zero
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  float miterLength = 1. / sin(joinAngle * 0.5);
  float miterLimit = ${this.strokeMiterLimitExpression_};
  if (miterLength > miterLimit) {
    return bevelJoinField(point, start, end, width, joinAngle);
  }
  return -1000.;
}

float capDistanceField(vec2 point, vec2 start, vec2 end, float width, float capType) {
   if (capType == ${(0,o.stringToGlsl)("butt")}) {
    return buttCapDistanceField(point, start, end);
  } else if (capType == ${(0,o.stringToGlsl)("square")}) {
    return squareCapDistanceField(point, start, end, width);
  }
  return roundCapDistanceField(point, start, end, width);
}

float joinDistanceField(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float joinType) {
  if (joinType == ${(0,o.stringToGlsl)("bevel")}) {
    return bevelJoinField(point, start, end, width, joinAngle);
  } else if (joinType == ${(0,o.stringToGlsl)("miter")}) {
    return miterJoinDistanceField(point, start, end, width, joinAngle);
  }
  return roundJoinDistanceField(point, start, end, width);
}

float computeSegmentPointDistance(vec2 point, vec2 start, vec2 end, float width, float joinAngle, float capType, float joinType) {
  if (isCap(joinAngle)) {
    return capDistanceField(point, start, end, width, capType);
  }
  return joinDistanceField(point, start, end, width, joinAngle, joinType);
}

void main(void) {
  vec2 currentPoint = gl_FragCoord.xy / u_pixelRatio;
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(currentPoint);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }

  float segmentLength = length(v_segmentEnd - v_segmentStart);
  vec2 segmentTangent = (v_segmentEnd - v_segmentStart) / segmentLength;
  vec2 segmentNormal = vec2(-segmentTangent.y, segmentTangent.x);
  vec2 startToPoint = currentPoint - v_segmentStart;
  float currentLengthPx = max(0., min(dot(segmentTangent, startToPoint), segmentLength)) + v_distanceOffsetPx; 
  float currentRadiusPx = abs(dot(segmentNormal, startToPoint));
  float currentRadiusRatio = dot(segmentNormal, startToPoint) * 2. / v_width;
  vec4 color = ${this.strokeColorExpression_} * u_globalAlpha;
  float capType = ${this.strokeCapExpression_};
  float joinType = ${this.strokeJoinExpression_};
  float segmentStartDistance = computeSegmentPointDistance(currentPoint, v_segmentStart, v_segmentEnd, v_width, v_angleStart, capType, joinType);
  float segmentEndDistance = computeSegmentPointDistance(currentPoint, v_segmentEnd, v_segmentStart, v_width, v_angleEnd, capType, joinType);
  float distance = max(
    segmentDistanceField(currentPoint, v_segmentStart, v_segmentEnd, v_width),
    max(segmentStartDistance, segmentEndDistance)
  );
  distance = max(distance, ${this.strokeDistanceFieldExpression_});
  gl_FragColor = color * smoothstep(0., -1., distance);
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}getFillVertexShader(){return this.hasFill_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
attribute vec2 a_position;
attribute vec4 a_hitColor;
${this.attributes_.map(function(t){return"attribute "+t+";"}).join("\n")}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.vertexShaderFunctions_.join("\n")}
void main(void) {
  gl_Position = u_projectionMatrix * vec4(a_position, u_depth, 1.0);
  v_hitColor = a_hitColor;
${this.varyings_.map(function(t){return"  "+t.name+" = "+t.expression+";"}).join("\n")}
}`:null}getFillFragmentShader(){return this.hasFill_?`${s}
${this.uniforms_.map(function(t){return"uniform "+t+";"}).join("\n")}
varying vec4 v_hitColor;
${this.varyings_.map(function(t){return"varying "+t.type+" "+t.name+";"}).join("\n")}
${this.fragmentShaderFunctions_.join("\n")}
vec2 pxToWorld(vec2 pxPos) {
  vec2 screenPos = 2.0 * pxPos / u_viewportSizePx - 1.0;
  return (u_screenToWorldMatrix * vec4(screenPos, 0.0, 1.0)).xy;
}

vec2 worldToPx(vec2 worldPos) {
  vec4 screenPos = u_projectionMatrix * vec4(worldPos, 0.0, 1.0);
  return (0.5 * screenPos.xy + 0.5) * u_viewportSizePx;
}

void main(void) {
  vec2 pxPos = gl_FragCoord.xy / u_pixelRatio;
  vec2 pxOrigin = worldToPx(u_patternOrigin);
  #ifdef GL_FRAGMENT_PRECISION_HIGH
  vec2 worldPos = pxToWorld(pxPos);
  if (
    abs(u_renderExtent[0] - u_renderExtent[2]) > 0.0 && (
      worldPos[0] < u_renderExtent[0] ||
      worldPos[1] < u_renderExtent[1] ||
      worldPos[0] > u_renderExtent[2] ||
      worldPos[1] > u_renderExtent[3]
    )
  ) {
    discard;
  }
  #endif
  if (${this.discardExpression_}) { discard; }
  gl_FragColor = ${this.fillColorExpression_} * u_globalAlpha;
  if (u_hitDetection > 0) {
    if (gl_FragColor.a < 0.1) { discard; };
    gl_FragColor = v_hitColor;
  }
}`:null}}}),a("avk8s",function(t,i){e(t.exports,"numberToGlsl",()=>l),e(t.exports,"arrayToGlsl",()=>h),e(t.exports,"colorToGlsl",()=>u),e(t.exports,"getStringNumberEquivalent",()=>d),e(t.exports,"stringToGlsl",()=>p),e(t.exports,"uniformNameForVariable",()=>g),e(t.exports,"newCompilationContext",()=>m),e(t.exports,"PALETTE_TEXTURE_ARRAY",()=>x),e(t.exports,"buildExpression",()=>v);var r=n("bzfCn"),o=n("3oUFG"),a=n("dAsIA"),s=n("lqNjm");function l(t){let e=t.toString();return e.includes(".")?e:e+".0"}function h(t){if(t.length<2||t.length>4)throw Error("`formatArray` can only output `vec2`, `vec3` or `vec4` arrays.");return`vec${t.length}(${t.map(l).join(", ")})`}function u(t){let e=(0,s.asArray)(t),i=e.length>3?e[3]:1;return h([e[0]/255*i,e[1]/255*i,e[2]/255*i,i])}let c={},f=0;function d(t){return t in c||(c[t]=f++),c[t]}function p(t){return l(d(t))}function g(t){return"u_var_"+t}function m(){return{inFragmentShader:!1,variables:{},properties:{},functions:{},bandCount:0,style:{}}}let y="getBandValue",x="u_paletteTextures";function v(t,e,i,r){let n=(0,o.parse)(t,i,e);if((0,o.isType)(n.type,o.NoneType))throw Error("No matching type was found");if(!(0,o.overlapsType)(e,n.type)){let t=(0,o.typeName)(e),i=(0,o.typeName)(n.type);throw Error(`Expected expression to be of type ${t}, got ${i}`)}return _(n,e,r)}function b(t){return(e,i,r)=>{let o=i.args.length,n=Array(o);for(let t=0;t<o;++t)n[t]=_(i.args[t],r,e);return t(n,e)}}let w={[o.Ops.Get]:(t,e)=>{let i=e.args[0].value;return i in t.properties||(t.properties[i]={name:i,type:e.type}),(t.inFragmentShader?"v_prop_":"a_prop_")+i},[o.Ops.GeometryType]:(t,e,i)=>{let r="geometryType",n=t=>{let e=t.getType();switch(e){case"Point":case"LineString":case"Polygon":return e;case"MultiPoint":case"MultiLineString":case"MultiPolygon":return e.substring(5);case"Circle":return"Polygon";case"GeometryCollection":return n(t.getGeometries()[0])}};return r in t.properties||(t.properties[r]={name:r,type:o.StringType,evaluator:t=>n(t.getGeometry())}),(t.inFragmentShader?"v_prop_":"a_prop_")+r},[o.Ops.Var]:(t,e)=>{let i=e.args[0].value;return i in t.variables||(t.variables[i]={name:i,type:e.type}),g(i)},[o.Ops.Resolution]:()=>"u_resolution",[o.Ops.Zoom]:()=>"u_zoom",[o.Ops.Time]:()=>"u_time",[o.Ops.Any]:b(t=>`(${t.join(" || ")})`),[o.Ops.All]:b(t=>`(${t.join(" && ")})`),[o.Ops.Not]:b(([t])=>`(!${t})`),[o.Ops.Equal]:b(([t,e])=>`(${t} == ${e})`),[o.Ops.NotEqual]:b(([t,e])=>`(${t} != ${e})`),[o.Ops.GreaterThan]:b(([t,e])=>`(${t} > ${e})`),[o.Ops.GreaterThanOrEqualTo]:b(([t,e])=>`(${t} >= ${e})`),[o.Ops.LessThan]:b(([t,e])=>`(${t} < ${e})`),[o.Ops.LessThanOrEqualTo]:b(([t,e])=>`(${t} <= ${e})`),[o.Ops.Multiply]:b(t=>`(${t.join(" * ")})`),[o.Ops.Divide]:b(([t,e])=>`(${t} / ${e})`),[o.Ops.Add]:b(t=>`(${t.join(" + ")})`),[o.Ops.Subtract]:b(([t,e])=>`(${t} - ${e})`),[o.Ops.Clamp]:b(([t,e,i])=>`clamp(${t}, ${e}, ${i})`),[o.Ops.Mod]:b(([t,e])=>`mod(${t}, ${e})`),[o.Ops.Pow]:b(([t,e])=>`pow(${t}, ${e})`),[o.Ops.Abs]:b(([t])=>`abs(${t})`),[o.Ops.Floor]:b(([t])=>`floor(${t})`),[o.Ops.Ceil]:b(([t])=>`ceil(${t})`),[o.Ops.Round]:b(([t])=>`floor(${t} + 0.5)`),[o.Ops.Sin]:b(([t])=>`sin(${t})`),[o.Ops.Cos]:b(([t])=>`cos(${t})`),[o.Ops.Atan]:b(([t,e])=>void 0!==e?`atan(${t}, ${e})`:`atan(${t})`),[o.Ops.Sqrt]:b(([t])=>`sqrt(${t})`),[o.Ops.Match]:b(t=>{let e=t[0],i=t[t.length-1],r=null;for(let o=t.length-3;o>=1;o-=2){let n=t[o],a=t[o+1];r=`(${e} == ${n} ? ${a} : ${r||i})`}return r}),[o.Ops.Between]:b(([t,e,i])=>`(${t} >= ${e} && ${t} <= ${i})`),[o.Ops.Interpolate]:b(([t,e,...i])=>{let r="";for(let o=0;o<i.length-2;o+=2){let n;let a=i[o],s=r||i[o+1],h=i[o+2],u=i[o+3];n=t===l(1)?`(${e} - ${a}) / (${h} - ${a})`:`(pow(${t}, (${e} - ${a})) - 1.0) / (pow(${t}, (${h} - ${a})) - 1.0)`,r=`mix(${s}, ${u}, clamp(${n}, 0.0, 1.0))`}return r}),[o.Ops.Case]:b(t=>{let e=t[t.length-1],i=null;for(let r=t.length-3;r>=0;r-=2){let o=t[r],n=t[r+1];i=`(${o} ? ${n} : ${i||e})`}return i}),[o.Ops.In]:b(([t,...e],i)=>{let r=`operator_in_${Object.keys(i.functions).length}`,o=[];for(let t=0;t<e.length;t+=1)o.push(`  if (inputValue == ${e[t]}) { return true; }`);return i.functions[r]=`bool ${r}(float inputValue) {
${o.join("\n")}
  return false;
}`,`${r}(${t})`}),[o.Ops.Array]:b(t=>`vec${t.length}(${t.join(", ")})`),[o.Ops.Color]:b(t=>{let e=t.slice(0,3).map(t=>`${t} / 255.0`);if(3===t.length)return`vec4(${e.join(", ")}, 1.0)`;let i=t[3];return`(${i} * vec4(${e.join(", ")}, 1.0))`}),[o.Ops.Band]:b(([t,e,i],r)=>{if(!(y in r.functions)){let t="",e=r.bandCount||1;for(let i=0;i<e;i++){let r=Math.floor(i/4),o=i%4;i===e-1&&1===o&&(o=3);let n=`${a.Uniforms.TILE_TEXTURE_ARRAY}[${r}]`;t+=`  if (band == ${i+1}.0) {
    return texture2D(${n}, v_textureCoord + vec2(dx, dy))[${o}];
  }
`}r.functions[y]=`float getBandValue(float band, float xOffset, float yOffset) {
  float dx = xOffset / ${a.Uniforms.TEXTURE_PIXEL_WIDTH};
  float dy = yOffset / ${a.Uniforms.TEXTURE_PIXEL_HEIGHT};
${t}
}`}return`${y}(${t}, ${e??"0.0"}, ${i??"0.0"})`}),[o.Ops.Palette]:(t,e)=>{let[i,...n]=e.args,a=n.length,l=new Uint8Array(4*a);for(let t=0;t<n.length;t++){let e=n[t].value,i=(0,s.asArray)(e),r=4*t;l[r]=i[0],l[r+1]=i[1],l[r+2]=i[2],l[r+3]=255*i[3]}t.paletteTextures||(t.paletteTextures=[]);let h=`${x}[${t.paletteTextures.length}]`,u=new r.default(h,l);t.paletteTextures.push(u);let c=_(i,o.NumberType,t);return`texture2D(${h}, vec2((${c} + 0.5) / ${a}.0, 0.5))`}};function _(t,e,i){if(t instanceof o.CallExpression){let r=w[t.operator];if(void 0===r)throw Error(`No compiler defined for this operator: ${JSON.stringify(t.operator)}`);return r(i,t,e)}if((t.type&o.NumberType)>0)return l(t.value);if((t.type&o.BooleanType)>0)return t.value.toString();if((t.type&o.StringType)>0)return p(t.value.toString());if((t.type&o.ColorType)>0)return u(t.value);if((t.type&o.NumberArrayType)>0)return h(t.value);throw Error(`Unexpected expression ${t.value} (expected type ${(0,o.typeName)(e)})`)}}),a("bzfCn",function(t,i){e(t.exports,"default",()=>r);var r=class{constructor(t,e){this.name=t,this.data=e,this.texture_=null}getTexture(t){if(!this.texture_){let e=t.createTexture();t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,t.NEAREST),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,this.data.length/4,1,0,t.RGBA,t.UNSIGNED_BYTE,this.data),this.texture_=e}return this.texture_}}}),a("dAsIA",function(t,i){e(t.exports,"Uniforms",()=>y),e(t.exports,"Attributes",()=>x),e(t.exports,"default",()=>w);var r=n("fNlm8"),o=n("lUH7Q"),a=n("av38f"),s=n("1fBMl"),l=n("77SUz"),h=n("fOidj"),u=n("knkkM"),c=n("5XVOZ"),f=n("14PDX"),d=n("jZquI"),p=n("gzr8q"),g=n("jYEYW"),m=n("6BjcK");let y={...h.Uniforms,TILE_TEXTURE_ARRAY:"u_tileTextures",TEXTURE_PIXEL_WIDTH:"u_texturePixelWidth",TEXTURE_PIXEL_HEIGHT:"u_texturePixelHeight",TEXTURE_RESOLUTION:"u_textureResolution",TEXTURE_ORIGIN_X:"u_textureOriginX",TEXTURE_ORIGIN_Y:"u_textureOriginY"},x={TEXTURE_COORD:"a_textureCoord"},v=[{name:x.TEXTURE_COORD,size:2,type:u.AttributeType.FLOAT}];class b extends h.default{constructor(t,e){super(t,e),this.program_,this.vertexShader_=e.vertexShader,this.fragmentShader_=e.fragmentShader,this.indices_=new l.default(c.ELEMENT_ARRAY_BUFFER,c.STATIC_DRAW),this.indices_.fromArray([0,1,3,1,2,3]),this.paletteTextures_=e.paletteTextures||[]}reset(t){super.reset(t),this.vertexShader_=t.vertexShader,this.fragmentShader_=t.fragmentShader,this.paletteTextures_=t.paletteTextures||[],this.helper&&(this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_))}afterHelperCreated(){this.program_=this.helper.getProgram(this.fragmentShader_,this.vertexShader_),this.helper.flushBufferData(this.indices_)}createTileRepresentation(t){return new s.default(t)}beforeTilesRender(t,e){super.beforeTilesRender(t,e),this.helper.useProgram(this.program_,t)}renderTile(t,e,i,r,o,n,a,s,l,h,u){let c=this.helper.getGL();this.helper.bindBuffer(t.coords),this.helper.bindBuffer(this.indices_),this.helper.enableAttributes(v);let f=0;for(;f<t.textures.length;){let e=`${y.TILE_TEXTURE_ARRAY}[${f}]`;this.helper.bindTexture(t.textures[f],f,e),++f}for(let t=0;t<this.paletteTextures_.length;++t){let e=this.paletteTextures_[t],i=e.getTexture(c);this.helper.bindTexture(i,f,e.name),++f}let p=i.viewState,m=n[0]+2*h,x=n[1]+2*h,b=t.tile.tileCoord,w=b[1],_=b[2];this.helper.setUniformMatrixValue(y.TILE_TRANSFORM,(0,g.fromTransform)(this.tempMat4,e)),this.helper.setUniformFloatValue(y.TRANSITION_ALPHA,u),this.helper.setUniformFloatValue(y.DEPTH,l);let S=r;h>0&&(S=s,(0,d.getIntersection)(S,r,S)),this.helper.setUniformFloatVec4(y.RENDER_EXTENT,S),this.helper.setUniformFloatValue(y.RESOLUTION,p.resolution),this.helper.setUniformFloatValue(y.ZOOM,p.zoom),this.helper.setUniformFloatValue(y.TEXTURE_PIXEL_WIDTH,m),this.helper.setUniformFloatValue(y.TEXTURE_PIXEL_HEIGHT,x),this.helper.setUniformFloatValue(y.TEXTURE_RESOLUTION,o),this.helper.setUniformFloatValue(y.TEXTURE_ORIGIN_X,a[0]+w*n[0]*o-h*o),this.helper.setUniformFloatValue(y.TEXTURE_ORIGIN_Y,a[1]-_*n[1]*o+h*o),this.helper.drawElements(0,this.indices_.getSize())}getData(t){let e,i,n;if(!this.helper.getGL())return null;let s=this.frameState;if(!s)return null;let l=this.getLayer(),u=(0,f.apply)(s.pixelToCoordinateTransform,t.slice()),c=s.viewState,g=l.getExtent();if(g&&!(0,d.containsCoordinate)((0,p.fromUserExtent)(g,c.projection),u))return null;let y=l.getSources((0,d.boundingExtent)([u]),c.resolution);for(e=y.length-1;e>=0;--e)if("ready"===(i=y[e]).getState()){if(n=i.getTileGridForProjection(c.projection),i.getWrapX())break;let t=n.getExtent();if(!t||(0,d.containsCoordinate)(t,u))break}if(e<0)return null;let x=this.tileRepresentationCache;for(let t=n.getZForResolution(c.resolution);t>=n.getMinZoom();--t){let e=n.getTileCoordForCoordAndZ(u,t),s=(0,h.getCacheKey)(i,e);if(!x.containsKey(s))continue;let l=x.get(s),c=l.tile;if((c instanceof o.default||c instanceof r.default)&&c.getState()===a.default.EMPTY)break;if(!l.loaded)continue;let f=n.getOrigin(t),d=(0,m.toSize)(n.getTileSize(t)),p=n.getResolution(t),g=(u[0]-f[0])/p-e[1]*d[0],y=(f[1]-u[1])/p-e[2]*d[1];return l.getPixelData(g,y)}return null}disposeInternal(){let t=this.helper;t&&(t.getGL().deleteProgram(this.program_),delete this.program_,t.deleteBuffer(this.indices_)),super.disposeInternal(),delete this.indices_}}var w=b}),a("fNlm8",function(t,i){e(t.exports,"default",()=>g);var r=n("9ndmc"),o=n("hyFBJ"),a=n("cw4dl"),s=n("av38f"),l=n("9JHmh"),h=n("gpSXC"),u=n("a6roo"),c=n("cgxQK"),f=n("jZquI"),d=n("bsgMw");class p extends o.default{constructor(t){super({tileCoord:t.tileCoord,loader:()=>Promise.resolve(new Uint8Array(4)),interpolate:t.interpolate,transition:t.transition}),this.pixelRatio_=t.pixelRatio,this.gutter_=t.gutter,this.reprojData_=null,this.reprojError_=null,this.reprojSize_=void 0,this.sourceTileGrid_=t.sourceTileGrid,this.targetTileGrid_=t.targetTileGrid,this.wrappedTileCoord_=t.wrappedTileCoord||t.tileCoord,this.sourceTiles_=[],this.sourcesListenerKeys_=null,this.sourceZ_=0;let e=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),i=this.targetTileGrid_.getExtent(),o=this.sourceTileGrid_.getExtent(),n=i?(0,f.getIntersection)(e,i):e;if(0===(0,f.getArea)(n)){this.state=s.default.EMPTY;return}let a=t.sourceProj,c=a.getExtent();c&&(o=o?(0,f.getIntersection)(o,c):c);let d=this.targetTileGrid_.getResolution(this.wrappedTileCoord_[0]),p=t.targetProj,g=(0,h.calculateSourceExtentResolution)(a,p,n,d);if(!isFinite(g)||g<=0){this.state=s.default.EMPTY;return}let m=void 0!==t.errorThreshold?t.errorThreshold:r.ERROR_THRESHOLD;if(this.triangulation_=new l.default(a,p,n,o,g*m,d),0===this.triangulation_.getTriangles().length){this.state=s.default.EMPTY;return}this.sourceZ_=this.sourceTileGrid_.getZForResolution(g);let y=this.triangulation_.calculateSourceExtent();if(o&&(a.canWrapX()?(y[1]=(0,u.clamp)(y[1],o[1],o[3]),y[3]=(0,u.clamp)(y[3],o[1],o[3])):y=(0,f.getIntersection)(y,o)),(0,f.getArea)(y)){let e=this.sourceTileGrid_.getTileRangeForExtentAndZ(y,this.sourceZ_),i=t.getTileFunction;for(let t=e.minX;t<=e.maxX;t++)for(let r=e.minY;r<=e.maxY;r++){let e=i(this.sourceZ_,t,r,this.pixelRatio_);e&&this.sourceTiles_.push(e)}0===this.sourceTiles_.length&&(this.state=s.default.EMPTY)}else this.state=s.default.EMPTY}getSize(){return this.reprojSize_}getData(){return this.reprojData_}getError(){return this.reprojError_}reproject_(){let t=[];if(this.sourceTiles_.forEach(e=>{let i;if(!e||e.getState()!==s.default.LOADED)return;let r=e.getSize(),n=this.gutter_;i=(0,o.asArrayLike)(e.getData())||(0,o.toArray)((0,o.asImageLike)(e.getData()));let a=[r[0]+2*n,r[1]+2*n],l=i instanceof Float32Array,h=a[0]*a[1],u=l?Float32Array:Uint8Array,c=new u(i.buffer),f=u.BYTES_PER_ELEMENT,d=f*c.length/h,p=c.byteLength/a[1],g=Math.floor(p/f/a[0]),m=h*g,y=c;if(c.length!==m){y=new u(m);let t=0,e=0,i=a[0]*g;for(let r=0;r<a[1];++r){for(let r=0;r<i;++r)y[t++]=c[e+r];e+=p/f}}t.push({extent:this.sourceTileGrid_.getTileCoordExtent(e.tileCoord),data:new Uint8Array(y.buffer),dataType:u,bytesPerPixel:d,pixelSize:a})}),this.sourceTiles_.length=0,0===t.length)this.state=s.default.ERROR;else{let e,i;let r=this.wrappedTileCoord_[0],o=this.targetTileGrid_.getTileSize(r),n="number"==typeof o?o:o[0],a="number"==typeof o?o:o[1],l=this.targetTileGrid_.getResolution(r),u=this.sourceTileGrid_.getResolution(this.sourceZ_),f=this.targetTileGrid_.getTileCoordExtent(this.wrappedTileCoord_),d=t[0].bytesPerPixel,p=Math.ceil(d/3);for(let r=p-1;r>=0;--r){let o=[];for(let e=0,i=t.length;e<i;++e){let i=t[e],n=i.data,a=i.pixelSize,s=a[0],l=a[1],u=(0,c.createCanvasContext2D)(s,l,h.canvasPool),f=u.createImageData(s,l),p=f.data,g=3*r;for(let t=0,e=p.length;t<e;t+=4)p[t]=n[g],p[t+1]=n[g+1],p[t+2]=n[g+2],p[t+3]=255,g+=d;u.putImageData(f,0,0),o.push({extent:i.extent,image:u.canvas})}let s=(0,h.render)(n,a,this.pixelRatio_,u,this.sourceTileGrid_.getExtent(),l,f,this.triangulation_,o,this.gutter_,!1,!1);for(let t=0,e=o.length;t<e;++t){let e=o[t].image.getContext("2d");(0,c.releaseCanvas)(e),(0,h.canvasPool).push(e.canvas)}let p=s.getContext("2d"),g=p.getImageData(0,0,s.width,s.height);(0,c.releaseCanvas)(p),(0,h.canvasPool).push(s),e||(i=new Uint8Array(d*g.width*g.height),e=new t[0].dataType(i.buffer));let m=g.data,y=3*r;for(let t=0,e=m.length;t<e;t+=4)255===m[t+3]?(i[y]=m[t],i[y+1]=m[t+1],i[y+2]=m[t+2]):(i[y]=0,i[y+1]=0,i[y+2]=0),y+=d}this.reprojData_=e,this.reprojSize_=[Math.round(n*this.pixelRatio_),Math.round(a*this.pixelRatio_)],this.state=s.default.LOADED}this.changed()}load(){if(this.state!==s.default.IDLE&&this.state!==s.default.ERROR)return;this.state=s.default.LOADING,this.changed();let t=0;this.sourcesListenerKeys_=[],this.sourceTiles_.forEach(e=>{let i=e.getState();if(i!==s.default.IDLE&&i!==s.default.LOADING)return;t++;let r=(0,d.listen)(e,a.default.CHANGE,function(){let i=e.getState();(i==s.default.LOADED||i==s.default.ERROR||i==s.default.EMPTY)&&((0,d.unlistenByKey)(r),0==--t&&(this.unlistenSources_(),this.reproject_()))},this);this.sourcesListenerKeys_.push(r)}),0===t?setTimeout(this.reproject_.bind(this),0):this.sourceTiles_.forEach(function(t){t.getState()==s.default.IDLE&&t.load()})}unlistenSources_(){this.sourcesListenerKeys_.forEach(d.unlistenByKey),this.sourcesListenerKeys_=null}}var g=p}),a("hyFBJ",function(t,i){e(t.exports,"asImageLike",()=>s),e(t.exports,"asArrayLike",()=>l),e(t.exports,"toArray",()=>u),e(t.exports,"default",()=>d);var r=n("hMeZw"),o=n("av38f"),a=n("cgxQK");function s(t){return t instanceof Image||t instanceof HTMLCanvasElement||t instanceof HTMLVideoElement||t instanceof ImageBitmap?t:null}function l(t){return t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Float32Array||t instanceof DataView?t:null}let h=null;function u(t){h||(h=(0,a.createCanvasContext2D)(t.width,t.height,void 0,{willReadFrequently:!0}));let e=h.canvas,i=t.width;e.width!==i&&(e.width=i);let r=t.height;return e.height!==r&&(e.height=r),h.clearRect(0,0,i,r),h.drawImage(t,0,0),h.getImageData(0,0,i,r).data}let c=[256,256];class f extends r.default{constructor(t){super(t.tileCoord,o.default.IDLE,{transition:t.transition,interpolate:t.interpolate}),this.loader_=t.loader,this.data_=null,this.error_=null,this.size_=t.size||null}getSize(){if(this.size_)return this.size_;let t=s(this.data_);return t?[t.width,t.height]:c}getData(){return this.data_}getError(){return this.error_}load(){if(this.state!==o.default.IDLE&&this.state!==o.default.ERROR)return;this.state=o.default.LOADING,this.changed();let t=this;this.loader_().then(function(e){t.data_=e,t.state=o.default.LOADED,t.changed()}).catch(function(e){t.error_=e,t.state=o.default.ERROR,t.changed()})}}var d=f}),a("1fBMl",function(t,i){e(t.exports,"default",()=>y);var r=n("2LCvK"),o=n("hyFBJ"),a=n("cw4dl"),s=n("6EHBB"),l=n("lUH7Q"),h=n("77SUz"),u=n("5XVOZ"),c=n("cgxQK"),f=n("6BjcK");function d(t,e,i){let r=i?t.LINEAR:t.NEAREST;t.bindTexture(t.TEXTURE_2D,e),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MIN_FILTER,r),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_MAG_FILTER,r)}function p(t,e,i,r,o,n){let a,s,l;let h=t.getGL();i instanceof Float32Array?(a=h.FLOAT,t.getExtension("OES_texture_float"),s=null!==t.getExtension("OES_texture_float_linear")):(a=h.UNSIGNED_BYTE,s=!0),d(h,e,n&&s);let u=i.byteLength/r[1],c=1;switch(u%8==0?c=8:u%4==0?c=4:u%2==0&&(c=2),o){case 1:l=h.LUMINANCE;break;case 2:l=h.LUMINANCE_ALPHA;break;case 3:l=h.RGB;break;case 4:l=h.RGBA;break;default:throw Error(`Unsupported number of bands: ${o}`)}let f=h.getParameter(h.UNPACK_ALIGNMENT);h.pixelStorei(h.UNPACK_ALIGNMENT,c),h.texImage2D(h.TEXTURE_2D,0,l,r[0],r[1],0,l,a,i),h.pixelStorei(h.UNPACK_ALIGNMENT,f)}let g=null;class m extends r.default{constructor(t){super(t),this.textures=[],this.renderSize_=(0,f.toSize)(t.grid.getTileSize(t.tile.tileCoord[0])),this.bandCount=NaN;let e=new h.default(u.ARRAY_BUFFER,u.STATIC_DRAW);e.fromArray([0,1,1,1,1,0,0,0]),this.helper_.flushBufferData(e),this.coords=e,this.setTile(t.tile)}uploadTile(){let t;let e=this.helper_,i=e.getGL(),r=this.tile;this.textures.length=0,t=r instanceof s.default||r instanceof l.default?r.getImage():r.getData();let n=(0,o.asImageLike)(t);if(n){let t=i.createTexture();this.textures.push(t),this.bandCount=4,d(i,t,r.interpolate),i.texImage2D(i.TEXTURE_2D,0,i.RGBA,i.RGBA,i.UNSIGNED_BYTE,n),this.setReady();return}t=(0,o.asArrayLike)(t);let a=r.getSize(),h=[a[0]+2*this.gutter_,a[1]+2*this.gutter_],u=t instanceof Float32Array,c=h[0]*h[1],f=u?Float32Array:Uint8Array,g=f.BYTES_PER_ELEMENT,m=t.byteLength/h[1];this.bandCount=Math.floor(m/g/h[0]);let y=Math.ceil(this.bandCount/4);if(1===y){let o=i.createTexture();this.textures.push(o),p(e,o,t,h,this.bandCount,r.interpolate),this.setReady();return}let x=Array(y);for(let t=0;t<y;++t){let e=i.createTexture();this.textures.push(e);let r=t<y-1?4:(this.bandCount-1)%4+1;x[t]=new f(c*r)}let v=0,b=0,w=h[0]*this.bandCount;for(let e=0;e<h[1];++e){for(let e=0;e<w;++e){let i=t[b+e],r=Math.floor(v/this.bandCount),o=e%this.bandCount,n=x[Math.floor(o/4)],a=n.length/c;n[r*a+o%4]=i,++v}b+=m/g}for(let t=0;t<y;++t){let i=this.textures[t],o=x[t],n=o.length/c;p(e,i,o,h,n,r.interpolate)}this.setReady()}disposeInternal(){let t=this.helper_.getGL();this.helper_.deleteBuffer(this.coords);for(let e=0;e<this.textures.length;++e)t.deleteTexture(this.textures[e]);this.tile.removeEventListener(a.default.CHANGE,this.handleTileChange_)}getImagePixelData_(t,e,i){let r;let o=this.gutter_,n=this.renderSize_[0],a=this.renderSize_[1];g||(g=(0,c.createCanvasContext2D)(1,1,void 0,{willReadFrequently:!0})),g.clearRect(0,0,1,1);let s=t.width,l=t.height;try{g.drawImage(t,o+Math.floor(e/n*(s-2*o)),o+Math.floor(i/a*(l-2*o)),1,1,0,0,1,1),r=g.getImageData(0,0,1,1).data}catch(t){return g=null,null}return r}getArrayPixelData_(t,e,i,r){let o=this.gutter_,n=this.renderSize_[0],a=this.renderSize_[1],s=e[0],l=e[1],h=s+2*o,u=o+Math.floor(i/n*s),c=o+Math.floor(r/a*l);if(t instanceof DataView){let e=t.byteLength/(h*(l+2*o)),i=e*(c*h+u),r=t.buffer.slice(i,i+e);return new DataView(r)}let f=this.bandCount*(c*h+u);return t.slice(f,f+this.bandCount)}getPixelData(t,e){if(!this.loaded)return null;if(this.tile instanceof o.default){let i=this.tile.getData(),r=(0,o.asArrayLike)(i);if(r){let i=this.tile.getSize();return this.getArrayPixelData_(r,i,t,e)}return this.getImagePixelData_((0,o.asImageLike)(i),t,e)}return this.getImagePixelData_(this.tile.getImage(),t,e)}}var y=m}),a("2LCvK",function(t,i){e(t.exports,"default",()=>u);var r=n("9LzRi"),o=n("cw4dl"),a=n("6EHBB"),s=n("av38f"),l=n("lVQul");class h extends r.default{constructor(t){super(),this.tile,this.handleTileChange_=this.handleTileChange_.bind(this),this.gutter_=t.gutter||0,this.helper_=t.helper,this.loaded=!1,this.ready=!1}setTile(t){if(t!==this.tile){if(this.tile&&this.tile.removeEventListener(o.default.CHANGE,this.handleTileChange_),this.tile=t,this.loaded=t.getState()===s.default.LOADED,this.loaded)this.uploadTile();else{if(t instanceof a.default){let e=t.getImage();e instanceof Image&&!e.crossOrigin&&(e.crossOrigin="anonymous")}t.addEventListener(o.default.CHANGE,this.handleTileChange_)}}}uploadTile(){(0,l.abstract)()}setReady(){this.ready=!0,this.dispatchEvent(o.default.CHANGE)}handleTileChange_(){this.tile.getState()===s.default.LOADED&&(this.loaded=!0,this.uploadTile())}disposeInternal(){this.tile.removeEventListener(o.default.CHANGE,this.handleTileChange_)}}var u=h}),a("fOidj",function(t,i){e(t.exports,"Uniforms",()=>x),e(t.exports,"getCacheKey",()=>S),e(t.exports,"default",()=>A);var r=n("1rfTO"),o=n("fNlm8"),a=n("lUH7Q"),s=n("jRKCY"),l=n("av38f"),h=n("iHIuK"),u=n("lVQul"),c=n("jYEYW"),f=n("9YraL"),d=n("14PDX"),p=n("kBSVF"),g=n("gzr8q"),m=n("jZquI"),y=n("6BjcK");let x={TILE_TRANSFORM:"u_tileTransform",TRANSITION_ALPHA:"u_transitionAlpha",DEPTH:"u_depth",RENDER_EXTENT:"u_renderExtent",PATTERN_ORIGIN:"u_patternOrigin",RESOLUTION:"u_resolution",ZOOM:"u_zoom",GLOBAL_ALPHA:"u_globalAlpha",PROJECTION_MATRIX:"u_projectionMatrix",SCREEN_TO_WORLD_MATRIX:"u_screenToWorldMatrix"},v={};function b(t,e){return t.tileIds.has((0,u.getUid)(e))}function w(t,e,i){let r=t.representationsByZ;i in r||(r[i]=new Set),r[i].add(e),t.tileIds.add((0,u.getUid)(e.tile))}function _(t,e){let i=t.layerStatesArray[t.layerIndex];i.extent&&(e=(0,m.getIntersection)(e,(0,g.fromUserExtent)(i.extent,t.viewState.projection)));let r=i.layer.getRenderSource();if(!r.getWrapX()){let i=r.getTileGridForProjection(t.viewState.projection).getExtent();i&&(e=(0,m.getIntersection)(e,i))}return e}function S(t,e){return`${t.getKey()},${(0,f.getKey)(e)}`}class E extends h.default{constructor(t,e){super(t,{uniforms:e.uniforms,postProcesses:e.postProcesses}),this.renderComplete=!1,this.tileTransform_=(0,d.create)(),this.tempMat4=(0,c.create)(),this.tempTileRange_=new s.default(0,0,0,0),this.tempTileCoord_=(0,f.createOrUpdate)(0,0,0),this.tempSize_=[0,0];let i=void 0!==e.cacheSize?e.cacheSize:512;this.tileRepresentationCache=new r.default(i),this.frameState=null,this.projection_=void 0}reset(t){super.reset({uniforms:t.uniforms})}isDrawableTile_(t){let e=this.getLayer(),i=t.getState(),r=e.getUseInterimTilesOnError();return i==l.default.LOADED||i==l.default.EMPTY||i==l.default.ERROR&&!r}prepareFrameInternal(t){this.projection_?t.viewState.projection!==this.projection_&&(this.clearCache(),this.projection_=t.viewState.projection):this.projection_=t.viewState.projection;let e=this.getLayer().getRenderSource();return!(!e||(0,m.isEmpty)(_(t,t.extent)))&&"ready"===e.getState()}createTileRepresentation(t){return(0,u.abstract)()}enqueueTiles(t,e,i,r,o){let n=t.viewState,a=this.getLayer(),s=a.getRenderSource(),h=s.getTileGridForProjection(n.projection),c=s.getGutterForProjection(n.projection),d=(0,u.getUid)(s);d in t.wantedTiles||(t.wantedTiles[d]={});let p=t.wantedTiles[d],g=this.tileRepresentationCache,m=a.getMapInternal(),y=Math.max(i-o,h.getMinZoom(),h.getZForResolution(Math.min(a.getMaxResolution(),m?m.getView().getResolutionForZoom(Math.max(a.getMinZoom(),0)):h.getResolution(0)),s.zDirection));for(let o=i;o>=y;--o){let i=h.getTileRangeForExtentAndZ(e,o,this.tempTileRange_),a=h.getResolution(o);for(let e=i.minX;e<=i.maxX;++e)for(let u=i.minY;u<=i.maxY;++u){let i,m;let y=(0,f.createOrUpdate)(o,e,u,this.tempTileCoord_),x=S(s,y);if(g.containsKey(x)&&(m=(i=g.get(x)).tile),i&&i.tile.key===s.getKey()||(m=s.getTile(o,e,u,t.pixelRatio,n.projection)),b(r,m))continue;if(i){if(this.isDrawableTile_(m))i.setTile(m);else{let t=m.getInterimTile();i.setTile(t)}}else i=this.createTileRepresentation({tile:m,grid:h,helper:this.helper,gutter:c}),g.set(x,i);w(r,i,o);let v=m.getKey();p[v]=!0,m.getState()!==l.default.IDLE||t.tileQueue.isKeyQueued(v)||t.tileQueue.enqueue([m,d,h.getTileCoordCenter(y),a])}}}beforeTilesRender(t,e){this.helper.prepareDraw(this.frameState,!e,!0)}beforeTilesMaskRender(t){return!1}renderTile(t,e,i,r,o,n,a,s,l,h,u){}renderTileMask(t,e,i,r){}drawTile_(t,e,i,r,o,n,a){if(!e.ready)return;let s=e.tile.tileCoord,l=(0,f.getKey)(s),h=l in n?n[l]:1,u=a.getResolution(i),c=(0,y.toSize)(a.getTileSize(i),this.tempSize_),p=a.getOrigin(i),g=a.getTileCoordExtent(s),m=h<1?-1:1/(i+2);h<1&&(t.animate=!0);let x=t.viewState,v=x.center[0],b=x.center[1],w=c[0]+2*r,_=c[1]+2*r,S=(v-p[0])/(c[0]*u),E=(p[1]-b)/(c[1]*u),A=x.resolution/u,N=s[1],I=s[2];(0,d.reset)(this.tileTransform_),(0,d.scale)(this.tileTransform_,2/(t.size[0]*A/w),-2/(t.size[1]*A/w)),(0,d.rotate)(this.tileTransform_,x.rotation),(0,d.scale)(this.tileTransform_,1,1/(w/_)),(0,d.translate)(this.tileTransform_,(c[0]*(N-S)-r)/w,(c[1]*(I-E)-r)/_),this.renderTile(e,this.tileTransform_,t,o,u,c,p,g,m,r,h)}renderFrame(t){this.frameState=t,this.renderComplete=!0;let e=this.helper.getGL();this.preRender(e,t);let i=t.viewState,r=this.getLayer(),n=r.getRenderSource(),s=n.getTileGridForProjection(i.projection),h=n.getGutterForProjection(i.projection),c=_(t,t.extent),d=s.getZForResolution(i.resolution,n.zDirection),g={tileIds:new Set,representationsByZ:{}},m=r.getPreload();if(t.nextExtent){let e=s.getZForResolution(i.nextResolution,n.zDirection),r=_(t,t.nextExtent);this.enqueueTiles(t,r,e,g,m)}this.enqueueTiles(t,c,d,g,0),m>0&&setTimeout(()=>{this.enqueueTiles(t,c,d-1,g,m-1)},0);let y={},x=(0,u.getUid)(this),b=t.time,w=!1;for(let t of g.representationsByZ[d]){let e=t.tile;if((e instanceof a.default||e instanceof o.default)&&e.getState()===l.default.EMPTY)continue;let i=e.tileCoord;if(t.ready){let t=e.getAlpha(x,b);if(1===t){e.endTransition(x);continue}w=!0,y[(0,f.getKey)(i)]=t}if(this.renderComplete=!1,this.findAltTiles_(s,i,d+1,g))continue;let r=s.getMinZoom();for(let t=d-1;t>=r&&!this.findAltTiles_(s,i,t,g);--t);}let S=g.representationsByZ,E=Object.keys(S).map(Number).sort(p.descending);if(this.beforeTilesMaskRender(t))for(let t=0,e=E.length;t<e;++t){let e=E[t];for(let t of S[e]){let i=t.tile.tileCoord;if((0,f.getKey)(i) in y)continue;let r=s.getTileCoordExtent(i);this.renderTileMask(t,e,r,1/(e+2))}}this.beforeTilesRender(t,w);for(let e=0,i=E.length;e<i;++e){let i=E[e];for(let e of S[i]){let r=e.tile.tileCoord;(0,f.getKey)(r) in y||this.drawTile_(t,e,i,h,c,y,s)}}for(let e of S[d]){let i=e.tile.tileCoord;(0,f.getKey)(i) in y&&this.drawTile_(t,e,d,h,c,y,s)}this.helper.finalizeDraw(t,this.dispatchPreComposeEvent,this.dispatchPostComposeEvent);let A=this.helper.getCanvas(),N=this.tileRepresentationCache;for(;N.canExpireCache();)N.pop().dispose();return t.postRenderFunctions.push(function(t,e){n.updateCacheSize(.1,e.viewState.projection),n.expireCache(e.viewState.projection,v)}),this.postRender(e,t),A}findAltTiles_(t,e,i,r){let o=t.getTileRangeForTileCoordAndZ(e,i,this.tempTileRange_);if(!o)return!1;let n=!0,a=this.tileRepresentationCache,s=this.getLayer().getRenderSource();for(let t=o.minX;t<=o.maxX;++t)for(let e=o.minY;e<=o.maxY;++e){let o=S(s,[i,t,e]),l=!1;if(a.containsKey(o)){let t=a.get(o);t.ready&&!b(r,t.tile)&&(w(r,t,i),l=!0)}l||(n=!1)}return n}clearCache(){let t=this.tileRepresentationCache;t.forEach(t=>t.dispose()),t.clear()}removeHelper(){this.helper&&this.clearCache(),super.removeHelper()}disposeInternal(){super.disposeInternal(),delete this.frameState}}var A=E}),a("77Abf",function(t,i){e(t.exports,"createDefaultStyle",()=>r);function r(){return{"fill-color":"rgba(255,255,255,0.4)","stroke-color":"#3399CC","stroke-width":1.25,"circle-radius":5,"circle-fill-color":"rgba(255,255,255,0.4)","circle-stroke-width":1.25,"circle-stroke-color":"#3399CC"}}}),a("iArnh",function(t,e){var r;t.exports,r=function(){function e(t,e,i){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){s(r.response,e,i)},r.onerror=function(){console.error("could not download file")},r.send()}function r(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return 200<=e.status&&299>=e.status}function o(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var n="object"==typeof window&&window.window===window?window:"object"==typeof self&&self.self===self?self:"object"==typeof i&&i.global===i?i:void 0,a=n.navigator&&/Macintosh/.test(navigator.userAgent)&&/AppleWebKit/.test(navigator.userAgent)&&!/Safari/.test(navigator.userAgent),s=n.saveAs||("object"!=typeof window||window!==n?function(){}:"download"in HTMLAnchorElement.prototype&&!a?function(t,i,a){var s=n.URL||n.webkitURL,l=document.createElement("a");i=i||t.name||"download",l.download=i,l.rel="noopener","string"==typeof t?(l.href=t,l.origin===location.origin?o(l):r(l.href)?e(t,i,a):o(l,l.target="_blank")):(l.href=s.createObjectURL(t),setTimeout(function(){s.revokeObjectURL(l.href)},4e4),setTimeout(function(){o(l)},0))}:"msSaveOrOpenBlob"in navigator?function(t,i,n){if(i=i||t.name||"download","string"!=typeof t){var a;navigator.msSaveOrOpenBlob((void 0===(a=n)?a={autoBom:!1}:"object"!=typeof a&&(console.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(t.type)?new Blob(["\uFEFF",t],{type:t.type}):t),i)}else if(r(t))e(t,i,n);else{var s=document.createElement("a");s.href=t,s.target="_blank",setTimeout(function(){o(s)})}}:function(t,i,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof t)return e(t,i,r);var s="application/octet-stream"===t.type,l=/constructor/i.test(n.HTMLElement)||n.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||s&&l||a)&&"undefined"!=typeof FileReader){var u=new FileReader;u.onloadend=function(){var t=u.result;t=h?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},u.readAsDataURL(t)}else{var c=n.URL||n.webkitURL,f=c.createObjectURL(t);o?o.location=f:location.href=f,o=null,setTimeout(function(){c.revokeObjectURL(f)},4e4)}});n.saveAs=s.saveAs=s,t.exports=s},"function"==typeof define&&define.amd?define([],r):r()}),a("5VeMq",function(t,i){e(t.exports,"default",()=>a);var r=n("VCbYw"),o=n("iQyfo"),a=class extends r.default{constructor(t){t=t||{};var e=document.createElement("div");t.element=e,super(t),"number"==typeof t.offsetBox?this.offsetBox=[t.offsetBox,t.offsetBox,t.offsetBox,t.offsetBox]:this.offsetBox=t.offsetBox,this.closeBox=t.closeBox,this.onclose=t.onclose,this.onshow=t.onshow,(0,o.default).create("BUTTON",{className:"closeBox"+(t.closeBox?" hasclosebox":""),type:"button",click:(function(){this.hide()}).bind(this),parent:e}),!1!==t.anchor&&(0,o.default).create("DIV",{className:"anchor",parent:e}),this.content=(0,o.default).create("DIV",{html:t.html||"",className:"ol-popup-content",parent:e}),t.minibar&&(0,o.default).scrollDiv(this.content,{vertical:!0,mousewheel:!0,minibar:!0}),t.stopEvent&&(e.addEventListener("mousedown",function(t){t.stopPropagation()}),e.addEventListener("touchstart",function(t){t.stopPropagation()})),this._elt=e,this.setPositioning(t.positioning||"auto"),this.setPopupClass(t.popupClass||t.className||"default"),t.anim&&this.addPopupClass("anim"),t.position&&setTimeout((function(){this.show(t.position)}).bind(this))}getClassPositioning(){var t="",e=this.getPositioning();return/bottom/.test(e)&&(t+="ol-popup-bottom "),/top/.test(e)&&(t+="ol-popup-top "),/left/.test(e)&&(t+="ol-popup-left "),/right/.test(e)&&(t+="ol-popup-right "),/^center/.test(e)&&(t+="ol-popup-middle "),/center$/.test(e)&&(t+="ol-popup-center "),t}setClosebox(t){this.closeBox=t,t?this.element.classList.add("hasclosebox"):this.element.classList.remove("hasclosebox")}setPopupClass(t){var e=["ol-popup"];this.getVisible()&&e.push("visible"),this.element.className="";var i=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});t?t.split(" ").filter(function(t){return t.length>0}).forEach(function(t){e.push(t)}):e.push("default"),i.forEach(function(t){e.push(t)}),this.closeBox&&e.push("hasclosebox"),this.element.classList.add.apply(this.element.classList,e)}addPopupClass(t){this.element.classList.add(t)}removePopupClass(t){this.element.classList.remove(t)}setPositioning(t){void 0!==t&&(/auto/.test(t)?(this.autoPositioning=t.split("-"),1==this.autoPositioning.length&&(this.autoPositioning[1]="auto")):this.autoPositioning=!1,"center"==(t=t.replace(/auto/g,"center"))&&(t="bottom-center"),this.setPositioning_(t))}setPositioning_(t){if(this.element){super.setPositioning(t),this.element.classList.remove("ol-popup-top","ol-popup-bottom","ol-popup-left","ol-popup-right","ol-popup-center","ol-popup-middle");var e=this.getClassPositioning().split(" ").filter(function(t){return t.length>0});this.element.classList.add.apply(this.element.classList,e)}}getVisible(){return this.element.classList.contains("visible")}show(t,e){e||"string"!=typeof t||(e=t,t=null),!0===t&&(t=this.getPosition());var i=this,r=this.getMap();if(r&&(e&&e!==this.prevHTML&&(this.prevHTML=e,this.content.innerHTML="",e instanceof Element?this.content.appendChild(e):(0,o.default).create("DIV",{html:e,parent:this.content}),Array.prototype.slice.call(this.content.querySelectorAll("img")).forEach(function(t){t.addEventListener("load",function(){try{r.renderSync()}catch(t){}i.content.dispatchEvent(new Event("scroll"))})})),t)){if(this.autoPositioning){var n=r.getPixelFromCoordinate(t),a=r.getSize(),s=[];"auto"==this.autoPositioning[0]?s[0]=n[1]<a[1]/3?"top":"bottom":s[0]=this.autoPositioning[0],s[1]=n[0]<2*a[0]/3?"left":"right",this.setPositioning_(s[0]+"-"+s[1]),this.offsetBox&&this.setOffset([this.offsetBox["left"==s[1]?2:0],this.offsetBox["top"==s[0]?3:1]])}else this.offsetBox&&this.setOffset(this.offsetBox);this.setPosition(t),this.element.parentElement.style.display="","function"==typeof this.onshow&&this.onshow(),this.dispatchEvent({type:"show"}),this._tout=setTimeout(function(){i.element.classList.add("visible")},0)}}hide(){void 0!=this.getPosition()&&("function"==typeof this.onclose&&this.onclose(),this.setPosition(void 0),this._tout&&clearTimeout(this._tout),this.element.classList.remove("visible"),this.dispatchEvent({type:"hide"}))}}}),a("17jqf",function(t,i){e(t.exports,"default",()=>l);var r=n("ejLRd"),o=n("7lBr2"),a=n("7qu5m"),s=n("5VeMq"),l=class extends s.default{constructor(t){(t=t||{}).popupClass=t.popupClass||t.className||"tooltips black",t.positioning=t.positioning||"center-left",t.stopEvent=!!t.stopEvent,super(t),this.set("maximumFractionDigits",t.maximumFractionDigits||2),"function"==typeof t.formatLength&&(this.formatLength=t.formatLength),"function"==typeof t.formatArea&&(this.formatArea=t.formatArea),"function"==typeof t.getHTML&&(this.getHTML=t.getHTML),this._interaction=new o.default({handleEvent:(function(t){if("pointermove"===t.type||"click"===t.type){var e=this.getHTML(this._feature,this.get("info"));e?this.show(t.coordinate,e):this.hide(),this._coord=t.coordinate}return!0}).bind(this)})}setMap(t){this.getMap()&&this.getMap().removeInteraction(this._interaction),super.setMap(t),this.getMap()&&this.getMap().addInteraction(this._interaction)}getHTML(t,e){return this.get("measure")?this.get("measure")+(e?"<br/>"+e:""):e||""}setInfo(t){t?setTimeout((function(){this.set("info",t),this.show(this._coord,this.get("info"))}).bind(this)):(this.set("info",""),this.hide())}removeFeature(){this.setFeature()}formatArea(t){return t>Math.pow(10,-1*this.get("maximumFractionDigits"))?t>1e4?(t/1e6).toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits)")})+" km²":t.toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" m²":""}formatLength(t){return t>Math.pow(10,-1*this.get("maximumFractionDigits"))?t>100?(t/1e3).toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" km":t.toLocaleString(void 0,{maximumFractionDigits:this.get("maximumFractionDigits")})+" m":""}setFeature(t){t&&t.feature&&(t=t.feature),this._feature=t,this._listener&&this._listener.forEach(function(t){(0,r.unByKey)(t)}),this._listener=[],this.set("measure",""),t&&this._listener.push(t.getGeometry().on("change",(function(t){var e,i=t.target;i.getArea?e=this.formatArea((0,a.getArea)(i,{projection:this.getMap().getView().getProjection()})):i.getLength&&(e=this.formatLength((0,a.getLength)(i,{projection:this.getMap().getView().getProjection()}))),this.set("measure",e)}).bind(this)))}}}),a("6yJ0x",function(t,i){e(t.exports,"default",()=>o);var r=n("7lBr2"),o=class extends r.default{constructor(t){t||(t=t||{});var e=!1;super({handleEvent:function(r){if(!i.getActive())return!0;switch(r.type){case"pointerdrag":e=!0;break;case"pointerup":e=!1;break;case"pointermove":e||i.handleMove_(r)}return!t.handleEvent||t.handleEvent(r)}});var i=this;this.setLayerFilter(t.layerFilter),t.layers&&t.layers.length&&this.setLayerFilter(function(e){return t.layers.indexOf(e)>=0}),this.setFeatureFilter(t.featureFilter),this.set("hitTolerance",t.hitTolerance),this.setCursor(t.cursor)}setMap(t){void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),super.setMap(t)}setActive(t){if(super.setActive(t),this.cursor_&&this.getMap()&&this.getMap().getTargetElement()){var e=this.getMap().getTargetElement().style;void 0!==this.previousCursor_&&(e.cursor=this.previousCursor_,this.previousCursor_=void 0)}}setCursor(t){!t&&void 0!==this.previousCursor_&&this.getMap()&&(this.getMap().getTargetElement().style.cursor=this.previousCursor_,this.previousCursor_=void 0),this.cursor_=t}setFeatureFilter(t){"function"==typeof t?this.featureFilter_=t:this.featureFilter_=function(){return!0}}setLayerFilter(t){"function"==typeof t?this.layerFilter_=t:this.layerFilter_=function(){return!0}}handleMove_(t){var e=this.getMap();if(e){var i,r,o=this,n=e.forEachFeatureAtPixel(t.pixel,function(t,e){return o.featureFilter_.call(null,t,e)?(i=t,r=e,!0):(i=r=null,!1)},{hitTolerance:this.get("hitTolerance"),layerFilter:o.layerFilter_});if(n&&this.dispatchEvent({type:"hover",feature:i,layer:r,coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging}),this.feature_===i&&this.layer_===r||(this.feature_=i,this.layer_=r,i?this.dispatchEvent({type:"enter",feature:i,layer:r,coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging}):this.dispatchEvent({type:"leave",coordinate:t.coordinate,pixel:t.pixel,map:t.map,originalEvent:t.originalEvent,dragging:t.dragging})),this.cursor_){var a=e.getTargetElement().style;n?a.cursor!=this.cursor_&&(this.previousCursor_=a.cursor,a.cursor=this.cursor_):void 0!==this.previousCursor_&&(a.cursor=this.previousCursor_,this.previousCursor_=void 0)}}}}}),a("lbwk5",function(t,i){e(t.exports,"default",()=>N);var r=n("6vpLi"),o=n("gzr8q"),a=n("e7Hhj"),s=n("6v9hi"),l=n("lMv07"),h=n("de6E4"),u=n("cBppj"),c=n("cLiWE"),f=n("5UlEr"),d=n("DXhxE"),p=n("iKsmi"),g=n("5y4py"),m=n("2x3of"),y=n("c614M"),x=n("l1YgS"),v=n("eRyYI"),b=n("4Esdr"),w=n("ikPfL"),_=n("6ClR3"),S=n("fRAGe"),E=n("8qGq9");class A extends r.default{constructor(){super()}}A.layerFormats=[a.default,s.default,h.default,u.default,l.default,f.default,c.default,x.default,m.default,y.default,v.default,b.default,w.default,_.default,S.default,E.default],A.prototype.read=function(t,e){(0,g.carteV4)(e);let i=t.map;return t.layerId_=0,i.set("title",e.param.title||e.param.titre||""),i.set("description",e.param.description||""),this.readView(t,e),i.getLayers().clear(),this.readLayers(e,t.get("key")).forEach(t=>i.addLayer(t)),this.readControls(t,e),t.getSymbolLib().clear(),e.symbolLib.forEach(e=>{/Point|Polygon|LineString/.test(e.type)&&t.addSymbolLib(e)}),t},A.prototype.readView=function(t,e){let i=t.map.getView();i.setCenter((0,o.fromLonLat)([e.param.lon,e.param.lat],i.getProjection())),i.setZoom(e.param.zoom),i.setRotation(e.param.rot);let r=t.getControl("permalink").getUrlReplace(),n=t.getControl("permalink");n.setPosition(!0),t.map.set("noMouseWheel",n.hasUrlParam("noZoom")),r||t.getControl("permalink").setUrlReplace(!1)},A.prototype.readControls=function(t,e){let i=e.controls;for(let e in i)t.showControl(e,i[e]);new d.default(t.getControl("mousePosition"),i.mousePosition),new p.default(t.getControl("legend"),i.legend,!1,t.getMap().getLayers().getArray()),t.showControl("legend",i.legend.visible)},A.prototype.readLayers=function(t,e){let i=[];return t.layers.forEach(t=>{let r=this.readLayer(t,e);r&&i.push(r)}),i},A.prototype.readLayer=function(t,e){for(let i=0;i<A.layerFormats.length;i++){let r=(new A.layerFormats[i]).read(t,e);if(r)return r}return null},A.prototype.writeLayers=function(t,e){let i=[];return t.forEach(t=>{let r=this.writeLayer(t,e);r?i.push(r):(console.warn("Layer ["+t.get("type")+":"+t.get("title")+"]  has no writer..."),console.log(t))}),i},A.prototype.writeLayer=function(t,e){for(let i=0;i<A.layerFormats.length;i++){let r=(new A.layerFormats[i]).write(t,e);if(r)return r}return null},A.prototype.write=function(t,e){let i={param:{titre:t.get("title"),description:t.get("description")}},r=t.getMap().getView(),n=(0,o.toLonLat)(r.getCenter());return i.param.lon=n[0],i.param.lat=n[1],i.param.zoom=r.getZoom(),i.param.rot=r.getRotation(),i.param.controlParams={zoomBtn:t.hasControl("zoom"),scaleLine:t.hasControl("scaleLine"),pSearchBar:t.hasControl("searchBar"),legend:t.hasControl("legend"),coords:t.hasControl("mousePosition"),selectLayer:t.hasControl("layerSwitcher"),geoloc:t.hasControl("locate"),profil:t.hasControl("profil"),printDlg:t.hasControl("printDlg")},i.param.proj=new(0,d.default)().write(t.getControl("mousePosition")),i.legende=(new(0,p.default)).write(t.getControl("legend")),i.layers=this.writeLayers(t.getMap().getLayers(),e),i.symbolLib=[],t.getSymbolLib().forEach(t=>{i.symbolLib.push(t.stringify())}),i},window.format=new A;var N=A}),a("6vpLi",function(t,i){e(t.exports,"default",()=>a);var r=n("fnScq");class o extends r.default{constructor(){super()}}o.prototype.read=function(){return console.warn("[Abstract] read method not implemented..."),null},o.prototype.write=function(){return console.warn("[Abstract] write method not implemented..."),""};var a=o}),a("e7Hhj",function(t,i){e(t.exports,"default",()=>s);var r=n("6gELa"),o=n("5TDW7");class a extends o.default{constructor(){super()}}a.prototype.read=function(t,e){if("Geoportail"===t.type){switch(t.layer){case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD":case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.ROUTIER":case"GEOGRAPHICALGRIDSYSTEMS.PLANIGN":t.layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2";break;case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS":t.layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",t.grayscale=!0}try{let i=new r.default({gppKey:e,layer:t.layer,preload:10});return this.readOptions(i,t),i}catch(t){return console.error(t.message),!1}}},a.prototype.write=function(t){if("Geoportail"!==t.get("type"))return!1;var e=this.writeOptions(t);return e.layer=t.get("layer"),e};var s=a}),a("6gELa",function(t,i){e(t.exports,"default",()=>h);var r=n("eEuqc"),o=n("fkmMz"),a=n("gzr8q"),s=n("k7cyy"),l=class extends r.default{constructor(t,e,i){e=e||{},i=i||{},"string"!=typeof t&&(i=e||{},t=(e=t).layer);var r=e.maxZoom;e.source&&(t=e.source.getLayer(),e.gppKey=e.source.getGPPKey());var o=window.geoportailConfig&&(window.geoportailConfig.capabilities[e.gppKey||e.key]||window.geoportailConfig.capabilities.default)||l.capabilities;for(var n in(o=o[t])||(o=l.capabilities[t]),o||(o={title:t,originators:[]},console.error('ol.layer.Geoportail: no layer definition for "'+t+'"\nTry to use ol/layer/Geoportail~loadCapabilities() to get it.')),o)void 0===i[n]&&(i[n]=o[n]);(e.gppKey||e.key)&&(i.gppKey=e.gppKey||e.key),e.source||(e.source=new s.default(t,i)),e.title||(e.title=o.title),e.name||(e.name=t),e.layer=t,e.queryable||(e.queryable=o.queryable),e.desc||(e.desc=o.desc),!e.extent&&o.bbox&&o.bbox[0]>-170&&o.bbox[2]<170&&(e.extent=(0,a.transformExtent)(o.bbox,"EPSG:4326",e.projection||"EPSG:3857")),e.maxZoom=r,!e.maxResolution&&i.minZoom&&(e.source.getTileGrid().minZoom-=i.minZoom>1?2:1,e.maxResolution=e.source.getTileGrid().getResolution(e.source.getTileGrid().minZoom),e.source.getTileGrid().minZoom=i.minZoom),super(e),this._originators=o.originators}static register(t,e){l.capabilities[t]=e}static isRegistered(t){return l.capabilities[t]&&l.capabilities[t].key}static loadCapabilities(t,e){var i=function(){},r=function(){},o=function(){};this.getCapabilities(t,e).then(function(t){l.capabilities=t,i(t)}).catch(function(t){r(t)}).finally(function(t){o(t)});var n={then:function(t){return"function"==typeof t&&(i=t),n},catch:function(t){return"function"==typeof t&&(r=t),n},finally:function(t){return"function"==typeof t&&(o=t),n}};return n}static getCapabilities(t){var e={},i=function(){},r=function(){},n=function(){},a=[156543.03390625,78271.516953125,39135.7584765625,19567.87923828125,9783.939619140625,4891.9698095703125,2445.9849047851562,1222.9924523925781,611.4962261962891,305.74811309814453,152.87405654907226,76.43702827453613,38.218514137268066,19.109257068634033,9.554628534317017,4.777314267158508,2.388657133579254,1.194328566789627,.5971642833948135,.29858214169740677,.14929107084870338];function s(t){t=281e-6*Number(t);for(var e=0;e<a.length;e++)if(t>a[e])return e}(0,o.default).get({url:"https://wxs.ign.fr/"+t+"/autoconf/",dataType:"TEXT",error:function(t){r(t),n({})},success:function(r){for(var o,a=new DOMParser().parseFromString(r,"text/xml").getElementsByTagName("Layer"),l=0;o=a[l];l++)if(/WMTS/.test(o.getElementsByTagName("Server")[0].attributes.service.value)){var h={key:t,server:o.getElementsByTagName("gpp:Key")[0].innerHTML.replace(t+"/",""),layer:o.getElementsByTagName("Name")[0].innerHTML,title:o.getElementsByTagName("Title")[0].innerHTML,format:o.getElementsByTagName("Format")[0]?o.getElementsByTagName("Format")[0].innerHTML:"image.jpeg",style:o.getElementsByTagName("Style")[0].getElementsByTagName("Name")[0].innerHTML,queryable:"1"===o.attributes.queryable.value,tilematrix:"PM",minZoom:s(o.getElementsByTagName("sld:MaxScaleDenominator")[0].innerHTML),maxZoom:s(o.getElementsByTagName("sld:MinScaleDenominator")[0].innerHTML),bbox:JSON.parse("["+o.getElementsByTagName("gpp:BoundingBox")[0].innerHTML+"]"),desc:o.getElementsByTagName("Abstract")[0].innerHTML.replace(/^<!\[CDATA\[(.*)\]\]>$/,"$1")};h.originators={};for(var u,c=o.getElementsByTagName("gpp:Originator"),f=0;u=c[f];f++){for(var d,p=h.originators[u.attributes.name.value]={href:u.getElementsByTagName("gpp:URL")[0].innerHTML,attribution:u.getElementsByTagName("gpp:Attribution")[0].innerHTML,logo:u.getElementsByTagName("gpp:Logo")[0].innerHTML,minZoom:20,maxZoom:0,constraint:[]},g=u.getElementsByTagName("gpp:Constraint"),m=0;d=g[m];m++){var y=s(d.getElementsByTagName("sld:MinScaleDenominator")[0].innerHTML),x=s(d.getElementsByTagName("sld:MaxScaleDenominator")[0].innerHTML);x>p.maxZoom&&(p.maxZoom=x),x<p.minZoom&&(p.minZoom=x),y>p.maxZoom&&(p.maxZoom=y),y<p.minZoom&&(p.minZoom=y),p.constraint.push({minZoom:x,maxZoom:y,bbox:JSON.parse("["+d.getElementsByTagName("gpp:BoundingBox")[0].innerHTML+"]")})}!function(t){for(var e=t.constraint.length-1;e>0;e--)for(var i=0;i<e;i++){for(var r=!0,o=0;o<4;o++)if(t.constraint[e].bbox[o]!=t.constraint[i].bbox[o]){r=!1;break}if(r&&(t.constraint[e].maxZoom==t.constraint[i].minZoom||t.constraint[i].maxZoom==t.constraint[e].minZoom||t.constraint[e].maxZoom+1==t.constraint[i].minZoom||t.constraint[i].maxZoom+1==t.constraint[e].minZoom||t.constraint[e].minZoom-1==t.constraint[i].maxZoom||t.constraint[i].minZoom-1==t.constraint[e].maxZoom)){t.constraint[i].maxZoom=Math.max(t.constraint[e].maxZoom,t.constraint[i].maxZoom),t.constraint[i].minZoom=Math.min(t.constraint[e].minZoom,t.constraint[i].minZoom),t.constraint.splice(e,1);break}}}(p)}e[h.layer]=h}i(e),n(e)}});var l={then:function(t){return"function"==typeof t&&(i=t),l},catch:function(t){return"function"==typeof t&&(r=t),l},finally:function(t){return"function"==typeof t&&(n=t),l}};return l}};l.capabilities={"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2":{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",title:"Plan IGN v2",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-175,-85,175,85],desc:"Cartographie multi-échelles sur le territoire national, issue des bases de données vecteur de l’IGN, mis à jour régulièrement et réalisée selon un processus entièrement automatisé. Version actuellement en beta test",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-175,-85,175,85]}]}}},"CADASTRALPARCELS.PARCELLAIRE_EXPRESS":{key:"parcellaire",server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",title:"PCI vecteur",format:"image/png",style:"PCI vecteur",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatisé vecteur de la DGFIP.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS":{key:"ortho",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",title:"Photographies aériennes",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,bbox:[-178.18713,-22.767689,167.94624,51.11242],desc:"Photographies aériennes",originators:{CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[8.428783,41.338627,9.688606,43.08541]}]},SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.316307,4.8729386,44.978218]}]},"BOURGOGNE-FRANCHE-COMTE":{href:"https://www.bourgognefranchecomte.fr/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/BOURGOGNE-FRANCHE-COMTE/BOURGOGNE-FRANCHE-COMTE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.837849,46.131435,7.1713247,48.408287]}]},FEDER_AUVERGNE:{href:"http://www.europe-en-auvergne.eu/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/FEDER_AUVERGNE/FEDER_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-2.457367,46.19304,.951426,48.57609]}]},IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:19,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242]},{bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:20,maxZoom:20,bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:13,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.11242]}]},"E-MEGALIS":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/E-MEGALIS/E-MEGALIS.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-3.7059498,47.971947,-1.8486879,48.99035]}]},FEDER2:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER2/FEDER2.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.3577043,48.824635,4.269964,50.37648]}]},PREFECTURE_GUADELOUPE:{href:"www.guadeloupe.pref.gouv.fr/",attribution:"guadeloupe",logo:"https://wxs.ign.fr/static/logos/PREFECTURE_GUADELOUPE/PREFECTURE_GUADELOUPE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-61.82342,14.371942,-60.787838,16.521578]}]},OCCITANIE:{href:"https://www.laregion.fr/",attribution:"La Région Occitanie; Pyrénées - Méditerranée",logo:"https://wxs.ign.fr/static/logos/OCCITANIE/OCCITANIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2086434,48.805965,2.4859917,48.915382]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[5.7759595,45.65335,7.0887337,46.438328]},{minZoom:13,maxZoom:18,bbox:[5.5923314,45.017353,7.2323394,46.438328]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.4883244,47.471867,3.1349874,48.354233]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,6.4295278,46.8038]},{minZoom:20,maxZoom:20,bbox:[2.2243388,44.76621,2.7314367,45.11295]}]},"e-Megalis":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/e-Megalis/e-Megalis.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.1937118,47.23789,-.98568505,48.980812]}]},PPIGE:{href:"http://www.ppige-npdc.fr/",attribution:"PPIGE",logo:"https://wxs.ign.fr/static/logos/PPIGE/PPIGE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.5212119,49.957302,4.2673664,51.090965]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},"MEGALIS-BRETAGNE":{href:"https://www.megalisbretagne.org/",attribution:"Syndicat mixte Mégalis Bretagne",logo:"https://wxs.ign.fr/static/logos/MEGALIS-BRETAGNE/MEGALIS-BRETAGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.2086344,47.591938,-3.3396015,48.808697]}]},FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-1.9662633,42.316307,8.25674,50.18387]},{minZoom:0,maxZoom:12,bbox:[-2.400665,41.333557,9.560094,50.366302]}]},"LANGUEDOC-ROUSSILLON":{href:"https://www.laregion.fr/",attribution:"Région Occitanie",logo:"https://wxs.ign.fr/static/logos/LANGUEDOC-ROUSSILLON/LANGUEDOC-ROUSSILLON.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.63972,4.208843,43.979004]}]},GRAND_EST:{href:"https://www.grandest.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/GRAND_EST/GRAND_EST.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[5.362788,47.390827,7.6924667,49.58011]}]},CNES_AUVERGNE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_AUVERGNE/CNES_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2656832,45.279934,4.0227704,46.8038]}]},HAUTS_DE_FRANCE:{href:"https://www.hautsdefrance.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/HAUTS_DE_FRANCE/HAUTS_DE_FRANCE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0740242,48.81521,4.3390365,51.11242]}]},MPM:{href:"http://www.marseille-provence.com/",attribution:"Marseille Provence Métropole",logo:"https://wxs.ign.fr/static/logos/MPM/MPM.gif",minZoom:20,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[5.076959,43.153347,5.7168245,43.454994]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[163.47784,-22.767689,167.94624,-19.434975]}]},CNES_978:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_978/CNES_978.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-63.160706,18.04345,-62.962185,18.133898]}]},CNES_ALSACE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_ALSACE/CNES_ALSACE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[6.8086324,47.39981,7.668318,48.32695]}]},CNES_974:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_974/CNES_974.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[55.205757,-21.401262,55.84643,-20.862825]}]},CNES_975:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_975/CNES_975.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-56.410988,46.734093,-56.10308,47.149963]}]},CNES_976:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_976/CNES_976.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[44.916977,-13.089187,45.30442,-12.564543]}]},CNES_977:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_977/CNES_977.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-62.952805,17.862621,-62.78276,17.98024]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},ASTRIUM:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/ASTRIUM/ASTRIUM.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},CNES_971:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_971/CNES_971.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.82342,15.819616,-60.99497,16.521578]}]},CNES_972:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_972/CNES_972.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.247208,14.371855,-60.778458,14.899901]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",title:"Carte IGN",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.62723,-84.5047,179.74588,85.47958],desc:"Cartographie topographique multi-échelles du territoire français issue des bases de données vecteur de l’IGN - emprise nationale, visible du 1/200 au 1/130000000",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:5,maxZoom:5,bbox:[-179.57285,-83.84196,178.4975,85.36646]},{minZoom:0,maxZoom:2,bbox:[-175.99709,-84.42859,175.99709,84.2865]},{minZoom:3,maxZoom:3,bbox:[-176.23093,-84.5047,179.08267,84.89126]},{minZoom:4,maxZoom:4,bbox:[-179.62723,-84.0159,-179.21112,85.47958]},{minZoom:6,maxZoom:8,bbox:[-179.49689,-84.02368,179.74588,85.30035]},{minZoom:15,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:14,maxZoom:14,bbox:[-5.713191,40.852314,11.429714,51.44377]},{minZoom:13,maxZoom:13,bbox:[-63.37252,13.428586,11.429714,51.44377]},{minZoom:11,maxZoom:12,bbox:[-63.37252,13.428586,11.496459,51.444122]},{minZoom:9,maxZoom:9,bbox:[-64.81273,13.428586,11.496459,51.444016]},{minZoom:10,maxZoom:10,bbox:[-63.37252,13.428586,11.496459,51.444016]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS",title:"Cartes IGN",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-180,-75,180,80],desc:"Cartes IGN",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:7,maxZoom:7,bbox:[-178.20573,-68.138855,144.84375,51.909786]},{minZoom:8,maxZoom:8,bbox:[-178.20573,-68.138855,168.24327,51.909786]},{minZoom:13,maxZoom:13,bbox:[-178.20573,-67.101425,168.24327,51.44377]},{minZoom:14,maxZoom:14,bbox:[-178.20573,-67.101425,168.23909,51.44377]},{minZoom:11,maxZoom:12,bbox:[-178.20573,-67.101425,168.24327,51.444122]},{minZoom:9,maxZoom:10,bbox:[-178.20573,-68.138855,168.24327,51.444016]},{minZoom:15,maxZoom:15,bbox:[-178.20573,-46.502903,168.23909,51.175068]},{minZoom:16,maxZoom:16,bbox:[-178.20573,-46.502903,168.29811,51.175068]},{minZoom:0,maxZoom:6,bbox:[-180,-60,180,80]},{minZoom:18,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:17,maxZoom:17,bbox:[-179.5,-75,179.5,75]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:8,maxZoom:10,bbox:[163.47784,-22.972307,168.24327,-19.402702]},{minZoom:11,maxZoom:13,bbox:[163.47784,-22.972307,168.24327,-19.494438]},{minZoom:14,maxZoom:15,bbox:[163.47784,-22.764496,168.23909,-19.493542]},{minZoom:16,maxZoom:16,bbox:[163.47784,-22.809465,168.29811,-19.403923]}]}}},"ADMINEXPRESS-COG-CARTO.LATEST":{key:"administratif",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ADMINEXPRESS-COG-CARTO.LATEST",title:"ADMINEXPRESS COG CARTO",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Limites administratives Express COG code officiel géographique 2021",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN":{key:"altimetrie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.SLOPES.MOUNTAIN",title:"Carte des pentes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:17,bbox:[-63.161392,-21.544624,56.001812,51.099052],desc:"Carte des zones ayant une valeur de pente supérieure à 30°-35°-40°-45° d'après la BD ALTI au pas de 5m",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"ELEVATION.SLOPES":{key:"altimetrie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ELEVATION.SLOPES",title:"Altitude",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:14,bbox:[-178.20589,-22.595179,167.43176,50.93085],desc:"La couche altitude se compose d'un MNT (Modèle Numérique de Terrain) affiché en teintes hypsométriques et issu de la BD ALTI®.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:14,constraint:[{minZoom:6,maxZoom:14,bbox:[55.205746,-21.392344,55.846554,-20.86271]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1":{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",title:"Plan IGN j+1",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN j+1",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}},"TRANSPORTNETWORKS.ROADS":{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.ROADS",title:"Routes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage du réseau routier français et européen.",originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}};var h=l}),a("k7cyy",function(t,i){e(t.exports,"default",()=>u);var r=n("gAUZM"),o=n("jZquI"),a=n("sxATa"),s=n("gzr8q"),l=n("fkmMz"),h=class extends r.default{constructor(t,e){e=e||{},t.layer&&(t=(e=t).layer);for(var i=[],r=[],n=(0,o.getWidth)((0,s.get)("EPSG:3857").getExtent())/256,l=0;l<=(e.maxZoom?e.maxZoom:20);l++)i[l]=l,r[l]=n/Math.pow(2,l);var u=new a.default({origin:[-20037508,20037508],resolutions:r,matrixIds:i});u.minZoom=e.minZoom?e.minZoom:0;var c=[h.defaultAttribution];e.attributions&&(c=e.attributions);var f=e.server||"https://wxs.ign.fr/geoportail/wmts",d=e.gppKey||e.key||"choisirgeoportail";super({url:h.getServiceURL(f,d),layer:t,matrixSet:"PM",format:e.format?e.format:"image/jpeg",projection:"EPSG:3857",tileGrid:u,style:e.style?e.style:"normal",attributions:c,crossOrigin:void 0===e.crossOrigin?"anonymous":e.crossOrigin,wrapX:!1!==e.wrapX}),this._server=f,this._gppKey=d,e.authentication&&this.setTileLoadFunction(h.tileLoadFunctionWithAuthentication(e.authentication,this.getFormat()))}static tileLoadFunctionWithAuthentication(t,e){if(t)return function(i,r){var o=new XMLHttpRequest;o.open("GET",r),o.setRequestHeader("Authorization","Basic "+t),o.responseType="arraybuffer",o.onload=function(){var t=new Uint8Array(this.response),r=new Blob([t],{type:e}),o=(window.URL||window.webkitURL).createObjectURL(r);i.getImage().src=o},o.onerror=function(){i.getImage().src=""},o.send()}}serviceURL(){return h.getServiceURL(this._server,this._gppKey)}getGPPKey(){return this._gppKey}setGPPKey(t,e){this._gppKey=t;var i=this.serviceURL();this.setTileUrlFunction(function(){var t=h.prototype.getTileUrlFunction().apply(this,arguments);return t?i+"?"+t.split("?")[1]:t}),e&&this.setTileLoadFunction(h.tileLoadFunctionWithAuthentication(e,this.getFormat()))}getFeatureInfoUrl(t,e,i,r){r=r||{},i||(i=this.getProjection());var o=this.tileGrid.getTileCoordForCoordAndResolution(t,e),n=this.getTileUrlFunction()(o,1,i);if(!n)return n;var a=this.tileGrid.getResolution(o[0]),s=this.tileGrid.getTileCoordExtent(o),l=Math.floor((t[0]-s[0])/(a/1)),h=Math.floor((s[3]-t[1])/(a/1));return n.replace(/Request=GetTile/i,"Request=getFeatureInfo")+"&INFOFORMAT="+(r.INFO_FORMAT||"text/plain")+"&I="+l+"&J="+h}getFeatureInfo(t,e,i){var r=this.getFeatureInfoUrl(t,e,null,i);(0,l.default).get({url:r,dataType:i.format||"text/plain",options:{encode:!1},success:function(t){i.callback&&i.callback(t)},error:i.error||function(){}})}};h.defaultAttribution='<a href="http://www.geoportail.gouv.fr/">Géoportail</a> &copy; <a href="http://www.ign.fr/">IGN-France</a>',h.getServiceURL=function(t,e){return"gpf"===e?"https://data.geopf.fr/wmts":t?t.replace(/^(https?:\/\/[^/]*)(.*)$/,"$1/"+e+"$2"):(window.geoportailConfig?window.geoportailConfig.url:"https://wxs.ign.fr/")+e+"/geoportail/wmts"};var u=h}),a("gAUZM",function(t,i){e(t.exports,"default",()=>l);var r=n("42VYg"),o=n("9AVh1");n("jZquI"),n("sxATa");var a=n("ga5CQ");n("gzr8q");class s extends r.default{constructor(t){let e=void 0!==t.requestEncoding?t.requestEncoding:"KVP",i=t.tileGrid,r=t.urls;void 0===r&&void 0!==t.url&&(r=(0,a.expandUrl)(t.url)),super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:i,tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,urls:r,wrapX:void 0!==t.wrapX&&t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.version_=void 0!==t.version?t.version:"1.0.0",this.format_=void 0!==t.format?t.format:"image/jpeg",this.dimensions_=void 0!==t.dimensions?t.dimensions:{},this.layer_=t.layer,this.matrixSet_=t.matrixSet,this.style_=t.style,this.requestEncoding_=e,this.setKey(this.getKeyForDimensions_()),r&&r.length>0&&(this.tileUrlFunction=(0,a.createFromTileUrlFunctions)(r.map(this.createFromWMTSTemplate.bind(this))))}setUrls(t){this.urls=t;let e=t.join("\n");this.setTileUrlFunction((0,a.createFromTileUrlFunctions)(t.map(this.createFromWMTSTemplate.bind(this))),e)}getDimensions(){return this.dimensions_}getFormat(){return this.format_}getLayer(){return this.layer_}getMatrixSet(){return this.matrixSet_}getRequestEncoding(){return this.requestEncoding_}getStyle(){return this.style_}getVersion(){return this.version_}getKeyForDimensions_(){let t=this.urls?this.urls.slice(0):[];for(let e in this.dimensions_)t.push(e+"-"+this.dimensions_[e]);return t.join("/")}updateDimensions(t){Object.assign(this.dimensions_,t),this.setKey(this.getKeyForDimensions_())}createFromWMTSTemplate(t){let e=this.requestEncoding_,i={layer:this.layer_,style:this.style_,tilematrixset:this.matrixSet_};"KVP"==e&&Object.assign(i,{Service:"WMTS",Request:"GetTile",Version:this.version_,Format:this.format_}),t="KVP"==e?(0,o.appendParams)(t,i):t.replace(/\{(\w+?)\}/g,function(t,e){return e.toLowerCase() in i?i[e.toLowerCase()]:t});let r=this.tileGrid,n=this.dimensions_;return function(i,a,s){if(!i)return;let l={TileMatrix:r.getMatrixId(i[0]),TileCol:i[1],TileRow:i[2]};Object.assign(l,n);let h=t;return"KVP"==e?(0,o.appendParams)(h,l):h.replace(/\{(\w+?)\}/g,function(t,e){return l[e]})}}}var l=s}),a("9AVh1",function(t,i){e(t.exports,"appendParams",()=>r);function r(t,e){let i=[];Object.keys(e).forEach(function(t){null!==e[t]&&void 0!==e[t]&&i.push(t+"="+encodeURIComponent(e[t]))});let r=i.join("&");return t=t.replace(/[?&]$/,""),(t+=t.includes("?")?"&":"?")+r}}),a("sxATa",function(t,i){e(t.exports,"default",()=>s),e(t.exports,"createFromCapabilitiesMatrixSet",()=>l);var r=n("co8nU"),o=n("gzr8q");class a extends r.default{constructor(t){super({extent:t.extent,origin:t.origin,origins:t.origins,resolutions:t.resolutions,tileSize:t.tileSize,tileSizes:t.tileSizes,sizes:t.sizes}),this.matrixIds_=t.matrixIds}getMatrixId(t){return this.matrixIds_[t]}getMatrixIds(){return this.matrixIds_}}var s=a;function l(t,e,i){let r=[],n=[],s=[],l=[],h=[];i=void 0!==i?i:[];let u="TileMatrix",c="Identifier",f="ScaleDenominator",d="TopLeftCorner",p=t.SupportedCRS,g=(0,o.get)(p),m=g.getMetersPerUnit(),y="ne"==g.getAxisOrientation().substr(0,2);return t[u].sort(function(t,e){return e[f]-t[f]}),t[u].forEach(function(e){if(!(i.length>0)||i.find(function(i){return e[c]==i[u]||!e[c].includes(":")&&t[c]+":"+e[c]===i[u]})){n.push(e[c]);let t=28e-5*e[f]/m,i=e.TileWidth,o=e.TileHeight;y?s.push([e[d][1],e[d][0]]):s.push(e[d]),r.push(t),l.push(i==o?i:[i,o]),h.push([e.MatrixWidth,e.MatrixHeight])}}),new a({extent:e,origins:s,resolutions:r,matrixIds:n,tileSizes:l,sizes:h})}}),a("5TDW7",function(t,i){e(t.exports,"default",()=>u);var r=n("6vpLi"),o=n("2tVQX");n("eXEIX");var a=n("dKl6q"),s=n("3HxCM"),l=n("cHblF");class h extends r.default{constructor(){super()}}h.prototype.read=function(){return!1},h.prototype.write=function(){return!1},h.prototype.readOptions=function(t,e){if((e=e||{}).id&&t.set("id",e.id),e.type&&t.set("type",e.type),e.name&&t.set("name",e.name),(e.name||e.title)&&t.set("title",e.title||e.name),void 0!==e.visibility&&t.setVisible(e.visibility),void 0!==e.opacity&&t.setOpacity(parseFloat(e.opacity)),e.description&&t.set("desc",e.description),e.logo&&t.set("logo",e.logo),e.theme&&t.set("theme",e.theme),e.exportable&&t.set("exportable",!0),t.getSource()&&(e.attributions?(t.getSource().setAttributions(e.attributions),t.set("attributions",e.attributions)):e.copyright&&t.getSource().setAttributions(e.copyright)),t.selectable&&t.selectable(e.selectable),t.setPopupContent&&t.setPopupContent(e.popupContent),e.popupHoverSelect&&t.set("popupHoverSelect",e.popupHoverSelect),e.grayscale&&t.grayscale(!0),e.blendMode&&t.setBlendMode(e.blendMode),e.minZoom&&t.setMinZoom(e.minZoom),e.maxZoom&&t.setMaxZoom(e.maxZoom),t.setDeclutter&&t.setDeclutter(e.declutter),t.setIgnStyle&&t.setIgnStyle(e.style||{}),t.setConditionStyle&&e.conditionStyle){let i=[];e.conditionStyle.forEach(t=>{i.push({title:t.title,condition:t.condition,symbol:t.symbol?new l.default(t.symbol):null})}),t.setConditionStyle(i)}t.setMode&&(e.cluster||"cluster"===e.mode?t.setMode("cluster",{distance:e.clusterDistance||e.radiusCluster||40,maxZoomCluster:parseInt(e.maxZoomCluster)}):e.mode&&t.setMode(e.mode||"vector")),t.setCrop(e.crop),e.extent&&t.setExtent(e.extent),e.legend&&(t._legend=new s.default({size:[28,20],margin:6,layer:t}),new a.default(t._legend,e.legend))},h.prototype.writeOptions=function(t,e){if((e=e||{}).id=t.get("id"),e.type=t.get("type"),e.name=t.get("name")||"",e.title=t.get("title")||"",e.visibility=t.getVisible(),e.opacity=t.getOpacity(),e.description=t.get("desc")||t.get("description"),e.logo=t.get("logo"),e.theme=t.get("theme"),t.get("exportable")&&(e.exportable=!0),t.get("attributions")&&(e.attributions=t.get("attributions")),"Geoportail"===t.get("type")||"WMS"===t.get("type")&&t.get("wmsparam").source.attributions&&t.get("wmsparam").source.attributions.length||"WMTS"===t.get("type")&&t.get("wmtsparam").source.attributions.length||!t.getSource().getAttributions())e.copyright="";else try{e.copyright=t.getSource().getAttributions()({extent:[-1/0,-1/0,1/0,1/0]}).join(" ")}catch(t){e.copyright=""}if(t.selectable&&(e.selectable=t.selectable()),t.getPopupContent&&(e.popupContent=t.getPopupContent(),e.popupHoverSelect=t.get("popupHoverSelect")),e.grayscale=t.get("grayscale")||!1,e.blendMode=t.get("blendMode")||"",e.minZoom=t.getMinZoom(),e.maxZoom=t.getMaxZoom(),t.getDeclutter&&(e.declutter=t.getDeclutter()),t.getIgnStyle&&(e.style=t.getIgnStyle()),t.getConditionStyle&&(e.conditionStyle=[],t.getConditionStyle().forEach(t=>{e.conditionStyle.push({title:t.title,condition:t.condition,symbol:t.symbol?t.symbol.stringify():null})})),t.getMode&&(e.mode=t.getMode(),"cluster"===t.getMode()&&(e.cluster=!0,e.clusterDistance=e.radiusCluster=t.get("clusterDistance"),e.maxZoomCluster=t.get("maxZoomCluster"))),e.crop=t.getCrop(),e.crop.coordinates&&(e.crop.coordinates=(0,o.default)(e.crop.coordinates)),e.extent=t.getExtent(),t._legend){let i=new a.default;e.legend=i.write(t._legend)}return e};var u=h}),a("2tVQX",function(t,i){e(t.exports,"default",()=>r);var r=function t(e,i){return i=i||1e3,"number"==typeof e[0]?(e[0]=Math.round(e[0]*i)/i,e[1]=Math.round(e[1]*i)/i):e.forEach(e=>t(e,i)),e}}),a("dKl6q",function(t,i){e(t.exports,"default",()=>g);var r=n("6vpLi"),o=n("juLo9"),a=n("j2K3b"),s=n("hvEnP"),l=n("cgPpQ"),h=n("gIJof"),u=n("cWXYt"),c=n("hwcfb"),f=n("3HxCM"),d=n("8X5J1");class p extends r.default{constructor(t,e,i,r){super(),t&&this.read(t,e,i,r)}}p.prototype.read=function(t,e,i,r){e&&(!i&&(t.getItems().clear(),t.setTitle(e.title||e.legendtitle||""),t.set("lineHeight",e.lineHeight),e.type&&t.set("type",e.type)),e.items&&e.items.forEach(e=>{if("Layer"===e.type){if(r){let i=r.find(t=>t.get("id")===e.id);i&&i._legend&&t.addItem(i._legend)}}else if("Image"===e.type)t.addItem(new d.default({src:e.src}));else{let i;(i=/Titre/.test(e.type)?void 0:new o.default(/Point/.test(e.type)?new a.default([0,0]):/LineString/.test(e.type)?new s.default([0,0]):new l.default([[0,0]])))&&(i.setIgnStyle(e.style),i.setStyle((0,u.getStyleFn)())),t.addItem({title:e.name,feature:i})}}),(0,h.default)(()=>{t.refresh()}))},p.prototype.write=function(t){let e={};return e.legendtitle=t.getTitle(),e.lineHeight=t.get("lineHeight"),e.legendWidth=300,e.legendParam={width:300,lineHeight:e.lineHeight},t.get("type")&&(e.type=t.get("type")),e.items=[],t.getItems().forEach(t=>{if(t instanceof f.default)t._layer&&e.items.push({type:"Layer",id:t._layer.get("id")});else if(t instanceof d.default)e.items.push({type:"Image",src:t.get("src")});else{let i={name:t.get("title"),type:"Titre"},r=t.get("feature");r&&(i.type=r.getGeometry().getType(),"function"!=typeof r.getStyle()?i.style=(0,c.default)(r):i.style=r.getIgnStyle()),e.items.push(i)}}),e};var g=p}),a("8X5J1",function(t,i){e(t.exports,"default",()=>a);var r=n("3xROf");class o extends r.default{constructor(t){let e=(t=t||{}).src;delete t.src,super(t),this.getImage().onerror=()=>{this.dispatchEvent({type:"error"}),"function"==typeof t.onerror&&t.onerror()},this.getImage().crossOrigin="anonymous",this.getImage().src=t.src=e,this.set("src",e)}}var a=o}),a("cHblF",function(t,i){e(t.exports,"default",()=>d);var r=n("fnScq"),o=n("iGyOD"),a=n("3HxCM"),s=n("hvEnP"),l=n("j2K3b"),h=n("cgPpQ"),u=n("6BrXC"),c=n("cWXYt");class f extends r.default{constructor(t){super(),void 0===(t=t||{}).margin&&(t.margin=10);let e=t.feature,i=Object.assign({},t.style),r=(t.type||"").replace(/^Polygone$/,"Polygon");switch(e instanceof o.default&&(e.get("features")&&(e=e.get("features")[0]),e&&(r=e.getGeometry().getType(),i=e.getIgnStyle(!0))),r=(0,u.default)(r)){case"Point":e=new o.default(new l.default([0,0]));break;case"LineString":e=new o.default(new s.default([[0,0],[1,0]]));break;case"Polygon":e=new o.default(new h.default([[[0,0]]]));break;default:e=null}e&&(e.setStyle((0,c.getStyleFn)()),e.setIgnStyle(i),this._img=(0,a.default).getLegendImage({feature:e,size:t.size,margin:t.margin,pixelratio:1,onload:()=>{this._drawImage()}}),e.on("change",()=>{this._drawImage()})),this.set("name",t.name),this._margin=t.margin,this._feature=e,this._type=r,this.setIgnStyle(i),this._size=t.size}}f.prototype._drawImage=function(){this._feature.setIgnStyle(this._style);let t=(0,a.default).getLegendImage({size:this._size,margin:this._margin,pixelratio:1,feature:this._feature});this._img.getContext("2d").clearRect(0,0,this._img.width,this._img.height),this._img.getContext("2d").drawImage(t,0,0),this.dispatchEvent({type:"load"})},f.prototype.getImage=function(t){if(t){let t=document.createElement("canvas");return t.width=this._img.width,t.height=this._img.height,t.getContext("2d").drawImage(this._img,0,0),t}return this._img},f.prototype.setIgnStyle=function(t,e){this._feature&&(this._feature.setIgnStyle(t,e),this._style=Object.assign({},this._feature.getIgnStyle(!0)),delete this._style.zIndex,this._feature.changed())},f.prototype.getIgnStyle=function(){return Object.assign({},this._style)},f.prototype.getType=function(){return this._type},f.prototype.setFeatureProperties=function(t){let e=this._feature.getGeometry();this._feature.setProperties(t),this._feature.setGeometry(e)},f.prototype.stringify=function(){return{name:this.get("name"),type:this.getType(),style:this.getIgnStyle()}};var d=f}),a("6BrXC",function(t,i){e(t.exports,"default",()=>r);var r=function(t){switch(t){case"Point":case"MultiPoint":return"Point";case"LineString":case"LinearRing":case"MultiLineString":return"LineString";case"Polygon":case"MultiPolygon":return"Polygon";case"GeometryCollection":case"Circle":return!1}}}),a("6v9hi",function(t,i){e(t.exports,"default",()=>s);var r=n("6gELa"),o=n("5TDW7");class a extends o.default{constructor(){super()}}a.prototype.read=function(t){if("Edugeo"===t.type){switch(t.layer){case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD":case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.ROUTIER":case"GEOGRAPHICALGRIDSYSTEMS.PLANIGN":t.layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2";break;case"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS":t.layer="GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",t.grayscale=!0}try{let e=new r.default({gppKey:t.key,layer:t.layer,preload:10});return this.readOptions(e,t),e}catch(t){return console.error(t.message),!1}}},a.prototype.write=function(t){if("Edugeo"!==t.get("type"))return!1;var e=this.writeOptions(t);return e.layer=t.get("layer"),e.key=t.get("key"),e};var s=a}),a("lMv07",function(t,i){e(t.exports,"default",()=>p),e(t.exports,"roundCoords",()=>n("2tVQX").default);var r=n("5TDW7"),o=n("jPVWI"),a=n("20LS2"),s=n("iGyOD"),l=n("5mw1t"),h=n("2tVQX"),u=n("23ytq"),c=n("86esn");let f={};Object.keys(c.ignStyleDef).forEach(t=>{let e=c.ignStyleDef[t].short;e?f[e]?console.error("DUPLICATE style: ",t,"-",f[e],"("+e+")"):f[e]=t:console.error("MISSING style: ",t)});class d extends r.default{constructor(){super()}}d.prototype.read=function(t){if("Vector"!==t.type)return;let e=new a.default,i=new o.default({source:e});return this.readOptions(i,t),this.readFeatures(i,t)},d.prototype.readFeatures=function(t,e){let i=t.getSource(),r=[];return e.data?(r=new l.default().readFeaturesFromObject(e.data),e.data.style.forEach((t,e)=>{let i={};Object.keys(t).forEach(e=>i[f[e]]=t[e]),r[e].setIgnStyle(i)}),e.data.popupContent.forEach((t,e)=>r[e].setPopupContent(t))):e.features.forEach(t=>{let e=new s.default((0,u.ol_geom_createFromType)(t.type,t.coords));e.setProperties(t.attributes),e.setIgnStyle(t.style),e.setPopupContent(t.popupcontent),r.push(e)}),i.addFeatures(r),t.setAttributes(e.attributes),t},d.prototype.write=function(t,e){if("Vector"!==t.get("type"))return null;let i=this.writeOptions(t,{dessin:!0,attributes:Object.values(t.getAttributes())});return this.writeFeatures(t,i,e)},d.prototype.writeFeatures=function(t,e,i){let r=t.getSource().getFeatures();if(i)e.features=[],r.forEach(t=>{let i={type:t.getGeometry().getType(),coords:(0,h.default)(t.getGeometry().getCoordinates()),attributes:t.getProperties(),style:t.getIgnStyle(),popupcontent:t.getPopupContent()};delete i.attributes[t.getGeometryName()],e.features.push(i)});else{let t=new l.default({deleteNullProperties:!1,decimals:3,layout:"XYZM"});e.data=t.writeFeaturesObject(r),e.data.style=[],e.data.popupContent=[],r.forEach(t=>{let i=t.getIgnStyle(),r={};Object.keys(i).forEach(t=>{c.ignStyleDef[t]&&(r[c.ignStyleDef[t].short]=i[t])}),e.data.style.push(r),t.getPopupContent().active?e.data.popupContent.push(t.getPopupContent()):e.data.popupContent.push({})})}return e};var p=d}),a("5mw1t",function(t,i){e(t.exports,"default",()=>a);var r=n("kPMpK"),o=class extends r.default{constructor(t){super(t=t||{}),this._hash={},this._count=0,this._extended=t.extended,"function"==typeof t.whiteList?this._whiteList=t.whiteList:t.whiteList&&t.whiteList.indexOf?this._whiteList=function(e){return t.whiteList.indexOf(e)>-1}:this._whiteList=function(){return!0},"function"==typeof t.blackList?this._blackList=t.blackList:t.blackList&&t.blackList.indexOf?this._blackList=function(e){return t.blackList.indexOf(e)>-1}:this._blackList=function(){return!1},this._deleteNull=!1!==t.deleteNullProperties&&[null,void 0,""];var e=2;t.dataProjection&&"EPSG:4326"!==t.dataProjection||(e=7),isNaN(parseInt(t.decimals))||(e=parseInt(t.decimals)),this._decimals=e,this.setLayout(t.layout||"XY")}setLayout(t){switch(t){case"XYZ":case"XYZM":this._layout=t;break;default:this._layout="XY"}}getLayout(){return this._layout}encodeNumber(t,e){(isNaN(Number(t))||null===t||!isFinite(t))&&(t=0),e||0===e||(e=this._decimals),(t=Math.round(t*Math.pow(10,e)))<0?t=-2*t-1:t*=2;for(var i,r="",o=t;i=o%this._size,r=this._radix.charAt(i)+r,0!=(o=Math.floor(o/this._size)););return r}decodeNumber(t,e){e||0===e||(e=this._decimals);var i=0;t.split("").forEach((function(t){i=i*this._size+this._radix.indexOf(t)}).bind(this));var r=Math.floor(i/2);return r!==i/2&&(r=-1-r),r/Math.pow(10,e)}encodeCoordinates(t,e){var i,r,o;if("number"==typeof t[0])return r=this.encodeNumber(t[0],e)+","+this.encodeNumber(t[1],e),"Z"==this._layout[2]&&t.length>2&&(r+=","+this.encodeNumber(t[2],2)),"M"==this._layout[3]&&t.length>3&&(r+=","+this.encodeNumber(t[3],0)),r;if(!t.length||!t[0])return this.encodeCoordinates([0,0],e);if("number"==typeof t[0][0]){var n=[0,0,0,0],a=[],s="Z"==this._layout[2]&&t[0].length>2,l="M"==this._layout[3]&&t[0].length>3;for(i=0;i<t.length;i++){o=[Math.round(t[i][0]*Math.pow(10,e)),Math.round(t[i][1]*Math.pow(10,e))],s&&(o[2]=t[i][2]),l&&(o[3]=t[i][3]),t[i]=o;var h=t[i][0]-n[0],u=t[i][1]-n[1];(0==i||0!==h||0!==u)&&(r=this.encodeNumber(h,0)+","+this.encodeNumber(u,0)+(s?","+this.encodeNumber(t[i][2]-n[2],2):"")+(l?","+this.encodeNumber(t[i][3]-n[3],0):""),a.push(r),n=t[i])}return a.length<2&&t.length>1&&(r="A,A"+(s?",A":"")+(l?",A":""),a.push(r)),a.join(";")}for(i=0;i<t.length;i++)t[i]=this.encodeCoordinates(t[i],e);return t}decodeCoordinates(t,e){if("string"==typeof t){if(!((t=t.split(";")).length>1))return t=t[0].split(","),r=[this.decodeNumber(t[0],e),this.decodeNumber(t[1],e)],t.length>2&&(r[2]=this.decodeNumber(t[2],2)),t.length>3&&(r[3]=this.decodeNumber(t[3],0)),r;var i,r,o=Math.pow(10,e),n=[0,0,0,0];return t.forEach((function(i,r){t[r]=i.split(","),t[r][0]=Math.round((this.decodeNumber(t[r][0],e)+n[0])*o)/o,t[r][1]=Math.round((this.decodeNumber(t[r][1],e)+n[1])*o)/o,t[r].length>2&&(t[r][2]=Math.round((this.decodeNumber(t[r][2],2)+n[2])*o)/o),t[r].length>3&&(t[r][3]=Math.round((this.decodeNumber(t[r][3],0)+n[3])*o)/o),n=t[r]}).bind(this)),t}if(!t.length)return[0,0];var a=[];for(i=0;i<t.length;i++)a[i]=this.decodeCoordinates(t[i],e);return a}writeFeaturesObject(t,e){e=e||{},this._count=0,this._hash={};var i=(0,r.default).prototype.writeFeaturesObject.call(this,t,e);i.decimals=this._decimals,i.hashProperties=[],Object.keys(this._hash).forEach((function(t){i.hashProperties.push(t)}).bind(this)),this._count=0,this._hash={};var o=i.features;return delete i.features,i.features=o,i}writeFeatureObject(t,e){var i,o=(0,r.default).prototype.writeFeatureObject.call(this,t,e);if("Feature"!==o.type)throw"GeoJSONX doesn't support "+o.type+".";var n=[];if("Point"===o.geometry.type)n.push(this.encodeCoordinates(o.geometry.coordinates,this._decimals));else if("MultiPoint"===o.geometry.type){var a=[];o.geometry.coordinates.forEach((function(t){a.push(this.encodeCoordinates(t,this._decimals))}).bind(this)),n.push([this._type[o.geometry.type],a.join(";")])}else{if(!this._type[o.geometry.type])throw"GeoJSONX doesn't support "+o.geometry.type+".";n.push([this._type[o.geometry.type],this.encodeCoordinates(o.geometry.coordinates,this._decimals)])}var s=[];for(i in o.properties)!(!this._whiteList(i)||this._blackList(i))&&(!this._hash.hasOwnProperty(i)&&(this._hash[i]=this._count,this._count++),(!this._deleteNull||0>this._deleteNull.indexOf(o.properties[i]))&&s.push(this._hash[i],o.properties[i]));if((s.length||this._extended)&&n.push(s),this._extended){var l=!1;for(i in s={},o)/^type$|^geometry$|^properties$/.test(i)||(s[i]=o[i],l=!0);l&&n.push(s)}return n}writeGeometryObject(t,e){var i=(0,r.default).prototype.writeGeometryObject.call(this,t,e);return"Point"===i.type?this.encodeCoordinates(i.coordinates,this._decimals):[this._type[i.type],this.encodeCoordinates(i.coordinates,this._decimals)]}readFeaturesFromObject(t,e){if(this._hashProperties=t.hashProperties||[],(e=e||{}).decimals=parseInt(t.decimals),!e.decimals&&0!==e.decimals)throw"Bad file format...";return(0,r.default).prototype.readFeaturesFromObject.call(this,t,e)}readFeatureFromObject(t,e){var i={type:"Feature"};if("string"==typeof t[0])i.geometry={type:"Point",coordinates:this.decodeCoordinates(t[0],"number"==typeof e.decimals?e.decimals:this.decimals)};else if(i.geometry={type:this._toType[t[0][0]]},"MultiPoint"===i.geometry.type){var o=i.geometry.coordinates=[];t[0][1].split(";").forEach((function(t){t=t.split(","),o.push([this.decodeNumber(t[0],e.decimals),this.decodeNumber(t[1],e.decimals)])}).bind(this))}else i.geometry.coordinates=this.decodeCoordinates(t[0][1],"number"==typeof e.decimals?e.decimals:this.decimals);if(this._hashProperties&&t[1]){i.properties={};for(var n=t[1],a=0;a<n.length;a+=2)i.properties[this._hashProperties[n[a]]]=n[a+1]}else i.properties=t[1];if(t[2])for(var s in t[2])i[s]=t[2][s];return(0,r.default).prototype.readFeatureFromObject.call(this,i,e)}};o.prototype._radix="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/ !#$%&'()*-.:<=>?@[]^_`{|}~",o.prototype._size=o.prototype._radix.length,o.prototype._type={Point:0,LineString:1,Polygon:2,MultiPoint:3,MultiLineString:4,MultiPolygon:5,GeometryCollection:null},o.prototype._toType=["Point","LineString","Polygon","MultiPoint","MultiLineString","MultiPolygon"];var a=o}),a("de6E4",function(t,i){e(t.exports,"default",()=>l);var r=n("dMe05"),o=n("2RsmU"),a=n("5TDW7");class s extends a.default{constructor(){super()}}s.prototype.read=function(t){if("GeoImage"!==t.type)return!1;var e=new o.default({url:t.url,imageCenter:t.imageCenter,imageRotate:t.imageRotate,imageScale:t.imageScale,imageMask:t.imageMask,crossOrigin:t.crossOrigin}),i=new r.default({source:e});return this.readOptions(i,t),i},s.prototype.write=function(t){return"GeoImage"===t.get("type")&&this.writeOptions(t,{url:t.getSource().getGeoImage().src,imageCenter:t.getSource().getCenter(),imageRotate:t.getSource().getRotation(),imageScale:t.getSource().getScale(),imageMask:t.getSource().getMask(),crossOrigin:t.getSource().getGeoImage().crossOrigin})};var l=s}),a("2RsmU",function(t,i){e(t.exports,"default",()=>s);var r=n("9brqU"),o=n("cgPpQ"),a=n("jZquI"),s=class extends r.default{constructor(t){var e={attributions:t.attributions,logo:t.logo,projection:t.projection};e.canvasFunction=function(t,e,i,r){return this.calculateImage(t,e,i,r)},super(e),this._image=t.image?t.image:new Image,this._image.crossOrigin=t.crossOrigin,this._image.onload=(function(){this.setCrop(this.crop),this.changed()}).bind(this),t.image||(this._image.src=t.url),this.center=t.imageCenter,this.setScale(t.imageScale),this.rotate=t.imageRotate?t.imageRotate:0,this.crop=t.imageCrop,this.mask=t.imageMask,this.setCrop(this.crop),this.on("change",(function(){this.set("extent",this.calculateExtent())}).bind(this))}calculateImage(t,e,i,r){if(this.center){var o=document.createElement("canvas");o.width=r[0],o.height=r[1];var n=o.getContext("2d");if(!this._imageSize)return o;if(this.mask){n.beginPath();var a=d(this.mask[0]);n.moveTo(a[0],a[1]);for(var s=1;s<this.mask.length;s++)a=d(this.mask[s]),n.lineTo(a[0],a[1]);n.clip()}var l=d(this.center),h=(this._image.naturalWidth/2-this.crop[0])*this.scale[0]/e*i,u=(this._image.naturalHeight/2-this.crop[1])*this.scale[1]/e*i,c=this._imageSize[0]*this.scale[0]/e*i,f=this._imageSize[1]*this.scale[1]/e*i;return n.translate(l[0],l[1]),this.rotate&&n.rotate(this.rotate),n.drawImage(this._image,this.crop[0],this.crop[1],this._imageSize[0],this._imageSize[1],-h,-u,c,f),o}function d(e){return[(e[0]-t[0])/(t[2]-t[0])*r[0],(e[1]-t[3])/(t[1]-t[3])*r[1]]}}getCenter(){return this.center}setCenter(t){this.center=t,this.changed()}getScale(){return this.scale}setScale(t){switch(typeof t){case"number":t=[t,t];break;case"object":if(2!=t.length)return;break;default:return}this.scale=t,this.changed()}getRotation(){return this.rotate}setRotation(t){this.rotate=t,this.changed()}getGeoImage(){return this._image}getCrop(){return this.crop}setMask(t){this.mask=t,this.changed()}getMask(){return this.mask}setCrop(t){if(!this._image.naturalWidth){this.crop=t;return}if(t){switch(typeof t){case"number":t=[t,t,this._image.naturalWidth-t,this._image.naturalHeight-t];break;case"object":if(4!=t.length)return;break;default:return}t=(0,a.boundingExtent)([[t[0],t[1]],[t[2],t[3]]]),this.crop=[Math.max(0,t[0]),Math.max(0,t[1]),Math.min(this._image.naturalWidth,t[2]),Math.min(this._image.naturalHeight,t[3])]}else this.crop=[0,0,this._image.naturalWidth,this._image.naturalHeight];this.crop[2]<=this.crop[0]&&(this.crop[2]=this.crop[0]+1),this.crop[3]<=this.crop[1]&&(this.crop[3]=this.crop[1]+1),this._imageSize=[this.crop[2]-this.crop[0],this.crop[3]-this.crop[1]],this.changed()}getExtent(t){var e=this.get("extent");if(e||(e=this.calculateExtent()),t)for(var i=0;i<t.length;i++)t[i]=e[i];return e}calculateExtent(t){if(!1!==t&&this.getMask())e=new o.default([this.getMask()]);else{var e,i=this.getCenter(),r=this.getScale(),n=this.getGeoImage().width*r[0],s=this.getGeoImage().height*r[1],l=(0,a.boundingExtent)([[i[0]-n/2,i[1]-s/2],[i[0]+n/2,i[1]+s/2]]);(e=(0,o.fromExtent)(l)).rotate(-this.getRotation(),i)}return e.getExtent()}}}),a("9brqU",function(t,i){e(t.exports,"default",()=>l);var r=n("34ffr"),o=n("3i1Ma"),a=n("jZquI");class s extends o.default{constructor(t){t=t||{},super({attributions:t.attributions,interpolate:t.interpolate,projection:t.projection,resolutions:t.resolutions,state:t.state}),this.canvasFunction_=t.canvasFunction,this.canvas_=null,this.renderedRevision_=0,this.ratio_=void 0!==t.ratio?t.ratio:1.5}getImageInternal(t,e,i,o){e=this.findNearestResolution(e);let n=this.canvas_;if(n&&this.renderedRevision_==this.getRevision()&&n.getResolution()==e&&n.getPixelRatio()==i&&(0,a.containsExtent)(n.getExtent(),t))return n;t=t.slice(),(0,a.scaleFromCenter)(t,this.ratio_);let s=[(0,a.getWidth)(t)/e*i,(0,a.getHeight)(t)/e*i],l=this.canvasFunction_.call(this,t,e,i,s,o);return l&&(n=new r.default(t,e,i,l)),this.canvas_=n,this.renderedRevision_=this.getRevision(),n}}var l=s}),a("3i1Ma",function(t,i){e(t.exports,"getRequestExtent",()=>v),e(t.exports,"default",()=>b);var r=n("iTTi2"),o=n("cw4dl"),a=n("50PZ9"),s=n("kUxvm"),l=n("kRXzy"),h=n("205E0"),u=n("fqTWj"),c=n("a6roo"),f=n("jZquI"),d=n("gzr8q"),p=n("djufG"),g=n("kBSVF");let m={IMAGELOADSTART:"imageloadstart",IMAGELOADEND:"imageloadend",IMAGELOADERROR:"imageloaderror"};class y extends r.default{constructor(t,e){super(t),this.image=e}}class x extends h.default{constructor(t){super({attributions:t.attributions,projection:t.projection,state:t.state,interpolate:void 0===t.interpolate||t.interpolate}),this.on,this.once,this.un,this.loader=t.loader||null,this.resolutions_=void 0!==t.resolutions?t.resolutions:null,this.reprojectedImage_=null,this.reprojectedRevision_=0,this.image=null,this.wantedExtent_,this.wantedResolution_,this.static_=!!t.loader&&0===t.loader.length,this.wantedProjection_=null}getResolutions(){return this.resolutions_}setResolutions(t){this.resolutions_=t}findNearestResolution(t){let e=this.getResolutions();if(e){let i=(0,g.linearFindNearest)(e,t,0);t=e[i]}return t}getImage(t,e,i,r){let o=this.getProjection();if(!o||!r||(0,d.equivalent)(o,r))return o&&(r=o),this.getImageInternal(t,e,i,r);if(this.reprojectedImage_){if(this.reprojectedRevision_==this.getRevision()&&(0,d.equivalent)(this.reprojectedImage_.getProjection(),r)&&this.reprojectedImage_.getResolution()==e&&(0,f.equals)(this.reprojectedImage_.getExtent(),t))return this.reprojectedImage_;this.reprojectedImage_.dispose(),this.reprojectedImage_=null}return this.reprojectedImage_=new l.default(o,r,t,e,i,(t,e,i)=>this.getImageInternal(t,e,i,o),this.getInterpolate()),this.reprojectedRevision_=this.getRevision(),this.reprojectedImage_}getImageInternal(t,e,i,r){if(this.loader){let n=v(t,e,i,1),a=this.findNearestResolution(e);if(this.image&&(this.static_||this.wantedProjection_===r&&(this.wantedExtent_&&(0,f.containsExtent)(this.wantedExtent_,n)||(0,f.containsExtent)(this.image.getExtent(),n))&&(this.wantedResolution_&&(0,p.fromResolutionLike)(this.wantedResolution_)===a||(0,p.fromResolutionLike)(this.image.getResolution())===a)))return this.image;this.wantedProjection_=r,this.wantedExtent_=n,this.wantedResolution_=a,this.image=new s.default(n,a,i,this.loader),this.image.addEventListener(o.default.CHANGE,this.handleImageChange.bind(this))}return this.image}handleImageChange(t){let e;let i=t.target;switch(i.getState()){case a.default.LOADING:this.loading=!0,e=m.IMAGELOADSTART;break;case a.default.LOADED:this.loading=!1,e=m.IMAGELOADEND;break;case a.default.ERROR:this.loading=!1,e=m.IMAGELOADERROR;break;default:return}this.hasListener(e)&&this.dispatchEvent(new y(e,i))}}function v(t,e,i,r){let o=e/i,n=(0,f.getCenter)(t),a=(0,c.ceil)((0,f.getWidth)(t)/o,u.DECIMALS),s=(0,c.ceil)((0,f.getHeight)(t)/o,u.DECIMALS),l=(0,c.ceil)((r-1)*a/2,u.DECIMALS),h=(0,c.ceil)((r-1)*s/2,u.DECIMALS);return(0,f.getForViewAndSize)(n,o,0,[a+2*l,s+2*h])}var b=x}),a("kRXzy",function(t,i){e(t.exports,"default",()=>p);var r=n("9ndmc"),o=n("cw4dl"),a=n("50PZ9"),s=n("kUxvm"),l=n("9JHmh"),h=n("gpSXC"),u=n("djufG"),c=n("jZquI"),f=n("bsgMw");class d extends s.default{constructor(t,e,i,o,n,s,u){let f=t.getExtent();f&&t.canWrapX()&&((f=f.slice())[0]=-1/0,f[2]=1/0);let d=e.getExtent();d&&e.canWrapX()&&((d=d.slice())[0]=-1/0,d[2]=1/0);let p=d?(0,c.getIntersection)(i,d):i,g=(0,c.getCenter)(p),m=(0,h.calculateSourceResolution)(t,e,g,o),y=r.ERROR_THRESHOLD,x=new l.default(t,e,p,f,m*y,o),v=x.calculateSourceExtent(),b=(0,c.isEmpty)(v)?null:s(v,m,n),w=b?a.default.IDLE:a.default.EMPTY,_=b?b.getPixelRatio():1;super(i,o,_,w),this.targetProj_=e,this.maxSourceExtent_=f,this.triangulation_=x,this.targetResolution_=o,this.targetExtent_=i,this.sourceImage_=b,this.sourcePixelRatio_=_,this.interpolate_=u,this.canvas_=null,this.sourceListenerKey_=null}disposeInternal(){this.state==a.default.LOADING&&this.unlistenSource_(),super.disposeInternal()}getImage(){return this.canvas_}getProjection(){return this.targetProj_}reproject_(){let t=this.sourceImage_.getState();if(t==a.default.LOADED){let t=(0,c.getWidth)(this.targetExtent_)/this.targetResolution_,e=(0,c.getHeight)(this.targetExtent_)/this.targetResolution_;this.canvas_=(0,h.render)(t,e,this.sourcePixelRatio_,(0,u.fromResolutionLike)(this.sourceImage_.getResolution()),this.maxSourceExtent_,this.targetResolution_,this.targetExtent_,this.triangulation_,[{extent:this.sourceImage_.getExtent(),image:this.sourceImage_.getImage()}],0,void 0,this.interpolate_,!0)}this.state=t,this.changed()}load(){if(this.state==a.default.IDLE){this.state=a.default.LOADING,this.changed();let t=this.sourceImage_.getState();t==a.default.LOADED||t==a.default.ERROR?this.reproject_():(this.sourceListenerKey_=(0,f.listen)(this.sourceImage_,o.default.CHANGE,function(t){let e=this.sourceImage_.getState();(e==a.default.LOADED||e==a.default.ERROR)&&(this.unlistenSource_(),this.reproject_())},this),this.sourceImage_.load())}}unlistenSource_(){(0,f.unlistenByKey)(this.sourceListenerKey_),this.sourceListenerKey_=null}}var p=d}),a("fqTWj",function(t,i){e(t.exports,"DECIMALS",()=>r);let r=4}),a("cBppj",function(t,i){e(t.exports,"default",()=>f);var r=n("5TDW7"),o=n("adu8e"),a=n("iGyOD"),s=n("bXE6B"),l=n("5mw1t"),h=n("23ytq");n("lMv07");var u=n("2tVQX");class c extends r.default{constructor(){super()}}c.prototype.read=function(t){if("Statistique"!==t.type)return;let e=[];t.data?e=new l.default().readFeaturesFromObject(t.data):t.features.forEach(t=>{let i=new a.default((0,h.ol_geom_createFromType)(t.type,t.coords));i.setProperties(t.attributes),e.push(i)});let i=new o.default;i.addFeatures(e);let r=new s.default({source:i});return void 0===t.selectable&&(t.selectable=!1),this.readOptions(r,t),r.setStatistic(t.stat),t.popupContent&&r.setPopupContent(t.popupContent),r},c.prototype.write=function(t,e){if(!(t instanceof s.default))return!1;var i=this.writeOptions(t,{type:"Statistique"});i.stat=t.getStatistic(),1===i.stat.cols.length&&i.stat.cols.push(i.stat.cols[0]),i.popupContent=t.getPopupContent();let r=t.getSource().getFeatures();if(e)i.features=[],r.forEach(t=>{let e={type:t.getGeometry().getType(),coords:(0,u.default)(t.getGeometry().getCoordinates()),attributes:t.getProperties()};delete e.attributes[t.getGeometryName()],i.features.push(e)});else{let t=new l.default({decimals:3});i.data=t.writeFeaturesObject(r)}return i};var f=c}),a("adu8e",function(t,i){e(t.exports,"default",()=>E);var r=n("31ZqB"),o=n("eHnTw"),a=n("iTTi2"),s=n("cw4dl"),l=n("5dXmB"),h=n("9iujS"),u=n("29SgV"),c=n("205E0"),f=n("gKdkP"),d=n("eQaCk"),p=n("gmEQj"),g=n("eJ4LZ"),m=n("jZquI"),y=n("kBSVF"),x=n("lVQul"),v=n("kKEgb"),b=n("bsgMw"),w=n("kWPIP");class _ extends a.default{constructor(t,e,i){super(t),this.feature=e,this.features=i}}class S extends c.default{constructor(t){let e,i;t=t||{},super({attributions:t.attributions,interpolate:!0,projection:void 0,state:"ready",wrapX:void 0===t.wrapX||t.wrapX}),this.on,this.once,this.un,this.loader_=d.VOID,this.format_=t.format,this.overlaps_=void 0===t.overlaps||t.overlaps,this.url_=t.url,void 0!==t.loader?this.loader_=t.loader:void 0!==this.url_&&((0,g.assert)(this.format_,"`format` must be set when `url` is set"),this.loader_=(0,w.xhr)(this.url_,this.format_)),this.strategy_=void 0!==t.strategy?t.strategy:p.all;let o=void 0===t.useSpatialIndex||t.useSpatialIndex;this.featuresRtree_=o?new h.default:null,this.loadedExtentsRtree_=new h.default,this.loadingExtentsCount_=0,this.nullGeometryFeatures_={},this.idIndex_={},this.uidIndex_={},this.featureChangeKeys_={},this.featuresCollection_=null,Array.isArray(t.features)?i=t.features:t.features&&(i=(e=t.features).getArray()),o||void 0!==e||(e=new r.default(i)),void 0!==i&&this.addFeaturesInternal(i),void 0!==e&&this.bindFeaturesCollection_(e)}addFeature(t){this.addFeatureInternal(t),this.changed()}addFeatureInternal(t){let e=(0,x.getUid)(t);if(!this.addToIndex_(e,t)){this.featuresCollection_&&this.featuresCollection_.remove(t);return}this.setupChangeEvents_(e,t);let i=t.getGeometry();if(i){let e=i.getExtent();this.featuresRtree_&&this.featuresRtree_.insert(e,t)}else this.nullGeometryFeatures_[e]=t;this.dispatchEvent(new _(f.default.ADDFEATURE,t))}setupChangeEvents_(t,e){e instanceof u.default||(this.featureChangeKeys_[t]=[(0,b.listen)(e,s.default.CHANGE,this.handleFeatureChange_,this),(0,b.listen)(e,l.default.PROPERTYCHANGE,this.handleFeatureChange_,this)])}addToIndex_(t,e){let i=!0;if(void 0!==e.getId()){let t=String(e.getId());if(t in this.idIndex_){if(e instanceof u.default){let r=this.idIndex_[t];r instanceof u.default?Array.isArray(r)?r.push(e):this.idIndex_[t]=[r,e]:i=!1}else i=!1}else this.idIndex_[t]=e}return i&&((0,g.assert)(!(t in this.uidIndex_),"The passed `feature` was already added to the source"),this.uidIndex_[t]=e),i}addFeatures(t){this.addFeaturesInternal(t),this.changed()}addFeaturesInternal(t){let e=[],i=[],r=[];for(let e=0,r=t.length;e<r;e++){let r=t[e],o=(0,x.getUid)(r);this.addToIndex_(o,r)&&i.push(r)}for(let t=0,o=i.length;t<o;t++){let o=i[t],n=(0,x.getUid)(o);this.setupChangeEvents_(n,o);let a=o.getGeometry();if(a){let t=a.getExtent();e.push(t),r.push(o)}else this.nullGeometryFeatures_[n]=o}if(this.featuresRtree_&&this.featuresRtree_.load(e,r),this.hasListener(f.default.ADDFEATURE))for(let t=0,e=i.length;t<e;t++)this.dispatchEvent(new _(f.default.ADDFEATURE,i[t]))}bindFeaturesCollection_(t){let e=!1;this.addEventListener(f.default.ADDFEATURE,function(i){e||(e=!0,t.push(i.feature),e=!1)}),this.addEventListener(f.default.REMOVEFEATURE,function(i){e||(e=!0,t.remove(i.feature),e=!1)}),t.addEventListener(o.default.ADD,t=>{e||(e=!0,this.addFeature(t.element),e=!1)}),t.addEventListener(o.default.REMOVE,t=>{e||(e=!0,this.removeFeature(t.element),e=!1)}),this.featuresCollection_=t}clear(t){if(t){for(let t in this.featureChangeKeys_)this.featureChangeKeys_[t].forEach(b.unlistenByKey);this.featuresCollection_||(this.featureChangeKeys_={},this.idIndex_={},this.uidIndex_={})}else if(this.featuresRtree_)for(let t in this.featuresRtree_.forEach(t=>{this.removeFeatureInternal(t)}),this.nullGeometryFeatures_)this.removeFeatureInternal(this.nullGeometryFeatures_[t]);this.featuresCollection_&&this.featuresCollection_.clear(),this.featuresRtree_&&this.featuresRtree_.clear(),this.nullGeometryFeatures_={};let e=new _(f.default.CLEAR);this.dispatchEvent(e),this.changed()}forEachFeature(t){if(this.featuresRtree_)return this.featuresRtree_.forEach(t);this.featuresCollection_&&this.featuresCollection_.forEach(t)}forEachFeatureAtCoordinateDirect(t,e){let i=[t[0],t[1],t[0],t[1]];return this.forEachFeatureInExtent(i,function(i){let r=i.getGeometry();if(r instanceof u.default||r.intersectsCoordinate(t))return e(i)})}forEachFeatureInExtent(t,e){if(this.featuresRtree_)return this.featuresRtree_.forEachInExtent(t,e);this.featuresCollection_&&this.featuresCollection_.forEach(e)}forEachFeatureIntersectingExtent(t,e){return this.forEachFeatureInExtent(t,function(i){let r=i.getGeometry();if(r instanceof u.default||r.intersectsExtent(t)){let t=e(i);if(t)return t}})}getFeaturesCollection(){return this.featuresCollection_}getFeatures(){let t;return this.featuresCollection_?t=this.featuresCollection_.getArray().slice(0):this.featuresRtree_&&(t=this.featuresRtree_.getAll(),(0,v.isEmpty)(this.nullGeometryFeatures_)||(0,y.extend)(t,Object.values(this.nullGeometryFeatures_))),t}getFeaturesAtCoordinate(t){let e=[];return this.forEachFeatureAtCoordinateDirect(t,function(t){e.push(t)}),e}getFeaturesInExtent(t,e){return this.featuresRtree_?e&&e.canWrapX()&&this.getWrapX()?[].concat(...(0,m.wrapAndSliceX)(t,e).map(t=>this.featuresRtree_.getInExtent(t))):this.featuresRtree_.getInExtent(t):this.featuresCollection_?this.featuresCollection_.getArray().slice(0):[]}getClosestFeatureToCoordinate(t,e){let i=t[0],r=t[1],o=null,n=[NaN,NaN],a=1/0,s=[-1/0,-1/0,1/0,1/0];return e=e||d.TRUE,this.featuresRtree_.forEachInExtent(s,function(t){if(e(t)){let e=t.getGeometry(),l=a;if((a=e instanceof u.default?0:e.closestPointXY(i,r,n,a))<l){o=t;let e=Math.sqrt(a);s[0]=i-e,s[1]=r-e,s[2]=i+e,s[3]=r+e}}}),o}getExtent(t){return this.featuresRtree_.getExtent(t)}getFeatureById(t){let e=this.idIndex_[t.toString()];return void 0!==e?e:null}getFeatureByUid(t){let e=this.uidIndex_[t];return void 0!==e?e:null}getFormat(){return this.format_}getOverlaps(){return this.overlaps_}getUrl(){return this.url_}handleFeatureChange_(t){let e=t.target,i=(0,x.getUid)(e),r=e.getGeometry();if(r){let t=r.getExtent();i in this.nullGeometryFeatures_?(delete this.nullGeometryFeatures_[i],this.featuresRtree_&&this.featuresRtree_.insert(t,e)):this.featuresRtree_&&this.featuresRtree_.update(t,e)}else i in this.nullGeometryFeatures_||(this.featuresRtree_&&this.featuresRtree_.remove(e),this.nullGeometryFeatures_[i]=e);let o=e.getId();if(void 0!==o){let t=o.toString();this.idIndex_[t]!==e&&(this.removeFromIdIndex_(e),this.idIndex_[t]=e)}else this.removeFromIdIndex_(e),this.uidIndex_[i]=e;this.changed(),this.dispatchEvent(new _(f.default.CHANGEFEATURE,e))}hasFeature(t){let e=t.getId();return void 0!==e?e in this.idIndex_:(0,x.getUid)(t) in this.uidIndex_}isEmpty(){return this.featuresRtree_?this.featuresRtree_.isEmpty()&&(0,v.isEmpty)(this.nullGeometryFeatures_):!this.featuresCollection_||0===this.featuresCollection_.getLength()}loadFeatures(t,e,i){let r=this.loadedExtentsRtree_,o=this.strategy_(t,e,i);for(let t=0,n=o.length;t<n;++t){let n=o[t];r.forEachInExtent(n,function(t){return(0,m.containsExtent)(t.extent,n)})||(++this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADSTART)),this.loader_.call(this,n,e,i,t=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADEND,void 0,t))},()=>{--this.loadingExtentsCount_,this.dispatchEvent(new _(f.default.FEATURESLOADERROR))}),r.insert(n,{extent:n.slice()}))}this.loading=!(this.loader_.length<4)&&this.loadingExtentsCount_>0}refresh(){this.clear(!0),this.loadedExtentsRtree_.clear(),super.refresh()}removeLoadedExtent(t){let e;let i=this.loadedExtentsRtree_;i.forEachInExtent(t,function(i){if((0,m.equals)(i.extent,t))return e=i,!0}),e&&i.remove(e)}removeFeature(t){if(!t)return;let e=(0,x.getUid)(t);e in this.nullGeometryFeatures_?delete this.nullGeometryFeatures_[e]:this.featuresRtree_&&this.featuresRtree_.remove(t),this.removeFeatureInternal(t)&&this.changed()}removeFeatureInternal(t){let e=(0,x.getUid)(t),i=this.featureChangeKeys_[e];if(!i)return;i.forEach(b.unlistenByKey),delete this.featureChangeKeys_[e];let r=t.getId();return void 0!==r&&delete this.idIndex_[r.toString()],delete this.uidIndex_[e],this.dispatchEvent(new _(f.default.REMOVEFEATURE,t)),t}removeFromIdIndex_(t){let e=!1;for(let i in this.idIndex_){let r=this.idIndex_[i];if(t instanceof u.default&&Array.isArray(r)&&r.includes(t))r.splice(r.indexOf(t),1);else if(this.idIndex_[i]===t){delete this.idIndex_[i],e=!0;break}}return e}setLoader(t){this.loader_=t}setUrl(t){(0,g.assert)(this.format_,"`format` must be set when `url` is set"),this.url_=t,this.setLoader((0,w.xhr)(t,this.format_))}}var E=S}),a("bXE6B",function(i,r){e(i.exports,"default",()=>N),n("eXEIX");var o=n("j2K3b"),a=n("hvEnP"),s=n("cgPpQ"),l=n("iGyOD"),h=n("20LS2"),u=n("7qsnY"),c=n("8WefF"),f=n("3VGVQ"),d=n("l9IGS"),p=n("2zf1Y"),g=n("d5AAH"),m=n("4lFOe"),y=n("lqNjm"),x=n("aUPR1"),v=n("h1ihb"),b=n("8SYbd"),w=n("jPVWI"),_=n("hThUZ"),S=n("cHblF");n("cWXYt");var E=n("hwcfb");class A extends f.default{constructor(t){super(t=t||{});var e=this;this.set("type","Statistique"),this.set("sort",!1!==t.sort),this.vectorSource=t.source||new h.default,this.typeGeom=t.typeGeom||{};var i=this.vectorSource.clear;this.vectorSource.clear=function(){e.typeGeom={},i.call(this)},this.vectorSource.on("addfeature",t=>{this.typeGeom[t.feature.getGeometry().getType()]=!0}),this.vectorSource.on("addfeature",t=>{t.feature._layer=this}),this.vectorSource.getFeatures().forEach(t=>{t._layer=this,this.typeGeom[t.getGeometry().getType()]=!0}),this.vectorSource.on("removefeature",(function(t){delete t.feature._layer}).bind(this)),this.layerStat=new u.default({source:this.vectorSource,displayInLayerSwitcher:!1}),this.layerStat.selectable=()=>this.selectable(),this.layerHeat=new c.default({source:this.vectorSource,visible:!1,displayInLayerSwitcher:!1,radius:5,blur:15}),this.getLayers().push(this.layerStat),this.getLayers().push(this.layerHeat),["layerStat","layerHeat"].forEach(t=>{let e=this[t];e.on(["filter","change:visible"],()=>{setTimeout(()=>{if(this._mcFilter&&e.getVisible()){let t=document.body.querySelector(".ol-viewport .ol-layers ."+e.getClassName());if(t){let e=[],i=[];this._mcFilter.get("filter")&&e.push(this._mcFilter.get("filter")),this._mcFilter.get("blend")&&i.push(this._mcFilter.get("blend")),t.style.filter=e.join(" "),t.style.mixBlendMode=i.join(" ")}}})}),this.on("change:visible",()=>e.dispatchEvent("filter"))}),this.defaultStyle={fill:new p.default({color:"rgba(255,255,255,0.4)"}),stroke:new g.default({color:"#3399CC",width:1.25}),whiteStroke:new g.default({color:"#fff",width:1.25})},this.defaultStyle.style=new d.default({image:new m.default({fill:this.defaultStyle.fill,stroke:this.defaultStyle.stroke,radius:5}),fill:this.defaultStyle.fill,stroke:this.defaultStyle.stroke}),this.defaultStyle.area=new d.default({fill:this.defaultStyle.fill,stroke:this.defaultStyle.stroke})}}A.prototype.getPopupContent=function(t){return t?t.getPopupContent(this._popupContent||{}):this._popupContent||{}},A.prototype.setPopupContent=function(t){!t||t instanceof Array?this._popupContent={}:this._popupContent=t},A.prototype.getSource=function(){return this.vectorSource},A.prototype.setComposite=function(t){this.setBlendMode(t?"multiply":void 0)},A.prototype.isGeom=function(t){switch(t){case"Point":return this.typeGeom.Point||this.typeGeom.MultiPoint;case"Polygon":return this.typeGeom.Polygon||this.typeGeom.MultiPolygon;case"Line":return this.typeGeom.LineString||this.typeGeom.MultiLineString;default:return!1}},A.prototype._getStyle=function(t){t||(t=this.stat);var e=this;function i(t){var e=t._interiorPoint;return e||(e=(0,_.default)(t.getGeometry()),t._interiorPoint=e),e}t||(t={});var r={},o=this.isGeom("Polygon"),n=this.isGeom("Point"),a=this.isGeom("Line");return function(s){if(!t.color&&!t.colors)return[e.defaultStyle.style];var l,h,u,c,f,b,w,_=t.cols[0];switch(t.typeMap){case"sectoriel":if(!(l=s._stat?t.radius(s._stat.sum):void 0))return[e.defaultStyle.style];return(h=r[l+"-"+s._stat.data.join("-")])||(h=[],t.stroke&&(b=new g.default({color:!0===t.stroke?"#3399CC":t.stroke,width:1.25}),h.push(new d.default({stroke:b}))),h.push(new d.default({image:new x.default({type:t.chartType,radius:l,data:s._stat.data||[],colors:t.colors,stroke:new g.default({color:"neon"==t.colors?"#000":"#fff",width:2})}),geometry:i(s)}))),h;case"symbol":{u=parseFloat(s.get(_)),(c=t.color(u).rgb()).push(t.alpha);let x=(a?"symboline-":"symbol-")+c+"-"+(l=t.radius(u).toFixed(2))+(t.stroke?"-1":"-0");return(h=r[x])||(l=t.radius(u),o||n?(f=new p.default({color:c}),b=null,h=r[x]=[],t.stroke&&(b=new g.default({color:!0===t.stroke?"#3399CC":t.stroke,width:1.25}),h.push(new d.default({stroke:b}))),t.symbol&&"ign-form-rond"!=t.symbol?(b=e.defaultStyle.whiteStroke,w=new v.default({glyph:t.symbol,fill:f,stroke:b,radius:l}),s.setIgnStyle({pointRadius:l,pointGlyph:t.symbol,pointColor:b?(0,y.asString)(b.getColor()):null,symbolColor:f?(0,y.asString)(f.getColor()):"rgba(0,0,0,0)"})):w=new m.default({fill:f,stroke:b,radius:l}),h.push(new d.default({image:w,zIndex:t.rmax-l,geometry:i}))):h=a?r[x]=[new d.default({stroke:new g.default({width:l,color:c,zIndex:t.rmax-l})})]:r[x]=[e.defaultStyle.style]),h}default:{u="categorie"===t.typeMap?s.get(_):parseFloat(s.get(_));let i=(a?"line-":"")+(c=t.color(u).rgb()).join("-")+(t.stroke?"-1":"-0");return(h=r[i])||(o||n?(f=new p.default({color:c}),b=t.stroke?new g.default({color:!0===t.stroke?"#3399CC":t.stroke,width:1.25}):void 0,h=r[i]=[new d.default({image:new m.default({fill:f,stroke:b,radius:5}),fill:f,stroke:b})]):h=a?r[i]=[new d.default({stroke:new g.default({color:c,width:3})})]:[e.defaultStyle.style]),h}}}},A.prototype.getStatistic=function(){return this._cloneStatistic(this.stat)},A.prototype._cloneStatistic=function(t){t=t||{};let e=this.stat||{};return{typeMap:t.typeMap||e.typeMap||"choroplethe",cols:(t.cols||e.cols||[]).slice(),mode:t.mode||e.mode||"q",nbClass:t.nbClass||e.nbClass||5,symbol:t.symbol||e.symbol||"",rmin:t.rmin||e.rmin||3,rmax:t.rmax||e.rmax||20,rProp:t.rProp||e.rProp||"length",stroke:void 0===t.stroke?void 0===e.stroke||e.stroke:t.stroke,limits:(t.limits||e.limits||[]).slice(),alpha:t.alpha||e.alpha||1,chartType:t.chartType||e.chartType||"pie",hradius:t.hradius||e.hradius||5,hblur:t.hblur||e.hblur||15,brewerColors:(t.brewerColors||e.brewerColors||[]).slice()}},A.prototype.setStatistic=function(e,i){if(i){this.dispatchEvent({type:"stat:start"}),setTimeout(()=>this.setStatistic(e),i);return}if(this.stat=e=this._cloneStatistic(e),this.layerHeat.setVisible("heatmap"===e.typeMap),this.layerStat.setVisible("heatmap"!==e.typeMap),"heatmap"===e.typeMap&&!this.typeGeom.Point)return this.dispatchEvent({type:"stat:end",error:!0,status:"HEATPTS",statusText:"Une heatmap nécessite une couche contenant des points..."}),!1;let r=e.min=1/0,o=e.max=-1/0;e.values={att:e.cols[0],length:0,val:{}};let n=this.vectorSource.getFeatures();switch(e.typeMap){case"categorie":if(e.cols.length){var a,s,l,h,u=e.cols[0];if(-1!=u){l={},n.forEach(t=>{l[t.get(u)]=!0});var c=Object.keys(l),f=c.length;if(this.get("sort"))for(c.sort((t,e)=>(/^-?\d+$/.test(t)&&(t=parseInt(t)),/^-?\d+$/.test(e)&&(e=parseInt(e)),t<e?-1:t>e?1:0)),l={},s=0;s<f;s++)l[c[s]]=s;e.values={att:u,length:f,val:l}}}e.limits=[];break;case"sectoriel":var d=e.cols;for(a=0;a<n.length;a++){var p=[],g=0;for(s=0;s<d.length;s++){var m=Number(n[a].get(d[s]));g+=m,p.push(m)}o=Math.max(o,g),r=Math.min(r,g),n[a]._stat={data:p,sum:g}}e.limits=[];break;default:for(a=0,l=[];a<n.length;a++){var y=n[a].get(e.cols[0]);y&&!isNaN(h=parseFloat(y))&&(l.push(h),n[a]._stat={},e.max=o=Math.max(o,h),e.min=r=Math.min(r,h))}"c"===e.mode?e.limits||(e.limits=this.limits(e,l)):(/^(q|l|k|e)/.test(e.mode)||(e.mode="q"),e.limits=this.limits(e,l))}if(e.min=r,e.max=o,this._values=l,this.stat.values.length>110)return this.dispatchEvent({type:"stat:end",error:!0,status:"MAXVAL",statusText:"Trop de valeur différentes pour calculer une statistique."}),!1;switch(e.typeMap){case"sectoriel":e.colors=e.brewerColors;break;case"categorie":{let i=e.brewerColors;e.values.length?e.color=function(r){return t(b)(i[e.values.val[r]]||"#aaa")}:e.color=function(){return t(b)("#ccc")};break}default:if(e.limits&&e.limits.length){let i=e.brewerColors;e.color=t(b).scale(i).classes(e.limits)}else e.color=function(){return t(b)("#ccc")}}switch(this.vectorSource.changed(),e.typeMap){case"heatmap":for(this.layerHeat.setBlur(e.hblur),this.layerHeat.setRadius(e.hradius),a=0;a<n.length;a++)h=Number(n[a].get(e.cols[0])),r<0?n[a].set("weight",(h-r)/(o-r)):n[a].set("weight",h/o);break;case"sectoriel":var x=Math.sqrt(r),v=Math.sqrt(o);e.rmin<0?e.radius=function(t){let i;return(i="area"===e.rProp?Math.sqrt(t*e.rmax*e.rmax/o):e.rmax*t/o)>0?i:0}:e.radius=function(t){return e.rmin+(Math.sqrt(t)-x)/(v-x)*(e.rmax-e.rmin)};break;case"categorie":e.radius=function(){return 5};break;default:e.rmin<0?e.radius=function(t){let i;return(i="area"===e.rProp?Math.sqrt(t*e.rmax*e.rmax/o):e.rmax*t/o)>0?i:0}:e.radius=function(t){for(var i=e.limits.length,r=1;r<i&&!(t<e.limits[r]);r++);return e.rmin+r*(e.rmax-e.rmin)/i}}if("heatmap"!==e.typeMap){var w=this._getStyle(e);this.layerStat.getSource().setStyle?this.layerStat.getSource().setStyle(w):this.layerStat.setStyle(w)}return this.dispatchEvent({type:"stat:end",error:!1,stat:this.getStatistic()}),!0},A.prototype.getStatLegend=function(){let t;let e=[],i=this.stat,r=this._getStyle();switch(i.typeMap){case"choroplethe":case"symbol":if(i.cols[0]<0)break;for(let n=i.limits.length-1;n>0;n--)(t=new l.default(this.isGeom("Polygon")||this.isGeom("Point")||!this.isGeom("Line")?"symbol"==i.typeMap?new o.default([0,0]):new s.default([[[0,0],[0,0],[0,0],[0,0],[0,0]]]):new a.default([[0,0],[0,0]]))).set(i.cols[0],(i.limits[n-1]+i.limits[n])/2),t.setStyle(r(t)),e.push({title:parseFloat(i.limits[n-1].toFixed(2))+" - "+parseFloat(i.limits[n].toFixed(2)),feature:t});break;case"categorie":this.getValues().forEach(n=>{(t=new l.default(this.isGeom("Polygon")||this.isGeom("Point")||!this.isGeom("Line")?"symbol"==i.typeMap?new o.default([0,0]):new s.default([[[0,0],[0,0],[0,0],[0,0],[0,0]]]):new a.default([[0,0],[0,0]]))).set(i.cols[0],n),t.setStyle(r(t)),e.push({title:n,feature:t})});break;case"sectoriel":var n=i.colors;i.cols.forEach((i,r)=>{(t=new l.default(new s.default([[[0,0],[0,0],[0,0],[0,0],[0,0]]]))).setStyle(new d.default({stroke:this.defaultStyle.stroke,fill:new p.default({color:n[r]})})),e.unshift({title:i,feature:t})})}return e},A.prototype.getVectorStyle=function(t){let e=this.getStatistic();if("heatmap"===e.typeMap||"sectoriel"===e.typeMap)return!1;let i=new h.default,r=this.getSource().getFeatures(),o=this.getLayers().item(0).getStyleFunction(),n=[];if(t){let t=e.cols[0],i=this.getStatLegend().reverse();switch(i.forEach(t=>{t.feature.setIgnStyle((0,E.default)(t.feature))}),e.typeMap){case"categorie":case"choroplethe":case"symbol":i.forEach((r,o)=>{let a;a="categorie"===e.typeMap?[{attr:t,op:"=",val:r.title}]:o<i.length-1?[{attr:t,op:"<",val:e.limits[o+1]}]:[{attr:"",op:"=",val:""}],n.push({title:r.title,condition:{all:!0,conditions:a},symbol:new S.default(r)})})}}t=n.length>0,r.forEach(r=>{let n=o(r),a={};if("symbol"===e.typeMap){if(!/LineString/.test(r.getGeometry().getType())){let t=(0,_.default)(r.getGeometry());t!==r.getGeometry()&&(r=r.clone()).setGeometry(t)}let t=n[n.length-1];t.getImage()?(a.symbolColor=(0,y.asString)(t.getImage().getFill().getColor()),a.pointRadius=Math.round(10*(t.getImage().getRadius()||0))/10):(a.strokeColor=(0,y.asString)(n[0].getStroke().getColor()),a.strokeWidth=n[0].getStroke().getWidth())}else n[0].getFill()&&(a.fillColor=(0,y.asString)(n[0].getFill().getColor())),n[0].getStroke()?(a.strokeColor=(0,y.asString)(n[0].getStroke().getColor()),a.strokeWidth=n[0].getStroke().getWidth()):a.strokeColor="rgba(255,255,255,0)";t||r.setIgnStyle(a),i.addFeature(r)});let a=new w.default({id:this.get("id"),title:this.get("title"),description:this.get("description"),minZoom:this.getMinZoom(),maxZoom:this.getMaxZoom(),source:i});return a.set("type","Vector"),a.setPopupContent(this.getPopupContent()),a._legend=this._legend,a.setMode("image"),this.getSource().getAttributions()&&a.getSource().setAttributions(this.getSource().getAttributions()()),this.get("grayscale")&&a.grayscale(!0),this.get("blendMode")&&a.setBlendMode(this.get("blendMode")),a.setIgnStyle("strokeColor",!0===e.stroke?"#fff":e.stroke),a.setIgnStyle("pointStrokeColor",!0===e.stroke?"#fff":e.stroke),a.setIgnStyle("pointGlyph",e.symbol||"ign-form-rond"),a.setIgnStyle("strokeWidth",e.stroke?1.25:0),a.setIgnStyle("pointStrokeWidth",e.stroke?1.25:0),a.setConditionStyle(n),a},A.prototype.getValues=function(){switch(this.stat.typeMap){case"categorie":return Object.keys(this._values||{});case"heatmap":return;default:return this._values}},A.prototype.getLimits=function(){return this.stat.limits},A.prototype.getMode=function(){return this.stat.mode},A.prototype.addFilter=function(t){(0,f.default).prototype.addFilter.call(this,t),["layerStat","layerHeat"].forEach(e=>{this[e].addFilter(t),this[e].dispatchEvent({type:"filter"})})},A.prototype.removeFilter=function(t){(0,f.default).prototype.removeFilter.call(this,t),["layerStat","layerHeat"].forEach(e=>{this[e].removeFilter(t),this[e].dispatchEvent({type:"filter"})})},A.type=["choroplethe","categorie","symbol","sectoriel","heatmap"],A.typeString={choroplethe:"choroplèthe",categorie:"catégorie",symbol:"symbole",sectoriel:"sectoriel",heatmap:"carte de chaleur"},A.paramList={typeMap:["choroplethe","categorie","symbol","sectoriel","heatmap"],cols:["choroplethe","categorie","symbol","sectoriel","heatmap"],mode:["choroplethe","categorie","symbol","sectoriel"],nbClass:["choroplethe","symbol"],symbol:["symbol"],rmin:["symbol","sectoriel"],rmax:["symbol","sectoriel"],stroke:["choroplethe","categorie","symbol","sectoriel"],limits:["choroplethe","symbol"],alpha:["symbol"],chartType:["sectoriel"],hradius:["heatmap"],hblur:["heatmap"],brewerColors:["choroplethe","categorie","symbol","sectoriel"]},A.mode={q:"Quantiles",e:"Equidistance",l:"Logarithmique",k:"Clusters",c:"Manuelle"},A.prototype.selectable=function(t){return(!this.stat||"heatmap"!==this.stat.typeMap)&&(!0===t?this.set("selectable",!0):!1===t&&this.set("selectable",!1),!1!==this.get("selectable"))},A.prototype.limits=function(t,e){var i,r,o,n,a,s,l,h,u,c,f,d,p,g,m,y,x,v,b,w,_,S,E,A,N,I,M,P,C,T,L,R,O,k,G,Z,F,D,j,q,U,B,z,H,V,Y,W,X,K,J,$,Q,tt,te,ti=t.mode||"q",tr=t.nbClass||5,to=t.min,tn=t.max;if(tt=e.sort(function(t,e){return t-e}),1===tr)return[to,tn];if(E=[],"c"===ti.substr(0,1)&&(E.push(to),E.push(tn)),"e"===ti.substr(0,1)){for(E.push(to),w=T=1,k=tr-1;1<=k?T<=k:T>=k;w=1<=k?++T:--T)E.push(to+w/tr*(tn-to));E.push(tn)}else if("l"===ti.substr(0,1)){if(to<=0)throw"Logarithmic scales are only possible for values > 0";for(N=Math.LOG10E*Math.log(to),A=Math.LOG10E*Math.log(tn),E.push(to),w=te=1,G=tr-1;1<=G?te<=G:te>=G;w=1<=G?++te:--te)E.push(Math.pow(10,N+w/tr*(A-N)));E.push(tn)}else if("q"===ti.substr(0,1)){for(E.push(to),w=i=1,U=tr-1;1<=U?i<=U:i>=U;w=1<=U?++i:--i)(R=Math.floor(L=(tt.length-1)*w/tr))===L?E.push(tt[R]):(O=L-R,E.push(tt[R]*(1-O)+tt[R+1]*O));E.push(tn)}else if("k"===ti.substr(0,1)){for(g=Array(M=tt.length),v=Array(tr),K=!0,P=0,y=null,(y=[]).push(to),w=r=1,B=tr-1;1<=B?r<=B:r>=B;w=1<=B?++r:--r)y.push(to+w/tr*(tn-to));for(y.push(tn);K;){for(_=o=0,z=tr-1;0<=z?o<=z:o>=z;_=0<=z?++o:--o)v[_]=0;for(w=n=0,H=M-1;0<=H?n<=H:n>=H;w=0<=H?++n:--n){for(Q=tt[w],I=Number.MAX_VALUE,_=a=0,V=tr-1;0<=V?a<=V:a>=V;_=0<=V?++a:--a)(b=Math.abs(y[_]-Q))<I&&(I=b,m=_);v[m]++,g[w]=m}for(C=Array(tr),_=s=0,Y=tr-1;0<=Y?s<=Y:s>=Y;_=0<=Y?++s:--s)C[_]=null;for(w=l=0,W=M-1;0<=W?l<=W:l>=W;w=0<=W?++l:--l)null===C[x=g[w]]?C[x]=tt[w]:C[x]+=tt[w];for(_=h=0,X=tr-1;0<=X?h<=X:h>=X;_=0<=X?++h:--h)C[_]*=1/v[_];for(K=!1,_=u=0,Z=tr-1;0<=Z?u<=Z:u>=Z;_=0<=Z?++u:--u)if(C[_]!==y[w]){K=!0;break}y=C,++P>200&&(K=!1)}for(S={},_=c=0,F=tr-1;0<=F?c<=F:c>=F;_=0<=F?++c:--c)S[_]=[];for(w=f=0,D=M-1;0<=D?f<=D:f>=D;w=0<=D?++f:--f)S[x=g[w]].push(tt[w]);for(J=[],_=d=0,j=tr-1;0<=j?d<=j:d>=j;_=0<=j?++d:--d)J.push(S[_][0]),J.push(S[_][S[_].length-1]);for(J=J.sort(function(t,e){return t-e}),E.push(J[0]),w=p=1,q=J.length-1;p<=q;w=p+=2)isNaN($=J[w])||-1!==E.indexOf($)||E.push($)}return E};var N=A}),a("aUPR1",function(t,i){e(t.exports,"default",()=>l);var r=n("h6Aha"),o=n("2zf1Y"),a=n("lqNjm"),s=class extends r.default{constructor(t){var e=t||{},i=0;t.stroke&&(i=t.stroke.getWidth()),super({radius:e.radius+i,fill:new o.default({color:[0,0,0]}),rotation:e.rotation,displacement:e.displacement,snapToPixel:e.snapToPixel,declutterMode:e.declutterMode}),this.setScale(e.scale||1),this._stroke=e.stroke,this._radius=e.radius||20,this._donutratio=e.donutRatio||.5,this._type=e.type,this._offset=[e.offsetX?e.offsetX:0,e.offsetY?e.offsetY:0],this._animation="number"==typeof e.animation?{animate:!0,step:e.animation}:this._animation={animate:!1,step:1},this._max=e.max,this._data=e.data,e.colors instanceof Array?this._colors=e.colors:(this._colors=s.colors[e.colors],this._colors||(this._colors=s.colors.classic)),this.renderChart_()}clone(){var t=new s({type:this._type,radius:this._radius,rotation:this.getRotation(),scale:this.getScale(),data:this.getData(),snapToPixel:!!this.getSnapToPixel&&this.getSnapToPixel(),stroke:this._stroke,colors:this._colors,offsetX:this._offset[0],offsetY:this._offset[1],animation:this._animation,declutterMode:this.getDeclutterMode?this.getDeclutterMode():null});return t.setScale(this.getScale()),t.setOpacity(this.getOpacity()),t}getData(){return this._data}setData(t){this._data=t,this.renderChart_()}getRadius(){return this._radius}setRadius(t,e){this._radius=t,this.donuratio_=e||this.donuratio_,this.renderChart_()}setAnimation(t){if(!1===t){if(!1==this._animation.animate)return;this._animation.animate=!1}else{if(this._animation.step==t)return;this._animation.animate=!0,this._animation.step=t}this.renderChart_()}renderChart_(t){if(!t){this.getPixelRatio?(t=window.devicePixelRatio,this.renderChart_(t),this.getPixelRatio&&1!==t&&this.renderChart_(1)):this.renderChart_(1);return}var e=0;this._stroke&&(s=(0,a.asString)(this._stroke.getColor()),e=this._stroke.getWidth());var i=this.getImage(t),r=i.getContext("2d");r.save(),r.setTransform(t,0,0,t,0,0),r.clearRect(0,0,i.width,i.height),r.lineJoin="round";var o=0;for(l=0;l<this._data.length;l++)o+=this._data[l];r.translate(0,0);var n=this._animation.animate?this._animation.step:1;switch(this._type){case"donut":case"pie3D":case"pie":var s,l,h,u,c=Math.PI*(n-1.5);for(h=i.width/2/t,r.strokeStyle=s,r.lineWidth=e,r.save(),"pie3D"==this._type&&(r.translate(0,.3*h),r.scale(1,.7),r.beginPath(),r.fillStyle="#369",r.arc(h,1.4*h,this._radius*n,0,2*Math.PI),r.fill(),r.stroke()),"donut"==this._type&&(r.save(),r.beginPath(),r.rect(0,0,2*h,2*h),r.arc(h,h,this._radius*n*this._donutratio,0,2*Math.PI),r.clip("evenodd")),l=0;l<this._data.length;l++)r.beginPath(),r.moveTo(h,h),r.fillStyle=this._colors[l%this._colors.length],u=c+2*Math.PI*this._data[l]/o*n,r.arc(h,h,this._radius*n,c,u),r.closePath(),r.fill(),r.stroke(),c=u;"donut"==this._type&&(r.restore(),r.beginPath(),r.strokeStyle=s,r.lineWidth=e,r.arc(h,h,this._radius*n*this._donutratio,Math.PI*(n-1.5),c),r.stroke()),r.restore();break;default:var f=0;if(this._max)f=this._max;else for(l=0;l<this._data.length;l++)f<this._data[l]&&(f=this._data[l]);var d=Math.min(5,2*this._radius/this._data.length);h=i.width/2/t;var p,g=i.width/t-e,m=h-this._data.length*d/2;for(l=0,r.strokeStyle=s,r.lineWidth=e;l<this._data.length;l++){r.beginPath(),r.fillStyle=this._colors[l%this._colors.length],p=m+d;var y=this._data[l]/f*2*this._radius*n;r.rect(m,g-y,d,y),r.closePath(),r.fill(),r.stroke(),m=p}}if(r.restore(),!this.setDisplacement){var x=this.getAnchor();x[0]=h-this._offset[0],x[1]=h-this._offset[1]}}};s.colors={classic:["#ffa500","blue","red","green","cyan","magenta","yellow","#0f0"],dark:["#960","#003","#900","#060","#099","#909","#990","#090"],pale:["#fd0","#369","#f64","#3b7","#880","#b5d","#666"],pastel:["#fb4","#79c","#f66","#7d7","#acc","#fdd","#ff9","#b9b"],neon:["#ff0","#0ff","#0f0","#f0f","#f00","#00f"]};var l=s}),a("8SYbd",function(t,e){t.exports,t.exports=function(){for(var t=function(t,e,i){return void 0===e&&(e=0),void 0===i&&(i=1),t<e?e:t>i?i:t},e={},i=0,r=["Boolean","Number","String","Function","Array","Date","RegExp","Undefined","Null"];i<r.length;i+=1){var o=r[i];e["[object "+o+"]"]=o.toLowerCase()}var n=function(t){return e[Object.prototype.toString.call(t)]||"object"},a=Math.PI,s={clip_rgb:function(e){e._clipped=!1,e._unclipped=e.slice(0);for(var i=0;i<=3;i++)i<3?((e[i]<0||e[i]>255)&&(e._clipped=!0),e[i]=t(e[i],0,255)):3===i&&(e[i]=t(e[i],0,1));return e},limit:t,type:n,unpack:function(t,e){return(void 0===e&&(e=null),t.length>=3)?Array.prototype.slice.call(t):"object"==n(t[0])&&e?e.split("").filter(function(e){return void 0!==t[0][e]}).map(function(e){return t[0][e]}):t[0]},last:function(t){if(t.length<2)return null;var e=t.length-1;return"string"==n(t[e])?t[e].toLowerCase():null},TWOPI:2*a,PITHIRD:a/3,DEG2RAD:a/180,RAD2DEG:180/a},l={format:{},autodetect:[]},h=s.last,u=s.clip_rgb,c=s.type,f=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("object"===c(t[0])&&t[0].constructor&&t[0].constructor===this.constructor)return t[0];var i=h(t),r=!1;if(!i){r=!0,l.sorted||(l.autodetect=l.autodetect.sort(function(t,e){return e.p-t.p}),l.sorted=!0);for(var o=0,n=l.autodetect;o<n.length;o+=1){var a=n[o];if(i=a.test.apply(a,t))break}}if(l.format[i]){var s=l.format[i].apply(null,r?t:t.slice(0,-1));this._rgb=u(s)}else throw Error("unknown format: "+t);3===this._rgb.length&&this._rgb.push(1)};f.prototype.toString=function(){return"function"==c(this.hex)?this.hex():"["+this._rgb.join(",")+"]"};var d=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(d.Color,[null].concat(t)))};d.Color=f,d.version="2.4.2";var p=s.unpack,g=Math.max,m=s.unpack,y=s.unpack,x=s.type,v=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=p(t,"rgb"),r=i[0],o=i[1],n=i[2],a=1-g(r/=255,g(o/=255,n/=255)),s=a<1?1/(1-a):0;return[(1-r-a)*s,(1-o-a)*s,(1-n-a)*s,a]};f.prototype.cmyk=function(){return v(this._rgb)},d.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["cmyk"])))},l.format.cmyk=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=(t=m(t,"cmyk"))[0],r=t[1],o=t[2],n=t[3],a=t.length>4?t[4]:1;return 1===n?[0,0,0,a]:[i>=1?0:255*(1-i)*(1-n),r>=1?0:255*(1-r)*(1-n),o>=1?0:255*(1-o)*(1-n),a]},l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===x(t=y(t,"cmyk"))&&4===t.length)return"cmyk"}});var b=s.unpack,w=s.last,_=function(t){return Math.round(100*t)/100},S=s.unpack,E=function(){for(var t,e,i=[],r=arguments.length;r--;)i[r]=arguments[r];var o=(i=S(i,"rgba"))[0],n=i[1],a=i[2],s=Math.min(o/=255,n/=255,a/=255),l=Math.max(o,n,a),h=(l+s)/2;return(l===s?(t=0,e=Number.NaN):t=h<.5?(l-s)/(l+s):(l-s)/(2-l-s),o==l?e=(n-a)/(l-s):n==l?e=2+(a-o)/(l-s):a==l&&(e=4+(o-n)/(l-s)),(e*=60)<0&&(e+=360),i.length>3&&void 0!==i[3])?[e,t,h,i[3]]:[e,t,h]},A=s.unpack,N=s.last,I=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=b(t,"hsla"),r=w(t)||"lsa";return i[0]=_(i[0]||0),i[1]=_(100*i[1])+"%",i[2]=_(100*i[2])+"%","hsla"===r||i.length>3&&i[3]<1?(i[3]=i.length>3?i[3]:1,r="hsla"):i.length=3,r+"("+i.join(",")+")"},M=Math.round,P=s.unpack,C=Math.round,T=function(){for(var t,e,i,r,o=[],n=arguments.length;n--;)o[n]=arguments[n];var a=(o=P(o,"hsl"))[0],s=o[1],l=o[2];if(0===s)e=i=r=255*l;else{var h=[0,0,0],u=[0,0,0],c=l<.5?l*(1+s):l+s-l*s,f=2*l-c,d=a/360;h[0]=d+1/3,h[1]=d,h[2]=d-1/3;for(var p=0;p<3;p++)h[p]<0&&(h[p]+=1),h[p]>1&&(h[p]-=1),6*h[p]<1?u[p]=f+(c-f)*6*h[p]:2*h[p]<1?u[p]=c:3*h[p]<2?u[p]=f+(c-f)*(2/3-h[p])*6:u[p]=f;e=(t=[C(255*u[0]),C(255*u[1]),C(255*u[2])])[0],i=t[1],r=t[2]}return o.length>3?[e,i,r,o[3]]:[e,i,r,1]},L=/^rgb\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*\)$/,R=/^rgba\(\s*(-?\d+),\s*(-?\d+)\s*,\s*(-?\d+)\s*,\s*([01]|[01]?\.\d+)\)$/,O=/^rgb\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,k=/^rgba\(\s*(-?\d+(?:\.\d+)?)%,\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,G=/^hsl\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*\)$/,Z=/^hsla\(\s*(-?\d+(?:\.\d+)?),\s*(-?\d+(?:\.\d+)?)%\s*,\s*(-?\d+(?:\.\d+)?)%\s*,\s*([01]|[01]?\.\d+)\)$/,F=Math.round,D=function(t){if(t=t.toLowerCase().trim(),l.format.named)try{return l.format.named(t)}catch(t){}if(e=t.match(L)){for(var e,i=e.slice(1,4),r=0;r<3;r++)i[r]=+i[r];return i[3]=1,i}if(e=t.match(R)){for(var o=e.slice(1,5),n=0;n<4;n++)o[n]=+o[n];return o}if(e=t.match(O)){for(var a=e.slice(1,4),s=0;s<3;s++)a[s]=F(2.55*a[s]);return a[3]=1,a}if(e=t.match(k)){for(var h=e.slice(1,5),u=0;u<3;u++)h[u]=F(2.55*h[u]);return h[3]=+h[3],h}if(e=t.match(G)){var c=e.slice(1,4);c[1]*=.01,c[2]*=.01;var f=T(c);return f[3]=1,f}if(e=t.match(Z)){var d=e.slice(1,4);d[1]*=.01,d[2]*=.01;var p=T(d);return p[3]=+e[4],p}};D.test=function(t){return L.test(t)||R.test(t)||O.test(t)||k.test(t)||G.test(t)||Z.test(t)};var j=s.type,q=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=A(t,"rgba"),r=N(t)||"rgb";return"hsl"==r.substr(0,3)?I(E(i),r):(i[0]=M(i[0]),i[1]=M(i[1]),i[2]=M(i[2]),("rgba"===r||i.length>3&&i[3]<1)&&(i[3]=i.length>3?i[3]:1,r="rgba"),r+"("+i.slice(0,"rgb"===r?3:4).join(",")+")")};f.prototype.css=function(t){return q(this._rgb,t)},d.css=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["css"])))},l.format.css=D,l.autodetect.push({p:5,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===j(t)&&D.test(t))return"css"}});var U=s.unpack;l.format.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=U(t,"rgba");return i[0]*=255,i[1]*=255,i[2]*=255,i},d.gl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["gl"])))},f.prototype.gl=function(){var t=this._rgb;return[t[0]/255,t[1]/255,t[2]/255,t[3]]};var B=s.unpack,z=s.unpack,H=Math.floor,V=s.unpack,Y=s.type,W=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var r=B(e,"rgb"),o=r[0],n=r[1],a=r[2],s=Math.min(o,n,a),l=Math.max(o,n,a),h=l-s;return 0===h?t=Number.NaN:(o===l&&(t=(n-a)/h),n===l&&(t=2+(a-o)/h),a===l&&(t=4+(o-n)/h),(t*=60)<0&&(t+=360)),[t,100*h/255,s/(255-h)*100]};f.prototype.hcg=function(){return W(this._rgb)},d.hcg=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hcg"])))},l.format.hcg=function(){for(var t,e,i,r,o,n,a,s,l,h=[],u=arguments.length;u--;)h[u]=arguments[u];var c=(h=z(h,"hcg"))[0],f=h[1],d=h[2];d*=255;var p=255*f;if(0===f)a=s=l=d;else{360===c&&(c=0),c>360&&(c-=360),c<0&&(c+=360);var g=H(c/=60),m=c-g,y=d*(1-f),x=y+p*(1-m),v=y+p*m,b=y+p;switch(g){case 0:a=(t=[b,v,y])[0],s=t[1],l=t[2];break;case 1:a=(e=[x,b,y])[0],s=e[1],l=e[2];break;case 2:a=(i=[y,b,v])[0],s=i[1],l=i[2];break;case 3:a=(r=[y,x,b])[0],s=r[1],l=r[2];break;case 4:a=(o=[v,y,b])[0],s=o[1],l=o[2];break;case 5:a=(n=[b,y,x])[0],s=n[1],l=n[2]}}return[a,s,l,h.length>3?h[3]:1]},l.autodetect.push({p:1,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===Y(t=V(t,"hcg"))&&3===t.length)return"hcg"}});var X=s.unpack,K=s.last,J=Math.round,$=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=X(t,"rgba"),r=i[0],o=i[1],n=i[2],a=i[3],s=K(t)||"auto";void 0===a&&(a=1),"auto"===s&&(s=a<1?"rgba":"rgb");var l="000000"+((r=J(r))<<16|(o=J(o))<<8|(n=J(n))).toString(16);l=l.substr(l.length-6);var h="0"+J(255*a).toString(16);switch(h=h.substr(h.length-2),s.toLowerCase()){case"rgba":return"#"+l+h;case"argb":return"#"+h+l;default:return"#"+l}},Q=/^#?([A-Fa-f0-9]{6}|[A-Fa-f0-9]{3})$/,tt=/^#?([A-Fa-f0-9]{8}|[A-Fa-f0-9]{4})$/,te=function(t){if(t.match(Q)){(4===t.length||7===t.length)&&(t=t.substr(1)),3===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]);var e=parseInt(t,16);return[e>>16,e>>8&255,255&e,1]}if(t.match(tt)){(5===t.length||9===t.length)&&(t=t.substr(1)),4===t.length&&(t=(t=t.split(""))[0]+t[0]+t[1]+t[1]+t[2]+t[2]+t[3]+t[3]);var i=parseInt(t,16),r=Math.round((255&i)/255*100)/100;return[i>>24&255,i>>16&255,i>>8&255,r]}throw Error("unknown hex color: "+t)},ti=s.type;f.prototype.hex=function(t){return $(this._rgb,t)},d.hex=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hex"])))},l.format.hex=te,l.autodetect.push({p:4,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===ti(t)&&[3,4,5,6,7,8,9].indexOf(t.length)>=0)return"hex"}});var tr=s.unpack,to=s.TWOPI,tn=Math.min,ta=Math.sqrt,ts=Math.acos,tl=s.unpack,th=s.limit,tu=s.TWOPI,tc=s.PITHIRD,tf=Math.cos,td=s.unpack,tp=s.type,tg=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];var r=tr(e,"rgb"),o=r[0],n=r[1],a=r[2],s=tn(o/=255,n/=255,a/=255),l=(o+n+a)/3,h=l>0?1-s/l:0;return 0===h?t=NaN:(t=ts(t=(o-n+(o-a))/2/ta((o-n)*(o-n)+(o-a)*(n-a))),a>n&&(t=to-t),t/=to),[360*t,h,l]};f.prototype.hsi=function(){return tg(this._rgb)},d.hsi=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hsi"])))},l.format.hsi=function(){for(var t,e,i,r=[],o=arguments.length;o--;)r[o]=arguments[o];var n=(r=tl(r,"hsi"))[0],a=r[1],s=r[2];return isNaN(n)&&(n=0),isNaN(a)&&(a=0),n>360&&(n-=360),n<0&&(n+=360),(n/=360)<1/3?e=1-((i=(1-a)/3)+(t=(1+a*tf(tu*n)/tf(tc-tu*n))/3)):n<2/3?(n-=1/3,i=1-((t=(1-a)/3)+(e=(1+a*tf(tu*n)/tf(tc-tu*n))/3))):(n-=2/3,t=1-((e=(1-a)/3)+(i=(1+a*tf(tu*n)/tf(tc-tu*n))/3))),[255*(t=th(s*t*3)),255*(e=th(s*e*3)),255*(i=th(s*i*3)),r.length>3?r[3]:1]},l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===tp(t=td(t,"hsi"))&&3===t.length)return"hsi"}});var tm=s.unpack,ty=s.type;f.prototype.hsl=function(){return E(this._rgb)},d.hsl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hsl"])))},l.format.hsl=T,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===ty(t=tm(t,"hsl"))&&3===t.length)return"hsl"}});var tx=s.unpack,tv=Math.min,tb=Math.max,tw=s.unpack,t_=Math.floor,tS=s.unpack,tE=s.type,tA=function(){for(var t,e,i=[],r=arguments.length;r--;)i[r]=arguments[r];var o=(i=tx(i,"rgb"))[0],n=i[1],a=i[2],s=tv(o,n,a),l=tb(o,n,a),h=l-s;return 0===l?(t=Number.NaN,e=0):(e=h/l,o===l&&(t=(n-a)/h),n===l&&(t=2+(a-o)/h),a===l&&(t=4+(o-n)/h),(t*=60)<0&&(t+=360)),[t,e,l/255]};f.prototype.hsv=function(){return tA(this._rgb)},d.hsv=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hsv"])))},l.format.hsv=function(){for(var t,e,i,r,o,n,a,s,l,h=[],u=arguments.length;u--;)h[u]=arguments[u];var c=(h=tw(h,"hsv"))[0],f=h[1],d=h[2];if(d*=255,0===f)a=s=l=d;else{360===c&&(c=0),c>360&&(c-=360),c<0&&(c+=360);var p=t_(c/=60),g=c-p,m=d*(1-f),y=d*(1-f*g),x=d*(1-f*(1-g));switch(p){case 0:a=(t=[d,x,m])[0],s=t[1],l=t[2];break;case 1:a=(e=[y,d,m])[0],s=e[1],l=e[2];break;case 2:a=(i=[m,d,x])[0],s=i[1],l=i[2];break;case 3:a=(r=[m,y,d])[0],s=r[1],l=r[2];break;case 4:a=(o=[x,m,d])[0],s=o[1],l=o[2];break;case 5:a=(n=[d,m,y])[0],s=n[1],l=n[2]}}return[a,s,l,h.length>3?h[3]:1]},l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===tE(t=tS(t,"hsv"))&&3===t.length)return"hsv"}});var tN={Kn:18,Xn:.95047,Yn:1,Zn:1.08883,t0:.137931034,t1:.206896552,t2:.12841855,t3:.008856452},tI=s.unpack,tM=Math.pow,tP=function(t){return(t/=255)<=.04045?t/12.92:tM((t+.055)/1.055,2.4)},tC=function(t){return t>tN.t3?tM(t,1/3):t/tN.t2+tN.t0},tT=function(){for(var t,e,i,r=[],o=arguments.length;o--;)r[o]=arguments[o];var n=tI(r,"rgb"),a=(t=n[0],e=n[1],i=n[2],[tC((.4124564*(t=tP(t))+.3575761*(e=tP(e))+.1804375*(i=tP(i)))/tN.Xn),tC((.2126729*t+.7151522*e+.072175*i)/tN.Yn),tC((.0193339*t+.119192*e+.9503041*i)/tN.Zn)]),s=a[0],l=a[1],h=a[2],u=116*l-16;return[u<0?0:u,500*(s-l),200*(l-h)]},tL=s.unpack,tR=Math.pow,tO=function(t){return 255*(t<=.00304?12.92*t:1.055*tR(t,1/2.4)-.055)},tk=function(t){return t>tN.t1?t*t*t:tN.t2*(t-tN.t0)},tG=function(){for(var t,e,i,r=[],o=arguments.length;o--;)r[o]=arguments[o];var n=(r=tL(r,"lab"))[0],a=r[1],s=r[2];return e=(n+16)/116,t=isNaN(a)?e:e+a/500,i=isNaN(s)?e:e-s/200,e=tN.Yn*tk(e),[tO(3.2404542*(t=tN.Xn*tk(t))-1.5371385*e-.4985314*(i=tN.Zn*tk(i))),tO(-.969266*t+1.8760108*e+.041556*i),tO(.0556434*t-.2040259*e+1.0572252*i),r.length>3?r[3]:1]},tZ=s.unpack,tF=s.type;f.prototype.lab=function(){return tT(this._rgb)},d.lab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["lab"])))},l.format.lab=tG,l.autodetect.push({p:2,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===tF(t=tZ(t,"lab"))&&3===t.length)return"lab"}});var tD=s.unpack,tj=s.RAD2DEG,tq=Math.sqrt,tU=Math.atan2,tB=Math.round,tz=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tD(t,"lab"),r=i[0],o=i[1],n=i[2],a=tq(o*o+n*n),s=(tU(n,o)*tj+360)%360;return 0===tB(1e4*a)&&(s=Number.NaN),[r,a,s]},tH=s.unpack,tV=s.unpack,tY=s.DEG2RAD,tW=Math.sin,tX=Math.cos,tK=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tV(t,"lch"),r=i[0],o=i[1],n=i[2];return isNaN(n)&&(n=0),[r,tX(n*=tY)*o,tW(n)*o]},tJ=s.unpack,t$=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tK((t=tJ(t,"lch"))[0],t[1],t[2]),r=tG(i[0],i[1],i[2]);return[r[0],r[1],r[2],t.length>3?t[3]:1]},tQ=s.unpack,t0=s.unpack,t1=s.type,t2=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tH(t,"rgb"),r=tT(i[0],i[1],i[2]);return tz(r[0],r[1],r[2])};f.prototype.lch=function(){return t2(this._rgb)},f.prototype.hcl=function(){return t2(this._rgb).reverse()},d.lch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["lch"])))},d.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["hcl"])))},l.format.lch=t$,l.format.hcl=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tQ(t,"hcl").reverse();return t$.apply(void 0,i)},["lch","hcl"].forEach(function(t){return l.autodetect.push({p:2,test:function(){for(var e=[],i=arguments.length;i--;)e[i]=arguments[i];if("array"===t1(e=t0(e,t))&&3===e.length)return t}})});var t5={aliceblue:"#f0f8ff",antiquewhite:"#faebd7",aqua:"#00ffff",aquamarine:"#7fffd4",azure:"#f0ffff",beige:"#f5f5dc",bisque:"#ffe4c4",black:"#000000",blanchedalmond:"#ffebcd",blue:"#0000ff",blueviolet:"#8a2be2",brown:"#a52a2a",burlywood:"#deb887",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",cornflower:"#6495ed",cornflowerblue:"#6495ed",cornsilk:"#fff8dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",darkkhaki:"#bdb76b",darkmagenta:"#8b008b",darkolivegreen:"#556b2f",darkorange:"#ff8c00",darkorchid:"#9932cc",darkred:"#8b0000",darksalmon:"#e9967a",darkseagreen:"#8fbc8f",darkslateblue:"#483d8b",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",darkturquoise:"#00ced1",darkviolet:"#9400d3",deeppink:"#ff1493",deepskyblue:"#00bfff",dimgray:"#696969",dimgrey:"#696969",dodgerblue:"#1e90ff",firebrick:"#b22222",floralwhite:"#fffaf0",forestgreen:"#228b22",fuchsia:"#ff00ff",gainsboro:"#dcdcdc",ghostwhite:"#f8f8ff",gold:"#ffd700",goldenrod:"#daa520",gray:"#808080",green:"#008000",greenyellow:"#adff2f",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",indianred:"#cd5c5c",indigo:"#4b0082",ivory:"#fffff0",khaki:"#f0e68c",laserlemon:"#ffff54",lavender:"#e6e6fa",lavenderblush:"#fff0f5",lawngreen:"#7cfc00",lemonchiffon:"#fffacd",lightblue:"#add8e6",lightcoral:"#f08080",lightcyan:"#e0ffff",lightgoldenrod:"#fafad2",lightgoldenrodyellow:"#fafad2",lightgray:"#d3d3d3",lightgreen:"#90ee90",lightgrey:"#d3d3d3",lightpink:"#ffb6c1",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",lightskyblue:"#87cefa",lightslategray:"#778899",lightslategrey:"#778899",lightsteelblue:"#b0c4de",lightyellow:"#ffffe0",lime:"#00ff00",limegreen:"#32cd32",linen:"#faf0e6",magenta:"#ff00ff",maroon:"#800000",maroon2:"#7f0000",maroon3:"#b03060",mediumaquamarine:"#66cdaa",mediumblue:"#0000cd",mediumorchid:"#ba55d3",mediumpurple:"#9370db",mediumseagreen:"#3cb371",mediumslateblue:"#7b68ee",mediumspringgreen:"#00fa9a",mediumturquoise:"#48d1cc",mediumvioletred:"#c71585",midnightblue:"#191970",mintcream:"#f5fffa",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",navajowhite:"#ffdead",navy:"#000080",oldlace:"#fdf5e6",olive:"#808000",olivedrab:"#6b8e23",orange:"#ffa500",orangered:"#ff4500",orchid:"#da70d6",palegoldenrod:"#eee8aa",palegreen:"#98fb98",paleturquoise:"#afeeee",palevioletred:"#db7093",papayawhip:"#ffefd5",peachpuff:"#ffdab9",peru:"#cd853f",pink:"#ffc0cb",plum:"#dda0dd",powderblue:"#b0e0e6",purple:"#800080",purple2:"#7f007f",purple3:"#a020f0",rebeccapurple:"#663399",red:"#ff0000",rosybrown:"#bc8f8f",royalblue:"#4169e1",saddlebrown:"#8b4513",salmon:"#fa8072",sandybrown:"#f4a460",seagreen:"#2e8b57",seashell:"#fff5ee",sienna:"#a0522d",silver:"#c0c0c0",skyblue:"#87ceeb",slateblue:"#6a5acd",slategray:"#708090",slategrey:"#708090",snow:"#fffafa",springgreen:"#00ff7f",steelblue:"#4682b4",tan:"#d2b48c",teal:"#008080",thistle:"#d8bfd8",tomato:"#ff6347",turquoise:"#40e0d0",violet:"#ee82ee",wheat:"#f5deb3",white:"#ffffff",whitesmoke:"#f5f5f5",yellow:"#ffff00",yellowgreen:"#9acd32"},t4=s.type;f.prototype.name=function(){for(var t=$(this._rgb,"rgb"),e=0,i=Object.keys(t5);e<i.length;e+=1){var r=i[e];if(t5[r]===t)return r.toLowerCase()}return t},l.format.named=function(t){if(t5[t=t.toLowerCase()])return te(t5[t]);throw Error("unknown color name: "+t)},l.autodetect.push({p:5,test:function(t){for(var e=[],i=arguments.length-1;i-- >0;)e[i]=arguments[i+1];if(!e.length&&"string"===t4(t)&&t5[t.toLowerCase()])return"named"}});var t6=s.unpack,t3=s.type,t8=s.type,t7=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=t6(t,"rgb");return(i[0]<<16)+(i[1]<<8)+i[2]};f.prototype.num=function(){return t7(this._rgb)},d.num=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["num"])))},l.format.num=function(t){if("number"==t3(t)&&t>=0&&t<=16777215)return[t>>16,t>>8&255,255&t,1];throw Error("unknown num color: "+t)},l.autodetect.push({p:5,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if(1===t.length&&"number"===t8(t[0])&&t[0]>=0&&t[0]<=16777215)return"num"}});var t9=s.unpack,et=s.type,ee=Math.round;f.prototype.rgb=function(t){return(void 0===t&&(t=!0),!1===t)?this._rgb.slice(0,3):this._rgb.slice(0,3).map(ee)},f.prototype.rgba=function(t){return void 0===t&&(t=!0),this._rgb.slice(0,4).map(function(e,i){return i<3?!1===t?e:ee(e):e})},d.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["rgb"])))},l.format.rgb=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=t9(t,"rgba");return void 0===i[3]&&(i[3]=1),i},l.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===et(t=t9(t,"rgba"))&&(3===t.length||4===t.length&&"number"==et(t[3])&&t[3]>=0&&t[3]<=1))return"rgb"}});var ei=Math.log,er=function(t){var e,i,r,o=t/100;return o<66?(e=255,i=o<6?0:-155.25485562709179-.44596950469579133*(i=o-2)+104.49216199393888*ei(i),r=o<20?0:-254.76935184120902+.8274096064007395*(r=o-10)+115.67994401066147*ei(r)):(e=351.97690566805693+.114206453784165*(e=o-55)-40.25366309332127*ei(e),i=325.4494125711974+.07943456536662342*(i=o-50)-28.0852963507957*ei(i),r=255),[e,i,r,1]},eo=s.unpack,en=Math.round,ea=function(){for(var t,e=[],i=arguments.length;i--;)e[i]=arguments[i];for(var r=eo(e,"rgb"),o=r[0],n=r[2],a=1e3,s=4e4;s-a>.4;){var l=er(t=(s+a)*.5);l[2]/l[0]>=n/o?s=t:a=t}return en(t)};f.prototype.temp=f.prototype.kelvin=f.prototype.temperature=function(){return ea(this._rgb)},d.temp=d.kelvin=d.temperature=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["temp"])))},l.format.temp=l.format.kelvin=l.format.temperature=er;var es=s.unpack,el=Math.cbrt,eh=Math.pow,eu=Math.sign,ec=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=es(t,"rgb"),r=i[0],o=i[1],n=i[2],a=[ef(r/255),ef(o/255),ef(n/255)],s=a[0],l=a[1],h=a[2],u=el(.4122214708*s+.5363325363*l+.0514459929*h),c=el(.2119034982*s+.6806995451*l+.1073969566*h),f=el(.0883024619*s+.2817188376*l+.6299787005*h);return[.2104542553*u+.793617785*c-.0040720468*f,1.9779984951*u-2.428592205*c+.4505937099*f,.0259040371*u+.7827717662*c-.808675766*f]};function ef(t){var e=Math.abs(t);return e<.04045?t/12.92:(eu(t)||1)*eh((e+.055)/1.055,2.4)}var ed=s.unpack,ep=Math.pow,eg=Math.sign,em=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=(t=ed(t,"lab"))[0],r=t[1],o=t[2],n=ep(i+.3963377774*r+.2158037573*o,3),a=ep(i-.1055613458*r-.0638541728*o,3),s=ep(i-.0894841775*r-1.291485548*o,3);return[255*ey(4.0767416621*n-3.3077115913*a+.2309699292*s),255*ey(-1.2684380046*n+2.6097574011*a-.3413193965*s),255*ey(-.0041960863*n-.7034186147*a+1.707614701*s),t.length>3?t[3]:1]};function ey(t){var e=Math.abs(t);return e>.0031308?(eg(t)||1)*(1.055*ep(e,1/2.4)-.055):12.92*t}var ex=s.unpack,ev=s.type;f.prototype.oklab=function(){return ec(this._rgb)},d.oklab=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["oklab"])))},l.format.oklab=em,l.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===ev(t=ex(t,"oklab"))&&3===t.length)return"oklab"}});var eb=s.unpack,ew=s.unpack,e_=s.unpack,eS=s.type,eE=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=eb(t,"rgb"),r=ec(i[0],i[1],i[2]);return tz(r[0],r[1],r[2])};f.prototype.oklch=function(){return eE(this._rgb)},d.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return new(Function.prototype.bind.apply(f,[null].concat(t,["oklch"])))},l.format.oklch=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];var i=tK((t=ew(t,"lch"))[0],t[1],t[2]),r=em(i[0],i[1],i[2]);return[r[0],r[1],r[2],t.length>3?t[3]:1]},l.autodetect.push({p:3,test:function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];if("array"===eS(t=e_(t,"oklch"))&&3===t.length)return"oklch"}});var eA=s.type;f.prototype.alpha=function(t,e){return(void 0===e&&(e=!1),void 0!==t&&"number"===eA(t))?e?(this._rgb[3]=t,this):new f([this._rgb[0],this._rgb[1],this._rgb[2],t],"rgb"):this._rgb[3]},f.prototype.clipped=function(){return this._rgb._clipped||!1},f.prototype.darken=function(t){void 0===t&&(t=1);var e=this.lab();return e[0]-=tN.Kn*t,new f(e,"lab").alpha(this.alpha(),!0)},f.prototype.brighten=function(t){return void 0===t&&(t=1),this.darken(-t)},f.prototype.darker=f.prototype.darken,f.prototype.brighter=f.prototype.brighten,f.prototype.get=function(t){var e=t.split("."),i=e[0],r=e[1],o=this[i]();if(!r)return o;var n=i.indexOf(r)-("ok"===i.substr(0,2)?2:0);if(n>-1)return o[n];throw Error("unknown channel "+r+" in mode "+i)};var eN=s.type,eI=Math.pow;f.prototype.luminance=function(t){if(void 0!==t&&"number"===eN(t)){if(0===t)return new f([0,0,0,this._rgb[3]],"rgb");if(1===t)return new f([255,255,255,this._rgb[3]],"rgb");var e=this.luminance(),i=20,r=function(e,o){var n=e.interpolate(o,.5,"rgb"),a=n.luminance();return!(1e-7>Math.abs(t-a))&&i--?a>t?r(e,n):r(n,o):n},o=(e>t?r(new f([0,0,0]),this):r(this,new f([255,255,255]))).rgb();return new f(o.concat([this._rgb[3]]))}return eM.apply(void 0,this._rgb.slice(0,3))};var eM=function(t,e,i){return .2126*(t=eP(t))+.7152*(e=eP(e))+.0722*(i=eP(i))},eP=function(t){return(t/=255)<=.03928?t/12.92:eI((t+.055)/1.055,2.4)},eC={},eT=s.type,eL=function(t,e,i){void 0===i&&(i=.5);for(var r=[],o=arguments.length-3;o-- >0;)r[o]=arguments[o+3];var n=r[0]||"lrgb";if(eC[n]||r.length||(n=Object.keys(eC)[0]),!eC[n])throw Error("interpolation mode "+n+" is not defined");return"object"!==eT(t)&&(t=new f(t)),"object"!==eT(e)&&(e=new f(e)),eC[n](t,e,i).alpha(t.alpha()+i*(e.alpha()-t.alpha()))};f.prototype.mix=f.prototype.interpolate=function(t,e){void 0===e&&(e=.5);for(var i=[],r=arguments.length-2;r-- >0;)i[r]=arguments[r+2];return eL.apply(void 0,[this,t,e].concat(i))},f.prototype.premultiply=function(t){void 0===t&&(t=!1);var e=this._rgb,i=e[3];return t?(this._rgb=[e[0]*i,e[1]*i,e[2]*i,i],this):new f([e[0]*i,e[1]*i,e[2]*i,i],"rgb")},f.prototype.saturate=function(t){void 0===t&&(t=1);var e=this.lch();return e[1]+=tN.Kn*t,e[1]<0&&(e[1]=0),new f(e,"lch").alpha(this.alpha(),!0)},f.prototype.desaturate=function(t){return void 0===t&&(t=1),this.saturate(-t)};var eR=s.type;f.prototype.set=function(t,e,i){void 0===i&&(i=!1);var r=t.split("."),o=r[0],n=r[1],a=this[o]();if(!n)return a;var s=o.indexOf(n)-("ok"===o.substr(0,2)?2:0);if(s>-1){if("string"==eR(e))switch(e.charAt(0)){case"+":case"-":a[s]+=+e;break;case"*":a[s]*=+e.substr(1);break;case"/":a[s]/=+e.substr(1);break;default:a[s]=+e}else if("number"===eR(e))a[s]=e;else throw Error("unsupported value for Color.set");var l=new f(a,o);return i?(this._rgb=l._rgb,this):l}throw Error("unknown channel "+n+" in mode "+o)},eC.rgb=function(t,e,i){var r=t._rgb,o=e._rgb;return new f(r[0]+i*(o[0]-r[0]),r[1]+i*(o[1]-r[1]),r[2]+i*(o[2]-r[2]),"rgb")};var eO=Math.sqrt,ek=Math.pow;eC.lrgb=function(t,e,i){var r=t._rgb,o=r[0],n=r[1],a=r[2],s=e._rgb,l=s[0],h=s[1],u=s[2];return new f(eO(ek(o,2)*(1-i)+ek(l,2)*i),eO(ek(n,2)*(1-i)+ek(h,2)*i),eO(ek(a,2)*(1-i)+ek(u,2)*i),"rgb")},eC.lab=function(t,e,i){var r=t.lab(),o=e.lab();return new f(r[0]+i*(o[0]-r[0]),r[1]+i*(o[1]-r[1]),r[2]+i*(o[2]-r[2]),"lab")};var eG=function(t,e,i,r){var o,n,a,s,l,h,u,c,d,p,g,m,y,x;return"hsl"===r?(a=t.hsl(),s=e.hsl()):"hsv"===r?(a=t.hsv(),s=e.hsv()):"hcg"===r?(a=t.hcg(),s=e.hcg()):"hsi"===r?(a=t.hsi(),s=e.hsi()):"lch"===r||"hcl"===r?(r="hcl",a=t.hcl(),s=e.hcl()):"oklch"===r&&(a=t.oklch().reverse(),s=e.oklch().reverse()),("h"===r.substr(0,1)||"oklch"===r)&&(l=(o=a)[0],u=o[1],d=o[2],h=(n=s)[0],c=n[1],p=n[2]),isNaN(l)||isNaN(h)?isNaN(l)?isNaN(h)?m=Number.NaN:(m=h,(1==d||0==d)&&"hsv"!=r&&(g=c)):(m=l,(1==p||0==p)&&"hsv"!=r&&(g=u)):(x=h>l&&h-l>180?h-(l+360):h<l&&l-h>180?h+360-l:h-l,m=l+i*x),void 0===g&&(g=u+i*(c-u)),y=d+i*(p-d),"oklch"===r?new f([y,g,m],r):new f([m,g,y],r)},eZ=function(t,e,i){return eG(t,e,i,"lch")};eC.lch=eZ,eC.hcl=eZ,eC.num=function(t,e,i){var r=t.num();return new f(r+i*(e.num()-r),"num")},eC.hcg=function(t,e,i){return eG(t,e,i,"hcg")},eC.hsi=function(t,e,i){return eG(t,e,i,"hsi")},eC.hsl=function(t,e,i){return eG(t,e,i,"hsl")},eC.hsv=function(t,e,i){return eG(t,e,i,"hsv")},eC.oklab=function(t,e,i){var r=t.oklab(),o=e.oklab();return new f(r[0]+i*(o[0]-r[0]),r[1]+i*(o[1]-r[1]),r[2]+i*(o[2]-r[2]),"oklab")},eC.oklch=function(t,e,i){return eG(t,e,i,"oklch")};var eF=s.clip_rgb,eD=Math.pow,ej=Math.sqrt,eq=Math.PI,eU=Math.cos,eB=Math.sin,ez=Math.atan2,eH=function(t,e){for(var i=t.length,r=[0,0,0,0],o=0;o<t.length;o++){var n=t[o],a=e[o]/i,s=n._rgb;r[0]+=eD(s[0],2)*a,r[1]+=eD(s[1],2)*a,r[2]+=eD(s[2],2)*a,r[3]+=s[3]*a}return r[0]=ej(r[0]),r[1]=ej(r[1]),r[2]=ej(r[2]),r[3]>.9999999&&(r[3]=1),new f(eF(r))},eV=s.type,eY=Math.pow,eW=function(t){var e="rgb",i=d("#ccc"),r=0,o=[0,1],n=[],a=[0,0],s=!1,l=[],h=!1,u=0,c=1,f=!1,p={},g=!0,m=1,y=function(t){if("string"===eV(t=t||["#fff","#000"])&&d.brewer&&d.brewer[t.toLowerCase()]&&(t=d.brewer[t.toLowerCase()]),"array"===eV(t)){1===t.length&&(t=[t[0],t[0]]),t=t.slice(0);for(var e=0;e<t.length;e++)t[e]=d(t[e]);n.length=0;for(var i=0;i<t.length;i++)n.push(i/(t.length-1))}return _(),l=t},x=function(t){if(null!=s){for(var e=s.length-1,i=0;i<e&&t>=s[i];)i++;return i-1}return 0},v=function(t){return t},b=function(t){return t},w=function(t,r){if(null==r&&(r=!1),isNaN(t)||null===t)return i;if(r)h=t;else if(s&&s.length>2){var o,h;h=x(t)/(s.length-2)}else h=c!==u?(t-u)/(c-u):1;h=b(h),r||(h=v(h)),1!==m&&(h=eY(h,m));var f=Math.floor(1e4*(h=Math.min(1,Math.max(0,h=a[0]+h*(1-a[0]-a[1])))));if(g&&p[f])o=p[f];else{if("array"===eV(l))for(var y=0;y<n.length;y++){var w=n[y];if(h<=w||h>=w&&y===n.length-1){o=l[y];break}if(h>w&&h<n[y+1]){h=(h-w)/(n[y+1]-w),o=d.interpolate(l[y],l[y+1],h,e);break}}else"function"===eV(l)&&(o=l(h));g&&(p[f]=o)}return o},_=function(){return p={}};y(t);var S=function(t){var e=d(w(t));return h&&e[h]?e[h]():e};return S.classes=function(t){if(null!=t){if("array"===eV(t))s=t,o=[t[0],t[t.length-1]];else{var e=d.analyze(o);s=0===t?[e.min,e.max]:d.limits(e,"e",t)}return S}return s},S.domain=function(t){if(!arguments.length)return o;u=t[0],c=t[t.length-1],n=[];var e=l.length;if(t.length===e&&u!==c)for(var i=0,r=Array.from(t);i<r.length;i+=1){var a=r[i];n.push((a-u)/(c-u))}else{for(var s=0;s<e;s++)n.push(s/(e-1));if(t.length>2){var h=t.map(function(e,i){return i/(t.length-1)}),f=t.map(function(t){return(t-u)/(c-u)});f.every(function(t,e){return h[e]===t})||(b=function(t){if(t<=0||t>=1)return t;for(var e=0;t>=f[e+1];)e++;var i=(t-f[e])/(f[e+1]-f[e]);return h[e]+i*(h[e+1]-h[e])})}}return o=[u,c],S},S.mode=function(t){return arguments.length?(e=t,_(),S):e},S.range=function(t,e){return y(t),S},S.out=function(t){return h=t,S},S.spread=function(t){return arguments.length?(r=t,S):r},S.correctLightness=function(t){return null==t&&(t=!0),f=t,_(),v=f?function(t){for(var e=w(0,!0).lab()[0],i=w(1,!0).lab()[0],r=e>i,o=w(t,!0).lab()[0],n=e+(i-e)*t,a=o-n,s=0,l=1,h=20;Math.abs(a)>.01&&h-- >0;)r&&(a*=-1),a<0?(s=t,t+=(l-t)*.5):(l=t,t+=(s-t)*.5),a=(o=w(t,!0).lab()[0])-n;return t}:function(t){return t},S},S.padding=function(t){return null!=t?("number"===eV(t)&&(t=[t,t]),a=t,S):a},S.colors=function(e,i){arguments.length<2&&(i="hex");var r=[];if(0==arguments.length)r=l.slice(0);else if(1===e)r=[S(.5)];else if(e>1){var n=o[0],a=o[1]-n;r=(function(t,e,i){for(var r=[],o=t<e,n=i?o?e+1:e-1:e,a=t;o?a<n:a>n;o?a++:a--)r.push(a);return r})(0,e,!1).map(function(t){return S(n+t/(e-1)*a)})}else{t=[];var h=[];if(s&&s.length>2)for(var u=1,c=s.length,f=1<=c;f?u<c:u>c;f?u++:u--)h.push((s[u-1]+s[u])*.5);else h=o;r=h.map(function(t){return S(t)})}return d[i]&&(r=r.map(function(t){return t[i]()})),r},S.cache=function(t){return null!=t?(g=t,S):g},S.gamma=function(t){return null!=t?(m=t,S):m},S.nodata=function(t){return null!=t?(i=d(t),S):i},S},eX=function(t){for(var e=[1,1],i=1;i<t;i++){for(var r=[1],o=1;o<=e.length;o++)r[o]=(e[o]||0)+e[o-1];e=r}return e},eK=function(t){var e,i,r,o,n,a,s,l,h,u,c;if(2===(t=t.map(function(t){return new f(t)})).length)n=(e=t.map(function(t){return t.lab()}))[0],a=e[1],o=function(t){return new f([0,1,2].map(function(e){return n[e]+t*(a[e]-n[e])}),"lab")};else if(3===t.length)n=(i=t.map(function(t){return t.lab()}))[0],a=i[1],s=i[2],o=function(t){return new f([0,1,2].map(function(e){return(1-t)*(1-t)*n[e]+2*(1-t)*t*a[e]+t*t*s[e]}),"lab")};else if(4===t.length)n=(r=t.map(function(t){return t.lab()}))[0],a=r[1],s=r[2],l=r[3],o=function(t){return new f([0,1,2].map(function(e){return(1-t)*(1-t)*(1-t)*n[e]+3*(1-t)*(1-t)*t*a[e]+3*(1-t)*t*t*s[e]+t*t*t*l[e]}),"lab")};else if(t.length>=5)h=t.map(function(t){return t.lab()}),u=eX(c=t.length-1),o=function(t){var e=1-t;return new f([0,1,2].map(function(i){return h.reduce(function(r,o,n){return r+u[n]*Math.pow(e,c-n)*Math.pow(t,n)*o[i]},0)}),"lab")};else throw RangeError("No point in running bezier with only one color.");return o},eJ=function(t,e,i){if(!eJ[i])throw Error("unknown blend mode "+i);return eJ[i](t,e)},e$=function(t){return function(e,i){var r=d(i).rgb(),o=d(e).rgb();return d.rgb(t(r,o))}},eQ=function(t){return function(e,i){var r=[];return r[0]=t(e[0],i[0]),r[1]=t(e[1],i[1]),r[2]=t(e[2],i[2]),r}};eJ.normal=e$(eQ(function(t){return t})),eJ.multiply=e$(eQ(function(t,e){return t*e/255})),eJ.screen=e$(eQ(function(t,e){return 255*(1-(1-t/255)*(1-e/255))})),eJ.overlay=e$(eQ(function(t,e){return e<128?2*t*e/255:255*(1-2*(1-t/255)*(1-e/255))})),eJ.darken=e$(eQ(function(t,e){return t>e?e:t})),eJ.lighten=e$(eQ(function(t,e){return t>e?t:e})),eJ.dodge=e$(eQ(function(t,e){return 255===t?255:(t=e/255*255/(1-t/255))>255?255:t})),eJ.burn=e$(eQ(function(t,e){return 255*(1-(1-e/255)/(t/255))}));for(var e0=s.type,e1=s.clip_rgb,e2=s.TWOPI,e5=Math.pow,e4=Math.sin,e6=Math.cos,e3=Math.floor,e8=Math.random,e7=Math.log,e9=Math.pow,it=Math.floor,ie=Math.abs,ii=function(t,e){void 0===e&&(e=null);var i={min:Number.MAX_VALUE,max:-1*Number.MAX_VALUE,sum:0,values:[],count:0};return"object"===n(t)&&(t=Object.values(t)),t.forEach(function(t){e&&"object"===n(t)&&(t=t[e]),null==t||isNaN(t)||(i.values.push(t),i.sum+=t,t<i.min&&(i.min=t),t>i.max&&(i.max=t),i.count+=1)}),i.domain=[i.min,i.max],i.limits=function(t,e){return ir(i,t,e)},i},ir=function(t,e,i){void 0===e&&(e="equal"),void 0===i&&(i=7),"array"==n(t)&&(t=ii(t));var r=t.min,o=t.max,a=t.values.sort(function(t,e){return t-e});if(1===i)return[r,o];var s=[];if("c"===e.substr(0,1)&&(s.push(r),s.push(o)),"e"===e.substr(0,1)){s.push(r);for(var l=1;l<i;l++)s.push(r+l/i*(o-r));s.push(o)}else if("l"===e.substr(0,1)){if(r<=0)throw Error("Logarithmic scales are only possible for values > 0");var h=Math.LOG10E*e7(r),u=Math.LOG10E*e7(o);s.push(r);for(var c=1;c<i;c++)s.push(e9(10,h+c/i*(u-h)));s.push(o)}else if("q"===e.substr(0,1)){s.push(r);for(var f=1;f<i;f++){var d=(a.length-1)*f/i,p=it(d);if(p===d)s.push(a[p]);else{var g=d-p;s.push(a[p]*(1-g)+a[p+1]*g)}}s.push(o)}else if("k"===e.substr(0,1)){var m,y=a.length,x=Array(y),v=Array(i),b=!0,w=0,_=null;(_=[]).push(r);for(var S=1;S<i;S++)_.push(r+S/i*(o-r));for(_.push(o);b;){for(var E=0;E<i;E++)v[E]=0;for(var A=0;A<y;A++)for(var N=a[A],I=Number.MAX_VALUE,M=void 0,P=0;P<i;P++){var C=ie(_[P]-N);C<I&&(I=C,M=P),v[M]++,x[A]=M}for(var T=Array(i),L=0;L<i;L++)T[L]=null;for(var R=0;R<y;R++)null===T[m=x[R]]?T[m]=a[R]:T[m]+=a[R];for(var O=0;O<i;O++)T[O]*=1/v[O];b=!1;for(var k=0;k<i;k++)if(T[k]!==_[k]){b=!0;break}_=T,++w>200&&(b=!1)}for(var G={},Z=0;Z<i;Z++)G[Z]=[];for(var F=0;F<y;F++)G[m=x[F]].push(a[F]);for(var D=[],j=0;j<i;j++)D.push(G[j][0]),D.push(G[j][G[j].length-1]);D=D.sort(function(t,e){return t-e}),s.push(D[0]);for(var q=1;q<D.length;q+=2){var U=D[q];isNaN(U)||-1!==s.indexOf(U)||s.push(U)}}return s},io={analyze:ii,limits:ir},ia=Math.sqrt,is=Math.pow,il=Math.min,ih=Math.max,iu=Math.atan2,ic=Math.abs,id=Math.cos,ip=Math.sin,ig=Math.exp,im=Math.PI,iy={OrRd:["#fff7ec","#fee8c8","#fdd49e","#fdbb84","#fc8d59","#ef6548","#d7301f","#b30000","#7f0000"],PuBu:["#fff7fb","#ece7f2","#d0d1e6","#a6bddb","#74a9cf","#3690c0","#0570b0","#045a8d","#023858"],BuPu:["#f7fcfd","#e0ecf4","#bfd3e6","#9ebcda","#8c96c6","#8c6bb1","#88419d","#810f7c","#4d004b"],Oranges:["#fff5eb","#fee6ce","#fdd0a2","#fdae6b","#fd8d3c","#f16913","#d94801","#a63603","#7f2704"],BuGn:["#f7fcfd","#e5f5f9","#ccece6","#99d8c9","#66c2a4","#41ae76","#238b45","#006d2c","#00441b"],YlOrBr:["#ffffe5","#fff7bc","#fee391","#fec44f","#fe9929","#ec7014","#cc4c02","#993404","#662506"],YlGn:["#ffffe5","#f7fcb9","#d9f0a3","#addd8e","#78c679","#41ab5d","#238443","#006837","#004529"],Reds:["#fff5f0","#fee0d2","#fcbba1","#fc9272","#fb6a4a","#ef3b2c","#cb181d","#a50f15","#67000d"],RdPu:["#fff7f3","#fde0dd","#fcc5c0","#fa9fb5","#f768a1","#dd3497","#ae017e","#7a0177","#49006a"],Greens:["#f7fcf5","#e5f5e0","#c7e9c0","#a1d99b","#74c476","#41ab5d","#238b45","#006d2c","#00441b"],YlGnBu:["#ffffd9","#edf8b1","#c7e9b4","#7fcdbb","#41b6c4","#1d91c0","#225ea8","#253494","#081d58"],Purples:["#fcfbfd","#efedf5","#dadaeb","#bcbddc","#9e9ac8","#807dba","#6a51a3","#54278f","#3f007d"],GnBu:["#f7fcf0","#e0f3db","#ccebc5","#a8ddb5","#7bccc4","#4eb3d3","#2b8cbe","#0868ac","#084081"],Greys:["#ffffff","#f0f0f0","#d9d9d9","#bdbdbd","#969696","#737373","#525252","#252525","#000000"],YlOrRd:["#ffffcc","#ffeda0","#fed976","#feb24c","#fd8d3c","#fc4e2a","#e31a1c","#bd0026","#800026"],PuRd:["#f7f4f9","#e7e1ef","#d4b9da","#c994c7","#df65b0","#e7298a","#ce1256","#980043","#67001f"],Blues:["#f7fbff","#deebf7","#c6dbef","#9ecae1","#6baed6","#4292c6","#2171b5","#08519c","#08306b"],PuBuGn:["#fff7fb","#ece2f0","#d0d1e6","#a6bddb","#67a9cf","#3690c0","#02818a","#016c59","#014636"],Viridis:["#440154","#482777","#3f4a8a","#31678e","#26838f","#1f9d8a","#6cce5a","#b6de2b","#fee825"],Spectral:["#9e0142","#d53e4f","#f46d43","#fdae61","#fee08b","#ffffbf","#e6f598","#abdda4","#66c2a5","#3288bd","#5e4fa2"],RdYlGn:["#a50026","#d73027","#f46d43","#fdae61","#fee08b","#ffffbf","#d9ef8b","#a6d96a","#66bd63","#1a9850","#006837"],RdBu:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#f7f7f7","#d1e5f0","#92c5de","#4393c3","#2166ac","#053061"],PiYG:["#8e0152","#c51b7d","#de77ae","#f1b6da","#fde0ef","#f7f7f7","#e6f5d0","#b8e186","#7fbc41","#4d9221","#276419"],PRGn:["#40004b","#762a83","#9970ab","#c2a5cf","#e7d4e8","#f7f7f7","#d9f0d3","#a6dba0","#5aae61","#1b7837","#00441b"],RdYlBu:["#a50026","#d73027","#f46d43","#fdae61","#fee090","#ffffbf","#e0f3f8","#abd9e9","#74add1","#4575b4","#313695"],BrBG:["#543005","#8c510a","#bf812d","#dfc27d","#f6e8c3","#f5f5f5","#c7eae5","#80cdc1","#35978f","#01665e","#003c30"],RdGy:["#67001f","#b2182b","#d6604d","#f4a582","#fddbc7","#ffffff","#e0e0e0","#bababa","#878787","#4d4d4d","#1a1a1a"],PuOr:["#7f3b08","#b35806","#e08214","#fdb863","#fee0b6","#f7f7f7","#d8daeb","#b2abd2","#8073ac","#542788","#2d004b"],Set2:["#66c2a5","#fc8d62","#8da0cb","#e78ac3","#a6d854","#ffd92f","#e5c494","#b3b3b3"],Accent:["#7fc97f","#beaed4","#fdc086","#ffff99","#386cb0","#f0027f","#bf5b17","#666666"],Set1:["#e41a1c","#377eb8","#4daf4a","#984ea3","#ff7f00","#ffff33","#a65628","#f781bf","#999999"],Set3:["#8dd3c7","#ffffb3","#bebada","#fb8072","#80b1d3","#fdb462","#b3de69","#fccde5","#d9d9d9","#bc80bd","#ccebc5","#ffed6f"],Dark2:["#1b9e77","#d95f02","#7570b3","#e7298a","#66a61e","#e6ab02","#a6761d","#666666"],Paired:["#a6cee3","#1f78b4","#b2df8a","#33a02c","#fb9a99","#e31a1c","#fdbf6f","#ff7f00","#cab2d6","#6a3d9a","#ffff99","#b15928"],Pastel2:["#b3e2cd","#fdcdac","#cbd5e8","#f4cae4","#e6f5c9","#fff2ae","#f1e2cc","#cccccc"],Pastel1:["#fbb4ae","#b3cde3","#ccebc5","#decbe4","#fed9a6","#ffffcc","#e5d8bd","#fddaec","#f2f2f2"]},ix=0,iv=Object.keys(iy);ix<iv.length;ix+=1){var ib=iv[ix];iy[ib.toLowerCase()]=iy[ib]}return d.average=function(t,e,i){void 0===e&&(e="lrgb"),void 0===i&&(i=null);var r=t.length;i||(i=Array.from(Array(r)).map(function(){return 1}));var o=r/i.reduce(function(t,e){return t+e});if(i.forEach(function(t,e){i[e]*=o}),t=t.map(function(t){return new f(t)}),"lrgb"===e)return eH(t,i);for(var n=t.shift(),a=n.get(e),s=[],l=0,h=0,u=0;u<a.length;u++)if(a[u]=(a[u]||0)*i[0],s.push(isNaN(a[u])?0:i[0]),"h"===e.charAt(u)&&!isNaN(a[u])){var c=a[u]/180*eq;l+=eU(c)*i[0],h+=eB(c)*i[0]}var d=n.alpha()*i[0];t.forEach(function(t,r){var o=t.get(e);d+=t.alpha()*i[r+1];for(var n=0;n<a.length;n++)if(!isNaN(o[n])){if(s[n]+=i[r+1],"h"===e.charAt(n)){var u=o[n]/180*eq;l+=eU(u)*i[r+1],h+=eB(u)*i[r+1]}else a[n]+=o[n]*i[r+1]}});for(var p=0;p<a.length;p++)if("h"===e.charAt(p)){for(var g=ez(h/s[p],l/s[p])/eq*180;g<0;)g+=360;for(;g>=360;)g-=360;a[p]=g}else a[p]=a[p]/s[p];return d/=r,new f(a,e).alpha(d>.99999?1:d,!0)},d.bezier=function(t){var e=eK(t);return e.scale=function(){return eW(e)},e},d.blend=eJ,d.cubehelix=function(t,e,i,r,o){void 0===t&&(t=300),void 0===e&&(e=-1.5),void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=[0,1]);var n,a=0;"array"===e0(o)?n=o[1]-o[0]:(n=0,o=[o,o]);var s=function(s){var l=e2*((t+120)/360+e*s),h=e5(o[0]+n*s,r),u=(0!==a?i[0]+s*a:i)*h*(1-h)/2,c=e6(l),f=e4(l);return d(e1([255*(h+u*(-.14861*c+1.78277*f)),255*(h+u*(-.29227*c-.90649*f)),255*(h+1.97294*c*u),1]))};return s.start=function(e){return null==e?t:(t=e,s)},s.rotations=function(t){return null==t?e:(e=t,s)},s.gamma=function(t){return null==t?r:(r=t,s)},s.hue=function(t){return null==t?i:("array"===e0(i=t)?0==(a=i[1]-i[0])&&(i=i[1]):a=0,s)},s.lightness=function(t){return null==t?o:("array"===e0(t)?(o=t,n=t[1]-t[0]):(o=[t,t],n=0),s)},s.scale=function(){return d.scale(s)},s.hue(i),s},d.mix=d.interpolate=eL,d.random=function(){for(var t="#",e=0;e<6;e++)t+="0123456789abcdef".charAt(e3(16*e8()));return new f(t,"hex")},d.scale=eW,d.analyze=io.analyze,d.contrast=function(t,e){t=new f(t),e=new f(e);var i=t.luminance(),r=e.luminance();return i>r?(i+.05)/(r+.05):(r+.05)/(i+.05)},d.deltaE=function(t,e,i,r,o){void 0===i&&(i=1),void 0===r&&(r=1),void 0===o&&(o=1);var n=function(t){return 360*t/(2*im)},a=function(t){return 2*im*t/360};t=new f(t),e=new f(e);var s=Array.from(t.lab()),l=s[0],h=s[1],u=s[2],c=Array.from(e.lab()),d=c[0],p=c[1],g=c[2],m=(l+d)/2,y=(ia(is(h,2)+is(u,2))+ia(is(p,2)+is(g,2)))/2,x=.5*(1-ia(is(y,7)/(is(y,7)+is(25,7)))),v=h*(1+x),b=p*(1+x),w=ia(is(v,2)+is(u,2)),_=ia(is(b,2)+is(g,2)),S=(w+_)/2,E=n(iu(u,v)),A=n(iu(g,b)),N=E>=0?E:E+360,I=A>=0?A:A+360,M=ic(N-I)>180?(N+I+360)/2:(N+I)/2,P=1-.17*id(a(M-30))+.24*id(a(2*M))+.32*id(a(3*M+6))-.2*id(a(4*M-63)),C=I-N;C=180>=ic(C)?C:I<=N?C+360:C-360,C=2*ia(w*_)*ip(a(C)/2);var T=_-w,L=1+.015*is(m-50,2)/ia(20+is(m-50,2)),R=1+.045*S,O=1+.015*S*P,k=30*ig(-is((M-275)/25,2)),G=-(2*ia(is(S,7)/(is(S,7)+is(25,7))))*ip(2*a(k));return ih(0,il(100,ia(is((d-l)/(i*L),2)+is(T/(r*R),2)+is(C/(o*O),2)+T/(r*R)*G*(C/(o*O)))))},d.distance=function(t,e,i){void 0===i&&(i="lab"),t=new f(t),e=new f(e);var r=t.get(i),o=e.get(i),n=0;for(var a in r){var s=(r[a]||0)-(o[a]||0);n+=s*s}return Math.sqrt(n)},d.limits=io.limits,d.valid=function(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];try{return new(Function.prototype.bind.apply(f,[null].concat(t))),!0}catch(t){return!1}},d.scales={cool:function(){return eW([d.hsl(180,1,.9),d.hsl(250,.7,.4)])},hot:function(){return eW(["#000","#f00","#ff0","#fff"]).mode("rgb")}},d.colors=t5,d.brewer=iy,d}()}),a("hThUZ",function(t,i){e(t.exports,"default",()=>o);var r=n("j2K3b");function o(t){if(!t.getType)return new r.default([0,0]);switch(t.getType()){case"MultiPolygon":var e,i=t.getPolygons();if(!i.length)return t;for(var o=0,n=0;n<i.length;n++){var a=i[n].getArea();a>o&&(o=a,e=i[n])}return e.getInteriorPoint();case"Polygon":return t.getInteriorPoint();case"Point":return t;default:return new r.default(t.getFirstCoordinate())}}}),a("cLiWE",function(t,i){e(t.exports,"default",()=>l);var r=n("eEuqc"),o=n("3SMVV"),a=n("5TDW7");class s extends a.default{constructor(){super()}}s.prototype.read=function(t){if("WMS"!==t.type)return!1;let e=new r.default({extent:t.wmsparam.layer.extent,queryable:!!t.wmsparam.layer.queryable,minResolution:t.wmsparam.layer.minResolution,maxResolution:t.wmsparam.layer.maxResolution,source:new o.default(t.wmsparam.source)});return e.set("wmsparam",t.wmsparam),this.readOptions(e,t),e.get("title")||e.set("title",t.wmsparam.layer.title),e},s.prototype.write=function(t){if("WMS"!==t.get("type"))return null;var e=this.writeOptions(t,{wms:!0});return e.wmsparam=t.get("wmsparam")||t.WMSParams,e};var l=s}),a("3SMVV",function(t,i){e(t.exports,"default",()=>p);var r=n("42VYg"),o=n("9IqLY"),a=n("9AVh1"),s=n("jZquI"),l=n("gpSXC"),h=n("7f9mA"),u=n("gzr8q"),c=n("a6roo"),f=n("9YraL");class d extends r.default{constructor(t){let e=Object.assign({},(t=t||{}).params);super({attributions:t.attributions,attributionsCollapsible:t.attributionsCollapsible,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:!(!("TRANSPARENT"in e)||e.TRANSPARENT),projection:t.projection,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileClass:t.tileClass,tileGrid:t.tileGrid,tileLoadFunction:t.tileLoadFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0,this.params_=e,this.v13_=!0,this.serverType_=t.serverType,this.hidpi_=void 0===t.hidpi||t.hidpi,this.tmpExtent_=(0,s.createEmpty)(),this.updateV13_(),this.setKey(this.getKeyForParams_())}getFeatureInfoUrl(t,e,i,r){let n=(0,u.get)(i),a=this.getProjection()||n,h=this.getTileGrid();h||(h=this.getTileGridForProjection(a));let c=(0,u.transform)(t,n,a),f=(0,l.calculateSourceResolution)(a,n,t,e),d=h.getZForResolution(f,this.zDirection),p=h.getResolution(d),g=h.getTileCoordForCoordAndZ(c,d);if(h.getResolutions().length<=g[0])return;let m=h.getTileCoordExtent(g,this.tmpExtent_),y=this.gutter_;0!==y&&(m=(0,s.buffer)(m,p*y,m));let x={QUERY_LAYERS:this.params_.LAYERS};Object.assign(x,(0,o.getRequestParams)(this.params_,"GetFeatureInfo"),r);let v=Math.floor((c[0]-m[0])/p),b=Math.floor((m[3]-c[1])/p);return x[this.v13_?"I":"X"]=v,x[this.v13_?"J":"Y"]=b,this.getRequestUrl_(g,m,1,a||n,x)}getLegendUrl(t,e){if(void 0===this.urls[0])return;let i={SERVICE:"WMS",VERSION:o.DEFAULT_VERSION,REQUEST:"GetLegendGraphic",FORMAT:"image/png"};if(void 0===e||void 0===e.LAYER){let t=this.params_.LAYERS;if(!(!Array.isArray(t)||1===t.length))return;i.LAYER=t}if(void 0!==t){let e=this.getProjection()?this.getProjection().getMetersPerUnit():1;i.SCALE=t*e/28e-5}return Object.assign(i,e),(0,a.appendParams)(this.urls[0],i)}getGutter(){return this.gutter_}getParams(){return this.params_}getRequestUrl_(t,e,i,r,n){let a;let s=this.urls;if(s){if(1==s.length)a=s[0];else{let e=(0,c.modulo)((0,f.hash)(t),s.length);a=s[e]}return(0,o.getImageSrc)(e,(this.tileGrid||this.getTileGridForProjection(r)).getResolution(t[0]),i,r,a,n,this.serverType_)}}getTilePixelRatio(t){return this.hidpi_&&void 0!==this.serverType_?t:1}getKeyForParams_(){let t=0,e=[];for(let i in this.params_)e[t++]=i+"-"+this.params_[i];return e.join("/")}updateParams(t){Object.assign(this.params_,t),this.updateV13_(),this.setKey(this.getKeyForParams_())}updateV13_(){let t=this.params_.VERSION||o.DEFAULT_VERSION;this.v13_=(0,h.compareVersions)(t,"1.3")>=0}tileUrlFunction(t,e,i){let r=this.getTileGrid();if(r||(r=this.getTileGridForProjection(i)),r.getResolutions().length<=t[0])return;1==e||this.hidpi_&&void 0!==this.serverType_||(e=1);let n=r.getResolution(t[0]),a=r.getTileCoordExtent(t,this.tmpExtent_),l=this.gutter_;0!==l&&(a=(0,s.buffer)(a,n*l,a));let h=Object.assign({},(0,o.getRequestParams)(this.params_,"GetMap"));return this.getRequestUrl_(t,a,e,i,h)}}var p=d}),a("9IqLY",function(t,i){e(t.exports,"DEFAULT_VERSION",()=>h),e(t.exports,"getImageSrc",()=>u),e(t.exports,"getRequestParams",()=>c);var r=n("fqTWj"),o=n("9AVh1"),a=n("7f9mA");n("kUxvm");var s=n("a6roo"),l=n("jZquI");n("gzr8q"),n("3i1Ma");let h="1.3.0";function u(t,e,i,n,h,u,c){u=Object.assign({REQUEST:"GetMap"},u);let f=e/i,d=[(0,s.round)((0,l.getWidth)(t)/f,r.DECIMALS),(0,s.round)((0,l.getHeight)(t)/f,r.DECIMALS)];if(1!=i)switch(c){case"geoserver":let p=90*i+.5|0;"FORMAT_OPTIONS"in u?u.FORMAT_OPTIONS+=";dpi:"+p:u.FORMAT_OPTIONS="dpi:"+p;break;case"mapserver":u.MAP_RESOLUTION=90*i;break;case"carmentaserver":case"qgis":u.DPI=90*i;break;default:throw Error("Unknown `serverType` configured")}return function(t,e,i,r,n){let s;n.WIDTH=i[0],n.HEIGHT=i[1];let l=r.getAxisOrientation(),h=(0,a.compareVersions)(n.VERSION,"1.3")>=0;return n[h?"CRS":"SRS"]=r.getCode(),s=h&&"ne"==l.substr(0,2)?[e[1],e[0],e[3],e[2]]:e,n.BBOX=s.join(","),(0,o.appendParams)(t,n)}(h,t,d,n,u)}function c(t,e){return Object.assign({REQUEST:e,SERVICE:"WMS",VERSION:h,FORMAT:"image/png",STYLES:"",TRANSPARENT:!0},t)}}),a("5UlEr",function(t,i){e(t.exports,"default",()=>h);var r=n("eEuqc"),o=n("gAUZM"),a=n("5TDW7"),s=n("9PI6P");class l extends a.default{constructor(){super()}}l.prototype.read=function(t){if("WMTS"!==t.type)return null;let e=t.wmtsparam;e.source.tileGrid=(0,s.default).prototype.getTileGrid(e.source.matrixSet,e.source.minZoom,e.source.maxZoom);let i=new r.default({extent:e.layer.extent,minResolution:e.layer.minResolution,maxResolution:e.layer.maxResolution,source:new o.default(e.source)});return delete e.source.tileGrid,i.set("wmtsparam",e),this.readOptions(i,t),i.get("title")||i.set("title",e.layer.title),i},l.prototype.write=function(t){if("WMTS"!==t.get("type"))return null;var e=this.writeOptions(t,{});return e.wmtsparam=t.get("wmtsparam")||t.wmtsparams,e};var h=l}),a("9PI6P",function(t,i){e(t.exports,"default",()=>f);var r=n("i28LF"),o=n("4QhZh"),a=n("sxATa"),s=n("kUWI9"),l=n("eEuqc"),h=n("gAUZM"),u=n("gzr8q"),c=n("jZquI"),f=class extends r.default{constructor(t){(t=t||{}).title=t.title||"WMTS",super(t),this.getDialog().element.classList.add("ol-wmtscapabilities")}_getParser(){var t=new s.default;return{read:(function(e){var i=t.read(e);i.Capability={Layer:i.Contents},i.Capability.Layer.Attribution={Title:i.ServiceProvider.ProviderName};var r=[];return i.Contents.Layer.forEach(function(t){t.Format&&/jpeg|png/.test(t.Format[0])&&r.push(t)}),i.Contents.Layer=r,i}).bind(this)}}getRequestParam(t){return{SERVICE:"WMTS",REQUEST:"GetCapabilities",VERSION:t.version||"1.0.0"}}_getTG(t,e,i,r){for(var o=[],n=[],a=(0,c.getWidth)((0,u.get)("EPSG:3857").getExtent())/256,s=0;s<=(i||20);s++){var l=r?t+":"+s:s;o[s]=l,n[s]=a/Math.pow(2,s)}return{origin:[-20037508,20037508],resolutions:n,matrixIds:o,minZoom:e||0}}getTileGrid(t,e,i,r){return new a.default(this._getTG(t,e,i,r))}isSupportedSet(t){return"PM"===t.TileMatrixSet||"3857"===t.TileMatrixSet||"EPSG:3857"===t.TileMatrixSet||"webmercator"===t.TileMatrixSet||"GoogleMapsCompatible"===t.TileMatrixSet}getOptionsFromCap(t,e){var i,r=t.WGS84BoundingBox;r&&(r=(0,u.transformExtent)(r,"EPSG:4326",this.getMap().getView().getProjection()));var n=1/0,a=-1/0;if(t.TileMatrixSetLink.forEach((function(e){this.isSupportedSet(e)&&(i=e,t.TileMatrixSet=e.TileMatrixSet)}).bind(this)),!i){this.showError({type:"TileMatrix"});return}if(i.TileMatrixSetLimits){var s=i.TileMatrixSetLimits[0].TileMatrix.split(":").length>1;i.TileMatrixSetLimits.forEach(function(t){var e=t.TileMatrix.split(":").pop();n=Math.min(n,parseInt(e)),a=Math.max(a,parseInt(e))})}else n=0,a=20;var l=new o.default;l.setZoom(n);var h={title:t.Title,extent:r,abstract:t.Abstract,maxResolution:l.getResolution()},c={url:e.OperationsMetadata.GetTile.DCP.HTTP.Get[0].href,layer:t.Identifier,matrixSet:t.TileMatrixSet,format:t.Format[0]||"image/jpeg",projection:"EPSG:3857",tilePrefix:s,minZoom:n,maxZoom:a,style:t.Style?t.Style[0].Identifier:"normal",attributions:t.Attribution.Title,crossOrigin:this.get("cors")?"anonymous":null,wrapX:!1!==this.get("wrapX")};if(this._fillForm({title:h.title,layers:c.layer,style:c.style,format:c.format,minZoom:n,maxZoom:a,extent:r?r.join(","):"",projection:c.projection,attribution:c.attributions||"",version:"1.0.0"}),this.get("trace")){c.tileGrid="TILEGRID";var f=JSON.stringify([c],null,"	").replace(/\\"/g,'"');f=f.replace('"TILEGRID"',"new ol_tilegrid_WMTS("+JSON.stringify(this._getTG(c.matrixSet,c.minZoom,c.maxZoom,c.tilePrefix),null,"	").replace(/\n/g,"\n		")+")"),delete c.tileGrid,h.source="SOURCE";var d="new ol.layer.Tile ("+JSON.stringify(h,null,"	")+")";console.log(d=d.replace(/\\"/g,'"').replace('"SOURCE"',"new ol.source.WMTS("+f+")").replace(/\\t/g,"	").replace(/\\n/g,"\n").replace(/"tileGrid": {/g,'"tileGrid": new ol.tilegrid.WMTS({').replace(/},\n(\t*)"style"/g,'}),\n$1"style"').replace("([\n	","(").replace("}\n])","})")),delete h.source}var p=void 0;return t.Style&&t.Style[0]&&t.Style[0].LegendURL&&t.Style[0].LegendURL[0]&&(p=[t.Style[0].LegendURL[0].href]),{layer:h,source:c,data:{title:t.Title,abstract:t.Abstract,legend:p}}}_getFormOptions(){var t=this._currentOptions||{};t.layer||(t.layer={}),t.source||(t.source={}),t.data||(t.data={});var e=parseInt(this._elements.formMinZoom.value)||0,i=parseInt(this._elements.formMaxZoom.value)||20,r=[];this._elements.formExtent.value&&this._elements.formExtent.value.split(",").forEach(function(t){r.push(parseFloat(t))}),4!==r.length&&(r=void 0);var n=[];this._elements.formAttribution.value&&n.push(this._elements.formAttribution.value);var a=new o.default({projection:this.getMap().getView().getProjection()});return a.setZoom(e),{layer:{title:this._elements.formTitle.value,extent:r,abstract:t.layer.abstract||"",maxResolution:a.getResolution()},source:{url:this._elements.input.value,layer:this._elements.formLayer.value,matrixSet:t.source.matrixSet||"PM",format:this._elements.formFormat.options[this._elements.formFormat.selectedIndex].value,projection:"EPSG:3857",minZoom:e,maxZoom:i,style:this._elements.formStyle.value||"normal",attributions:n,crossOrigin:this._elements.formCrossOrigin.checked?"anonymous":null,wrapX:!1!==this.get("wrapX")},data:{title:this._elements.formTitle.value,abstract:t.data.abstract,legend:t.data.legend}}}getLayerFromOptions(t){if(t){t.source.tileGrid=this.getTileGrid(t.source.matrixSet,t.source.minZoom,t.source.maxZoom,t.source.tilePrefix),t.layer.source=new h.default(t.source);var e=new l.default(t.layer);return delete t.layer.source,delete t.source.tileGrid,e}}}}),a("i28LF",function(t,i){e(t.exports,"default",()=>p);var r=n("4QhZh"),o=n("3SMVV"),a=n("eEuqc"),s=n("gzr8q"),l=n("8P7EG"),h=n("iQyfo"),u=n("fkmMz"),c=n("QtBcx"),f=n("6od7S");n("2NQly");var d=class extends c.default{constructor(t){var e=Object.assign({},t=t||{});e.target===document.body&&delete e.target,e.target?(e.className=((e.className||"")+" ol-wmscapabilities ol-hidden").trim(),delete e.target):(e.className=((e.className||"")+" ol-wmscapabilities").trim(),e.handleClick=function(){i.showDialog()}),super(e);var i=this;this._proxy=t.proxy,this.set("srs",t.srs||[]),this.set("cors",t.cors),this.set("trace",t.trace),this.set("title",t.title),this.set("loadLabel",t.loadLabel),this.set("optional",t.optional),this.createDialog(t),this._elements.formVersion.value="1.0.0";var r=this._getParser();this._ajax=new u.default({dataType:"text",auth:t.authentication}),this._ajax.on("success",(function(t){var e;try{e=r.read(t.response)}catch(t){this.showError({type:"load",error:t})}e&&(e.Capability.Layer.Layer?this.showCapabilities(e):this.showError({type:"noLayer"})),this.dispatchEvent({type:"capabilities",capabilities:e}),"function"==typeof t.options.callback&&t.options.callback(e)}).bind(this)),this._ajax.on("error",(function(t){this.showError({type:"load",error:t}),this.dispatchEvent({type:"capabilities"}),t.options.callback}).bind(this)),this._ajax.on("loadstart",(function(){this._elements.element.classList.add("ol-searching")}).bind(this)),this._ajax.on("loadend",(function(){this._elements.element.classList.remove("ol-searching")}).bind(this)),t.onselect&&this.on("load",function(e){t.onselect(e.layer,e.options)})}_getParser(){return new l.default}createDialog(t){var e=t.target;e&&e!==document.body||(this._dialog=new f.default({className:"ol-wmscapabilities",closeBox:!0,closeOnSubmit:!1,target:t.target}),this._dialog.on("button",(function(t){"submit"===t.button&&this.getCapabilities(t.inputs.url.value)}).bind(this)),e=null);var i=(0,h.default).create("DIV",{className:("ol-wmscapabilities "+(t.className||"")).trim(),parent:e});this._elements={element:e||i};var r=(0,h.default).create("DIV",{className:"ol-url",parent:i}),o=this._elements.input=(0,h.default).create("INPUT",{className:"url",type:"text",tabIndex:1,placeholder:t.placeholder||"service url...",autocorrect:"off",autocapitalize:"off",parent:r});if(o.addEventListener("keyup",(function(e){13===e.keyCode&&this.getCapabilities(o.value,t)}).bind(this)),t.services){var n=(0,h.default).create("SELECT",{className:"url",on:{change:(function(e){var i=e.target.options[e.target.selectedIndex].value;this.getCapabilities(i,t),e.target.selectedIndex=0}).bind(this)},parent:r});for(var a in(0,h.default).create("OPTION",{html:" ",parent:n}),t.services)(0,h.default).create("OPTION",{html:a,value:t.services[a],parent:n})}(0,h.default).create("BUTTON",{click:(function(){this.getCapabilities(o.value,t)}).bind(this),html:t.searchLabel||"search",parent:r}),this._elements.error=(0,h.default).create("DIV",{className:"ol-error",parent:r});var s=this._elements.result=(0,h.default).create("DIV",{className:"ol-result",parent:i}),l=(0,h.default).create("DIV",{className:"ol-preview",html:t.previewLabel||"preview",parent:s});this._elements.preview=(0,h.default).create("IMG",{parent:l}),this._img=new Image,this._img.crossOrigin="Anonymous",this._img.addEventListener("error",(function(){l.className="ol-preview tainted",this._elements.formCrossOrigin.checked=!1}).bind(this)),this._img.addEventListener("load",(function(){l.className="ol-preview ok",this._elements.formCrossOrigin.checked=!0}).bind(this)),this._elements.select=(0,h.default).create("DIV",{className:"ol-select-list",tabIndex:2,parent:s}),this._elements.data=(0,h.default).create("DIV",{className:"ol-data",parent:s}),this._elements.buttons=(0,h.default).create("DIV",{className:"ol-buttons",parent:s}),this._elements.legend=(0,h.default).create("IMG",{className:"ol-legend",parent:s});var u=this._elements.form=(0,h.default).create("UL",{className:"ol-wmsform",parent:i}),c=(function(t,e,i){var r=(0,h.default).create("LI",{parent:u});if((0,h.default).create("LABEL",{html:this.labels[t],parent:r}),"boolean"==typeof e)this._elements[t]=(0,h.default).create("INPUT",{type:"checkbox",checked:e,parent:r});else if(e instanceof Array){var o=this._elements[t]=(0,h.default).create("SELECT",{parent:r});e.forEach((function(t){(0,h.default).create("OPTION",{html:t,value:t,parent:o})}).bind(this))}else this._elements[t]=(0,h.default).create("INPUT",{value:void 0===e?"":e,placeholder:i||"",type:"number"==typeof e?"number":"text",parent:r});return r}).bind(this);c("formTitle"),c("formLayer","","layer1,layer2,...");var d=c("formMap");d.setAttribute("data-param","map"),(d=c("formStyle")).setAttribute("data-param","style"),c("formFormat",["image/png","image/jpeg"]),c("formMinZoom",0),c("formMaxZoom",20),(d=c("formExtent","","xmin,ymin,xmax,ymax")).setAttribute("data-param","extent");var p=d.querySelector("input");return(0,h.default).create("BUTTON",{title:this.labels.mapExtent,click:(function(){p.value=this.getMap().getView().calculateExtent(this.getMap().getSize()).join(",")}).bind(this),parent:d}),(d=c("formProjection","")).setAttribute("data-param","proj"),c("formCrossOrigin",!1),(d=c("formVersion","1.3.0")).setAttribute("data-param","version"),c("formAttribution",""),(0,h.default).create("BUTTON",{html:this.get("loadLabel")||"Load",click:(function(){var t=this._getFormOptions(),e=this.getLayerFromOptions(t);this.dispatchEvent({type:"load",layer:e,options:t}),this._dialog.hide()}).bind(this),parent:u}),i}getLayerFromOptions(t){t.layer.source=new o.default(t.source);var e=new a.default(t.layer);return delete t.layer.source,e}setMap(t){super.setMap(t),this._dialog&&this._dialog.setMap(t)}getDialog(){return this._dialog}showDialog(t,e){this.showError(),this._elements.formProjection.value||(this._elements.formProjection.value=this.getMap().getView().getProjection().getCode()),this._dialog&&this._dialog.show({title:void 0===this.get("title")?"WMS":this.get("title"),content:this._elements.element}),this.getCapabilities(t,e);var i=this._elements.select.querySelector(".selected");i&&(this._elements.select.scrollTop=i.offsetTop-20)}testUrl(t){return!!RegExp("^(https?:\\/\\/)((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=\\/-]*)?(\\#[-a-z\\d_]*)?$","i").test(t)}getRequestParam(t){return{SERVICE:"WMS",REQUEST:"GetCapabilities",VERSION:t.version||"1.3.0"}}getCapabilities(t,e){if(t){if(!this.testUrl(t)){this.showError({type:"badUrl"});return}e=e||{};var i=(t=t.split("?"))[1];t=t[0],this._elements.formMap.value="",this._elements.formLayer.value="",this._elements.formStyle.value="",this._elements.formTitle.value="",this._elements.formProjection.value=this.getMap().getView().getProjection().getCode(),this._elements.formFormat.selectedIndex=0;var r=e.map||"",o={};i&&(i=i.replace(/^\?/,"").split("&")).forEach((function(t){if((t=t.split("="))[1]=decodeURIComponent(t[1]||""),/^map$/i.test(t[0])&&(r=t[1],this._elements.formMap.value=r),/^layers$/i.test(t[0])&&(this._elements.formLayer.value=t[1],this._elements.formTitle.value=t[1].split(",")[0]),/^style$/i.test(t[0])&&(this._elements.formStyle.value=t[1]),/^crs$/i.test(t[0])&&(this._elements.formProjection.value=t[1]),/^format$/i.test(t[0])){for(var e,i=0;e=this._elements.formFormat.options[i];i++)if(e.value===t[1]){this._elements.formFormat.selectedIndex=i;break}}this.get("optional")&&this.get("optional").split(",").forEach((function(e){e===t[0]&&(o[e]=t[1])}).bind(this))}).bind(this));var n=this.getRequestParam(e),a=[];for(var s in r&&(n.MAP=r,a.push("map="+r)),o)n[s]=o[s],a.push(s+"="+o[s]);if(this._elements.input.value=(t||"")+(a?"?"+a.join("&"):""),this.clearForm(),this._proxy){var l="";for(var h in n)l+=(l?"&":"")+h+"="+n[h];this._ajax.send(this._proxy,{url:l},{timeout:e.timeout||1e4,callback:e.onload,abort:!1})}else this._ajax.send(t,n,{timeout:e.timeout||1e4,callback:e.onload,abort:!1})}}showError(t){t?this._elements.error.innerHTML=this.error[t.type]||"ERROR ("+t.type+")":this._elements.error.innerHTML="",t&&"load"===t.type?this._elements.form.classList.add("visible"):this._elements.form.classList.remove("visible")}clearForm(){this._elements.result.classList.remove("ol-visible"),this.showError(),this._elements.select.innerHTML="",this._elements.data.innerHTML="",this._elements.preview.src="",this._elements.legend.src="",this._elements.legend.classList.remove("visible")}showCapabilities(t){this._elements.result.classList.add("ol-visible");var e=[],i=(function(r,o){o=o||0,r.Layer.forEach((function(n){n.Attribution||(n.Attribution=r.Attribution),n.EX_GeographicBoundingBox||(n.EX_GeographicBoundingBox=r.EX_GeographicBoundingBox);var a=(0,h.default).create("DIV",{className:(n.Layer?"ol-title ":"")+"level-"+o,html:n.Name||n.Title,click:(function(){this._elements.buttons.innerHTML="",this._elements.data.innerHTML="",this._elements.legend.src=this._elements.preview.src="",this._elements.element.classList.remove("ol-form"),this.showError();var i=this.getOptionsFromCap(n,t),r=this.getLayerFromOptions(i);if(this._currentOptions=i,e.forEach(function(t){t.classList.remove("selected")}),a.classList.add("selected"),r){(0,h.default).create("BUTTON",{html:this.get("loadLabel")||"Load",className:"ol-load",click:(function(){this.dispatchEvent({type:"load",layer:r,options:i}),this._dialog&&this._dialog.hide()}).bind(this),parent:this._elements.buttons}),(0,h.default).create("BUTTON",{className:"ol-wmsform",click:(function(){this._elements.element.classList.toggle("ol-form")}).bind(this),parent:this._elements.buttons});var o=this.getMap().getView().getResolution(),s=this.getMap().getView().getCenter();this._elements.preview.src=r.getPreview(s,o,this.getMap().getView().getProjection()),this._img.src=this._elements.preview.src,(0,h.default).create("p",{className:"ol-title",html:i.data.title,parent:this._elements.data}),(0,h.default).create("p",{html:i.data.abstract,parent:this._elements.data}),i.data.legend&&i.data.legend.length?(this._elements.legend.src=i.data.legend[0],this._elements.legend.classList.add("visible")):(this._elements.legend.src="",this._elements.legend.classList.remove("visible"))}}).bind(this),parent:this._elements.select});e.push(a),n.Layer&&i(n,o+1)}).bind(this))}).bind(this);this._elements.select.innerHTML="",i(t.Capability.Layer)}getLayerResolution(t,e,i){var r="min"===t?"MinScaleDenominator":"MaxScaleDenominator";if(void 0!==e[r])return e[r]/(72/2.54*100);if(!e.Layer)return"min"===t?0:156543.03392804097;i="min"===t?156543.03392804097:0;for(var o=0;o<e.Layer.length;o++){var n=this.getLayerResolution(t,e.Layer[o],i);void 0!==n&&(i=Math[t](i,n))}return i}getOptionsFromCap(t,e){var i,o,n=e.Capability.Request.GetMap.Format,a=[/png/,/jpeg/,/gif/];for(o=0;o<3;o++){for(var l=0;l<n.length;l++)if(a[o].test(n[l])){i=n[l];break}if(i)break}i||(i=n[0]);var h=this.getMap().getView().getProjection().getCode();this.showError();var u=!1;t.CRS?t.CRS.indexOf(h)>=0?u=!0:t.CRS.indexOf("EPSG:4326")>=0?(h="EPSG:4326",u=!0):this.get("srs").forEach(function(e){t.CRS.indexOf(e)>=0&&(h=e,u=!0)}):u=!1,!u&&(this.showError({type:"srs"}),this.get("trace")&&console.log("BAD srs: ",t.CRS));var c=t.EX_GeographicBoundingBox;c&&(c=(0,s.transformExtent)(c,"EPSG:4326",this.getMap().getView().getProjection()));var f=[];t.Attribution&&t.Attribution.Title&&f.push('<a href="'+encodeURI(t.Attribution.OnlineResource)+'">&copy; '+t.Attribution.Title.replace(/</g,"&lt;")+"</a>");var d={title:t.Title,extent:c,queryable:t.queryable,abstract:t.Abstract,minResolution:this.getLayerResolution("min",t),maxResolution:this.getLayerResolution("max",t)||156543.03392804097},p={url:e.Capability.Request.GetMap.DCPType[0].HTTP.Get.OnlineResource,projection:h,attributions:f,crossOrigin:this.get("cors")?"anonymous":null,params:{LAYERS:t.Name,FORMAT:i,VERSION:e.version||"1.3.0"}},g=new r.default({projection:this.getMap().getView().getProjection()});g.setResolution(d.minResolution);var m=Math.round(g.getZoom());g.setResolution(d.maxResolution);var y=Math.round(g.getZoom());if(this._fillForm({title:d.title,layers:p.params.LAYERS,format:p.params.FORMAT,minZoom:y,maxZoom:m,extent:c?c.join(","):"",projection:p.projection,attribution:p.attributions[0]||"",version:p.params.VERSION}),this.get("trace")){var x=JSON.stringify([p],null,"	").replace(/\\"/g,'"');d.source="SOURCE";var v="new ol.layer.Tile ("+JSON.stringify(d,null,"	")+")";console.log(v=v.replace(/\\"/g,'"').replace('"SOURCE"',"new ol.source.TileWMS("+x+")").replace(/\\t/g,"	").replace(/\\n/g,"\n").replace("([\n	","(").replace("}\n])","})")),delete d.source}var b=[];return t.Style&&t.Style.forEach(function(t){t.LegendURL&&b.push(t.LegendURL[0].OnlineResource)}),{layer:d,source:p,data:{title:t.Title,abstract:t.Abstract,logo:t.Attribution&&t.Attribution.LogoURL?t.Attribution.LogoURL.OnlineResource:void 0,keyword:t.KeywordList,legend:b,opaque:t.opaque,queryable:t.queryable}}}_getFormOptions(){var t=parseInt(this._elements.formMinZoom.value),e=parseInt(this._elements.formMaxZoom.value),i=new r.default({projection:this.getMap().getView().getProjection()});i.setZoom(t);var o=i.getResolution();i.setZoom(e);var n=i.getResolution(),a=[];this._elements.formExtent.value&&this._elements.formExtent.value.split(",").forEach(function(t){a.push(parseFloat(t))}),4!==a.length&&(a=void 0);var s=[];this._elements.formAttribution.value&&s.push(this._elements.formAttribution.value);var l={layer:{title:this._elements.formTitle.value,extent:a,maxResolution:o,minResolution:n},source:{url:this._elements.input.value,crossOrigin:this._elements.formCrossOrigin.checked?"anonymous":null,projection:this._elements.formProjection.value,attributions:s,params:{FORMAT:this._elements.formFormat.options[this._elements.formFormat.selectedIndex].value,LAYERS:this._elements.formLayer.value,VERSION:this._elements.formVersion.value}},data:{title:this._elements.formTitle.value}};return this._elements.formMap.value&&(l.source.params.MAP=this._elements.formMap.value),l}_fillForm(t){var e,i;for(i=0,this._elements.formTitle.value=t.title,this._elements.formLayer.value=t.layers,this._elements.formStyle.value=t.style;e=this._elements.formFormat.options[i];i++)if(e.value===t.format){this._elements.formFormat.selectedIndex=i;break}this._elements.formExtent.value=t.extent||"",this._elements.formMaxZoom.value=t.maxZoom,this._elements.formMinZoom.value=t.minZoom,this._elements.formProjection.value=t.projection,this._elements.formAttribution.value=t.attribution,this._elements.formVersion.value=t.version}loadLayer(t,e,i){this.getCapabilities(t,{onload:(function(t){t?t.Capability.Layer.Layer.forEach((function(r){if(r.Name===e||r.Identifier===e){var o=this.getOptionsFromCap(r,t),n=this.getLayerFromOptions(o);this.dispatchEvent({type:"load",layer:n,options:o}),"function"==typeof i&&i({layer:n,options:o})}}).bind(this)):this.dispatchEvent({type:"load",error:!0})}).bind(this)})}};d.prototype.error={load:"Can't retrieve service capabilities, try to add it manually...",badUrl:"The input value is not a valid url...",TileMatrix:"No TileMatrixSet supported...",noLayer:"No layer available for this service...",srs:"The service projection looks different from that of your map, it may not display correctly..."},d.prototype.labels={formTitle:"Title:",formLayer:"Layers:",formMap:"Map:",formStyle:"Style:",formFormat:"Format:",formMinZoom:"Min zoom level:",formMaxZoom:"Max zoom level:",formExtent:"Extent:",mapExtent:"use map extent...",formProjection:"Projection:",formCrossOrigin:"CrossOrigin:",formVersion:"Version:",formAttribution:"Attribution:"};var p=d}),a("8P7EG",function(t,i){e(t.exports,"default",()=>L);var r=n("dfksr"),o=n("fbciu"),a=n("5kLwh"),s=n("3VMq2");let l=[null,"http://www.opengis.net/wms"],h=(0,o.makeStructureNS)(l,{Service:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},f,t,e)}),Capability:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},u,t,e)})}),u=(0,o.makeStructureNS)(l,{Request:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},b,t,e)}),Exception:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)([],m,t,e)}),Layer:(0,o.makeObjectPropertySetter)(function(t,e){let i=(0,o.pushParseAndPop)({},y,t,e);return void 0===i.Layer?Object.assign(i,I(t,e)):i})});class c extends r.default{constructor(){super(),this.version=void 0}readFromNode(t){return this.version=t.getAttribute("version").trim(),(0,o.pushParseAndPop)({version:this.version},h,t,[])||null}}let f=(0,o.makeStructureNS)(l,{Name:(0,o.makeObjectPropertySetter)(a.readString),Title:(0,o.makeObjectPropertySetter)(a.readString),Abstract:(0,o.makeObjectPropertySetter)(a.readString),KeywordList:(0,o.makeObjectPropertySetter)(T),OnlineResource:(0,o.makeObjectPropertySetter)(s.readHref),ContactInformation:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},d,t,e)}),Fees:(0,o.makeObjectPropertySetter)(a.readString),AccessConstraints:(0,o.makeObjectPropertySetter)(a.readString),LayerLimit:(0,o.makeObjectPropertySetter)(a.readPositiveInteger),MaxWidth:(0,o.makeObjectPropertySetter)(a.readPositiveInteger),MaxHeight:(0,o.makeObjectPropertySetter)(a.readPositiveInteger)}),d=(0,o.makeStructureNS)(l,{ContactPersonPrimary:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},p,t,e)}),ContactPosition:(0,o.makeObjectPropertySetter)(a.readString),ContactAddress:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},g,t,e)}),ContactVoiceTelephone:(0,o.makeObjectPropertySetter)(a.readString),ContactFacsimileTelephone:(0,o.makeObjectPropertySetter)(a.readString),ContactElectronicMailAddress:(0,o.makeObjectPropertySetter)(a.readString)}),p=(0,o.makeStructureNS)(l,{ContactPerson:(0,o.makeObjectPropertySetter)(a.readString),ContactOrganization:(0,o.makeObjectPropertySetter)(a.readString)}),g=(0,o.makeStructureNS)(l,{AddressType:(0,o.makeObjectPropertySetter)(a.readString),Address:(0,o.makeObjectPropertySetter)(a.readString),City:(0,o.makeObjectPropertySetter)(a.readString),StateOrProvince:(0,o.makeObjectPropertySetter)(a.readString),PostCode:(0,o.makeObjectPropertySetter)(a.readString),Country:(0,o.makeObjectPropertySetter)(a.readString)}),m=(0,o.makeStructureNS)(l,{Format:(0,o.makeArrayPusher)(a.readString)}),y=(0,o.makeStructureNS)(l,{Name:(0,o.makeObjectPropertySetter)(a.readString),Title:(0,o.makeObjectPropertySetter)(a.readString),Abstract:(0,o.makeObjectPropertySetter)(a.readString),KeywordList:(0,o.makeObjectPropertySetter)(T),CRS:(0,o.makeObjectPropertyPusher)(a.readString),EX_GeographicBoundingBox:(0,o.makeObjectPropertySetter)(function(t,e){let i=(0,o.pushParseAndPop)({},v,t,e);if(!i)return;let r=i.westBoundLongitude,n=i.southBoundLatitude,a=i.eastBoundLongitude,s=i.northBoundLatitude;if(void 0!==r&&void 0!==n&&void 0!==a&&void 0!==s)return[r,n,a,s]}),BoundingBox:(0,o.makeObjectPropertyPusher)(function(t,e){let i=[(0,a.readDecimalString)(t.getAttribute("minx")),(0,a.readDecimalString)(t.getAttribute("miny")),(0,a.readDecimalString)(t.getAttribute("maxx")),(0,a.readDecimalString)(t.getAttribute("maxy"))],r=[(0,a.readDecimalString)(t.getAttribute("resx")),(0,a.readDecimalString)(t.getAttribute("resy"))];return{crs:t.getAttribute("CRS"),extent:i,res:r}}),Dimension:(0,o.makeObjectPropertyPusher)(function(t,e){return{name:t.getAttribute("name"),units:t.getAttribute("units"),unitSymbol:t.getAttribute("unitSymbol"),default:t.getAttribute("default"),multipleValues:(0,a.readBooleanString)(t.getAttribute("multipleValues")),nearestValue:(0,a.readBooleanString)(t.getAttribute("nearestValue")),current:(0,a.readBooleanString)(t.getAttribute("current")),values:(0,a.readString)(t)}}),Attribution:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},x,t,e)}),AuthorityURL:(0,o.makeObjectPropertyPusher)(function(t,e){let i=M(t,e);if(i)return i.name=t.getAttribute("name"),i}),Identifier:(0,o.makeObjectPropertyPusher)(a.readString),MetadataURL:(0,o.makeObjectPropertyPusher)(function(t,e){let i=M(t,e);if(i)return i.type=t.getAttribute("type"),i}),DataURL:(0,o.makeObjectPropertyPusher)(M),FeatureListURL:(0,o.makeObjectPropertyPusher)(M),Style:(0,o.makeObjectPropertyPusher)(function(t,e){return(0,o.pushParseAndPop)({},E,t,e)}),MinScaleDenominator:(0,o.makeObjectPropertySetter)(a.readDecimal),MaxScaleDenominator:(0,o.makeObjectPropertySetter)(a.readDecimal),Layer:(0,o.makeObjectPropertyPusher)(I)}),x=(0,o.makeStructureNS)(l,{Title:(0,o.makeObjectPropertySetter)(a.readString),OnlineResource:(0,o.makeObjectPropertySetter)(s.readHref),LogoURL:(0,o.makeObjectPropertySetter)(C)}),v=(0,o.makeStructureNS)(l,{westBoundLongitude:(0,o.makeObjectPropertySetter)(a.readDecimal),eastBoundLongitude:(0,o.makeObjectPropertySetter)(a.readDecimal),southBoundLatitude:(0,o.makeObjectPropertySetter)(a.readDecimal),northBoundLatitude:(0,o.makeObjectPropertySetter)(a.readDecimal)}),b=(0,o.makeStructureNS)(l,{GetCapabilities:(0,o.makeObjectPropertySetter)(P),GetMap:(0,o.makeObjectPropertySetter)(P),GetFeatureInfo:(0,o.makeObjectPropertySetter)(P)}),w=(0,o.makeStructureNS)(l,{Format:(0,o.makeObjectPropertyPusher)(a.readString),DCPType:(0,o.makeObjectPropertyPusher)(function(t,e){return(0,o.pushParseAndPop)({},_,t,e)})}),_=(0,o.makeStructureNS)(l,{HTTP:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},S,t,e)})}),S=(0,o.makeStructureNS)(l,{Get:(0,o.makeObjectPropertySetter)(M),Post:(0,o.makeObjectPropertySetter)(M)}),E=(0,o.makeStructureNS)(l,{Name:(0,o.makeObjectPropertySetter)(a.readString),Title:(0,o.makeObjectPropertySetter)(a.readString),Abstract:(0,o.makeObjectPropertySetter)(a.readString),LegendURL:(0,o.makeObjectPropertyPusher)(C),StyleSheetURL:(0,o.makeObjectPropertySetter)(M),StyleURL:(0,o.makeObjectPropertySetter)(M)}),A=(0,o.makeStructureNS)(l,{Format:(0,o.makeObjectPropertySetter)(a.readString),OnlineResource:(0,o.makeObjectPropertySetter)(s.readHref)}),N=(0,o.makeStructureNS)(l,{Keyword:(0,o.makeArrayPusher)(a.readString)});function I(t,e){let i=e[e.length-1],r=(0,o.pushParseAndPop)({},y,t,e);if(!r)return;let n=(0,a.readBooleanString)(t.getAttribute("queryable"));void 0===n&&(n=i.queryable),r.queryable=void 0!==n&&n;let s=(0,a.readNonNegativeIntegerString)(t.getAttribute("cascaded"));void 0===s&&(s=i.cascaded),r.cascaded=s;let l=(0,a.readBooleanString)(t.getAttribute("opaque"));void 0===l&&(l=i.opaque),r.opaque=void 0!==l&&l;let h=(0,a.readBooleanString)(t.getAttribute("noSubsets"));void 0===h&&(h=i.noSubsets),r.noSubsets=void 0!==h&&h;let u=(0,a.readDecimalString)(t.getAttribute("fixedWidth"));u||(u=i.fixedWidth),r.fixedWidth=u;let c=(0,a.readDecimalString)(t.getAttribute("fixedHeight"));return c||(c=i.fixedHeight),r.fixedHeight=c,["Style","CRS","AuthorityURL"].forEach(function(t){if(t in i){let e=r[t]||[];r[t]=e.concat(i[t])}}),["EX_GeographicBoundingBox","BoundingBox","Dimension","Attribution","MinScaleDenominator","MaxScaleDenominator"].forEach(function(t){if(!(t in r)){let e=i[t];r[t]=e}}),r}function M(t,e){return(0,o.pushParseAndPop)({},A,t,e)}function P(t,e){return(0,o.pushParseAndPop)({},w,t,e)}function C(t,e){let i=M(t,e);if(i){let e=[(0,a.readNonNegativeIntegerString)(t.getAttribute("width")),(0,a.readNonNegativeIntegerString)(t.getAttribute("height"))];return i.size=e,i}}function T(t,e){return(0,o.pushParseAndPop)([],N,t,e)}var L=c}),a("dfksr",function(t,i){e(t.exports,"default",()=>a);var r=n("lVQul"),o=n("fbciu"),a=class{read(t){if(!t)return null;if("string"==typeof t){let e=(0,o.parse)(t);return this.readFromDocument(e)}return(0,o.isDocument)(t)?this.readFromDocument(t):this.readFromNode(t)}readFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE)return this.readFromNode(e);return null}readFromNode(t){(0,r.abstract)()}}}),a("fbciu",function(t,i){let r,o;e(t.exports,"XML_SCHEMA_INSTANCE_URI",()=>s),e(t.exports,"createElementNS",()=>l),e(t.exports,"getDocument",()=>M),e(t.exports,"getAllTextContent",()=>h),e(t.exports,"isDocument",()=>u),e(t.exports,"parse",()=>c),e(t.exports,"makeArrayExtender",()=>f),e(t.exports,"makeArrayPusher",()=>d),e(t.exports,"makeReplacer",()=>p),e(t.exports,"makeObjectPropertyPusher",()=>g),e(t.exports,"makeObjectPropertySetter",()=>m),e(t.exports,"makeChildAppender",()=>y),e(t.exports,"makeArraySerializer",()=>x),e(t.exports,"makeSimpleNodeFactory",()=>v),e(t.exports,"OBJECT_PROPERTY_NODE_FACTORY",()=>b),e(t.exports,"makeSequence",()=>w),e(t.exports,"makeStructureNS",()=>_),e(t.exports,"parseNode",()=>S),e(t.exports,"pushParseAndPop",()=>E),e(t.exports,"pushSerializeAndPop",()=>N),e(t.exports,"getXMLSerializer",()=>I);var a=n("kBSVF");let s="http://www.w3.org/2001/XMLSchema-instance";function l(t,e){return M().createElementNS(t,e)}function h(t,e){return(function t(e,i,r){if(e.nodeType==Node.CDATA_SECTION_NODE||e.nodeType==Node.TEXT_NODE)i?r.push(String(e.nodeValue).replace(/(\r\n|\r|\n)/g,"")):r.push(e.nodeValue);else{let o;for(o=e.firstChild;o;o=o.nextSibling)t(o,i,r)}return r})(t,e,[]).join("")}function u(t){return"documentElement"in t}function c(t){return new DOMParser().parseFromString(t,"application/xml")}function f(t,e){return function(i,r){let o=t.call(void 0!==e?e:this,i,r);if(void 0!==o){let t=r[r.length-1];(0,a.extend)(t,o)}}}function d(t,e){return function(i,r){let o=t.call(void 0!==e?e:this,i,r);void 0!==o&&r[r.length-1].push(o)}}function p(t,e){return function(i,r){let o=t.call(void 0!==e?e:this,i,r);void 0!==o&&(r[r.length-1]=o)}}function g(t,e,i){return function(r,o){let n=t.call(void 0!==i?i:this,r,o);if(void 0!==n){let t;let i=o[o.length-1],a=void 0!==e?e:r.localName;a in i?t=i[a]:(t=[],i[a]=t),t.push(n)}}}function m(t,e,i){return function(r,o){let n=t.call(void 0!==i?i:this,r,o);void 0!==n&&(o[o.length-1][void 0!==e?e:r.localName]=n)}}function y(t,e){return function(i,r,o){t.call(void 0!==e?e:this,i,r,o),o[o.length-1].node.appendChild(i)}}function x(t,e){let i,r;return function(e,o,n){if(void 0===i){i={};let o={};o[e.localName]=t,i[e.namespaceURI]=o,r=v(e.localName)}A(i,r,o,n)}}function v(t,e){return function(i,r,o){let n=r[r.length-1].node,a=t;return void 0===a&&(a=o),l(void 0!==e?e:n.namespaceURI,a)}}let b=v();function w(t,e){let i=e.length,r=Array(i);for(let o=0;o<i;++o)r[o]=t[e[o]];return r}function _(t,e,i){let r,o;for(r=0,i=void 0!==i?i:{},o=t.length;r<o;++r)i[t[r]]=e;return i}function S(t,e,i,r){let o;for(o=e.firstElementChild;o;o=o.nextElementSibling){let e=t[o.namespaceURI];if(void 0!==e){let t=e[o.localName];void 0!==t&&t.call(r,o,i)}}}function E(t,e,i,r,o){return r.push(t),S(e,i,r,o),r.pop()}function A(t,e,i,r,o,n){let a,s;let l=(void 0!==o?o:i).length;for(let h=0;h<l;++h)void 0!==(a=i[h])&&void 0!==(s=e.call(void 0!==n?n:this,a,r,void 0!==o?o[h]:void 0))&&t[s.namespaceURI][s.localName].call(n,s,a,r)}function N(t,e,i,r,o,n,a){return o.push(t),A(e,i,r,o,n,a),o.pop()}function I(){return void 0===r&&"undefined"!=typeof XMLSerializer&&(r=new XMLSerializer),r}function M(){return void 0===o&&"undefined"!=typeof document&&(o=document.implementation.createDocument("","",null)),o}}),a("5kLwh",function(t,i){e(t.exports,"readBoolean",()=>a),e(t.exports,"readBooleanString",()=>s),e(t.exports,"readDateTime",()=>l),e(t.exports,"readDecimal",()=>h),e(t.exports,"readDecimalString",()=>u),e(t.exports,"readPositiveInteger",()=>c),e(t.exports,"readNonNegativeIntegerString",()=>f),e(t.exports,"readString",()=>d),e(t.exports,"writeBooleanTextNode",()=>p),e(t.exports,"writeStringTextNode",()=>v),e(t.exports,"writeCDATASection",()=>g),e(t.exports,"writeDateTimeTextNode",()=>m),e(t.exports,"writeDecimalTextNode",()=>y),e(t.exports,"writeNonNegativeIntegerTextNode",()=>x);var r=n("fbciu"),o=n("7f9mA");function a(t){return s((0,r.getAllTextContent)(t,!1))}function s(t){let e=/^\s*(true|1)|(false|0)\s*$/.exec(t);if(e)return void 0!==e[1]}function l(t){let e=Date.parse((0,r.getAllTextContent)(t,!1));return isNaN(e)?void 0:e/1e3}function h(t){return u((0,r.getAllTextContent)(t,!1))}function u(t){let e=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)\s*$/i.exec(t);if(e)return parseFloat(e[1])}function c(t){return f((0,r.getAllTextContent)(t,!1))}function f(t){let e=/^\s*(\d+)\s*$/.exec(t);if(e)return parseInt(e[1],10)}function d(t){return(0,r.getAllTextContent)(t,!1).trim()}function p(t,e){v(t,e?"1":"0")}function g(t,e){t.appendChild((0,r.getDocument)().createCDATASection(e))}function m(t,e){let i=new Date(1e3*e),n=i.getUTCFullYear()+"-"+(0,o.padNumber)(i.getUTCMonth()+1,2)+"-"+(0,o.padNumber)(i.getUTCDate(),2)+"T"+(0,o.padNumber)(i.getUTCHours(),2)+":"+(0,o.padNumber)(i.getUTCMinutes(),2)+":"+(0,o.padNumber)(i.getUTCSeconds(),2)+"Z";t.appendChild((0,r.getDocument)().createTextNode(n))}function y(t,e){let i=e.toPrecision();t.appendChild((0,r.getDocument)().createTextNode(i))}function x(t,e){let i=e.toString();t.appendChild((0,r.getDocument)().createTextNode(i))}function v(t,e){t.appendChild((0,r.getDocument)().createTextNode(e))}}),a("3VMq2",function(t,i){e(t.exports,"readHref",()=>r);function r(t){return t.getAttributeNS("http://www.w3.org/1999/xlink","href")}}),a("2NQly",function(t,e){var i=n("205E0"),r=n("cpPSZ"),o=n("3SMVV"),a=n("2K2IB"),s=n("jZquI"),l=n("gzr8q"),h=n("3VGVQ");i.default.prototype.getPreview=function(){return"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAABHNCSVQICAgIfAhkiAAAAAlwSFlzAAAk6QAAJOkBUCTn+AAAABl0RVh0U29mdHdhcmUAd3d3Lmlua3NjYXBlLm9yZ5vuPBoAAANeSURBVHic7ZpPiE1RHMc/780MBhkik79JSUlIUbOxI+wkI2yRhYSUlJLNpJF/xcpiJBmZGBZsNM1CkmhKITGkGbH0/BuPmXnP4rxbb/TOn3fvOffeec6nfqvb/b7f93fveeec37ng8Xg8Ho/nf6Uu4d+fDswFssCvhHOJhaXAMeApMAQUyyIPPAdOAiuTStAVy4EHjDWsix5gdRLJ2mY34ulWYz6IEeA4kIk9awtkgTOEM/5vdAKT4k0/Ou3YMR/ELcbRm9AKFLBbgCJwNE4TYZkJfMG++SIwDCyLz0o4bI17WdyJz0r1TAZ+oDcxCBwAFgIzEIuhvcBbg3sLwOK4DFXLFvQGniCGSSUagS4DjUPOHESkA3XiOWCORqMR6Nfo9DjI3QqPUSd+ylBnv0Zn0GrWFvmIOvGNhjqrNDp/EAutyFgRKUM2tgO+Gur81FxvAKYZaimxXYBvmuuLDHWWaK4X0RfJCNsF6NdcbzXU2a65PohYFKWOc+jn8PUajbWIXaBKp9NB7lZYh34OzwFbFfd/NtDYYSth27urLGIm0M31AL3APWAAmIooymaDnPIl/Vz4NN1yHrd7gcvxWQnHAuA3bsyPop8hUsE13BSgK04TUViBeFo2zedJ8S6wElexW4D2eNOPTjNi6WvD/DtEr8E6tk6GGoAmxFY2iFHE9NZiQf8gogiB9gTEH23izAZuE77vHyU+ANucO1QwD3hD/MbLowAcdm20EmkwXx4n3NodS9rMB2HabYpEWs0HcRqHp0fNwAvJD+eBTZr7p6BvmQVxUaEzEbiruNfJekH15L8jtrEm7JJolEcOmKXRqQOuKDQuY7HZY8s8iNfzkSLxIuI43FTrkkLnOlBfRW4VsWk+oAX5weknxFAxJQNckGgVgZuIRVoomoGXEmGTMa+iQ6K7M4SW7k24QYgiuDQPYinbhugiF4H3RGtzZYCzyIvQXfpNI1ybLyeLpf5+iTbkRbiP2EcocTHm4+YI8iI8RFHwWjAfsA95Q+YZFU6wasl8wB7kReijtNbIILa0vcg/PRlGfPQwHmlCviDqAzaA+OREtzqr1ejOIDorxlNEjTGUBV4nnUWCvAJxGDlA8q9j3DEArAn2zvXAfOwfl6eVAmJrPpJ0Ih6Px+PxeJLjLwPul3vj5d0eAAAAAElFTkSuQmCC"},r.default.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getTileGrid().getTileCoordForCoordAndResolution(t,e);return this.getTileUrlFunction().call(this,i,this.getProjection())},o.default.prototype.getPreview=function(t,e){t||(t=[21020,6355964]),e||(e=150);var i=this.getTileUrlFunction();if(i){var r=(this.getTileGrid()||this.getTileGridForProjection(this.getProjection())).getTileCoordForCoordAndResolution(t,e);return i.call(this,r,1,this.getProjection())}return(this.getGetFeatureInfoUrl?this.getGetFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{}):this.getFeatureInfoUrl(t,e,this.getProjection()||"EPSG:3857",{})).replace(/getfeatureinfo/i,"GetMap")},a.default.prototype.getPreview=function(t,e,i){if(this.get("preview"))return[this.get("preview")];if(e||(e=150),e<this.getMinResolution()||e>this.getMaxResolution()){var r=this.getMinResolution(),o=this.getMaxResolution();for(o>1e5&&(o=156543),r<.15&&(r=.15),e=o;o>r;)r*=2,o/=2,e=r}var n=this.getExtent();if(t||(t=[21020,6355964]),n&&!(0,s.containsCoordinate)(n,t)&&(t=[(n[0]+n[2])/2,(n[1]+n[3])/2]),i&&(t=(0,l.transform)(t,i,this.getSource().getProjection())),this.getSource&&this.getSource())try{return[this.getSource().getPreview(t,e)]}catch(t){}return[]},h.default.prototype.getPreview=function(t,e){if(this.get("preview"))return[this.get("preview")];var i=[];if(this.getLayers)for(var r=this.getLayers().getArray(),o=0;o<r.length;o++)i=i.concat(r[o].getPreview(t,e));return i}}),a("kUWI9",function(t,i){e(t.exports,"default",()=>N);var r=n("4cjlx"),o=n("dfksr"),a=n("jZquI"),s=n("fbciu"),l=n("5kLwh"),h=n("3VMq2");let u=[null,"http://www.opengis.net/wmts/1.0"],c=[null,"http://www.opengis.net/ows/1.1"],f=(0,s.makeStructureNS)(u,{Contents:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)({},p,t,e)})});class d extends o.default{constructor(){super(),this.owsParser_=new r.default}readFromNode(t){let e=t.getAttribute("version");e&&(e=e.trim());let i=this.owsParser_.readFromNode(t);return i?(i.version=e,(i=(0,s.pushParseAndPop)(i,f,t,[]))||null):null}}let p=(0,s.makeStructureNS)(u,{Layer:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},g,t,e)}),TileMatrixSet:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},_,t,e)})}),g=(0,s.makeStructureNS)(u,{Style:(0,s.makeObjectPropertyPusher)(function(t,e){let i=(0,s.pushParseAndPop)({},m,t,e);if(!i)return;let r="true"===t.getAttribute("isDefault");return i.isDefault=r,i}),Format:(0,s.makeObjectPropertyPusher)(l.readString),TileMatrixSetLink:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},y,t,e)}),Dimension:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},b,t,e)}),ResourceURL:(0,s.makeObjectPropertyPusher)(function(t,e){let i=t.getAttribute("format"),r=t.getAttribute("template"),o=t.getAttribute("resourceType"),n={};return i&&(n.format=i),r&&(n.template=r),o&&(n.resourceType=o),n})},(0,s.makeStructureNS)(c,{Title:(0,s.makeObjectPropertySetter)(l.readString),Abstract:(0,s.makeObjectPropertySetter)(l.readString),WGS84BoundingBox:(0,s.makeObjectPropertySetter)(E),Identifier:(0,s.makeObjectPropertySetter)(l.readString)})),m=(0,s.makeStructureNS)(u,{LegendURL:(0,s.makeObjectPropertyPusher)(function(t,e){let i={};return i.format=t.getAttribute("format"),i.href=(0,h.readHref)(t),i})},(0,s.makeStructureNS)(c,{Title:(0,s.makeObjectPropertySetter)(l.readString),Identifier:(0,s.makeObjectPropertySetter)(l.readString)})),y=(0,s.makeStructureNS)(u,{TileMatrixSet:(0,s.makeObjectPropertySetter)(l.readString),TileMatrixSetLimits:(0,s.makeObjectPropertySetter)(function(t,e){return(0,s.pushParseAndPop)([],x,t,e)})}),x=(0,s.makeStructureNS)(u,{TileMatrixLimits:(0,s.makeArrayPusher)(function(t,e){return(0,s.pushParseAndPop)({},v,t,e)})}),v=(0,s.makeStructureNS)(u,{TileMatrix:(0,s.makeObjectPropertySetter)(l.readString),MinTileRow:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),MaxTileRow:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),MinTileCol:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),MaxTileCol:(0,s.makeObjectPropertySetter)(l.readPositiveInteger)}),b=(0,s.makeStructureNS)(u,{Default:(0,s.makeObjectPropertySetter)(l.readString),Value:(0,s.makeObjectPropertyPusher)(l.readString)},(0,s.makeStructureNS)(c,{Identifier:(0,s.makeObjectPropertySetter)(l.readString)})),w=(0,s.makeStructureNS)(c,{LowerCorner:(0,s.makeArrayPusher)(A),UpperCorner:(0,s.makeArrayPusher)(A)}),_=(0,s.makeStructureNS)(u,{WellKnownScaleSet:(0,s.makeObjectPropertySetter)(l.readString),TileMatrix:(0,s.makeObjectPropertyPusher)(function(t,e){return(0,s.pushParseAndPop)({},S,t,e)})},(0,s.makeStructureNS)(c,{SupportedCRS:(0,s.makeObjectPropertySetter)(l.readString),Identifier:(0,s.makeObjectPropertySetter)(l.readString),BoundingBox:(0,s.makeObjectPropertySetter)(E)})),S=(0,s.makeStructureNS)(u,{TopLeftCorner:(0,s.makeObjectPropertySetter)(A),ScaleDenominator:(0,s.makeObjectPropertySetter)(l.readDecimal),TileWidth:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),TileHeight:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),MatrixWidth:(0,s.makeObjectPropertySetter)(l.readPositiveInteger),MatrixHeight:(0,s.makeObjectPropertySetter)(l.readPositiveInteger)},(0,s.makeStructureNS)(c,{Identifier:(0,s.makeObjectPropertySetter)(l.readString)}));function E(t,e){let i=(0,s.pushParseAndPop)([],w,t,e);if(2==i.length)return(0,a.boundingExtent)(i)}function A(t,e){let i=(0,l.readString)(t).split(/\s+/);if(!i||2!=i.length)return;let r=+i[0],o=+i[1];if(!(isNaN(r)||isNaN(o)))return[r,o]}var N=d}),a("4cjlx",function(t,i){e(t.exports,"default",()=>E);var r=n("dfksr"),o=n("fbciu"),a=n("3VMq2"),s=n("5kLwh");let l=[null,"http://www.opengis.net/ows/1.1"],h=(0,o.makeStructureNS)(l,{ServiceIdentification:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},_,t,e)}),ServiceProvider:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},S,t,e)}),OperationsMetadata:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},x,t,e)})});class u extends r.default{constructor(){super()}readFromNode(t){return(0,o.pushParseAndPop)({},h,t,[])||null}}let c=(0,o.makeStructureNS)(l,{DeliveryPoint:(0,o.makeObjectPropertySetter)(s.readString),City:(0,o.makeObjectPropertySetter)(s.readString),AdministrativeArea:(0,o.makeObjectPropertySetter)(s.readString),PostalCode:(0,o.makeObjectPropertySetter)(s.readString),Country:(0,o.makeObjectPropertySetter)(s.readString),ElectronicMailAddress:(0,o.makeObjectPropertySetter)(s.readString)}),f=(0,o.makeStructureNS)(l,{Value:(0,o.makeObjectPropertyPusher)(function(t,e){return(0,s.readString)(t)})}),d=(0,o.makeStructureNS)(l,{AllowedValues:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},f,t,e)})}),p=(0,o.makeStructureNS)(l,{Phone:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},v,t,e)}),Address:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},c,t,e)})}),g=(0,o.makeStructureNS)(l,{HTTP:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},m,t,e)})}),m=(0,o.makeStructureNS)(l,{Get:(0,o.makeObjectPropertyPusher)(function(t,e){let i=(0,a.readHref)(t);if(i)return(0,o.pushParseAndPop)({href:i},b,t,e)}),Post:void 0}),y=(0,o.makeStructureNS)(l,{DCP:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},g,t,e)})}),x=(0,o.makeStructureNS)(l,{Operation:function(t,e){let i=t.getAttribute("name"),r=(0,o.pushParseAndPop)({},y,t,e);r&&(e[e.length-1][i]=r)}}),v=(0,o.makeStructureNS)(l,{Voice:(0,o.makeObjectPropertySetter)(s.readString),Facsimile:(0,o.makeObjectPropertySetter)(s.readString)}),b=(0,o.makeStructureNS)(l,{Constraint:(0,o.makeObjectPropertyPusher)(function(t,e){let i=t.getAttribute("name");if(i)return(0,o.pushParseAndPop)({name:i},d,t,e)})}),w=(0,o.makeStructureNS)(l,{IndividualName:(0,o.makeObjectPropertySetter)(s.readString),PositionName:(0,o.makeObjectPropertySetter)(s.readString),ContactInfo:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},p,t,e)})}),_=(0,o.makeStructureNS)(l,{Abstract:(0,o.makeObjectPropertySetter)(s.readString),AccessConstraints:(0,o.makeObjectPropertySetter)(s.readString),Fees:(0,o.makeObjectPropertySetter)(s.readString),Title:(0,o.makeObjectPropertySetter)(s.readString),ServiceTypeVersion:(0,o.makeObjectPropertySetter)(s.readString),ServiceType:(0,o.makeObjectPropertySetter)(s.readString)}),S=(0,o.makeStructureNS)(l,{ProviderName:(0,o.makeObjectPropertySetter)(s.readString),ProviderSite:(0,o.makeObjectPropertySetter)(a.readHref),ServiceContact:(0,o.makeObjectPropertySetter)(function(t,e){return(0,o.pushParseAndPop)({},w,t,e)})});var E=u}),a("DXhxE",function(t,i){e(t.exports,"default",()=>a);var r=n("6vpLi");class o extends r.default{constructor(t,e){super(),t&&this.read(t,e)}}o.prototype.read=function(t,e){e=e||{},t.setProjection(e.proj||"EPSG:4326"),t.set("unit",e.unit||"dms")},o.prototype.write=function(t){return{valeur:t.getProjection().getCode(),unite:t.get("units")}};var a=o}),a("iKsmi",function(t,i){e(t.exports,"default",()=>s);var r=n("6vpLi"),o=n("dKl6q");class a extends r.default{constructor(t,e,i,r){super(),t&&this.read(t,e,i,r)}}a.prototype.read=function(t,e,i,r){new o.default(t.getLegend(),e,i,r),i||t.collapse(!e.collapsed)},a.prototype.write=function(t){let e=new(0,o.default)().write(t.getLegend());return e.legendVisible=!t.isCollapsed(),e};var s=a}),a("5y4py",function(t,i){e(t.exports,"carteV4",()=>l),e(t.exports,"storyV4",()=>h);var r=n("bzSwf"),o=n("lqNjm"),a=n("bqoF2");function s(t){return!!("string"==typeof t?parseInt(t):t)}function l(t){if(console.log(JSON.parse(JSON.stringify(t))),t.version>4)return;t.version=4.01,t.param.title=t.param.titre;let e=t.param.controlParams;t.controls={zoom:s(e.zoomBtn),scaleLine:s(e.scaleLine),searchBar:s(e.pSearchBar),layerSwitcher:s(e.selectLayer),locate:s(e.geoloc),profil:s(e.profil),printDlg:s(e.printDlg)},s(e.coords)?t.controls.mousePosition={proj:t.param.proj.valeur,unit:"ds"===t.param.proj.unite?"dms":"dec"}:t.controls.mousePosition=!1,t.legende||(t.legende={}),t.controls.legend={title:t.legende.title||t.legende.legendtitle||"Légende",visible:e.legend||!1,collapsed:t.legende.legendVisible||!1,width:t.legende.legendWidth||300,lineHeight:t.legende.lineHeight||55,items:t.legende.items||t.legende.legend||[]},["titre","status","controlParams","proj"].forEach(e=>delete t.param[e]),delete t.legende;let i=[];t.symbolLib&&Object.keys(t.symbolLib).forEach(e=>i.push(t.symbolLib[e])),t.symbolLib=i,t.layers.forEach((e,i)=>{e.wms&&"Plan IGN niveaux de gris"===e.name&&(t.layers[i]={description:a.default.capabilities["GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2"].desc,layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS",name:e.name,opacity:e.opacity,titre:e.titre,type:"Geoportail",visibility:e.visibility})}),console.log("CARTE:",t)}function h(t){if(!(t.version>4)){var e;if(console.log(JSON.parse(JSON.stringify(t))),t.version=4.01,t.type=t.modele.type,t.param={title:t.infos.title,subTitle:t.infos.subTitle,logo:t.infos.logo,showTitle:t.infos.visibility,description:t.infos.description,lon:t.cartes.lon,lat:t.cartes.lat,rot:t.cartes.rot,zoom:t.cartes.zoom,synchronize:t.cartes.synchronize},t.layout={theme:(e=t.modele.theme,r.layout[e]?e:({custom:"custom",gris:"gray",vert:"green",brun:"braun",bleu:"blue",violet:"purple"})[e]||"blue"),photo:t.photo,colors:[],voletPosition:t.volet?t.volet.position.replace("gauche","left").replace("droite","right"):"right",voletWidth:parseInt(t.volet?t.volet.width:0)||250,compare:t.compare?t.compare.pos:""},t.modele.bColor&&t.layout.colors.push((0,o.asArray)(t.modele.bColor)),t.modele.fColor&&t.layout.colors.push((0,o.asArray)(t.modele.fColor)),t.compare?(t.cartes=[{title:t.compare.map1_titre,id:t.compare.map1},{title:t.compare.map2_titre,id:t.compare.map2}],t.param.lon=t.compare.lon,t.param.lat=t.compare.lat,t.param.zoom=t.compare.zoom):t.cartes=[{title:t.cartes.name,id:t.cartes.idUniqueIFrame}],t.etapes&&(t.steps=[],t.etapes.sort.forEach(e=>{t.steps.push(t.etapes[e])}),t.animStep=t.etapes.anim),t.tools=t.ifrTools,t.controls={zoom:s(t.controls.zoom),scaleLine:s(t.controls.scale),rotation:s(t.controls.rotation),searchBar:s(t.controls.search),layerSwitcher:s(t.controls.lswitcher),switcherModel:t.controls.switcherModel,locate:s(t.controls.geoloc),profil:s(t.controls.profil),printDlg:s(t.ifrTools.print),mousePosition:s(t.controls.coordinates),legend:t.controls.legende?t.controls.legende[0]:s(t.controls.legende)},t.bulle&&(t.bulle.type=(t.bulle.type||"default").replace("mainPopup","").trim()),t.popup={popup:t.bulle||{type:"default"},tips:t.tooltips},"onglet"===t.type){t.cartes=[];let e=t.onglets;t.tabs=[],e.sort.forEach(i=>{t.tabs.push({id:e[i].map,title:e[i].title,showTitle:e[i].showTitle,description:e[i].content})})}["modele","infos","volet","etapes","ifrTools","photo","bulle","tooltips","onglets"].forEach(e=>{delete t[e]})}}}),a("bzSwf",function(i,r){e(i.exports,"layout",()=>u),e(i.exports,"default",()=>c);var o=n("lqNjm"),a=n("4JxMN"),s=n("8SYbd"),l=n("DW21e");let h={'[data-role="storymap"] select':{color:"COLOR","background-color":"BGCOLOR"},'[data-role="storymap"]':{color:"COLOR","background-color":"BGCOLOR"},'[data-role="storymap"] .tabs:before':{color:"BGCOLOR"},'[data-role="storymap"] .tabs .header > div':{color:"COLOR","background-color":"BGCOLOR"},'[data-role="storymap"] .tabs .header > div.selected':{color:"BGCOLOR","background-color":"COLOR"},'[data-role="storymap"] .volet':{color:"VOLETCOLOR","background-color":"BGVOLETCOLOR"},'[data-role="storymap"] .volet .pages span:hover, [data-role="storymap"] .volet .pages span.active':{color:"BGVOLETCOLOR","background-color":"VOLETCOLOR","border-color":"VOLETCOLOR"},'[data-role="storymap"] .volet .content .toc li:hover, [data-role="storymap"] .tools > div:hover':{color:"BGVOLETCOLOR","background-color":"VOLETCOLOR"},'[data-role="storymap"] .tools > .select':{color:"BGVOLETCOLOR","background-color":"VOLETCOLOR"},'[data-role="storymap"] .title > img':{color:"BGCOLOR"},'[data-role="storymap"] .map button':{color:"COLOR","background-color":"BGCOLOR_08"},'[data-role="storymap"] .map button:focus, [data-role="storymap"] .map button:hover':{"background-color":"BGCOLOR"},'[data-role="storymap"] .ol-layerswitcher':{color:"DARKCOLOR"},'[data-role="storymap"] .ol-search li.copy':{"background-color":"DARKCOLOR",opacity:".65"},'.ol-ext-print-dialog button[type="submit"], .ol-ext-print-dialog .ol-saveas select, .ol-ext-print-dialog .ol-savelegend select':{"background-color":"DARKCOLOR",opacity:".65"},".carte-info-dialog .permalink, .ol-ext-dialog.mapInfo > form .ol-buttons input:hover":{"background-color":"LIGHTCOLOR"},".ol-control.ol-bar .ol-toggle.ol-active > button, .ol-control.ol-bar .ol-toggle.ol-active button:hover":{color:"DARKCOLOR","background-color":"LIGHTCOLOR"},".ol-control.ol-bar .ol-option-bar:before":{"border-color":"transparent transparent DARKCOLOR"},".ol-control.ol-bar .ol-control.ol-text-button div:hover, .ol-control.ol-bar .ol-control.ol-text-button > div":{color:"DARKCOLOR","background-color":"LIGHTCOLOR"},'[data-role="storymap"] .map, .ol-ext-dialog.mapInfo':{color:"DARKCOLOR"},".ol-ext-dialog.mapInfo a":{color:"DARKCOLOR"}},u={default:[[255,255,255],[33,33,33]],gray:[[255,255,255],[102,102,102],[32,32,32],[210,210,210]],green:[[153,207,192],[255,255,255],null,null,[57,121,103],[206,232,227]],braun:[[54,44,42],[226,192,179],null,null,[54,44,42],[249,242,240]],blue:[[255,255,255],[51,102,153],(0,a.darkenColor)([51,102,153]),[185,198,210]],purple:[[144,104,190],[110,211,207],null,null,[144,104,190]]};var c=function(e){if("string"==typeof e&&(e=u[e]),!e)return(0,a.default)("*",null),[[33,33,33],[255,255,255]];let i=e[0],r=e[1];if(!r){r=t(s)(i).brighten(2).rgb();var n=(0,l.toHSL)(r)[2]-(0,l.toHSL)(i)[2];(0,l.toHSL)(i)[2]>40&&n<40&&(r=t(s)(i).darken(2).rgb()),(0,l.toHSL)(i)[2]<40&&n<40&&(r=t(s)(i).brighten(3).rgb())}let c=e[2]||t(s)(i).darken(2).rgb(),f=e[3]||t(s)(i).set("hsl.l",.8).set("hsl.s",.05).rgb(),d=e[4]||r,p=Math.min(60,255-Math.max(i[0],i[1],i[2])),g=e[5]||[Math.min(255,i[0]+p),Math.min(255,i[1]+p),Math.min(255,i[2]+p)];for(let t in h){let e=Object.assign({},h[t]),n=[5,8,10];for(let t in e)n.forEach(n=>{i[3]=n/10;let a=RegExp("BGCOLOR"+(10===n?"":"_0"+n),"g");e[t]=e[t].replace(a,(0,o.asString)(i)),c[3]=n/10,a=RegExp("DARKCOLOR"+(10===n?"":"_0"+n),"g"),e[t]=e[t].replace(a,(0,o.asString)(c)),f[3]=n/10,a=RegExp("LIGHTCOLOR"+(10===n?"":"_0"+n),"g"),e[t]=e[t].replace(a,(0,o.asString)(f)),g[3]=n/10,a=RegExp("BGVOLETCOLOR"+(10===n?"":"_0"+n),"g"),e[t]=e[t].replace(a,(0,o.asString)(g)),d[3]=n/10,a=RegExp("VOLETCOLOR"+(10===n?"":"_0"+n),"g"),e[t]=e[t].replace(a,(0,o.asString)(d)),r[3]=n/10,a=RegExp("COLOR"+(10===n?"":"_0"+n),"g"),e[t]=e[t].replace(a,(0,o.asString)(r))});(0,a.default)(t,e)}return e}}),a("4JxMN",function(t,i){e(t.exports,"darkenColor",()=>s),e(t.exports,"default",()=>l);var r=document.createElement("style");r.setAttribute("type","text/css"),document.body?document.body.appendChild(r):document.head.appendChild(r);let o=[];function n(t,e){for(var i=0;i<o.length;i++)if(o[i].selector===t&&o[i].property===e)return i;return -1}function a(){var t="\n";o.forEach(function(e){t+=e.selector+" {"+e.property+":"+e.value+"; }\n"}),r.innerHTML=t}function s(t,e){return void 0===e&&(e=Math.min(t[0],t[1],t[2])),function(t,e){void 0===e&&(e=Math.min(128,255-Math.max(t[0],t[1],t[2])));let i=[];for(let r=0;r<3;r++)i[r]=Math.max(0,Math.min(255,t[r]+(e||5)));return i}(t,-(e||5))}window.getR=function(){return o};var l=function(t,e,i){var r=e;if("*"===t&&null===e)o=[],a();else if(void 0===e){var s={};return o.forEach(function(e){e.selector===t&&(s[e.property]=e.value)}),s}else if("string"==typeof e){if(void 0===i){var l=n(t,e);return l<0?null:o[l].value}(r={})[e]=i}for(var h in r)!function(t,e,i){var r=n(t,e);r>=0&&o.splice(r,1),i&&o.push({selector:t,property:e,value:i})}(t,h,r[h]);a()}}),a("DW21e",function(t,i){e(t.exports,"toHSL",()=>o),e(t.exports,"toHSV",()=>a),e(t.exports,"fromHSV",()=>s),e(t.exports,"toHexa",()=>l);var r=n("lqNjm"),o=function(t,e){void 0===e&&(e=100),Array.isArray(t)||(t=(0,r.asArray)(t));var i,o,n=t[0]/255,a=t[1]/255,s=t[2]/255,l=Math.max(n,a,s),h=Math.min(n,a,s),u=(l+h)/2;if(l===h)i=o=0;else{var c=l-h;switch(o=u>.5?c/(2-l-h):c/(l+h),l){case n:i=(a-s)/c+(a<s?6:0);break;case a:i=(s-n)/c+2;break;case s:i=(n-a)/c+4}}var f=[Math.round(60*i*e)/e,Math.round(100*o*e)/e,Math.round(100*u*e)/e];return t.length>3&&(f[3]=t[3]),f},a=function(t,e){void 0===e&&(e=100),Array.isArray(t)||(t=(0,r.asArray)(t));var i,o=t[0]/255,n=t[1]/255,a=t[2]/255,s=Math.max(o,n,a),l=Math.min(o,n,a),h=s-l;if(s==l)i=0;else switch(s){case o:i=(n-a)/h+(n<a?6:0);break;case n:i=(a-o)/h+2;break;case a:i=(o-n)/h+4}var u=[Math.round(60*i*e)/e,Math.round(100*(0==s?0:h/s)*e)/e,Math.round(100*s*e)/e];return t.length>3&&(u[3]=t[3]),u},s=function(t,e){void 0===e&&(e=1e3);var i,r,o,n=t[0]/360,a=t[1]/100,s=t[2]/100,l=Math.floor(6*n),h=6*n-l,u=s*(1-a),c=s*(1-h*a),f=s*(1-(1-h)*a);switch(l%6){case 0:i=s,r=f,o=u;break;case 1:i=c,r=s,o=u;break;case 2:i=u,r=s,o=f;break;case 3:i=u,r=c,o=s;break;case 4:i=f,r=u,o=s;break;case 5:i=s,r=u,o=c}var d=[Math.round(255*i*e)/e,Math.round(255*r*e)/e,Math.round(255*o*e)/e];return t.length>3&&(d[3]=t[3]),d},l=function(t){return"#"+(16777216+(t[0]<<16)+(t[1]<<8)+t[2]).toString(16).slice(1)}}),a("bqoF2",function(t,i){e(t.exports,"default",()=>a);var r=n("6gELa");n("2C2LU"),n("2q9Px"),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS",{key:"ortho",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",title:"Photographies aériennes",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,bbox:[-178.18713,-85,175,85],desc:"Photographies aériennes",originators:{FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:12,bbox:[-175,-85,175,85]},{minZoom:13,maxZoom:19,bbox:[-1.9662633,42.316307,8.25674,50.18387]}]},MPM:{href:"http://www.marseille-provence.com/",attribution:"Marseille Provence Métropole",logo:"https://wxs.ign.fr/static/logos/MPM/MPM.gif",minZoom:20,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[5.076959,43.153347,5.7168245,43.454994]}]},IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:13,maxZoom:20,constraint:[{bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:20,maxZoom:20,bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:19,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242]},{minZoom:13,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.11242]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[2.2243388,44.76621,2.7314367,45.11295]},{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,6.4295278,46.8038]}]},SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[3.2470036,43.441483,4.8729386,44.47377]},{minZoom:13,maxZoom:18,bbox:[1.6784439,42.316307,4.8729386,44.978218]}]},CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[8.428783,41.338627,9.688606,43.08541]}]},FEDER_AUVERGNE:{href:"http://www.europe-en-auvergne.eu/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/FEDER_AUVERGNE/FEDER_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-2.457367,46.19304,.951426,48.57609]}]},FEDER2:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER2/FEDER2.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[2.9441726,48.824635,4.269964,50.080326]},{minZoom:13,maxZoom:18,bbox:[1.3577043,48.824635,4.269964,50.37648]}]},"E-MEGALIS":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/E-MEGALIS/E-MEGALIS.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-3.7059498,47.971947,-1.8486879,48.99035]}]},OCCITANIE:{href:"https://www.laregion.fr/",attribution:"La Région Occitanie; Pyrénées - Méditerranée",logo:"https://wxs.ign.fr/static/logos/OCCITANIE/OCCITANIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2086434,48.805965,2.4859917,48.915382]}]},PREFECTURE_GUADELOUPE:{href:"www.guadeloupe.pref.gouv.fr/",attribution:"guadeloupe",logo:"https://wxs.ign.fr/static/logos/PREFECTURE_GUADELOUPE/PREFECTURE_GUADELOUPE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-61.82342,14.371942,-60.787838,16.521578]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.4883244,47.471867,3.1349874,48.354233]}]},"e-Megalis":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/e-Megalis/e-Megalis.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[-3.7487078,47.23789,-1.9810898,48.263657]},{minZoom:13,maxZoom:18,bbox:[-5.1937118,47.23789,-.98568505,48.980812]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},"MEGALIS-BRETAGNE":{href:"https://www.megalisbretagne.org/",attribution:"Syndicat mixte Mégalis Bretagne",logo:"https://wxs.ign.fr/static/logos/MEGALIS-BRETAGNE/MEGALIS-BRETAGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.2086344,47.591938,-3.3396015,48.808697]}]},"LANGUEDOC-ROUSSILLON":{href:"https://www.laregion.fr/",attribution:"Région Occitanie",logo:"https://wxs.ign.fr/static/logos/LANGUEDOC-ROUSSILLON/LANGUEDOC-ROUSSILLON.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.63972,4.208843,43.979004]}]},GRAND_EST:{href:"https://www.grandest.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/GRAND_EST/GRAND_EST.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[5.362788,47.390827,7.6924667,49.58011]}]},CNES_AUVERGNE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_AUVERGNE/CNES_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2656832,45.279934,4.0227704,46.8038]}]},HAUTS_DE_FRANCE:{href:"https://www.hautsdefrance.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/HAUTS_DE_FRANCE/HAUTS_DE_FRANCE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0740242,48.81521,4.3390365,51.11242]}]},"BOURGOGNE-FRANCHE-COMTE":{href:"https://www.bourgognefranchecomte.fr/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/BOURGOGNE-FRANCHE-COMTE/BOURGOGNE-FRANCHE-COMTE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[2.837849,47.302628,4.364638,48.408287]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[5.5923314,45.017353,7.2323394,46.438328]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},ASTRIUM:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/ASTRIUM/ASTRIUM.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},CNES_971:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_971/CNES_971.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.82342,15.819616,-60.99497,16.521578]}]},CNES_972:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_972/CNES_972.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.247208,14.371855,-60.778458,14.899901]}]},PPIGE:{href:"http://www.ppige-npdc.fr/",attribution:"PPIGE",logo:"https://wxs.ign.fr/static/logos/PPIGE/PPIGE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[1.5212119,49.957302,4.2673664,51.090965]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[163.47784,-22.767689,167.94624,-19.434975]}]},CNES_ALSACE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_ALSACE/CNES_ALSACE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[6.8086324,47.39981,7.668318,48.32695]}]},CNES_978:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_978/CNES_978.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-63.160706,18.04345,-62.962185,18.133898]}]},CNES_974:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_974/CNES_974.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[55.205757,-21.401262,55.84643,-20.862825]}]},CNES_975:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_975/CNES_975.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-56.410988,46.734093,-56.10308,47.149963]}]},CNES_976:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_976/CNES_976.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[44.916977,-13.089187,45.30442,-12.564543]}]},CNES_977:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_977/CNES_977.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-62.952805,17.862621,-62.78276,17.98024]}]}}}),(0,r.default).register("HR.ORTHOIMAGERY.ORTHOPHOTOS",{key:"ortho",server:"https://wxs.ign.fr/geoportail/wmts",layer:"HR.ORTHOIMAGERY.ORTHOPHOTOS",title:"Ortho 20 cm",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242],desc:"Le produit BD ORTHO® V3 est une collection de mosaïques d'orthophotographies numériques en couleurs ou en Infra Rouge couleurs, rectifiées dans la projection adaptée au territoire couvert.\nLa BD ORTHO® V3 se compose d'images numériques (sans habillage ni surcharge) et d'indications de géoréférencement. Le contenu informationnel permet localement une utilisation jusqu'au 1 :2,000ième pour mettre en valeur le territoire, enrichir la visualisation des données et des projets.",originators:{FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[-2.457367,46.19304,.951426,48.57609]}]},CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[8.509344,41.815296,9.688606,43.08541]}]},FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[-1.9662633,42.316307,8.25674,50.18387]}]},GRAND_EST:{href:"https://www.grandest.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/GRAND_EST/GRAND_EST.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[5.362788,48.309772,7.6924667,49.58011]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},FEDER_AUVERGNE:{href:"http://www.europe-en-auvergne.eu/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/FEDER_AUVERGNE/FEDER_AUVERGNE.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[3.2470036,43.441483,4.8729386,44.47377]}]},IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242]}]},PREFECTURE_GUADELOUPE:{href:"www.guadeloupe.pref.gouv.fr/",attribution:"guadeloupe",logo:"https://wxs.ign.fr/static/logos/PREFECTURE_GUADELOUPE/PREFECTURE_GUADELOUPE.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:6,maxZoom:19,bbox:[-61.82342,14.371942,-60.787838,16.521578]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHO-SAT.PLEIADES.2015",{key:"satellite",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHO-SAT.PLEIADES.2015",title:"PLEIADES - 2015",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Agrégation des images Pleiades de l'année 2015",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]},AIRBUS:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/AIRBUS/AIRBUS.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS.1950-1965",{key:"orthohisto",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS.1950-1965",title:"Photographies aériennes historiques 1950-1965",format:"image/png",style:"BDORTHOHISTORIQUE",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-67.72138,-21.401262,55.84643,51.094486],desc:"<![CDATA[Couverture en photographies aériennes de la France des années 50, telle qu'elle se présentait avant les grands aménagements des années 60. Cette couverture a été réalisée à partir des photographies aériennes historiques numérisées par l'IGN. Elle est disponible sur la France métropolitaine, les départements et régions d'Outre-Mer (la Guyane n'est que partiellement couverte) et les collectivités d'Outre-Mer sauf la Polynésie française.\nLes photographies sont orthorectifiées, c'est-à-dire corrigées des déformations dues à la prise de vue et au relief du terrain, et assemblées pour fournir une visualisation continue superposable avec le Référentiel à Grande Echelle (RGE®) ou les cartes.]]>",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:3,maxZoom:18,constraint:[{minZoom:3,maxZoom:18,bbox:[-67.72138,-21.401262,55.84643,51.094486]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS.1980-1995",{key:"orthohisto",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS.1980-1995",title:"Ortho Historique 1980-1995",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[8.446117,41.276886,9.725247,43.08986],desc:"<![CDATA[Couverture en photographies aériennes de la France des années 11980 à 1995. Cette couverture a été réalisée à partir des photographies aériennes historiques numérisées par l'IGN. Elle est disponible sur la France métropolitaine, les départements et régions d'Outre-Mer (la Guyane n'est que partiellement couverte) et les collectivités d'Outre-Mer sauf la Polynésie française.\nLes photographies sont orthorectifiées, c'est-à-dire corrigées des déformations dues à la prise de vue et au relief du terrain, et assemblées pour fournir une visualisation continue superposable avec le Référentiel à Grande Echelle (RGE®) ou les cartes.]]>",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:3,maxZoom:18,constraint:[{minZoom:3,maxZoom:18,bbox:[8.446117,41.276886,9.725247,43.08986]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS2000-2005",{key:"orthohisto",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS2000-2005",title:"Photographies aériennes 2000-2005",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.090965],desc:"Prises de vues aériennes des territoires pour les années 2000 à 2005",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS2006-2010",{key:"orthohisto",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS2006-2010",title:"Photographies aériennes 2006-2010",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Prises de vues aériennes des territoires disponibles à la fin des années 2006 à 2010",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]}}}),(0,r.default).register("ORTHOIMAGERY.ORTHOPHOTOS2011-2015",{key:"orthohisto",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS2011-2015",title:"Photographies aériennes 2011-2015",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.094486],desc:"Prises de vues aériennes des territoires disponibles à la fin des années 2011 à 2015",originators:{SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.6784439,42.316307,4.8729386,44.978218]}]},CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[8.428783,41.338627,9.688606,43.08541]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.090965]}]},IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.094486]}]},FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-2.457367,46.19304,.951426,48.57609]}]},FEDER2:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER2/FEDER2.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.3577043,48.824635,4.269964,50.37648]}]},CNES_971:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_971/CNES_971.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-61.82342,15.819616,-60.99497,16.521578]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[5.5923314,45.017353,7.2323394,46.438328]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.4883244,47.471867,3.1349874,48.354233]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.0398402,44.60505,4.5090737,46.8038]}]},"e-Megalis":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/e-Megalis/e-Megalis.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-5.1937118,47.23789,-.98568505,48.980812]}]},PPIGE:{href:"http://www.ppige-npdc.fr/",attribution:"PPIGE",logo:"https://wxs.ign.fr/static/logos/PPIGE/PPIGE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.5212119,49.957302,4.2673664,51.090965]}]},CNES_972:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_972/CNES_972.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-61.247208,14.371855,-60.778458,14.899901]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},CNES_ALSACE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_ALSACE/CNES_ALSACE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[6.8086324,47.39981,7.668318,48.32695]}]},CNES_978:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_978/CNES_978.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-63.160706,18.04345,-62.962185,18.133898]}]},FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-1.9662633,42.316307,8.25674,50.18387]}]},CNES_974:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_974/CNES_974.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[55.205757,-21.401262,55.84643,-20.862825]}]},CNES_976:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_976/CNES_976.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[44.916977,-13.089187,45.30442,-12.564543]}]},CNES_977:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_977/CNES_977.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-62.952805,17.862621,-62.78276,17.98024]}]},CNES_AUVERGNE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_AUVERGNE/CNES_AUVERGNE.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.2656832,45.279934,4.0227704,46.8038]}]},CNES_975:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_975/CNES_975.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-56.410988,46.734093,-56.10308,47.149963]}]}}}),(0,r.default).register("TRANSPORTS.DRONES.RESTRICTIONS",{key:"transports",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTS.DRONES.RESTRICTIONS",title:"Restrictions UAS catégorie Ouverte et Aéromodélisme",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-9.881468,40.57599,11.678099,51.442818],desc:"Représentation des zones soumises à interdictions ou à restrictions pour l’usage, à titre de loisir, d’aéronefs télépilotés (ou drones), sur le territoire métropolitain, à jour au 07-2020 Elle intègre partiellement les interdictions s'appuyant sur des données non publiées à l'AIP et ne couvre pas les interdictions temporaires. Cette carte est basée sur l’arrêté « espace » du 09/11/2017. La représentation des zones soumises à interdictions ou à restrictions n’engage pas la responsabilité des producteurs de la donnée. Le contour des agglomérations est fourni à titre purement indicatif.\nConsultez les interdictions temporaires sur https://www.sia.aviation-civile.gouv.fr/.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-9.881468,40.57599,11.678099,51.442818]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",title:"Carte Mondiale pour la mini-vue",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75],desc:"Carte Mondiale pour la mini-vue",originators:{NATURALEARTH:{href:"http://www.naturalearthdata.com",attribution:"Natural Earth",logo:"https://wxs.ign.fr/static/logos/NATURALEARTH/NATURALEARTH.gif",minZoom:1,maxZoom:8,constraint:[{minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40",title:"Carte de l'état-major (1820-1866)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:15,bbox:[-6.0888886,41.18441,10.96101,51.274532],desc:"Carte française en couleurs du XIXè siècle en couleurs superposable aux cartes et données modernes.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.0888886,41.18441,10.96101,51.274532]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",title:"Plan IGN v2",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-175,-85,175,85],desc:"Cartographie multi-échelles sur le territoire national, issue des bases de données vecteur de l’IGN, mis à jour régulièrement et réalisée selon un processus entièrement automatisé.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-175,-85,175,85]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.1900TYPEMAPS",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.1900TYPEMAPS",title:"Carte topographique - environs de Paris (1906)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:10,maxZoom:15,bbox:[1.6294072,48.472553,3,49.15477],desc:"Carte topographique de Paris et de ses environs éditée en 1906.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:10,maxZoom:15,constraint:[{minZoom:10,maxZoom:15,bbox:[1.6294072,48.472553,3,49.15477]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR10",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR10",title:"Carte de l'état-major - environs de Paris (1818 - 1824)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:17,bbox:[1.8268186,48.38474,2.7973807,49.514153],desc:"Carte des environs de Paris au 1 : 10 000 établie entre 1818 et 1824.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[1.8268186,48.38474,2.7973807,49.514153]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.BONNE",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.BONNE",title:"Guyane française (1780)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:10,bbox:[-55.912685,-.49941024,-50.08348,7.8896613],desc:"Carte de Guyane française établie par M. Bonne, Ingénieur-Hydrographe de la Marine. Cette carte figure dans l'\"atlas de toutes les parties connues du globe terrestre\", ouvrage rédigé par l'abbé Guillaume-Thomas RAYNAL et publié à Genève en 1780.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:10,constraint:[{minZoom:0,maxZoom:10,bbox:[-55.912685,-.49941024,-50.08348,7.8896613]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950",title:"SCAN50 Historique de 1950",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75],desc:"SCAN50 produit par l'IGN en 1950",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:3,maxZoom:15,constraint:[{minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.TERRIER_V1",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.TERRIER_V1",title:"Plan Terrier V1 (XVIIIe siècle)",format:"image/png",style:"nolegend",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[8.362839,41.25677,9.752813,43.117405],desc:"Plan Terrier Corse V1 (XVIIIe siècle) - GEOGRAPHICALGRIDSYSTEMS.TERRIER_V1",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[8.362839,41.25677,9.752813,43.117405]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.TERRIER_V2",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.TERRIER_V2",title:"Plan Terrier V2 (XVIIIe siècle)",format:"image/png",style:"nolegend",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[8.362839,41.256767,9.752816,43.117405],desc:"Plan Terrier, cartographie ancienne du XVIIIème siècle sur la Corse version est une version numérisée par les archives militaires du Ministère de la Défense",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[8.362839,41.256767,9.752816,43.117405]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",title:"Plan IGN j+1",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN j+1",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}}),(0,r.default).register("CADASTRALPARCELS.PARCELLAIRE_EXPRESS",{key:"parcellaire",server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",title:"PCI vecteur",format:"image/png",style:"PCI vecteur",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatisé vecteur de la DGFIP.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}}),(0,r.default).register("GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",{key:"cartes",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",title:"Plan IGN j+1",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN j+1",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}}),(0,r.default).register("CADASTRALPARCELS.PARCELLAIRE_EXPRESS",{key:"parcellaire",server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",title:"PCI vecteur",format:"image/png",style:"PCI vecteur",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatisé vecteur de la DGFIP.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}}),(0,r.default).register("CADASTRALPARCELS.PARCELS",{key:"parcellaire",server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELS",title:"Parcelles cadastrales",format:"image/png",style:"bdparcellaire",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965],desc:"Limites des parcelles cadastrales issues de plans scannés et de plans numériques.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:20,constraint:[{minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965]}]}}}),(0,r.default).register("TRANSPORTNETWORKS.RAILWAYS",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.RAILWAYS",title:"Réseau ferroviaire",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Carte du réseau ferroviaire",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]},{minZoom:15,maxZoom:18,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}}),(0,r.default).register("BUILDINGS.BUILDINGS",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"BUILDINGS.BUILDINGS",title:"Bâtiments",format:"image/png",style:"BUILDINGS.BUILDINGS",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage des constructions couvrant le territoire français.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:10,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:9,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}),(0,r.default).register("TRANSPORTNETWORKS.RUNWAYS",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.RUNWAYS",title:"Aéroports",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Localisation des aéroports, aérodromes et héliports, des pistes, bâtiments et équipements dédiés.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}),(0,r.default).register("TRANSPORTNETWORKS.ROADS",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.ROADS",title:"Routes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage du réseau routier français et européen.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}),(0,r.default).register("GEOGRAPHICALNAMES.NAMES",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALNAMES.NAMES",title:"Dénominations géographiques",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage des noms des villes, villages, lieux-dits ...",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:10,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]},{minZoom:6,maxZoom:9,bbox:[-31.966135,27.128952,49.05696,71.584076]}]}}}),(0,r.default).register("HYDROGRAPHY.HYDROGRAPHY",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"HYDROGRAPHY.HYDROGRAPHY",title:"Hydrographie",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage des lacs, réservoirs, rivières et cours d'eau en France.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}}),(0,r.default).register("UTILITYANDGOVERNMENTALSERVICES.ALL",{key:"topographie",server:"https://wxs.ign.fr/geoportail/wmts",layer:"UTILITYANDGOVERNMENTALSERVICES.ALL",title:"Lignes électriques",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,71.584076],desc:"Affichage des lignes électriques.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-63.37252,-21.475586,55.925865,71.584076]}]}}}),(0,r.default).register("ADMINEXPRESS-COG-CARTO.LATEST",{key:"administratif",server:"https://wxs.ign.fr/geoportail/wmts",layer:"ADMINEXPRESS-COG-CARTO.LATEST",title:"ADMINEXPRESS COG CARTO",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Limites administratives Express COG code officiel géographique 2022",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}}),(0,r.default).register("LIMITES_ADMINISTRATIVES_EXPRESS.LATEST",{key:"administratif",server:"https://wxs.ign.fr/geoportail/wmts",layer:"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST",title:"Limites administratives mises à jour en continu.",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Limites administratives mises à jour en continu, édition octobre 2022.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}});let o=window.geoportailConfig.capabilities;Object.keys(o).forEach(t=>{Object.keys(o[t]).forEach(e=>{(0,r.default).isRegistered(e)&&delete o[t][e]})});var a=r.default}),a("2C2LU",function(t,e){window.geoportailConfig||(window.geoportailConfig={capabilities:{}}),window.geoportailConfig.capabilities["0gd4sx9gxx6ves3hf3hfeyhw"]={"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS",title:"PYRAMIDE SCANEXPRESS NIVEAUXGRIS",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-6.420881,40.437817,11.496459,51.444122],desc:"Cartographie topographique multi-échelles du territoire français issue des bases de données vecteur de l’IGN –réalisée selon un processus cartographique innovant fortement automatisé.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:13,maxZoom:13,bbox:[-5.713191,40.852314,11.429714,51.44377]},{minZoom:15,maxZoom:17,bbox:[-63.189117,-21.428364,55.84698,51.175068]},{minZoom:14,maxZoom:14,bbox:[-63.283817,-21.7006,56.039127,51.44377]},{minZoom:18,maxZoom:18,bbox:[-63.189068,-21.428364,55.846638,51.175068]},{minZoom:6,maxZoom:10,bbox:[-63.283817,-21.455252,55.911522,51.444016]},{minZoom:11,maxZoom:12,bbox:[-63.283817,-21.455252,55.911522,51.444122]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW",title:"Carte Mondiale pour la mini-vue",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75],desc:"Carte Mondiale pour la mini-vue",originators:{NATURALEARTH:{href:"http://www.naturalearthdata.com",attribution:"Natural Earth",logo:"https://wxs.ign.fr/static/logos/NATURALEARTH/NATURALEARTH.gif",minZoom:1,maxZoom:8,constraint:[{minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPSCV":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPSCV",title:"Cartes IGN Club Vosgien",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-180,-75,180,80],desc:"Couche carte avec les données du club vosgien.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:7,maxZoom:7,bbox:[-178.20573,-68.138855,144.84375,51.909786]},{minZoom:8,maxZoom:8,bbox:[-178.20573,-68.138855,168.24327,51.909786]},{minZoom:13,maxZoom:13,bbox:[-178.20573,-67.101425,168.24327,51.44377]},{minZoom:14,maxZoom:14,bbox:[-178.20573,-67.101425,168.23909,51.44377]},{minZoom:11,maxZoom:12,bbox:[-178.20573,-67.101425,168.24327,51.444122]},{minZoom:9,maxZoom:10,bbox:[-178.20573,-68.138855,168.24327,51.444016]},{minZoom:15,maxZoom:15,bbox:[-178.20573,-46.502903,168.23909,51.175068]},{minZoom:16,maxZoom:16,bbox:[-178.20573,-46.502903,168.29811,51.175068]},{minZoom:17,maxZoom:17,bbox:[-179.5,-75,179.5,75]},{minZoom:18,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:0,maxZoom:6,bbox:[-180,-60,180,80]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:8,maxZoom:10,bbox:[163.47784,-22.972307,168.24327,-19.402702]},{minZoom:11,maxZoom:13,bbox:[163.47784,-22.972307,168.24327,-19.494438]},{minZoom:14,maxZoom:15,bbox:[163.47784,-22.764496,168.23909,-19.493542]},{minZoom:16,maxZoom:16,bbox:[163.47784,-22.809465,168.29811,-19.403923]}]}}},"ORTHOIMAGERY.ORTHO-SAT.PLEIADES.2015":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHO-SAT.PLEIADES.2015",title:"PLEIADES - 2015",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Agrégation des images Pleiades de l'année 2015",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]},AIRBUS:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/AIRBUS/AIRBUS.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-178.19646,-37.89419,77.61559,51.028297]}]}}},"TRANSPORTS.DRONES.RESTRICTIONS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTS.DRONES.RESTRICTIONS",title:"Restrictions UAS catégorie Ouverte et Aéromodélisme",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-9.881468,40.57599,11.678099,51.442818],desc:"<![CDATA[Représentation des zones soumises à interdictions ou à restrictions pour l’usage, à titre de loisir, d’aéronefs télépilotés (ou drones), sur le territoire métropolitain, à jour au 07-2020 Elle intègre partiellement les interdictions s'appuyant sur des données non publiées à l'AIP et ne couvre pas les interdictions temporaires. Cette carte est basée sur l’arrêté « espace » du 09/11/2017. La représentation des zones soumises à interdictions ou à restrictions n’engage pas la responsabilité des producteurs de la donnée. Le contour des agglomérations est fourni à titre purement indicatif.\nConsultez les interdictions temporaires sur https://www.sia.aviation-civile.gouv.fr/.]]>",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-9.881468,40.57599,11.678099,51.442818]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.STANDARD",title:"Carte IGN",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.62723,-84.5047,179.74588,85.47958],desc:"Cartographie topographique multi-échelles du territoire français issue des bases de données vecteur de l’IGN - emprise nationale, visible du 1/200 au 1/130000000",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:5,maxZoom:5,bbox:[-179.57285,-83.84196,178.4975,85.36646]},{minZoom:0,maxZoom:2,bbox:[-175.99709,-84.42859,175.99709,84.2865]},{minZoom:3,maxZoom:3,bbox:[-176.23093,-84.5047,179.08267,84.89126]},{minZoom:4,maxZoom:4,bbox:[-179.62723,-84.0159,-179.21112,85.47958]},{minZoom:6,maxZoom:8,bbox:[-179.49689,-84.02368,179.74588,85.30035]},{minZoom:15,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:14,maxZoom:14,bbox:[-5.713191,40.852314,11.429714,51.44377]},{minZoom:13,maxZoom:13,bbox:[-63.37252,13.428586,11.429714,51.44377]},{minZoom:11,maxZoom:12,bbox:[-63.37252,13.428586,11.496459,51.444122]},{minZoom:9,maxZoom:9,bbox:[-64.81273,13.428586,11.496459,51.444016]},{minZoom:10,maxZoom:10,bbox:[-63.37252,13.428586,11.496459,51.444016]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS2006-2010":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS2006-2010",title:"Photographies aériennes 2006-2010",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Prises de vues aériennes des territoires disponibles à la fin des années 2006 à 2010",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]}}},"BUILDINGS.BUILDINGS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"BUILDINGS.BUILDINGS",title:"Bâtiments",format:"image/png",style:"BUILDINGS.BUILDINGS",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage des constructions couvrant le territoire français.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:10,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:9,bbox:[-63.969162,-21.49687,55.964417,71.584076]}]}}},"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40",title:"Carte de l'état-major (1820-1866)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:15,bbox:[-6.0888886,41.18441,10.96101,51.274532],desc:"Carte française en couleurs du XIXè siècle en couleurs superposable aux cartes et données modernes.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.0888886,41.18441,10.96101,51.274532]}]}}},"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2",title:"Plan IGN v2",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-175,-85,175,85],desc:"Cartographie multi-échelles sur le territoire national, issue des bases de données vecteur de l’IGN, mis à jour régulièrement et réalisée selon un processus entièrement automatisé.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-175,-85,175,85]}]}}},"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR10":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR10",title:"Carte de l'état-major - environs de Paris (1818 - 1824)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:17,bbox:[1.8268186,48.38474,2.7973807,49.514153],desc:"Carte des environs de Paris au 1 : 10 000 établie entre 1818 et 1824.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[1.8268186,48.38474,2.7973807,49.514153]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN25TOUR":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN25TOUR",title:"Carte topographique (IGN Scan25)",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-178.20573,-46.502903,77.64919,51.175068],desc:"La carte topographique représente avec précision le relief, symbolisé par des courbes de niveaux, ainsi que les détails du terrain : routes, sentiers, constructions, bois, arbre isolé, rivière, source... </br>En France, la carte topographique de base est réalisée par l'IGN. Le SCAN 25 Touristique comprend les pictogrammes du thème tourisme de la carte de base.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-178.20573,-46.502903,77.64919,51.175068]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950",title:"SCAN50 Historique de 1950",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75],desc:"SCAN50 produit par l'IGN en 1950",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:3,maxZoom:15,constraint:[{minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75]}]}}},"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"LIMITES_ADMINISTRATIVES_EXPRESS.LATEST",title:"Limites administratives mises à jour en continu.",format:"image/png",style:"normal",queryable:!0,tilematrix:"PM",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Limites administratives mises à jour en continu, édition octobre 2021.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS.1950-1965":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS.1950-1965",title:"Photographies aériennes historiques 1950-1965",format:"image/png",style:"BDORTHOHISTORIQUE",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-67.72138,-21.401262,55.84643,51.094486],desc:"<![CDATA[Couverture en photographies aériennes de la France des années 50, telle qu'elle se présentait avant les grands aménagements des années 60. Cette couverture a été réalisée à partir des photographies aériennes historiques numérisées par l'IGN. Elle est disponible sur la France métropolitaine, les départements et régions d'Outre-Mer (la Guyane n'est que partiellement couverte) et les collectivités d'Outre-Mer sauf la Polynésie française.\nLes photographies sont orthorectifiées, c'est-à-dire corrigées des déformations dues à la prise de vue et au relief du terrain, et assemblées pour fournir une visualisation continue superposable avec le Référentiel à Grande Echelle (RGE®) ou les cartes.]]>",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:3,maxZoom:18,constraint:[{minZoom:3,maxZoom:18,bbox:[-67.72138,-21.401262,55.84643,51.094486]}]}}},"CADASTRALPARCELS.PARCELLAIRE_EXPRESS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELLAIRE_EXPRESS",title:"PCI vecteur",format:"image/png",style:"PCI vecteur",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatisé vecteur de la DGFIP.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"GEOGRAPHICALGRIDSYSTEMS.CASSINI":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.CASSINI",title:"Carte de Cassini (XVIIIe siècle)",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472],desc:"Carte de Cassini en couleur (feuilles gravées et aquarellées), issue de l’exemplaire dit de « Marie-Antoinette » du XVIIIe siècle.",originators:{EHESS:{href:"http://www.ehess.fr/ldh/Themes/Theme_Cassini.htm",attribution:"Ecole des Hautes Etudes en Sciences Sociales - Laboratoire de démographie et d'histoire sociale",logo:"https://wxs.ign.fr/static/logos/EHESS/EHESS.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]},CNRS:{href:"http://www.cnrs.fr/",attribution:"Centre national de la recherche scientifique (CNRS)",logo:"https://wxs.ign.fr/static/logos/CNRS/CNRS.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]},BNF:{href:"http://www.bnf.fr/",attribution:"Bibliothèque nationale de France (BnF)",logo:"https://wxs.ign.fr/static/logos/BNF/BNF.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]}}},"TRANSPORTNETWORKS.ROADS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"TRANSPORTNETWORKS.ROADS",title:"Routes",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage du réseau routier français et européen.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]},{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1",title:"Plan IGN j+1",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN j+1",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}},"CADASTRALPARCELS.PARCELS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"CADASTRALPARCELS.PARCELS",title:"Parcelles cadastrales",format:"image/png",style:"bdparcellaire",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965],desc:"Limites des parcelles cadastrales issues de plans scannés et de plans numériques.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:20,constraint:[{minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965]}]}}},"GEOGRAPHICALNAMES.NAMES":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALNAMES.NAMES",title:"Dénominations géographiques",format:"image/png",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-63.969162,-21.49687,55.964417,71.584076],desc:"Affichage des noms des villes, villages, lieux-dits ...",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:9,bbox:[-31.966135,27.128952,49.05696,71.584076]},{minZoom:10,maxZoom:14,bbox:[-63.969162,-21.49687,55.964417,71.584076]},{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS",title:"Photographies aériennes",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,bbox:[-178.18713,-85,175,85],desc:"Photographies aériennes",originators:{FEDER:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER/FEDER.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:12,bbox:[-175,-85,175,85]},{minZoom:13,maxZoom:19,bbox:[-1.9662633,42.316307,8.25674,50.18387]}]},MPM:{href:"http://www.marseille-provence.com/",attribution:"Marseille Provence Métropole",logo:"https://wxs.ign.fr/static/logos/MPM/MPM.gif",minZoom:20,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[5.076959,43.153347,5.7168245,43.454994]}]},IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:13,maxZoom:20,constraint:[{bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:20,maxZoom:20,bbox:[.035491213,43.221077,6.0235267,49.696926]},{minZoom:19,maxZoom:19,bbox:[-63.160706,-21.401262,55.84643,51.11242]},{minZoom:13,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.11242]}]},CRAIG:{href:"http://www.craig.fr",attribution:"Centre Régional Auvergnat de l'Information Géographique (CRAIG)",logo:"https://wxs.ign.fr/static/logos/CRAIG/CRAIG.gif",minZoom:13,maxZoom:20,constraint:[{minZoom:20,maxZoom:20,bbox:[2.2243388,44.76621,2.7314367,45.11295]},{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,6.4295278,46.8038]}]},SIGLR:{href:"http://www.siglr.org//",attribution:"SIGLR",logo:"https://wxs.ign.fr/static/logos/SIGLR/SIGLR.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[3.2470036,43.441483,4.8729386,44.47377]},{minZoom:13,maxZoom:18,bbox:[1.6784439,42.316307,4.8729386,44.978218]}]},CRCORSE:{href:"http://www.corse.fr//",attribution:"CRCORSE",logo:"https://wxs.ign.fr/static/logos/CRCORSE/CRCORSE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[8.428783,41.338627,9.688606,43.08541]}]},FEDER_AUVERGNE:{href:"http://www.europe-en-auvergne.eu/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/FEDER_AUVERGNE/FEDER_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0398402,44.60505,3.38408,45.49146]}]},FEDER_PAYSDELALOIRE:{href:"https://www.europe.paysdelaloire.fr/",attribution:"Pays-de-la-Loire",logo:"https://wxs.ign.fr/static/logos/FEDER_PAYSDELALOIRE/FEDER_PAYSDELALOIRE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-2.457367,46.19304,.951426,48.57609]}]},FEDER2:{href:"http://www.europe-en-france.gouv.fr/",attribution:"Fonds européen de développement économique et régional",logo:"https://wxs.ign.fr/static/logos/FEDER2/FEDER2.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[2.9441726,48.824635,4.269964,50.080326]},{minZoom:13,maxZoom:18,bbox:[1.3577043,48.824635,4.269964,50.37648]}]},"E-MEGALIS":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/E-MEGALIS/E-MEGALIS.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-3.7059498,47.971947,-1.8486879,48.99035]}]},OCCITANIE:{href:"https://www.laregion.fr/",attribution:"La Région Occitanie; Pyrénées - Méditerranée",logo:"https://wxs.ign.fr/static/logos/OCCITANIE/OCCITANIE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2086434,48.805965,2.4859917,48.915382]}]},PREFECTURE_GUADELOUPE:{href:"www.guadeloupe.pref.gouv.fr/",attribution:"guadeloupe",logo:"https://wxs.ign.fr/static/logos/PREFECTURE_GUADELOUPE/PREFECTURE_GUADELOUPE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-61.82342,14.371942,-60.787838,16.521578]}]},CG45:{href:"http://www.loiret.com",attribution:"Le conseil général du Loiret",logo:"https://wxs.ign.fr/static/logos/CG45/CG45.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.4883244,47.471867,3.1349874,48.354233]}]},"e-Megalis":{href:"http://www.e-megalisbretagne.org//",attribution:"Syndicat mixte de coopération territoriale (e-Megalis)",logo:"https://wxs.ign.fr/static/logos/e-Megalis/e-Megalis.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[-3.7487078,47.23789,-1.9810898,48.263657]},{minZoom:13,maxZoom:18,bbox:[-5.1937118,47.23789,-.98568505,48.980812]}]},CG06:{href:"http://www.cg06.fr",attribution:"Département Alpes Maritimes (06) en partenariat avec : Groupement Orthophoto 06 (NCA, Ville de Cannes, CARF, CASA,CG06, CA de Grasse) ",logo:"https://wxs.ign.fr/static/logos/CG06/CG06.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[6.6093955,43.44647,7.7436337,44.377018]}]},"MEGALIS-BRETAGNE":{href:"https://www.megalisbretagne.org/",attribution:"Syndicat mixte Mégalis Bretagne",logo:"https://wxs.ign.fr/static/logos/MEGALIS-BRETAGNE/MEGALIS-BRETAGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[-5.2086344,47.591938,-3.3396015,48.808697]}]},"LANGUEDOC-ROUSSILLON":{href:"https://www.laregion.fr/",attribution:"Région Occitanie",logo:"https://wxs.ign.fr/static/logos/LANGUEDOC-ROUSSILLON/LANGUEDOC-ROUSSILLON.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[1.6784439,42.63972,4.208843,43.979004]}]},GRAND_EST:{href:"https://www.grandest.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/GRAND_EST/GRAND_EST.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[5.362788,47.390827,7.6924667,49.58011]}]},CNES_AUVERGNE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_AUVERGNE/CNES_AUVERGNE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.2656832,45.279934,4.0227704,46.8038]}]},HAUTS_DE_FRANCE:{href:"https://www.hautsdefrance.fr/",attribution:"Hauts-de-France",logo:"https://wxs.ign.fr/static/logos/HAUTS_DE_FRANCE/HAUTS_DE_FRANCE.gif",minZoom:13,maxZoom:19,constraint:[{minZoom:13,maxZoom:19,bbox:[2.0740242,48.81521,4.3390365,51.11242]}]},"BOURGOGNE-FRANCHE-COMTE":{href:"https://www.bourgognefranchecomte.fr/",attribution:"Auvergne",logo:"https://wxs.ign.fr/static/logos/BOURGOGNE-FRANCHE-COMTE/BOURGOGNE-FRANCHE-COMTE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[2.837849,47.302628,4.364638,48.408287]}]},RGD_SAVOIE:{href:"http://www.rgd.fr",attribution:"Régie de Gestion de Données des Pays de Savoie (RGD 73-74)",logo:"https://wxs.ign.fr/static/logos/RGD_SAVOIE/RGD_SAVOIE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[5.5923314,45.017353,7.2323394,46.438328]}]},CNES:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES/CNES.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},ASTRIUM:{href:"http://www.geo-airbusds.com/",attribution:"Airbus Defence and Space",logo:"https://wxs.ign.fr/static/logos/ASTRIUM/ASTRIUM.gif",minZoom:13,maxZoom:16,constraint:[{minZoom:13,maxZoom:16,bbox:[-55.01953,1.845384,-50.88867,6.053161]}]},CNES_971:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_971/CNES_971.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.82342,15.819616,-60.99497,16.521578]}]},CNES_972:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_972/CNES_972.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-61.247208,14.371855,-60.778458,14.899901]}]},PPIGE:{href:"http://www.ppige-npdc.fr/",attribution:"PPIGE",logo:"https://wxs.ign.fr/static/logos/PPIGE/PPIGE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[1.5212119,49.957302,4.2673664,51.090965]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[163.47784,-22.767689,167.94624,-19.434975]}]},CNES_ALSACE:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_ALSACE/CNES_ALSACE.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[6.8086324,47.39981,7.668318,48.32695]}]},CNES_978:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_978/CNES_978.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-63.160706,18.04345,-62.962185,18.133898]}]},CNES_974:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_974/CNES_974.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[55.205757,-21.401262,55.84643,-20.862825]}]},CNES_975:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_975/CNES_975.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-56.410988,46.734093,-56.10308,47.149963]}]},CNES_976:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_976/CNES_976.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[44.916977,-13.089187,45.30442,-12.564543]}]},CNES_977:{href:"http://www.cnes.fr/",attribution:"Centre national d'études spatiales (CNES)",logo:"https://wxs.ign.fr/static/logos/CNES_977/CNES_977.gif",minZoom:13,maxZoom:18,constraint:[{minZoom:13,maxZoom:18,bbox:[-62.952805,17.862621,-62.78276,17.98024]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS2000-2005":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"ORTHOIMAGERY.ORTHOPHOTOS2000-2005",title:"Photographies aériennes 2000-2005",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-178.18713,-21.401329,55.85611,51.090965],desc:"Prises de vues aériennes des territoires pour les années 2000 à 2005",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.CLASSIQUE",title:"PYRAMIDE SCANEXPRESS CLASSIQUE",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:6,maxZoom:18,bbox:[-6.420881,40.289066,13.549984,51.444122],desc:"Cartographie topographique multi-échelles du territoire français issue des bases de données vecteur de l’IGN –réalisée selon un processus cartographique innovant fortement automatisé.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:18,maxZoom:18,bbox:[-63.189068,-21.428364,55.846638,51.175068]},{minZoom:15,maxZoom:17,bbox:[-63.189117,-21.428364,55.84698,51.175068]},{minZoom:14,maxZoom:14,bbox:[-63.283817,-21.7006,56.039127,51.44377]},{minZoom:13,maxZoom:13,bbox:[-6.7282434,40.615154,11.606199,51.44377]},{minZoom:6,maxZoom:10,bbox:[-6.420881,40.289066,13.549984,51.444016]},{minZoom:11,maxZoom:12,bbox:[-6.9949265,40.238197,12.924286,51.444122]}]}}},"GEOGRAPHICALGRIDSYSTEMS.PLANIGN":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.PLANIGN",title:"Plan IGN",format:"image/jpeg",style:"normal",queryable:!1,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Représentation graphique des bases de données IGN.",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:10,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:0,maxZoom:9,bbox:[-179.5,-75,179.5,75]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS":{server:"https://wxs.ign.fr/geoportail/wmts",layer:"GEOGRAPHICALGRIDSYSTEMS.MAPS",title:"Cartes IGN",format:"image/jpeg",style:"normal",queryable:!0,tilematrix:"PM",minZoom:0,maxZoom:18,bbox:[-180,-75,180,80],desc:"Cartes IGN",originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:7,maxZoom:7,bbox:[-178.20573,-68.138855,144.84375,51.909786]},{minZoom:8,maxZoom:8,bbox:[-178.20573,-68.138855,168.24327,51.909786]},{minZoom:13,maxZoom:13,bbox:[-178.20573,-67.101425,168.24327,51.44377]},{minZoom:14,maxZoom:14,bbox:[-178.20573,-67.101425,168.23909,51.44377]},{minZoom:11,maxZoom:12,bbox:[-178.20573,-67.101425,168.24327,51.444122]},{minZoom:9,maxZoom:10,bbox:[-178.20573,-68.138855,168.24327,51.444016]},{minZoom:15,maxZoom:15,bbox:[-178.20573,-46.502903,168.23909,51.175068]},{minZoom:16,maxZoom:16,bbox:[-178.20573,-46.502903,168.29811,51.175068]},{minZoom:0,maxZoom:6,bbox:[-180,-60,180,80]},{minZoom:18,maxZoom:18,bbox:[-5.6663494,41.209736,10.819784,51.175068]},{minZoom:17,maxZoom:17,bbox:[-179.5,-75,179.5,75]}]},DITTT:{href:"http://www.dittt.gouv.nc/portal/page/portal/dittt/",attribution:"Direction des Infrastructures, de la Topographie et des Transports Terrestres",logo:"https://wxs.ign.fr/static/logos/DITTT/DITTT.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:8,maxZoom:10,bbox:[163.47784,-22.972307,168.24327,-19.402702]},{minZoom:11,maxZoom:13,bbox:[163.47784,-22.972307,168.24327,-19.494438]},{minZoom:14,maxZoom:15,bbox:[163.47784,-22.764496,168.23909,-19.493542]},{minZoom:16,maxZoom:16,bbox:[163.47784,-22.809465,168.29811,-19.403923]}]}}}}}),a("2q9Px",function(t,e){window.geoportailConfig||(window.geoportailConfig={capabilities:{}}),window.geoportailConfig.capabilities["1mgehldv90vifl6s5ksf900i"]={"GEOGRAPHICALGRIDSYSTEMS.PLANIGNV2":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Plan IGN",format:"image/png",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:19,bbox:[-175,-85,175,85],desc:"Cartographie multi-échelles sur le territoire national, issue des bases de données vecteur de l’IGN, mis à jour régulièrement et réalisée selon un processus entièrement automatisé. Version actuellement en beta test",keys:"Plan IGN V2",qlook:"https://wxs.ign .fr/static/pictures/ign_scan-express-classique.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-175,-85,175,85]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN-EXPRESS.NIVEAUXGRIS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Scan express niveaux de gris",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.283817,-21.7006,56.039127,51.161537],desc:"Cartographie topographique multi-échelles du territoire français issue des bases de données vecteur de l’IGN –réalisée selon un processus cartographique innovant fortement automatisé.",keys:"Cartes",qlook:"https://wxs.ign.fr/static/pictures/ign_scan-express-classique.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:13,maxZoom:14,bbox:[-63.283817,-21.7006,56.039127,51.161537]},{minZoom:15,maxZoom:17,bbox:[-63.189117,-21.428364,55.84698,50.930748]},{minZoom:6,maxZoom:10,bbox:[-63.283817,-21.455252,55.911522,51.090733]},{minZoom:11,maxZoom:12,bbox:[-63.283817,-21.455252,55.911522,51.111763]},{minZoom:18,maxZoom:18,bbox:[-63.189068,-21.428364,55.846638,50.930748]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.BDUNI.J1":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Plan IGN J+1",format:"image/png",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Plan IGN J+1",keys:"Plan IGN J+1",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/BDUNI/BDUNI.png"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:9,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179,-80,179,80]}]}}},"GEOGRAPHICALGRIDSYSTEMS.PLANIGN":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Plan IGN",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75],desc:"Représentation graphique des bases de données IGN.",keys:"Cartes",qlook:"http://wxs.ign.fr/static/pictures/ign_carte2.jpg",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"http://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:10,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:9,bbox:[-179.5,-75,179.5,75]}]},EUROGEOGRAPHICS:{href:"http://www.eurogeographics.org/",attribution:"Eurogeographics",logo:"http://wxs.ign.fr/static/logos/EUROGEOGRAPHICS/EUROGEOGRAPHICS.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:9,bbox:[-179.5,-75,179.5,75]},{minZoom:10,maxZoom:15,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"GEOGRAPHICALGRIDSYSTEMS.CASSINI":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte de Cassini",order:"9971000",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472],desc:"Carte de Cassini en couleur (feuilles gravées et aquarellées), issue de l'exemplaire dit de « Marie-Antoinette » du XVIIIe siècle.",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{EHESS:{href:"https://www.ehess.fr/ldh/Themes/Theme_Cassini.htm",attribution:"Ecole des Hautes Etudes en Sciences Sociales - Laboratoire de démographie et d'histoire sociale",logo:"https://wxs.ign.fr/static/logos/EHESS/EHESS.gif",minZoom:15,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]},CNRS:{href:"https://www.cnrs.fr/",attribution:"Centre national de la recherche scientifique (CNRS)",logo:"https://wxs.ign.fr/static/logos/CNRS/CNRS.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]},BNF:{href:"https://www.bnf.fr/",attribution:"Bibliothèque nationale de France (BnF)",logo:"https://wxs.ign.fr/static/logos/BNF/BNF.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-6.000625,42.01904,9.280903,51.245472]}]}}},"HYDROGRAPHY.HYDROGRAPHY":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Hydrographie",order:"9690000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.161396,-21.399818,55.846474,72.67905],desc:"Affichage des lacs, réservoirs, rivières et cours d'eau en France.",keys:"Hydrographie",qlook:"https://wxs.ign.fr/static/pictures/ign_hydro.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:10,maxZoom:18,bbox:[-5.1504726,41.32521,9.570543,51.099052]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS.GENEVE":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Suisse - photographies aériennes du canton de Genève (SITG)",order:"9989000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:20,bbox:[5.9500656,46.124146,6.311984,46.36581],desc:"Photographie aérienne du canton de Genève.",keys:"Photographies",qlook:"https://wxs.ign.fr/static/pictures/swisstopo_geneve.jpg",legend:[],originators:{SITG:{href:"https://www.sitg.ch/",attribution:"Système d'Information du Territoire genevois (SITG)",logo:"https://wxs.ign.fr/static/logos/SITG/SITG.gif",minZoom:15,maxZoom:20,constraint:[{minZoom:6,maxZoom:20,bbox:[5.9500656,46.124146,6.311984,46.36581]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS.PARIS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Paris haute résolution",format:"image/png",tilematrix:"PM",style:"normal",minZoom:12,maxZoom:20,bbox:[2.1950936,48.809498,2.429684,48.912388],desc:"Prises de vues aériennes de Paris à haute résolution.",keys:"Photographies",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:20,constraint:[{minZoom:12,maxZoom:20,bbox:[2.1950936,48.809498,2.429684,48.912388]}]},IDF:{href:"https://www.iledefrance.fr/",attribution:"Conseil régional d'Ile de France",logo:"https://wxs.ign.fr/static/logos/IDF/IDF.gif",minZoom:12,maxZoom:20,constraint:[{minZoom:12,maxZoom:20,bbox:[2.1950936,48.809498,2.429684,48.912388]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Cartes IGN",order:"9980000",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:18,bbox:[-180,-90,180,90],desc:"Cartes IGN <p>Cinq types de cartes adaptées aux échelles d’affichage : cartes à grande échelle, cartes topographiques, cartes de tourisme, cartes administratives et routières, cartes à petite échelle. </p>",keys:"Cartes",qlook:"https://wxs.ign.fr/static/pictures/ign_carte2.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:12,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-180,-90,180,90]}]}}},"GEOGRAPHICALGRIDSYSTEMS.ETATMAJOR40":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte de l'état-major 1:40.000",order:"9972000",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:15,bbox:[-63.283817,-21.7006,56.039127,51.311867],desc:"Carte française en couleurs du XIXè siècle en couleurs superposable aux cartes et données modernes.",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ign_em2.jpg",legend:[{zoom:15,url:"https://wxs.ign.fr/static/legends/SCANS/SCANEMx0.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:15,constraint:[{minZoom:6,maxZoom:15,bbox:[-63.283817,-21.7006,56.039127,51.311867]}]}}},"TRANSPORTNETWORKS.RAILWAYS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Réseau ferroviaire",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-26.711018,20.991827,54.909374,72.67905],desc:"Carte du réseau ferroviaire",keys:"Voies ferrées",qlook:"https://wxs.ign.fr/static/pictures/ign_ferre.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:10,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"ELEVATION.SLOPES":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte du relief",order:"9890000",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:14,bbox:[-178.20589,-22.595179,167.43176,50.93085],desc:"La couche altitude se compose d'un MNT (Modèle Numérique de Terrain) affiché en teintes hypsométriques et issu de la BD ALTI ®.",keys:"Cartes",qlook:"https://wxs.ign.fr/static/pictures/ign_altitude.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:13,maxZoom:14,constraint:[{minZoom:6,maxZoom:14,bbox:[-178.20589,-22.595179,167.43176,50.93085]}]}}},"UTILITYANDGOVERNMENTALSERVICES.ALL":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Lignes électriques",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Affichage des lignes électriques.",keys:"Energie",qlook:"https://wxs.ign.fr/static/pictures/ign_ligneselectriques.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"ADMINISTRATIVEUNITS.BOUNDARIES":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Limites administratives",order:"5990000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.161396,-21.399818,55.846474,72.67905],desc:"Représentation des limites administratives (régions, départements, cantons, communes)",keys:"Unités administratives",qlook:"https://wxs.ign.fr/static/pictures/ign_limites.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:14,constraint:[{minZoom:10,maxZoom:14,bbox:[-5.1504726,41.32521,9.570543,51.099052]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"TRANSPORTNETWORKS.ROADS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Routes",order:"8990000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.161396,-21.399818,55.846474,72.67905],desc:"Affichage du réseau routier français et européen.",keys:"Réseau routier",qlook:"https://wxs.ign.fr/static/pictures/ign_routes2.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[55.216747,-21.390476,55.837482,-20.870972]},{minZoom:10,maxZoom:14,bbox:[-5.1504726,41.32521,9.570543,51.099052]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Photographies aériennes",order:"9990000",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:19,bbox:[-178,-80,178,84],desc:"Photographies aériennes",keys:"Photographies",qlook:"https://wxs.ign.fr/static/pictures/ign_ortho.jpg",legend:[{zoom:19,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"},{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:19,constraint:[{minZoom:19,maxZoom:19,bbox:[-63.160706,14.371838,7.7436337,49.580162]},{minZoom:13,maxZoom:18,bbox:[-63.160706,-21.401262,55.84643,60.641647]}]},PLANETOBSERVER:{href:"https://www.planetobserver.com/",attribution:"PlanetObserver (images satellites)",logo:"https://wxs.ign.fr/static/logos/PLANETOBSERVER/PLANETOBSERVER.gif",minZoom:12,maxZoom:13,constraint:[{minZoom:0,maxZoom:12,bbox:[-178,-80,0,80]}]}}},"CADASTRALPARCELS.PARCELLAIRE_EXPRESS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"PCI vecteur",format:"image/png",tilematrix:"PM",style:"PCI vecteur",minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Plan cadastral informatisé vecteur de la DGFIP.",keys:"Parcelles cadastrales",qlook:"https://wxs.ign.fr/static/pictures/BDPARCELLAIRE.png",legend:[{zoom:19,url:"https://wxs.ign.fr/static/legends/CADASTRALPARCELS.PARCELLAIRE_EXPRESS.png"},{zoom:11,url:"https://wxs.ign.fr/static/legends/CADASTRALPARCELS.PARCELLAIRE_EXPRESS.png"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:19,constraint:[{minZoom:0,maxZoom:19,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"CADASTRALPARCELS.PARCELS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Parcelles cadastrales(2013-2018)",order:"9790000",format:"image/png",tilematrix:"PM",style:"bdparcellaire",minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965],desc:"Limites des parcelles cadastrales issues de plans scannés et de plans numériques.(2013-2018)",keys:"Parcelles cadastrales(2013-2018)",qlook:"https://wxs.ign.fr/static/pictures/BDPARCELLAIRE.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:20,constraint:[{minZoom:0,maxZoom:20,bbox:[-63.160706,-21.39223,55.84643,51.090965]}]}}},"GEOGRAPHICALGRIDSYSTEMS.1900TYPEMAPS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte topographique type 1900",order:"9971900",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:10,maxZoom:15,bbox:[1.6294072,48.472553,3,49.15477],desc:"Carte topographique de Paris et de ses environs éditée en 1906.",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ign_cartetopo1900.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:15,constraint:[{minZoom:10,maxZoom:15,bbox:[1.6294072,48.472553,3,49.15477]}]}}},"BUILDINGS.BUILDINGS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Bâtiments",order:"7990000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.161396,-21.399818,55.846474,72.67905],desc:"Affichage des constructions couvrant le territoire français.",keys:"Bâtiments",qlook:"https://wxs.ign.fr/static/pictures/ign_batiments.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:10,maxZoom:14,bbox:[-5.1504726,41.32521,9.570543,51.099052]},{minZoom:15,maxZoom:18,bbox:[55.216747,-21.390476,55.837482,-20.870972]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS2000-2005":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Photographies aériennes historiques",order:"9989900",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.283817,-21.7006,56.039127,51.311867],desc:"Cette couche est constituée de photographies aériennes plus anciennes que la couche <i>Photographies aériennes </i> ",keys:"Photographies",qlook:"https://wxs.ign.fr/static/pictures/ign_ortho.jpg",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:10,maxZoom:19,constraint:[{minZoom:13,maxZoom:18,bbox:[-63.283817,-21.7006,56.039127,51.311867]},{minZoom:19,maxZoom:19,bbox:[-63.283817,-21.7006,56.039127,51.311867]}]}}},"ELEVATION.SLOPES.HIGHRES":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Litto3D ®",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.7529597,42.978607,6.257605,43.27326],desc:"Modèle numérique continu terre-mer sur la frange littorale.",keys:"Littoral",qlook:"https://wxs.ign.fr/static/pictures/ign_litto3D.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:16,maxZoom:19,constraint:[{minZoom:6,maxZoom:16,bbox:[5.7529597,42.978607,6.257605,43.27326]}]},SHOM:{href:"https://www.shom.fr/",attribution:"Service hydrographique et océanographique de la marine (SHOM)",logo:"https://wxs.ign.fr/static/logos/SHOM/SHOM.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.7529597,42.978607,6.257605,43.27326]}]}}},"GEOGRAPHICALGRIDSYSTEMS.COASTALMAPS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte littorale (SHOM/IGN)",order:"9979000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.96289,-21.534847,56.16211,51.454006],desc:"Assemblage des cartes marines du Service hydrographique et océanographique de la marine (SHOM) et des cartes terrestres de l'IGN.",keys:"CartesLittoral",qlook:"https://wxs.ign.fr/static/pictures/ign_cartelitto.jpg",legend:[],originators:{SHOM:{href:"https://www.shom.fr/",attribution:"Service hydrographique et océanographique de la marine (SHOM)",logo:"https://wxs.ign.fr/static/logos/SHOM/SHOM.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.96289,-21.534847,56.16211,51.454006]}]},IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.96289,-21.534847,56.16211,51.454006]}]}}},"GEOGRAPHICALGRIDSYSTEMS.FRANCERASTER":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte France Raster ®",order:"9978900",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.757618,-21.565548,56.040462,51.00192],desc:"Carte àgrande échelle spécialement adaptée àl'affichage de données urbaines.",keys:"Cartes",qlook:"https://wxs.ign.fr/static/pictures/ign_franceraster.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:18,maxZoom:18,bbox:[-63.189068,-21.428364,55.846638,50.886116]},{minZoom:17,maxZoom:17,bbox:[-63.189068,2.0766516,10.883329,50.881664]},{minZoom:16,maxZoom:16,bbox:[-63.189117,-21.47353,55.846638,50.9218]},{minZoom:15,maxZoom:15,bbox:[-63.189213,-21.563862,55.846638,51.00192]},{minZoom:14,maxZoom:14,bbox:[-63.284115,-21.565094,56.03998,51.00192]},{minZoom:13,maxZoom:13,bbox:[-63.757618,-21.565094,56.03998,51.00192]},{minZoom:12,maxZoom:12,bbox:[-61.87994,-21.565094,56.03998,51.00192]},{minZoom:10,maxZoom:11,bbox:[-63.75714,-21.565548,56.040462,51.00192]},{minZoom:6,maxZoom:9,bbox:[-5.964159,41.10364,11.116742,51.00192]}]}}},"GEOGRAPHICALNAMES.NAMES":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Dénominations géographiques",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,72.67905],desc:"Affichage des noms des villes, villages, lieux-dits ...",keys:"Divers",qlook:"https://wxs.ign.fr/static/pictures/ign_denominations.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:10,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"LANDCOVER.CORINELANDCOVER":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Corine Land Cover 2006",order:"9960000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:13,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Visualisation de l'occupation du sol en France métropolitaine. Outil de référence pour mesurer les impacts environnementaux.",keys:"Occupation des terres",qlook:"https://wxs.ign.fr/static/pictures/ecologie_clc2006.jpg",legend:[],originators:{MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:12,maxZoom:13,constraint:[{minZoom:6,maxZoom:13,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]},EEA:{href:"https://www.eea.europa.eu/",attribution:"European Environment Agency (EEA)",logo:"https://wxs.ign.fr/static/logos/EEA/EEA.gif",minZoom:6,maxZoom:13,constraint:[{minZoom:6,maxZoom:13,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"LANDCOVER.FORESTAREAS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Régions forestières nationales",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Cette cartographie représente des zones homogènes du point de vue des types de forêt ou de paysage sur la base de conditions physiques dominantes (climat, sol, relief).",keys:"Occupation des terres",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"LANDCOVER.FORESTINVENTORY.V1":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte Forestière v1 (1987-2004)",order:"9961987",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337],desc:"La cartographie Forestière est une base de données cartographique des formations végétales Forestières et naturelles. Elle couvre l'ensemble du territoire de France métropolitaine. Elle est réalisée par interprétation de photographies aériennes infrarouges et affinée par des contrôles sur le terrain (le seuil minimal de surface cartographiée est de 2,25 ha).",keys:"Occupation des terres",qlook:"https://wxs.ign.fr/static/pictures/ifn_cartev1.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et Forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]}}},"LANDCOVER.FORESTINVENTORY.V2":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte forestière (v2 : 2006-)",order:"9962005",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337],desc:"Localisation de 32 types de formations végétales sur le territoire. Carte en cours de réalisation depuis 2006.",keys:"Occupation des terres",qlook:"https://wxs.ign.fr/static/pictures/ifn_cartev2.jpg",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]}}},"LANDCOVER.SYLVOECOREGIONS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Sylvoécorégions",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Découpage de la France métropolitaine prenant en compte les facteurs biogéographiques déterminant la production forestière et la répartition des grands types d'habitat forestier.",keys:"Occupation des terres",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"LANDCOVER.SYLVOECOREGIONS.ALLUVIUM":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Sylvoécorégions d'alluvions récentes",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Affichage des cinq sylvoécorégions d'alluvions récentes correspondant aux cinq vallées des bassins des grands fleuves français et de leurs affluents,à enjeux importants.",keys:"Occupation des terres",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"PROTECTEDAREAS.APB":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Arrêtés de protection de biotope",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.263515,-21.418997,55.86592,51.220337],desc:"Conservation de l'habitat d'espèces protégées. Outil réglementaires de niveau départemental.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_biotope.jpg",legend:[],originators:{MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.263515,-21.418997,55.86592,51.220337]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.263515,-21.418997,55.86592,51.220337]}]}}},"PROTECTEDAREAS.BIOS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Réserves de biosphère",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.24996,15.718376,9.722545,51.15337],desc:"Réserves naturelles reconnues par le Programme sur l'Homme et la Biosphère créé par l'Unesco.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_biosphere.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.24996,15.718376,9.722545,51.15337]}]},MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.24996,15.718376,9.722545,51.15337]}]}}},"PROTECTEDAREAS.CDL":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Conservatoire du littoral : Périmètres d'intervention",format:"image/png",tilematrix:"PM",style:"normal",minZoom:8,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,51.099052],desc:"Les sites du conservatoire du littoral ont pour vocation la sauvegarde des espaces côtiers et lacustres. Leur accès au public est encouragé mais reste défini dans des limites compatibles avec la vulnérabilité de chaque site.",keys:"EcologieLittoral",qlook:"https://wxs.ign.fr/static/pictures/conservatoire_pi.jpg",legend:[],originators:{CELRL:{href:"https://www.conservatoire-du-littoral.fr/",attribution:"Conservatoire du littoral",logo:"https://wxs.ign.fr/static/logos/CELRL/CELRL.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:8,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,51.099052]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:8,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,51.099052]}]}}},"PROTECTEDAREAS.CEN":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Conservatoire du littoral : Parcelles protégées",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,51.099052],desc:"Les sites du conservatoire du littoral ont pour vocation la sauvegarde des espaces côtiers et lacustres. Leur accès au public est encouragé mais reste défini dans des limites compatibles avec la vulnérabilité de chaque site.",keys:"EcologieLittoral",qlook:"https://wxs.ign.fr/static/pictures/conservatoire_pp.jpg",legend:[],originators:{CELRL:{href:"https://www.conservatoire-du-littoral.fr/",attribution:"Conservatoire du littoral",logo:"https://wxs.ign.fr/static/logos/CELRL/CELRL.gif",minZoom:14,maxZoom:16,constraint:[{minZoom:15,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,18.134552]},{minZoom:6,maxZoom:14,bbox:[-61.23896,-21.399818,55.846474,51.099052]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:15,maxZoom:16,bbox:[-63.161396,-21.399818,55.846474,18.134552]},{minZoom:6,maxZoom:14,bbox:[-61.23896,-21.399818,55.846474,51.099052]}]}}},"PROTECTEDAREAS.PN":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Parcs nationaux",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.96787,-21.3877,55.877926,51.086308],desc:"Les parcs nationaux sont de vastes espaces protégés terrestres ou marins dont le patrimoine naturel est exceptionnel, et dont le but est à la fois de protéger des processus écologiques à large échelle et de fournir des possibilités de découverte de la nature.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_pn.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.70267,-21.487148,55.984764,51.15337]}]},MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.70267,-21.487148,55.984764,51.15337]}]}}},"PROTECTEDAREAS.PNR":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Parcs naturels régionaux",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.388027,1.9847878,9.829387,51.220337],desc:"Les parcs naturels régionaux ont pour but de valoriser de vastes espaces de fort intérêt culturel et naturel, et de veiller au développement durable de ces territoires dont le caractère rural est souvent très affirmé.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_pnr.jpg",legend:[],originators:{MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.388027,1.9847878,9.829387,51.220337]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.388027,1.9847878,9.829387,51.220337]}]}}},"PROTECTEDAREAS.RAMSAR":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Zones humides d'importance internationale",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.220505,1.9847878,9.829387,50.95189],desc:"Un site Ramsar est un espace désigné en application de la Convention relative aux zones humides d'importance internationale, particulièrement comme habitats des oiseaux d'eau, dont le traité a été signé en 1971 sur les bords de la mer Caspienne (Iran).",keys:"Ecologie",legend:[],originators:{MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.220505,1.9847878,9.829387,50.95189]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.220505,1.9847878,9.829387,50.95189]}]}}},"PROTECTEDAREAS.RNC":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Réserves Naturelles de Corse",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Les réserves naturelles sont des espaces protégés terrestres ou marins dont le patrimoine naturel est exceptionnel, tant sur le plan de la biodiversité que parfois sur celui de la géodiversité.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecolologie_rnn.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"PROTECTEDAREAS.RNCF":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Réserves nationales de chasse et de faune sauvage",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-2.9915524,41.686985,9.615704,51.086308],desc:"Les réserves nationales de chasse et de faune sauvage sont des espaces protégés terrestres ou marins dont la gestion est principalement assurée par l'Office National de la Chasse et de la Faune Sauvage.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_chasse.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.9915524,41.686985,9.615704,51.086308]}]},ONCFS:{href:"https://www.oncfs.gouv.fr/",attribution:"Office National de la Chasse et de la Faune Sauvage (ONCFS)",logo:"https://wxs.ign.fr/static/logos/ONCFS/ONCFS.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.9915524,41.686985,9.615704,51.086308]}]}}},"PROTECTEDAREAS.SIC":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Sites Natura 2000 au titre de la Directive Habitats",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337],desc:"Le réseau Natura 2000 s'inscrit au coeur de la politique de conservation de la nature de l'Union européenne et est un élément clé de l'objectif visant à enrayer l'érosion de la biodiversité.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_natura200habitats.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]},MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]}}},"PROTECTEDAREAS.ZNIEFF1":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Zones naturelles d'intérêt écologique faunistique et floristique de type 1 (20120904)",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Lancé en 1982, l'inventaire des Zones Naturelles d'Intérêt Ecologique Faunistique et Floristique (ZNIEFF) a pour objectif d'identifier et de décrire des secteurs présentant de fortes capacités biologiques et un bon état de conservation.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_znieff1.jpg",legend:[],originators:{MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.615704,51.220337]}]},MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.615704,51.220337]}]}}},"PROTECTEDAREAS.ZNIEFF2":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Zones naturelles d'intérêt écologique faunistique et floristique de type 2 (ZNIEFF type 2)",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.1283755,41.20648,9.615704,51.086308],desc:"Espaces homogènes d'un point de vue écologique abritant au moins une espèce ou un habitat rare ou menacé, d'intérêt local ou régional, national ou communautaire. Espaces d'intérêt fonctionnel pour le fonctionnement écologique local.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_znieff2.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1283755,41.20648,9.615704,51.086308]}]},MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.1283755,41.20648,9.615704,51.086308]}]}}},"PROTECTEDAREAS.ZPS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Sites NATURA 2000 au titre de la Directive Oiseaux",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337],desc:"Le réseau Natura 2000 s'inscrit au coeur de la politique de conservation de la nature de l'Union européenne et est un élément clé de l'objectif visant à enrayer l'érosion de la biodiversité.",keys:"Ecologie",qlook:"https://wxs.ign.fr/static/pictures/ecologie_natura2000oiseaux.jpg",legend:[],originators:{MNHN:{href:"https://inpn.mnhn.fr/",attribution:"Muséum national d'Histoire naturelle",logo:"https://wxs.ign.fr/static/logos/MNHN/MNHN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]},MEDDE:{href:"https://www.developpement-durable.gouv.fr/spip.php?page=accueil",attribution:"Ministère de l'Ecologie, du Développement durable et de l'Energie",logo:"https://wxs.ign.fr/static/logos/MEDDE/MEDDE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-5.3420577,41.20648,9.829387,51.220337]}]}}},"ELEVATION.LEVEL0":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Trait de côte Histolitt",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-63.252903,-21.509962,55.947227,51.138805],desc:"Formalisation de la limite entre le domaine terrestre et le domaine marin.",keys:"AltitudeLittoral",qlook:"https://wxs.ign.fr/static/pictures/ign_histolitt.jpg",legend:[{zoom:16,url:"https://wxs.ign.fr/static/legends/TDC.jpg"}],originators:{SHOM:{href:"http://www.shom.fr/",attribution:"Service hydrographique et océanographique de la marine (SHOM)",logo:"https://wxs.ign.fr/static/logos/SHOM/SHOM.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-63.252903,-21.509962,55.947227,51.138805]}]},IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-63.252903,-21.509962,55.947227,51.138805]}]}}},"AREAMANAGEMENT.ZUS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Zones urbaines sensibles",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Zones urbaines caractérisées par la présence de grands ensembles ou de quartiers d'habitat dégradé et par un déséquilibre accentué entre l'habitat et l'emploi.",keys:"Zones de gestion",qlook:"https://wxs.ign.fr/static/pictures/div_sensibles.jpg",legend:[],originators:{DIV:{href:"http://www.ville.gouv.fr/",attribution:"Délégation interministérielle à la Ville",logo:"https://wxs.ign.fr/static/logos/DIV/DIV.gif",minZoom:16,maxZoom:17,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"AREAMANAGEMENT.ZFU":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Zones franches urbaines",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212],desc:"Zones franches créées au sein de quartiers de plus de 8 500 habitants particulièrement défavorisés, en tenant compte des éléments de nature à faciliter l'implantation d'entreprises ou le développement d'activités économiques.",keys:"Zones de gestion",qlook:"https://wxs.ign.fr/static/pictures/div_franches.jpg",legend:[],originators:{DIV:{href:"http://www.ville.gouv.fr/",attribution:"Délégation interministérielle à la Ville",logo:"https://wxs.ign.fr/static/logos/DIV/DIV.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-63.37252,-21.475586,55.925865,51.31212]}]}}},"TRANSPORTNETWORKS.RUNWAYS":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Aéroports",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-68.708984,-21.475586,55.925865,76.53542],desc:"Localisation des aéroports, aérodromes et héliports, des pistes, bâtiments et équipements dédiés.",keys:"Réseaux de transports",qlook:"http://wxs.ign.fr/static/pictures/ign_aerodromes.jpg",legend:[{zoom:18,url:"http://wxs.ign.fr/static/legends/CLPA/clpa_temoignage.gif"}],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"http://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-68.708984,-21.32609,55.53543,76.53542]}]},EUROGEOGRAPHICS:{href:"http://www.eurogeographics.org/",attribution:"Eurogeographics",logo:"http://wxs.ign.fr/static/logos/EUROGEOGRAPHICS/EUROGEOGRAPHICS.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:15,maxZoom:18,bbox:[-63.37252,-21.475586,55.925865,51.31212]},{minZoom:6,maxZoom:14,bbox:[-68.708984,-21.32609,55.53543,76.53542]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.PARIS1964":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Paris 1964",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.0016477,48.788364,2.5020597,49.116974],desc:"Zone de Paris - Cartographie 1964",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:16,maxZoom:17,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0016477,48.788364,2.5020597,49.116974]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0016477,48.788364,2.5020597,49.116974]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.PARIS1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Paris 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.0016477,48.70587,2.6271625,49.035023],desc:"Zone de Paris - Cartographie 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0016477,48.70587,2.6271625,49.035023]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0016477,48.70587,2.6271625,49.035023]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VERSAILLES1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Versailles 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,2.5020597,49.035023],desc:"Zone de Versailles - Cartographie 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,2.5020597,49.035023]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,2.5020597,49.035023]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.ROISSY1973":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Roissy 1973",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.116974],desc:"Zone de Roissy - Cartographie 1973",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.116974]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.116974]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.ROISSY1978":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Roissy 1978",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.280468],desc:"Zone de Roissy - Cartographie 1978",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.280468]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,48.87072,2.7522655,49.280468]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VANNES-GOLFE-DU-MORBIHAN1971":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Vannes Golfe du Morbihan 1971",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351],desc:"Zone de Vannes Golfe du Morbihan - Cartographie 1971",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VANNES-GOLFE-DU-MORBIHAN1960":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Vannes Golfe du Morbihan 1960",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351],desc:"Zone de Vannes Golfe du Morbihan - Cartographie 1960",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-3.3777804,47.36757,-2.5020597,47.87351]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LYON1985":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie LYON 1985",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.6288104,45.558155,5.1292224,45.994427],desc:"Zone de LYON - Cartographie 1985",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.558155,5.1292224,45.994427]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.558155,5.1292224,45.994427]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LYON1980":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie LYON 1980",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.6288104,45.470493,5.1292224,45.994427],desc:"Zone de LYON - Cartographie 1980",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.470493,5.1292224,45.994427]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.470493,5.1292224,45.994427]}]}}},"ORTHOIMAGERY.EDUGEO.PARIS1949":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Paris 1949",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[2.2018125,48.76363,2.5270803,48.952938],desc:"Photographie - Paris 1949",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.2018125,48.76363,2.5270803,48.952938]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.2018125,48.76363,2.5270803,48.952938]}]}}},"ORTHOIMAGERY.EDUGEO.PARIS2010SPOT":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT PARIS 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,3.0024714,49.36201],desc:"Zone de Paris - SPOT 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,3.0024714,49.36201]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.540485,3.0024714,49.36201]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.BERRY-SUD1952":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie BERRY SUD 1952",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.0008239,46.167976,1.7514417,46.68536],desc:"Zone de BERRY SUD - Cartographie 1952",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,46.167976,1.7514417,46.68536]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,46.167976,1.7514417,46.68536]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.BOURG-ST-MAURICE1974":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie BOURG St-MAURICE 1974",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[6.505355,45.382694,7.13087,45.733074],desc:"Zone de BOURG St-MAURICE - Cartographie 1974",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.505355,45.382694,7.13087,45.733074]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.505355,45.382694,7.13087,45.733074]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.CAEN1969":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie CAEN 1969",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-.87572086,49.035023,-.12510298,49.44342],desc:"Zone de CAEN - Cartographie 1969",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.87572086,49.035023,-.12510298,49.44342]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.87572086,49.035023,-.12510298,49.44342]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.AJACCIO1976":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie AJACCIO 1976",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[8.507003,41.665398,9.132518,42.03814],desc:"Zone d'Ajaccio - Cartographie 1976",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[8.507003,41.665398,9.132518,42.03814]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[8.507003,41.665398,9.132518,42.03814]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.BELFORT-MONTBELLIARD1973":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie BELFORT MONTBELLIARD 1973",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[6.505355,47.36757,7.255973,47.87351],desc:"Zone d'Ajaccio - BELFORT MONTBELLIARD 1973",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.505355,47.36757,7.255973,47.87351]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.505355,47.36757,7.255973,47.87351]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.CLERMONT-FERRAND1966":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie CLERMONT FERRAND 1966",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.7522655,45.645683,3.3777804,45.994427],desc:"Zone de CLERMONT FERRAND 1966",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.7522655,45.645683,3.3777804,45.994427]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.7522655,45.645683,3.3777804,45.994427]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.CREIL-SUD-PICARDIE1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie CREIL SUD PICARDIE 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.2518537,49.035023,3.1275744,49.605835],desc:"Zone de CREIL SUD PICARDIE 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,49.035023,3.1275744,49.605835]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,49.035023,3.1275744,49.605835]}]}}},"ORTHOIMAGERY.EDUGEO.VERSAILLES1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Versailles 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[1.9891374,48.606705,2.3269155,48.87895],desc:"Photographie - Versailles 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.9891374,48.606705,2.3269155,48.87895]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[1.9891374,48.606705,2.3269155,48.87895]}]}}},"ORTHOIMAGERY.EDUGEO.VANNES-GOLFE-DU-MORBIHAN1970":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - VANNES GOLFE DU MORBIHAN 1970",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-3.2026362,47.46069,-2.6271625,47.713825],desc:"Photographie - VANNES GOLFE DU MORBIHAN 1970",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-3.2026362,47.46069,-2.6271625,47.713825]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-3.2026362,47.46069,-2.6271625,47.713825]}]}}},"ORTHOIMAGERY.EDUGEO.ROISSY1987":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - ROISSY 1987",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[2.4520185,48.944725,2.652183,49.035023],desc:"Photographie - ROISSY 1987",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.4520185,48.944725,2.652183,49.035023]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.4520185,48.944725,2.652183,49.035023]}]}}},"ORTHOIMAGERY.EDUGEO.ROISSY1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - ROISSY 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[2.351936,48.903625,2.7022243,49.043224],desc:"Photographie - ROISSY 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.351936,48.903625,2.7022243,49.043224]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[2.351936,48.903625,2.7022243,49.043224]}]}}},"ORTHOIMAGERY.EDUGEO.LYON1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LYON 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[4.7163825,45.549397,5.079181,45.89874],desc:"Photographie - LYON 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[4.7163825,45.549397,5.079181,45.89874]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[4.7163825,45.549397,5.079181,45.89874]}]}}},"ORTHOIMAGERY.EDUGEO.METZ-NANCY1982":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - METZ NANCY 1982",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[5.9549017,48.59016,6.430293,49.337563],desc:"Photographie - METZ NANCY 1982",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[{zoom:18,url:"https://wxs.ign.fr/static/legends/ign_bdortho_legende.jpg"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[5.9549017,48.59016,6.430293,49.337563]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[5.9549017,48.59016,6.430293,49.337563]}]}}},"ORTHOIMAGERY.EDUGEO.LYON1984":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LYON 1984",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.703872,45.70687,5.1792636,45.872616],desc:"Photographie - LYON 1984",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.703872,45.70687,5.1792636,45.872616]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.703872,45.70687,5.1792636,45.872616]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LYON1947":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie LYON 1947",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.5037074,45.470493,5.379428,46.08127],desc:"Zone de LYON - Cartographie 1947",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,45.470493,5.379428,46.08127]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,45.470493,5.379428,46.08127]}]}}},"ORTHOIMAGERY.EDUGEO.LYON1988":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LYON 1988",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.6288104,45.53187,5.1292224,45.91615],desc:"Photographie - LYON 1988",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.53187,5.1292224,45.91615]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6288104,45.53187,5.1292224,45.91615]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LE-HAVRE1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Le Havre 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.6255149,49.68684],desc:"Zone du Havre 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.6255149,49.68684]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.6255149,49.68684]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LA-ROCHELLE-ROCHEFORT1959":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie LA ROCHELLE-ROCHEFORT 1959",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.3761327,45.733074,-.75061786,46.427284],desc:"Zone de LA ROCHELLE-ROCHEFORT 1959",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.3761327,45.733074,-.75061786,46.427284]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.3761327,45.733074,-.75061786,46.427284]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LE-HAVRE1975":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Le Havre 1975",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.5004119,49.68684],desc:"Zone du Havre 1975",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.5004119,49.68684]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.12510298,49.280468,.5004119,49.68684]}]}}},"ORTHOIMAGERY.EDUGEO.AJACCIO1990":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - AJACCIO 1990",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[8.644616,41.786777,8.982394,42.093864],desc:"Photographie - Ajaccio 1990",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[8.644616,41.786777,8.982394,42.093864]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[8.644616,41.786777,8.982394,42.093864]}]}}},"ORTHOIMAGERY.EDUGEO.REIMS2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT REIMS 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.5028834,48.952938,4.7539134,49.36201],desc:"Zone de Paris - REIMS 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.5028834,48.952938,4.7539134,49.36201]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.5028834,48.952938,4.7539134,49.36201]}]}}},"ORTHOIMAGERY.EDUGEO.STRASBOURG2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT STRASBOURG 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[7.13087,48.041065,8.256797,48.87072],desc:"Zone de Paris - STRASBOURG 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.13087,48.041065,8.256797,48.87072]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.13087,48.041065,8.256797,48.87072]}]}}},"ORTHOIMAGERY.EDUGEO.BETHUNE1963":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BETHUNE 1963",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.6271625,50.39388,2.9524302,50.5054],desc:"Photographie - BETHUNE 1963",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.6271625,50.39388,2.9524302,50.5054]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.6271625,50.39388,2.9524302,50.5054]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VALEE-DU-DRAC2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT Vallée du Drac 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.1292224,44.764267,6.255149,45.03013],desc:"Zone de la Vallée du Drac - 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.1292224,44.764267,6.255149,45.03013]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.1292224,44.764267,6.255149,45.03013]}]}}},"ORTHOIMAGERY.EDUGEO.BETHUNE1964":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BETHUNE 1964",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.8398376,50.330032,3.2902083,50.409824],desc:"Photographie - BETHUNE 1964",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8398376,50.330032,3.2902083,50.409824]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8398376,50.330032,3.2902083,50.409824]}]}}},"ORTHOIMAGERY.EDUGEO.ARCACHON2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT ARCACHON 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.8765447,44.228863,-.75061786,45.03013],desc:"Zone d'ARCACHON - 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8765447,44.228863,-.75061786,45.03013]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8765447,44.228863,-.75061786,45.03013]}]}}},"ORTHOIMAGERY.EDUGEO.BETHUNE1988":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BETHUNE 1988",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.552101,50.322044,3.2401671,50.489487],desc:"Photographie - BETHUNE 1988",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.552101,50.322044,3.2401671,50.489487]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.552101,50.322044,3.2401671,50.489487]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.GUADELOUPE1955":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Guadeloupe 1955",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.67577,16.169485,-61.30046,16.649511],desc:"Zone de Guadeloupe 1955",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.67577,16.169485,-61.30046,16.649511]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.67577,16.169485,-61.30046,16.649511]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.GUYANE1958":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Guyane 1958",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-54.419796,5.122385,-53.418972,5.99398],desc:"Zone de Guyane 1958",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.419796,5.122385,-53.418972,5.99398]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.419796,5.122385,-53.418972,5.99398]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.BIARRITZ1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie BIARRITZ 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.8765447,43.143314,-1.2510298,43.688545],desc:"Zone de Biarritz 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8765447,43.143314,-1.2510298,43.688545]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8765447,43.143314,-1.2510298,43.688545]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LIMOGES1966":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Limoges 1966",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.0008239,45.645683,1.5012357,45.994427],desc:"Zone de Limoges 1966",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,45.645683,1.5012357,45.994427]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,45.645683,1.5012357,45.994427]}]}}},"ORTHOIMAGERY.EDUGEO.BELFORT-MONTBELLIARD1951":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BELFORT MONTBELLIARD 1951",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[6.6930094,47.46069,6.968236,47.68014],desc:"Photographie - BELFORT MONTBELLIARD 1951",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.6930094,47.46069,6.968236,47.68014]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.6930094,47.46069,6.968236,47.68014]}]}}},"ORTHOIMAGERY.EDUGEO.MARSEILLE-MARTIGUES2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT MARSEILLE-MARTIGUES 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.254325,43.143314,5.754737,43.416542],desc:"Zone de MARSEILLE-MARTIGUES - 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.254325,43.143314,5.754737,43.416542]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.254325,43.143314,5.754737,43.416542]}]}}},"ORTHOIMAGERY.EDUGEO.BERRY-SUD1950":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BERRY SUD 1950",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.2385195,46.36689,1.4887254,46.453144],desc:"Photographie - BERRY SUD 1950",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.2385195,46.36689,1.4887254,46.453144]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.2385195,46.36689,1.4887254,46.453144]}]}}},"ORTHOIMAGERY.EDUGEO.BERRY-SUD1970":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BERRY SUD 1970",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.0133342,46.608067,1.4261739,46.728252],desc:"Photographie - BERRY SUD 1970",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0133342,46.608067,1.4261739,46.728252]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0133342,46.608067,1.4261739,46.728252]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.DIJON1962":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Dijon 1962",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.7539134,46.94221,5.379428,47.53676],desc:"Zone de Dijon 1962",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.7539134,46.94221,5.379428,47.53676]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.7539134,46.94221,5.379428,47.53676]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.GRENOBLE1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie GRENOBLE 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694],desc:"Zone de Grenoble 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694]}]}}},"ORTHOIMAGERY.EDUGEO.LYON2008":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT LYON 2008",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.5037074,45.206684,5.754737,45.994427],desc:"Zone de LYON - 2008",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,45.206684,5.754737,45.994427]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,45.206684,5.754737,45.994427]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.GRENOBLE1976":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie GRENOBLE 1976",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.504531,45.03013,6.255149,45.470493],desc:"Zone de Grenoble 1976",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,45.03013,6.255149,45.470493]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,45.03013,6.255149,45.470493]}]}}},"ORTHOIMAGERY.EDUGEO.CAP-D-AGDE2008":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT Cap d'Agde 2008",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.1275744,43.143314,3.7530894,43.507347],desc:"Zone du Cap d'Agde - 2008",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.1275744,43.143314,3.7530894,43.507347]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.1275744,43.143314,3.7530894,43.507347]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.GRENOBLE1991":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie GRENOBLE 1991",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694],desc:"Zone de Grenoble 1991",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.504531,44.941643,6.130046,45.382694]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARSEILLE-MARTIGUES1947":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARSEILLE MARTIGUES 1947",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.5037074,43.051964,5.629634,43.688545],desc:"Zone de MARSEILLE MARTIGUES 1947",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,43.051964,5.629634,43.688545]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.5037074,43.051964,5.629634,43.688545]}]}}},"ORTHOIMAGERY.EDUGEO.PARIS1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Paris 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.0266683,48.846027,2.4895494,48.98579],desc:"Photographie - Paris 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0266683,48.846027,2.4895494,48.98579]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.0266683,48.846027,2.4895494,48.98579]}]}}},"ORTHOIMAGERY.EDUGEO.LA-REUNION1980":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LA REUNION 1980",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[55.157906,-21.437168,55.658318,-20.783613],desc:"Photographie - LA REUNION 1980",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.157906,-21.437168,55.658318,-20.783613]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.157906,-21.437168,55.658318,-20.783613]}]}}},"ORTHOIMAGERY.EDUGEO.CLERMONT-FERRAND1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - CLERMONT FERRAND 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.8273273,45.715607,3.2902083,45.95965],desc:"Photographie - CLERMONT FERRAND 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8273273,45.715607,3.2902083,45.95965]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8273273,45.715607,3.2902083,45.95965]}]}}},"ORTHOIMAGERY.EDUGEO.CREIL-SUD-PICARDIE1975":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - CREIL SUD PICARDIE 1975",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.2518537,49.076015,2.9649405,49.508453],desc:"Photographie - CREIL SUD PICARDIE 1975",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,49.076015,2.9649405,49.508453]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.2518537,49.076015,2.9649405,49.508453]}]}}},"ORTHOIMAGERY.EDUGEO.CLERMONT-FERRAND1985":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - CLERMONT FERRAND 1985",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.8898787,45.70687,3.277698,45.942253],desc:"Photographie - CLERMONT FERRAND 1985",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8898787,45.70687,3.277698,45.942253]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.8898787,45.70687,3.277698,45.942253]}]}}},"ORTHOIMAGERY.EDUGEO.BOURG-ST-MAURICE1956":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BOURG SAINT MAURICE 1956",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[6.6179476,45.479267,6.8556433,45.62819],desc:"Photographie - BOURG SAINT MAURICE 1956",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.6179476,45.479267,6.8556433,45.62819]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[6.6179476,45.479267,6.8556433,45.62819]}]}}},"ORTHOIMAGERY.EDUGEO.CAEN1991":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - CAEN 1991",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-.97580326,49.035023,.025020596,49.410873],desc:"Photographie - CAEN 1991",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.97580326,49.035023,.025020596,49.410873]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.97580326,49.035023,.025020596,49.410873]}]}}},"ORTHOIMAGERY.EDUGEO.GUADELOUPE1984":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - GUADELOUPE 1984",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.76334,15.94106,-61.475605,16.33763],desc:"Photographie - GUADELOUPE 1984",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.76334,15.94106,-61.475605,16.33763]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.76334,15.94106,-61.475605,16.33763]}]}}},"ORTHOIMAGERY.EDUGEO.GUYANE1955":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - GUYANE 1955",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-54.13206,5.3839974,-53.506546,5.794873],desc:"Photographie - Guyane 1955",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.13206,5.3839974,-53.506546,5.794873]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-54.13206,5.3839974,-53.506546,5.794873]}]}}},"ORTHOIMAGERY.EDUGEO.LA-REUNION1961":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LA REUNION 1961",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[55.257988,-21.390581,55.583256,-20.853773],desc:"Photographie - LA REUNION 1961",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.257988,-21.390581,55.583256,-20.853773]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.257988,-21.390581,55.583256,-20.853773]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.LA-REUNION1980":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie LA REUNION 1980",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[55.04531,-21.49538,55.670826,-20.67831],desc:"Zone de la Réunion 1980",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.04531,-21.49538,55.670826,-20.67831]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARSEILLE-MARTIGUES1980":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARSEILLE MARTIGUES 1980",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.0041194,43.051964,5.629634,43.507347],desc:"Zone de MARSEILLE MARTIGUES 1980",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.0041194,43.051964,5.629634,43.507347]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.0041194,43.051964,5.629634,43.507347]}]}}},"ORTHOIMAGERY.EDUGEO.LA-REUNION1989":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LA REUNION 1989",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[55.207947,-21.40223,55.73338,-20.853773],desc:"Photographie - LA REUNION 1989",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.207947,-21.40223,55.73338,-20.853773]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.207947,-21.40223,55.73338,-20.853773]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARSEILLE-MARTIGUES1986":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARSEILLE MARTIGUES 1986",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.8790164,43.051964,5.629634,43.688545],desc:"Zone de MARSEILLE MARTIGUES 1986",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.8790164,43.051964,5.629634,43.688545]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.8790164,43.051964,5.629634,43.688545]}]}}},"ORTHOIMAGERY.EDUGEO.LA-ROCHELLE-ROCHEFORT1950":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LA ROCHELLE ROCHEFORT 1950",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.0633754,45.056644,5.967412,45.994427],desc:"Photographie LA ROCHELLE ROCHEFORT 1950",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.0633754,45.056644,5.967412,45.994427]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.0633754,45.056644,5.967412,45.994427]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.METZ-NANCY1983":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie METZ NANCY 1983",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.754737,48.45759,6.505355,49.36201],desc:"Zone de METZ NANCY 1983",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.754737,48.45759,6.505355,49.36201]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.754737,48.45759,6.505355,49.36201]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.NANTES1972":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie NANTES 1972",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-2.5020597,47.027554,-1.2510298,47.452232],desc:"Zone de NANTES 1972",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.5020597,47.027554,-1.2510298,47.452232]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.5020597,47.027554,-1.2510298,47.452232]}]}}},"ORTHOIMAGERY.EDUGEO.MARSEILLE-MARTIGUES1969":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - MARSEILLE MARTIGUES 1969",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.204284,43.179817,5.6921854,43.398365],desc:"Photographie MARSEILLE MARTIGUES1969",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.204284,43.179817,5.6921854,43.398365]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.204284,43.179817,5.6921854,43.398365]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARNE-LA-VALLEE1978":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARNE LA VALLÉE 1978",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,2.7522655,49.035023],desc:"Zone de MARNE LA VALLÉE 1978",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,2.7522655,49.035023]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,2.7522655,49.035023]}]}}},"ORTHOIMAGERY.EDUGEO.MARSEILLE-MARTIGUES1987":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - MARSEILLE MARTIGUES 1987",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.653831,43.3165,5.104202,43.570827],desc:"Photographie MARSEILLE MARTIGUES1987",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.653831,43.3165,5.104202,43.570827]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.653831,43.3165,5.104202,43.570827]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARNE-LA-VALLEE1966":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARNE LA VALLÉE 1966",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023],desc:"Zone de MARNE LA VALLÉE 1966",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023]}]}}},"ORTHOIMAGERY.EDUGEO.MARSEILLE-MARTIGUES1988":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - MARSEILLE MARTIGUES 1988",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.9165473,43.37109,5.391938,43.570827],desc:"Photographie MARSEILLE MARTIGUES1988",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.9165473,43.37109,5.391938,43.570827]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.9165473,43.37109,5.391938,43.570827]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.MARNE-LA-VALLEE1987":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie MARNE LA VALLÉE 1987",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023],desc:"Zone de MARNE LA VALLÉE 1987",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,48.70587,3.1275744,49.035023]}]}}},"ORTHOIMAGERY.EDUGEO.MARTINIQUE1988":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - La Martinique 1988",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-61.137825,14.371347,-60.82507,14.710415],desc:"Photographie de la Martinique 1988",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.137825,14.371347,-60.82507,14.710415]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-61.137825,14.371347,-60.82507,14.710415]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.REIMS1974":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie REIMS 1974",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.44342],desc:"Zone de REIMS 1974",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.44342]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.44342]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.REIMS1983":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie REIMS 1983",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.605835],desc:"Zone de REIMS 1983",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.605835]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.7530894,49.035023,4.5037074,49.605835]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.STRASBOURG1956":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie STRASBOURG 1956",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[7.255973,48.208084,8.131694,48.788364],desc:"Zone de STRASBOURG 1956",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.255973,48.208084,8.131694,48.788364]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.255973,48.208084,8.131694,48.788364]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.STRASBOURG1978":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie STRASBOURG 1978",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[7.255973,48.12464,8.006591,48.87072],desc:"Zone de STRASBOURG 1978",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.255973,48.12464,8.006591,48.87072]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.255973,48.12464,8.006591,48.87072]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.TOULON-HYERES1976":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie TOULON HYERES 1976",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.629634,42.86886,6.380252,43.234528],desc:"Zone de TOULON HYERES 1976",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.629634,42.86886,6.380252,43.234528]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.629634,42.86886,6.380252,43.234528]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.TOULOUSE1948":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie TOULOUSE 1948",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.1259269,43.416542,1.7514417,43.77894],desc:"Zone de TOULOUSE 1948",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.1259269,43.416542,1.7514417,43.77894]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.1259269,43.416542,1.7514417,43.77894]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.CAP-DAGDE1971":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie Cap d'AGDE 1971",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.0024714,43.143314,3.6279864,43.507347],desc:"Zone du Cap d'Agde 1971",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.0024714,43.143314,3.6279864,43.507347]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.0024714,43.143314,3.6279864,43.507347]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.BETHUNE1956":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Cartographie BETHUNE 1956",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.3769567,50.17004,3.3777804,50.648403],desc:"Zone de BETHUNE 1956",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/SCAN25.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,50.17004,3.3777804,50.648403]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.3769567,50.17004,3.3777804,50.648403]}]}}},"ORTHOIMAGERY.EDUGEO.LE-HAVRE2008":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT LE HAVRE 2008",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-.37530893,49.035023,1.0008239,49.848446],desc:"Zone du HAVRE - 2008",keys:"EDUGEO",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.37530893,49.035023,1.0008239,49.848446]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-.37530893,49.035023,1.0008239,49.848446]}]}}},"ORTHOIMAGERY.EDUGEO.LA-REUNION2010":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT Ls Réunion 2010",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[55.04531,-21.49538,55.921032,-20.67831],desc:"Zone de la Réunion - 2010",keys:"EDUGEO",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.04531,-21.49538,55.921032,-20.67831]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[55.04531,-21.49538,55.921032,-20.67831]}]}}},"ORTHOIMAGERY.EDUGEO.NANTES1971":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Nantes 1971",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-2.2768743,47.104248,-1.4011533,47.359097],desc:"Photographie de Nantes 1971",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.2768743,47.104248,-1.4011533,47.359097]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-2.2768743,47.104248,-1.4011533,47.359097]}]}}},"ORTHOIMAGERY.EDUGEO.MARNE-LA-VALLEE1965":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Marne La Vallée 1965",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.4019773,48.846027,2.93992,48.98579],desc:"Photographie de Marne la Vallée 1965",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.4019773,48.846027,2.93992,48.98579]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.4019773,48.846027,2.93992,48.98579]}]}}},"ORTHOIMAGERY.EDUGEO.MARNE-LA-VALLEE1977":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Marne La Vallée 1977",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.4895494,48.813084,2.9274096,48.969368],desc:"Photographie de Marne la Vallée 1977",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.4895494,48.813084,2.9274096,48.969368]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.4895494,48.813084,2.9274096,48.969368]}]}}},"ORTHOIMAGERY.EDUGEO.STRASBOURG1975":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Strasbourg 1975",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[7.3185244,48.407784,7.931529,48.656315],desc:"Photographie de Strasbourg 1975",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.3185244,48.407784,7.931529,48.656315]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.3185244,48.407784,7.931529,48.656315]}]}}},"ORTHOIMAGERY.EDUGEO.STRASBOURG1985":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Strasbourg 1985",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[7.468648,48.39948,7.893998,48.623245],desc:"Photographie de Strasbourg 1985",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.468648,48.39948,7.893998,48.623245]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[7.468648,48.39948,7.893998,48.623245]}]}}},"ORTHOIMAGERY.EDUGEO.TOULOUSE1954":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie -Toulouse 1954",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.2385195,43.561764,1.5512769,43.72472],desc:"Photographie de Toulouse 1954",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.2385195,43.561764,1.5512769,43.72472]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.2385195,43.561764,1.5512769,43.72472]}]}}},"ORTHOIMAGERY.EDUGEO.LE-HAVRE1955":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Le Havre 1955",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[.05004119,49.459686,.38781923,49.540936],desc:"Photographie du Havre 1955",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.05004119,49.459686,.38781923,49.540936]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.05004119,49.459686,.38781923,49.540936]}]}}},"ORTHOIMAGERY.EDUGEO.LA-ROCHELLE-ROCHEFORT1973":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - LA-ROCHELLE-ROCHEFORT 1973",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.3761327,46.072594,-1.0383548,46.228592],desc:"Photographie de La Rochelle Rochefort 1973",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.3761327,46.072594,-1.0383548,46.228592]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.3761327,46.072594,-1.0383548,46.228592]}]}}},"ORTHOIMAGERY.EDUGEO.GRENOBLE1966":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Grenoble 1966",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.6171236,45.065483,5.9423914,45.285954],desc:"Photographie de Grenoble 1966",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.6171236,45.065483,5.9423914,45.285954]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.6171236,45.065483,5.9423914,45.285954]}]}}},"ORTHOIMAGERY.EDUGEO.DIJON1971":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Dijon 1971",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.8790164,47.18933,5.2418146,47.36757],desc:"Photographie de Dijon 1971",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.8790164,47.18933,5.2418146,47.36757]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.8790164,47.18933,5.2418146,47.36757]}]}}},"ORTHOIMAGERY.EDUGEO.MARNE-LA-VALLEE1987":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Marne la Vallée 1987",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[2.477039,48.86249,2.9274096,48.944725],desc:"Photographie de Marne la Vallée 1987",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.477039,48.86249,2.9274096,48.944725]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[2.477039,48.86249,2.9274096,48.944725]}]}}},"ORTHOIMAGERY.EDUGEO.GRENOBLE1989":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Grenoble 1989",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.542062,45.056644,5.967412,45.33874],desc:"Photographie de Grenoble 1989",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.542062,45.056644,5.967412,45.33874]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.542062,45.056644,5.967412,45.33874]}]}}},"ORTHOIMAGERY.EDUGEO.TOULON-HYERES1972":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - TOULON-HYERES 1972",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.7422266,42.969635,6.3302107,43.216293],desc:"Photographie de TOULON-HYERES 1972",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.7422266,42.969635,6.3302107,43.216293]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[5.7422266,42.969635,6.3302107,43.216293]}]}}},"ORTHOIMAGERY.EDUGEO.VERSAILLES1989":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Versailles 1989",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.8765447,48.631516,2.3394258,48.87895],desc:"Photographie de Versailles 1989",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.631516,2.3394258,48.87895]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.8765447,48.631516,2.3394258,48.87895]}]}}},"ORTHOIMAGERY.EDUGEO.REIMS1988":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Reims 1988",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.9157233,49.12516,4.2535014,49.280468],desc:"Photographie de Reims 1988",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9157233,49.12516,4.2535014,49.280468]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9157233,49.12516,4.2535014,49.280468]}]}}},"ORTHOIMAGERY.EDUGEO.REIMS1973":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Reims 1973",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.9532542,49.12516,4.228481,49.288628],desc:"Photographie de Reims 1973",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9532542,49.12516,4.228481,49.288628]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9532542,49.12516,4.228481,49.288628]}]}}},"ORTHOIMAGERY.EDUGEO.REIMS1963":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Reims 1963",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.9532542,49.116974,4.2159705,49.296787],desc:"Photographie de Reims 1963",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9532542,49.116974,4.2159705,49.296787]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.9532542,49.116974,4.2159705,49.296787]}]}}},"ORTHOIMAGERY.EDUGEO.LE-HAVRE1964":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Le Havre 1964",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[.05004119,49.44342,.37530893,49.622047],desc:"Photographie du Havre 1964",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.05004119,49.44342,.37530893,49.622047]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.05004119,49.44342,.37530893,49.622047]}]}}},"ORTHOIMAGERY.EDUGEO.CAP-D-AGDE1968":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Le Cap d'Agde 1968",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[3.027492,43.18894,3.6029658,43.398365],desc:"Photographie du Cap d'Agde 1968",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.027492,43.18894,3.6029658,43.398365]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[3.027492,43.18894,3.6029658,43.398365]}]}}},"ORTHOIMAGERY.EDUGEO.LIMOGES1974":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Limoges 1974",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[1.0008239,45.70687,1.4261739,45.95965],desc:"Photographie de Limoges 1974",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,45.70687,1.4261739,45.95965]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[1.0008239,45.70687,1.4261739,45.95965]}]}}},"ORTHOIMAGERY.EDUGEO.BIARRITZ1977":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - Biarritz 1977",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.8265035,43.3165,-1.1884784,43.71568],desc:"Photographie de Biarritz 1977",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8265035,43.3165,-1.1884784,43.71568]}]},MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.8265035,43.3165,-1.1884784,43.71568]}]}}},"ORTHOIMAGERY.EDUGEO.BORDEAUX2003":{server:"https://wxs.ign.fr/edugeo/wmts",title:"SPOT BORDEAUX 2003",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.1259269,44.675377,.12510298,45.558155],desc:"Zone de Bordeaux 2003",keys:"EDUGEO",legend:[],originators:{MEN:{href:"https://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.1259269,44.675377,.12510298,45.558155]}]}}},"ORTHOIMAGERY.EDUGEO.BIARRTITZ1979":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - BIARRTITZ 1979",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[-1.1384372,43.679497,-.97580326,43.76087],desc:"Photographie - Biarritz 1979",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.1384372,43.679497,-.97580326,43.76087]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[-1.1384372,43.679497,-.97580326,43.76087]}]}}},"ORTHOIMAGERY.EDUGEO.MARSEILLE-MARTIGUES1980":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Photographie - MARSEILLE MARTIGUES 1980",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[4.6788516,43.3165,5.291856,43.570827],desc:"Photographie MARSEILLE MARTIGUES1980",keys:"EDUGEO",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6788516,43.3165,5.291856,43.570827]}]},MEN:{href:"http://www.education.gouv.fr",attribution:"Ministère de l'Education nationale",logo:"https://wxs.ign.fr/static/logos/MEN/MEN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[4.6788516,43.3165,5.291856,43.570827]}]}}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VERDUN_NORD_fronts_francais_20K":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Verdun nord : fronts français (21-26 février 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.2943406,49.16802,5.5803385,49.30358],desc:"Zone de Verdun nord : fronts français (21-26 février 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.DOUAUMONT_FORT_positions_5K_18mai1916":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Fort Douaumont (18 mai 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:17,bbox:[5.2943406,49.16802,5.5803385,49.30358],desc:"Zone du Fort de Douaumont (18 mai 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.Douaumont1916":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Douaumont et ses environs (avril 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:17,bbox:[5.3876123,49.151936,5.4924345,49.232555],desc:"Zone de Douaumont et ses environs (avril 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.Le-Mort-Homme-et-ses-environs-avril-1916":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Le Mort Homme et ses environs (avril 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:17,bbox:[5.209687,49.19777,5.310445,49.260227],desc:"Zone du Mort Homme et ses environs (avril 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.Positions_20K_avr1916":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Organisation défensive sur la Meuse (avril 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.116589,49.13075,5.5805936,49.273174],desc:"Zone de l'Organisation défensive sur la Meuse (avril 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.EDUGEO.VERDUN_NORD_organisations_defensives_20K":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Verdun nord : organisations défensives (21 février 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[5.2869353,49.160862,5.5849295,49.306927],desc:"Zone de Verdun nord : organisations défensives (21 février 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.VERDUN_ENVIRONS_fronts_50K_21-26fevr1916":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Verdun et ses environs : fronts français (21-26 février 1916)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:14,bbox:[4.98696,49.084904,5.6430454,49.371914],desc:"Zone de Verdun et ses environs : fronts français (21-26 février 1916)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.VERDUN_ENVIRONS_NORD_fronts_offensves_50K":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Verdun et ses environs : offensives (février 1916 à aout1917 )",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:14,bbox:[4.990179,49.08869,5.654369,49.414417],desc:"Zone de Verdun et ses environs : offensives (février 1916 à aout1917 )",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.1914_11_15_ARRAS_VERDUN_BELFORT_fronts_600K":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Front : Arras Verdun Belfort (15 novembre 1914)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:10,bbox:[.87352955,47.33962,8.885213,51.28567],desc:"Zone de front : Arras Verdun Belfort (15 novembre 1914)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[],originators:{}},World_Topo_Map:{server:"https://wxs.ign.fr/proxy/",title:"Esri World Topographic Map",order:"9990000",format:"image/jpg",tilematrix:"PM",style:"default",minZoom:0,maxZoom:19,bbox:[-180,-90,180,90],desc:"Carte topographique mondiale multi-échelles produite par Esri.Crédits : Esri, HERE, DeLorme, TomTom,Intermap, increment P Corp., GEBCO, USGS, FAO, NPS, NRCAN, GeoBase, IGN, Kadaster NL, Ordnance Survey, Esri Japan, METI, Esri China (Hong Kong), swisstopo, MapmyIndia, © OpenStreetMap contributors, GIS User Comm.",keys:"Photographies",qlook:"https://wxs.ign.fr/static/pictures/ign_ortho.jpg",legend:[],originators:{"Esri World Topographic Map":{href:"https://www.arcgis.com/home/item.html?id=30e5fe3149c34df1ba922e6f5bbf808f",attribution:"Esri Inc",logo:"https://wxs.ign.fr/static/logos/WORLD_TOPO_MAP/WORLD_TOPO_MAP.png",minZoom:6,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-180,-90,180,90]}]}}},"LANDCOVER.EDUGEO.EVOL_SURFACE_FORESTIERE_1980-2011":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Évolution des surfaces forestières (1980 et 2011)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:3,maxZoom:13,bbox:[-6.0888953,41.18441,10.961009,50.9218],desc:"Évolution annuelle des surfaces forestières entre les années 1980 et 2011",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[{zoom:10,url:"http://scen-mantis.ign.fr/Edugeo/img/Tx_evol_bois.JPG"}],originators:{}},"LANDCOVER.EDUGEO.TAUX_BOISEMENT_2009-2013":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Taux de boisement (année moyenne 2011)",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:3,maxZoom:13,bbox:[-6.0888953,41.18441,10.961009,50.9218],desc:"Taux de boisement par département sur les années 2009-2013 (année moyenne 2011)",keys:"Cartes historiques",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[{zoom:10,url:"http://scen-mantis.ign.fr/Edugeo/img/Tx_boisement.JPG"}],originators:{}},"LANDCOVER.EDUGEO.KLAUS":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Tempête Klaus",order:"9971000",format:"image/png",tilematrix:"PM",style:"normal",minZoom:3,maxZoom:13,bbox:[-6.0888953,41.18441,10.961009,50.9218],desc:"Cartographie des dégâts de la tempête Klaus",keys:"Cartes degats",qlook:"https://wxs.ign.fr/static/pictures/ehess_cassini2.jpg",legend:[{zoom:10,url:"http://scen-mantis.ign.fr/Edugeo/img/tempete_KLAUS.JPG"}],originators:{}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.OVERVIEW":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Carte Mondiale",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75],desc:"Carte Mondiale",keys:"Mini-Vue",legend:[],originators:{NATURALEARTH:{href:"http://www.naturalearthdata.com",attribution:"Natural Earth",logo:"https://wxs.ign.fr/static/logos/NATURALEARTH/NATURALEARTH.gif",minZoom:8,maxZoom:16,constraint:[{minZoom:1,maxZoom:8,bbox:[-179.5,-75,179.5,75]}]}}},"LANDCOVER.EDUGEO.LGV_faune":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Faune le long de la LGV SEA.",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528],desc:"Cartographie des principaux sites d’intérêt faunistique le long de la LGV SEA.",keys:"LGVEDUGEOFauneFlore",legend:["../bundles/macarte/www/macarte/img/Edugeo/LGV/legende_lgv-faune.png"],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528]}]}}},"LANDCOVER.EDUGEO.LGV_flore":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Flore le long de la LGV SEA.",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528],desc:"Cartographie des principaux sites d’intérêt floristique le long de la LGV SEA.",keys:"LGVEDUGEOFauneFlore",legend:["../bundles/macarte/www/macarte/img/Edugeo/LGV/legende_lgv-flore.png"],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528]}]}}},"LANDCOVER.EDUGEO.LGV_technique":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Caractéristiques techniques de la LGV SEA.",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528],desc:"Cartographie des caractéristiques techniques de la LGV SEA.",keys:"LGVEDUGEOFauneFlore",legend:["../bundles/macarte/www/macarte/img/Edugeo/LGV/legende_lgv-technique.png"],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-.8983153,44.863132,.8983153,47.414528]}]}}},"LANDCOVER.EDUGEO.LGV_archeologie":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Fouilles archéologiques le long de la LGV SEA.",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:18,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Cartographie des principaux sites de fouille archéologique le long de la LGV SEA.",keys:"LGVEDUGEOFauneFlore",legend:["../bundles/macarte/www/macarte/img/Edugeo/LGV/legende_lgv-archeologie.png"],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:6,maxZoom:18,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"PVA_IGN_zone-marais-de-Virvee_1945":{server:"https://wxs.ign.fr/edugeo/wmts",title:"PVA IGN : zone de marais de Virvée, 1945",format:"image/png",tilematrix:"PM",style:"BDORTHOHISTORIQUE",minZoom:0,maxZoom:17,bbox:[-.47369725,44.910915,-.35331124,44.99578],desc:"zone de marais de Virvée, prise de vue IGN de 1945",keys:"LGVEDUGEOPhotographies",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[-.47369725,44.910915,-.35331124,44.99578]}]}}},"PVA_IGN_zone-marais-de-Virvee_1956":{server:"https://wxs.ign.fr/edugeo/wmts",title:"PVA IGN : zone de marais de Virvée, 1956",format:"image/png",tilematrix:"PM",style:"BDORTHOHISTORIQUE",minZoom:0,maxZoom:17,bbox:[-.45980808,44.942978,-.4007126,44.983112],desc:"zone de marais de Virvée, prise de vue IGN de 1956",keys:"EDUGEOLGVPhotographies",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[-.45980808,44.942978,-.4007126,44.983112]}]}}},"PVA_IGN_zone-marais-de-Virvee_1976":{server:"https://wxs.ign.fr/edugeo/wmts",title:"PVA IGN : zone de marais de Virvée, 1976",format:"image/png",tilematrix:"PM",style:"BDORTHOHISTORIQUE",minZoom:0,maxZoom:18,bbox:[-.46261433,44.941154,-.421769,44.969463],desc:"Zone de marais de Virvée, prise de vue IGN de 1976",keys:"LGVEDUGEOPhotographies",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-.46261433,44.941154,-.421769,44.969463]}]}}},"PVA_IGN_zone-marais-de-Virvee_1984":{server:"https://wxs.ign.fr/edugeo/wmts",title:"PVA IGN : zone de marais de Virvée, 1984",format:"image/png",tilematrix:"PM",style:"BDORTHOHISTORIQUE",minZoom:0,maxZoom:17,bbox:[-.47973698,44.920418,-.40384194,44.971184],desc:"Zone de marais de Virvée, prise de vue IGN de 1984",keys:"PhotographiesEDUGEOLGV",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:17,constraint:[{minZoom:0,maxZoom:17,bbox:[-.47973698,44.920418,-.40384194,44.971184]}]}}},"EDUGEO.NATURALRISKZONES.1910FLOODEDWATERSHEDS":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Crues du bassin de la Seine - PHEC",format:"image/png",tilematrix:"PM",style:"normal",minZoom:6,maxZoom:16,bbox:[.41945744,47.416286,5.4324837,50.06405],desc:"Carte des plus hautes eaux connues (PHEC) sur le bassin de la Seine : crue de la seine et de ses affluents en 1910, ainsi que d'autres crues à des dates postérieures sur d'autres cours d'eau.",keys:"Risques naturels",qlook:"https://wxs.ign.fr/static/pictures/sep_crue.jpg",legend:[],originators:{SEINEENPARTAGE:{href:"http://www.seineenpartage.fr/",attribution:"La Seine en Partage (association loi de 1901)",logo:"https://wxs.ign.fr/static/logos/SEINEENPARTAGE/SEINEENPARTAGE.gif",minZoom:0,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.41945744,47.416286,5.4324837,50.06405]}]},DIRENHAUTENORMANDIE:{href:"http://www.haute-normandie.developpement-durable.gouv.fr/",attribution:"Direction régionale de l’Environnement, de l’Aménagement et du Logement de la Haute-Normandie (DREAL Haute-Normandie)",logo:"https://wxs.ign.fr/static/logos/DIRENHAUTENORMANDIE/DIRENHAUTENORMANDIE.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.41945744,47.416286,5.4324837,50.06405]}]},DIRENIDF:{href:"https://www.driee.ile-de-france.developpement-durable.gouv.fr/",attribution:"Direction Régionale et Interdépartementale de l’Environnement et de l’Energie d’Ile-de-France (DRIEE Ile-de-France)",logo:"https://wxs.ign.fr/static/logos/DIRENIDF/DIRENIDF.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:6,maxZoom:16,bbox:[.41945744,47.416286,5.4324837,50.06405]}]}}},"EDUGEO.LANDUSE.AGRICULTURE2012":{server:"https://wxs.ign.fr/edugeo/wmts",title:"Registre parcellaire graphique (RPG) 2012",format:"image/png",tilematrix:"PM",style:"normal",minZoom:0,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052],desc:"Registre parcellaire graphique : zones de culture déclarées par les exploitants en 2012",keys:"Agriculture",qlook:"https://wxs.ign.fr/static/pictures/agriculture_rpg2.jpg",legend:[],originators:{IGN:{href:"http://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:16,constraint:[{minZoom:0,maxZoom:16,bbox:[-5.1504726,41.32521,9.570543,51.099052]}]}}},"ORTHOIMAGERY.ORTHOPHOTOS.1950-1965":{server:"https://wxs.ign.fr/geoportail/wmts",title:"Photographies aériennes historiques 1950-1965",format:"image/png",tilematrix:"PM",style:"BDORTHOHISTORIQUE",minZoom:0,maxZoom:18,bbox:[-67.72138,-21.401262,55.84643,51.094486],desc:"Couverture en photographies aériennes de la France des années 50, telle qu'elle se présentait avant les grands aménagements des années 60. Cette couverture a été réalisée à partir des photographies aériennes historiques numérisées par l'IGN. Elle est disponible sur la France métropolitaine, les départements et régions d'Outre-Mer (la Guyane n'est que partiellement couverte) et les collectivités d'Outre-Mer sauf la Polynésie française. Les photographies sont orthorectifiées, c'est-à-dire corrigées des déformations dues à la prise de vue et au relief du terrain, et assemblées pour fournir une visualisation continue superposable avec le Référentiel à Grande Echelle (RGE®) ou les cartes.",keys:"Orthophotographies",qlook:"https://wxs.ign.fr/static/pictures/BDORTHO.png",legend:[],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:6,maxZoom:18,constraint:[{minZoom:0,maxZoom:18,bbox:[-179.5,-75,179.5,75]},{minZoom:6,maxZoom:9,bbox:[-26.711018,20.991827,54.909374,72.67905]}]}}},"GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950":{server:"https://wxs.ign.fr/geoportail/wmts",title:"SCAN50 Historique de 1950",format:"image/jpeg",tilematrix:"PM",style:"normal",minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75],desc:"SCAN50 produit ppar l'IGN en 1950",keys:"Données historiques",qlook:"https://wxs.ign.fr/static/pictures/SCAN100.PNG",legend:[{zoom:15,url:"https://wxs.ign.fr/static/legends/GEOGRAPHICALGRIDSYSTEMS.MAPS.SCAN50.1950-legend.png"}],originators:{IGN:{href:"https://www.ign.fr",attribution:"Institut national de l'information géographique et forestière",logo:"https://wxs.ign.fr/static/logos/IGN/IGN.gif",minZoom:0,maxZoom:15,constraint:[{minZoom:3,maxZoom:15,bbox:[-179.5,-75,179.5,75]}]}}}}}),a("2x3of",function(t,i){e(t.exports,"default",()=>h);var r=n("5MXCy"),o=n("jPVWI"),a=n("20LS2"),s=n("5TDW7");class l extends s.default{constructor(){super()}}l.prototype.read=function(t){if("file"!==t.type)return!1;let e=new o.default({source:new a.default});return this.readOptions(e,t),e.set("url",t.url),e.set("extractStyles",t.extractStyles),fetch(t.url).then(t=>t.text()).then(i=>{let o=new r.default().readFeatures(i,{featureProjection:"EPSG:3857",extractStyles:t.extractStyles});o.length&&e.getSource().addFeatures(o)}).catch(()=>{}),e},l.prototype.write=function(t){return"file"!==t.get("type")?null:this.writeOptions(t,{url:t.get("url"),extractStyles:!!t.get("extractStyles")})};var h=l}),a("5MXCy",function(t,i){e(t.exports,"default",()=>g);var r=n("iceob"),o=n("kPMpK"),a=n("aVfgG"),s=n("5bIDX"),l=n("6b5au"),h=n("5mw1t"),u=n("29jcm"),c=n("6xHMs"),f=n("9z1G1");class d extends f.default{constructor(t){super(t)}}function p(t,e){if(!t||!t.length)return!1;if(e>0){for(let i=0;i<t.length;i++)if(!p(t[i],e-1))return!1}else if(t.length<2)return!1;return!0}d.formatConstructors=[r.default,h.default,u.default,o.default,a.default,s.default,l.default,c.default],d.prototype.readFeatures=function(t,e){for(var i=0;i<d.formatConstructors.length;++i){var r=d.formatConstructors[i];try{var o=new r(e).readFeatures(t,e);let i=[];if(o.forEach((t,e)=>{try{let r=t.getGeometry().getCoordinates();switch(t.getGeometry().getType()){case"Point":p(r,0)||i.push(e);break;case"MultiPoint":case"LineString":p(r,1)||i.push(e);break;case"MultiLineString":case"Polygon":p(r,2)||i.push(e);break;case"MultiPolygon":p(r,3)||i.push(e);break;default:console.log(e)}}catch(t){i.push(e)}}),i.reverse().forEach(t=>o.splice(t,1)),o&&o.length>0)return o}catch(t){}}return[]};var g=d}),a("iceob",function(t,i){e(t.exports,"default",()=>Y);var r=n("iGyOD"),o=n("hvEnP"),a=n("7TB1l"),s=n("j2K3b"),l=n("ZEJBL"),h=n("fbciu"),u=n("gzr8q"),c=n("5kLwh"),f=n("9z1G1");let d=[null,"http://www.topografix.com/GPX/1/0","http://www.topografix.com/GPX/1/1"],p={rte:U,trk:B,wpt:z},g=(0,h.makeStructureNS)(d,{rte:(0,h.makeArrayPusher)(U),trk:(0,h.makeArrayPusher)(B),wpt:(0,h.makeArrayPusher)(z)}),m=(0,h.makeStructureNS)(d,{text:(0,h.makeObjectPropertySetter)(c.readString,"linkText"),type:(0,h.makeObjectPropertySetter)(c.readString,"linkType")}),y=(0,h.makeStructureNS)(d,{rte:(0,h.makeChildAppender)(function(t,e,i){let r=i[0],o=e.getProperties(),n={node:t};n.properties=o;let a=e.getGeometry();if("LineString"==a.getType()){let t=(0,f.transformGeometryWithOptions)(a,!0,r);n.geometryLayout=t.getLayout(),o.rtept=t.getCoordinates()}let s=I[i[i.length-1].node.namespaceURI],l=(0,h.makeSequence)(o,s);(0,h.pushSerializeAndPop)(n,M,h.OBJECT_PROPERTY_NODE_FACTORY,l,i,s)}),trk:(0,h.makeChildAppender)(function(t,e,i){let r=i[0],o=e.getProperties(),n={node:t};n.properties=o;let a=e.getGeometry();if("MultiLineString"==a.getType()){let t=(0,f.transformGeometryWithOptions)(a,!0,r);o.trkseg=t.getLineStrings()}let s=C[i[i.length-1].node.namespaceURI],l=(0,h.makeSequence)(o,s);(0,h.pushSerializeAndPop)(n,T,h.OBJECT_PROPERTY_NODE_FACTORY,l,i,s)}),wpt:(0,h.makeChildAppender)(function(t,e,i){let r=i[0],o=i[i.length-1];o.properties=e.getProperties();let n=e.getGeometry();if("Point"==n.getType()){let e=(0,f.transformGeometryWithOptions)(n,!0,r);o.geometryLayout=e.getLayout(),V(t,e.getCoordinates(),i)}})});class x extends l.default{constructor(t){super(),t=t||{},this.dataProjection=(0,u.get)("EPSG:4326"),this.readExtensions_=t.readExtensions}handleReadExtensions_(t){t||(t=[]);for(let e=0,i=t.length;e<i;++e){let i=t[e];if(this.readExtensions_){let t=i.get("extensionsNode_")||null;this.readExtensions_(i,t)}i.set("extensionsNode_",void 0)}}readFeatureFromNode(t,e){if(!d.includes(t.namespaceURI))return null;let i=p[t.localName];if(!i)return null;let r=i(t,[this.getReadOptions(t,e)]);return r?(this.handleReadExtensions_([r]),r):null}readFeaturesFromNode(t,e){if(!d.includes(t.namespaceURI))return[];if("gpx"==t.localName){let i=(0,h.pushParseAndPop)([],g,t,[this.getReadOptions(t,e)]);if(i)return this.handleReadExtensions_(i),i}return[]}writeFeaturesNode(t,e){e=this.adaptOptions(e);let i=(0,h.createElementNS)("http://www.topografix.com/GPX/1/1","gpx");return i.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xsi",h.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(h.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.topografix.com/GPX/1/1 http://www.topografix.com/GPX/1/1/gpx.xsd"),i.setAttribute("version","1.1"),i.setAttribute("creator","OpenLayers"),(0,h.pushSerializeAndPop)({node:i},y,Z,t,[e]),i}}let v=(0,h.makeStructureNS)(d,{name:(0,h.makeObjectPropertySetter)(c.readString),cmt:(0,h.makeObjectPropertySetter)(c.readString),desc:(0,h.makeObjectPropertySetter)(c.readString),src:(0,h.makeObjectPropertySetter)(c.readString),link:j,number:(0,h.makeObjectPropertySetter)(c.readPositiveInteger),extensions:q,type:(0,h.makeObjectPropertySetter)(c.readString),rtept:function(t,e){let i=(0,h.pushParseAndPop)({},b,t,e);if(i){let r=e[e.length-1];F(r.flatCoordinates,r.layoutOptions,t,i)}}}),b=(0,h.makeStructureNS)(d,{ele:(0,h.makeObjectPropertySetter)(c.readDecimal),time:(0,h.makeObjectPropertySetter)(c.readDateTime)}),w=(0,h.makeStructureNS)(d,{name:(0,h.makeObjectPropertySetter)(c.readString),cmt:(0,h.makeObjectPropertySetter)(c.readString),desc:(0,h.makeObjectPropertySetter)(c.readString),src:(0,h.makeObjectPropertySetter)(c.readString),link:j,number:(0,h.makeObjectPropertySetter)(c.readPositiveInteger),type:(0,h.makeObjectPropertySetter)(c.readString),extensions:q,trkseg:function(t,e){let i=e[e.length-1];(0,h.parseNode)(_,t,e);let r=i.flatCoordinates;i.ends.push(r.length)}}),_=(0,h.makeStructureNS)(d,{trkpt:function(t,e){let i=(0,h.pushParseAndPop)({},S,t,e);if(i){let r=e[e.length-1];F(r.flatCoordinates,r.layoutOptions,t,i)}}}),S=(0,h.makeStructureNS)(d,{ele:(0,h.makeObjectPropertySetter)(c.readDecimal),time:(0,h.makeObjectPropertySetter)(c.readDateTime)}),E=(0,h.makeStructureNS)(d,{ele:(0,h.makeObjectPropertySetter)(c.readDecimal),time:(0,h.makeObjectPropertySetter)(c.readDateTime),magvar:(0,h.makeObjectPropertySetter)(c.readDecimal),geoidheight:(0,h.makeObjectPropertySetter)(c.readDecimal),name:(0,h.makeObjectPropertySetter)(c.readString),cmt:(0,h.makeObjectPropertySetter)(c.readString),desc:(0,h.makeObjectPropertySetter)(c.readString),src:(0,h.makeObjectPropertySetter)(c.readString),link:j,sym:(0,h.makeObjectPropertySetter)(c.readString),type:(0,h.makeObjectPropertySetter)(c.readString),fix:(0,h.makeObjectPropertySetter)(c.readString),sat:(0,h.makeObjectPropertySetter)(c.readPositiveInteger),hdop:(0,h.makeObjectPropertySetter)(c.readDecimal),vdop:(0,h.makeObjectPropertySetter)(c.readDecimal),pdop:(0,h.makeObjectPropertySetter)(c.readDecimal),ageofdgpsdata:(0,h.makeObjectPropertySetter)(c.readDecimal),dgpsid:(0,h.makeObjectPropertySetter)(c.readPositiveInteger),extensions:q}),A=["text","type"],N=(0,h.makeStructureNS)(d,{text:(0,h.makeChildAppender)(c.writeStringTextNode),type:(0,h.makeChildAppender)(c.writeStringTextNode)}),I=(0,h.makeStructureNS)(d,["name","cmt","desc","src","link","number","type","rtept"]),M=(0,h.makeStructureNS)(d,{name:(0,h.makeChildAppender)(c.writeStringTextNode),cmt:(0,h.makeChildAppender)(c.writeStringTextNode),desc:(0,h.makeChildAppender)(c.writeStringTextNode),src:(0,h.makeChildAppender)(c.writeStringTextNode),link:(0,h.makeChildAppender)(H),number:(0,h.makeChildAppender)(c.writeNonNegativeIntegerTextNode),type:(0,h.makeChildAppender)(c.writeStringTextNode),rtept:(0,h.makeArraySerializer)((0,h.makeChildAppender)(V))}),P=(0,h.makeStructureNS)(d,["ele","time"]),C=(0,h.makeStructureNS)(d,["name","cmt","desc","src","link","number","type","trkseg"]),T=(0,h.makeStructureNS)(d,{name:(0,h.makeChildAppender)(c.writeStringTextNode),cmt:(0,h.makeChildAppender)(c.writeStringTextNode),desc:(0,h.makeChildAppender)(c.writeStringTextNode),src:(0,h.makeChildAppender)(c.writeStringTextNode),link:(0,h.makeChildAppender)(H),number:(0,h.makeChildAppender)(c.writeNonNegativeIntegerTextNode),type:(0,h.makeChildAppender)(c.writeStringTextNode),trkseg:(0,h.makeArraySerializer)((0,h.makeChildAppender)(function(t,e,i){let r={node:t};r.geometryLayout=e.getLayout(),r.properties={},(0,h.pushSerializeAndPop)(r,R,L,e.getCoordinates(),i)}))}),L=(0,h.makeSimpleNodeFactory)("trkpt"),R=(0,h.makeStructureNS)(d,{trkpt:(0,h.makeChildAppender)(V)}),O=(0,h.makeStructureNS)(d,["ele","time","magvar","geoidheight","name","cmt","desc","src","link","sym","type","fix","sat","hdop","vdop","pdop","ageofdgpsdata","dgpsid"]),k=(0,h.makeStructureNS)(d,{ele:(0,h.makeChildAppender)(c.writeDecimalTextNode),time:(0,h.makeChildAppender)(c.writeDateTimeTextNode),magvar:(0,h.makeChildAppender)(c.writeDecimalTextNode),geoidheight:(0,h.makeChildAppender)(c.writeDecimalTextNode),name:(0,h.makeChildAppender)(c.writeStringTextNode),cmt:(0,h.makeChildAppender)(c.writeStringTextNode),desc:(0,h.makeChildAppender)(c.writeStringTextNode),src:(0,h.makeChildAppender)(c.writeStringTextNode),link:(0,h.makeChildAppender)(H),sym:(0,h.makeChildAppender)(c.writeStringTextNode),type:(0,h.makeChildAppender)(c.writeStringTextNode),fix:(0,h.makeChildAppender)(c.writeStringTextNode),sat:(0,h.makeChildAppender)(c.writeNonNegativeIntegerTextNode),hdop:(0,h.makeChildAppender)(c.writeDecimalTextNode),vdop:(0,h.makeChildAppender)(c.writeDecimalTextNode),pdop:(0,h.makeChildAppender)(c.writeDecimalTextNode),ageofdgpsdata:(0,h.makeChildAppender)(c.writeDecimalTextNode),dgpsid:(0,h.makeChildAppender)(c.writeNonNegativeIntegerTextNode)}),G={Point:"wpt",LineString:"rte",MultiLineString:"trk"};function Z(t,e,i){let r=t.getGeometry();if(r){let t=G[r.getType()];if(t){let i=e[e.length-1].node;return(0,h.createElementNS)(i.namespaceURI,t)}}}function F(t,e,i,r){return t.push(parseFloat(i.getAttribute("lon")),parseFloat(i.getAttribute("lat"))),"ele"in r?(t.push(r.ele),delete r.ele,e.hasZ=!0):t.push(0),"time"in r?(t.push(r.time),delete r.time,e.hasM=!0):t.push(0),t}function D(t,e,i){let r="XY",o=2;if(t.hasZ&&t.hasM?(r="XYZM",o=4):t.hasZ?(r="XYZ",o=3):t.hasM&&(r="XYM",o=3),4!==o){for(let i=0,r=e.length/4;i<r;i++)e[i*o]=e[4*i],e[i*o+1]=e[4*i+1],t.hasZ&&(e[i*o+2]=e[4*i+2]),t.hasM&&(e[i*o+2]=e[4*i+3]);if(e.length=e.length/4*o,i)for(let t=0,e=i.length;t<e;t++)i[t]=i[t]/4*o}return r}function j(t,e){let i=e[e.length-1],r=t.getAttribute("href");null!==r&&(i.link=r),(0,h.parseNode)(m,t,e)}function q(t,e){e[e.length-1].extensionsNode_=t}function U(t,e){let i=e[0],n=(0,h.pushParseAndPop)({flatCoordinates:[],layoutOptions:{}},v,t,e);if(!n)return;let a=n.flatCoordinates;delete n.flatCoordinates;let s=n.layoutOptions;delete n.layoutOptions;let l=D(s,a),u=new o.default(a,l);(0,f.transformGeometryWithOptions)(u,!1,i);let c=new r.default(u);return c.setProperties(n,!0),c}function B(t,e){let i=e[0],o=(0,h.pushParseAndPop)({flatCoordinates:[],ends:[],layoutOptions:{}},w,t,e);if(!o)return;let n=o.flatCoordinates;delete o.flatCoordinates;let s=o.ends;delete o.ends;let l=o.layoutOptions;delete o.layoutOptions;let u=D(l,n,s),c=new a.default(n,u,s);(0,f.transformGeometryWithOptions)(c,!1,i);let d=new r.default(c);return d.setProperties(o,!0),d}function z(t,e){let i=e[0],o=(0,h.pushParseAndPop)({},E,t,e);if(!o)return;let n={},a=F([],n,t,o),l=D(n,a),u=new s.default(a,l);(0,f.transformGeometryWithOptions)(u,!1,i);let c=new r.default(u);return c.setProperties(o,!0),c}function H(t,e,i){t.setAttribute("href",e);let r=i[i.length-1].properties,o=[r.linkText,r.linkType];(0,h.pushSerializeAndPop)({node:t},N,h.OBJECT_PROPERTY_NODE_FACTORY,o,i,A)}function V(t,e,i){let r=i[i.length-1],o=r.node.namespaceURI,n=r.properties;switch(t.setAttributeNS(null,"lat",String(e[1])),t.setAttributeNS(null,"lon",String(e[0])),r.geometryLayout){case"XYZM":0!==e[3]&&(n.time=e[3]);case"XYZ":0!==e[2]&&(n.ele=e[2]);break;case"XYM":0!==e[2]&&(n.time=e[2])}let a="rtept"==t.nodeName?P[o]:O[o],s=(0,h.makeSequence)(n,a);(0,h.pushSerializeAndPop)({node:t,properties:n},k,h.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)}var Y=x}),a("ZEJBL",function(t,i){e(t.exports,"default",()=>h);var r=n("9z1G1"),o=n("lVQul"),a=n("kBSVF"),s=n("fbciu");class l extends r.default{constructor(){super(),this.xmlSerializer_=(0,s.getXMLSerializer)()}getType(){return"xml"}readFeature(t,e){if(!t)return null;if("string"==typeof t){let i=(0,s.parse)(t);return this.readFeatureFromDocument(i,e)}return(0,s.isDocument)(t)?this.readFeatureFromDocument(t,e):this.readFeatureFromNode(t,e)}readFeatureFromDocument(t,e){let i=this.readFeaturesFromDocument(t,e);return i.length>0?i[0]:null}readFeatureFromNode(t,e){return null}readFeatures(t,e){if(!t)return[];if("string"==typeof t){let i=(0,s.parse)(t);return this.readFeaturesFromDocument(i,e)}return(0,s.isDocument)(t)?this.readFeaturesFromDocument(t,e):this.readFeaturesFromNode(t,e)}readFeaturesFromDocument(t,e){let i=[];for(let r=t.firstChild;r;r=r.nextSibling)r.nodeType==Node.ELEMENT_NODE&&(0,a.extend)(i,this.readFeaturesFromNode(r,e));return i}readFeaturesFromNode(t,e){return(0,o.abstract)()}readGeometry(t,e){if(!t)return null;if("string"==typeof t){let i=(0,s.parse)(t);return this.readGeometryFromDocument(i,e)}return(0,s.isDocument)(t)?this.readGeometryFromDocument(t,e):this.readGeometryFromNode(t,e)}readGeometryFromDocument(t,e){return null}readGeometryFromNode(t,e){return null}readProjection(t){if(!t)return null;if("string"==typeof t){let e=(0,s.parse)(t);return this.readProjectionFromDocument(e)}return(0,s.isDocument)(t)?this.readProjectionFromDocument(t):this.readProjectionFromNode(t)}readProjectionFromDocument(t){return this.dataProjection}readProjectionFromNode(t){return this.dataProjection}writeFeature(t,e){let i=this.writeFeatureNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeatureNode(t,e){return null}writeFeatures(t,e){let i=this.writeFeaturesNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeFeaturesNode(t,e){return null}writeGeometry(t,e){let i=this.writeGeometryNode(t,e);return this.xmlSerializer_.serializeToString(i)}writeGeometryNode(t,e){return null}}var h=l}),a("aVfgG",function(t,i){e(t.exports,"default",()=>p);var r=n("iGyOD"),o=n("hvEnP"),a=n("jEnSw"),s=n("gzr8q"),l=n("9z1G1");let h=/^B(\d{2})(\d{2})(\d{2})(\d{2})(\d{5})([NS])(\d{3})(\d{5})([EW])([AV])(\d{5})(\d{5})/,u=/^H.([A-Z]{3}).*?:(.*)/,c=/^HFDTE(\d{2})(\d{2})(\d{2})/,f=/\r\n|\r|\n/;class d extends a.default{constructor(t){super(),t=t||{},this.dataProjection=(0,s.get)("EPSG:4326"),this.altitudeMode_=t.altitudeMode?t.altitudeMode:"none"}readFeatureFromText(t,e){let i,n;let a=this.altitudeMode_,s=t.split(f),d={},p=[],g=2e3,m=0,y=1,x=-1;for(i=0,n=s.length;i<n;++i){let t;let e=s[i];if("B"==e.charAt(0)){if(t=h.exec(e)){let e=parseInt(t[1],10),i=parseInt(t[2],10),r=parseInt(t[3],10),o=parseInt(t[4],10)+parseInt(t[5],10)/6e4;"S"==t[6]&&(o=-o);let n=parseInt(t[7],10)+parseInt(t[8],10)/6e4;if("W"==t[9]&&(n=-n),p.push(n,o),"none"!=a){let e;e="gps"==a?parseInt(t[11],10):"barometric"==a?parseInt(t[12],10):0,p.push(e)}let s=Date.UTC(g,m,y,e,i,r);s<x&&(s=Date.UTC(g,m,y+1,e,i,r)),p.push(s/1e3),x=s}}else"H"==e.charAt(0)&&((t=c.exec(e))?(y=parseInt(t[1],10),m=parseInt(t[2],10)-1,g=2e3+parseInt(t[3],10)):(t=u.exec(e))&&(d[t[1]]=t[2].trim()))}if(0===p.length)return null;let v=new o.default(p,"none"==a?"XYM":"XYZM"),b=new r.default((0,l.transformGeometryWithOptions)(v,!1,e));return b.setProperties(d,!0),b}readFeaturesFromText(t,e){let i=this.readFeatureFromText(t,e);return i?[i]:[]}}var p=d}),a("jEnSw",function(t,i){e(t.exports,"default",()=>l);var r=n("9z1G1"),o=n("lVQul");class a extends r.default{constructor(){super()}getType(){return"text"}readFeature(t,e){return this.readFeatureFromText(s(t),this.adaptOptions(e))}readFeatureFromText(t,e){return(0,o.abstract)()}readFeatures(t,e){return this.readFeaturesFromText(s(t),this.adaptOptions(e))}readFeaturesFromText(t,e){return(0,o.abstract)()}readGeometry(t,e){return this.readGeometryFromText(s(t),this.adaptOptions(e))}readGeometryFromText(t,e){return(0,o.abstract)()}readProjection(t){return this.readProjectionFromText(s(t))}readProjectionFromText(t){return this.dataProjection}writeFeature(t,e){return this.writeFeatureText(t,this.adaptOptions(e))}writeFeatureText(t,e){return(0,o.abstract)()}writeFeatures(t,e){return this.writeFeaturesText(t,this.adaptOptions(e))}writeFeaturesText(t,e){return(0,o.abstract)()}writeGeometry(t,e){return this.writeGeometryText(t,this.adaptOptions(e))}writeGeometryText(t,e){return(0,o.abstract)()}}function s(t){return"string"==typeof t?t:""}var l=a}),a("5bIDX",function(t,i){let r,o,a,s,l,h,u,c,f;e(t.exports,"default",()=>eg);var d=n("iGyOD"),p=n("2zf1Y"),g=n("6pyIt"),m=n("ayeEa"),y=n("50PZ9"),x=n("hvEnP"),v=n("7TB1l"),b=n("ljDIj"),w=n("dEQmT"),_=n("j2K3b"),S=n("cgPpQ"),E=n("d5AAH"),A=n("l9IGS"),N=n("kuKBR"),I=n("ZEJBL"),M=n("fbciu"),P=n("lqNjm"),C=n("kBSVF"),T=n("gzr8q"),L=n("5kLwh"),R=n("a6roo"),O=n("9z1G1");let k=["http://www.google.com/kml/ext/2.2"],G=[null,"http://earth.google.com/kml/2.0","http://earth.google.com/kml/2.1","http://earth.google.com/kml/2.2","http://www.opengis.net/kml/2.2"],Z={fraction:"fraction",pixels:"pixels",insetPixels:"pixels"},F=(0,M.makeStructureNS)(G,{ExtendedData:tT,Region:tL,MultiGeometry:(0,M.makeObjectPropertySetter)(t_,"geometry"),LineString:(0,M.makeObjectPropertySetter)(tv,"geometry"),LinearRing:(0,M.makeObjectPropertySetter)(tb,"geometry"),Point:(0,M.makeObjectPropertySetter)(tS,"geometry"),Polygon:(0,M.makeObjectPropertySetter)(tA,"geometry"),Style:(0,M.makeObjectPropertySetter)(tI),StyleMap:function(t,e){let i=tn.call(this,t,e);if(!i)return;let r=e[e.length-1];if(Array.isArray(i))r.Style=i;else if("string"==typeof i)r.styleUrl=i;else throw Error("`styleMapValue` has an unknown type")},address:(0,M.makeObjectPropertySetter)(L.readString),description:(0,M.makeObjectPropertySetter)(L.readString),name:(0,M.makeObjectPropertySetter)(L.readString),open:(0,M.makeObjectPropertySetter)(L.readBoolean),phoneNumber:(0,M.makeObjectPropertySetter)(L.readString),styleUrl:(0,M.makeObjectPropertySetter)(ti),visibility:(0,M.makeObjectPropertySetter)(L.readBoolean)},(0,M.makeStructureNS)(k,{MultiTrack:(0,M.makeObjectPropertySetter)(function(t,e){let i=(0,M.pushParseAndPop)([],tf,t,e);if(i)return new v.default(i)},"geometry"),Track:(0,M.makeObjectPropertySetter)(tp,"geometry")})),D=(0,M.makeStructureNS)(G,{ExtendedData:tT,Region:tL,Link:function(t,e){(0,M.parseNode)(j,t,e)},address:(0,M.makeObjectPropertySetter)(L.readString),description:(0,M.makeObjectPropertySetter)(L.readString),name:(0,M.makeObjectPropertySetter)(L.readString),open:(0,M.makeObjectPropertySetter)(L.readBoolean),phoneNumber:(0,M.makeObjectPropertySetter)(L.readString),visibility:(0,M.makeObjectPropertySetter)(L.readBoolean)}),j=(0,M.makeStructureNS)(G,{href:(0,M.makeObjectPropertySetter)(te)}),q=(0,M.makeStructureNS)(G,{Altitude:(0,M.makeObjectPropertySetter)(L.readDecimal),Longitude:(0,M.makeObjectPropertySetter)(L.readDecimal),Latitude:(0,M.makeObjectPropertySetter)(L.readDecimal),Tilt:(0,M.makeObjectPropertySetter)(L.readDecimal),AltitudeMode:(0,M.makeObjectPropertySetter)(L.readString),Heading:(0,M.makeObjectPropertySetter)(L.readDecimal),Roll:(0,M.makeObjectPropertySetter)(L.readDecimal)}),U=(0,M.makeStructureNS)(G,{LatLonAltBox:function(t,e){let i=(0,M.pushParseAndPop)({},tk,t,e);if(!i)return;let r=e[e.length-1],o=[parseFloat(i.west),parseFloat(i.south),parseFloat(i.east),parseFloat(i.north)];r.extent=o,r.altitudeMode=i.altitudeMode,r.minAltitude=parseFloat(i.minAltitude),r.maxAltitude=parseFloat(i.maxAltitude)},Lod:function(t,e){let i=(0,M.pushParseAndPop)({},tG,t,e);if(!i)return;let r=e[e.length-1];r.minLodPixels=parseFloat(i.minLodPixels),r.maxLodPixels=parseFloat(i.maxLodPixels),r.minFadeExtent=parseFloat(i.minFadeExtent),r.maxFadeExtent=parseFloat(i.maxFadeExtent)}}),B=(0,M.makeStructureNS)(G,["Document","Placemark"]),z=(0,M.makeStructureNS)(G,{Document:(0,M.makeChildAppender)(function(t,e,i){(0,M.pushSerializeAndPop)({node:t},tq,tU,e,i,void 0,this)}),Placemark:(0,M.makeChildAppender)(ei)}),H=null,V=null,Y=null,W=null,X=null;function K(t){return 32/Math.min(t[0],t[1])}function J(t){return t}class $ extends I.default{constructor(t){super(),t=t||{},X||(r=[255,255,255,1],H=new p.default({color:r}),o=[20,2],a="pixels",s="pixels",l=[64,64],h="https://maps.google.com/mapfiles/kml/pushpin/ylw-pushpin.png",V=new m.default({anchor:o,anchorOrigin:"bottom-left",anchorXUnits:a,anchorYUnits:s,crossOrigin:"anonymous",rotation:0,scale:K(l),size:l,src:h}),u="NO_IMAGE",Y=new E.default({color:r,width:1}),c=new E.default({color:[51,51,51,1],width:2}),W=new N.default({font:"bold 16px Helvetica",fill:H,stroke:c,scale:.8}),X=[new A.default({fill:H,image:V,text:W,stroke:Y,zIndex:0})]),this.dataProjection=(0,T.get)("EPSG:4326"),this.defaultStyle_=t.defaultStyle?t.defaultStyle:X,this.extractStyles_=void 0===t.extractStyles||t.extractStyles,this.writeStyles_=void 0===t.writeStyles||t.writeStyles,this.sharedStyles_={},this.showPointNames_=void 0===t.showPointNames||t.showPointNames,this.crossOrigin_=void 0!==t.crossOrigin?t.crossOrigin:"anonymous",this.iconUrlFunction_=t.iconUrlFunction?t.iconUrlFunction:J,this.supportedMediaTypes=["application/vnd.google-earth.kml+xml"]}readDocumentOrFolder_(t,e){let i=(0,M.makeStructureNS)(G,{Document:(0,M.makeArrayExtender)(this.readDocumentOrFolder_,this),Folder:(0,M.makeArrayExtender)(this.readDocumentOrFolder_,this),Placemark:(0,M.makeArrayPusher)(this.readPlacemark_,this),Style:this.readSharedStyle_.bind(this),StyleMap:this.readSharedStyleMap_.bind(this)}),r=(0,M.pushParseAndPop)([],i,t,e,this);if(r)return r}readPlacemark_(t,e){let i=(0,M.pushParseAndPop)({geometry:null},F,t,e,this);if(!i)return;let r=new d.default,o=t.getAttribute("id");null!==o&&r.setId(o);let n=e[0],a=i.geometry;if(a&&(0,O.transformGeometryWithOptions)(a,!1,n),r.setGeometry(a),delete i.geometry,this.extractStyles_){var s,l,h,u,p;let t=(s=i.Style,l=i.styleUrl,h=this.defaultStyle_,u=this.sharedStyles_,p=this.showPointNames_,function(t,e){let i=p,r="",o=[];if(i){let e=t.getGeometry();if(e){if(e instanceof g.default)i=(o=e.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"Point"===e||"MultiPoint"===e})).length>0;else{let t=e.getType();i="Point"===t||"MultiPoint"===t}}}i&&(r=t.get("name"),(i=i&&!!r)&&/&[^&]+;/.test(r)&&(f||(f=document.createElement("textarea")),f.innerHTML=r,r=f.value));let n=h;if(s?n=s:l&&(n=function t(e,i,r){return Array.isArray(e)?e:"string"==typeof e?t(r[e],i,r):i}(l,h,u)),i){let t=function(t,e){let i=[0,0],r="start",o=t.getImage();if(o){let t=o.getSize();if(t&&2==t.length){let e=o.getScaleArray(),n=o.getAnchor();i[0]=e[0]*(t[0]-n[0]),i[1]=e[1]*(t[1]/2-n[1]),r="left"}}let n=t.getText();return n?((n=n.clone()).setFont(n.getFont()||W.getFont()),n.setScale(n.getScale()||W.getScale()),n.setFill(n.getFill()||W.getFill()),n.setStroke(n.getStroke()||c)):n=W.clone(),n.setText(e),n.setOffsetX(i[0]),n.setOffsetY(i[1]),n.setTextAlign(r),new A.default({image:o,text:n})}(n[0],r);return o.length>0?(t.setGeometry(new g.default(o)),[t,new A.default({geometry:n[0].getGeometry(),image:null,fill:n[0].getFill(),stroke:n[0].getStroke(),text:null})].concat(n.slice(1))):t}return n});r.setStyle(t)}return delete i.Style,r.setProperties(i,!0),r}readSharedStyle_(t,e){let i=t.getAttribute("id");if(null!==i){let r=tI.call(this,t,e);if(r){let e;let o=t.baseURI;o&&"about:blank"!=o||(o=window.location.href),e=o?new URL("#"+i,o).href:"#"+i,this.sharedStyles_[e]=r}}}readSharedStyleMap_(t,e){let i;let r=t.getAttribute("id");if(null===r)return;let o=tn.call(this,t,e);if(!o)return;let n=t.baseURI;n&&"about:blank"!=n||(n=window.location.href),i=n?new URL("#"+r,n).href:"#"+r,this.sharedStyles_[i]=o}readFeatureFromNode(t,e){return G.includes(t.namespaceURI)&&this.readPlacemark_(t,[this.getReadOptions(t,e)])||null}readFeaturesFromNode(t,e){let i;if(!G.includes(t.namespaceURI))return[];let r=t.localName;if("Document"==r||"Folder"==r)return(i=this.readDocumentOrFolder_(t,[this.getReadOptions(t,e)]))?i:[];if("Placemark"==r){let i=this.readPlacemark_(t,[this.getReadOptions(t,e)]);return i?[i]:[]}if("kml"==r){i=[];for(let r=t.firstElementChild;r;r=r.nextElementSibling){let t=this.readFeaturesFromNode(r,e);t&&(0,C.extend)(i,t)}return i}return[]}readName(t){if(t){if("string"==typeof t){let e=(0,M.parse)(t);return this.readNameFromDocument(e)}return(0,M.isDocument)(t)?this.readNameFromDocument(t):this.readNameFromNode(t)}}readNameFromDocument(t){for(let e=t.firstChild;e;e=e.nextSibling)if(e.nodeType==Node.ELEMENT_NODE){let t=this.readNameFromNode(e);if(t)return t}}readNameFromNode(t){for(let e=t.firstElementChild;e;e=e.nextElementSibling)if(G.includes(e.namespaceURI)&&"name"==e.localName)return(0,L.readString)(e);for(let e=t.firstElementChild;e;e=e.nextElementSibling){let t=e.localName;if(G.includes(e.namespaceURI)&&("Document"==t||"Folder"==t||"Placemark"==t||"kml"==t)){let t=this.readNameFromNode(e);if(t)return t}}}readNetworkLinks(t){let e=[];if("string"==typeof t){let i=(0,M.parse)(t);(0,C.extend)(e,this.readNetworkLinksFromDocument(i))}else(0,M.isDocument)(t)?(0,C.extend)(e,this.readNetworkLinksFromDocument(t)):(0,C.extend)(e,this.readNetworkLinksFromNode(t));return e}readNetworkLinksFromDocument(t){let e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&(0,C.extend)(e,this.readNetworkLinksFromNode(i));return e}readNetworkLinksFromNode(t){let e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(G.includes(i.namespaceURI)&&"NetworkLink"==i.localName){let t=(0,M.pushParseAndPop)({},D,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){let t=i.localName;G.includes(i.namespaceURI)&&("Document"==t||"Folder"==t||"kml"==t)&&(0,C.extend)(e,this.readNetworkLinksFromNode(i))}return e}readRegion(t){let e=[];if("string"==typeof t){let i=(0,M.parse)(t);(0,C.extend)(e,this.readRegionFromDocument(i))}else(0,M.isDocument)(t)?(0,C.extend)(e,this.readRegionFromDocument(t)):(0,C.extend)(e,this.readRegionFromNode(t));return e}readRegionFromDocument(t){let e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType==Node.ELEMENT_NODE&&(0,C.extend)(e,this.readRegionFromNode(i));return e}readRegionFromNode(t){let e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(G.includes(i.namespaceURI)&&"Region"==i.localName){let t=(0,M.pushParseAndPop)({},U,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){let t=i.localName;G.includes(i.namespaceURI)&&("Document"==t||"Folder"==t||"kml"==t)&&(0,C.extend)(e,this.readRegionFromNode(i))}return e}readCamera(t){let e=[];if("string"==typeof t){let i=(0,M.parse)(t);(0,C.extend)(e,this.readCameraFromDocument(i))}else(0,M.isDocument)(t)?(0,C.extend)(e,this.readCameraFromDocument(t)):(0,C.extend)(e,this.readCameraFromNode(t));return e}readCameraFromDocument(t){let e=[];for(let i=t.firstChild;i;i=i.nextSibling)i.nodeType===Node.ELEMENT_NODE&&(0,C.extend)(e,this.readCameraFromNode(i));return e}readCameraFromNode(t){let e=[];for(let i=t.firstElementChild;i;i=i.nextElementSibling)if(G.includes(i.namespaceURI)&&"Camera"===i.localName){let t=(0,M.pushParseAndPop)({},q,i,[]);e.push(t)}for(let i=t.firstElementChild;i;i=i.nextElementSibling){let t=i.localName;G.includes(i.namespaceURI)&&("Document"===t||"Folder"===t||"Placemark"===t||"kml"===t)&&(0,C.extend)(e,this.readCameraFromNode(i))}return e}writeFeaturesNode(t,e){e=this.adaptOptions(e);let i=(0,M.createElementNS)(G[4],"kml"),r="http://www.w3.org/2000/xmlns/";i.setAttributeNS(r,"xmlns:gx",k[0]),i.setAttributeNS(r,"xmlns:xsi",M.XML_SCHEMA_INSTANCE_URI),i.setAttributeNS(M.XML_SCHEMA_INSTANCE_URI,"xsi:schemaLocation","http://www.opengis.net/kml/2.2 https://developers.google.com/kml/schema/kml22gx.xsd");let o={};t.length>1?o.Document=t:1==t.length&&(o.Placemark=t[0]);let n=B[i.namespaceURI],a=(0,M.makeSequence)(o,n);return(0,M.pushSerializeAndPop)({node:i},z,M.OBJECT_PROPERTY_NODE_FACTORY,a,[e],n,this),i}}function Q(t){let e=(0,M.getAllTextContent)(t,!1),i=/^\s*#?\s*([0-9A-Fa-f]{8})\s*$/.exec(e);if(i){let t=i[1];return[parseInt(t.substr(6,2),16),parseInt(t.substr(4,2),16),parseInt(t.substr(2,2),16),parseInt(t.substr(0,2),16)/255]}}function tt(t){let e,i=(0,M.getAllTextContent)(t,!1),r=[];i=i.replace(/\s*,\s*/g,",");let o=/^\s*([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?),([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|,|$)(?:([+\-]?\d*\.?\d+(?:e[+\-]?\d+)?)(?:\s+|$))?\s*/i;for(;e=o.exec(i);){let t=parseFloat(e[1]),o=parseFloat(e[2]),n=e[3]?parseFloat(e[3]):0;r.push(t,o,n),i=i.substr(e[0].length)}if(""===i)return r}function te(t){let e=(0,M.getAllTextContent)(t,!1).trim(),i=t.baseURI;return(i&&"about:blank"!=i||(i=window.location.href),i)?new URL(e,i).href:e}function ti(t){let e=(0,M.getAllTextContent)(t,!1).trim().replace(/^(?!.*#)/,"#"),i=t.baseURI;return(i&&"about:blank"!=i||(i=window.location.href),i)?new URL(e,i).href:e}function tr(t){return(0,L.readDecimal)(t)}let to=(0,M.makeStructureNS)(G,{Pair:function(t,e){let i=(0,M.pushParseAndPop)({},tR,t,e,this);if(!i)return;let r=i.key;if(r&&"normal"==r){let t=i.styleUrl;t&&(e[e.length-1]=t);let r=i.Style;r&&(e[e.length-1]=r)}}});function tn(t,e){return(0,M.pushParseAndPop)(void 0,to,t,e,this)}let ta=(0,M.makeStructureNS)(G,{Icon:(0,M.makeObjectPropertySetter)(function(t,e){return(0,M.pushParseAndPop)({},tg,t,e)||null}),color:(0,M.makeObjectPropertySetter)(Q),heading:(0,M.makeObjectPropertySetter)(L.readDecimal),hotSpot:(0,M.makeObjectPropertySetter)(function(t){let e=t.getAttribute("xunits"),i=t.getAttribute("yunits");return{x:parseFloat(t.getAttribute("x")),xunits:Z[e],y:parseFloat(t.getAttribute("y")),yunits:Z[i],origin:"insetPixels"!==e?"insetPixels"!==i?"bottom-left":"top-left":"insetPixels"!==i?"bottom-right":"top-right"}}),scale:(0,M.makeObjectPropertySetter)(tr)}),ts=(0,M.makeStructureNS)(G,{color:(0,M.makeObjectPropertySetter)(Q),scale:(0,M.makeObjectPropertySetter)(tr)}),tl=(0,M.makeStructureNS)(G,{color:(0,M.makeObjectPropertySetter)(Q),width:(0,M.makeObjectPropertySetter)(L.readDecimal)}),th=(0,M.makeStructureNS)(G,{color:(0,M.makeObjectPropertySetter)(Q),fill:(0,M.makeObjectPropertySetter)(L.readBoolean),outline:(0,M.makeObjectPropertySetter)(L.readBoolean)}),tu=(0,M.makeStructureNS)(G,{coordinates:(0,M.makeReplacer)(tt)});function tc(t,e){return(0,M.pushParseAndPop)(null,tu,t,e)}let tf=(0,M.makeStructureNS)(k,{Track:(0,M.makeArrayPusher)(tp)}),td=(0,M.makeStructureNS)(G,{when:function(t,e){let i=e[e.length-1].whens,r=Date.parse((0,M.getAllTextContent)(t,!1));i.push(isNaN(r)?0:r)}},(0,M.makeStructureNS)(k,{coord:function(t,e){let i=e[e.length-1].coordinates,r=(0,M.getAllTextContent)(t,!1),o=/^\s*([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s+([+\-]?\d+(?:\.\d*)?(?:e[+\-]?\d*)?)\s*$/i.exec(r);if(o){let t=parseFloat(o[1]),e=parseFloat(o[2]),r=parseFloat(o[3]);i.push([t,e,r])}else i.push([])}}));function tp(t,e){let i=(0,M.pushParseAndPop)({coordinates:[],whens:[]},td,t,e);if(!i)return;let r=[],o=i.coordinates,n=i.whens;for(let t=0,e=Math.min(o.length,n.length);t<e;++t)3==o[t].length&&r.push(o[t][0],o[t][1],o[t][2],n[t]);return new x.default(r,"XYZM")}let tg=(0,M.makeStructureNS)(G,{href:(0,M.makeObjectPropertySetter)(te)},(0,M.makeStructureNS)(k,{x:(0,M.makeObjectPropertySetter)(L.readDecimal),y:(0,M.makeObjectPropertySetter)(L.readDecimal),w:(0,M.makeObjectPropertySetter)(L.readDecimal),h:(0,M.makeObjectPropertySetter)(L.readDecimal)})),tm=(0,M.makeStructureNS)(G,{coordinates:(0,M.makeReplacer)(tt)});function ty(t,e){return(0,M.pushParseAndPop)(null,tm,t,e)}let tx=(0,M.makeStructureNS)(G,{extrude:(0,M.makeObjectPropertySetter)(L.readBoolean),tessellate:(0,M.makeObjectPropertySetter)(L.readBoolean),altitudeMode:(0,M.makeObjectPropertySetter)(L.readString)});function tv(t,e){let i=(0,M.pushParseAndPop)({},tx,t,e),r=ty(t,e);if(r){let t=new x.default(r,"XYZ");return t.setProperties(i,!0),t}}function tb(t,e){let i=(0,M.pushParseAndPop)({},tx,t,e),r=ty(t,e);if(r){let t=new S.default(r,"XYZ",[r.length]);return t.setProperties(i,!0),t}}let tw=(0,M.makeStructureNS)(G,{LineString:(0,M.makeArrayPusher)(tv),LinearRing:(0,M.makeArrayPusher)(tb),MultiGeometry:(0,M.makeArrayPusher)(t_),Point:(0,M.makeArrayPusher)(tS),Polygon:(0,M.makeArrayPusher)(tA)});function t_(t,e){let i,r;let o=(0,M.pushParseAndPop)([],tw,t,e);if(!o)return null;if(0===o.length)return new g.default(o);let n=!0,a=o[0].getType();for(let t=1,e=o.length;t<e;++t)if((r=o[t]).getType()!=a){n=!1;break}if(n){let t,e;if("Point"==a){let n=o[0];t=n.getLayout(),e=n.getFlatCoordinates();for(let t=1,i=o.length;t<i;++t)r=o[t],(0,C.extend)(e,r.getFlatCoordinates());tM(i=new b.default(e,t),o)}else if("LineString"==a)tM(i=new v.default(o),o);else if("Polygon"==a)tM(i=new w.default(o),o);else if("GeometryCollection"==a)i=new g.default(o);else throw Error("Unknown geometry type found")}else i=new g.default(o);return i}function tS(t,e){let i=(0,M.pushParseAndPop)({},tx,t,e),r=ty(t,e);if(r){let t=new _.default(r,"XYZ");return t.setProperties(i,!0),t}}let tE=(0,M.makeStructureNS)(G,{innerBoundaryIs:function(t,e){let i=(0,M.pushParseAndPop)([],tZ,t,e);i.length>0&&e[e.length-1].push(...i)},outerBoundaryIs:function(t,e){let i=(0,M.pushParseAndPop)(void 0,tF,t,e);i&&(e[e.length-1][0]=i)}});function tA(t,e){let i=(0,M.pushParseAndPop)({},tx,t,e),r=(0,M.pushParseAndPop)([null],tE,t,e);if(r&&r[0]){let t=r[0],e=[t.length];for(let i=1,o=r.length;i<o;++i)(0,C.extend)(t,r[i]),e.push(t.length);let o=new S.default(t,"XYZ",e);return o.setProperties(i,!0),o}}let tN=(0,M.makeStructureNS)(G,{IconStyle:function(t,e){let i,r,n,c,f,d,p;let g=(0,M.pushParseAndPop)({},ta,t,e);if(!g)return;let x=e[e.length-1],v="Icon"in g?g.Icon:{},b=!("Icon"in g)||Object.keys(v).length>0,w=v.href;w?i=w:b&&(i=h);let _="bottom-left",S=g.hotSpot;S?(r=[S.x,S.y],n=S.xunits,c=S.yunits,_=S.origin):/^https?:\/\/maps\.(?:google|gstatic)\.com\//.test(i)&&(i.includes("pushpin")?(r=o,n=a,c=s):i.includes("arrow-reverse")?(r=[54,42],n=a,c=s):i.includes("paddle")&&(r=[32,1],n=a,c=s));let E=v.x,A=v.y;void 0!==E&&void 0!==A&&(f=[E,A]);let N=v.w,I=v.h;void 0!==N&&void 0!==I&&(d=[N,I]);let P=g.heading;void 0!==P&&(p=(0,R.toRadians)(P));let C=g.scale,T=g.color;if(b){i==h&&(d=l);let t=new m.default({anchor:r,anchorOrigin:_,anchorXUnits:n,anchorYUnits:c,crossOrigin:this.crossOrigin_,offset:f,offsetOrigin:"bottom-left",rotation:p,scale:C,size:d,src:this.iconUrlFunction_(i),color:T}),e=t.getScaleArray()[0],o=t.getSize();if(null===o){let i=t.getImageState();if(i===y.default.IDLE||i===y.default.LOADING){let r=function(){let i=t.getImageState();if(!(i===y.default.IDLE||i===y.default.LOADING)){let i=t.getSize();if(i&&2==i.length){let r=K(i);t.setScale(e*r)}t.unlistenImageChange(r)}};t.listenImageChange(r),i===y.default.IDLE&&t.load()}}else if(2==o.length){let i=K(o);t.setScale(e*i)}x.imageStyle=t}else x.imageStyle=u},LabelStyle:function(t,e){let i=(0,M.pushParseAndPop)({},ts,t,e);if(!i)return;let o=e[e.length-1],n=new N.default({fill:new p.default({color:"color"in i?i.color:r}),scale:i.scale});o.textStyle=n},LineStyle:function(t,e){let i=(0,M.pushParseAndPop)({},tl,t,e);if(!i)return;let o=e[e.length-1],n=new E.default({color:"color"in i?i.color:r,width:"width"in i?i.width:1});o.strokeStyle=n},PolyStyle:function(t,e){let i=(0,M.pushParseAndPop)({},th,t,e);if(!i)return;let o=e[e.length-1],n=new p.default({color:"color"in i?i.color:r});o.fillStyle=n;let a=i.fill;void 0!==a&&(o.fill=a);let s=i.outline;void 0!==s&&(o.outline=s)}});function tI(t,e){let i;let r=(0,M.pushParseAndPop)({},tN,t,e,this);if(!r)return null;let o="fillStyle"in r?r.fillStyle:H,n=r.fill;void 0===n||n||(o=null),"imageStyle"in r?r.imageStyle!=u&&(i=r.imageStyle):i=V;let a="textStyle"in r?r.textStyle:W,s="strokeStyle"in r?r.strokeStyle:Y,l=r.outline;return void 0===l||l?[new A.default({fill:o,image:i,stroke:s,text:a,zIndex:void 0})]:[new A.default({geometry:function(t){let e=t.getGeometry(),i=e.getType();return"GeometryCollection"===i?new g.default(e.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"Polygon"!==e&&"MultiPolygon"!==e})):"Polygon"!==i&&"MultiPolygon"!==i?e:void 0},fill:o,image:i,stroke:s,text:a,zIndex:void 0}),new A.default({geometry:function(t){let e=t.getGeometry(),i=e.getType();return"GeometryCollection"===i?new g.default(e.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"Polygon"===e||"MultiPolygon"===e})):"Polygon"===i||"MultiPolygon"===i?e:void 0},fill:o,stroke:null,zIndex:void 0})]}function tM(t,e){let i,r,o;let n=e.length,a=Array(e.length),s=Array(e.length),l=Array(e.length);i=!1,r=!1,o=!1;for(let t=0;t<n;++t){let n=e[t];a[t]=n.get("extrude"),s[t]=n.get("tessellate"),l[t]=n.get("altitudeMode"),i=i||void 0!==a[t],r=r||void 0!==s[t],o=o||l[t]}i&&t.set("extrude",a),r&&t.set("tessellate",s),o&&t.set("altitudeMode",l)}let tP=(0,M.makeStructureNS)(G,{displayName:(0,M.makeObjectPropertySetter)(L.readString),value:(0,M.makeObjectPropertySetter)(L.readString)}),tC=(0,M.makeStructureNS)(G,{Data:function(t,e){let i=t.getAttribute("name");(0,M.parseNode)(tP,t,e);let r=e[e.length-1];i&&r.displayName?r[i]={value:r.value,displayName:r.displayName,toString:function(){return r.value}}:null!==i?r[i]=r.value:null!==r.displayName&&(r[r.displayName]=r.value),delete r.value},SchemaData:function(t,e){(0,M.parseNode)(tO,t,e)}});function tT(t,e){(0,M.parseNode)(tC,t,e)}function tL(t,e){(0,M.parseNode)(U,t,e)}let tR=(0,M.makeStructureNS)(G,{Style:(0,M.makeObjectPropertySetter)(tI),key:(0,M.makeObjectPropertySetter)(L.readString),styleUrl:(0,M.makeObjectPropertySetter)(ti)}),tO=(0,M.makeStructureNS)(G,{SimpleData:function(t,e){let i=t.getAttribute("name");if(null!==i){let r=(0,L.readString)(t);e[e.length-1][i]=r}}}),tk=(0,M.makeStructureNS)(G,{altitudeMode:(0,M.makeObjectPropertySetter)(L.readString),minAltitude:(0,M.makeObjectPropertySetter)(L.readDecimal),maxAltitude:(0,M.makeObjectPropertySetter)(L.readDecimal),north:(0,M.makeObjectPropertySetter)(L.readDecimal),south:(0,M.makeObjectPropertySetter)(L.readDecimal),east:(0,M.makeObjectPropertySetter)(L.readDecimal),west:(0,M.makeObjectPropertySetter)(L.readDecimal)}),tG=(0,M.makeStructureNS)(G,{minLodPixels:(0,M.makeObjectPropertySetter)(L.readDecimal),maxLodPixels:(0,M.makeObjectPropertySetter)(L.readDecimal),minFadeExtent:(0,M.makeObjectPropertySetter)(L.readDecimal),maxFadeExtent:(0,M.makeObjectPropertySetter)(L.readDecimal)}),tZ=(0,M.makeStructureNS)(G,{LinearRing:(0,M.makeArrayPusher)(tc)}),tF=(0,M.makeStructureNS)(G,{LinearRing:(0,M.makeReplacer)(tc)});function tD(t,e){let i=(0,P.asArray)(e),r=[255*(4==i.length?i[3]:1),i[2],i[1],i[0]];for(let t=0;t<4;++t){let e=Math.floor(r[t]).toString(16);r[t]=1==e.length?"0"+e:e}(0,L.writeStringTextNode)(t,r.join(""))}let tj=(0,M.makeStructureNS)(G,{Data:(0,M.makeChildAppender)(function(t,e,i){t.setAttribute("name",e.name);let r={node:t},o=e.value;"object"==typeof o?(null!==o&&o.displayName&&(0,M.pushSerializeAndPop)(r,tj,M.OBJECT_PROPERTY_NODE_FACTORY,[o.displayName],i,["displayName"]),null!==o&&o.value&&(0,M.pushSerializeAndPop)(r,tj,M.OBJECT_PROPERTY_NODE_FACTORY,[o.value],i,["value"])):(0,M.pushSerializeAndPop)(r,tj,M.OBJECT_PROPERTY_NODE_FACTORY,[o],i,["value"])}),value:(0,M.makeChildAppender)(function(t,e){(0,L.writeStringTextNode)(t,e)}),displayName:(0,M.makeChildAppender)(function(t,e){(0,L.writeCDATASection)(t,e)})}),tq=(0,M.makeStructureNS)(G,{Placemark:(0,M.makeChildAppender)(ei)}),tU=function(t,e,i){let r=e[e.length-1].node;return(0,M.createElementNS)(r.namespaceURI,"Placemark")},tB=(0,M.makeSimpleNodeFactory)("Data"),tz=(0,M.makeStructureNS)(G,["href"],(0,M.makeStructureNS)(k,["x","y","w","h"])),tH=(0,M.makeStructureNS)(G,{href:(0,M.makeChildAppender)(L.writeStringTextNode)},(0,M.makeStructureNS)(k,{x:(0,M.makeChildAppender)(L.writeDecimalTextNode),y:(0,M.makeChildAppender)(L.writeDecimalTextNode),w:(0,M.makeChildAppender)(L.writeDecimalTextNode),h:(0,M.makeChildAppender)(L.writeDecimalTextNode)})),tV=function(t,e,i){return(0,M.createElementNS)(k[0],"gx:"+i)},tY=(0,M.makeStructureNS)(G,["scale","heading","Icon","color","hotSpot"]),tW=(0,M.makeStructureNS)(G,{Icon:(0,M.makeChildAppender)(function(t,e,i){let r={node:t},o=tz[i[i.length-1].node.namespaceURI],n=(0,M.makeSequence)(e,o);(0,M.pushSerializeAndPop)(r,tH,M.OBJECT_PROPERTY_NODE_FACTORY,n,i,o),o=tz[k[0]],n=(0,M.makeSequence)(e,o),(0,M.pushSerializeAndPop)(r,tH,tV,n,i,o)}),color:(0,M.makeChildAppender)(tD),heading:(0,M.makeChildAppender)(L.writeDecimalTextNode),hotSpot:(0,M.makeChildAppender)(function(t,e){t.setAttribute("x",String(e.x)),t.setAttribute("y",String(e.y)),t.setAttribute("xunits",e.xunits),t.setAttribute("yunits",e.yunits)}),scale:(0,M.makeChildAppender)(ef)}),tX=(0,M.makeStructureNS)(G,["color","scale"]),tK=(0,M.makeStructureNS)(G,{color:(0,M.makeChildAppender)(tD),scale:(0,M.makeChildAppender)(ef)}),tJ=(0,M.makeStructureNS)(G,["color","width"]),t$=(0,M.makeStructureNS)(G,{color:(0,M.makeChildAppender)(tD),width:(0,M.makeChildAppender)(L.writeDecimalTextNode)}),tQ={Point:"Point",LineString:"LineString",LinearRing:"LinearRing",Polygon:"Polygon",MultiPoint:"MultiGeometry",MultiLineString:"MultiGeometry",MultiPolygon:"MultiGeometry",GeometryCollection:"MultiGeometry"},t0=function(t,e,i){if(t){let i=e[e.length-1].node;return(0,M.createElementNS)(i.namespaceURI,tQ[t.getType()])}},t1=(0,M.makeSimpleNodeFactory)("Point"),t2=(0,M.makeSimpleNodeFactory)("LineString"),t5=(0,M.makeSimpleNodeFactory)("LinearRing"),t4=(0,M.makeSimpleNodeFactory)("Polygon"),t6=(0,M.makeStructureNS)(G,{LineString:(0,M.makeChildAppender)(en),Point:(0,M.makeChildAppender)(en),Polygon:(0,M.makeChildAppender)(eu),GeometryCollection:(0,M.makeChildAppender)(t3)});function t3(t,e,i){let r;let o=e.getType(),n=[];if("GeometryCollection"===o)e.getGeometriesArrayRecursive().forEach(function(t){let e=t.getType();if("MultiPoint"===e)n=n.concat(t.getPoints());else if("MultiLineString"===e)n=n.concat(t.getLineStrings());else if("MultiPolygon"===e)n=n.concat(t.getPolygons());else if("Point"===e||"LineString"===e||"Polygon"===e)n.push(t);else throw Error("Unknown geometry type")}),r=t0;else if("MultiPoint"===o)n=e.getPoints(),r=t1;else if("MultiLineString"===o)n=e.getLineStrings(),r=t2;else if("MultiPolygon"===o)n=e.getPolygons(),r=t4;else throw Error("Unknown geometry type");(0,M.pushSerializeAndPop)({node:t},t6,r,n,i)}let t8=(0,M.makeStructureNS)(G,{LinearRing:(0,M.makeChildAppender)(en)});function t7(t,e,i){(0,M.pushSerializeAndPop)({node:t},t8,t5,[e],i)}let t9=(0,M.makeStructureNS)(G,{ExtendedData:(0,M.makeChildAppender)(function(t,e,i){let r={node:t},o=e.names,n=e.values,a=o.length;for(let t=0;t<a;t++)(0,M.pushSerializeAndPop)(r,tj,tB,[{name:o[t],value:n[t]}],i)}),MultiGeometry:(0,M.makeChildAppender)(t3),LineString:(0,M.makeChildAppender)(en),LinearRing:(0,M.makeChildAppender)(en),Point:(0,M.makeChildAppender)(en),Polygon:(0,M.makeChildAppender)(eu),Style:(0,M.makeChildAppender)(function(t,e,i){let r={};if(e.pointStyles.length){let t=e.pointStyles[0].getText();t&&(r.LabelStyle=t);let i=e.pointStyles[0].getImage();i&&"function"==typeof i.getSrc&&(r.IconStyle=i)}if(e.lineStyles.length){let t=e.lineStyles[0].getStroke();t&&(r.LineStyle=t)}if(e.polyStyles.length){let t=e.polyStyles[0].getStroke();t&&!r.LineStyle&&(r.LineStyle=t),r.PolyStyle=e.polyStyles[0]}let o=ed[i[i.length-1].node.namespaceURI],n=(0,M.makeSequence)(r,o);(0,M.pushSerializeAndPop)({node:t},ep,M.OBJECT_PROPERTY_NODE_FACTORY,n,i,o)}),address:(0,M.makeChildAppender)(L.writeStringTextNode),description:(0,M.makeChildAppender)(L.writeStringTextNode),name:(0,M.makeChildAppender)(L.writeStringTextNode),open:(0,M.makeChildAppender)(L.writeBooleanTextNode),phoneNumber:(0,M.makeChildAppender)(L.writeStringTextNode),styleUrl:(0,M.makeChildAppender)(L.writeStringTextNode),visibility:(0,M.makeChildAppender)(L.writeBooleanTextNode)}),et=(0,M.makeStructureNS)(G,["name","open","visibility","address","phoneNumber","description","styleUrl","Style"]),ee=(0,M.makeSimpleNodeFactory)("ExtendedData");function ei(t,e,i){let r={node:t};e.getId()&&t.setAttribute("id",e.getId());let o=e.getProperties(),n={address:1,description:1,name:1,open:1,phoneNumber:1,styleUrl:1,visibility:1};n[e.getGeometryName()]=1;let a=Object.keys(o||{}).sort().filter(function(t){return!n[t]}),s=e.getStyleFunction();if(s){let t=s(e,0);if(t){let i=Array.isArray(t)?t:[t],r=i;if(e.getGeometry()&&(r=i.filter(function(t){let i=t.getGeometryFunction()(e);if(i){let t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"Point"===e||"MultiPoint"===e}).length:"Point"===t||"MultiPoint"===t}})),this.writeStyles_){let t=i,n=i;e.getGeometry()&&(t=i.filter(function(t){let i=t.getGeometryFunction()(e);if(i){let t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"LineString"===e||"MultiLineString"===e}).length:"LineString"===t||"MultiLineString"===t}}),n=i.filter(function(t){let i=t.getGeometryFunction()(e);if(i){let t=i.getType();return"GeometryCollection"===t?i.getGeometriesArrayRecursive().filter(function(t){let e=t.getType();return"Polygon"===e||"MultiPolygon"===e}).length:"Polygon"===t||"MultiPolygon"===t}})),o.Style={pointStyles:r,lineStyles:t,polyStyles:n}}if(r.length&&void 0===o.name){let t=r[0].getText();t&&(o.name=t.getText())}}}let l=et[i[i.length-1].node.namespaceURI],h=(0,M.makeSequence)(o,l);if((0,M.pushSerializeAndPop)(r,t9,M.OBJECT_PROPERTY_NODE_FACTORY,h,i,l),a.length>0){let t=(0,M.makeSequence)(o,a);(0,M.pushSerializeAndPop)(r,t9,ee,[{names:a,values:t}],i)}let u=i[0],c=e.getGeometry();c&&(c=(0,O.transformGeometryWithOptions)(c,!0,u)),(0,M.pushSerializeAndPop)(r,t9,t0,[c],i)}let er=(0,M.makeStructureNS)(G,["extrude","tessellate","altitudeMode","coordinates"]),eo=(0,M.makeStructureNS)(G,{extrude:(0,M.makeChildAppender)(L.writeBooleanTextNode),tessellate:(0,M.makeChildAppender)(L.writeBooleanTextNode),altitudeMode:(0,M.makeChildAppender)(L.writeStringTextNode),coordinates:(0,M.makeChildAppender)(function(t,e,i){let r;let o=i[i.length-1],n=o.layout,a=o.stride;if("XY"==n||"XYM"==n)r=2;else if("XYZ"==n||"XYZM"==n)r=3;else throw Error("Invalid geometry layout");let s=e.length,l="";if(s>0){l+=e[0];for(let t=1;t<r;++t)l+=","+e[t];for(let t=a;t<s;t+=a){l+=" "+e[t];for(let i=1;i<r;++i)l+=","+e[t+i]}}(0,L.writeStringTextNode)(t,l)})});function en(t,e,i){let r=e.getFlatCoordinates(),o={node:t};o.layout=e.getLayout(),o.stride=e.getStride();let n=e.getProperties();n.coordinates=r;let a=er[i[i.length-1].node.namespaceURI],s=(0,M.makeSequence)(n,a);(0,M.pushSerializeAndPop)(o,eo,M.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)}let ea=(0,M.makeStructureNS)(G,["color","fill","outline"]),es=(0,M.makeStructureNS)(G,{outerBoundaryIs:(0,M.makeChildAppender)(t7),innerBoundaryIs:(0,M.makeChildAppender)(t7)}),el=(0,M.makeSimpleNodeFactory)("innerBoundaryIs"),eh=(0,M.makeSimpleNodeFactory)("outerBoundaryIs");function eu(t,e,i){let r=e.getLinearRings(),o=r.shift(),n={node:t};(0,M.pushSerializeAndPop)(n,es,el,r,i),(0,M.pushSerializeAndPop)(n,es,eh,[o],i)}let ec=(0,M.makeStructureNS)(G,{color:(0,M.makeChildAppender)(tD),fill:(0,M.makeChildAppender)(L.writeBooleanTextNode),outline:(0,M.makeChildAppender)(L.writeBooleanTextNode)});function ef(t,e){(0,L.writeDecimalTextNode)(t,Math.round(1e6*e)/1e6)}let ed=(0,M.makeStructureNS)(G,["IconStyle","LabelStyle","LineStyle","PolyStyle"]),ep=(0,M.makeStructureNS)(G,{IconStyle:(0,M.makeChildAppender)(function(t,e,i){let r={},o=e.getSrc(),n=e.getSize(),a=e.getImageSize(),s={href:o};if(n){s.w=n[0],s.h=n[1];let t=e.getAnchor(),i=e.getOrigin();if(i&&a&&0!==i[0]&&i[1]!==n[1]&&(s.x=i[0],s.y=a[1]-(i[1]+n[1])),t&&(t[0]!==n[0]/2||t[1]!==n[1]/2)){let e={x:t[0],xunits:"pixels",y:n[1]-t[1],yunits:"pixels"};r.hotSpot=e}}r.Icon=s;let h=e.getScaleArray()[0],u=n;null===u&&(u=l),2==u.length&&(h/=K(u)),1!==h&&(r.scale=h);let c=e.getRotation();0!==c&&(r.heading=c);let f=e.getColor();f&&(r.color=f);let d=tY[i[i.length-1].node.namespaceURI],p=(0,M.makeSequence)(r,d);(0,M.pushSerializeAndPop)({node:t},tW,M.OBJECT_PROPERTY_NODE_FACTORY,p,i,d)}),LabelStyle:(0,M.makeChildAppender)(function(t,e,i){let r={},o=e.getFill();o&&(r.color=o.getColor());let n=e.getScale();n&&1!==n&&(r.scale=n);let a=tX[i[i.length-1].node.namespaceURI],s=(0,M.makeSequence)(r,a);(0,M.pushSerializeAndPop)({node:t},tK,M.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)}),LineStyle:(0,M.makeChildAppender)(function(t,e,i){let r={color:e.getColor(),width:Number(e.getWidth())||1},o=tJ[i[i.length-1].node.namespaceURI],n=(0,M.makeSequence)(r,o);(0,M.pushSerializeAndPop)({node:t},t$,M.OBJECT_PROPERTY_NODE_FACTORY,n,i,o)}),PolyStyle:(0,M.makeChildAppender)(function(t,e,i){let r=e.getFill(),o=e.getStroke(),n={color:r?r.getColor():void 0,fill:!!r&&void 0,outline:!!o&&void 0},a=ea[i[i.length-1].node.namespaceURI],s=(0,M.makeSequence)(n,a);(0,M.pushSerializeAndPop)({node:t},ec,M.OBJECT_PROPERTY_NODE_FACTORY,s,i,a)})});var eg=$}),a("6b5au",function(t,i){e(t.exports,"default",()=>v);var r=n("iGyOD"),o=n("k8QYM"),a=n("hvEnP"),s=n("7TB1l"),l=n("ljDIj"),h=n("dEQmT"),u=n("j2K3b"),c=n("cgPpQ"),f=n("gzr8q"),d=n("9z1G1");class p extends o.default{constructor(t){super(),t=t||{},this.layerName_=t.layerName,this.layers_=t.layers?t.layers:null,this.dataProjection=(0,f.get)(t.dataProjection?t.dataProjection:"EPSG:4326")}readFeaturesFromObject(t,e){if("Topology"==t.type){let i;let r,o=null,n=null;t.transform&&(o=(r=t.transform).scale,n=r.translate);let a=t.arcs;r&&function(t,e,i){for(let r=0,o=t.length;r<o;++r)(function(t,e,i){let r=0,o=0;for(let n=0,a=t.length;n<a;++n){let a=t[n];r+=a[0],o+=a[1],a[0]=r,a[1]=o,x(a,e,i)}})(t[r],e,i)}(a,o,n);let s=[],l=t.objects,h=this.layerName_;for(let t in l)(!this.layers_||this.layers_.includes(t))&&("GeometryCollection"===l[t].type?(i=l[t],s.push.apply(s,function(t,e,i,r,o,n,a){let s=t.geometries,l=[];for(let t=0,h=s.length;t<h;++t)l[t]=y(s[t],e,i,r,o,n,a);return l}(i,a,o,n,h,t,e))):(i=l[t],s.push(y(i,a,o,n,h,t,e))));return s}return[]}readProjectionFromObject(t){return this.dataProjection}}let g={Point:function(t,e,i){let r=t.coordinates;return e&&i&&x(r,e,i),new u.default(r)},LineString:function(t,e){let i=m(t.arcs,e);return new a.default(i)},Polygon:function(t,e){let i=[];for(let r=0,o=t.arcs.length;r<o;++r)i[r]=m(t.arcs[r],e);return new c.default(i)},MultiPoint:function(t,e,i){let r=t.coordinates;if(e&&i)for(let t=0,o=r.length;t<o;++t)x(r[t],e,i);return new l.default(r)},MultiLineString:function(t,e){let i=[];for(let r=0,o=t.arcs.length;r<o;++r)i[r]=m(t.arcs[r],e);return new s.default(i)},MultiPolygon:function(t,e){let i=[];for(let r=0,o=t.arcs.length;r<o;++r){let o=t.arcs[r],n=[];for(let t=0,i=o.length;t<i;++t)n[t]=m(o[t],e);i[r]=n}return new h.default(i)}};function m(t,e){let i;let r=[];for(let o=0,n=t.length;o<n;++o)if(i=t[o],o>0&&r.pop(),i>=0){let t=e[i];for(let e=0,i=t.length;e<i;++e)r.push(t[e].slice(0))}else{let t=e[~i];for(let e=t.length-1;e>=0;--e)r.push(t[e].slice(0))}return r}function y(t,e,i,o,n,a,s){let l=null,h=t.type;if(h){let r=g[h];l="Point"===h||"MultiPoint"===h?r(t,i,o):r(t,e),l=(0,d.transformGeometryWithOptions)(l,!1,s)}let u=new r.default({geometry:l});void 0!==t.id&&u.setId(t.id);let c=t.properties;return n&&(c||(c={}),c[n]=a),c&&u.setProperties(c,!0),u}function x(t,e,i){t[0]=t[0]*e[0]+i[0],t[1]=t[1]*e[1]+i[1]}var v=p}),a("29jcm",function(t,i){e(t.exports,"default",()=>l);var r=n("5mw1t"),o=n("kFndz"),a=n("j2K3b"),s=n("hvEnP"),l=class extends r.default{constructor(t){super(t=t||{}),this._lineFormat=new o.default({factor:Math.pow(10,t.decimals||6)})}encodeCoordinates(t){if("number"==typeof t[0])return e=new a.default(t),this._lineFormat.writeGeometry(e);if(!t.length||!t[0])return this.encodeCoordinates([0,0]);if("number"==typeof t[0][0])return e=new s.default(t),this._lineFormat.writeGeometry(e);for(var e,i=[],r=0;r<t.length;r++)i[r]=this.encodeCoordinates(t[r]);return i}decodeCoordinates(t){if("string"==typeof t)return(i=this._lineFormat.readGeometry(t)).getCoordinates()[0];if(!t.length)return null;var e,i,r="string"==typeof t[0],o=[];if(r)for(e=0;e<t.length;e++)i=this._lineFormat.readGeometry(t[e]),o[e]=i.getCoordinates();else for(e=0;e<t.length;e++)o[e]=this.decodeCoordinates(t[e]);return o}}}),a("kFndz",function(t,i){e(t.exports,"default",()=>d);var r=n("iGyOD"),o=n("hvEnP"),a=n("jEnSw"),s=n("97NX0"),l=n("gzr8q"),h=n("63y7W"),u=n("iTdJV"),c=n("9z1G1");class f extends a.default{constructor(t){super(),t=t||{},this.dataProjection=(0,l.get)("EPSG:4326"),this.factor_=t.factor?t.factor:1e5,this.geometryLayout_=t.geometryLayout?t.geometryLayout:"XY"}readFeatureFromText(t,e){let i=this.readGeometryFromText(t,e);return new r.default(i)}readFeaturesFromText(t,e){return[this.readFeatureFromText(t,e)]}readGeometryFromText(t,e){let i=(0,h.getStrideForLayout)(this.geometryLayout_),r=function(t,e,i){let r;i=i||1e5;let o=Array(e);for(r=0;r<e;++r)o[r]=0;let n=function(t,e){e=e||1e5;let i=function(t){let e=function(t){let e=[],i=0,r=0;for(let o=0,n=t.length;o<n;++o){let n=t.charCodeAt(o)-63;i|=(31&n)<<r,n<32?(e.push(i),i=0,r=0):r+=5}return e}(t);for(let t=0,i=e.length;t<i;++t){let i=e[t];e[t]=1&i?~(i>>1):i>>1}return e}(t);for(let t=0,r=i.length;t<r;++t)i[t]/=e;return i}(t,i);for(let t=0,i=n.length;t<i;)for(r=0;r<e;++r,++t)o[r]+=n[t],n[t]=o[r];return n}(t,i,this.factor_);(0,s.flipXY)(r,0,r.length,i,r);let n=(0,u.inflateCoordinates)(r,0,r.length,i),a=new o.default(n,this.geometryLayout_);return(0,c.transformGeometryWithOptions)(a,!1,this.adaptOptions(e))}writeFeatureText(t,e){let i=t.getGeometry();if(i)return this.writeGeometryText(i,e);throw Error("Expected `feature` to have a geometry")}writeFeaturesText(t,e){return this.writeFeatureText(t[0],e)}writeGeometryText(t,e){let i=(t=(0,c.transformGeometryWithOptions)(t,!0,this.adaptOptions(e))).getFlatCoordinates(),r=t.getStride();return(0,s.flipXY)(i,0,i.length,r,i),function(t,e,i){let r;i=i||1e5;let o=Array(e);for(r=0;r<e;++r)o[r]=0;for(let i=0,n=t.length;i<n;)for(r=0;r<e;++r,++i){let e=t[i],n=e-o[r];o[r]=e,t[i]=n}return function(t,e){e=e||1e5;for(let i=0,r=t.length;i<r;++i)t[i]=Math.round(t[i]*e);return function(t){for(let e=0,i=t.length;e<i;++e){let i=t[e];t[e]=i<0?~(i<<1):i<<1}return function(t){let e="";for(let i=0,r=t.length;i<r;++i)e+=function(t){let e="";for(;t>=32;)e+=String.fromCharCode((32|31&t)+63),t>>=5;return e+String.fromCharCode(t+63)}(t[i]);return e}(t)}(t)}(t,i)}(i,r,this.factor_)}}var d=f}),a("97NX0",function(t,i){e(t.exports,"flipXY",()=>r);function r(t,e,i,r,o,n){void 0!==o?n=void 0!==n?n:0:(o=[],n=0);let a=e;for(;a<i;){let e=t[a++];o[n++]=t[a++],o[n++]=e;for(let e=2;e<r;++e)o[n++]=t[a++]}return o.length=n,o}}),a("6xHMs",function(t,i){e(t.exports,"default",()=>l);var r=n("fnScq"),o=n("iGyOD"),a=n("j2K3b"),s=n("cgPpQ"),l=class extends r.default{constructor(t){super(t=t||{})}readFeature(t,e){e=e||{};for(var i,r=t.children,n=new o.default,l=0;i=r[l];l++)n.set(i.tagName,i.innerHTML);var h,u,c=[];if(n.get("geo:long"))u=new a.default([parseFloat(n.get("geo:long")),parseFloat(n.get("geo:lat"))]),n.unset("geo:long"),n.unset("geo:lat");else if(n.get("georss:point"))c=n.get("georss:point").trim().split(" "),u=new a.default([parseFloat(c[1]),parseFloat(c[0])]),n.unset("georss:point");else if(n.get("georss:polygon")){h=n.get("georss:polygon").trim().split(" ");for(var f=0;f<h.length;f+=2)c.push([parseFloat(h[f+1]),parseFloat(h[f])]);u=new s.default([c]),n.unset("georss:polygon")}else if(n.get("georss:where"))return console.warn("[GeoRSS] GML format not implemented"),n.unset("georss:where"),null;else return console.warn("[GeoRSS] unknown geometry"),null;return(e.featureProjection||this.get("featureProjection"))&&u.transform(e.dataProjection||this.get("dataProjection")||"EPSG:4326",e.featureProjection||this.get("featureProjection")),n.setGeometry(u),n}readFeatures(t,e){if("string"==typeof t){var i=new DOMParser().parseFromString(t,"text/xml");r=i.getElementsByTagName(this.getDocumentItemsTagName(i))}else if(t instanceof Document)r=t.getElementsByTagName(this.getDocumentItemsTagName(t));else{if(!(t instanceof Node))return[];r=t}for(var r,o,n=[],a=0;o=r[a];a++){var s=this.readFeature(o,e);s&&n.push(s)}return n}getDocumentItemsTagName(t){return"feed"===t.documentElement.tagName?"entry":"item"}}}),a("c614M",function(t,i){e(t.exports,"default",()=>s);var r=n("4mOxN"),o=n("lMv07");class a extends o.default{constructor(){super()}}a.prototype.read=function(t){if("report"!==t.type)return!1;let e=new r.default(t);return this.readOptions(e,t),this.readFeatures(e,t)},a.prototype.write=function(t){if("report"!==t.get("type"))return null;let e=this.writeOptions(t,{communities:t.get("communities"),status:t.get("status"),date:t.get("date"),maxFeatures:t.get("maxFeatures")});return this.writeFeatures(t,e)};var s=a}),a("4mOxN",function(t,i){e(t.exports,"default",()=>u);var r=n("jPVWI"),o=n("iGyOD"),a=n("j2K3b"),s=n("20LS2");class l extends r.default{constructor(t){super({title:t.title||"Signalements",communities:t.communities,status:t.status,date:t.date,maxFeatures:t.maxFeatures||1e3,source:new s.default}),this.set("type","report")}getUrl(t,e){let i=this.getProperties(),r="https://espacecollaboratif.ign.fr/gcms/api/reports?limit=100&sort=updating_date:DESC";return i.communities&&(r+="&communities="+i.communities),i.status.forEach(t=>{r+="&status[]="+t}),t&&(r+="&page="+t),e&&(r+="&updating_date="+e),r}reload(t){this.getSource().clear(),this.set("date",new Date().toISOString().split("T").shift()),function t(e,i,r){let o=e.getSource(),n=e.getProperties();r=r||1;let a=e.getUrl(r);fetch(a).then(t=>t.json()).then(a=>{let s=o.getFeatures().length,l=[];a.forEach(t=>{if(n.maxFeatures<=l.length+s)return;let e=h(t);l.push(e)});let u={type:"reading",nb:o.getFeatures().length+l.length,max:n.maxFeatures,finish:!(a.length&&n.maxFeatures>100*r)};i&&!1===i(u)&&(u.finish=!0),u.finish||(t(e,i,r+1),o.dispatchEvent(u)),o.addFeatures(l)})}(this,t)}update(t){(function t(e,i,r,o){o=o||[],r=r||1;let n=e.getUrl(r,e.get("date"));fetch(n).then(t=>t.json()).then(n=>{if(n.length)n.forEach(t=>{let e=h(t);o.unshift(e)}),t(e,i,++r,o),i&&i({type:"updating",nb:o.length,finish:!1});else{let t=e.getProperties(),r=e.getSource(),n={};if(r.getFeatures().forEach(t=>{n[t.get("id")]=t}),o.forEach(i=>{let o=n[i.get("id")];o&&r.removeFeature(o),(!t.status.length||t.status.indexOf(i.get("status"))>-1)&&(r.addFeature(i),n[i.get("id")]=i),e.set("date",new Date().toISOString().split("T").shift())}),i){let t={type:"updating",finish:!0};r.dispatchEvent(t),i(t)}}})})(this,t)}}function h(t){let e=t.geometry.replace(/POINT\(|\)/g,"").split(" ").map(t=>Number(t)),i=new o.default(new(0,a.default)(e).transform("EPSG:4326","EPSG:3857"));return["id","comment","author","community","status","validator","opening_date","updating_date","closing_date","input_device"].forEach(e=>{i.set(e,t[e])}),t.attachments.forEach(t=>{/jpg|gif|png/i.test(t.filename)&&i.set("img",t.uri)}),t.commune&&(i.set("commune",t.commune.title),i.set("insee",t.commune.name)),t.departement&&(i.set("departement",t.departement.title),i.set("id_dep",t.departement.name)),t.attributes.forEach(t=>{i.set("theme",t.theme),(Array.isArray(t.attributes)?t.attributes:[t.attributes]).forEach(t=>{for(let e in t)i.set(e,t[e])})}),i}var u=l}),a("l1YgS",function(t,i){e(t.exports,"default",()=>l);var r=n("eEuqc"),o=n("8MDYc"),a=n("5TDW7");class s extends a.default{constructor(){super()}}s.prototype.read=function(t){if("XYZ"!==t.type)return null;let e=new r.default({source:new o.default({url:t.url,minZoom:t.sourceMinZoom,maxZoom:t.sourceMaxZoom,crossOrigin:t.crossOrigin})});return e.getSource().set("minZoom",t.sourceMinZoom),e.getSource().set("maxZoom",t.sourceMaxZoom),this.readOptions(e,t),e},s.prototype.write=function(t){return"XYZ"!==t.get("type")?null:this.writeOptions(t,{url:t.getSource().getUrls()[0],sourceMinZoom:t.getSource().get("minZoom"),sourceMaxZoom:t.getSource().get("maxZoom"),crossOrigin:t.getSource().crossOrigin})};var l=s}),a("8MDYc",function(t,i){e(t.exports,"default",()=>s);var r=n("42VYg"),o=n("5NhYx");class a extends r.default{constructor(t){let e=void 0!==(t=t||{}).projection?t.projection:"EPSG:3857";super({attributions:t.attributions,cacheSize:t.cacheSize,crossOrigin:t.crossOrigin,interpolate:t.interpolate,opaque:t.opaque,projection:e,reprojectionErrorThreshold:t.reprojectionErrorThreshold,tileGrid:void 0!==t.tileGrid?t.tileGrid:(0,o.createXYZ)({extent:(0,o.extentFromProjection)(e),maxResolution:t.maxResolution,maxZoom:t.maxZoom,minZoom:t.minZoom,tileSize:t.tileSize}),tileLoadFunction:t.tileLoadFunction,tilePixelRatio:t.tilePixelRatio,tileUrlFunction:t.tileUrlFunction,url:t.url,urls:t.urls,wrapX:void 0===t.wrapX||t.wrapX,transition:t.transition,attributionsCollapsible:t.attributionsCollapsible,zDirection:t.zDirection}),this.gutter_=void 0!==t.gutter?t.gutter:0}getGutter(){return this.gutter_}}var s=a}),a("eRyYI",function(t,i){e(t.exports,"default",()=>l);var r=n("37u5y"),o=n("5TDW7"),a=n("jPVWI");class s extends o.default{constructor(){super()}}s.prototype.read=function(t){if("WFS"!==t.type)return null;let e=new a.default({source:new r.default({url:t.url,typeName:t.typeName,tileZoom:t.tileZoom})});return e.setMinZoom(t.tileZoom),e.getSource().set("url",t.url),e.getSource().set("typeName",t.typeName),e.getSource().set("tileZoom",t.tileZoom),this.readOptions(e,t),e},s.prototype.write=function(t){if("WFS"!==t.get("type"))return null;let e=t.getSource();return this.writeOptions(t,{url:e.get("url"),typeName:e.get("typeName"),tileZoom:e.get("tileZoom")})};var l=s}),a("37u5y",function(t,i){e(t.exports,"default",()=>h);var r=n("20LS2"),o=n("gmEQj"),a=n("5NhYx"),s=n("kPMpK"),l=n("fkmMz"),h=class extends r.default{constructor(t){(t=t||{}).featureLimit||(t.featureLimit=1/0);var e=t.tileZoom||14,i={strategy:(0,o.tile)((0,a.createXYZ)({minZoom:e,maxZoom:e,tileSize:512}))},r=new s.default,n=t.url+"?service=WFS&request=GetFeature&version="+(t.version||"1.1.0")+"&typename="+(t.typeName||"")+"&outputFormat=application/json";t.maxFeatures&&(n+="&maxFeatures="+t.maxFeatures+"&count="+t.maxFeatures);var l={loading:0,loaded:0};i.loader=function(e,i,o){l.loading===l.loaded&&(l.loading=l.loaded=0,this.getFeatures().length>t.maxFeatures&&(this.clear(),this.refresh())),l.loading++,this.dispatchEvent({type:"tileloadstart",loading:l.loading,loaded:l.loaded}),this._loadTile(n,e,o,r,l)},super(i),this.set("pagination",t.pagination)}_loadTile(t,e,i,r,o){var n=t+"&srsname="+i.getCode()+"&bbox="+e.join(",")+","+i.getCode();this.get("pagination")&&!/&startIndex/.test(t)&&(n+="&startIndex=0"),(0,l.default).get({url:n,success:(function(n){if(o.loaded++,n.error)this.dispatchEvent({type:"tileloaderror",error:n,loading:o.loading,loaded:o.loaded});else{var a=r.readFeatures(n,{featureProjection:i});a.length>0&&this.addFeatures(a);let s=n.numberReturned||0;/&startIndex/.test(t)&&(s+=parseInt(t.replace(/.*&startIndex=(\d*).*/,"$1")),t=t.replace(/&startIndex=(\d*)/,"")),s<n.totalFeatures?this.get("pagination")?(t+="&startIndex="+s,o.loaded--,this._loadTile(t,e,i,r,o)):(this.dispatchEvent({type:"overload",total:n.totalFeatures,returned:n.numberReturned}),this.dispatchEvent({type:"tileloadend",loading:o.loading,loaded:o.loaded})):this.dispatchEvent({type:"tileloadend",loading:o.loading,loaded:o.loaded})}}).bind(this),error:(function(t){o.loaded++,this.dispatchEvent({type:"tileloaderror",error:t,loading:o.loading,loaded:o.loaded})}).bind(this)})}}}),a("4Esdr",function(t,i){e(t.exports,"default",()=>s);var r=n("5TDW7"),o=n("1NiL5");class a extends r.default{constructor(){super()}}a.prototype.read=function(t){if("MVT"!==t.type)return null;let e=new o.default({title:t.title,url:t.url,attributions:t.copyright});if(t.mbstyle)try{e.set("style",t.mbstyle);let i=JSON.parse(t.mbstyle);e.applyStyle(i)}catch(t){}return this.readOptions(e,t),e},a.prototype.write=function(t){return"MVT"!==t.get("type")?null:this.writeOptions(t,{title:t.get("title"),url:t.get("styleUrl"),mbstyle:t.get("style")})};var s=a}),a("ikPfL",function(t,i){e(t.exports,"default",()=>h);var r=n("5TDW7"),o=n("aZxrf"),a=n("5Nyxy"),s=n("9MiJs");class l extends r.default{constructor(){super()}}l.prototype.read=function(t){if("PBF"!==t.type)return null;let e=new o.default({source:new a.default({url:t.url,format:new s.default})});return this.readOptions(e,t),e},l.prototype.write=function(t){if("PBF"!==t.get("type"))return null;let e=t.getSource();return this.writeOptions(t,{url:e.getUrls()[0]})};var h=l}),a("6ClR3",function(t,i){e(t.exports,"default",()=>h);var r=n("5TDW7"),o=n("lDz1h"),a=n("gC3AG"),s=n("2yyih");class l extends r.default{constructor(){super()}}l.prototype.read=function(t){if("ECo"!==t.type)return null;let e=new o.default({source:new a.default(t.table),style:(0,s.default).getFeatureStyleFn(t.table)});return this.readOptions(e,t),e},l.prototype.write=function(t){if("ECo"!==t.get("type"))return null;let e=t.getSource();return this.writeOptions(t,{table:e.table_})};var h=l}),a("lDz1h",function(t,i){e(t.exports,"default",()=>s);var r=n("610XN"),o=n("jPVWI");class a extends r.default{constructor(t){super(t=t||{}),this.set("type","ECo"),this.getSource().on("addfeature",t=>{t.feature._layer=this})}}a.prototype.getPopupContent=o.default.prototype.getPopupContent,a.prototype.setPopupContent=o.default.prototype.setPopupContent,a.prototype.selectable=o.default.prototype.selectable,a.prototype.getIgnStyle=function(){return{}};var s=a}),a("gC3AG",function(t,i){e(t.exports,"default",()=>m);var r=n("cG2f3"),o=n("iGUgk"),a=n("20LS2"),s=n("iGyOD"),l=n("5up1I"),h=n("gmEQj"),u=n("gzr8q"),c=n("5NhYx"),f=n("23ytq"),d=n("fkmMz"),p=n("jSBAJ");r.default.defs["EPSG:2154"]||(0,r.default).defs("EPSG:2154","+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["IGNF:LAMB93"]||(0,r.default).defs("IGNF:LAMB93","+proj=lcc +lat_1=49 +lat_2=44 +lat_0=46.5 +lon_0=3 +x_0=700000 +y_0=6600000 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:27572"]||(0,r.default).defs("EPSG:27572","+proj=lcc +lat_1=46.8 +lat_0=46.8 +lon_0=0 +k_0=0.99987742 +x_0=600000 +y_0=2200000 +a=6378249.2 +b=6356515 +towgs84=-168,-60,320,0,0,0,0 +pm=paris +units=m +no_defs"),r.default.defs["EPSG:2975"]||(0,r.default).defs("EPSG:2975","+proj=utm +zone=40 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:4467"]||(0,r.default).defs("EPSG:4467","+proj=utm +zone=21 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:4559"]||(0,r.default).defs("EPSG:4559","+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:5490"]||(0,r.default).defs("EPSG:5490","+proj=utm +zone=20 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:2972"]||(0,r.default).defs("EPSG:2972","+proj=utm +zone=22 +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),r.default.defs["EPSG:EPSG:4471"]||(0,r.default).defs("EPSG:4471","+proj=utm +zone=38 +south +ellps=GRS80 +towgs84=0,0,0,0,0,0,0 +units=m +no_defs"),(0,o.register)(r.default);class g extends a.default{constructor(t){let e=(t=t||{}).strategy||h.bbox;if(t.tile_zoom_level){let i=(0,c.createXYZ)({minZoom:t.tile_zoom_level,maxZoom:t.tile_zoom_level,tileSize:t.tileSize||256});e=(0,h.tile)(i)}super({strategy:e,attributions:t.attribution||"Espace Collaboratif",logo:t.logo,useSpatialIndex:!0,wrapX:t.wrapX}),this.tileloading_=0,this.table_=t,this.maxFeatures_=t.maxFeatures||5e3,this._outputformat=t.outputFormat||"JSON";let i=this.table_.columns[this.table_.geometry_name];i=i?i.crs:"IGNF:LAMB93",this.srsName_=i||"IGNF:LAMB93",r.default.defs[this.srsName_]||console.error("PROJECTION INCONNUE",this.srsName_),this.featureFilter_=t.filter||{},this.table_.columns.detruit?this.featureFilter_={detruit:!1}:this.table_.columns.gcms_detruit&&(this.featureFilter_={gcms_detruit:!1}),t.tile_zoom_level&&(this.tiled_=!0,this.maxReload_=t.maxReload),this._formatWKT=new l.default,this.setLoader(this.loaderFn_)}setLoader(t){this._auth=(0,p.getAuth)(),this._auth&&this.table_.tile_zoom_level&&(super.setLoader(t||this.loaderFn_),this.refresh())}}g.prototype.getWFSParam=function(t,e){let i=(0,u.transformExtent)(t,e,this.srsName_);return{service:"WFS",request:"GetFeature",outputFormat:this._outputformat||"JSON",typeName:this.table_.name,bbox:i.join(","),filter:JSON.stringify(this.featureFilter_),maxFeatures:this.maxFeatures_,version:"1.1.0"}},g.prototype._readFeatures=function(t,e){let i;"string"==typeof t&&(t=JSON.parse(t)),e=e||"EPSG:3857";let r=[],o=this.table_.geometry_name;for(var n=new l.default,a=/([-+]?(\d*[.])?\d+) ([-+]?(\d*[.])?\d+) ([-+]?(\d*[.])?\d+)/g,h=0;h<t.length;h++){var u=t[h][o];if(u.type){var c=(0,f.ol_geom_createFromType)(u.type,u.coordinates);c.transform(this.srsName_,e),i=new s.default(c)}else{u=u.replace(a,"$1 $3");try{i=n.readFeature(u,{dataProjection:this.srsName_,featureProjection:e})}catch(e){console.error("[BAD FORMAT] error line: ",h,t[h]);continue}}let l=t[h];delete l[o],i.setProperties(l,!0),r.push(i)}return r},g.prototype.findFeature_=function(t){let e=this.table_.id_name,i=t.get(e);if(this.tiled_){var r=t.getGeometry().getFirstCoordinate();if(function(r){for(let o=0;o<r.length;o++)if(r[o].get(e)===i)return t=r[o],!0;return!1}(this.getFeaturesInExtent([r[0]-.1,r[1]-.1,r[0]+.1,r[1]+.1])))return null}return t},g.prototype.reload=function(){this.refresh(),this.dispatchEvent({type:"reload",maxreload:this.maxReload_})},g.prototype.loaderFn_=function(t,e,i){let o=this;this.projection_=i,r.default.defs[this.srsName_]&&(this.maxReload_&&1===this.tileloading_&&this.getFeatures().length>this.maxReload_&&this.reload(),this.dispatchEvent({type:"loadstart",remains:++this.tileloading_}),(0,d.default).get({url:this.table_.wfs,auth:this._auth,data:this.getWFSParam(t,i),options:{},success:function(t){let e=[];o._readFeatures(t,i).forEach(t=>{let i=o.findFeature_(t);i&&e.push(i)}),o.tiled_||o.clear(),e.length&&o.addFeatures(e),o.dispatchEvent({type:"loadend",remains:--o.tileloading_}),t.length==o.maxFeatures_&&o.dispatchEvent({type:"overload"})},error:t=>{var e;"abort"!=(e="error")?o.dispatchEvent({type:"loadend",error:t.message,status:e,remains:--o.tileloading_}):o.dispatchEvent({type:"loadend",remains:--o.tileloading_})}}))};var m=g}),a("cG2f3",function(t,i){e(t.exports,"default",()=>d);var r=n("fVhdY"),o=n("7J5S7"),a=n("gdtqa"),s=n("gstUr"),l=n("3YN4r"),h=n("dLS86"),u=n("9ItUw"),c=n("cnmDo"),f=n("guiH1");r.default.defaultDatum="WGS84",r.default.Proj=o.default,r.default.WGS84=new r.default.Proj("WGS84"),r.default.Point=a.default,r.default.toPoint=s.default,r.default.defs=l.default,r.default.nadgrid=h.default,r.default.transform=u.default,r.default.mgrs=c.default,r.default.version="__VERSION__",(0,f.default)(r.default);var d=r.default}),a("fVhdY",function(t,i){e(t.exports,"default",()=>h);var r=n("7J5S7"),o=n("9ItUw"),a=(0,r.default)("WGS84");function s(t,e,i,r){var n,a,s;return Array.isArray(i)?(n=(0,o.default)(t,e,i,r)||{x:NaN,y:NaN},i.length>2)?(void 0===t.name||"geocent"!==t.name)&&(void 0===e.name||"geocent"!==e.name)?[n.x,n.y].concat(i.splice(2)):"number"==typeof n.z?[n.x,n.y,n.z].concat(i.splice(3)):[n.x,n.y,i[2]].concat(i.splice(3)):[n.x,n.y]:(a=(0,o.default)(t,e,i,r),2===(s=Object.keys(i)).length||s.forEach(function(r){if(void 0!==t.name&&"geocent"===t.name||void 0!==e.name&&"geocent"===e.name){if("x"===r||"y"===r||"z"===r)return}else if("x"===r||"y"===r)return;a[r]=i[r]}),a)}function l(t){return t instanceof r.default?t:t.oProj?t.oProj:(0,r.default)(t)}var h=function(t,e,i){t=l(t);var r,o=!1;return(void 0===e?(e=t,t=a,o=!0):(void 0!==e.x||Array.isArray(e))&&(i=e,e=t,t=a,o=!0),e=l(e),i)?s(t,e,i):(r={forward:function(i,r){return s(t,e,i,r)},inverse:function(i,r){return s(e,t,i,r)}},o&&(r.oProj=e),r)}}),a("7J5S7",function(t,i){e(t.exports,"default",()=>d);var r=n("7QHWi"),o=n("cGnMA"),a=n("2Ggeo"),s=n("02BW5"),l=n("lG5ev"),h=n("5GO2w"),u=n("et3gj"),c=n("dLS86");function f(t,e){if(!(this instanceof f))return new f(t);e=e||function(t){if(t)throw t};var i=(0,r.default)(t);if("object"!=typeof i){e(t);return}var n=f.projections.get(i.projName);if(!n){e(t);return}if(i.datumCode&&"none"!==i.datumCode){var a=(0,u.default)(l.default,i.datumCode);a&&(i.datum_params=i.datum_params||(a.towgs84?a.towgs84.split(","):null),i.ellps=a.ellipse,i.datumName=a.datumName?a.datumName:i.datumCode)}i.k0=i.k0||1,i.axis=i.axis||"enu",i.ellps=i.ellps||"wgs84",i.lat1=i.lat1||i.lat0;var d=(0,s.sphere)(i.a,i.b,i.rf,i.ellps,i.sphere),p=(0,s.eccentricity)(d.a,d.b,d.rf,i.R_A),g=(0,c.getNadgrids)(i.nadgrids),m=i.datum||(0,h.default)(i.datumCode,i.datum_params,d.a,d.b,p.es,p.ep2,g);(0,o.default)(this,i),(0,o.default)(this,n),this.a=d.a,this.b=d.b,this.rf=d.rf,this.sphere=d.sphere,this.es=p.es,this.e=p.e,this.ep2=p.ep2,this.datum=m,this.init(),e(null,this)}f.projections=a.default,f.projections.start();var d=f}),a("7QHWi",function(t,i){e(t.exports,"default",()=>u);var r=n("3YN4r"),o=n("fffKN"),a=n("6fhwX"),s=n("et3gj"),l=["PROJECTEDCRS","PROJCRS","GEOGCS","GEOCCS","PROJCS","LOCAL_CS","GEODCRS","GEODETICCRS","GEODETICDATUM","ENGCRS","ENGINEERINGCRS"],h=["3857","900913","3785","102113"],u=function(t){if("string"!=typeof t)return t;if(t in r.default)return r.default[t];if(l.some(function(e){return t.indexOf(e)>-1})){var e=(0,o.default)(t);if(function(t){var e=(0,s.default)(t,"authority");if(e){var i=(0,s.default)(e,"epsg");return i&&h.indexOf(i)>-1}}(e))return r.default["EPSG:3857"];var i=function(t){var e=(0,s.default)(t,"extension");if(e)return(0,s.default)(e,"proj4")}(e);return i?(0,a.default)(i):e}if("+"===t[0])return(0,a.default)(t)}}),a("3YN4r",function(t,i){e(t.exports,"default",()=>l);var r=n("B0lHT"),o=n("6fhwX"),a=n("fffKN");function s(t){var e=this;if(2==arguments.length){var i=arguments[1];"string"==typeof i?"+"===i.charAt(0)?s[t]=(0,o.default)(arguments[1]):s[t]=(0,a.default)(arguments[1]):s[t]=i}else if(1==arguments.length){if(Array.isArray(t))return t.map(function(t){Array.isArray(t)?s.apply(e,t):s(t)});if("string"==typeof t){if(t in s)return s[t]}else"EPSG"in t?s["EPSG:"+t.EPSG]=t:"ESRI"in t?s["ESRI:"+t.ESRI]=t:"IAU2000"in t?s["IAU2000:"+t.IAU2000]=t:console.log(t);return}}(0,r.default)(s);var l=s}),a("B0lHT",function(t,i){e(t.exports,"default",()=>r);function r(t){t("EPSG:4326","+title=WGS 84 (long/lat) +proj=longlat +ellps=WGS84 +datum=WGS84 +units=degrees"),t("EPSG:4269","+title=NAD83 (long/lat) +proj=longlat +a=6378137.0 +b=6356752.31414036 +ellps=GRS80 +datum=NAD83 +units=degrees"),t("EPSG:3857","+title=WGS 84 / Pseudo-Mercator +proj=merc +a=6378137 +b=6378137 +lat_ts=0.0 +lon_0=0.0 +x_0=0.0 +y_0=0 +k=1.0 +units=m +nadgrids=@null +no_defs"),t.WGS84=t["EPSG:4326"],t["EPSG:3785"]=t["EPSG:3857"],t.GOOGLE=t["EPSG:3857"],t["EPSG:900913"]=t["EPSG:3857"],t["EPSG:102113"]=t["EPSG:3857"]}}),a("6fhwX",function(t,i){e(t.exports,"default",()=>l);var r=n("7M1Nv"),o=n("caeKH"),a=n("giYbV"),s=n("et3gj");function l(t){var e,i,n,l={},h=t.split("+").map(function(t){return t.trim()}).filter(function(t){return t}).reduce(function(t,e){var i=e.split("=");return i.push(!0),t[i[0].toLowerCase()]=i[1],t},{}),u={proj:"projName",datum:"datumCode",rf:function(t){l.rf=parseFloat(t)},lat_0:function(t){l.lat0=t*r.D2R},lat_1:function(t){l.lat1=t*r.D2R},lat_2:function(t){l.lat2=t*r.D2R},lat_ts:function(t){l.lat_ts=t*r.D2R},lon_0:function(t){l.long0=t*r.D2R},lon_1:function(t){l.long1=t*r.D2R},lon_2:function(t){l.long2=t*r.D2R},alpha:function(t){l.alpha=parseFloat(t)*r.D2R},gamma:function(t){l.rectified_grid_angle=parseFloat(t)},lonc:function(t){l.longc=t*r.D2R},x_0:function(t){l.x0=parseFloat(t)},y_0:function(t){l.y0=parseFloat(t)},k_0:function(t){l.k0=parseFloat(t)},k:function(t){l.k0=parseFloat(t)},a:function(t){l.a=parseFloat(t)},b:function(t){l.b=parseFloat(t)},r_a:function(){l.R_A=!0},zone:function(t){l.zone=parseInt(t,10)},south:function(){l.utmSouth=!0},towgs84:function(t){l.datum_params=t.split(",").map(function(t){return parseFloat(t)})},to_meter:function(t){l.to_meter=parseFloat(t)},units:function(t){l.units=t;var e=(0,s.default)(a.default,t);e&&(l.to_meter=e.to_meter)},from_greenwich:function(t){l.from_greenwich=t*r.D2R},pm:function(t){var e=(0,s.default)(o.default,t);l.from_greenwich=(e||parseFloat(t))*r.D2R},nadgrids:function(t){"@null"===t?l.datumCode="none":l.nadgrids=t},axis:function(t){var e="ewnsud";3===t.length&&-1!==e.indexOf(t.substr(0,1))&&-1!==e.indexOf(t.substr(1,1))&&-1!==e.indexOf(t.substr(2,1))&&(l.axis=t)},approx:function(){l.approx=!0}};for(e in h)i=h[e],e in u?"function"==typeof(n=u[e])?n(i):l[n]=i:l[e]=i;return"string"==typeof l.datumCode&&"WGS84"!==l.datumCode&&(l.datumCode=l.datumCode.toLowerCase()),l}}),a("7M1Nv",function(t,i){e(t.exports,"PJD_3PARAM",()=>r),e(t.exports,"PJD_7PARAM",()=>o),e(t.exports,"PJD_GRIDSHIFT",()=>n),e(t.exports,"PJD_WGS84",()=>a),e(t.exports,"PJD_NODATUM",()=>s),e(t.exports,"SRS_WGS84_SEMIMAJOR",()=>l),e(t.exports,"SRS_WGS84_SEMIMINOR",()=>h),e(t.exports,"SRS_WGS84_ESQUARED",()=>u),e(t.exports,"SEC_TO_RAD",()=>c),e(t.exports,"HALF_PI",()=>f),e(t.exports,"SIXTH",()=>d),e(t.exports,"RA4",()=>p),e(t.exports,"RA6",()=>g),e(t.exports,"EPSLN",()=>m),e(t.exports,"D2R",()=>y),e(t.exports,"R2D",()=>x),e(t.exports,"FORTPI",()=>v),e(t.exports,"TWO_PI",()=>b),e(t.exports,"SPI",()=>w);var r=1,o=2,n=3,a=4,s=5,l=6378137,h=6356752.314,u=.0066943799901413165,c=484813681109536e-20,f=Math.PI/2,d=.16666666666666666,p=.04722222222222222,g=.022156084656084655,m=1e-10,y=.017453292519943295,x=57.29577951308232,v=Math.PI/4,b=2*Math.PI,w=3.14159265359}),a("caeKH",function(t,i){e(t.exports,"default",()=>r);var r={};r.greenwich=0,r.lisbon=-9.131906111111,r.paris=2.337229166667,r.bogota=-74.080916666667,r.madrid=-3.687938888889,r.rome=12.452333333333,r.bern=7.439583333333,r.jakarta=106.807719444444,r.ferro=-17.666666666667,r.brussels=4.367975,r.stockholm=18.058277777778,r.athens=23.7163375,r.oslo=10.722916666667}),a("giYbV",function(t,i){e(t.exports,"default",()=>r);var r={ft:{to_meter:.3048},"us-ft":{to_meter:1200/3937}}}),a("et3gj",function(t,i){e(t.exports,"default",()=>o);var r=/[\s_\-\/\(\)]/g;function o(t,e){if(t[e])return t[e];for(var i,o=Object.keys(t),n=e.toLowerCase().replace(r,""),a=-1;++a<o.length;)if((i=o[a]).toLowerCase().replace(r,"")===n)return t[i]}}),a("fffKN",function(t,i){e(t.exports,"default",()=>s);var r=n("877Zt"),o=n("cUVW6");function a(t){return .017453292519943295*t}function s(t){var e=(0,r.default)(t),i=e.shift(),n=e.shift();e.unshift(["name",n]),e.unshift(["type",i]);var s={};return(0,o.sExpr)(e,s),function(t){if("GEOGCS"===t.type?t.projName="longlat":"LOCAL_CS"===t.type?(t.projName="identity",t.local=!0):"object"==typeof t.PROJECTION?t.projName=Object.keys(t.PROJECTION)[0]:t.projName=t.PROJECTION,t.AXIS){for(var e="",i=0,r=t.AXIS.length;i<r;++i){var o=[t.AXIS[i][0].toLowerCase(),t.AXIS[i][1].toLowerCase()];-1!==o[0].indexOf("north")||("y"===o[0]||"lat"===o[0])&&"north"===o[1]?e+="n":-1!==o[0].indexOf("south")||("y"===o[0]||"lat"===o[0])&&"south"===o[1]?e+="s":-1!==o[0].indexOf("east")||("x"===o[0]||"lon"===o[0])&&"east"===o[1]?e+="e":(-1!==o[0].indexOf("west")||("x"===o[0]||"lon"===o[0])&&"west"===o[1])&&(e+="w")}2===e.length&&(e+="u"),3===e.length&&(t.axis=e)}t.UNIT&&(t.units=t.UNIT.name.toLowerCase(),"metre"===t.units&&(t.units="meter"),t.UNIT.convert&&("GEOGCS"===t.type?t.DATUM&&t.DATUM.SPHEROID&&(t.to_meter=t.UNIT.convert*t.DATUM.SPHEROID.a):t.to_meter=t.UNIT.convert));var n=t.GEOGCS;function s(e){return e*(t.to_meter||1)}"GEOGCS"===t.type&&(n=t),n&&(n.DATUM?t.datumCode=n.DATUM.name.toLowerCase():t.datumCode=n.name.toLowerCase(),"d_"===t.datumCode.slice(0,2)&&(t.datumCode=t.datumCode.slice(2)),("new_zealand_geodetic_datum_1949"===t.datumCode||"new_zealand_1949"===t.datumCode)&&(t.datumCode="nzgd49"),("wgs_1984"===t.datumCode||"world_geodetic_system_1984"===t.datumCode)&&("Mercator_Auxiliary_Sphere"===t.PROJECTION&&(t.sphere=!0),t.datumCode="wgs84"),"_ferro"===t.datumCode.slice(-6)&&(t.datumCode=t.datumCode.slice(0,-6)),"_jakarta"===t.datumCode.slice(-8)&&(t.datumCode=t.datumCode.slice(0,-8)),~t.datumCode.indexOf("belge")&&(t.datumCode="rnb72"),n.DATUM&&n.DATUM.SPHEROID&&(t.ellps=n.DATUM.SPHEROID.name.replace("_19","").replace(/[Cc]larke\_18/,"clrk"),"international"===t.ellps.toLowerCase().slice(0,13)&&(t.ellps="intl"),t.a=n.DATUM.SPHEROID.a,t.rf=parseFloat(n.DATUM.SPHEROID.rf,10)),n.DATUM&&n.DATUM.TOWGS84&&(t.datum_params=n.DATUM.TOWGS84),~t.datumCode.indexOf("osgb_1936")&&(t.datumCode="osgb36"),~t.datumCode.indexOf("osni_1952")&&(t.datumCode="osni52"),(~t.datumCode.indexOf("tm65")||~t.datumCode.indexOf("geodetic_datum_of_1965"))&&(t.datumCode="ire65"),"ch1903+"===t.datumCode&&(t.datumCode="ch1903"),~t.datumCode.indexOf("israel")&&(t.datumCode="isr93")),t.b&&!isFinite(t.b)&&(t.b=t.a),[["standard_parallel_1","Standard_Parallel_1"],["standard_parallel_1","Latitude of 1st standard parallel"],["standard_parallel_2","Standard_Parallel_2"],["standard_parallel_2","Latitude of 2nd standard parallel"],["false_easting","False_Easting"],["false_easting","False easting"],["false-easting","Easting at false origin"],["false_northing","False_Northing"],["false_northing","False northing"],["false_northing","Northing at false origin"],["central_meridian","Central_Meridian"],["central_meridian","Longitude of natural origin"],["central_meridian","Longitude of false origin"],["latitude_of_origin","Latitude_Of_Origin"],["latitude_of_origin","Central_Parallel"],["latitude_of_origin","Latitude of natural origin"],["latitude_of_origin","Latitude of false origin"],["scale_factor","Scale_Factor"],["k0","scale_factor"],["latitude_of_center","Latitude_Of_Center"],["latitude_of_center","Latitude_of_center"],["lat0","latitude_of_center",a],["longitude_of_center","Longitude_Of_Center"],["longitude_of_center","Longitude_of_center"],["longc","longitude_of_center",a],["x0","false_easting",s],["y0","false_northing",s],["long0","central_meridian",a],["lat0","latitude_of_origin",a],["lat0","standard_parallel_1",a],["lat1","standard_parallel_1",a],["lat2","standard_parallel_2",a],["azimuth","Azimuth"],["alpha","azimuth",a],["srsCode","name"]].forEach(function(e){var i,r;return i=e[0],r=e[1],void(!(i in t)&&r in t&&(t[i]=t[r],3===e.length&&(t[i]=e[2](t[i]))))}),!t.long0&&t.longc&&("Albers_Conic_Equal_Area"===t.projName||"Lambert_Azimuthal_Equal_Area"===t.projName)&&(t.long0=t.longc),!t.lat_ts&&t.lat1&&("Stereographic_South_Pole"===t.projName||"Polar Stereographic (variant B)"===t.projName)?(t.lat0=a(t.lat1>0?90:-90),t.lat_ts=t.lat1):!t.lat_ts&&t.lat0&&"Polar_Stereographic"===t.projName&&(t.lat_ts=t.lat0,t.lat0=a(t.lat0>0?90:-90))}(s),s}}),a("877Zt",function(t,i){e(t.exports,"default",()=>r);var r=function(t){return new h(t).output()},o=/\s/,n=/[A-Za-z]/,a=/[A-Za-z84_]/,s=/[,\]]/,l=/[\d\.E\-\+]/;function h(t){if("string"!=typeof t)throw Error("not a string");this.text=t.trim(),this.level=0,this.place=0,this.root=null,this.stack=[],this.currentObject=null,this.state=1}h.prototype.readCharicter=function(){var t=this.text[this.place++];if(4!==this.state)for(;o.test(t);){if(this.place>=this.text.length)return;t=this.text[this.place++]}switch(this.state){case 1:return this.neutral(t);case 2:return this.keyword(t);case 4:return this.quoted(t);case 5:return this.afterquote(t);case 3:return this.number(t);case -1:return}},h.prototype.afterquote=function(t){if('"'===t){this.word+='"',this.state=4;return}if(s.test(t)){this.word=this.word.trim(),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in afterquote yet, index '+this.place)},h.prototype.afterItem=function(t){if(","===t){null!==this.word&&this.currentObject.push(this.word),this.word=null,this.state=1;return}if("]"===t){this.level--,null!==this.word&&(this.currentObject.push(this.word),this.word=null),this.state=1,this.currentObject=this.stack.pop(),this.currentObject||(this.state=-1);return}},h.prototype.number=function(t){if(l.test(t)){this.word+=t;return}if(s.test(t)){this.word=parseFloat(this.word),this.afterItem(t);return}throw Error("havn't handled \""+t+'" in number yet, index '+this.place)},h.prototype.quoted=function(t){if('"'===t){this.state=5;return}this.word+=t},h.prototype.keyword=function(t){if(a.test(t)){this.word+=t;return}if("["===t){var e=[];e.push(this.word),this.level++,null===this.root?this.root=e:this.currentObject.push(e),this.stack.push(this.currentObject),this.currentObject=e,this.state=1;return}if(s.test(t)){this.afterItem(t);return}throw Error("havn't handled \""+t+'" in keyword yet, index '+this.place)},h.prototype.neutral=function(t){if(n.test(t)){this.word=t,this.state=2;return}if('"'===t){this.word="",this.state=4;return}if(l.test(t)){this.word=t,this.state=3;return}if(s.test(t)){this.afterItem(t);return}throw Error("havn't handled \""+t+'" in neutral yet, index '+this.place)},h.prototype.output=function(){for(;this.place<this.text.length;)this.readCharicter();if(-1===this.state)return this.root;throw Error('unable to parse string "'+this.text+'". State is '+this.state)}}),a("cUVW6",function(t,i){function r(t,e,i){Array.isArray(e)&&(i.unshift(e),e=null);var r=e?{}:t,n=i.reduce(function(t,e){return o(e,t),t},r);e&&(t[e]=n)}function o(t,e){if(!Array.isArray(t)){e[t]=!0;return}var i,n=t.shift();if("PARAMETER"===n&&(n=t.shift()),1===t.length){if(Array.isArray(t[0])){e[n]={},o(t[0],e[n]);return}e[n]=t[0];return}if(!t.length){e[n]=!0;return}if("TOWGS84"===n){e[n]=t;return}if("AXIS"===n){n in e||(e[n]=[]),e[n].push(t);return}switch(Array.isArray(n)||(e[n]={}),n){case"UNIT":case"PRIMEM":case"VERT_DATUM":e[n]={name:t[0].toLowerCase(),convert:t[1]},3===t.length&&o(t[2],e[n]);return;case"SPHEROID":case"ELLIPSOID":e[n]={name:t[0],a:t[1],rf:t[2]},4===t.length&&o(t[3],e[n]);return;case"PROJECTEDCRS":case"PROJCRS":case"GEOGCS":case"GEOCCS":case"PROJCS":case"LOCAL_CS":case"GEODCRS":case"GEODETICCRS":case"GEODETICDATUM":case"EDATUM":case"ENGINEERINGDATUM":case"VERT_CS":case"VERTCRS":case"VERTICALCRS":case"COMPD_CS":case"COMPOUNDCRS":case"ENGINEERINGCRS":case"ENGCRS":case"FITTED_CS":case"LOCAL_DATUM":case"DATUM":t[0]=["name",t[0]],r(e,n,t);return;default:for(i=-1;++i<t.length;)if(!Array.isArray(t[i]))return o(t,e[n]);return r(e,n,t)}}e(t.exports,"sExpr",()=>o)}),a("cGnMA",function(t,i){e(t.exports,"default",()=>r);function r(t,e){var i,r;if(t=t||{},!e)return t;for(r in e)void 0!==(i=e[r])&&(t[r]=i);return t}}),a("2Ggeo",function(t,i){e(t.exports,"default",()=>u);var r=n("39V3b"),o=n("jDVoF"),a=[r.default,o.default],s={},l=[];function h(t,e){var i=l.length;return t.names?(l[i]=t,t.names.forEach(function(t){s[t.toLowerCase()]=i}),this):(console.log(e),!0)}var u={start:function(){a.forEach(h)},add:h,get:function(t){if(!t)return!1;var e=t.toLowerCase();if(void 0!==s[e]&&l[s[e]])return l[s[e]]}}}),a("39V3b",function(t,i){e(t.exports,"default",()=>h);var r=n("1gqnK"),o=n("kEf05"),a=n("8RM2D"),s=n("7qdiL"),l=n("7M1Nv"),h={init:function(){var t=this.b/this.a;this.es=1-t*t,"x0"in this||(this.x0=0),"y0"in this||(this.y0=0),this.e=Math.sqrt(this.es),this.lat_ts?this.sphere?this.k0=Math.cos(this.lat_ts):this.k0=(0,r.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)):this.k0||(this.k?this.k0=this.k:this.k0=1)},forward:function(t){var e,i,r=t.x,n=t.y;if(n*l.R2D>90&&n*l.R2D<-90&&r*l.R2D>180&&r*l.R2D<-180||Math.abs(Math.abs(n)-l.HALF_PI)<=l.EPSLN)return null;if(this.sphere)e=this.x0+this.a*this.k0*(0,o.default)(r-this.long0),i=this.y0+this.a*this.k0*Math.log(Math.tan(l.FORTPI+.5*n));else{var s=(0,a.default)(this.e,n,Math.sin(n));e=this.x0+this.a*this.k0*(0,o.default)(r-this.long0),i=this.y0-this.a*this.k0*Math.log(s)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,r=t.x-this.x0,n=t.y-this.y0;if(this.sphere)i=l.HALF_PI-2*Math.atan(Math.exp(-n/(this.a*this.k0)));else{var a=Math.exp(-n/(this.a*this.k0));if(-9999===(i=(0,s.default)(this.e,a)))return null}return e=(0,o.default)(this.long0+r/(this.a*this.k0)),t.x=e,t.y=i,t},names:["Mercator","Popular Visualisation Pseudo Mercator","Mercator_1SP","Mercator_Auxiliary_Sphere","merc"]}}),a("1gqnK",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i){var r=t*e;return i/Math.sqrt(1-r*r)}}),a("kEf05",function(t,i){e(t.exports,"default",()=>a);var r=n("7M1Nv"),o=n("SsFAj");function a(t){return Math.abs(t)<=r.SPI?t:t-(0,o.default)(t)*r.TWO_PI}}),a("SsFAj",function(t,i){e(t.exports,"default",()=>r);function r(t){return t<0?-1:1}}),a("8RM2D",function(t,i){e(t.exports,"default",()=>o);var r=n("7M1Nv");function o(t,e,i){var o=t*i;return o=Math.pow((1-o)/(1+o),.5*t),Math.tan(.5*(r.HALF_PI-e))/o}}),a("7qdiL",function(t,i){e(t.exports,"default",()=>o);var r=n("7M1Nv");function o(t,e){for(var i,o,n=.5*t,a=r.HALF_PI-2*Math.atan(e),s=0;s<=15;s++)if(i=t*Math.sin(a),o=r.HALF_PI-2*Math.atan(e*Math.pow((1-i)/(1+i),n))-a,a+=o,1e-10>=Math.abs(o))return a;return -9999}}),a("jDVoF",function(t,i){function r(t){return t}e(t.exports,"default",()=>o);var o={init:function(){},forward:r,inverse:r,names:["longlat","identity"]}}),a("02BW5",function(t,i){e(t.exports,"eccentricity",()=>s),e(t.exports,"sphere",()=>l);var r=n("7M1Nv"),o=n("lXEbW"),a=n("et3gj");function s(t,e,i,o){var n=t*t,a=e*e,s=(n-a)/n,l=0;return o?(t*=1-s*(r.SIXTH+s*(r.RA4+s*r.RA6)),n=t*t,s=0):l=Math.sqrt(s),{es:s,e:l,ep2:(n-a)/a}}function l(t,e,i,n,s){if(!t){var l=(0,a.default)(o.default,n);l||(l=o.WGS84),t=l.a,e=l.b,i=l.rf}return i&&!e&&(e=(1-1/i)*t),(0===i||Math.abs(t-e)<r.EPSLN)&&(s=!0,e=t),{a:t,b:e,rf:i,sphere:s}}}),a("lXEbW",function(t,i){e(t.exports,"default",()=>r),e(t.exports,"WGS84",()=>o);var r={};r.MERIT={a:6378137,rf:298.257,ellipseName:"MERIT 1983"},r.SGS85={a:6378136,rf:298.257,ellipseName:"Soviet Geodetic System 85"},r.GRS80={a:6378137,rf:298.257222101,ellipseName:"GRS 1980(IUGG, 1980)"},r.IAU76={a:6378140,rf:298.257,ellipseName:"IAU 1976"},r.airy={a:6377563.396,b:6356256.91,ellipseName:"Airy 1830"},r.APL4={a:6378137,rf:298.25,ellipseName:"Appl. Physics. 1965"},r.NWL9D={a:6378145,rf:298.25,ellipseName:"Naval Weapons Lab., 1965"},r.mod_airy={a:6377340.189,b:6356034.446,ellipseName:"Modified Airy"},r.andrae={a:6377104.43,rf:300,ellipseName:"Andrae 1876 (Den., Iclnd.)"},r.aust_SA={a:6378160,rf:298.25,ellipseName:"Australian Natl & S. Amer. 1969"},r.GRS67={a:6378160,rf:298.247167427,ellipseName:"GRS 67(IUGG 1967)"},r.bessel={a:6377397.155,rf:299.1528128,ellipseName:"Bessel 1841"},r.bess_nam={a:6377483.865,rf:299.1528128,ellipseName:"Bessel 1841 (Namibia)"},r.clrk66={a:6378206.4,b:6356583.8,ellipseName:"Clarke 1866"},r.clrk80={a:6378249.145,rf:293.4663,ellipseName:"Clarke 1880 mod."},r.clrk80ign={a:6378249.2,b:6356515,rf:293.4660213,ellipseName:"Clarke 1880 (IGN)"},r.clrk58={a:6378293.645208759,rf:294.2606763692654,ellipseName:"Clarke 1858"},r.CPM={a:6375738.7,rf:334.29,ellipseName:"Comm. des Poids et Mesures 1799"},r.delmbr={a:6376428,rf:311.5,ellipseName:"Delambre 1810 (Belgium)"},r.engelis={a:6378136.05,rf:298.2566,ellipseName:"Engelis 1985"},r.evrst30={a:6377276.345,rf:300.8017,ellipseName:"Everest 1830"},r.evrst48={a:6377304.063,rf:300.8017,ellipseName:"Everest 1948"},r.evrst56={a:6377301.243,rf:300.8017,ellipseName:"Everest 1956"},r.evrst69={a:6377295.664,rf:300.8017,ellipseName:"Everest 1969"},r.evrstSS={a:6377298.556,rf:300.8017,ellipseName:"Everest (Sabah & Sarawak)"},r.fschr60={a:6378166,rf:298.3,ellipseName:"Fischer (Mercury Datum) 1960"},r.fschr60m={a:6378155,rf:298.3,ellipseName:"Fischer 1960"},r.fschr68={a:6378150,rf:298.3,ellipseName:"Fischer 1968"},r.helmert={a:6378200,rf:298.3,ellipseName:"Helmert 1906"},r.hough={a:6378270,rf:297,ellipseName:"Hough"},r.intl={a:6378388,rf:297,ellipseName:"International 1909 (Hayford)"},r.kaula={a:6378163,rf:298.24,ellipseName:"Kaula 1961"},r.lerch={a:6378139,rf:298.257,ellipseName:"Lerch 1979"},r.mprts={a:6397300,rf:191,ellipseName:"Maupertius 1738"},r.new_intl={a:6378157.5,b:6356772.2,ellipseName:"New International 1967"},r.plessis={a:6376523,rf:6355863,ellipseName:"Plessis 1817 (France)"},r.krass={a:6378245,rf:298.3,ellipseName:"Krassovsky, 1942"},r.SEasia={a:6378155,b:6356773.3205,ellipseName:"Southeast Asia"},r.walbeck={a:6376896,b:6355834.8467,ellipseName:"Walbeck"},r.WGS60={a:6378165,rf:298.3,ellipseName:"WGS 60"},r.WGS66={a:6378145,rf:298.25,ellipseName:"WGS 66"},r.WGS7={a:6378135,rf:298.26,ellipseName:"WGS 72"};var o=r.WGS84={a:6378137,rf:298.257223563,ellipseName:"WGS 84"};r.sphere={a:6370997,b:6370997,ellipseName:"Normal Sphere (r=6370997)"}}),a("lG5ev",function(t,i){e(t.exports,"default",()=>r);var r={};r.wgs84={towgs84:"0,0,0",ellipse:"WGS84",datumName:"WGS84"},r.ch1903={towgs84:"674.374,15.056,405.346",ellipse:"bessel",datumName:"swiss"},r.ggrs87={towgs84:"-199.87,74.79,246.62",ellipse:"GRS80",datumName:"Greek_Geodetic_Reference_System_1987"},r.nad83={towgs84:"0,0,0",ellipse:"GRS80",datumName:"North_American_Datum_1983"},r.nad27={nadgrids:"@conus,@alaska,@ntv2_0.gsb,@ntv1_can.dat",ellipse:"clrk66",datumName:"North_American_Datum_1927"},r.potsdam={towgs84:"598.1,73.7,418.2,0.202,0.045,-2.455,6.7",ellipse:"bessel",datumName:"Potsdam Rauenberg 1950 DHDN"},r.carthage={towgs84:"-263.0,6.0,431.0",ellipse:"clark80",datumName:"Carthage 1934 Tunisia"},r.hermannskogel={towgs84:"577.326,90.129,463.919,5.137,1.474,5.297,2.4232",ellipse:"bessel",datumName:"Hermannskogel"},r.osni52={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"airy",datumName:"Irish National"},r.ire65={towgs84:"482.530,-130.596,564.557,-1.042,-0.214,-0.631,8.15",ellipse:"mod_airy",datumName:"Ireland 1965"},r.rassadiran={towgs84:"-133.63,-157.5,-158.62",ellipse:"intl",datumName:"Rassadiran"},r.nzgd49={towgs84:"59.47,-5.04,187.44,0.47,-0.1,1.024,-4.5993",ellipse:"intl",datumName:"New Zealand Geodetic Datum 1949"},r.osgb36={towgs84:"446.448,-125.157,542.060,0.1502,0.2470,0.8421,-20.4894",ellipse:"airy",datumName:"Airy 1830"},r.s_jtsk={towgs84:"589,76,480",ellipse:"bessel",datumName:"S-JTSK (Ferro)"},r.beduaram={towgs84:"-106,-87,188",ellipse:"clrk80",datumName:"Beduaram"},r.gunung_segara={towgs84:"-403,684,41",ellipse:"bessel",datumName:"Gunung Segara Jakarta"},r.rnb72={towgs84:"106.869,-52.2978,103.724,-0.33657,0.456955,-1.84218,1",ellipse:"intl",datumName:"Reseau National Belge 1972"}}),a("5GO2w",function(t,i){e(t.exports,"default",()=>o);var r=n("7M1Nv"),o=function(t,e,i,o,n,a,s){var l={};return void 0===t||"none"===t?l.datum_type=r.PJD_NODATUM:l.datum_type=r.PJD_WGS84,e&&(l.datum_params=e.map(parseFloat),(0!==l.datum_params[0]||0!==l.datum_params[1]||0!==l.datum_params[2])&&(l.datum_type=r.PJD_3PARAM),l.datum_params.length>3&&(0!==l.datum_params[3]||0!==l.datum_params[4]||0!==l.datum_params[5]||0!==l.datum_params[6])&&(l.datum_type=r.PJD_7PARAM,l.datum_params[3]*=r.SEC_TO_RAD,l.datum_params[4]*=r.SEC_TO_RAD,l.datum_params[5]*=r.SEC_TO_RAD,l.datum_params[6]=l.datum_params[6]/1e6+1)),s&&(l.datum_type=r.PJD_GRIDSHIFT,l.grids=s),l.a=i,l.b=o,l.es=n,l.ep2=a,l}}),a("dLS86",function(t,i){e(t.exports,"default",()=>o),e(t.exports,"getNadgrids",()=>n);var r={};function o(t,e){var i,o=new DataView(e),n=11!==o.getInt32(8,!1)&&(11!==o.getInt32(8,!0)&&console.warn("Failed to detect nadgrid endian-ness, defaulting to little-endian"),!0),a={nFields:o.getInt32(8,n),nSubgridFields:o.getInt32(24,n),nSubgrids:o.getInt32(40,n),shiftType:l(o,56,64).trim(),fromSemiMajorAxis:o.getFloat64(120,n),fromSemiMinorAxis:o.getFloat64(136,n),toSemiMajorAxis:o.getFloat64(152,n),toSemiMinorAxis:o.getFloat64(168,n)};a.nSubgrids>1&&console.log("Only single NTv2 subgrids are currently supported, subsequent sub grids are ignored");var h=function(t,e,i){for(var r=[],o=0;o<e.nSubgrids;o++){var n={name:l(t,184,192).trim(),parent:l(t,200,208).trim(),lowerLatitude:t.getFloat64(248,i),upperLatitude:t.getFloat64(264,i),lowerLongitude:t.getFloat64(280,i),upperLongitude:t.getFloat64(296,i),latitudeInterval:t.getFloat64(312,i),longitudeInterval:t.getFloat64(328,i),gridNodeCount:t.getInt32(344,i)},a=function(t,e,i,r){for(var o=[],n=0;n<i.gridNodeCount;n++){var a={latitudeShift:t.getFloat32(352+16*n,r),longitudeShift:t.getFloat32(352+16*n+4,r),latitudeAccuracy:t.getFloat32(352+16*n+8,r),longitudeAccuracy:t.getFloat32(352+16*n+12,r)};o.push(a)}return o}(t,0,n,i),h=Math.round(1+(n.upperLongitude-n.lowerLongitude)/n.longitudeInterval),u=Math.round(1+(n.upperLatitude-n.lowerLatitude)/n.latitudeInterval);r.push({ll:[s(n.lowerLongitude),s(n.lowerLatitude)],del:[s(n.longitudeInterval),s(n.latitudeInterval)],lim:[h,u],count:n.gridNodeCount,cvs:a.map(function(t){return[s(t.longitudeShift),s(t.latitudeShift)]})})}return r}(o,a,n),u={header:a,subgrids:h};return r[t]=u,u}function n(t){return void 0===t?null:t.split(",").map(a)}function a(t){if(0===t.length)return null;var e="@"===t[0];return(e&&(t=t.slice(1)),"null"===t)?{name:"null",mandatory:!e,grid:null,isNull:!0}:{name:t,mandatory:!e,grid:r[t]||null,isNull:!1}}function s(t){return t/3600*Math.PI/180}function l(t,e,i){return String.fromCharCode.apply(null,new Uint8Array(t.buffer.slice(e,i)))}}),a("9ItUw",function(t,i){e(t.exports,"default",()=>function t(e,i,n,u){var c,f,d=void 0!==(n=Array.isArray(n)?(0,l.default)(n):{x:n.x,y:n.y,z:n.z,m:n.m}).z;if((0,h.default)(n),e.datum&&i.datum&&(((c=e).datum.datum_type===r.PJD_3PARAM||c.datum.datum_type===r.PJD_7PARAM||c.datum.datum_type===r.PJD_GRIDSHIFT)&&"WGS84"!==i.datumCode||(i.datum.datum_type===r.PJD_3PARAM||i.datum.datum_type===r.PJD_7PARAM||i.datum.datum_type===r.PJD_GRIDSHIFT)&&"WGS84"!==c.datumCode)&&(n=t(e,f=new s.default("WGS84"),n,u),e=f),u&&"enu"!==e.axis&&(n=(0,a.default)(e,!1,n)),"longlat"===e.projName)n={x:n.x*r.D2R,y:n.y*r.D2R,z:n.z||0};else if(e.to_meter&&(n={x:n.x*e.to_meter,y:n.y*e.to_meter,z:n.z||0}),!(n=e.inverse(n)))return;if(e.from_greenwich&&(n.x+=e.from_greenwich),n=(0,o.default)(e.datum,i.datum,n))return(i.from_greenwich&&(n={x:n.x-i.from_greenwich,y:n.y,z:n.z||0}),"longlat"===i.projName?n={x:n.x*r.R2D,y:n.y*r.R2D,z:n.z||0}:(n=i.forward(n),i.to_meter&&(n={x:n.x/i.to_meter,y:n.y/i.to_meter,z:n.z||0})),u&&"enu"!==i.axis)?(0,a.default)(i,!0,n):(d||delete n.z,n)});var r=n("7M1Nv"),o=n("6k5Uh"),a=n("9in7W"),s=n("7J5S7"),l=n("gstUr"),h=n("hyITn")}),a("6k5Uh",function(t,i){e(t.exports,"default",()=>l);var r=n("7M1Nv"),o=n("cbJeb"),a=n("kEf05");function s(t){return t===r.PJD_3PARAM||t===r.PJD_7PARAM}function l(t,e,i){if((0,o.compareDatums)(t,e)||t.datum_type===r.PJD_NODATUM||e.datum_type===r.PJD_NODATUM)return i;var n=t.a,a=t.es;if(t.datum_type===r.PJD_GRIDSHIFT){if(0!==h(t,!1,i))return;n=r.SRS_WGS84_SEMIMAJOR,a=r.SRS_WGS84_ESQUARED}var l=e.a,u=e.b,c=e.es;if(e.datum_type===r.PJD_GRIDSHIFT&&(l=r.SRS_WGS84_SEMIMAJOR,u=r.SRS_WGS84_SEMIMINOR,c=r.SRS_WGS84_ESQUARED),a===c&&n===l&&!s(t.datum_type)&&!s(e.datum_type)||(i=(0,o.geodeticToGeocentric)(i,a,n),s(t.datum_type)&&(i=(0,o.geocentricToWgs84)(i,t.datum_type,t.datum_params)),s(e.datum_type)&&(i=(0,o.geocentricFromWgs84)(i,e.datum_type,e.datum_params)),i=(0,o.geocentricToGeodetic)(i,c,l,u),e.datum_type!==r.PJD_GRIDSHIFT||0===h(e,!0,i)))return i}function h(t,e,i){if(null===t.grids||0===t.grids.length)return console.log("Grid shift grids not found"),-1;for(var o={x:-i.x,y:i.y},n={x:Number.NaN,y:Number.NaN},s=[],l=0;l<t.grids.length;l++){var h=t.grids[l];if(s.push(h.name),h.isNull){n=o;break}if(h.mandatory,null===h.grid){if(h.mandatory)return console.log("Unable to find mandatory grid '"+h.name+"'"),-1;continue}var c=h.grid.subgrids[0],f=(Math.abs(c.del[1])+Math.abs(c.del[0]))/1e4,d=c.ll[0]-f,p=c.ll[1]-f,g=c.ll[0]+(c.lim[0]-1)*c.del[0]+f,m=c.ll[1]+(c.lim[1]-1)*c.del[1]+f;if(!(p>o.y)&&!(d>o.x)&&!(m<o.y)&&!(g<o.x)&&!isNaN((n=function(t,e,i){var r={x:Number.NaN,y:Number.NaN};if(isNaN(t.x))return r;var o={x:t.x,y:t.y};o.x-=i.ll[0],o.y-=i.ll[1],o.x=(0,a.default)(o.x-Math.PI)+Math.PI;var n=u(o,i);if(e){if(isNaN(n.x))return r;n.x=o.x-n.x,n.y=o.y-n.y;var s,l,h=9;do{if(isNaN((l=u(n,i)).x)){console.log("Inverse grid shift iteration failed, presumably at grid edge.  Using first approximation.");break}s={x:o.x-(l.x+n.x),y:o.y-(l.y+n.y)},n.x+=s.x,n.y+=s.y}while(h--&&Math.abs(s.x)>1e-12&&Math.abs(s.y)>1e-12)if(h<0)return console.log("Inverse grid shift iterator failed to converge."),r;r.x=(0,a.default)(n.x+i.ll[0]),r.y=n.y+i.ll[1]}else isNaN(n.x)||(r.x=t.x+n.x,r.y=t.y+n.y);return r}(o,e,c)).x))break}return isNaN(n.x)?(console.log("Failed to find a grid shift table for location '"+-o.x*r.R2D+" "+o.y*r.R2D+" tried: '"+s+"'"),-1):(i.x=-n.x,i.y=n.y,0)}function u(t,e){var i,r={x:t.x/e.del[0],y:t.y/e.del[1]},o={x:Math.floor(r.x),y:Math.floor(r.y)},n={x:r.x-1*o.x,y:r.y-1*o.y},a={x:Number.NaN,y:Number.NaN};if(o.x<0||o.x>=e.lim[0]||o.y<0||o.y>=e.lim[1])return a;i=o.y*e.lim[0]+o.x;var s={x:e.cvs[i][0],y:e.cvs[i][1]};i++;var l={x:e.cvs[i][0],y:e.cvs[i][1]};i+=e.lim[0];var h={x:e.cvs[i][0],y:e.cvs[i][1]};i--;var u={x:e.cvs[i][0],y:e.cvs[i][1]},c=n.x*n.y,f=n.x*(1-n.y),d=(1-n.x)*(1-n.y),p=(1-n.x)*n.y;return a.x=d*s.x+f*l.x+p*u.x+c*h.x,a.y=d*s.y+f*l.y+p*u.y+c*h.y,a}}),a("cbJeb",function(t,i){e(t.exports,"compareDatums",()=>o),e(t.exports,"geodeticToGeocentric",()=>a),e(t.exports,"geocentricToGeodetic",()=>s),e(t.exports,"geocentricToWgs84",()=>l),e(t.exports,"geocentricFromWgs84",()=>h);var r=n("7M1Nv");function o(t,e){return!(t.datum_type!==e.datum_type||t.a!==e.a||Math.abs(t.es-e.es)>5e-11)&&(t.datum_type===r.PJD_3PARAM?t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]:t.datum_type!==r.PJD_7PARAM||t.datum_params[0]===e.datum_params[0]&&t.datum_params[1]===e.datum_params[1]&&t.datum_params[2]===e.datum_params[2]&&t.datum_params[3]===e.datum_params[3]&&t.datum_params[4]===e.datum_params[4]&&t.datum_params[5]===e.datum_params[5]&&t.datum_params[6]===e.datum_params[6])}function a(t,e,i){var o,n,a,s=t.x,l=t.y,h=t.z?t.z:0;if(l<-r.HALF_PI&&l>-1.001*r.HALF_PI)l=-r.HALF_PI;else if(l>r.HALF_PI&&l<1.001*r.HALF_PI)l=r.HALF_PI;else if(l<-r.HALF_PI)return{x:-1/0,y:-1/0,z:t.z};else if(l>r.HALF_PI)return{x:1/0,y:1/0,z:t.z};return s>Math.PI&&(s-=2*Math.PI),n=Math.sin(l),a=Math.cos(l),{x:((o=i/Math.sqrt(1-n*n*e))+h)*a*Math.cos(s),y:(o+h)*a*Math.sin(s),z:(o*(1-e)+h)*n}}function s(t,e,i,o){var n,a,s,l,h,u,c,f,d,p,g,m,y,x,v,b=1e-12*1e-12,w=t.x,_=t.y,S=t.z?t.z:0;if(n=Math.sqrt(w*w+_*_),a=Math.sqrt(w*w+_*_+S*S),n/i<1e-12){if(x=0,a/i<1e-12)return r.HALF_PI,v=-o,{x:t.x,y:t.y,z:t.z}}else x=Math.atan2(_,w);s=S/a,h=1/Math.sqrt(1-e*(2-e)*(l=n/a)*l),f=l*(1-e)*h,d=s*h,y=0;do y++,c=i/Math.sqrt(1-e*d*d),v=n*f+S*d-c*(1-e*d*d),h=1/Math.sqrt(1-(u=e*c/(c+v))*(2-u)*l*l),p=l*(1-u)*h,m=(g=s*h)*f-p*d,f=p,d=g;while(m*m>b&&y<30)return{x:x,y:Math.atan(g/Math.abs(p)),z:v}}function l(t,e,i){if(e===r.PJD_3PARAM)return{x:t.x+i[0],y:t.y+i[1],z:t.z+i[2]};if(e===r.PJD_7PARAM){var o=i[0],n=i[1],a=i[2],s=i[3],l=i[4],h=i[5],u=i[6];return{x:u*(t.x-h*t.y+l*t.z)+o,y:u*(h*t.x+t.y-s*t.z)+n,z:u*(-l*t.x+s*t.y+t.z)+a}}}function h(t,e,i){if(e===r.PJD_3PARAM)return{x:t.x-i[0],y:t.y-i[1],z:t.z-i[2]};if(e===r.PJD_7PARAM){var o=i[0],n=i[1],a=i[2],s=i[3],l=i[4],h=i[5],u=i[6],c=(t.x-o)/u,f=(t.y-n)/u,d=(t.z-a)/u;return{x:c+h*f-l*d,y:-h*c+f+s*d,z:l*c-s*f+d}}}}),a("9in7W",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i){var r,o,n,a=i.x,s=i.y,l=i.z||0,h={};for(n=0;n<3;n++)if(!e||2!==n||void 0!==i.z)switch(0===n?(r=a,o=-1!=="ew".indexOf(t.axis[n])?"x":"y"):1===n?(r=s,o=-1!=="ns".indexOf(t.axis[n])?"y":"x"):(r=l,o="z"),t.axis[n]){case"e":case"n":h[o]=r;break;case"w":case"s":h[o]=-r;break;case"u":void 0!==i[o]&&(h.z=r);break;case"d":void 0!==i[o]&&(h.z=-r);break;default:return null}return h}}),a("gstUr",function(t,i){e(t.exports,"default",()=>r);function r(t){var e={x:t[0],y:t[1]};return t.length>2&&(e.z=t[2]),t.length>3&&(e.m=t[3]),e}}),a("hyITn",function(t,i){function r(t){o(t.x),o(t.y)}function o(t){if("function"==typeof Number.isFinite){if(Number.isFinite(t))return;throw TypeError("coordinates must be finite numbers")}if("number"!=typeof t||t!=t||!isFinite(t))throw TypeError("coordinates must be finite numbers")}e(t.exports,"default",()=>r)}),a("gdtqa",function(t,i){e(t.exports,"default",()=>a);var r=n("cnmDo");function o(t,e,i){if(!(this instanceof o))return new o(t,e,i);if(Array.isArray(t))this.x=t[0],this.y=t[1],this.z=t[2]||0;else if("object"==typeof t)this.x=t.x,this.y=t.y,this.z=t.z||0;else if("string"==typeof t&&void 0===e){var r=t.split(",");this.x=parseFloat(r[0],10),this.y=parseFloat(r[1],10),this.z=parseFloat(r[2],10)||0}else this.x=t,this.y=e,this.z=i||0;console.warn("proj4.Point will be removed in version 3, use proj4.toPoint")}o.fromMGRS=function(t){return new o((0,r.toPoint)(t))},o.prototype.toMGRS=function(t){return(0,r.forward)([this.x,this.y],t)};var a=o}),a("cnmDo",function(t,i){e(t.exports,"default",()=>n),e(t.exports,"forward",()=>a),e(t.exports,"toPoint",()=>s);var r="AJSAJS",o="AFAFAF",n={forward:a,inverse:function(t){var e=u(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat,e.lon,e.lat]:[e.left,e.bottom,e.right,e.top]},toPoint:s};function a(t,e){var i,n,a,s,h,u,f,d,p,g,m,y,x,v,b;return e=e||5,i=function(t){var e,i,r,o,n,a,s,h=t.lat,u=t.lon,c=l(h),f=l(u);s=Math.floor((u+180)/6)+1,180===u&&(s=60),h>=56&&h<64&&u>=3&&u<12&&(s=32),h>=72&&h<84&&(u>=0&&u<9?s=31:u>=9&&u<21?s=33:u>=21&&u<33?s=35:u>=33&&u<42&&(s=37)),a=l((s-1)*6-180+3),i=6378137/Math.sqrt(1-.00669438*Math.sin(c)*Math.sin(c)),r=Math.tan(c)*Math.tan(c),o=.006739496752268451*Math.cos(c)*Math.cos(c),n=Math.cos(c)*(f-a);var d=.9996*(6378137*(.9983242984503243*c-.002514607064228144*Math.sin(2*c)+2639046602129982e-21*Math.sin(4*c)-3418046101696858e-24*Math.sin(6*c))+i*Math.tan(c)*(n*n/2+(5-r+9*o+4*o*o)*n*n*n*n/24+(61-58*r+r*r+600*o-2.2240339282485886)*n*n*n*n*n*n/720));return h<0&&(d+=1e7),{northing:Math.round(d),easting:Math.round(.9996*i*(n+(1-r+o)*n*n*n/6+(5-18*r+r*r+72*o-.39089081163157013)*n*n*n*n*n/120)+5e5),zoneNumber:s,zoneLetter:(e="Z",84>=h&&h>=72?e="X":72>h&&h>=64?e="W":64>h&&h>=56?e="V":56>h&&h>=48?e="U":48>h&&h>=40?e="T":40>h&&h>=32?e="S":32>h&&h>=24?e="R":24>h&&h>=16?e="Q":16>h&&h>=8?e="P":8>h&&h>=0?e="N":0>h&&h>=-8?e="M":-8>h&&h>=-16?e="L":-16>h&&h>=-24?e="K":-24>h&&h>=-32?e="J":-32>h&&h>=-40?e="H":-40>h&&h>=-48?e="G":-48>h&&h>=-56?e="F":-56>h&&h>=-64?e="E":-64>h&&h>=-72?e="D":-72>h&&h>=-80&&(e="C"),e)}}({lat:t[1],lon:t[0]}),n=e,a="00000"+i.easting,s="00000"+i.northing,i.zoneNumber+i.zoneLetter+(h=i.easting,u=i.northing,f=c(i.zoneNumber),d=Math.floor(h/1e5),p=Math.floor(u/1e5)%20,g=f-1,m=r.charCodeAt(g),y=o.charCodeAt(g),x=m+d-1,v=y+p,b=!1,x>90&&(x=x-90+65-1,b=!0),(73===x||m<73&&x>73||(x>73||m<73)&&b)&&x++,(79===x||m<79&&x>79||(x>79||m<79)&&b)&&73==++x&&x++,x>90&&(x=x-90+65-1),v>86?(v=v-86+65-1,b=!0):b=!1,(73===v||y<73&&v>73||(v>73||y<73)&&b)&&v++,(79===v||y<79&&v>79||(v>79||y<79)&&b)&&73==++v&&v++,v>86&&(v=v-86+65-1),String.fromCharCode(x)+String.fromCharCode(v))+a.substr(a.length-5,n)+s.substr(s.length-5,n)}function s(t){var e=u(f(t.toUpperCase()));return e.lat&&e.lon?[e.lon,e.lat]:[(e.left+e.right)/2,(e.top+e.bottom)/2]}function l(t){return Math.PI/180*t}function h(t){return t/Math.PI*180}function u(t){var e,i,r,o,n,a,s,l,c=t.northing,f=t.easting,d=t.zoneLetter,p=t.zoneNumber;if(p<0||p>60)return null;var g=(1-Math.sqrt(.99330562))/(1+Math.sqrt(.99330562)),m=c;d<"N"&&(m-=1e7),e=6378137/Math.sqrt(1-.00669438*Math.sin(s=(a=m/.9996/6367449.145945056)+(3*g/2-27*g*g*g/32)*Math.sin(2*a)+(21*g*g/16-55*g*g*g*g/32)*Math.sin(4*a)+151*g*g*g/96*Math.sin(6*a))*Math.sin(s)),i=Math.tan(s)*Math.tan(s),r=.006739496752268451*Math.cos(s)*Math.cos(s),o=6335439.32722994/Math.pow(1-.00669438*Math.sin(s)*Math.sin(s),1.5),n=(f-5e5)/(.9996*e);var y=s-e*Math.tan(s)/o*(n*n/2-(5+3*i+10*r-4*r*r-.06065547077041606)*n*n*n*n/24+(61+90*i+298*r+45*i*i-1.6983531815716497-3*r*r)*n*n*n*n*n*n/720);y=h(y);var x=(n-(1+2*i+r)*n*n*n/6+(5-2*r+28*i-3*r*r+.05391597401814761+24*i*i)*n*n*n*n*n/120)/Math.cos(s);if(x=(p-1)*6-180+3+h(x),t.accuracy){var v=u({northing:t.northing+t.accuracy,easting:t.easting+t.accuracy,zoneLetter:t.zoneLetter,zoneNumber:t.zoneNumber});l={top:v.lat,right:v.lon,bottom:y,left:x}}else l={lat:y,lon:x};return l}function c(t){var e=t%6;return 0===e&&(e=6),e}function f(t){if(t&&0===t.length)throw"MGRSPoint coverting from nothing";for(var e,i,n=t.length,a=null,s="",l=0;!/[A-Z]/.test(e=t.charAt(l));){if(l>=2)throw"MGRSPoint bad conversion from: "+t;s+=e,l++}var h=parseInt(s,10);if(0===l||l+3>n)throw"MGRSPoint bad conversion from: "+t;var u=t.charAt(l++);if(u<="A"||"B"===u||"Y"===u||u>="Z"||"I"===u||"O"===u)throw"MGRSPoint zone letter "+u+" not handled: "+t;a=t.substring(l,l+=2);for(var f=c(h),d=function(t,e){for(var i=r.charCodeAt(e-1),o=1e5,n=!1;i!==t.charCodeAt(0);){if(73==++i&&i++,79===i&&i++,i>90){if(n)throw"Bad character: "+t;i=65,n=!0}o+=1e5}return o}(a.charAt(0),f),p=function(t,e){if(t>"V")throw"MGRSPoint given invalid Northing "+t;for(var i=o.charCodeAt(e-1),r=0,n=!1;i!==t.charCodeAt(0);){if(73==++i&&i++,79===i&&i++,i>86){if(n)throw"Bad character: "+t;i=65,n=!0}r+=1e5}return r}(a.charAt(1),f);p<function(t){var e;switch(t){case"C":e=11e5;break;case"D":e=2e6;break;case"E":e=28e5;break;case"F":e=37e5;break;case"G":e=46e5;break;case"H":e=55e5;break;case"J":e=64e5;break;case"K":e=73e5;break;case"L":e=82e5;break;case"M":e=91e5;break;case"N":e=0;break;case"P":e=8e5;break;case"Q":e=17e5;break;case"R":e=26e5;break;case"S":e=35e5;break;case"T":e=44e5;break;case"U":e=53e5;break;case"V":e=62e5;break;case"W":e=7e6;break;case"X":e=79e5;break;default:e=-1}if(e>=0)return e;throw"Invalid zone letter: "+t}(u);)p+=2e6;var g=n-l;if(g%2!=0)throw"MGRSPoint has to have an even number \nof digits after the zone letter and two 100km letters - front \nhalf for easting meters, second half for \nnorthing meters"+t;var m=g/2,y=0,x=0;return m>0&&(i=1e5/Math.pow(10,m),y=parseFloat(t.substring(l,l+m))*i,x=parseFloat(t.substring(l+m))*i),{easting:y+d,northing:x+p,zoneLetter:u,zoneNumber:h,accuracy:i}}}),a("guiH1",function(t,i){e(t.exports,"default",()=>R);var r=n("5BH1M"),o=n("es3WD"),a=n("8Yaq4"),s=n("1RG4F"),l=n("37ccA"),h=n("1awqj"),u=n("l0GLf"),c=n("lodNN"),f=n("jkgJa"),d=n("2HFid"),p=n("9v6gR"),g=n("aYCax"),m=n("8zzks"),y=n("5DoFA"),x=n("jobMi"),v=n("fKioj"),b=n("fQxFh"),w=n("gu5X1"),_=n("4yyqR"),S=n("bMtlW"),E=n("bSwxC"),A=n("2BpE3"),N=n("h1KUb"),I=n("1nGnS"),M=n("lAm4d"),P=n("l7o7b"),C=n("hc3Bp"),T=n("1pXHs"),L=n("bZa0m");function R(t){t.Proj.projections.add(r.default),t.Proj.projections.add(o.default),t.Proj.projections.add(a.default),t.Proj.projections.add(s.default),t.Proj.projections.add(l.default),t.Proj.projections.add(h.default),t.Proj.projections.add(u.default),t.Proj.projections.add(c.default),t.Proj.projections.add(f.default),t.Proj.projections.add(d.default),t.Proj.projections.add(p.default),t.Proj.projections.add(g.default),t.Proj.projections.add(m.default),t.Proj.projections.add(y.default),t.Proj.projections.add(x.default),t.Proj.projections.add(v.default),t.Proj.projections.add(b.default),t.Proj.projections.add(w.default),t.Proj.projections.add(_.default),t.Proj.projections.add(S.default),t.Proj.projections.add(E.default),t.Proj.projections.add(A.default),t.Proj.projections.add(N.default),t.Proj.projections.add(I.default),t.Proj.projections.add(M.default),t.Proj.projections.add(P.default),t.Proj.projections.add(C.default),t.Proj.projections.add(T.default),t.Proj.projections.add(L.default)}}),a("5BH1M",function(t,i){e(t.exports,"default",()=>u);var r=n("lz6WA"),o=n("8GYcG"),a=n("6NyiU"),s=n("kEf05"),l=n("7M1Nv"),h=n("SsFAj"),u={init:function(){this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.es&&(this.en=(0,r.default)(this.es),this.ml0=(0,o.default)(this.lat0,Math.sin(this.lat0),Math.cos(this.lat0),this.en))},forward:function(t){var e,i,r=t.x,n=t.y,a=(0,s.default)(r-this.long0),h=Math.sin(n),u=Math.cos(n);if(this.es){var c=u*a,f=Math.pow(c,2),d=this.ep2*Math.pow(u,2),p=Math.pow(d,2),g=Math.pow(Math.abs(u)>l.EPSLN?Math.tan(n):0,2),m=Math.pow(g,2);c/=Math.sqrt(1-this.es*Math.pow(h,2));var y=(0,o.default)(n,h,u,this.en);e=this.a*(this.k0*c*(1+f/6*(1-g+d+f/20*(5-18*g+m+14*d-58*g*d+f/42*(61+179*m-m*g-479*g)))))+this.x0,i=this.a*(this.k0*(y-this.ml0+h*a*c/2*(1+f/12*(5-g+9*d+4*p+f/30*(61+m-58*g+270*d-330*g*d+f/56*(1385+543*m-m*g-3111*g))))))+this.y0}else{var x=u*Math.sin(a);if(Math.abs(Math.abs(x)-1)<l.EPSLN)return 93;if(e=.5*this.a*this.k0*Math.log((1+x)/(1-x))+this.x0,(x=Math.abs(i=u*Math.cos(a)/Math.sqrt(1-Math.pow(x,2))))>=1){if(x-1>l.EPSLN)return 93;i=0}else i=Math.acos(i);n<0&&(i=-i),i=this.a*this.k0*(i-this.lat0)+this.y0}return t.x=e,t.y=i,t},inverse:function(t){var e,i,r,o,n=(t.x-this.x0)*(1/this.a),u=(t.y-this.y0)*(1/this.a);if(this.es){if(e=this.ml0+u/this.k0,Math.abs(i=(0,a.default)(e,this.es,this.en))<l.HALF_PI){var c=Math.sin(i),f=Math.cos(i),d=Math.abs(f)>l.EPSLN?Math.tan(i):0,p=this.ep2*Math.pow(f,2),g=Math.pow(p,2),m=Math.pow(d,2),y=Math.pow(m,2),x=n*Math.sqrt(e=1-this.es*Math.pow(c,2))/this.k0,v=Math.pow(x,2);e*=d,r=i-e*v/(1-this.es)*.5*(1-v/12*(5+3*m-9*p*m+p-4*g-v/30*(61+90*m-252*p*m+45*y+46*p-v/56*(1385+3633*m+4095*y+1574*y*m)))),o=(0,s.default)(this.long0+x*(1-v/6*(1+2*m+p-v/20*(5+28*m+24*y+8*p*m+6*p-v/42*(61+662*m+1320*y+720*y*m))))/f)}else r=l.HALF_PI*(0,h.default)(u),o=0}else{var b=Math.exp(n/this.k0),w=.5*(b-1/b),_=Math.cos(this.lat0+u/this.k0);r=Math.asin(e=Math.sqrt((1-Math.pow(_,2))/(1+Math.pow(w,2)))),u<0&&(r=-r),o=0===w&&0===_?0:(0,s.default)(Math.atan2(w,_)+this.long0)}return t.x=o,t.y=r,t},names:["Fast_Transverse_Mercator","Fast Transverse Mercator"]}}),a("lz6WA",function(t,i){e(t.exports,"default",()=>r);function r(t){var e=[];e[0]=1-t*(.25+t*(.046875+t*(.01953125+.01068115234375*t))),e[1]=t*(.75-t*(.046875+t*(.01953125+.01068115234375*t)));var i=t*t;return e[2]=i*(.46875-t*(.013020833333333334+.007120768229166667*t)),i*=t,e[3]=i*(.3645833333333333-.005696614583333333*t),e[4]=i*t*.3076171875,e}}),a("8GYcG",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i,r){return i*=e,e*=e,r[0]*t-i*(r[1]+e*(r[2]+e*(r[3]+e*r[4])))}}),a("6NyiU",function(t,i){e(t.exports,"default",()=>a);var r=n("8GYcG"),o=n("7M1Nv");function a(t,e,i){for(var n=1/(1-e),a=t,s=20;s;--s){var l=Math.sin(a),h=1-e*l*l;if(h=((0,r.default)(a,l,Math.cos(a),i)-t)*(h*Math.sqrt(h))*n,a-=h,Math.abs(h)<o.EPSLN)break}return a}}),a("es3WD",function(t,i){e(t.exports,"init",()=>f),e(t.exports,"forward",()=>d),e(t.exports,"inverse",()=>p),e(t.exports,"names",()=>g),e(t.exports,"default",()=>m);var r=n("5BH1M"),o=n("63eZQ"),a=n("9ijWS"),s=n("lDRbx"),l=n("cMuZ8"),h=n("hcIfS"),u=n("30KR7"),c=n("kEf05");function f(){if(!this.approx&&(isNaN(this.es)||this.es<=0))throw Error('Incorrect elliptical usage. Try using the +approx option in the proj string, or PROJECTION["Fast_Transverse_Mercator"] in the WKT.');this.approx&&((0,r.default).init.apply(this),this.forward=r.default.forward,this.inverse=r.default.inverse),this.x0=void 0!==this.x0?this.x0:0,this.y0=void 0!==this.y0?this.y0:0,this.long0=void 0!==this.long0?this.long0:0,this.lat0=void 0!==this.lat0?this.lat0:0,this.cgb=[],this.cbg=[],this.utg=[],this.gtu=[];var t=this.es/(1+Math.sqrt(1-this.es)),e=t/(2-t),i=e;this.cgb[0]=e*(2+e*(-2/3+e*(-2+e*(116/45+e*(26/45+-2854/675*e))))),this.cbg[0]=e*(-2+e*(2/3+e*(4/3+e*(-82/45+e*(32/45+4642/4725*e))))),i*=e,this.cgb[1]=i*(7/3+e*(-1.6+e*(-227/45+e*(2704/315+2323/945*e)))),this.cbg[1]=i*(5/3+e*(-16/15+e*(-13/9+e*(904/315+-1522/945*e)))),i*=e,this.cgb[2]=i*(56/15+e*(-136/35+e*(-1262/105+73814/2835*e))),this.cbg[2]=i*(-26/15+e*(34/21+e*(1.6+-12686/2835*e))),i*=e,this.cgb[3]=i*(4279/630+e*(-332/35+-399572/14175*e)),this.cbg[3]=i*(1237/630+e*(-2.4+-24832/14175*e)),i*=e,this.cgb[4]=i*(4174/315+-144838/6237*e),this.cbg[4]=i*(-734/315+109598/31185*e),i*=e,this.cgb[5]=601676/22275*i,this.cbg[5]=444337/155925*i,i=Math.pow(e,2),this.Qn=this.k0/(1+e)*(1+i*(1/4+i*(1/64+i/256))),this.utg[0]=e*(-.5+e*(2/3+e*(-37/96+e*(1/360+e*(81/512+-96199/604800*e))))),this.gtu[0]=e*(.5+e*(-2/3+e*(5/16+e*(41/180+e*(-127/288+7891/37800*e))))),this.utg[1]=i*(-1/48+e*(-1/15+e*(437/1440+e*(-46/105+1118711/3870720*e)))),this.gtu[1]=i*(13/48+e*(-.6+e*(557/1440+e*(281/630+-1983433/1935360*e)))),i*=e,this.utg[2]=i*(-17/480+e*(37/840+e*(209/4480+-5569/90720*e))),this.gtu[2]=i*(61/240+e*(-103/140+e*(15061/26880+167603/181440*e))),i*=e,this.utg[3]=i*(-4397/161280+e*(11/504+830251/7257600*e)),this.gtu[3]=i*(49561/161280+e*(-179/168+6601661/7257600*e)),i*=e,this.utg[4]=i*(-4583/161280+108847/3991680*e),this.gtu[4]=i*(34729/80640+-3418889/1995840*e),i*=e,this.utg[5]=-20648693/638668800*i,this.gtu[5]=.6650675310896665*i;var o=(0,l.default)(this.cbg,this.lat0);this.Zb=-this.Qn*(o+(0,h.default)(this.gtu,2*o))}function d(t){var e,i,r=(0,c.default)(t.x-this.long0),o=t.y,n=Math.sin(o=(0,l.default)(this.cbg,o)),h=Math.cos(o),f=Math.sin(r),d=Math.cos(r);o=Math.atan2(n,d*h),r=Math.atan2(f*h,(0,a.default)(n,h*d)),r=(0,s.default)(Math.tan(r));var p=(0,u.default)(this.gtu,2*o,2*r);return o+=p[0],2.623395162778>=Math.abs(r+=p[1])?(e=this.a*(this.Qn*r)+this.x0,i=this.a*(this.Qn*o+this.Zb)+this.y0):(e=1/0,i=1/0),t.x=e,t.y=i,t}function p(t){var e,i,r=(t.x-this.x0)*(1/this.a),n=(t.y-this.y0)*(1/this.a);if(n=(n-this.Zb)/this.Qn,2.623395162778>=Math.abs(r/=this.Qn)){var s=(0,u.default)(this.utg,2*n,2*r);n+=s[0],r+=s[1],r=Math.atan((0,o.default)(r));var h=Math.sin(n),f=Math.cos(n),d=Math.sin(r),p=Math.cos(r);n=Math.atan2(h*p,(0,a.default)(d,p*f)),r=Math.atan2(d,p*f),e=(0,c.default)(r+this.long0),i=(0,l.default)(this.cgb,n)}else e=1/0,i=1/0;return t.x=e,t.y=i,t}var g=["Extended_Transverse_Mercator","Extended Transverse Mercator","etmerc","Transverse_Mercator","Transverse Mercator","tmerc"],m={init:f,forward:d,inverse:p,names:g}}),a("63eZQ",function(t,i){e(t.exports,"default",()=>r);function r(t){var e=Math.exp(t);return(e-1/e)/2}}),a("9ijWS",function(t,i){e(t.exports,"default",()=>r);function r(t,e){var i=Math.max(t=Math.abs(t),e=Math.abs(e)),r=Math.min(t,e)/(i||1);return i*Math.sqrt(1+Math.pow(r,2))}}),a("lDRbx",function(t,i){e(t.exports,"default",()=>a);var r=n("9ijWS"),o=n("jZ7FQ");function a(t){var e=Math.abs(t);return e=(0,o.default)(e*(1+e/((0,r.default)(1,e)+1))),t<0?-e:e}}),a("jZ7FQ",function(t,i){e(t.exports,"default",()=>r);function r(t){var e=1+t,i=e-1;return 0===i?t:t*Math.log(e)/i}}),a("cMuZ8",function(t,i){e(t.exports,"default",()=>r);function r(t,e){for(var i,r=2*Math.cos(2*e),o=t.length-1,n=t[o],a=0;--o>=0;)i=-a+r*n+t[o],a=n,n=i;return e+i*Math.sin(2*e)}}),a("hcIfS",function(t,i){e(t.exports,"default",()=>r);function r(t,e){for(var i,r=2*Math.cos(e),o=t.length-1,n=t[o],a=0;--o>=0;)i=-a+r*n+t[o],a=n,n=i;return Math.sin(e)*i}}),a("30KR7",function(t,i){e(t.exports,"default",()=>a);var r=n("63eZQ"),o=n("em6GO");function a(t,e,i){for(var n,a,s=Math.sin(e),l=Math.cos(e),h=(0,r.default)(i),u=(0,o.default)(i),c=2*l*u,f=-2*s*h,d=t.length-1,p=t[d],g=0,m=0,y=0;--d>=0;)n=m,a=g,p=-n+c*(m=p)-f*(g=y)+t[d],y=-a+f*m+c*g;return[(c=s*u)*p-(f=l*h)*y,c*y+f*p]}}),a("em6GO",function(t,i){e(t.exports,"default",()=>r);function r(t){var e=Math.exp(t);return(e+1/e)/2}}),a("8Yaq4",function(t,i){e(t.exports,"default",()=>s);var r=n("jcKxu"),o=n("es3WD"),a=n("7M1Nv"),s={init:function(){var t=(0,r.default)(this.zone,this.long0);if(void 0===t)throw Error("unknown utm zone");this.lat0=0,this.long0=(6*Math.abs(t)-183)*a.D2R,this.x0=5e5,this.y0=this.utmSouth?1e7:0,this.k0=.9996,(0,o.default).init.apply(this),this.forward=o.default.forward,this.inverse=o.default.inverse},names:["Universal Transverse Mercator System","utm"],dependsOn:"etmerc"}}),a("jcKxu",function(t,i){e(t.exports,"default",()=>o);var r=n("kEf05");function o(t,e){if(void 0===t){if((t=Math.floor(((0,r.default)(e)+Math.PI)*30/Math.PI)+1)<0)return 0;if(t>60)return 60}return t}}),a("1RG4F",function(t,i){e(t.exports,"default",()=>a);var r=n("bUfcr"),o=n("kEf05"),a={init:function(){(0,r.default).init.apply(this),this.rc&&(this.sinc0=Math.sin(this.phic0),this.cosc0=Math.cos(this.phic0),this.R2=2*this.rc,this.title||(this.title="Oblique Stereographic Alternative"))},forward:function(t){var e,i,n,a;return t.x=(0,o.default)(t.x-this.long0),(0,r.default).forward.apply(this,[t]),e=Math.sin(t.y),i=Math.cos(t.y),n=Math.cos(t.x),a=this.k0*this.R2/(1+this.sinc0*e+this.cosc0*i*n),t.x=a*i*Math.sin(t.x),t.y=a*(this.cosc0*e-this.sinc0*i*n),t.x=this.a*t.x+this.x0,t.y=this.a*t.y+this.y0,t},inverse:function(t){var e,i,n,a,s;if(t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,s=Math.sqrt(t.x*t.x+t.y*t.y)){var l=2*Math.atan2(s,this.R2);e=Math.sin(l),a=Math.asin((i=Math.cos(l))*this.sinc0+t.y*e*this.cosc0/s),n=Math.atan2(t.x*e,s*this.cosc0*i-t.y*this.sinc0*e)}else a=this.phic0,n=0;return t.x=n,t.y=a,(0,r.default).inverse.apply(this,[t]),t.x=(0,o.default)(t.x+this.long0),t},names:["Stereographic_North_Pole","Oblique_Stereographic","Polar_Stereographic","sterea","Oblique Stereographic Alternative","Double_Stereographic"]}}),a("bUfcr",function(t,i){e(t.exports,"default",()=>a);var r=n("2JMAV"),o=n("7M1Nv"),a={init:function(){var t=Math.sin(this.lat0),e=Math.cos(this.lat0);e*=e,this.rc=Math.sqrt(1-this.es)/(1-this.es*t*t),this.C=Math.sqrt(1+this.es*e*e/(1-this.es)),this.phic0=Math.asin(t/this.C),this.ratexp=.5*this.C*this.e,this.K=Math.tan(.5*this.phic0+o.FORTPI)/(Math.pow(Math.tan(.5*this.lat0+o.FORTPI),this.C)*(0,r.default)(this.e*t,this.ratexp))},forward:function(t){var e=t.x,i=t.y;return t.y=2*Math.atan(this.K*Math.pow(Math.tan(.5*i+o.FORTPI),this.C)*(0,r.default)(this.e*Math.sin(i),this.ratexp))-o.HALF_PI,t.x=this.C*e,t},inverse:function(t){for(var e=t.x/this.C,i=t.y,n=Math.pow(Math.tan(.5*i+o.FORTPI)/this.K,1/this.C),a=20;a>0&&!(1e-14>Math.abs((i=2*Math.atan(n*(0,r.default)(this.e*Math.sin(t.y),-.5*this.e))-o.HALF_PI)-t.y));--a)t.y=i;return a?(t.x=e,t.y=i,t):null},names:["gauss"]}}),a("2JMAV",function(t,i){e(t.exports,"default",()=>r);function r(t,e){return Math.pow((1-t)/(1+t),e)}}),a("37ccA",function(t,i){e(t.exports,"ssfn_",()=>u),e(t.exports,"init",()=>c),e(t.exports,"forward",()=>f),e(t.exports,"inverse",()=>d),e(t.exports,"names",()=>p),e(t.exports,"default",()=>g);var r=n("7M1Nv"),o=n("SsFAj"),a=n("1gqnK"),s=n("8RM2D"),l=n("7qdiL"),h=n("kEf05");function u(t,e,i){return e*=i,Math.tan(.5*(r.HALF_PI+t))*Math.pow((1-e)/(1+e),.5*i)}function c(){this.coslat0=Math.cos(this.lat0),this.sinlat0=Math.sin(this.lat0),this.sphere?1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.EPSLN&&(this.k0=.5*(1+(0,o.default)(this.lat0)*Math.sin(this.lat_ts))):(Math.abs(this.coslat0)<=r.EPSLN&&(this.lat0>0?this.con=1:this.con=-1),this.cons=Math.sqrt(Math.pow(1+this.e,1+this.e)*Math.pow(1-this.e,1-this.e)),1===this.k0&&!isNaN(this.lat_ts)&&Math.abs(this.coslat0)<=r.EPSLN&&(this.k0=.5*this.cons*(0,a.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts))/(0,s.default)(this.e,this.con*this.lat_ts,this.con*Math.sin(this.lat_ts))),this.ms1=(0,a.default)(this.e,this.sinlat0,this.coslat0),this.X0=2*Math.atan(this.ssfn_(this.lat0,this.sinlat0,this.e))-r.HALF_PI,this.cosX0=Math.cos(this.X0),this.sinX0=Math.sin(this.X0))}function f(t){var e,i,o,n,a,l,u=t.x,c=t.y,f=Math.sin(c),d=Math.cos(c),p=(0,h.default)(u-this.long0);if(Math.abs(Math.abs(u-this.long0)-Math.PI)<=r.EPSLN&&Math.abs(c+this.lat0)<=r.EPSLN)return t.x=NaN,t.y=NaN,t;if(this.sphere)e=2*this.k0/(1+this.sinlat0*f+this.coslat0*d*Math.cos(p)),t.x=this.a*e*d*Math.sin(p)+this.x0,t.y=this.a*e*(this.coslat0*f-this.sinlat0*d*Math.cos(p))+this.y0;else{if(n=Math.cos(i=2*Math.atan(this.ssfn_(c,f,this.e))-r.HALF_PI),o=Math.sin(i),Math.abs(this.coslat0)<=r.EPSLN)return a=(0,s.default)(this.e,c*this.con,this.con*f),l=2*this.a*this.k0*a/this.cons,t.x=this.x0+l*Math.sin(u-this.long0),t.y=this.y0-this.con*l*Math.cos(u-this.long0),t;Math.abs(this.sinlat0)<r.EPSLN?(e=2*this.a*this.k0/(1+n*Math.cos(p)),t.y=e*o):(e=2*this.a*this.k0*this.ms1/(this.cosX0*(1+this.sinX0*o+this.cosX0*n*Math.cos(p))),t.y=e*(this.cosX0*o-this.sinX0*n*Math.cos(p))+this.y0),t.x=e*n*Math.sin(p)+this.x0}return t}function d(t){t.x-=this.x0,t.y-=this.y0;var e,i,o,n,a,s=Math.sqrt(t.x*t.x+t.y*t.y);if(this.sphere){var u=2*Math.atan(s/(2*this.a*this.k0));return e=this.long0,i=this.lat0,s<=r.EPSLN||(i=Math.asin(Math.cos(u)*this.sinlat0+t.y*Math.sin(u)*this.coslat0/s),e=Math.abs(this.coslat0)<r.EPSLN?this.lat0>0?(0,h.default)(this.long0+Math.atan2(t.x,-1*t.y)):(0,h.default)(this.long0+Math.atan2(t.x,t.y)):(0,h.default)(this.long0+Math.atan2(t.x*Math.sin(u),s*this.coslat0*Math.cos(u)-t.y*this.sinlat0*Math.sin(u)))),t.x=e,t.y=i,t}if(Math.abs(this.coslat0)<=r.EPSLN){if(s<=r.EPSLN)return i=this.lat0,e=this.long0,t.x=e,t.y=i,t;t.x*=this.con,t.y*=this.con,o=s*this.cons/(2*this.a*this.k0),i=this.con*(0,l.default)(this.e,o),e=this.con*(0,h.default)(this.con*this.long0+Math.atan2(t.x,-1*t.y))}else n=2*Math.atan(s*this.cosX0/(2*this.a*this.k0*this.ms1)),e=this.long0,s<=r.EPSLN?a=this.X0:(a=Math.asin(Math.cos(n)*this.sinX0+t.y*Math.sin(n)*this.cosX0/s),e=(0,h.default)(this.long0+Math.atan2(t.x*Math.sin(n),s*this.cosX0*Math.cos(n)-t.y*this.sinX0*Math.sin(n)))),i=-1*(0,l.default)(this.e,Math.tan(.5*(r.HALF_PI+a)));return t.x=e,t.y=i,t}var p=["stere","Stereographic_South_Pole","Polar Stereographic (variant B)"],g={init:c,forward:f,inverse:d,names:p,ssfn_:u}}),a("1awqj",function(t,i){e(t.exports,"default",()=>r);var r={init:function(){var t=this.lat0;this.lambda0=this.long0;var e=Math.sin(t),i=this.a,r=1/this.rf,o=2*r-Math.pow(r,2),n=this.e=Math.sqrt(o);this.R=this.k0*i*Math.sqrt(1-o)/(1-o*Math.pow(e,2)),this.alpha=Math.sqrt(1+o/(1-o)*Math.pow(Math.cos(t),4)),this.b0=Math.asin(e/this.alpha);var a=Math.log(Math.tan(Math.PI/4+this.b0/2)),s=Math.log(Math.tan(Math.PI/4+t/2)),l=Math.log((1+n*e)/(1-n*e));this.K=a-this.alpha*s+this.alpha*n/2*l},forward:function(t){var e=Math.log(Math.tan(Math.PI/4-t.y/2)),i=this.e/2*Math.log((1+this.e*Math.sin(t.y))/(1-this.e*Math.sin(t.y))),r=2*(Math.atan(Math.exp(-this.alpha*(e+i)+this.K))-Math.PI/4),o=this.alpha*(t.x-this.lambda0),n=Math.atan(Math.sin(o)/(Math.sin(this.b0)*Math.tan(r)+Math.cos(this.b0)*Math.cos(o))),a=Math.asin(Math.cos(this.b0)*Math.sin(r)-Math.sin(this.b0)*Math.cos(r)*Math.cos(o));return t.y=this.R/2*Math.log((1+Math.sin(a))/(1-Math.sin(a)))+this.y0,t.x=this.R*n+this.x0,t},inverse:function(t){for(var e=t.x-this.x0,i=t.y-this.y0,r=e/this.R,o=2*(Math.atan(Math.exp(i/this.R))-Math.PI/4),n=Math.asin(Math.cos(this.b0)*Math.sin(o)+Math.sin(this.b0)*Math.cos(o)*Math.cos(r)),a=Math.atan(Math.sin(r)/(Math.cos(this.b0)*Math.cos(r)-Math.sin(this.b0)*Math.tan(o))),s=this.lambda0+a/this.alpha,l=0,h=n,u=-1e3,c=0;Math.abs(h-u)>1e-7;){if(++c>20)return;l=1/this.alpha*(Math.log(Math.tan(Math.PI/4+n/2))-this.K)+this.e*Math.log(Math.tan(Math.PI/4+Math.asin(this.e*Math.sin(h))/2)),u=h,h=2*Math.atan(Math.exp(l))-Math.PI/2}return t.x=s,t.y=h,t},names:["somerc"]}}),a("l0GLf",function(t,i){e(t.exports,"default",()=>l);var r=n("8RM2D"),o=n("kEf05"),a=n("7qdiL"),s=n("7M1Nv"),l={init:function(){var t,e,i,n,a,l,h,u,c,f,d,p=0,g=0,m=0,y=0,x=0,v=0,b=0;this.no_off=(t="object"==typeof this.PROJECTION?Object.keys(this.PROJECTION)[0]:this.PROJECTION,"no_uoff"in this||"no_off"in this||-1!==["Hotine_Oblique_Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin"].indexOf(t)),this.no_rot="no_rot"in this;var w=!1;"alpha"in this&&(w=!0);var _=!1;if("rectified_grid_angle"in this&&(_=!0),w&&(b=this.alpha),_&&(p=this.rectified_grid_angle*s.D2R),w||_)g=this.longc;else if(m=this.long1,x=this.lat1,y=this.long2,1e-7>=Math.abs(x-(v=this.lat2))||(e=Math.abs(x))<=1e-7||1e-7>=Math.abs(e-s.HALF_PI)||1e-7>=Math.abs(Math.abs(this.lat0)-s.HALF_PI)||1e-7>=Math.abs(Math.abs(v)-s.HALF_PI))throw Error();var S=1-this.es;(i=Math.sqrt(S),Math.abs(this.lat0)>s.EPSLN?(c=Math.sin(this.lat0),n=Math.cos(this.lat0),e=1-this.es*c*c,this.B=n*n,this.B=Math.sqrt(1+this.es*this.B*this.B/S),this.A=this.B*this.k0*i/e,(l=(a=this.B*i/(n*Math.sqrt(e)))*a-1)<=0?l=0:(l=Math.sqrt(l),this.lat0<0&&(l=-l)),this.E=l+=a,this.E*=Math.pow((0,r.default)(this.e,this.lat0,c),this.B)):(this.B=1/i,this.A=this.k0,this.E=a=l=1),w||_)?(w?(d=Math.asin(Math.sin(b)/a),_||(p=b)):b=Math.asin(a*Math.sin(d=p)),this.lam0=g-Math.asin(.5*(l-1/l)*Math.tan(d))/this.B):(h=Math.pow((0,r.default)(this.e,x,Math.sin(x)),this.B),u=Math.pow((0,r.default)(this.e,v,Math.sin(v)),this.B),l=this.E/h,f=((f=this.E*this.E)-u*h)/(f+u*h),(e=m-y)<-Math.pi?y-=s.TWO_PI:e>Math.pi&&(y+=s.TWO_PI),this.lam0=(0,o.default)(.5*(m+y)-Math.atan(f*Math.tan(.5*this.B*(m-y))/((u-h)/(u+h)))/this.B),p=b=Math.asin(a*Math.sin(d=Math.atan(2*Math.sin(this.B*(0,o.default)(m-this.lam0))/(l-1/l))))),this.singam=Math.sin(d),this.cosgam=Math.cos(d),this.sinrot=Math.sin(p),this.cosrot=Math.cos(p),this.rB=1/this.B,this.ArB=this.A*this.rB,this.BrA=1/this.ArB,this.A,this.B,this.no_off?this.u_0=0:(this.u_0=Math.abs(this.ArB*Math.atan(Math.sqrt(a*a-1)/Math.cos(b))),this.lat0<0&&(this.u_0=-this.u_0)),l=.5*d,this.v_pole_n=this.ArB*Math.log(Math.tan(s.FORTPI-l)),this.v_pole_s=this.ArB*Math.log(Math.tan(s.FORTPI+l))},forward:function(t){var e,i,o,n,a,l,h,u,c={};if(t.x=t.x-this.lam0,Math.abs(Math.abs(t.y)-s.HALF_PI)>s.EPSLN){if(l=1/(a=this.E/Math.pow((0,r.default)(this.e,t.y,Math.sin(t.y)),this.B)),e=.5*(a-l),i=.5*(a+l),n=Math.sin(this.B*t.x),Math.abs(Math.abs(o=(e*this.singam-n*this.cosgam)/i)-1)<s.EPSLN)throw Error();u=.5*this.ArB*Math.log((1-o)/(1+o)),h=1e-7>Math.abs(l=Math.cos(this.B*t.x))?this.A*t.x:this.ArB*Math.atan2(e*this.cosgam+n*this.singam,l)}else u=t.y>0?this.v_pole_n:this.v_pole_s,h=this.ArB*t.y;return this.no_rot?(c.x=h,c.y=u):(h-=this.u_0,c.x=u*this.cosrot+h*this.sinrot,c.y=h*this.cosrot-u*this.sinrot),c.x=this.a*c.x+this.x0,c.y=this.a*c.y+this.y0,c},inverse:function(t){var e,i,r,o,n,l,h={};if(t.x=(t.x-this.x0)*(1/this.a),t.y=(t.y-this.y0)*(1/this.a),this.no_rot?(i=t.y,e=t.x):(i=t.x*this.cosrot-t.y*this.sinrot,e=t.y*this.cosrot+t.x*this.sinrot+this.u_0),o=.5*((r=Math.exp(-this.BrA*i))-1/r),Math.abs(Math.abs(l=((n=Math.sin(this.BrA*e))*this.cosgam+o*this.singam)/(.5*(r+1/r)))-1)<s.EPSLN)h.x=0,h.y=l<0?-s.HALF_PI:s.HALF_PI;else{if(h.y=this.E/Math.sqrt((1+l)/(1-l)),h.y=(0,a.default)(this.e,Math.pow(h.y,1/this.B)),h.y===1/0)throw Error();h.x=-this.rB*Math.atan2(o*this.cosgam-n*this.singam,Math.cos(this.BrA*e))}return h.x+=this.lam0,h},names:["Hotine_Oblique_Mercator","Hotine Oblique Mercator","Hotine_Oblique_Mercator_Azimuth_Natural_Origin","Hotine_Oblique_Mercator_Two_Point_Natural_Origin","Hotine_Oblique_Mercator_Azimuth_Center","Oblique_Mercator","omerc"]}}),a("lodNN",function(t,i){e(t.exports,"default",()=>u);var r=n("1gqnK"),o=n("8RM2D"),a=n("SsFAj"),s=n("kEf05"),l=n("7qdiL"),h=n("7M1Nv"),u={init:function(){if(this.lat2||(this.lat2=this.lat1),this.k0||(this.k0=1),this.x0=this.x0||0,this.y0=this.y0||0,!(Math.abs(this.lat1+this.lat2)<h.EPSLN)){var t=this.b/this.a;this.e=Math.sqrt(1-t*t);var e=Math.sin(this.lat1),i=Math.cos(this.lat1),n=(0,r.default)(this.e,e,i),a=(0,o.default)(this.e,this.lat1,e),s=Math.sin(this.lat2),l=Math.cos(this.lat2),u=(0,r.default)(this.e,s,l),c=(0,o.default)(this.e,this.lat2,s),f=(0,o.default)(this.e,this.lat0,Math.sin(this.lat0));Math.abs(this.lat1-this.lat2)>h.EPSLN?this.ns=Math.log(n/u)/Math.log(a/c):this.ns=e,isNaN(this.ns)&&(this.ns=e),this.f0=n/(this.ns*Math.pow(a,this.ns)),this.rh=this.a*this.f0*Math.pow(f,this.ns),this.title||(this.title="Lambert Conformal Conic")}},forward:function(t){var e,i,r=t.x,n=t.y;Math.abs(2*Math.abs(n)-Math.PI)<=h.EPSLN&&(n=(0,a.default)(n)*(h.HALF_PI-2*h.EPSLN));var l=Math.abs(Math.abs(n)-h.HALF_PI);if(l>h.EPSLN)e=(0,o.default)(this.e,n,Math.sin(n)),i=this.a*this.f0*Math.pow(e,this.ns);else{if((l=n*this.ns)<=0)return null;i=0}var u=this.ns*(0,s.default)(r-this.long0);return t.x=this.k0*(i*Math.sin(u))+this.x0,t.y=this.k0*(this.rh-i*Math.cos(u))+this.y0,t},inverse:function(t){var e,i,r,o,n,a=(t.x-this.x0)/this.k0,u=this.rh-(t.y-this.y0)/this.k0;this.ns>0?(e=Math.sqrt(a*a+u*u),i=1):(e=-Math.sqrt(a*a+u*u),i=-1);var c=0;if(0!==e&&(c=Math.atan2(i*a,i*u)),0!==e||this.ns>0){if(i=1/this.ns,r=Math.pow(e/(this.a*this.f0),i),-9999===(o=(0,l.default)(this.e,r)))return null}else o=-h.HALF_PI;return n=(0,s.default)(c/this.ns+this.long0),t.x=n,t.y=o,t},names:["Lambert Tangential Conformal Conic Projection","Lambert_Conformal_Conic","Lambert_Conformal_Conic_1SP","Lambert_Conformal_Conic_2SP","lcc","Lambert Conic Conformal (1SP)","Lambert Conic Conformal (2SP)"]}}),a("jkgJa",function(t,i){e(t.exports,"default",()=>o);var r=n("kEf05"),o={init:function(){this.a=6377397.155,this.es=.006674372230614,this.e=Math.sqrt(this.es),this.lat0||(this.lat0=.863937979737193),this.long0||(this.long0=.4334234309119251),this.k0||(this.k0=.9999),this.s45=.785398163397448,this.s90=2*this.s45,this.fi0=this.lat0,this.e2=this.es,this.e=Math.sqrt(this.e2),this.alfa=Math.sqrt(1+this.e2*Math.pow(Math.cos(this.fi0),4)/(1-this.e2)),this.uq=1.04216856380474,this.u0=Math.asin(Math.sin(this.fi0)/this.alfa),this.g=Math.pow((1+this.e*Math.sin(this.fi0))/(1-this.e*Math.sin(this.fi0)),this.alfa*this.e/2),this.k=Math.tan(this.u0/2+this.s45)/Math.pow(Math.tan(this.fi0/2+this.s45),this.alfa)*this.g,this.k1=this.k0,this.n0=this.a*Math.sqrt(1-this.e2)/(1-this.e2*Math.pow(Math.sin(this.fi0),2)),this.s0=1.37008346281555,this.n=Math.sin(this.s0),this.ro0=this.k1*this.n0/Math.tan(this.s0),this.ad=this.s90-this.uq},forward:function(t){var e,i,o,n,a,s,l,h=t.x,u=t.y,c=(0,r.default)(h-this.long0);return e=Math.pow((1+this.e*Math.sin(u))/(1-this.e*Math.sin(u)),this.alfa*this.e/2),i=2*(Math.atan(this.k*Math.pow(Math.tan(u/2+this.s45),this.alfa)/e)-this.s45),o=-c*this.alfa,n=Math.asin(Math.cos(this.ad)*Math.sin(i)+Math.sin(this.ad)*Math.cos(i)*Math.cos(o)),a=Math.asin(Math.cos(i)*Math.sin(o)/Math.cos(n)),s=this.n*a,l=this.ro0*Math.pow(Math.tan(this.s0/2+this.s45),this.n)/Math.pow(Math.tan(n/2+this.s45),this.n),t.y=l*Math.cos(s)/1,t.x=l*Math.sin(s)/1,this.czech||(t.y*=-1,t.x*=-1),t},inverse:function(t){var e,i,r,o,n,a,s,l=t.x;t.x=t.y,t.y=l,this.czech||(t.y*=-1,t.x*=-1),n=Math.sqrt(t.x*t.x+t.y*t.y),o=Math.atan2(t.y,t.x)/Math.sin(this.s0),r=2*(Math.atan(Math.pow(this.ro0/n,1/this.n)*Math.tan(this.s0/2+this.s45))-this.s45),e=Math.asin(Math.cos(this.ad)*Math.sin(r)-Math.sin(this.ad)*Math.cos(r)*Math.cos(o)),i=Math.asin(Math.cos(r)*Math.sin(o)/Math.cos(e)),t.x=this.long0-i/this.alfa,a=e,s=0;var h=0;do t.y=2*(Math.atan(Math.pow(this.k,-1/this.alfa)*Math.pow(Math.tan(e/2+this.s45),1/this.alfa)*Math.pow((1+this.e*Math.sin(a))/(1-this.e*Math.sin(a)),this.e/2))-this.s45),1e-10>Math.abs(a-t.y)&&(s=1),a=t.y,h+=1;while(0===s&&h<15)return h>=15?null:t},names:["Krovak","krovak"]}}),a("2HFid",function(t,i){e(t.exports,"default",()=>p);var r=n("ikblq"),o=n("bfjvS"),a=n("2SUEX"),s=n("7DbOS"),l=n("jhsZf"),h=n("4N9k9"),u=n("kEf05"),c=n("r1jKt"),f=n("ilwvp"),d=n("7M1Nv"),p={init:function(){this.sphere||(this.e0=(0,o.default)(this.es),this.e1=(0,a.default)(this.es),this.e2=(0,s.default)(this.es),this.e3=(0,l.default)(this.es),this.ml0=this.a*(0,r.default)(this.e0,this.e1,this.e2,this.e3,this.lat0))},forward:function(t){var e,i,o=t.x,n=t.y;if(o=(0,u.default)(o-this.long0),this.sphere)e=this.a*Math.asin(Math.cos(n)*Math.sin(o)),i=this.a*(Math.atan2(Math.tan(n),Math.cos(o))-this.lat0);else{var a=Math.sin(n),s=Math.cos(n),l=(0,h.default)(this.a,this.e,a),c=Math.tan(n)*Math.tan(n),f=o*Math.cos(n),d=f*f,p=this.es*s*s/(1-this.es),g=this.a*(0,r.default)(this.e0,this.e1,this.e2,this.e3,n);e=l*f*(1-d*c*(1/6-(8-c+8*p)*d/120)),i=g-this.ml0+l*a/s*d*(.5+(5-c+6*p)*d/24)}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e,i,r=t.x/this.a,o=t.y/this.a;if(this.sphere){var n=o+this.lat0;e=Math.asin(Math.sin(n)*Math.cos(r)),i=Math.atan2(Math.tan(r),Math.cos(n))}else{var a=this.ml0/this.a+o,s=(0,f.default)(a,this.e0,this.e1,this.e2,this.e3);if(Math.abs(Math.abs(s)-d.HALF_PI)<=d.EPSLN)return t.x=this.long0,t.y=d.HALF_PI,o<0&&(t.y*=-1),t;var l=(0,h.default)(this.a,this.e,Math.sin(s)),p=l*l*l/this.a/this.a*(1-this.es),g=Math.pow(Math.tan(s),2),m=r*this.a/l,y=m*m;e=s-l*Math.tan(s)/p*m*m*(.5-(1+3*g)*m*m/24),i=m*(1-y*(g/3+(1+3*g)*g*y/15))/Math.cos(s)}return t.x=(0,u.default)(i+this.long0),t.y=(0,c.default)(e),t},names:["Cassini","Cassini_Soldner","cass"]}}),a("ikblq",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i,r,o){return t*o-e*Math.sin(2*o)+i*Math.sin(4*o)-r*Math.sin(6*o)}}),a("bfjvS",function(t,i){e(t.exports,"default",()=>r);function r(t){return 1-.25*t*(1+t/16*(3+1.25*t))}}),a("2SUEX",function(t,i){e(t.exports,"default",()=>r);function r(t){return .375*t*(1+.25*t*(1+.46875*t))}}),a("7DbOS",function(t,i){e(t.exports,"default",()=>r);function r(t){return .05859375*t*t*(1+.75*t)}}),a("jhsZf",function(t,i){e(t.exports,"default",()=>r);function r(t){return t*t*t*(35/3072)}}),a("4N9k9",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i){var r=e*i;return t/Math.sqrt(1-r*r)}}),a("r1jKt",function(t,i){e(t.exports,"default",()=>a);var r=n("7M1Nv"),o=n("SsFAj");function a(t){return Math.abs(t)<r.HALF_PI?t:t-(0,o.default)(t)*Math.PI}}),a("ilwvp",function(t,i){e(t.exports,"default",()=>r);function r(t,e,i,r,o){n=t/e;for(var n,a,s=0;s<15;s++)if(a=(t-(e*n-i*Math.sin(2*n)+r*Math.sin(4*n)-o*Math.sin(6*n)))/(e-2*i*Math.cos(2*n)+4*r*Math.cos(4*n)-6*o*Math.cos(6*n)),n+=a,1e-10>=Math.abs(a))return n;return NaN}}),a("9v6gR",function(t,i){e(t.exports,"S_POLE",()=>s),e(t.exports,"N_POLE",()=>l),e(t.exports,"EQUIT",()=>h),e(t.exports,"OBLIQ",()=>u),e(t.exports,"init",()=>c),e(t.exports,"forward",()=>f),e(t.exports,"inverse",()=>d),e(t.exports,"names",()=>p),e(t.exports,"default",()=>g);var r=n("7M1Nv"),o=n("iVfS2"),a=n("kEf05"),s=1,l=2,h=3,u=4;function c(){var t,e,i,n,a=Math.abs(this.lat0);if(Math.abs(a-r.HALF_PI)<r.EPSLN?this.mode=this.lat0<0?this.S_POLE:this.N_POLE:Math.abs(a)<r.EPSLN?this.mode=this.EQUIT:this.mode=this.OBLIQ,this.es>0)switch(this.qp=(0,o.default)(this.e,1),this.mmf=.5/(1-this.es),this.apa=(t=this.es,(i=[])[0]=.3333333333333333*t,e=t*t,i[0]+=.17222222222222222*e,i[1]=.06388888888888888*e,e*=t,i[0]+=.10257936507936508*e,i[1]+=.0664021164021164*e,i[2]=.016415012942191543*e,i),this.mode){case this.N_POLE:case this.S_POLE:this.dd=1;break;case this.EQUIT:this.rq=Math.sqrt(.5*this.qp),this.dd=1/this.rq,this.xmf=1,this.ymf=.5*this.qp;break;case this.OBLIQ:this.rq=Math.sqrt(.5*this.qp),n=Math.sin(this.lat0),this.sinb1=(0,o.default)(this.e,n)/this.qp,this.cosb1=Math.sqrt(1-this.sinb1*this.sinb1),this.dd=Math.cos(this.lat0)/(Math.sqrt(1-this.es*n*n)*this.rq*this.cosb1),this.ymf=(this.xmf=this.rq)/this.dd,this.xmf*=this.dd}else this.mode===this.OBLIQ&&(this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0))}function f(t){var e,i,n,s,l,h,u,c,f,d,p=t.x,g=t.y;if(p=(0,a.default)(p-this.long0),this.sphere){if(l=Math.sin(g),d=Math.cos(g),n=Math.cos(p),this.mode===this.OBLIQ||this.mode===this.EQUIT){if((i=this.mode===this.EQUIT?1+d*n:1+this.sinph0*l+this.cosph0*d*n)<=r.EPSLN)return null;e=(i=Math.sqrt(2/i))*d*Math.sin(p),i*=this.mode===this.EQUIT?l:this.cosph0*l-this.sinph0*d*n}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(n=-n),Math.abs(g+this.lat0)<r.EPSLN)return null;i=r.FORTPI-.5*g,e=(i=2*(this.mode===this.S_POLE?Math.cos(i):Math.sin(i)))*Math.sin(p),i*=n}}else{switch(u=0,c=0,f=0,n=Math.cos(p),s=Math.sin(p),l=Math.sin(g),h=(0,o.default)(this.e,l),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(c=Math.sqrt(1-(u=h/this.qp)*u)),this.mode){case this.OBLIQ:f=1+this.sinb1*u+this.cosb1*c*n;break;case this.EQUIT:f=1+c*n;break;case this.N_POLE:f=r.HALF_PI+g,h=this.qp-h;break;case this.S_POLE:f=g-r.HALF_PI,h=this.qp+h}if(Math.abs(f)<r.EPSLN)return null;switch(this.mode){case this.OBLIQ:case this.EQUIT:f=Math.sqrt(2/f),i=this.mode===this.OBLIQ?this.ymf*f*(this.cosb1*u-this.sinb1*c*n):(f=Math.sqrt(2/(1+c*n)))*u*this.ymf,e=this.xmf*f*c*s;break;case this.N_POLE:case this.S_POLE:h>=0?(e=(f=Math.sqrt(h))*s,i=n*(this.mode===this.S_POLE?f:-f)):e=i=0}}return t.x=this.a*e+this.x0,t.y=this.a*i+this.y0,t}function d(t){t.x-=this.x0,t.y-=this.y0;var e,i,o,n=t.x/this.a,s=t.y/this.a;if(this.sphere){var l,h,u,c,f,d,p,g,m=0,y=0;if((h=.5*(g=Math.sqrt(n*n+s*s)))>1)return null;switch(h=2*Math.asin(h),(this.mode===this.OBLIQ||this.mode===this.EQUIT)&&(y=Math.sin(h),m=Math.cos(h)),this.mode){case this.EQUIT:h=Math.abs(g)<=r.EPSLN?0:Math.asin(s*y/g),n*=y,s=m*g;break;case this.OBLIQ:h=Math.abs(g)<=r.EPSLN?this.lat0:Math.asin(m*this.sinph0+s*y*this.cosph0/g),n*=y*this.cosph0,s=(m-Math.sin(h)*this.sinph0)*g;break;case this.N_POLE:s=-s,h=r.HALF_PI-h;break;case this.S_POLE:h-=r.HALF_PI}l=0===s&&(this.mode===this.EQUIT||this.mode===this.OBLIQ)?0:Math.atan2(n,s)}else{if(p=0,this.mode===this.OBLIQ||this.mode===this.EQUIT){if(n/=this.dd,s*=this.dd,(d=Math.sqrt(n*n+s*s))<r.EPSLN)return t.x=this.long0,t.y=this.lat0,t;u=Math.cos(c=2*Math.asin(.5*d/this.rq)),n*=c=Math.sin(c),this.mode===this.OBLIQ?(p=u*this.sinb1+s*c*this.cosb1/d,f=this.qp*p,s=d*this.cosb1*u-s*this.sinb1*c):(p=s*c/d,f=this.qp*p,s=d*u)}else if(this.mode===this.N_POLE||this.mode===this.S_POLE){if(this.mode===this.N_POLE&&(s=-s),!(f=n*n+s*s))return t.x=this.long0,t.y=this.lat0,t;p=1-f/this.qp,this.mode===this.S_POLE&&(p=-p)}l=Math.atan2(n,s),e=Math.asin(p),i=this.apa,o=e+e,h=e+i[0]*Math.sin(o)+i[1]*Math.sin(o+o)+i[2]*Math.sin(o+o+o)}return t.x=(0,a.default)(this.long0+l),t.y=h,t}var p=["Lambert Azimuthal Equal Area","Lambert_Azimuthal_Equal_Area","laea"],g={init:c,forward:f,inverse:d,names:p,S_POLE:1,N_POLE:2,EQUIT:3,OBLIQ:4}}),a("iVfS2",function(t,i){e(t.exports,"default",()=>r);function r(t,e){var i;return t>1e-7?(i=t*e,(1-t*t)*(e/(1-i*i)-.5/t*Math.log((1-i)/(1+i)))):2*e}}),a("aYCax",function(t,i){e(t.exports,"init",()=>h),e(t.exports,"forward",()=>u),e(t.exports,"inverse",()=>c),e(t.exports,"phi1z",()=>f),e(t.exports,"names",()=>d),e(t.exports,"default",()=>p);var r=n("1gqnK"),o=n("iVfS2"),a=n("kEf05"),s=n("bp9ph"),l=n("7M1Nv");function h(){Math.abs(this.lat1+this.lat2)<l.EPSLN||(this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e3=Math.sqrt(this.es),this.sin_po=Math.sin(this.lat1),this.cos_po=Math.cos(this.lat1),this.t1=this.sin_po,this.con=this.sin_po,this.ms1=(0,r.default)(this.e3,this.sin_po,this.cos_po),this.qs1=(0,o.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat2),this.cos_po=Math.cos(this.lat2),this.t2=this.sin_po,this.ms2=(0,r.default)(this.e3,this.sin_po,this.cos_po),this.qs2=(0,o.default)(this.e3,this.sin_po),this.sin_po=Math.sin(this.lat0),this.cos_po=Math.cos(this.lat0),this.t3=this.sin_po,this.qs0=(0,o.default)(this.e3,this.sin_po),Math.abs(this.lat1-this.lat2)>l.EPSLN?this.ns0=(this.ms1*this.ms1-this.ms2*this.ms2)/(this.qs2-this.qs1):this.ns0=this.con,this.c=this.ms1*this.ms1+this.ns0*this.qs1,this.rh=this.a*Math.sqrt(this.c-this.ns0*this.qs0)/this.ns0)}function u(t){var e=t.x,i=t.y;this.sin_phi=Math.sin(i),this.cos_phi=Math.cos(i);var r=(0,o.default)(this.e3,this.sin_phi),n=this.a*Math.sqrt(this.c-this.ns0*r)/this.ns0,s=this.ns0*(0,a.default)(e-this.long0),l=n*Math.sin(s)+this.x0,h=this.rh-n*Math.cos(s)+this.y0;return t.x=l,t.y=h,t}function c(t){var e,i,r,o,n,s;return t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns0>=0?(e=Math.sqrt(t.x*t.x+t.y*t.y),r=1):(e=-Math.sqrt(t.x*t.x+t.y*t.y),r=-1),o=0,0!==e&&(o=Math.atan2(r*t.x,r*t.y)),r=e*this.ns0/this.a,this.sphere?s=Math.asin((this.c-r*r)/(2*this.ns0)):(i=(this.c-r*r)/this.ns0,s=this.phi1z(this.e3,i)),n=(0,a.default)(o/this.ns0+this.long0),t.x=n,t.y=s,t}function f(t,e){var i,r,o,n,a,h=(0,s.default)(.5*e);if(t<l.EPSLN)return h;for(var u=t*t,c=1;c<=25;c++)if(i=Math.sin(h),r=Math.cos(h),h+=a=.5*(n=1-(o=t*i)*o)*n/r*(e/(1-u)-i/n+.5/t*Math.log((1-o)/(1+o))),1e-7>=Math.abs(a))return h;return null}var d=["Albers_Conic_Equal_Area","Albers","aea"],p={init:h,forward:u,inverse:c,names:d,phi1z:f}}),a("bp9ph",function(t,i){e(t.exports,"default",()=>r);function r(t){return Math.abs(t)>1&&(t=t>1?1:-1),Math.asin(t)}}),a("8zzks",function(t,i){e(t.exports,"default",()=>s);var r=n("kEf05"),o=n("bp9ph"),a=n("7M1Nv"),s={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0),this.infinity_dist=1e3*this.a,this.rc=1},forward:function(t){var e,i,o,n,s,l,h,u=t.x,c=t.y;return o=(0,r.default)(u-this.long0),e=Math.sin(c),i=Math.cos(c),n=Math.cos(o),(s=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(s)<=a.EPSLN?(l=this.x0+1*this.a*i*Math.sin(o)/s,h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)/s):(l=this.x0+this.infinity_dist*i*Math.sin(o),h=this.y0+this.infinity_dist*(this.cos_p14*e-this.sin_p14*i*n)),t.x=l,t.y=h,t},inverse:function(t){var e,i,n,a,s,l;return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,t.x/=this.k0,t.y/=this.k0,(e=Math.sqrt(t.x*t.x+t.y*t.y))?(i=Math.sin(a=Math.atan2(e,this.rc)),n=Math.cos(a),l=(0,o.default)(n*this.sin_p14+t.y*i*this.cos_p14/e),s=Math.atan2(t.x*i,e*this.cos_p14*n-t.y*this.sin_p14*i),s=(0,r.default)(this.long0+s)):(l=this.phic0,s=0),t.x=s,t.y=l,t},names:["gnom"]}}),a("5DoFA",function(t,i){e(t.exports,"default",()=>l);var r=n("kEf05"),o=n("iVfS2"),a=n("1gqnK"),s=n("2mAxr"),l={init:function(){this.sphere||(this.k0=(0,a.default)(this.e,Math.sin(this.lat_ts),Math.cos(this.lat_ts)))},forward:function(t){var e,i,n=t.x,a=t.y,s=(0,r.default)(n-this.long0);if(this.sphere)e=this.x0+this.a*s*Math.cos(this.lat_ts),i=this.y0+this.a*Math.sin(a)/Math.cos(this.lat_ts);else{var l=(0,o.default)(this.e,Math.sin(a));e=this.x0+this.a*this.k0*s,i=this.y0+this.a*l*.5/this.k0}return t.x=e,t.y=i,t},inverse:function(t){var e,i;return t.x-=this.x0,t.y-=this.y0,this.sphere?(e=(0,r.default)(this.long0+t.x/this.a/Math.cos(this.lat_ts)),i=Math.asin(t.y/this.a*Math.cos(this.lat_ts))):(i=(0,s.default)(this.e,2*t.y*this.k0/this.a),e=(0,r.default)(this.long0+t.x/(this.a*this.k0))),t.x=e,t.y=i,t},names:["cea"]}}),a("2mAxr",function(t,i){e(t.exports,"default",()=>o);var r=n("7M1Nv");function o(t,e){if(1e-6>Math.abs(Math.abs(e)-(1-(1-t*t)/(2*t)*Math.log((1-t)/(1+t)))))return e<0?-1*r.HALF_PI:r.HALF_PI;for(var i,o,n,a,s=Math.asin(.5*e),l=0;l<30;l++)if(o=Math.sin(s),n=Math.cos(s),s+=i=Math.pow(1-(a=t*o)*a,2)/(2*n)*(e/(1-t*t)-o/(1-a*a)+.5/t*Math.log((1-a)/(1+a))),1e-10>=Math.abs(i))return s;return NaN}}),a("jobMi",function(t,i){e(t.exports,"default",()=>a);var r=n("kEf05"),o=n("r1jKt"),a={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Equidistant Cylindrical (Plate Carre)",this.rc=Math.cos(this.lat_ts)},forward:function(t){var e=t.x,i=t.y,n=(0,r.default)(e-this.long0),a=(0,o.default)(i-this.lat0);return t.x=this.x0+this.a*n*this.rc,t.y=this.y0+this.a*a,t},inverse:function(t){var e=t.x,i=t.y;return t.x=(0,r.default)(this.long0+(e-this.x0)/(this.a*this.rc)),t.y=(0,o.default)(this.lat0+(i-this.y0)/this.a),t},names:["Equirectangular","Equidistant_Cylindrical","eqc"]}}),a("fKioj",function(t,i){e(t.exports,"default",()=>d);var r=n("bfjvS"),o=n("2SUEX"),a=n("7DbOS"),s=n("jhsZf"),l=n("kEf05"),h=n("r1jKt"),u=n("ikblq"),c=n("7M1Nv"),f=n("4N9k9"),d={init:function(){this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.default)(this.es),this.e1=(0,o.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,s.default)(this.es),this.ml0=this.a*(0,u.default)(this.e0,this.e1,this.e2,this.e3,this.lat0)},forward:function(t){var e,i,r,o=t.x,n=t.y,a=(0,l.default)(o-this.long0);if(r=a*Math.sin(n),this.sphere)Math.abs(n)<=c.EPSLN?(e=this.a*a,i=-1*this.a*this.lat0):(e=this.a*Math.sin(r)/Math.tan(n),i=this.a*((0,h.default)(n-this.lat0)+(1-Math.cos(r))/Math.tan(n)));else if(Math.abs(n)<=c.EPSLN)e=this.a*a,i=-1*this.ml0;else{var s=(0,f.default)(this.a,this.e,Math.sin(n))/Math.tan(n);e=s*Math.sin(r),i=this.a*(0,u.default)(this.e0,this.e1,this.e2,this.e3,n)-this.ml0+s*(1-Math.cos(r))}return t.x=e+this.x0,t.y=i+this.y0,t},inverse:function(t){var e,i,r,o,n,a,s,h,f,d,p,g,m,y,x;if(r=t.x-this.x0,o=t.y-this.y0,this.sphere){if(Math.abs(o+this.a*this.lat0)<=c.EPSLN)e=(0,l.default)(r/this.a+this.long0),i=0;else{for(n=20,a=this.lat0+o/this.a,s=r*r/this.a/this.a+a*a,h=a;n;--n)if(d=Math.tan(h),f=-1*(a*(h*d+1)-h-.5*(h*h+s)*d)/((h-a)/d-1),h+=f,Math.abs(f)<=c.EPSLN){i=h;break}e=(0,l.default)(this.long0+Math.asin(r*Math.tan(h)/this.a)/Math.sin(i))}}else if(Math.abs(o+this.ml0)<=c.EPSLN)i=0,e=(0,l.default)(this.long0+r/this.a);else{for(n=20,a=(this.ml0+o)/this.a,s=r*r/this.a/this.a+a*a,h=a;n;--n)if(p=Math.sqrt(1-(x=this.e*Math.sin(h))*x)*Math.tan(h),g=this.a*(0,u.default)(this.e0,this.e1,this.e2,this.e3,h),m=this.e0-2*this.e1*Math.cos(2*h)+4*this.e2*Math.cos(4*h)-6*this.e3*Math.cos(6*h),f=(a*(p*(y=g/this.a)+1)-y-.5*p*(y*y+s))/(this.es*Math.sin(2*h)*(y*y+s-2*a*y)/(4*p)+(a-y)*(p*m-2/Math.sin(2*h))-m),h-=f,Math.abs(f)<=c.EPSLN){i=h;break}p=Math.sqrt(1-this.es*Math.pow(Math.sin(i),2))*Math.tan(i),e=(0,l.default)(this.long0+Math.asin(r*p/this.a)/Math.sin(i))}return t.x=e,t.y=i,t},names:["Polyconic","poly"]}}),a("fQxFh",function(t,i){e(t.exports,"iterations",()=>o),e(t.exports,"init",()=>a),e(t.exports,"forward",()=>s),e(t.exports,"inverse",()=>l),e(t.exports,"names",()=>h),e(t.exports,"default",()=>u);var r=n("7M1Nv"),o=1;function a(){this.A=[],this.A[1]=.6399175073,this.A[2]=-.1358797613,this.A[3]=.063294409,this.A[4]=-.02526853,this.A[5]=.0117879,this.A[6]=-.0055161,this.A[7]=.0026906,this.A[8]=-.001333,this.A[9]=67e-5,this.A[10]=-.00034,this.B_re=[],this.B_im=[],this.B_re[1]=.7557853228,this.B_im[1]=0,this.B_re[2]=.249204646,this.B_im[2]=.003371507,this.B_re[3]=-.001541739,this.B_im[3]=.04105856,this.B_re[4]=-.10162907,this.B_im[4]=.01727609,this.B_re[5]=-.26623489,this.B_im[5]=-.36249218,this.B_re[6]=-.6870983,this.B_im[6]=-1.1651967,this.C_re=[],this.C_im=[],this.C_re[1]=1.3231270439,this.C_im[1]=0,this.C_re[2]=-.577245789,this.C_im[2]=-.007809598,this.C_re[3]=.508307513,this.C_im[3]=-.112208952,this.C_re[4]=-.15094762,this.C_im[4]=.18200602,this.C_re[5]=1.01418179,this.C_im[5]=1.64497696,this.C_re[6]=1.9660549,this.C_im[6]=2.5127645,this.D=[],this.D[1]=1.5627014243,this.D[2]=.5185406398,this.D[3]=-.03333098,this.D[4]=-.1052906,this.D[5]=-.0368594,this.D[6]=.007317,this.D[7]=.0122,this.D[8]=.00394,this.D[9]=-.0013}function s(t){var e,i,o,n=t.x,a=t.y-this.lat0,s=n-this.long0,l=a/r.SEC_TO_RAD*1e-5,h=1,u=0;for(e=1;e<=10;e++)h*=l,u+=this.A[e]*h;var c=u,f=1,d=0,p=0,g=0;for(e=1;e<=6;e++)i=f*c-d*s,o=d*c+f*s,f=i,d=o,p=p+this.B_re[e]*f-this.B_im[e]*d,g=g+this.B_im[e]*f+this.B_re[e]*d;return t.x=g*this.a+this.x0,t.y=p*this.a+this.y0,t}function l(t){var e=t.x,i=t.y,o=e-this.x0,n=(i-this.y0)/this.a,a=o/this.a,s=1,l=0,h=0,u=0;for(f=1;f<=6;f++)d=s*n-l*a,p=l*n+s*a,s=d,l=p,h=h+this.C_re[f]*s-this.C_im[f]*l,u=u+this.C_im[f]*s+this.C_re[f]*l;for(var c=0;c<this.iterations;c++){var f,d,p,g,m,y=h,x=u,v=n,b=a;for(f=2;f<=6;f++)g=y*h-x*u,m=x*h+y*u,y=g,x=m,v+=(f-1)*(this.B_re[f]*y-this.B_im[f]*x),b+=(f-1)*(this.B_im[f]*y+this.B_re[f]*x);y=1,x=0;var w=this.B_re[1],_=this.B_im[1];for(f=2;f<=6;f++)g=y*h-x*u,m=x*h+y*u,y=g,x=m,w+=f*(this.B_re[f]*y-this.B_im[f]*x),_+=f*(this.B_im[f]*y+this.B_re[f]*x);var S=w*w+_*_;h=(v*w+b*_)/S,u=(b*w-v*_)/S}var E=h,A=u,N=1,I=0;for(f=1;f<=9;f++)N*=E,I+=this.D[f]*N;var M=this.lat0+I*r.SEC_TO_RAD*1e5,P=this.long0+A;return t.x=P,t.y=M,t}var h=["New_Zealand_Map_Grid","nzmg"],u={init:a,forward:s,inverse:l,names:h}}),a("gu5X1",function(t,i){e(t.exports,"default",()=>o);var r=n("kEf05"),o={init:function(){},forward:function(t){var e=t.x,i=t.y,o=(0,r.default)(e-this.long0),n=this.x0+this.a*o,a=this.y0+this.a*Math.log(Math.tan(Math.PI/4+i/2.5))*1.25;return t.x=n,t.y=a,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0;var e=(0,r.default)(this.long0+t.x/this.a),i=2.5*(Math.atan(Math.exp(.8*t.y/this.a))-Math.PI/4);return t.x=e,t.y=i,t},names:["Miller_Cylindrical","mill"]}}),a("4yyqR",function(t,i){e(t.exports,"default",()=>c);var r=n("kEf05"),o=n("r1jKt"),a=n("lz6WA"),s=n("8GYcG"),l=n("6NyiU"),h=n("7M1Nv"),u=n("bp9ph"),c={init:function(){this.sphere?(this.n=1,this.m=0,this.es=0,this.C_y=Math.sqrt((this.m+1)/this.n),this.C_x=this.C_y/(this.m+1)):this.en=(0,a.default)(this.es)},forward:function(t){var e,i,o=t.x,n=t.y;if(o=(0,r.default)(o-this.long0),this.sphere){if(this.m)for(var a=this.n*Math.sin(n),l=20;l;--l){var u=(this.m*n+Math.sin(n)-a)/(this.m+Math.cos(n));if(n-=u,Math.abs(u)<h.EPSLN)break}else n=1!==this.n?Math.asin(this.n*Math.sin(n)):n;e=this.a*this.C_x*o*(this.m+Math.cos(n)),i=this.a*this.C_y*n}else{var c=Math.sin(n),f=Math.cos(n);i=this.a*(0,s.default)(n,c,f,this.en),e=this.a*o*f/Math.sqrt(1-this.es*c*c)}return t.x=e,t.y=i,t},inverse:function(t){var e,i,n,a;return t.x-=this.x0,n=t.x/this.a,t.y-=this.y0,e=t.y/this.a,this.sphere?(e/=this.C_y,n/=this.C_x*(this.m+Math.cos(e)),this.m?e=(0,u.default)((this.m*e+Math.sin(e))/this.n):1!==this.n&&(e=(0,u.default)(Math.sin(e)/this.n)),n=(0,r.default)(n+this.long0),e=(0,o.default)(e)):(a=Math.abs(e=(0,l.default)(t.y/this.a,this.es,this.en)))<h.HALF_PI?(a=Math.sin(e),i=this.long0+t.x*Math.sqrt(1-this.es*a*a)/(this.a*Math.cos(e)),n=(0,r.default)(i)):a-h.EPSLN<h.HALF_PI&&(n=this.long0),t.x=n,t.y=e,t},names:["Sinusoidal","sinu"]}}),a("bMtlW",function(t,i){e(t.exports,"default",()=>a);var r=n("kEf05"),o=n("7M1Nv"),a={init:function(){},forward:function(t){for(var e=t.x,i=t.y,n=(0,r.default)(e-this.long0),a=i,s=Math.PI*Math.sin(i);;){var l=-(a+Math.sin(a)-s)/(1+Math.cos(a));if(a+=l,Math.abs(l)<o.EPSLN)break}a/=2,Math.PI/2-Math.abs(i)<o.EPSLN&&(n=0);var h=.900316316158*this.a*n*Math.cos(a)+this.x0,u=1.4142135623731*this.a*Math.sin(a)+this.y0;return t.x=h,t.y=u,t},inverse:function(t){t.x-=this.x0,t.y-=this.y0,Math.abs(i=t.y/(1.4142135623731*this.a))>.999999999999&&(i=.999999999999),e=Math.asin(i);var e,i,o=(0,r.default)(this.long0+t.x/(.900316316158*this.a*Math.cos(e)));o<-Math.PI&&(o=-Math.PI),o>Math.PI&&(o=Math.PI),Math.abs(i=(2*e+Math.sin(2*e))/Math.PI)>1&&(i=1);var n=Math.asin(i);return t.x=o,t.y=n,t},names:["Mollweide","moll"]}}),a("bSwxC",function(t,i){e(t.exports,"default",()=>p);var r=n("bfjvS"),o=n("2SUEX"),a=n("7DbOS"),s=n("jhsZf"),l=n("1gqnK"),h=n("ikblq"),u=n("kEf05"),c=n("r1jKt"),f=n("ilwvp"),d=n("7M1Nv"),p={init:function(){Math.abs(this.lat1+this.lat2)<d.EPSLN||(this.lat2=this.lat2||this.lat1,this.temp=this.b/this.a,this.es=1-Math.pow(this.temp,2),this.e=Math.sqrt(this.es),this.e0=(0,r.default)(this.es),this.e1=(0,o.default)(this.es),this.e2=(0,a.default)(this.es),this.e3=(0,s.default)(this.es),this.sinphi=Math.sin(this.lat1),this.cosphi=Math.cos(this.lat1),this.ms1=(0,l.default)(this.e,this.sinphi,this.cosphi),this.ml1=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat1),Math.abs(this.lat1-this.lat2)<d.EPSLN?this.ns=this.sinphi:(this.sinphi=Math.sin(this.lat2),this.cosphi=Math.cos(this.lat2),this.ms2=(0,l.default)(this.e,this.sinphi,this.cosphi),this.ml2=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat2),this.ns=(this.ms1-this.ms2)/(this.ml2-this.ml1)),this.g=this.ml1+this.ms1/this.ns,this.ml0=(0,h.default)(this.e0,this.e1,this.e2,this.e3,this.lat0),this.rh=this.a*(this.g-this.ml0))},forward:function(t){var e,i=t.x,r=t.y;if(this.sphere)e=this.a*(this.g-r);else{var o=(0,h.default)(this.e0,this.e1,this.e2,this.e3,r);e=this.a*(this.g-o)}var n=this.ns*(0,u.default)(i-this.long0),a=this.x0+e*Math.sin(n),s=this.y0+this.rh-e*Math.cos(n);return t.x=a,t.y=s,t},inverse:function(t){t.x-=this.x0,t.y=this.rh-t.y+this.y0,this.ns>=0?(i=Math.sqrt(t.x*t.x+t.y*t.y),e=1):(i=-Math.sqrt(t.x*t.x+t.y*t.y),e=-1);var e,i,r,o,n=0;if(0!==i&&(n=Math.atan2(e*t.x,e*t.y)),this.sphere)return o=(0,u.default)(this.long0+n/this.ns),r=(0,c.default)(this.g-i/this.a),t.x=o,t.y=r,t;var a=this.g-i/this.a;return r=(0,f.default)(a,this.e0,this.e1,this.e2,this.e3),o=(0,u.default)(this.long0+n/this.ns),t.x=o,t.y=r,t},names:["Equidistant_Conic","eqdc"]}}),a("2BpE3",function(t,i){e(t.exports,"default",()=>s);var r=n("kEf05"),o=n("7M1Nv"),a=n("bp9ph"),s={init:function(){this.R=this.a},forward:function(t){var e,i,n=t.x,s=t.y,l=(0,r.default)(n-this.long0);Math.abs(s)<=o.EPSLN&&(e=this.x0+this.R*l,i=this.y0);var h=(0,a.default)(2*Math.abs(s/Math.PI));(Math.abs(l)<=o.EPSLN||Math.abs(Math.abs(s)-o.HALF_PI)<=o.EPSLN)&&(e=this.x0,i=s>=0?this.y0+Math.PI*this.R*Math.tan(.5*h):this.y0+-(Math.PI*this.R*Math.tan(.5*h)));var u=.5*Math.abs(Math.PI/l-l/Math.PI),c=u*u,f=Math.sin(h),d=Math.cos(h),p=d/(f+d-1),g=p*(2/f-1),m=g*g,y=Math.PI*this.R*(u*(p-m)+Math.sqrt(c*(p-m)*(p-m)-(m+c)*(p*p-m)))/(m+c);l<0&&(y=-y),e=this.x0+y;var x=c+p;return y=Math.PI*this.R*(g*x-u*Math.sqrt((m+c)*(c+1)-x*x))/(m+c),i=s>=0?this.y0+y:this.y0-y,t.x=e,t.y=i,t},inverse:function(t){var e,i,n,a,s,l,h,u,c,f,d,p;return t.x-=this.x0,t.y-=this.y0,d=Math.PI*this.R,s=(n=t.x/d)*n+(a=t.y/d)*a,h=(l=-Math.abs(a)*(1+s))-2*a*a+n*n,u=-2*l+1+2*a*a+s*s,f=2*Math.sqrt(-(c=(l-h*h/3/u)/u)/3),Math.abs(d=3*(a*a/u+(2*h*h*h/u/u/u-9*l*h/u/u)/27)/c/f)>1&&(d=d>=0?1:-1),p=Math.acos(d)/3,i=t.y>=0?(-f*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI:-(-f*Math.cos(p+Math.PI/3)-h/3/u)*Math.PI,e=Math.abs(n)<o.EPSLN?this.long0:(0,r.default)(this.long0+Math.PI*(s-1+Math.sqrt(1+2*(n*n-a*a)+s*s))/2/n),t.x=e,t.y=i,t},names:["Van_der_Grinten_I","VanDerGrinten","vandg"]}}),a("h1KUb",function(t,i){e(t.exports,"default",()=>p);var r=n("kEf05"),o=n("7M1Nv"),a=n("ikblq"),s=n("bfjvS"),l=n("2SUEX"),h=n("7DbOS"),u=n("jhsZf"),c=n("4N9k9"),f=n("bp9ph"),d=n("ilwvp"),p={init:function(){this.sin_p12=Math.sin(this.lat0),this.cos_p12=Math.cos(this.lat0)},forward:function(t){var e,i,n,f,d,p,g,m,y,x,v,b,w,_,S,E,A,N,I,M,P,C,T=t.x,L=t.y,R=Math.sin(t.y),O=Math.cos(t.y),k=(0,r.default)(T-this.long0);return this.sphere?Math.abs(this.sin_p12-1)<=o.EPSLN?(t.x=this.x0+this.a*(o.HALF_PI-L)*Math.sin(k),t.y=this.y0-this.a*(o.HALF_PI-L)*Math.cos(k)):Math.abs(this.sin_p12+1)<=o.EPSLN?(t.x=this.x0+this.a*(o.HALF_PI+L)*Math.sin(k),t.y=this.y0+this.a*(o.HALF_PI+L)*Math.cos(k)):(A=(E=Math.acos(this.sin_p12*R+this.cos_p12*O*Math.cos(k)))?E/Math.sin(E):1,t.x=this.x0+this.a*A*O*Math.sin(k),t.y=this.y0+this.a*A*(this.cos_p12*R-this.sin_p12*O*Math.cos(k))):(e=(0,s.default)(this.es),i=(0,l.default)(this.es),n=(0,h.default)(this.es),f=(0,u.default)(this.es),Math.abs(this.sin_p12-1)<=o.EPSLN)?(d=this.a*(0,a.default)(e,i,n,f,o.HALF_PI),p=this.a*(0,a.default)(e,i,n,f,L),t.x=this.x0+(d-p)*Math.sin(k),t.y=this.y0-(d-p)*Math.cos(k)):Math.abs(this.sin_p12+1)<=o.EPSLN?(d=this.a*(0,a.default)(e,i,n,f,o.HALF_PI),p=this.a*(0,a.default)(e,i,n,f,L),t.x=this.x0+(d+p)*Math.sin(k),t.y=this.y0+(d+p)*Math.cos(k)):(g=R/O,m=(0,c.default)(this.a,this.e,this.sin_p12),y=(0,c.default)(this.a,this.e,R),x=Math.atan((1-this.es)*g+this.es*m*this.sin_p12/(y*O)),N=0===(v=Math.atan2(Math.sin(k),this.cos_p12*Math.tan(x)-this.sin_p12*Math.cos(k)))?Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):Math.abs(Math.abs(v)-Math.PI)<=o.EPSLN?-Math.asin(this.cos_p12*Math.sin(x)-this.sin_p12*Math.cos(x)):Math.asin(Math.sin(k)*Math.cos(x)/Math.sin(v)),_=(b=this.e*this.sin_p12/Math.sqrt(1-this.es))*(w=this.e*this.cos_p12*Math.cos(v)/Math.sqrt(1-this.es)),S=w*w,C=(P=(M=(I=N*N)*N)*N)*N,E=m*N*(1-I*S*(1-S)/6+M/8*_*(1-2*S)+P/120*(S*(4-7*S)-3*b*b*(1-7*S))-C/48*_),t.x=this.x0+E*Math.sin(v),t.y=this.y0+E*Math.cos(v)),t},inverse:function(t){var e,i,n,p,g,m,y,x,v,b,w,_,S,E,A,N,I,M,P,C,T,L;if(t.x-=this.x0,t.y-=this.y0,this.sphere){if((e=Math.sqrt(t.x*t.x+t.y*t.y))>2*o.HALF_PI*this.a)return;return n=Math.sin(i=e/this.a),p=Math.cos(i),g=this.long0,Math.abs(e)<=o.EPSLN?m=this.lat0:(m=(0,f.default)(p*this.sin_p12+t.y*n*this.cos_p12/e),g=Math.abs(Math.abs(this.lat0)-o.HALF_PI)<=o.EPSLN?this.lat0>=0?(0,r.default)(this.long0+Math.atan2(t.x,-t.y)):(0,r.default)(this.long0-Math.atan2(-t.x,t.y)):(0,r.default)(this.long0+Math.atan2(t.x*n,e*this.cos_p12*p-t.y*this.sin_p12*n))),t.x=g,t.y=m,t}return(y=(0,s.default)(this.es),x=(0,l.default)(this.es),v=(0,h.default)(this.es),b=(0,u.default)(this.es),Math.abs(this.sin_p12-1)<=o.EPSLN)?(_=(w=this.a*(0,a.default)(y,x,v,b,o.HALF_PI))-(e=Math.sqrt(t.x*t.x+t.y*t.y)),m=(0,d.default)(_/this.a,y,x,v,b),g=(0,r.default)(this.long0+Math.atan2(t.x,-1*t.y))):Math.abs(this.sin_p12+1)<=o.EPSLN?(w=this.a*(0,a.default)(y,x,v,b,o.HALF_PI),_=(e=Math.sqrt(t.x*t.x+t.y*t.y))-w,m=(0,d.default)(_/this.a,y,x,v,b),g=(0,r.default)(this.long0+Math.atan2(t.x,t.y))):(e=Math.sqrt(t.x*t.x+t.y*t.y),A=Math.atan2(t.x,t.y),S=(0,c.default)(this.a,this.e,this.sin_p12),N=Math.cos(A),M=-(I=this.e*this.cos_p12*N)*I/(1-this.es),P=3*this.es*(1-M)*this.sin_p12*this.cos_p12*N/(1-this.es),T=(C=e/S)-M*(1+M)*Math.pow(C,3)/6-P*(1+3*M)*Math.pow(C,4)/24,E=Math.asin(this.sin_p12*Math.cos(T)+this.cos_p12*Math.sin(T)*N),g=(0,r.default)(this.long0+Math.asin(Math.sin(A)*Math.sin(T)/Math.cos(E))),m=Math.atan2(((L=Math.sin(E))-this.es*(1-M*T*T/2-C*T*T*T/6)*this.sin_p12)*Math.tan(E),L*(1-this.es))),t.x=g,t.y=m,t},names:["Azimuthal_Equidistant","aeqd"]}}),a("1nGnS",function(t,i){e(t.exports,"default",()=>s);var r=n("kEf05"),o=n("bp9ph"),a=n("7M1Nv"),s={init:function(){this.sin_p14=Math.sin(this.lat0),this.cos_p14=Math.cos(this.lat0)},forward:function(t){var e,i,o,n,s,l,h,u=t.x,c=t.y;return o=(0,r.default)(u-this.long0),e=Math.sin(c),i=Math.cos(c),n=Math.cos(o),((s=this.sin_p14*e+this.cos_p14*i*n)>0||Math.abs(s)<=a.EPSLN)&&(l=1*this.a*i*Math.sin(o),h=this.y0+1*this.a*(this.cos_p14*e-this.sin_p14*i*n)),t.x=l,t.y=h,t},inverse:function(t){var e,i,n,s,l,h;return(t.x-=this.x0,t.y-=this.y0,e=Math.sqrt(t.x*t.x+t.y*t.y),n=Math.sin(i=(0,o.default)(e/this.a)),s=Math.cos(i),l=this.long0,Math.abs(e)<=a.EPSLN)?h=this.lat0:(h=(0,o.default)(s*this.sin_p14+t.y*n*this.cos_p14/e),l=Math.abs(Math.abs(this.lat0)-a.HALF_PI)<=a.EPSLN?this.lat0>=0?(0,r.default)(this.long0+Math.atan2(t.x,-t.y)):(0,r.default)(this.long0-Math.atan2(-t.x,t.y)):(0,r.default)(this.long0+Math.atan2(t.x*n,e*this.cos_p14*s-t.y*this.sin_p14*n))),t.x=l,t.y=h,t},names:["ortho"]}}),a("lAm4d",function(t,i){e(t.exports,"default",()=>h);var r=n("7M1Nv"),o={FRONT:1,RIGHT:2,BACK:3,LEFT:4,TOP:5,BOTTOM:6},a={AREA_0:1,AREA_1:2,AREA_2:3,AREA_3:4};function s(t,e,i,o){var n;return t<r.EPSLN?(o.value=a.AREA_0,n=0):Math.abs(n=Math.atan2(e,i))<=r.FORTPI?o.value=a.AREA_0:n>r.FORTPI&&n<=r.HALF_PI+r.FORTPI?(o.value=a.AREA_1,n-=r.HALF_PI):n>r.HALF_PI+r.FORTPI||n<=-(r.HALF_PI+r.FORTPI)?(o.value=a.AREA_2,n=n>=0?n-r.SPI:n+r.SPI):(o.value=a.AREA_3,n+=r.HALF_PI),n}function l(t,e){var i=t+e;return i<-r.SPI?i+=r.TWO_PI:i>+r.SPI&&(i-=r.TWO_PI),i}var h={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.lat0=this.lat0||0,this.long0=this.long0||0,this.lat_ts=this.lat_ts||0,this.title=this.title||"Quadrilateralized Spherical Cube",this.lat0>=r.HALF_PI-r.FORTPI/2?this.face=o.TOP:this.lat0<=-(r.HALF_PI-r.FORTPI/2)?this.face=o.BOTTOM:Math.abs(this.long0)<=r.FORTPI?this.face=o.FRONT:Math.abs(this.long0)<=r.HALF_PI+r.FORTPI?this.face=this.long0>0?o.RIGHT:o.LEFT:this.face=o.BACK,0!==this.es&&(this.one_minus_f=1-(this.a-this.b)/this.a,this.one_minus_f_squared=this.one_minus_f*this.one_minus_f)},forward:function(t){var e,i,n,h,u,c,f,d,p,g,m,y={x:0,y:0},x={value:0};return(t.x-=this.long0,e=0!==this.es?Math.atan(this.one_minus_f_squared*Math.tan(t.y)):t.y,i=t.x,this.face===o.TOP)?(h=r.HALF_PI-e,i>=r.FORTPI&&i<=r.HALF_PI+r.FORTPI?(x.value=a.AREA_0,n=i-r.HALF_PI):i>r.HALF_PI+r.FORTPI||i<=-(r.HALF_PI+r.FORTPI)?(x.value=a.AREA_1,n=i>0?i-r.SPI:i+r.SPI):i>-(r.HALF_PI+r.FORTPI)&&i<=-r.FORTPI?(x.value=a.AREA_2,n=i+r.HALF_PI):(x.value=a.AREA_3,n=i)):this.face===o.BOTTOM?(h=r.HALF_PI+e,i>=r.FORTPI&&i<=r.HALF_PI+r.FORTPI?(x.value=a.AREA_0,n=-i+r.HALF_PI):i<r.FORTPI&&i>=-r.FORTPI?(x.value=a.AREA_1,n=-i):i<-r.FORTPI&&i>=-(r.HALF_PI+r.FORTPI)?(x.value=a.AREA_2,n=-i-r.HALF_PI):(x.value=a.AREA_3,n=i>0?-i+r.SPI:-i-r.SPI)):(this.face===o.RIGHT?i=l(i,+r.HALF_PI):this.face===o.BACK?i=l(i,+r.SPI):this.face===o.LEFT&&(i=l(i,-r.HALF_PI)),p=Math.sin(e),g=Math.cos(e),m=Math.sin(i),f=g*Math.cos(i),d=g*m,this.face===o.FRONT?n=s(h=Math.acos(f),p,d,x):this.face===o.RIGHT?n=s(h=Math.acos(d),p,-f,x):this.face===o.BACK?n=s(h=Math.acos(-f),p,-d,x):this.face===o.LEFT?n=s(h=Math.acos(-d),p,f,x):(h=n=0,x.value=a.AREA_0)),u=Math.sqrt((1-Math.cos(h))/(Math.cos(c=Math.atan(12/r.SPI*(n+Math.acos(Math.sin(n)*Math.cos(r.FORTPI))-r.HALF_PI)))*Math.cos(c))/(1-Math.cos(Math.atan(1/Math.cos(n))))),x.value===a.AREA_1?c+=r.HALF_PI:x.value===a.AREA_2?c+=r.SPI:x.value===a.AREA_3&&(c+=1.5*r.SPI),y.x=u*Math.cos(c),y.y=u*Math.sin(c),y.x=y.x*this.a+this.x0,y.y=y.y*this.a+this.y0,t.x=y.x,t.y=y.y,t},inverse:function(t){var e,i,n,s,h,u,c,f,d,p,g,m,y,x,v={lam:0,phi:0},b={value:0};return t.x=(t.x-this.x0)/this.a,t.y=(t.y-this.y0)/this.a,i=Math.atan(Math.sqrt(t.x*t.x+t.y*t.y)),e=Math.atan2(t.y,t.x),t.x>=0&&t.x>=Math.abs(t.y)?b.value=a.AREA_0:t.y>=0&&t.y>=Math.abs(t.x)?(b.value=a.AREA_1,e-=r.HALF_PI):t.x<0&&-t.x>=Math.abs(t.y)?(b.value=a.AREA_2,e=e<0?e+r.SPI:e-r.SPI):(b.value=a.AREA_3,e+=r.HALF_PI),h=Math.atan(Math.sin(f=r.SPI/12*Math.tan(e))/(Math.cos(f)-1/Math.sqrt(2))),(u=1-(n=Math.cos(e))*n*(s=Math.tan(i))*s*(1-Math.cos(Math.atan(1/Math.cos(h)))))<-1?u=-1:u>1&&(u=1),this.face===o.TOP?(c=Math.acos(u),v.phi=r.HALF_PI-c,b.value===a.AREA_0?v.lam=h+r.HALF_PI:b.value===a.AREA_1?v.lam=h<0?h+r.SPI:h-r.SPI:b.value===a.AREA_2?v.lam=h-r.HALF_PI:v.lam=h):this.face===o.BOTTOM?(c=Math.acos(u),v.phi=c-r.HALF_PI,b.value===a.AREA_0?v.lam=-h+r.HALF_PI:b.value===a.AREA_1?v.lam=-h:b.value===a.AREA_2?v.lam=-h-r.HALF_PI:v.lam=h<0?-h-r.SPI:-h+r.SPI):(g=(f=(d=u)*d)>=1?0:Math.sqrt(1-f)*Math.sin(h),f+=g*g,p=f>=1?0:Math.sqrt(1-f),b.value===a.AREA_1?(f=p,p=-g,g=f):b.value===a.AREA_2?(p=-p,g=-g):b.value===a.AREA_3&&(f=p,p=g,g=-f),this.face===o.RIGHT?(f=d,d=-p,p=f):this.face===o.BACK?(d=-d,p=-p):this.face===o.LEFT&&(f=d,d=p,p=-f),v.phi=Math.acos(-g)-r.HALF_PI,v.lam=Math.atan2(p,d),this.face===o.RIGHT?v.lam=l(v.lam,-r.HALF_PI):this.face===o.BACK?v.lam=l(v.lam,-r.SPI):this.face===o.LEFT&&(v.lam=l(v.lam,+r.HALF_PI))),0!==this.es&&(m=v.phi<0?1:0,y=Math.tan(v.phi),x=this.b/Math.sqrt(y*y+this.one_minus_f_squared),v.phi=Math.atan(Math.sqrt(this.a*this.a-x*x)/(this.one_minus_f*x)),m&&(v.phi=-v.phi)),v.lam+=this.long0,t.x=v.lam,t.y=v.phi,t},names:["Quadrilateralized Spherical Cube","Quadrilateralized_Spherical_Cube","qsc"]}}),a("l7o7b",function(t,i){e(t.exports,"default",()=>c);var r=n("7M1Nv"),o=n("kEf05"),a=[[1,22199e-21,-.0000715515,31103e-10],[.9986,-.000482243,-.000024897,-.0000013309],[.9954,-.00083103,-.0000448605,-.000000986701],[.99,-.00135364,-.000059661,36777e-10],[.9822,-.00167442,-.00000449547,-.00000572411],[.973,-.00214868,-.0000903571,18736e-12],[.96,-.00305085,-.0000900761,164917e-11],[.9427,-.00382792,-.0000653386,-.0000026154],[.9216,-.00467746,-.00010457,481243e-11],[.8962,-.00536223,-.0000323831,-.00000543432],[.8679,-.00609363,-.000113898,332484e-11],[.835,-.00698325,-.0000640253,934959e-12],[.7986,-.00755338,-.0000500009,935324e-12],[.7597,-.00798324,-.000035971,-.00000227626],[.7186,-.00851367,-.0000701149,-.0000086303],[.6732,-.00986209,-.000199569,191974e-10],[.6213,-.010418,883923e-10,624051e-11],[.5722,-.00906601,182e-6,624051e-11],[.5322,-.00677797,275608e-9,624051e-11]],s=[[-.00000000000000000520417,.0124,121431e-23,-.0000000000845284],[.062,.0124,-.00000000126793,422642e-15],[.124,.0124,507171e-14,-.00000000160604],[.186,.0123999,-.0000000190189,600152e-14],[.248,.0124002,710039e-13,-.0000000224],[.31,.0123992,-.000000264997,835986e-13],[.372,.0124029,988983e-12,-.000000311994],[.434,.0123893,-.00000369093,-.000000435621],[.4958,.0123198,-.0000102252,-.000000345523],[.5571,.0121916,-.0000154081,-.000000582288],[.6176,.0119938,-.0000241424,-.000000525327],[.6769,.011713,-.0000320223,-.000000516405],[.7346,.0113541,-.0000397684,-.000000609052],[.7903,.0109107,-.0000489042,-.00000104739],[.8435,.0103431,-.000064615,-.00000000140374],[.8936,.00969686,-.000064636,-.000008547],[.9394,.00840947,-.000192841,-.0000042106],[.9761,.00616527,-.000256,-.0000042106],[1,.00328947,-.000319159,-.0000042106]],l=r.R2D/5,h=1/l,u=function(t,e){return t[0]+e*(t[1]+e*(t[2]+e*t[3]))},c={init:function(){this.x0=this.x0||0,this.y0=this.y0||0,this.long0=this.long0||0,this.es=0,this.title=this.title||"Robinson"},forward:function(t){var e=(0,o.default)(t.x-this.long0),i=Math.abs(t.y),n=Math.floor(i*l);n<0?n=0:n>=18&&(n=17),i=r.R2D*(i-h*n);var c={x:u(a[n],i)*e,y:u(s[n],i)};return t.y<0&&(c.y=-c.y),c.x=c.x*this.a*.8487+this.x0,c.y=c.y*this.a*1.3523+this.y0,c},inverse:function(t){var e={x:(t.x-this.x0)/(.8487*this.a),y:Math.abs(t.y-this.y0)/(1.3523*this.a)};if(e.y>=1)e.x/=a[18][0],e.y=t.y<0?-r.HALF_PI:r.HALF_PI;else{var i=Math.floor(18*e.y);for(i<0?i=0:i>=18&&(i=17);;)if(s[i][0]>e.y)--i;else if(s[i+1][0]<=e.y)++i;else break;var n=s[i],l=5*(e.y-n[0])/(s[i+1][0]-n[0]);l=function(t,e,i,r){for(var o=e;r;--r){var n=t(o);if(o-=n,Math.abs(n)<i)break}return o}(function(t){return(u(n,t)-e.y)/(n[1]+t*(2*n[2]+3*t*n[3]))},l,r.EPSLN,100),e.x/=u(a[i],l),e.y=(5*i+l)*r.D2R,t.y<0&&(e.y=-e.y)}return e.x=(0,o.default)(e.x+this.long0),e},names:["Robinson","robin"]}}),a("hc3Bp",function(t,i){e(t.exports,"default",()=>o);var r=n("cbJeb"),o={init:function(){this.name="geocent"},forward:function(t){return(0,r.geodeticToGeocentric)(t,this.es,this.a)},inverse:function(t){return(0,r.geocentricToGeodetic)(t,this.es,this.a,this.b)},names:["Geocentric","geocentric","geocent","Geocent"]}}),a("1pXHs",function(t,i){e(t.exports,"default",()=>l);var r=n("7M1Nv"),o=n("9ijWS"),a={N_POLE:0,S_POLE:1,EQUIT:2,OBLIQ:3},s={h:{def:1e5,num:!0},azi:{def:0,num:!0,degrees:!0},tilt:{def:0,num:!0,degrees:!0},long0:{def:0,num:!0},lat0:{def:0,num:!0}},l={init:function(){if(Object.keys(s).forEach((function(t){if(void 0===this[t])this[t]=s[t].def;else if(s[t].num&&isNaN(this[t]))throw Error("Invalid parameter value, must be numeric "+t+" = "+this[t]);else s[t].num&&(this[t]=parseFloat(this[t]));s[t].degrees&&(this[t]=this[t]*r.D2R)}).bind(this)),Math.abs(Math.abs(this.lat0)-r.HALF_PI)<r.EPSLN?this.mode=this.lat0<0?a.S_POLE:a.N_POLE:Math.abs(this.lat0)<r.EPSLN?this.mode=a.EQUIT:(this.mode=a.OBLIQ,this.sinph0=Math.sin(this.lat0),this.cosph0=Math.cos(this.lat0)),this.pn1=this.h/this.a,this.pn1<=0||this.pn1>1e10)throw Error("Invalid height");this.p=1+this.pn1,this.rp=1/this.p,this.h1=1/this.pn1,this.pfact=(this.p+1)*this.h1,this.es=0;var t=this.tilt,e=this.azi;this.cg=Math.cos(e),this.sg=Math.sin(e),this.cw=Math.cos(t),this.sw=Math.sin(t)},forward:function(t){t.x-=this.long0;var e,i,r,o,n=Math.sin(t.y),s=Math.cos(t.y),l=Math.cos(t.x);switch(this.mode){case a.OBLIQ:i=this.sinph0*n+this.cosph0*s*l;break;case a.EQUIT:i=s*l;break;case a.S_POLE:i=-n;break;case a.N_POLE:i=n}switch(e=(i=this.pn1/(this.p-i))*s*Math.sin(t.x),this.mode){case a.OBLIQ:i*=this.cosph0*n-this.sinph0*s*l;break;case a.EQUIT:i*=n;break;case a.N_POLE:i*=-(s*l);break;case a.S_POLE:i*=s*l}return o=1/((r=i*this.cg+e*this.sg)*this.sw*this.h1+this.cw),e=(e*this.cg-i*this.sg)*this.cw*o,i=r*o,t.x=e*this.a,t.y=i*this.a,t},inverse:function(t){t.x/=this.a,t.y/=this.a;var e,i,n,s,l,h={x:t.x,y:t.y};n=1/(this.pn1-t.y*this.sw),e=this.pn1*t.x*n,i=this.pn1*t.y*this.cw*n,t.x=e*this.cg+i*this.sg,t.y=i*this.cg-e*this.sg;var u=(0,o.default)(t.x,t.y);if(Math.abs(u)<r.EPSLN)h.x=0,h.y=t.y;else{switch(l=1-u*u*this.pfact,s=Math.sqrt(1-(l=(this.p-Math.sqrt(l))/(this.pn1/u+u/this.pn1))*l),this.mode){case a.OBLIQ:h.y=Math.asin(s*this.sinph0+t.y*l*this.cosph0/u),t.y=(s-this.sinph0*Math.sin(h.y))*u,t.x*=l*this.cosph0;break;case a.EQUIT:h.y=Math.asin(t.y*l/u),t.y=s*u,t.x*=l;break;case a.N_POLE:h.y=Math.asin(s),t.y=-t.y;break;case a.S_POLE:h.y=-Math.asin(s)}h.x=Math.atan2(t.x,t.y)}return t.x=h.x+this.long0,t.y=h.y,t},names:["Tilted_Perspective","tpers"]}}),a("bZa0m",function(t,i){e(t.exports,"default",()=>o);var r=n("9ijWS"),o={init:function(){if(this.flip_axis="x"===this.sweep?1:0,this.h=Number(this.h),this.radius_g_1=this.h/this.a,this.radius_g_1<=0||this.radius_g_1>1e10)throw Error();if(this.radius_g=1+this.radius_g_1,this.C=this.radius_g*this.radius_g-1,0!==this.es){var t=1-this.es;this.radius_p=Math.sqrt(t),this.radius_p2=t,this.radius_p_inv2=1/t,this.shape="ellipse"}else this.radius_p=1,this.radius_p2=1,this.radius_p_inv2=1,this.shape="sphere";this.title||(this.title="Geostationary Satellite View")},forward:function(t){var e,i,o,n,a=t.x,s=t.y;if(a-=this.long0,"ellipse"===this.shape){s=Math.atan(this.radius_p2*Math.tan(s));var l=this.radius_p/(0,r.default)(this.radius_p*Math.cos(s),Math.sin(s));if(i=l*Math.cos(a)*Math.cos(s),o=l*Math.sin(a)*Math.cos(s),n=l*Math.sin(s),(this.radius_g-i)*i-o*o-n*n*this.radius_p_inv2<0)return t.x=Number.NaN,t.y=Number.NaN,t;e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(o/(0,r.default)(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(o/e),t.y=this.radius_g_1*Math.atan(n/(0,r.default)(o,e)))}else"sphere"===this.shape&&(i=Math.cos(a)*(e=Math.cos(s)),o=Math.sin(a)*e,n=Math.sin(s),e=this.radius_g-i,this.flip_axis?(t.x=this.radius_g_1*Math.atan(o/(0,r.default)(n,e)),t.y=this.radius_g_1*Math.atan(n/e)):(t.x=this.radius_g_1*Math.atan(o/e),t.y=this.radius_g_1*Math.atan(n/(0,r.default)(o,e))));return t.x=t.x*this.a,t.y=t.y*this.a,t},inverse:function(t){var e,i,o,n,a=-1,s=0,l=0;if(t.x=t.x/this.a,t.y=t.y/this.a,"ellipse"===this.shape){this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*(0,r.default)(1,l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*(0,r.default)(1,s));var h=l/this.radius_p;if(e=s*s+h*h+a*a,(o=(i=2*this.radius_g*a)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(o))/(2*e),a=this.radius_g+n*a,s*=n,l*=n,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a),t.y=Math.atan(this.radius_p_inv2*Math.tan(t.y))}else if("sphere"===this.shape){if(this.flip_axis?(l=Math.tan(t.y/this.radius_g_1),s=Math.tan(t.x/this.radius_g_1)*Math.sqrt(1+l*l)):(s=Math.tan(t.x/this.radius_g_1),l=Math.tan(t.y/this.radius_g_1)*Math.sqrt(1+s*s)),e=s*s+l*l+a*a,(o=(i=2*this.radius_g*a)*i-4*e*this.C)<0)return t.x=Number.NaN,t.y=Number.NaN,t;n=(-i-Math.sqrt(o))/(2*e),a=this.radius_g+n*a,s*=n,l*=n,t.x=Math.atan2(s,a),t.y=Math.atan(l*Math.cos(t.x)/a)}return t.x=t.x+this.long0,t},names:["Geostationary Satellite View","Geostationary_Satellite","geos"]}}),a("iGUgk",function(t,i){e(t.exports,"register",()=>s);var r=n("5zIbz"),o=n("gzr8q"),a=n("liPLq");function s(t){let e,i;let n=Object.keys(t.defs),s=n.length;for(e=0;e<s;++e){let i=n[e];if(!(0,o.get)(i)){let e=t.defs(i),n=e.units;n||"longlat"!==e.projName||(n="degrees"),(0,o.addProjection)(new r.default({code:i,axisOrientation:e.axis,metersPerUnit:e.to_meter,units:n}))}}for(e=0;e<s;++e){let r=n[e],l=(0,o.get)(r);for(i=0;i<s;++i){let e=n[i],s=(0,o.get)(e);if(!(0,a.get)(r,e)){if(t.defs[r]===t.defs[e])(0,o.addEquivalentProjections)([l,s]);else{let i=t(r,e);(0,o.addCoordinateTransforms)(l,s,(0,o.createSafeCoordinateTransform)(l,s,i.forward),(0,o.createSafeCoordinateTransform)(s,l,i.inverse))}}}}}}),a("5up1I",function(t,i){e(t.exports,"default",()=>N);var r=n("iGyOD"),o=n("6pyIt"),a=n("hvEnP"),s=n("7TB1l"),l=n("ljDIj"),h=n("dEQmT"),u=n("j2K3b"),c=n("cgPpQ"),f=n("jEnSw"),d=n("9z1G1");let p={POINT:u.default,LINESTRING:a.default,POLYGON:c.default,MULTIPOINT:l.default,MULTILINESTRING:s.default,MULTIPOLYGON:h.default},g="EMPTY",m={START:0,TEXT:1,LEFT_PAREN:2,RIGHT_PAREN:3,NUMBER:4,COMMA:5,EOF:6},y={Point:"POINT",LineString:"LINESTRING",Polygon:"POLYGON",MultiPoint:"MULTIPOINT",MultiLineString:"MULTILINESTRING",MultiPolygon:"MULTIPOLYGON",GeometryCollection:"GEOMETRYCOLLECTION",Circle:"CIRCLE"};class x{constructor(t){this.wkt=t,this.index_=-1}isAlpha_(t){return t>="a"&&t<="z"||t>="A"&&t<="Z"}isNumeric_(t,e){return e=void 0!==e&&e,t>="0"&&t<="9"||"."==t&&!e}isWhiteSpace_(t){return" "==t||"	"==t||"\r"==t||"\n"==t}nextChar_(){return this.wkt.charAt(++this.index_)}nextToken(){let t;let e=this.nextChar_(),i=this.index_,r=e;if("("==e)t=m.LEFT_PAREN;else if(","==e)t=m.COMMA;else if(")"==e)t=m.RIGHT_PAREN;else if(this.isNumeric_(e)||"-"==e)t=m.NUMBER,r=this.readNumber_();else if(this.isAlpha_(e))t=m.TEXT,r=this.readText_();else if(this.isWhiteSpace_(e))return this.nextToken();else if(""===e)t=m.EOF;else throw Error("Unexpected character: "+e);return{position:i,value:r,type:t}}readNumber_(){let t;let e=this.index_,i=!1,r=!1;do"."==t?i=!0:("e"==t||"E"==t)&&(r=!0),t=this.nextChar_();while(this.isNumeric_(t,i)||!r&&("e"==t||"E"==t)||r&&("-"==t||"+"==t))return parseFloat(this.wkt.substring(e,this.index_--))}readText_(){let t;let e=this.index_;do t=this.nextChar_();while(this.isAlpha_(t))return this.wkt.substring(e,this.index_--).toUpperCase()}}class v{constructor(t){this.lexer_=t,this.token_={position:0,type:m.START},this.layout_="XY"}consume_(){this.token_=this.lexer_.nextToken()}isTokenType(t){return this.token_.type==t}match(t){let e=this.isTokenType(t);return e&&this.consume_(),e}parse(){return this.consume_(),this.parseGeometry_()}parseGeometryLayout_(){let t="XY",e=this.token_;if(this.isTokenType(m.TEXT)){let i=e.value;"Z"===i?t="XYZ":"M"===i?t="XYM":"ZM"===i&&(t="XYZM"),"XY"!==t&&this.consume_()}return t}parseGeometryCollectionText_(){if(this.match(m.LEFT_PAREN)){let t=[];do t.push(this.parseGeometry_());while(this.match(m.COMMA))if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePointText_(){if(this.match(m.LEFT_PAREN)){let t=this.parsePoint_();if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseLineStringText_(){if(this.match(m.LEFT_PAREN)){let t=this.parsePointList_();if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePolygonText_(){if(this.match(m.LEFT_PAREN)){let t=this.parseLineStringTextList_();if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiPointText_(){if(this.match(m.LEFT_PAREN)){let t;if(t=this.token_.type==m.LEFT_PAREN?this.parsePointTextList_():this.parsePointList_(),this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiLineStringText_(){if(this.match(m.LEFT_PAREN)){let t=this.parseLineStringTextList_();if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parseMultiPolygonText_(){if(this.match(m.LEFT_PAREN)){let t=this.parsePolygonTextList_();if(this.match(m.RIGHT_PAREN))return t}throw Error(this.formatErrorMessage_())}parsePoint_(){let t=[],e=this.layout_.length;for(let i=0;i<e;++i){let e=this.token_;if(this.match(m.NUMBER))t.push(e.value);else break}if(t.length==e)return t;throw Error(this.formatErrorMessage_())}parsePointList_(){let t=[this.parsePoint_()];for(;this.match(m.COMMA);)t.push(this.parsePoint_());return t}parsePointTextList_(){let t=[this.parsePointText_()];for(;this.match(m.COMMA);)t.push(this.parsePointText_());return t}parseLineStringTextList_(){let t=[this.parseLineStringText_()];for(;this.match(m.COMMA);)t.push(this.parseLineStringText_());return t}parsePolygonTextList_(){let t=[this.parsePolygonText_()];for(;this.match(m.COMMA);)t.push(this.parsePolygonText_());return t}isEmptyGeometry_(){let t=this.isTokenType(m.TEXT)&&this.token_.value==g;return t&&this.consume_(),t}formatErrorMessage_(){return"Unexpected `"+this.token_.value+"` at position "+this.token_.position+" in `"+this.lexer_.wkt+"`"}parseGeometry_(){let t=this.token_;if(this.match(m.TEXT)){let e;let i=t.value;this.layout_=this.parseGeometryLayout_();let r=this.isEmptyGeometry_();if("GEOMETRYCOLLECTION"==i){if(r)return new o.default([]);let t=this.parseGeometryCollectionText_();return new o.default(t)}let n=p[i];if(!n)throw Error("Invalid geometry type: "+i);if(r)e="POINT"==i?[NaN,NaN]:[];else switch(i){case"POINT":e=this.parsePointText_();break;case"LINESTRING":e=this.parseLineStringText_();break;case"POLYGON":e=this.parsePolygonText_();break;case"MULTIPOINT":e=this.parseMultiPointText_();break;case"MULTILINESTRING":e=this.parseMultiLineStringText_();break;case"MULTIPOLYGON":e=this.parseMultiPolygonText_()}return new n(e,this.layout_)}throw Error(this.formatErrorMessage_())}}class b extends f.default{constructor(t){super(),t=t||{},this.splitCollection_=void 0!==t.splitCollection&&t.splitCollection}parse_(t){return new v(new x(t)).parse()}readFeatureFromText(t,e){let i=this.readGeometryFromText(t,e),o=new r.default;return o.setGeometry(i),o}readFeaturesFromText(t,e){let i=[],o=this.readGeometryFromText(t,e);i=this.splitCollection_&&"GeometryCollection"==o.getType()?o.getGeometriesArray():[o];let n=[];for(let t=0,e=i.length;t<e;++t){let e=new r.default;e.setGeometry(i[t]),n.push(e)}return n}readGeometryFromText(t,e){let i=this.parse_(t);return(0,d.transformGeometryWithOptions)(i,!1,e)}writeFeatureText(t,e){let i=t.getGeometry();return i?this.writeGeometryText(i,e):""}writeFeaturesText(t,e){if(1==t.length)return this.writeFeatureText(t[0],e);let i=[];for(let e=0,r=t.length;e<r;++e)i.push(t[e].getGeometry());let r=new o.default(i);return this.writeGeometryText(r,e)}writeGeometryText(t,e){return A((0,d.transformGeometryWithOptions)(t,!0,e))}}function w(t){let e=t.getCoordinates();return 0===e.length?"":e.join(" ")}function _(t){let e=t.getCoordinates(),i=[];for(let t=0,r=e.length;t<r;++t)i.push(e[t].join(" "));return i.join(",")}function S(t){let e=[],i=t.getLinearRings();for(let t=0,r=i.length;t<r;++t)e.push("("+_(i[t])+")");return e.join(",")}let E={Point:w,LineString:_,Polygon:S,MultiPoint:function(t){let e=[],i=t.getPoints();for(let t=0,r=i.length;t<r;++t)e.push("("+w(i[t])+")");return e.join(",")},MultiLineString:function(t){let e=[],i=t.getLineStrings();for(let t=0,r=i.length;t<r;++t)e.push("("+_(i[t])+")");return e.join(",")},MultiPolygon:function(t){let e=[],i=t.getPolygons();for(let t=0,r=i.length;t<r;++t)e.push("("+S(i[t])+")");return e.join(",")},GeometryCollection:function(t){let e=[],i=t.getGeometries();for(let t=0,r=i.length;t<r;++t)e.push(A(i[t]));return e.join(",")}};function A(t){let e=t.getType(),i=(0,E[e])(t),r=y[e];if("function"==typeof t.getFlatCoordinates){let e=function(t){let e=t.getLayout(),i="";return("XYZ"===e||"XYZM"===e)&&(i+="Z"),("XYM"===e||"XYZM"===e)&&(i+="M"),i}(t);e.length>0&&(r+=" "+e)}return 0===i.length?r+" "+g:r+"("+i+")"}var N=b}),a("jSBAJ",function(t,i){let r,o;function n(t,e){e=e||console.log,fetch("https://qlf-collaboratif.ign.fr/collaboratif-develop/gcms/api/"+t,{method:"GET",headers:{Authorization:"Basic "+btoa(r+":"+o)}}).then(t=>t.ok?t.json():Promise.reject(t)).then(t=>{e(t)}).catch(t=>{401===t.status&&(o=null),t.error=!0,e(t)})}function a(){return!!o&&btoa(r+":"+o)}e(t.exports,"getAuth",()=>a),e(t.exports,"default",()=>s);var s=new class{constructor(){}login(t,e,i){r=t,o=e,n("users/me",i)}getMe(t){n("users/me",t)}logout(){o=null}isConnected(){return!!o}getCommunity(t,e){n("communities/"+t,e)}getLayers(t,e){n("communities/"+t+"/layers",e)}getFullLayers(t,e){this.getLayers(t,t=>{if(!t.length){e(t);return}let i=0;t.forEach(r=>{switch(r.type){case"feature-type":i++,this.getTable(r.database,r.table,o=>{r.table=o,--i||e(t)});break;case"geoservice":i++,this.getGeoservice(r.geoservice.id,o=>{r.geoservice=o,--i||e(t)})}})})}getLayer(t,e,i){n("communities/"+t+"/layers/"+e,i)}getGeoservice(t,e){n("geoservices/"+t,t=>{if(t.style)e(t);else{let i=t.url.split("?")[0]+"?SERVICE=WMTS&VERSION=1.0.0&REQUEST=GetCapabilities";fetch(i).then(t=>t.text()).then(t=>new window.DOMParser().parseFromString(t,"text/xml")).then(i=>{let r=i.querySelectorAll("Contents Layer"),o=Array.prototype.find.call(r,e=>e.querySelector("Identifier").textContent===t.layers);if(o){let e=o.querySelector("Style");e&&(e=e.querySelector("Identifier"),t.style=e?e.textContent:null)}e(t)})}})}getTable(t,e,i){n("databases/"+t+"/tables/"+e,i)}}}),a("2yyih",function(i,r){e(i.exports,"default",()=>w);var o=n("lqNjm"),a=n("4lFOe"),s=n("2zf1Y"),l=n("3yg5q"),h=n("ayeEa"),u=n("h6Aha"),c=n("d5AAH"),f=n("l9IGS"),d=n("kuKBR"),p=n("h1ihb"),g=n("awidM"),m=n("doPrp"),y=n("jSBAJ");let x={};x.formatProperties=function(t,e){if(!t||!t.replace||!e)return t;var i=t.replace(/.*\$\{([^}]*)\}.*/,"$1");return i===t?t:x.formatProperties(t.replace("${"+i+"}",e.get(i)||""),e)},x.formatFeatureStyle=function(t,e){if(!t)return{};var i={};for(var r in t)i[r]=x.formatProperties(t[r],e);return i},x.StrokeLineDash=function(t){var e=Number(t.strokeWidth)||2;switch(t.strokeDashstyle){case"dot":return[1,2*e];case"dash":return[2*e,2*e];case"dashdot":return[2*e,4*e,1,4*e];case"longdash":return[4*e,2*e];case"longdashdot":return[4*e,4*e,1,4*e];default:return}},x.Stroke=function(t){if(0===t.strokeOpacity)return;let e=this.StrokeLineDash(t);var i=new c.default({color:t.strokeColor||"#00f",width:Number(t.strokeWidth)||1,lineDash:e,lineCap:t.strokeLinecap||"round"});if(t.strokeOpacity<1){var r=(0,o.asArray)(i.getColor());r.length&&(r[4]=t.strokeOpacity,i.setColor(r))}return i},x.Fill=function(t){if(0===t.fillOpacity)return;let e=new s.default({color:t.fillColor||"rgba(255,255,255,0.5)"});if(t.fillOpacity<1){let i=(0,o.asArray)(e.getColor());i.length&&(i[3]=Number(t.fillOpacity),e.setColor(i))}return t.fillPattern&&(e=new l.default({fill:e,pattern:t.fillPattern,color:t.patternColor,angle:45})),e};let v={};var b=new a.default({radius:8,stroke:new c.default({color:"#fff",width:1.5}),fill:new s.default({color:"rgba(255,0,0,.5)"})});x.setImage=function(t,e,i){var r,o;if(e.img&&(o=e.img),o){if(v[o])r=v[o];else{let e=new Headers;e.set("Authorization","Basic "+(0,y.getAuth)()),fetch(o,{headers:e}).then(e=>{e.arrayBuffer().then(e=>{let r=btoa(String.fromCharCode(...new Uint8Array(e)));v[o]=new h.default({src:"data:image/png;base64,"+r}),t.setImage(v[o]),i.changed()})}),r=b,v[o]=r}}else{var n=Number(e.pointRadius)||5,s={square:[4,n,void 0,Math.PI/4]};switch(e.graphicName){case"cross":case"star":case"rectangle":case"square":case"triangle":case"x":var l=(s={cross:[4,n,0,0],rectangle:[4,n,void 0,Math.PI/4],square:[4,n,void 0,Math.PI/4],triangle:[3,n,void 0,0],star:[5,n,n/2,0],x:[4,n,0,Math.PI/4]})[e.graphicName]||s.square;if(r=new u.default({points:l[0],radius:l[1],radius2:l[2],rotation:l[3],stroke:x.Stroke(e),fill:x.Fill(e)}),"rectangle"===e.graphicName){var c=r.getImage(),f=document.createElement("canvas");f.width=c.width,f.height=c.height,f.getContext("2d").drawImage(c,0,0,c.width,c.height,c.width/4,0,c.width/2,c.height),c.getContext("2d").clearRect(0,0,c.width,c.height),c.getContext("2d").drawImage(f,0,0)}break;case"lightning":r=new p.default({glyph:"fa-bolt",radius:n,stroke:x.Stroke(e),fill:x.Fill(e)});break;case"church":r=new p.default({glyph:"fa-venus",rotation:Math.PI,radius:n,stroke:x.Stroke(e),fill:x.Fill(e)});break;default:r=new a.default({radius:n,stroke:x.Stroke(e),fill:x.Fill(e)})}}t.setImage(r)},x.Text=function(t){if(t.label){var e={font:(t.fontWeight||"")+" "+(t.fontSize||"12")+"px "+(t.fontFamily||"Sans-serif"),text:t.label||"",rotation:t.labelRotation||0,textAlign:"left",textBaseline:"middle",offsetX:t.labelXOffset||0,offsetY:-t.labelYOffset||0,stroke:new c.default({color:t.labelOutlineColor||"#fff",width:Number(t.labelOutlineWidth)||2}),fill:new s.default({color:t.fontColor})};return new d.default(e)}},x.getFeatureStyleFn=function(e){e||(e={});var i=new f.default({text:x.Text({label:"›",fontWeight:"bold",fontSize:"25"})});return function(r,o){let n;if(!e.style&&e.name&&x[e.name])return x[e.name](e)(r);let a=e.style;if(e.style&&e.style.children){let i=r.getProperties();delete i.geometry;for(let r=0;r<e.style.children.length;r++){let o=e.style.children[r];if(o.mongo&&o.mongo.matches||(o.mongo=t(m).parse(o.condition)),o.mongo.matches(i)){a=o;break}}}let s=x.formatFeatureStyle(a,r);a&&a.name&&(e.symbo_attribute?(s.radius=5,s.img=x.getSymbolURI(e.style,e.style.name+"/"+r.get(e.symbo_attribute.name),e.style.graphicWidth,e.style.graphicHeight,r)):a.externalGraphic&&(s.radius=5,s.img=x.getSymbolURI(e.style,a.externalGraphic,a.graphicWidth,a.graphicHeight,r)));let l=new f.default({});if(l.setText(x.Text(s)),x.setImage(l,s,r),l.setFill(x.Fill(s)),l.setStroke(x.Stroke(s)),e.style&&e.style.directionField)try{n=JSON.parse(e.style.directionField)}catch(t){n=null,console.log("bad json direction field for style "+e.style.name)}if(o<2&&n instanceof Object&&"attribute"in n&&"sensDirect"in n&&"sensInverse"in n){let t=n.sensDirect,e=n.sensInverse,o=r.get(n.attribute);(o===t||o===e)&&(i.getText().setRotation(function(i,r){if(i!=t&&i!=e)return 0;"MultiLineString"===r.getType()&&(r=r.getLineString(0));for(var o,n,a=r.getCoordinates(),s=0,l=r.getLength(),h=0;h<a.length-1&&!((s+=Math.sqrt((o=a[h+1][0]-a[h][0])*o+(n=a[h+1][1]-a[h][1])*n))>=l/2);h++);return i==t?-Math.atan2(n,o):Math.PI-Math.atan2(n,o)}(o,r.getGeometry())),l=[l,i])}return l}},x.getSymbolURI=function(t,e,i,r){return t.uri.replace(/gcms\/.*/,"")+"gcms/style/image/"+e+"?width="+i+"&height="+r},x.Default=x.getFeatureStyleFn()()[0],x.zombie=function(){function t(t,e){return t.get("detruit")?[255,0,0,e]:[0,0,255,e]}return function(e){var i={strokeColor:t(e,1),strokeWidth:2,fillColor:t(e,.5)};return[new f.default({text:x.Text(i),image:x.Image(i),fill:x.Fill(i),stroke:x.Stroke(i)})]}},x.detruit=function(){return function(t){if(!t.get("detruit"))return[];var e={strokeWidth:2,strokeColor:[255,0,0,.5]};return[new f.default({text:x.Text(e),image:x.Image(e),fill:x.Fill(e),stroke:x.Stroke(e)})]}},x.vivant=function(){return function(t){if(t.get("detruit"))return[];var e={strokeWidth:2,strokeColor:[0,0,255,.5]};return[new f.default({text:x.Text(e),image:x.Image(e),fill:x.Fill(e),stroke:x.Stroke(e)})]}},x.combine=function(t){return t instanceof Array||(t=[t]),function(e,i){for(var r=[],o=0;o<t.length;o++)for(var n=t[o](e,i),a=0;a<n.length;a++)r.push(n[a]);return r}},x.troncon_de_route=function(t){return t=t||{},(0,g.default)("BDTOPO_V3:troncon_de_route",{sens:t.sens||2.5})},x.sens=function(t){return t||(t={attribute:"sens_de_circulation",glyph:"›",size:"20px",direct:"Sens direct",inverse:"Sens inverse"}),function(e){var i=e.get(t.attribute),r={label:i==t.direct||i==t.inverse?t.glyph:"",fontWeight:"bold",fontSize:t.size,labelRotation:function(e,i){if(e!=t.direct&&e!=t.inverse)return 0;for(var r,o,n=i.getCoordinates(),a=0,s=i.getLength(),l=0;l<n.length-1&&!((a+=Math.sqrt((r=n[l+1][0]-n[l][0])*r+(o=n[l+1][1]-n[l][1])*o))>=s/2);l++);return e==t.direct?-Math.atan2(o,r):Math.PI-Math.atan2(o,r)}(i,e.getGeometry())};return[new f.default({text:x.Text(r)})]}},x.toponyme=function(t){return t||(t={attribute:"nom",size:"12px"}),t.minResolution||(t.minResolution=0),t.maxResolution||(t.maxResolution=2),function(e,i){if(i>t.maxResolution||i<t.minResolution)return[];var r={label:e.get(t.attribute),fontWeight:t.weight,fontSize:t.size};return[new f.default({text:x.Text(r)})]}},x.batiment=function(t){function e(t,e){switch(t.get("nature")){case"Industriel, agricole ou commercial":return[51,102,153,e];case"Remarquable":return[0,192,0,e];default:switch(t.get("fonction")){case"Indifférenciée":return[128,128,128,e];case"Sportive":return[51,153,102,e];case"Religieuse":return[153,102,51,e];default:return[153,51,51,e]}}}return t||(t={}),function(i){if(i.get("detruit"))return[];var r={strokeColor:e(i,1),fillColor:e(i,.5)};return(/en service/i.test(i.get("etat_de_l_objet"))||(r.dash=!0,r.fillColor=[0,0,0,0]),t.symbol&&(r.label=function(t){switch(t.get("fonction")){case"Commerciale":return"";case"Sportive":return"";case"Mairie":return"";case"Gare":return"";case"Industrielle":return"";default:return null}}(i),r.fontFamily="Fontawesome",r.fontColor=t.color||"magenta"),r.label)?[new f.default({text:x.Text(r),stroke:x.Stroke(r),fill:x.Fill(r)})]:[new f.default({stroke:x.Stroke(r),fill:x.Fill(r)})]}};var w=x}),a("awidM",function(t,i){e(t.exports,"default",()=>d);var r,o,a,s,l=n("l9IGS"),h=n("kuKBR"),u=n("d5AAH"),c=n("2zf1Y"),f=n("lSokP");r={},o=0,a={111:{color:[230,0,77,255],title:"Continuous urban fabric"},112:{color:[255,0,0,255],title:"Discontinuous urban fabric"},121:{color:[204,77,242,255],title:"Industrial or commercial units"},122:{color:[204,0,0,255],title:"Road and rail networks and associated land"},123:{color:[230,204,204,255],title:"Port areas"},124:{color:[230,204,230,255],title:"Airports"},131:{color:[166,0,204,255],title:"Mineral extraction sites"},132:{color:[166,77,0,255],title:"Dump sites"},133:{color:[255,77,255,255],title:"Construction sites"},141:{color:[255,166,255,255],title:"Green urban areas"},142:{color:[255,230,255,255],title:"Sport and leisure facilities"},211:{color:[255,255,168,255],title:"Non-irrigated arable land"},212:{color:[255,255,0,255],title:"Permanently irrigated land"},213:{color:[230,230,0,255],title:"Rice fields"},221:{color:[230,128,0,255],title:"Vineyards"},222:{color:[242,166,77,255],title:"Fruit trees and berry plantations"},223:{color:[230,166,0,255],title:"Olive groves"},231:{color:[230,230,77,255],title:"Pastures"},241:{color:[255,230,166,255],title:"Annual crops associated with permanent crops"},242:{color:[255,230,77,255],title:"Complex cultivation patterns"},243:{color:[230,204,77,255],title:"Land principally occupied by agriculture with significant areas of natural vegetation"},244:{color:[242,204,166,255],title:"Agro-forestry areas"},311:{color:[128,255,0,255],title:"Broad-leaved forest"},312:{color:[0,166,0,255],title:"Coniferous forest"},313:{color:[77,255,0,255],title:"Mixed forest"},321:{color:[204,242,77,255],title:"Natural grasslands"},322:{color:[166,255,128,255],title:"Moors and heathland"},323:{color:[166,230,77,255],title:"Sclerophyllous vegetation"},324:{color:[166,242,0,255],title:"Transitional woodland-shrub"},331:{color:[230,230,230,255],title:"Beaches dunes sands"},332:{color:[204,204,204,255],title:"Bare rocks"},333:{color:[204,255,204,255],title:"Sparsely vegetated areas"},334:{color:[0,0,0,255],title:"Burnt areas"},335:{color:[166,230,204,255],title:"Glaciers and perpetual snow"},411:{color:[166,166,255,255],title:"Inland marshes"},412:{color:[77,77,255,255],title:"Peat bogs"},421:{color:[204,204,255,255],title:"Salt marshes"},422:{color:[230,230,255,255],title:"Salines"},423:{color:[166,166,230,255],title:"Intertidal flats"},511:{color:[0,204,242,255],title:"Water courses"},512:{color:[128,242,230,255],title:"Water bodies"},521:{color:[0,255,166,255],title:"Coastal lagoons"},522:{color:[166,255,230,255],title:"Estuaries"},523:{color:[230,242,255,255],title:"Sea and ocean"}},(s=function(t,e){var i,n,s,d,p,g,m,y,x,v,b,w,_;switch(e=e||{},t){case"BDTOPO_V3:troncon_de_route":return i=e,n=function(t){if(i.vert&&t.get("itineraire_vert"))return 0>t.get("position_par_rapport_au_sol")?[0,128,0,.7]:t.get("position_par_rapport_au_sol")>0?[0,100,0,1]:[0,128,0,1];if(!t.get("importance"))return"magenta";if("Piste cyclable"===t.get("nature"))return[27,177,27,.5];if("0"!=t.get("position_par_rapport_au_sol")){var e;switch(t.get("importance")){case"1":e=[177,27,177,1];break;case"2":e=[177,27,27,1];break;case"3":e=[217,119,0,1];break;case"4":e=[255,225,0,1];break;case"5":e=[204,204,204,1];break;default:e=[211,211,211,1]}return 0>t.get("position_par_rapport_au_sol")&&(e[3]=.7),e}switch(t.get("importance")){case"1":return[255,0,255,1];case"2":return[255,0,0,1];case"3":return[255,165,0,1];case"4":return[255,255,0,1];case"5":return[255,255,255,1];default:return[211,211,211,1]}},s=function(t){if(!t.get("position_par_rapport_au_sol"))return 100;var e=Number(t.get("position_par_rapport_au_sol"));return e>0?10+10*e-(Number(t.get("importance"))||10):e<0?Math.max(4+e,0):10-(Number(t.get("importance"))||10)},d=function(t){for(var e,i,r=t.getCoordinates(),o=0,n=t.getLength(),a=0;a<r.length-1&&!((o+=Math.sqrt((e=r[a+1][0]-r[a][0])*e+(i=r[a+1][1]-r[a][1])*i))>=n/2);a++);return-Math.atan2(i,e)},p=function(t){switch(t.get("nature")){case"Escalier":return[1,4];case"Sentier":return[8,10]}},g="ROUT-"+o+++"-",function(t,e){var o=!0===i.sens||e<i.sens,a=g+t.get("nature")+"-"+t.get("position_par_rapport_au_sol")+"-"+(o?t.get("sens_de_circulation"):"Sans objet")+"-"+t.get("position_par_rapport_au_sol")+"-"+t.get("importance")+"-"+t.get("largeur_de_chaussee")+"-"+t.get("itineraire_vert"),f=r[a];return f||(f=r[a]=[new l.default({text:o&&i.sens&&!/double|sans/i.test(t.get("sens_de_circulation"))?new h.default({text:"Sens direct"==t.get("sens_de_circulation")?"→":"←",font:"bold 12px sans-serif",placement:"point",textAlign:"center",fill:new c.default({color:[0,0,0,.3]}),stroke:new u.default({color:[0,0,0,.3],width:1.5}),rotateWithView:!0}):null,stroke:new u.default({color:n(t),width:Math.max(t.get("largeur_de_chaussee")||2,2),lineDash:p(t)}),zIndex:s(t)-100})]),f[0].getText()&&f[0].getText().setRotation(d(t.getGeometry())),f};case"BDTOPO_V3:batiment":return m=e,y=function(t){switch(t.get("nature")){case"Industriel, agricole ou commercial":return[51,102,153,1];case"Remarquable":return[0,192,0,1];default:switch(t.get("usage_1")){case"Résidentiel":case"Indifférencié":return[128,128,128,1];case"Industriel":case"Commercial et services":return[51,102,153,1];case"Sportif":return[51,153,102,1];case"Religieux":return[153,102,51,1];default:return[153,51,51,1]}}},x=function(t){switch(t.get("usage_1")){case"Commercial et services":return"";case"Sportif":return"";default:return null}},v="BATI-"+o+++"-",function(t){if(t.get("detruit"))return[];var e=r[v+t.get("usage_1")+"-"+t.get("nature")+"-"+t.get("etat_de_l_objet")];if(!e){var i=y(t),o=[i[0],i[1],i[1],.5],n=!/en service/i.test(t.get("etat_de_l_objet"));n&&(o[3]=.1);var a=m.symbol?x(t):null;return[new l.default({text:a?new h.default({text:a,font:"12px FontAwesome",fill:new c.default({color:[0,0,0,.6]})}):null,fill:new c.default({color:o}),stroke:new u.default({color:i,width:1.5,lineDash:n?[5,5]:null})})]}return e};case"CADASTRALPARCELS.PARCELLAIRE_EXPRESS:parcelle":return b=e,w=new l.default({text:new h.default({text:"0000",font:"bold 12px sans-serif",fill:new c.default({color:[100,0,255,1]}),stroke:new u.default({color:[255,255,255,.8],width:3})}),stroke:new u.default({color:[255,165,0,1],width:1.5}),fill:new c.default({color:[100,0,255,.1]})}),function(t,e){return e<.8?w.getText().setFont("bold 12px sans-serif"):w.getText().setFont("bold 10px sans-serif"),b.section?w.getText().setText(t.get("section")+"-"+(t.get("numero")||"").replace(/^0*/,"")):w.getText().setText((t.get("numero")||"").replace(/^0*/,"")),w};default:if(!/LANDCOVER/.test(t))return console.warn("[ol/style/geoportailStyle] no style defined for type: "+t),(0,f.default)();return e.date=t.replace(/[^\d]*(\d*).*/,"$1"),_=e,function(t){var e=t.get("code_"+_.date),i=r["CLC-"+e];if(!i){var o=a[e].color.slice();o[3]=_.opacity||1,i=r["CLC-"+e]=new l.default({fill:new c.default({color:o||[255,255,255,.5]})})}return i}}}).clcColors=JSON.parse(JSON.stringify(a));var d=s}),a("lSokP",function(t,i){e(t.exports,"default",()=>c);var r,o,a,s=n("l9IGS"),l=n("4lFOe"),h=n("d5AAH"),u=n("2zf1Y");r=[255,255,255,1],o=[0,153,255,1],a=[new s.default({stroke:new h.default({color:r,width:5})}),new s.default({image:new l.default({radius:6,fill:new u.default({color:o}),stroke:new h.default({color:r,width:1.5})}),stroke:new h.default({color:o,width:3}),fill:new u.default({color:[255,255,255,.5]})})];var c=function(t){if(!0===t)return a;t=t||{};var e=new u.default({color:t.fillColor||"rgba(255,255,255,0.4)"}),i=new h.default({color:t.color||"#3399CC",width:1.25});return[new s.default({image:new l.default({fill:e,stroke:i,radius:5}),fill:e,stroke:i})]}}),a("doPrp",function(t,i){e(t.exports,"DotNotationPointers",()=>r,t=>r=t),e(t.exports,"parse",()=>o,t=>o=t),e(t.exports,"inclusive",()=>a,t=>a=t),e(t.exports,"search",()=>s,t=>s=t),e(t.exports,"compressQuery",()=>l,t=>l=t);var r,o,a,s,l,h=n("fU73w"),u=n("iZyl0"),c=r=n("lUJRH"),f=function(t){this.parts=function t(e){if(e instanceof Function||"string"==typeof e)return e instanceof Function&&(e="("+e+").call(obj)"),[new x(void 0,"$where",Function("return function(){var obj=this; return "+e+"}")())];var i,r=[];for(var o in e)if(o in d){var n=e[o],a=[];n.forEach(function(e){a.push(new x(void 0,"$and",[e],t(e)))}),r.push(new x(void 0,o,e[o],a))}else if(o in p)r.push(new x(void 0,o,e[o]));else if((i=e[o])instanceof Object&&!(i instanceof Array)&&y(e[o]))for(var s in e[o]){var l=e[o][s];r.push(function e(i,r,o){if("$elemMatch"===r)var n=function(i){if(!y(i))return{parts:t(i),implicitField:!1};var r=[];for(var o in i){var n=i[o];r.push(e(void 0,o,n))}return{parts:r,implicitField:!0}}(o),a=n.parts,s=n.implicitField;else if("$not"===r)var a=function(t,i){var r=[];for(var o in i){var n=i[o];r.push(e(t,o,n))}return r}(i,o);else var a=[];return new x(i,r,o,a,s)}(o,s,l))}else r.push(new x(o,"$eq",e[o]));return r}(t)};f.prototype={},f.prototype.map=function(t){return function t(e,i){var r={};return e.forEach(function(e){if("$and"===e.operator)var o=t(e.parts,i);else if(e.operator in d)var o={$or:e.parts.map(function(e){return t(e.parts,i)})};else{var n={};n[e.operator]=e.operand;var a=i(e.field,n),o=function(t,e){if(void 0===e){var i={};if(void 0===t.field)i[t.operator]=t.operand;else{var r={};r[t.operator]=t.operand,i[t.field]=r}return i}return null===e?{}:e}(e,a)}g(r,o)}),m(r),r}(this.parts,t)},f.prototype.mapValues=function(t){return m(h(this.parts,t))},f.prototype.matches=function(t,e){return u(this.parts,t,e)},o=function(t){return new f(t)},a=function(t){return function(t){for(var e in t)if(t[e]){if("$meta"===e||t[e]&&(!(t[e]instanceof Object)||!("$elemMatch"in t[e])&&!("$slice"in t[e])))return!0}else if("_id"!==e)return!1}(t)},s=function(t,e,i,r){var o=new f(e);return t.filter(function(t){return o.matches(t,r)}).sort(function(t,e){for(var r in i){var o=function(t,e,i){var r=c(t,i)[0].val,o=c(e,i)[0].val;return r>o?1:r<o?-1:0}(t,e,r);if(0!==o)return i[r]<0&&(o=-o),o}return 0})};var d={$and:1,$or:1,$nor:1},p={$text:1,$comment:1};function g(t,e){for(var i in e)if(i in t){if("$and"===i)t[i]=t[i].concat(e[i]);else{var r={};r[i]=t[i];var o={};o[i]=e[i];var n={$and:[r,o]};delete t[i],g(t,n)}}else t[i]=e[i]}var m=l=function(t){for(var e in d)e in t&&t[e].forEach(function(t){m(t)});if("$and"in t&&(t.$and.forEach(function(e){for(var i in e)if(i in t){if(!(t[i]instanceof Array)&&"object"==typeof t[i]&&"$"!==i[0])for(var r in e[i])r in t[i]||(t[i][r]=e[i][r],delete e[i][r],0!==Object.keys(e[i]).length||delete e[i])}else t[i]=e[i],delete e[i]}),t.$and=o(t.$and),0===t.$and.length&&delete t.$and),"$or"in t){if(t.$or=o(t.$or),0===t.$or.length)delete t.$or;else if(1===t.$or.length){var i=t.$or[0];delete t.$or,g(t,i)}}for(var r in t)t[r]&&void 0!==t[r].$eq&&1===Object.keys(t[r]).length&&(t[r]=t[r].$eq),t[r]&&void 0!==t[r].$elemMatch&&m(t[r].$elemMatch);return t;function o(t){return t.filter(function(t){return 0!==Object.keys(t).length})}};function y(t){for(var e in t)return"$"===e[0]&&!(e in d)}var x=function(t,e,i,r,o){void 0===r&&(r=[]),this.field=t,this.operator=e,this.operand=i,this.parts=r,this.implicitField=o}}),a("fU73w",function(t,e){var i={$gt:1,$gte:1,$lt:1,$lte:1,$not:1},r={$eq:1,$ne:1},o={$nin:1,$all:1,$in:1},n=t.exports=function(t,e,s){var l={};return t.forEach(function(t){if(void 0!==t.field){if(void 0!==s)var h=s+"."+t.field;else var h=t.field}else var h=s;if(0===t.parts.length){if(t.operator in i)void 0!==t.field?a(l,t.field,t.operator,e(h,t.operand)):l[t.operator]=e(h,t.operand);else if(t.operator in r){if(t.operand instanceof Array)var u=t.operand.map(function(t){return e(h,t)});else var u=e(h,t.operand);a(l,t.field,t.operator,u)}else t.operator in o?a(l,t.field,t.operator,t.operand.map(function(i){return e(t.field,i)})):"$text"===t.operator?(l.$text={$search:e(h,t.operand.$search)},void 0!==t.operand.$language&&(l.$text.$language=t.operand.$language)):void 0!==t.field?a(l,t.field,t.operator,t.operand):l[t.operator]=t.operand}else if("$elemMatch"===t.operator){var c=n(t.parts,e,h);a(l,t.field,t.operator,c)}else if("$not"===t.operator)l[t.operator]=n(t.parts,e,h);else{var f=[];t.parts.forEach(function(t){f.push(n(t.parts,e))}),l[t.operator]=f}}),l};function a(t,e,i,r){void 0===t[e]&&(t[e]={}),t[e][i]=r}}),a("iZyl0",function(t,e){var i=n("lUJRH"),r={$eq:l,$gt:function(t,e){return t>e},$gte:function(t,e){return t>=e},$lt:function(t,e){return t<e},$lte:function(t,e){return t<=e},$ne:function(t,e){return t!==e},$mod:function(t,e){return t%e[0]===e[1]},$regex:function(t,e){return"string"==typeof t&&null!==t.match(RegExp(e))},$exists:function(t,e){return void 0!==t===e},$in:function(t,e){return Array.isArray(t)?t.some(function(t){return -1!==e.indexOf(t)}):-1!==e.indexOf(t)},$nin:function(t,e){return Array.isArray(t)?t.every(function(t){return -1===e.indexOf(t)}):-1===e.indexOf(t)},$all:function(t,e){return t instanceof Array&&t.reduce(function(t,i){return t&&-1!==e.indexOf(i)},!0)}},o={$and:function(t,e){for(var i=0;i<e.length;i++)if(!a(e[i].parts,t))return!1;return!0},$or:function(t,e){for(var i=0;i<e.length;i++)if(a(e[i].parts,t))return!0;return!1},$nor:function(t,e){for(var i=0;i<e.length;i++)if(a(e[i].parts,t))return!1;return!0}},a=t.exports=function(t,e,n){return!1!==n&&function t(e){Object.keys(e).forEach(function(i){if("$"===i[0])throw Error("Field names can't start with $");if(-1!==i.indexOf("."))throw Error("Field names can't contain .");e[i]instanceof Object&&t(e[i])})}(e),t.every(function(t){return function(t,e,n){for(var h=i(e,t.field),u=0;u<h.length;u++){var c=h[u];if(t.operator in r){if(!s(c.val,t.operand,r[t.operator]))continue}else if(t.operator in o){if(!o[t.operator](e,t.parts))continue}else if("$not"===t.operator){if(t.parts.length>0){if(a(t.parts,e,n))continue}else if(!0===s(c.val,t.operand,l))continue}else if("$size"===t.operator)return c.val instanceof Array&&c.val.length===t.operand;else if("$elemMatch"===t.operator){var f=c.val;if(void 0===f)continue;if(t.implicitField)for(var d=0;d<t.parts.length;d++)t.parts[d].field="x";for(var p=!1,d=0;d<f.length;d++){if(t.implicitField)var g={x:f[d]};else var g=f[d];if(a(t.parts,g,n)){p=!0;break}}if(!p)continue}else if("$where"===t.operator){if(void 0!==t.field)var m=c.val;else var m=e;if(!t.operand.call(m))continue}else if("$comment"===t.operator);else throw Error("Unsupported operator: "+t.operator);return!0}return!1}(t,e,n)})};function s(t,e,i){if(!(t instanceof Array))return i(t,e);if(e instanceof Array){if(!i(t,e))return!1}else if(!t.reduce(function(t,r){return t||i(r,e)},!1))return!1;return!0}function l(t,e){if(t instanceof Array)return e instanceof Array&&t.length===e.length&&t.reduce(function(t,i,r){return t&&l(i,e[r])},!0);if(t instanceof Object){if(!(e instanceof Object))return!1;var i=Object.keys(t),r=Object.keys(e);if(i.length!==r.length)return!1;for(var o=0;o<i.length;o++){if(i[o]!==r[o])return!1;var n=i[o];if(!l(t[n],e[n]))return!1}return!0}return null===e?null==t:t===e}}),a("lUJRH",function(t,e){function i(t,e){if(void 0!==t)return t[e]}t.exports=function(t,e){var n,a,s;return void 0===e?e=[]:e instanceof Array||(e=e.split(".")),n=e,s=[{obj:a={dummy:t},last:"dummy",propertyPath:[]}],n.forEach(function(t){var e=[];s.forEach(function(r){var n=i(r.obj,r.last);n instanceof Array&&!o(t)?n.forEach(function(o,a){e.push({obj:i(n,a),propertyPath:r.propertyPath.concat(a,t),last:t})}):e.push({obj:n,propertyPath:r.propertyPath.concat(t),last:t})}),s=e}),s.map(function(e){if(e.obj===a)var i=e.obj.dummy,o=void 0;else var i=e.obj,o=e.last;return new r(t,e.propertyPath,{obj:i,last:o})})};var r=function(t,e,i){this.root=t,void 0===e?this.property=[]:e instanceof Array?this.property=e:this.property=e.split("."),void 0!==i&&(this.propertyInfo=i)};function o(t){return!isNaN(parseInt(t))}r.prototype={},Object.defineProperty(r.prototype,"val",{get:function(){var t=this.propertyInfo;return void 0===t.obj?void 0:void 0!==t.last?t.obj[t.last]:t.obj},set:function(t){void 0===t?void 0!==this.propertyInfo.obj&&delete this.propertyInfo.obj[this.propertyInfo.last]:(void 0===this.propertyInfo.obj&&function(t){for(var e=t.root,i=t.property.length-1,r=0;r<i;r++){var n=e[t.property[r]];if(void 0===n){if(o(t.property[r+1]))var a=[];else var a={};n=e[t.property[r]]=a}e=n}t.propertyInfo={obj:e,last:t.property[i]}}(this),this.propertyInfo.obj[this.propertyInfo.last]=t)}})}),a("fRAGe",function(t,i){e(t.exports,"default",()=>s);var r=n("5TDW7"),o=n("dimsV");class a extends r.default{constructor(){super()}}a.prototype.read=function(t){if("Color"!==t.type)return null;let e=new o.default(t);return this.readOptions(e,t),e},a.prototype.write=function(t){return"Color"!==t.get("type")?null:this.writeOptions(t,{color:t.get("color")})};var s=a}),a("dimsV",function(t,i){e(t.exports,"default",()=>s);var r=n("dMe05"),o=n("9brqU");class a extends r.default{constructor(t){let e=document.createElement("canvas");(t=Object.assign({},t||{})).maxZoom||delete t.maxZoom,t.minZoom||delete t.minZoom,t.source=new o.default({canvasFunction:(t,i,r,o)=>{e.width=o[0],e.height=o[1];let n=e.getContext("2d");return n.fillStyle=this.get("color"),n.fillRect(0,0,e.width,e.height),e}}),super(t),this.set("type","Color"),this.set("color",t.color),this.setBlendMode(t.mode)}setColor(t){this.set("color",t),this.getSource().changed()}}var s=a}),a("8qGq9",function(t,i){e(t.exports,"default",()=>l);var r=n("5TDW7"),o=n("8MDYc"),a=n("eEuqc");class s extends r.default{constructor(){super()}}s.prototype.read=function(t){if("Pattern"!==t.type)return null;let e=new a.default({source:new o.default({url:t.url})});return this.readOptions(e,t),e},s.prototype.write=function(t){return"Pattern"!==t.get("type")?null:this.writeOptions(t,{url:t.getSource().getUrls()[0]})};var l=s}),a("dxNAB",function(r,o){e(r.exports,"jsPDF",()=>D);/** @license
 *
 * jsPDF - PDF Document creation from JavaScript
 * Version 2.5.1 Built on 2022-01-28T15:37:57.791Z
 *                      CommitID 00000000
 *
 * Copyright (c) 2010-2021 James Hall <james@parall.ax>, https://github.com/MrRio/jsPDF
 *               2015-2021 yWorks GmbH, http://www.yworks.com
 *               2015-2021 Lukas Holländer <lukas.hollaender@yworks.com>, https://github.com/HackbrettXXX
 *               2016-2018 Aras Abbasi <aras.abbasi@gmail.com>
 *               2010 Aaron Spike, https://github.com/acspike
 *               2012 Willow Systems Corporation, https://github.com/willowsystems
 *               2012 Pablo Hess, https://github.com/pablohess
 *               2012 Florian Jenett, https://github.com/fjenett
 *               2013 Warren Weckesser, https://github.com/warrenweckesser
 *               2013 Youssef Beddad, https://github.com/lifof
 *               2013 Lee Driscoll, https://github.com/lsdriscoll
 *               2013 Stefan Slonevskiy, https://github.com/stefslon
 *               2013 Jeremy Morel, https://github.com/jmorel
 *               2013 Christoph Hartmann, https://github.com/chris-rock
 *               2014 Juan Pablo Gaviria, https://github.com/juanpgaviria
 *               2014 James Makes, https://github.com/dollaruw
 *               2014 Diego Casorran, https://github.com/diegocr
 *               2014 Steven Spungin, https://github.com/Flamenco
 *               2014 Kenneth Glassey, https://github.com/Gavvers
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 *
 * Contributor(s):
 *    siefkenj, ahwolf, rickygu, Midnith, saintclair, eaparango,
 *    kim3er, mfo, alnorth, Flamenco
 */var a=n("agEcb"),s=n("kvvuk"),l=function(){return"undefined"!=typeof window?window:void 0!==i?i:"undefined"!=typeof self?self:this}();function h(){l.console&&"function"==typeof l.console.log&&l.console.log.apply(l.console,arguments)}var u={log:h,warn:function(t){l.console&&("function"==typeof l.console.warn?l.console.warn.apply(l.console,arguments):h.call(null,arguments))},error:function(t){l.console&&("function"==typeof l.console.error?l.console.error.apply(l.console,arguments):h(t))}};function c(t,e,i){var r=new XMLHttpRequest;r.open("GET",t),r.responseType="blob",r.onload=function(){m(r.response,e,i)},r.onerror=function(){u.error("could not download file")},r.send()}function f(t){var e=new XMLHttpRequest;e.open("HEAD",t,!1);try{e.send()}catch(t){}return e.status>=200&&e.status<=299}function d(t){try{t.dispatchEvent(new MouseEvent("click"))}catch(i){var e=document.createEvent("MouseEvents");e.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),t.dispatchEvent(e)}}var p,g,m=l.saveAs||("object"!==("undefined"==typeof window?"undefined":t(a)(window))||window!==l?function(){}:"undefined"!=typeof HTMLAnchorElement&&"download"in HTMLAnchorElement.prototype?function(t,e,i){var r=l.URL||l.webkitURL,o=document.createElement("a");e=e||t.name||"download",o.download=e,o.rel="noopener","string"==typeof t?(o.href=t,o.origin!==location.origin?f(o.href)?c(t,e,i):d(o,o.target="_blank"):d(o)):(o.href=r.createObjectURL(t),setTimeout(function(){r.revokeObjectURL(o.href)},4e4),setTimeout(function(){d(o)},0))}:"msSaveOrOpenBlob"in navigator?function(e,i,r){if(i=i||e.name||"download","string"==typeof e){if(f(e))c(e,i,r);else{var o,n=document.createElement("a");n.href=e,n.target="_blank",setTimeout(function(){d(n)})}}else navigator.msSaveOrOpenBlob((void 0===(o=r)?o={autoBom:!1}:"object"!==t(a)(o)&&(u.warn("Deprecated: Expected third argument to be a object"),o={autoBom:!o}),o.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e),i)}:function(e,i,r,o){if((o=o||open("","_blank"))&&(o.document.title=o.document.body.innerText="downloading..."),"string"==typeof e)return c(e,i,r);var n="application/octet-stream"===e.type,s=/constructor/i.test(l.HTMLElement)||l.safari,h=/CriOS\/[\d]+/.test(navigator.userAgent);if((h||n&&s)&&"object"===("undefined"==typeof FileReader?"undefined":t(a)(FileReader))){var u=new FileReader;u.onloadend=function(){var t=u.result;t=h?t:t.replace(/^data:[^;]*;/,"data:attachment/file;"),o?o.location.href=t:location=t,o=null},u.readAsDataURL(e)}else{var f=l.URL||l.webkitURL,d=f.createObjectURL(e);o?o.location=d:location.href=d,o=null,setTimeout(function(){f.revokeObjectURL(d)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function y(t){var e;t=t||"",this.ok=!1,"#"==t.charAt(0)&&(t=t.substr(1,6)),t=({aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"})[t=(t=t.replace(/ /g,"")).toLowerCase()]||t;for(var i=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(t){return[parseInt(t[1]),parseInt(t[2]),parseInt(t[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}}],r=0;r<i.length;r++){var o=i[r].re,n=i[r].process,a=o.exec(t);a&&(e=n(a),this.r=e[0],this.g=e[1],this.b=e[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var t=this.r.toString(16),e=this.g.toString(16),i=this.b.toString(16);return 1==t.length&&(t="0"+t),1==e.length&&(e="0"+e),1==i.length&&(i="0"+i),"#"+t+e+i}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function x(t,e){var i=t[0],r=t[1],o=t[2],n=t[3];i=b(i,r,o,n,e[0],7,-680876936),n=b(n,i,r,o,e[1],12,-389564586),o=b(o,n,i,r,e[2],17,606105819),r=b(r,o,n,i,e[3],22,-1044525330),i=b(i,r,o,n,e[4],7,-176418897),n=b(n,i,r,o,e[5],12,1200080426),o=b(o,n,i,r,e[6],17,-1473231341),r=b(r,o,n,i,e[7],22,-45705983),i=b(i,r,o,n,e[8],7,1770035416),n=b(n,i,r,o,e[9],12,-1958414417),o=b(o,n,i,r,e[10],17,-42063),r=b(r,o,n,i,e[11],22,-1990404162),i=b(i,r,o,n,e[12],7,1804603682),n=b(n,i,r,o,e[13],12,-40341101),o=b(o,n,i,r,e[14],17,-1502002290),i=w(i,r=b(r,o,n,i,e[15],22,1236535329),o,n,e[1],5,-165796510),n=w(n,i,r,o,e[6],9,-1069501632),o=w(o,n,i,r,e[11],14,643717713),r=w(r,o,n,i,e[0],20,-373897302),i=w(i,r,o,n,e[5],5,-701558691),n=w(n,i,r,o,e[10],9,38016083),o=w(o,n,i,r,e[15],14,-660478335),r=w(r,o,n,i,e[4],20,-405537848),i=w(i,r,o,n,e[9],5,568446438),n=w(n,i,r,o,e[14],9,-1019803690),o=w(o,n,i,r,e[3],14,-187363961),r=w(r,o,n,i,e[8],20,1163531501),i=w(i,r,o,n,e[13],5,-1444681467),n=w(n,i,r,o,e[2],9,-51403784),o=w(o,n,i,r,e[7],14,1735328473),i=_(i,r=w(r,o,n,i,e[12],20,-1926607734),o,n,e[5],4,-378558),n=_(n,i,r,o,e[8],11,-2022574463),o=_(o,n,i,r,e[11],16,1839030562),r=_(r,o,n,i,e[14],23,-35309556),i=_(i,r,o,n,e[1],4,-1530992060),n=_(n,i,r,o,e[4],11,1272893353),o=_(o,n,i,r,e[7],16,-155497632),r=_(r,o,n,i,e[10],23,-1094730640),i=_(i,r,o,n,e[13],4,681279174),n=_(n,i,r,o,e[0],11,-358537222),o=_(o,n,i,r,e[3],16,-722521979),r=_(r,o,n,i,e[6],23,76029189),i=_(i,r,o,n,e[9],4,-640364487),n=_(n,i,r,o,e[12],11,-421815835),o=_(o,n,i,r,e[15],16,530742520),i=S(i,r=_(r,o,n,i,e[2],23,-995338651),o,n,e[0],6,-198630844),n=S(n,i,r,o,e[7],10,1126891415),o=S(o,n,i,r,e[14],15,-1416354905),r=S(r,o,n,i,e[5],21,-57434055),i=S(i,r,o,n,e[12],6,1700485571),n=S(n,i,r,o,e[3],10,-1894986606),o=S(o,n,i,r,e[10],15,-1051523),r=S(r,o,n,i,e[1],21,-2054922799),i=S(i,r,o,n,e[8],6,1873313359),n=S(n,i,r,o,e[15],10,-30611744),o=S(o,n,i,r,e[6],15,-1560198380),r=S(r,o,n,i,e[13],21,1309151649),i=S(i,r,o,n,e[4],6,-145523070),n=S(n,i,r,o,e[11],10,-1120210379),o=S(o,n,i,r,e[2],15,718787259),r=S(r,o,n,i,e[9],21,-343485551),t[0]=P(i,t[0]),t[1]=P(r,t[1]),t[2]=P(o,t[2]),t[3]=P(n,t[3])}function v(t,e,i,r,o,n){return e=P(P(e,t),P(r,n)),P(e<<o|e>>>32-o,i)}function b(t,e,i,r,o,n,a){return v(e&i|~e&r,t,e,o,n,a)}function w(t,e,i,r,o,n,a){return v(e&r|i&~r,t,e,o,n,a)}function _(t,e,i,r,o,n,a){return v(e^i^r,t,e,o,n,a)}function S(t,e,i,r,o,n,a){return v(i^(e|~r),t,e,o,n,a)}function E(t){var e,i=t.length,r=[1732584193,-271733879,-1732584194,271733878];for(e=64;e<=t.length;e+=64)x(r,function(t){var e,i=[];for(e=0;e<64;e+=4)i[e>>2]=t.charCodeAt(e)+(t.charCodeAt(e+1)<<8)+(t.charCodeAt(e+2)<<16)+(t.charCodeAt(e+3)<<24);return i}(t.substring(e-64,e)));t=t.substring(e-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(e=0;e<t.length;e++)o[e>>2]|=t.charCodeAt(e)<<(e%4<<3);if(o[e>>2]|=128<<(e%4<<3),e>55)for(x(r,o),e=0;e<16;e++)o[e]=0;return o[14]=8*i,x(r,o),r}p=l.atob.bind(l),g=l.btoa.bind(l);var A="0123456789abcdef".split("");function N(t){return String.fromCharCode((255&t)>>0,(65280&t)>>8,(16711680&t)>>16,(4278190080&t)>>24)}function I(t){return E(t).map(N).join("")}var M="5d41402abc4b2a76b9719d911017c592"!=function(t){for(var e=0;e<t.length;e++)t[e]=function(t){for(var e="",i=0;i<4;i++)e+=A[t>>8*i+4&15]+A[t>>8*i&15];return e}(t[e]);return t.join("")}(E("hello"));function P(t,e){if(M){var i=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(i>>16)<<16|65535&i}return t+e&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function C(t,e){if(t!==i){for(var i,r,o=Array(1+(256/t.length>>0)+1).join(t),n=[],a=0;a<256;a++)n[a]=a;var s=0;for(a=0;a<256;a++){var l=n[a];s=(s+l+o.charCodeAt(a))%256,n[a]=n[s],n[s]=l}i=t,r=n}else n=r;var h=e.length,u=0,c=0,f="";for(a=0;a<h;a++)c=(c+(l=n[u=(u+1)%256]))%256,n[u]=n[c],n[c]=l,o=n[(n[u]+n[c])%256],f+=String.fromCharCode(e.charCodeAt(a)^o);return f}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var T={print:4,modify:8,copy:16,"annot-forms":32};function L(t,e,i,r){this.v=1,this.r=2;var o=192;t.forEach(function(t){if(void 0!==T.perm)throw Error("Invalid permission: "+t);o+=T[t]}),this.padding="(¿N^NuAd\x00NVÿú\x01\b..\x00¶Ðh>/\f©þdSiz";var n=(e+this.padding).substr(0,32),a=(i+this.padding).substr(0,32);this.O=this.processOwnerPassword(n,a),this.P=-(1+(255^o)),this.encryptionKey=I(n+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=C(this.encryptionKey,this.padding)}function R(t){if(/[^\u0000-\u00ff]/.test(t))throw Error("Invalid PDF Name Object: "+t+", Only accept ASCII characters.");for(var e="",i=t.length,r=0;r<i;r++){var o=t.charCodeAt(r);o<33||35===o||37===o||40===o||41===o||47===o||60===o||62===o||91===o||93===o||123===o||125===o||o>126?e+="#"+("0"+o.toString(16)).slice(-2):e+=t[r]}return e}function O(e){if("object"!==t(a)(e))throw Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var i={};this.subscribe=function(t,e,r){if(r=r||!1,"string"!=typeof t||"function"!=typeof e||"boolean"!=typeof r)throw Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");i.hasOwnProperty(t)||(i[t]={});var o=Math.random().toString(35);return i[t][o]=[e,!!r],o},this.unsubscribe=function(t){for(var e in i)if(i[e][t])return delete i[e][t],0===Object.keys(i[e]).length&&delete i[e],!0;return!1},this.publish=function(t){if(i.hasOwnProperty(t)){var r=Array.prototype.slice.call(arguments,1),o=[];for(var n in i[t]){var a=i[t][n];try{a[0].apply(e,r)}catch(t){l.console&&u.error("jsPDF PubSub Error",t.message,t)}a[1]&&o.push(n)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return i}}function k(t){if(!(this instanceof k))return new k(t);var e="opacity,stroke-opacity".split(",");for(var i in t)t.hasOwnProperty(i)&&e.indexOf(i)>=0&&(this[i]=t[i]);this.id="",this.objectNumber=-1}function G(t,e){this.gState=t,this.matrix=e,this.id="",this.objectNumber=-1}function Z(t,e,i,r,o){if(!(this instanceof Z))return new Z(t,e,i,r,o);this.type="axial"===t?2:3,this.coords=e,this.colors=i,G.call(this,r,o)}function F(t,e,i,r,o){if(!(this instanceof F))return new F(t,e,i,r,o);this.boundingBox=t,this.xStep=e,this.yStep=i,this.stream="",this.cloneIndex=0,G.call(this,r,o)}function D(e){var i,r="string"==typeof arguments[0]?arguments[0]:"p",o=arguments[1],n=arguments[2],s=arguments[3],h=[],c=1,f=16,d="S",p=null;"object"===t(a)(e=e||{})&&(r=e.orientation,o=e.unit||o,n=e.format||n,s=e.compress||e.compressPdf||s,null!==(p=e.encryption||null)&&(p.userPassword=p.userPassword||"",p.ownerPassword=p.ownerPassword||"",p.userPermissions=p.userPermissions||[]),c="number"==typeof e.userUnit?Math.abs(e.userUnit):1,void 0!==e.precision&&(i=e.precision),void 0!==e.floatPrecision&&(f=e.floatPrecision),d=e.defaultPathOperation||"S"),h=e.filters||(!0===s?["FlateEncode"]:h),o=o||"mm",r=(""+(r||"P")).toLowerCase();var x=e.putOnlyUsedFonts||!1,v={},b={internal:{},__private__:{}};b.__private__.PubSub=O;var w="1.3",_=b.__private__.getPdfVersion=function(){return w};b.__private__.setPdfVersion=function(t){w=t};var S={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};b.__private__.getPageFormats=function(){return S};var E=b.__private__.getPageFormat=function(t){return S[t]};n=n||"a4";var A={COMPAT:"compat",ADVANCED:"advanced"},N=A.COMPAT;function I(){this.saveGraphicsState(),tc(new tH(tN,0,0,-tN,0,iv()*tN).toString()+" cm"),this.setFontSize(this.getFontSize()/tN),d="n",N=A.ADVANCED}function M(){this.restoreGraphicsState(),d="S",N=A.COMPAT}var P=b.__private__.combineFontStyleAndFontWeight=function(t,e){if("bold"==t&&"normal"==e||"bold"==t&&400==e||"normal"==t&&"italic"==e||"bold"==t&&"italic"==e)throw Error("Invalid Combination of fontweight and fontstyle");return e&&(t=400==e||"normal"===e?"italic"===t?"italic":"normal":700!=e&&"bold"!==e||"normal"!==t?(700==e?"bold":e)+""+t:"bold"),t};b.advancedAPI=function(t){var e=N===A.COMPAT;return e&&I.call(this),"function"!=typeof t||(t(this),e&&M.call(this)),this},b.compatAPI=function(t){var e=N===A.ADVANCED;return e&&M.call(this),"function"!=typeof t||(t(this),e&&I.call(this)),this},b.isAdvancedAPI=function(){return N===A.ADVANCED};var C,T=function(t){if(N!==A.ADVANCED)throw Error(t+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},G=b.roundToPrecision=b.__private__.roundToPrecision=function(t,e){var r=i||e;if(isNaN(t)||isNaN(r))throw Error("Invalid argument passed to jsPDF.roundToPrecision");return t.toFixed(r).replace(/0+$/,"")};C=b.hpf=b.__private__.hpf="number"==typeof f?function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.hpf");return G(t,f)}:"smart"===f?function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.hpf");return G(t,t>-1&&t<1?16:5)}:function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.hpf");return G(t,16)};var j=b.f2=b.__private__.f2=function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.f2");return G(t,2)},q=b.__private__.f3=function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.f3");return G(t,3)},U=b.scale=b.__private__.scale=function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.scale");return N===A.COMPAT?t*tN:N===A.ADVANCED?t:void 0},B=function(t){return U(N===A.COMPAT?iv()-t:N===A.ADVANCED?t:void 0)};b.__private__.setPrecision=b.setPrecision=function(t){"number"==typeof parseInt(t,10)&&(i=parseInt(t,10))};var z,H="00000000000000000000000000000000",V=b.__private__.getFileId=function(){return H},Y=b.__private__.setFileId=function(t){return H=void 0!==t&&/^[a-fA-F0-9]{32}$/.test(t)?t.toUpperCase():H.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),null!==p&&(ek=new L(p.userPermissions,p.userPassword,p.ownerPassword,H)),H};b.setFileId=function(t){return Y(t),this},b.getFileId=function(){return V()};var W=b.__private__.convertDateToPDFDate=function(t){var e=t.getTimezoneOffset(),i=[e<0?"+":"-",Q(Math.floor(Math.abs(e/60))),"'",Q(Math.abs(e%60)),"'"].join("");return["D:",t.getFullYear(),Q(t.getMonth()+1),Q(t.getDate()),Q(t.getHours()),Q(t.getMinutes()),Q(t.getSeconds()),i].join("")},X=b.__private__.convertPDFDateToDate=function(t){return new Date(parseInt(t.substr(2,4),10),parseInt(t.substr(6,2),10)-1,parseInt(t.substr(8,2),10),parseInt(t.substr(10,2),10),parseInt(t.substr(12,2),10),parseInt(t.substr(14,2),10),0)},K=b.__private__.setCreationDate=function(t){var e;if(void 0===t&&(t=new Date),t instanceof Date)e=W(t);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(t))throw Error("Invalid argument passed to jsPDF.setCreationDate");e=t}return z=e},J=b.__private__.getCreationDate=function(t){var e=z;return"jsDate"===t&&(e=X(z)),e};b.setCreationDate=function(t){return K(t),this},b.getCreationDate=function(t){return J(t)};var $,Q=b.__private__.padd2=function(t){return("0"+parseInt(t)).slice(-2)},tt=b.__private__.padd2Hex=function(t){return("00"+(t=t.toString())).substr(t.length)},te=0,ti=[],tr=[],to=0,tn=[],ta=[],ts=!1,tl=tr,th=function(){te=0,to=0,tr=[],ti=[],tn=[],tQ=tK(),t0=tK()};b.__private__.setCustomOutputDestination=function(t){ts=!0,tl=t};var tu=function(t){ts||(tl=t)};b.__private__.resetCustomOutputDestination=function(){ts=!1,tl=tr};var tc=b.__private__.out=function(t){return t=t.toString(),to+=t.length+1,tl.push(t),tl},tf=b.__private__.write=function(t){return tc(1==arguments.length?t.toString():Array.prototype.join.call(arguments," "))},td=b.__private__.getArrayBuffer=function(t){for(var e=t.length,i=new ArrayBuffer(e),r=new Uint8Array(i);e--;)r[e]=t.charCodeAt(e);return i},tp=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];b.__private__.getStandardFonts=function(){return tp};var tg=e.fontSize||16;b.__private__.setFontSize=b.setFontSize=function(t){return tg=N===A.ADVANCED?t/tN:t,this};var tm,ty=b.__private__.getFontSize=b.getFontSize=function(){return N===A.COMPAT?tg:tg*tN},tx=e.R2L||!1;b.__private__.setR2L=b.setR2L=function(t){return tx=t,this},b.__private__.getR2L=b.getR2L=function(){return tx};var tv,tb=b.__private__.setZoomMode=function(t){if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(t))tm=t;else if(isNaN(t)){if(-1===[void 0,null,"fullwidth","fullheight","fullpage","original"].indexOf(t))throw Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+t+'" is not recognized.');tm=t}else tm=parseInt(t,10)};b.__private__.getZoomMode=function(){return tm};var tw,t_=b.__private__.setPageMode=function(t){if(-1==[void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(t))throw Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+t+'" is not recognized.');tv=t};b.__private__.getPageMode=function(){return tv};var tS=b.__private__.setLayoutMode=function(t){if(-1==[void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(t))throw Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+t+'" is not recognized.');tw=t};b.__private__.getLayoutMode=function(){return tw},b.__private__.setDisplayMode=b.setDisplayMode=function(t,e,i){return tb(t),tS(e),t_(i),this};var tE={title:"",subject:"",author:"",keywords:"",creator:""};b.__private__.getDocumentProperty=function(t){if(-1===Object.keys(tE).indexOf(t))throw Error("Invalid argument passed to jsPDF.getDocumentProperty");return tE[t]},b.__private__.getDocumentProperties=function(){return tE},b.__private__.setDocumentProperties=b.setProperties=b.setDocumentProperties=function(t){for(var e in tE)tE.hasOwnProperty(e)&&t[e]&&(tE[e]=t[e]);return this},b.__private__.setDocumentProperty=function(t,e){if(-1===Object.keys(tE).indexOf(t))throw Error("Invalid arguments passed to jsPDF.setDocumentProperty");return tE[t]=e};var tA,tN,tI,tM,tP,tC={},tT={},tL=[],tR={},tO={},tk={},tG={},tZ=null,tF=0,tD=[],tj=new O(b),tq=e.hotfixes||[],tU={},tB={},tz=[],tH=function t(e,i,r,o,n,a){if(!(this instanceof t))return new t(e,i,r,o,n,a);isNaN(e)&&(e=1),isNaN(i)&&(i=0),isNaN(r)&&(r=0),isNaN(o)&&(o=1),isNaN(n)&&(n=0),isNaN(a)&&(a=0),this._matrix=[e,i,r,o,n,a]};Object.defineProperty(tH.prototype,"sx",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(tH.prototype,"shy",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(tH.prototype,"shx",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(tH.prototype,"sy",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(tH.prototype,"tx",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(tH.prototype,"ty",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(tH.prototype,"a",{get:function(){return this._matrix[0]},set:function(t){this._matrix[0]=t}}),Object.defineProperty(tH.prototype,"b",{get:function(){return this._matrix[1]},set:function(t){this._matrix[1]=t}}),Object.defineProperty(tH.prototype,"c",{get:function(){return this._matrix[2]},set:function(t){this._matrix[2]=t}}),Object.defineProperty(tH.prototype,"d",{get:function(){return this._matrix[3]},set:function(t){this._matrix[3]=t}}),Object.defineProperty(tH.prototype,"e",{get:function(){return this._matrix[4]},set:function(t){this._matrix[4]=t}}),Object.defineProperty(tH.prototype,"f",{get:function(){return this._matrix[5]},set:function(t){this._matrix[5]=t}}),Object.defineProperty(tH.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(tH.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(tH.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(tH.prototype,"isIdentity",{get:function(){return 1===this.sx&&0===this.shy&&0===this.shx&&1===this.sy&&0===this.tx&&0===this.ty}}),tH.prototype.join=function(t){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(C).join(t)},tH.prototype.multiply=function(t){return new tH(t.sx*this.sx+t.shy*this.shx,t.sx*this.shy+t.shy*this.sy,t.shx*this.sx+t.sy*this.shx,t.shx*this.shy+t.sy*this.sy,t.tx*this.sx+t.ty*this.shx+this.tx,t.tx*this.shy+t.ty*this.sy+this.ty)},tH.prototype.decompose=function(){var t=this.sx,e=this.shy,i=this.shx,r=this.sy,o=this.tx,n=this.ty,a=Math.sqrt(t*t+e*e),s=(t/=a)*i+(e/=a)*r,l=Math.sqrt((i-=t*s)*i+(r-=e*s)*r);return s/=l,t*(r/=l)<e*(i/=l)&&(t=-t,e=-e,s=-s,a=-a),{scale:new tH(a,0,0,l,0,0),translate:new tH(1,0,0,1,o,n),rotate:new tH(t,e,-e,t,0,0),skew:new tH(1,0,s,1,0,0)}},tH.prototype.toString=function(t){return this.join(" ")},tH.prototype.inversed=function(){var t=this.sx,e=this.shy,i=this.shx,r=this.sy,o=this.tx,n=this.ty,a=1/(t*r-e*i),s=r*a,l=-e*a,h=-i*a,u=t*a;return new tH(s,l,h,u,-s*o-h*n,-l*o-u*n)},tH.prototype.applyToPoint=function(t){return new iu(t.x*this.sx+t.y*this.shx+this.tx,t.x*this.shy+t.y*this.sy+this.ty)},tH.prototype.applyToRectangle=function(t){var e=this.applyToPoint(t),i=this.applyToPoint(new iu(t.x+t.w,t.y+t.h));return new ic(e.x,e.y,i.x-e.x,i.y-e.y)},tH.prototype.clone=function(){return new tH(this.sx,this.shy,this.shx,this.sy,this.tx,this.ty)},b.Matrix=tH;var tV=b.matrixMult=function(t,e){return e.multiply(t)},tY=new tH(1,0,0,1,0,0);b.unitMatrix=b.identityMatrix=tY;var tW=function(t,e){if(!tO[t]){var i=(e instanceof Z?"Sh":"P")+(Object.keys(tR).length+1).toString(10);e.id=i,tO[t]=i,tR[i]=e,tj.publish("addPattern",e)}};b.ShadingPattern=Z,b.TilingPattern=F,b.addShadingPattern=function(t,e){return T("addShadingPattern()"),tW(t,e),this},b.beginTilingPattern=function(t){T("beginTilingPattern()"),ip(t.boundingBox[0],t.boundingBox[1],t.boundingBox[2]-t.boundingBox[0],t.boundingBox[3]-t.boundingBox[1],t.matrix)},b.endTilingPattern=function(t,e){T("endTilingPattern()"),e.stream=ta[$].join("\n"),tW(t,e),tj.publish("endTilingPattern",e),tz.pop().restore()};var tX=b.__private__.newObject=function(){var t=tK();return tJ(t,!0),t},tK=b.__private__.newObjectDeferred=function(){return ti[++te]=function(){return to},te},tJ=function(t,e){return e="boolean"==typeof e&&e,ti[t]=to,e&&tc(t+" 0 obj"),t},t$=b.__private__.newAdditionalObject=function(){var t={objId:tK(),content:""};return tn.push(t),t},tQ=tK(),t0=tK(),t1=b.__private__.decodeColorString=function(t){var e=t.split(" ");if(2!==e.length||"g"!==e[1]&&"G"!==e[1])5===e.length&&("k"===e[4]||"K"===e[4])&&(e=[(1-e[0])*(1-e[3]),(1-e[1])*(1-e[3]),(1-e[2])*(1-e[3]),"r"]);else{var i=parseFloat(e[0]);e=[i,i,i,"r"]}for(var r="#",o=0;o<3;o++)r+=("0"+Math.floor(255*parseFloat(e[o])).toString(16)).slice(-2);return r},t2=b.__private__.encodeColorString=function(e){"string"==typeof e&&(e={ch1:e});var i,r=e.ch1,o=e.ch2,n=e.ch3,s=e.ch4,l="draw"===e.pdfColorType?["G","RG","K"]:["g","rg","k"];if("string"==typeof r&&"#"!==r.charAt(0)){var h=new y(r);if(h.ok)r=h.toHex();else if(!/^\d*\.?\d*$/.test(r))throw Error('Invalid color "'+r+'" passed to jsPDF.encodeColorString.')}if("string"==typeof r&&/^#[0-9A-Fa-f]{3}$/.test(r)&&(r="#"+r[1]+r[1]+r[2]+r[2]+r[3]+r[3]),"string"==typeof r&&/^#[0-9A-Fa-f]{6}$/.test(r)){var u=parseInt(r.substr(1),16);r=u>>16&255,o=u>>8&255,n=255&u}if(void 0===o||void 0===s&&r===o&&o===n)i="string"==typeof r?r+" "+l[0]:2===e.precision?j(r/255)+" "+l[0]:q(r/255)+" "+l[0];else if(void 0===s||"object"===t(a)(s)){if(s&&!isNaN(s.a)&&0===s.a)return["1.","1.","1.",l[1]].join(" ");i="string"==typeof r?[r,o,n,l[1]].join(" "):2===e.precision?[j(r/255),j(o/255),j(n/255),l[1]].join(" "):[q(r/255),q(o/255),q(n/255),l[1]].join(" ")}else i="string"==typeof r?[r,o,n,s,l[2]].join(" "):2===e.precision?[j(r),j(o),j(n),j(s),l[2]].join(" "):[q(r),q(o),q(n),q(s),l[2]].join(" ");return i},t5=b.__private__.getFilters=function(){return h},t4=b.__private__.putStream=function(t){var e=(t=t||{}).data||"",i=t.filters||t5(),r=t.alreadyAppliedFilters||[],o=t.addLength1||!1,n=e.length,a=t.objectId,s=function(t){return t};if(null!==p&&void 0===a)throw Error("ObjectId must be passed to putStream for file encryption");null!==p&&(s=ek.encryptor(a,0));var l={};!0===i&&(i=["FlateEncode"]);var h=t.additionalKeyValues||[],u=(l=void 0!==D.API.processDataByFilters?D.API.processDataByFilters(e,i):{data:e,reverseChain:[]}).reverseChain+(Array.isArray(r)?r.join(" "):r.toString());if(0!==l.data.length&&(h.push({key:"Length",value:l.data.length}),!0===o&&h.push({key:"Length1",value:n})),0!=u.length){if(u.split("/").length-1==1)h.push({key:"Filter",value:u});else{h.push({key:"Filter",value:"["+u+"]"});for(var c=0;c<h.length;c+=1)if("DecodeParms"===h[c].key){for(var f=[],d=0;d<l.reverseChain.split("/").length-1;d+=1)f.push("null");f.push(h[c].value),h[c].value="["+f.join(" ")+"]"}}}tc("<<");for(var g=0;g<h.length;g++)tc("/"+h[g].key+" "+h[g].value);tc(">>"),0!==l.data.length&&(tc("stream"),tc(s(l.data)),tc("endstream"))},t6=b.__private__.putPage=function(t){var e=t.number,i=t.data,r=t.objId,o=t.contentsObjId;tJ(r,!0),tc("<</Type /Page"),tc("/Parent "+t.rootDictionaryObjId+" 0 R"),tc("/Resources "+t.resourceDictionaryObjId+" 0 R"),tc("/MediaBox ["+parseFloat(C(t.mediaBox.bottomLeftX))+" "+parseFloat(C(t.mediaBox.bottomLeftY))+" "+C(t.mediaBox.topRightX)+" "+C(t.mediaBox.topRightY)+"]"),null!==t.cropBox&&tc("/CropBox ["+C(t.cropBox.bottomLeftX)+" "+C(t.cropBox.bottomLeftY)+" "+C(t.cropBox.topRightX)+" "+C(t.cropBox.topRightY)+"]"),null!==t.bleedBox&&tc("/BleedBox ["+C(t.bleedBox.bottomLeftX)+" "+C(t.bleedBox.bottomLeftY)+" "+C(t.bleedBox.topRightX)+" "+C(t.bleedBox.topRightY)+"]"),null!==t.trimBox&&tc("/TrimBox ["+C(t.trimBox.bottomLeftX)+" "+C(t.trimBox.bottomLeftY)+" "+C(t.trimBox.topRightX)+" "+C(t.trimBox.topRightY)+"]"),null!==t.artBox&&tc("/ArtBox ["+C(t.artBox.bottomLeftX)+" "+C(t.artBox.bottomLeftY)+" "+C(t.artBox.topRightX)+" "+C(t.artBox.topRightY)+"]"),"number"==typeof t.userUnit&&1!==t.userUnit&&tc("/UserUnit "+t.userUnit),tj.publish("putPage",{objId:r,pageContext:tD[e],pageNumber:e,page:i}),tc("/Contents "+o+" 0 R"),tc(">>"),tc("endobj");var n=i.join("\n");return N===A.ADVANCED&&(n+="\nQ"),tJ(o,!0),t4({data:n,filters:t5(),objectId:o}),tc("endobj"),r},t3=b.__private__.putPages=function(){var t,e,i=[];for(t=1;t<=tF;t++)tD[t].objId=tK(),tD[t].contentsObjId=tK();for(t=1;t<=tF;t++)i.push(t6({number:t,data:ta[t],objId:tD[t].objId,contentsObjId:tD[t].contentsObjId,mediaBox:tD[t].mediaBox,cropBox:tD[t].cropBox,bleedBox:tD[t].bleedBox,trimBox:tD[t].trimBox,artBox:tD[t].artBox,userUnit:tD[t].userUnit,rootDictionaryObjId:tQ,resourceDictionaryObjId:t0}));tJ(tQ,!0),tc("<</Type /Pages");var r="/Kids [";for(e=0;e<tF;e++)r+=i[e]+" 0 R ";tc(r+"]"),tc("/Count "+tF),tc(">>"),tc("endobj"),tj.publish("postPutPages")},t8=function(t){tj.publish("putFont",{font:t,out:tc,newObject:tX,putStream:t4}),!0!==t.isAlreadyPutted&&(t.objectNumber=tX(),tc("<<"),tc("/Type /Font"),tc("/BaseFont /"+R(t.postScriptName)),tc("/Subtype /Type1"),"string"==typeof t.encoding&&tc("/Encoding /"+t.encoding),tc("/FirstChar 32"),tc("/LastChar 255"),tc(">>"),tc("endobj"))},t7=function(){for(var t in tC)tC.hasOwnProperty(t)&&(!1===x||!0===x&&v.hasOwnProperty(t))&&t8(tC[t])},t9=function(t){t.objectNumber=tX();var e=[];e.push({key:"Type",value:"/XObject"}),e.push({key:"Subtype",value:"/Form"}),e.push({key:"BBox",value:"["+[C(t.x),C(t.y),C(t.x+t.width),C(t.y+t.height)].join(" ")+"]"}),e.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),t4({data:t.pages[1].join("\n"),additionalKeyValues:e,objectId:t.objectNumber}),tc("endobj")},et=function(){for(var t in tU)tU.hasOwnProperty(t)&&t9(tU[t])},ee=function(t,e){var i,r=[],o=1/(e-1);for(i=0;i<1;i+=o)r.push(i);if(r.push(1),0!=t[0].offset){var n={offset:0,color:t[0].color};t.unshift(n)}if(1!=t[t.length-1].offset){var a={offset:1,color:t[t.length-1].color};t.push(a)}for(var s="",l=0,h=0;h<r.length;h++){for(i=r[h];i>t[l+1].offset;)l++;var u=t[l].offset,c=(i-u)/(t[l+1].offset-u),f=t[l].color,d=t[l+1].color;s+=tt(Math.round((1-c)*f[0]+c*d[0]).toString(16))+tt(Math.round((1-c)*f[1]+c*d[1]).toString(16))+tt(Math.round((1-c)*f[2]+c*d[2]).toString(16))}return s.trim()},ei=function(t,e){e||(e=21);var i=tX(),r=ee(t.colors,e),o=[];o.push({key:"FunctionType",value:"0"}),o.push({key:"Domain",value:"[0.0 1.0]"}),o.push({key:"Size",value:"["+e+"]"}),o.push({key:"BitsPerSample",value:"8"}),o.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),o.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),t4({data:r,additionalKeyValues:o,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:i}),tc("endobj"),t.objectNumber=tX(),tc("<< /ShadingType "+t.type),tc("/ColorSpace /DeviceRGB");var n="/Coords ["+C(parseFloat(t.coords[0]))+" "+C(parseFloat(t.coords[1]))+" ";2===t.type?n+=C(parseFloat(t.coords[2]))+" "+C(parseFloat(t.coords[3])):n+=C(parseFloat(t.coords[2]))+" "+C(parseFloat(t.coords[3]))+" "+C(parseFloat(t.coords[4]))+" "+C(parseFloat(t.coords[5])),tc(n+="]"),t.matrix&&tc("/Matrix ["+t.matrix.toString()+"]"),tc("/Function "+i+" 0 R"),tc("/Extend [true true]"),tc(">>"),tc("endobj")},er=function(t,e){var i=tK(),r=tX();e.push({resourcesOid:i,objectOid:r}),t.objectNumber=r;var o=[];o.push({key:"Type",value:"/Pattern"}),o.push({key:"PatternType",value:"1"}),o.push({key:"PaintType",value:"1"}),o.push({key:"TilingType",value:"1"}),o.push({key:"BBox",value:"["+t.boundingBox.map(C).join(" ")+"]"}),o.push({key:"XStep",value:C(t.xStep)}),o.push({key:"YStep",value:C(t.yStep)}),o.push({key:"Resources",value:i+" 0 R"}),t.matrix&&o.push({key:"Matrix",value:"["+t.matrix.toString()+"]"}),t4({data:t.stream,additionalKeyValues:o,objectId:t.objectNumber}),tc("endobj")},eo=function(t){var e;for(e in tR)tR.hasOwnProperty(e)&&(tR[e]instanceof Z?ei(tR[e]):tR[e]instanceof F&&er(tR[e],t))},en=function(t){for(var e in t.objectNumber=tX(),tc("<<"),t)switch(e){case"opacity":tc("/ca "+j(t[e]));break;case"stroke-opacity":tc("/CA "+j(t[e]))}tc(">>"),tc("endobj")},ea=function(){var t;for(t in tk)tk.hasOwnProperty(t)&&en(tk[t])},es=function(){for(var t in tc("/XObject <<"),tU)tU.hasOwnProperty(t)&&tU[t].objectNumber>=0&&tc("/"+t+" "+tU[t].objectNumber+" 0 R");tj.publish("putXobjectDict"),tc(">>")},el=function(){ek.oid=tX(),tc("<<"),tc("/Filter /Standard"),tc("/V "+ek.v),tc("/R "+ek.r),tc("/U <"+ek.toHexString(ek.U)+">"),tc("/O <"+ek.toHexString(ek.O)+">"),tc("/P "+ek.P),tc(">>"),tc("endobj")},eh=function(){for(var t in tc("/Font <<"),tC)tC.hasOwnProperty(t)&&(!1===x||!0===x&&v.hasOwnProperty(t))&&tc("/"+t+" "+tC[t].objectNumber+" 0 R");tc(">>")},eu=function(){if(Object.keys(tR).length>0){for(var t in tc("/Shading <<"),tR)tR.hasOwnProperty(t)&&tR[t]instanceof Z&&tR[t].objectNumber>=0&&tc("/"+t+" "+tR[t].objectNumber+" 0 R");tj.publish("putShadingPatternDict"),tc(">>")}},ec=function(t){if(Object.keys(tR).length>0){for(var e in tc("/Pattern <<"),tR)tR.hasOwnProperty(e)&&tR[e]instanceof b.TilingPattern&&tR[e].objectNumber>=0&&tR[e].objectNumber<t&&tc("/"+e+" "+tR[e].objectNumber+" 0 R");tj.publish("putTilingPatternDict"),tc(">>")}},ef=function(){if(Object.keys(tk).length>0){var t;for(t in tc("/ExtGState <<"),tk)tk.hasOwnProperty(t)&&tk[t].objectNumber>=0&&tc("/"+t+" "+tk[t].objectNumber+" 0 R");tj.publish("putGStateDict"),tc(">>")}},ed=function(t){tJ(t.resourcesOid,!0),tc("<<"),tc("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),eh(),eu(),ec(t.objectOid),ef(),es(),tc(">>"),tc("endobj")},ep=function(){var t=[];t7(),ea(),et(),eo(t),tj.publish("putResources"),t.forEach(ed),ed({resourcesOid:t0,objectOid:Number.MAX_SAFE_INTEGER}),tj.publish("postPutResources")},eg=function(){tj.publish("putAdditionalObjects");for(var t=0;t<tn.length;t++){var e=tn[t];tJ(e.objId,!0),tc(e.content),tc("endobj")}tj.publish("postPutAdditionalObjects")},em=function(t){tT[t.fontName]=tT[t.fontName]||{},tT[t.fontName][t.fontStyle]=t.id},ey=function(t,e,i,r,o){var n={id:"F"+(Object.keys(tC).length+1).toString(10),postScriptName:t,fontName:e,fontStyle:i,encoding:r,isStandardFont:o||!1,metadata:{}};return tj.publish("addFont",{font:n,instance:this}),tC[n.id]=n,em(n),n.id},ex=function(t,e){var i,r,o,n,a,s,l,h,u;if(o=(e=e||{}).sourceEncoding||"Unicode",a=e.outputEncoding,(e.autoencode||a)&&tC[tA].metadata&&tC[tA].metadata[o]&&tC[tA].metadata[o].encoding&&(n=tC[tA].metadata[o].encoding,!a&&tC[tA].encoding&&(a=tC[tA].encoding),!a&&n.codePages&&(a=n.codePages[0]),"string"==typeof a&&(a=n[a]),a)){for(l=!1,s=[],i=0,r=t.length;i<r;i++)(h=a[t.charCodeAt(i)])?s.push(String.fromCharCode(h)):s.push(t[i]),s[i].charCodeAt(0)>>8&&(l=!0);t=s.join("")}for(i=t.length;void 0===l&&0!==i;)t.charCodeAt(i-1)>>8&&(l=!0),i--;if(!l)return t;for(s=e.noBOM?[]:[254,255],i=0,r=t.length;i<r;i++){if((u=(h=t.charCodeAt(i))>>8)>>8)throw Error("Character at position "+i+" of string '"+t+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");s.push(u),s.push(h-(u<<8))}return String.fromCharCode.apply(void 0,s)},ev=b.__private__.pdfEscape=b.pdfEscape=function(t,e){return ex(t,e).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},eb=b.__private__.beginPage=function(t){ta[++tF]=[],tD[tF]={objId:0,contentsObjId:0,userUnit:Number(c),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(t[0]),topRightY:Number(t[1])}},eS(tF),tu(ta[$])},ew=function(t,e){var i,o,a;switch(r=e||r,"string"==typeof t&&Array.isArray(i=E(t.toLowerCase()))&&(o=i[0],a=i[1]),Array.isArray(t)&&(o=t[0]*tN,a=t[1]*tN),isNaN(o)&&(o=n[0],a=n[1]),(o>14400||a>14400)&&(u.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),o=Math.min(14400,o),a=Math.min(14400,a)),n=[o,a],r.substr(0,1)){case"l":a>o&&(n=[a,o]);break;case"p":o>a&&(n=[a,o])}eb(n),e2(e0),tc(it),0!==is&&tc(is+" J"),0!==il&&tc(il+" j"),tj.publish("addPage",{pageNumber:tF})},e_=function(t){t>0&&t<=tF&&(ta.splice(t,1),tD.splice(t,1),tF--,$>tF&&($=tF),this.setPage($))},eS=function(t){t>0&&t<=tF&&($=t)},eE=b.__private__.getNumberOfPages=b.getNumberOfPages=function(){return ta.length-1},eA=function(t,e,i){var r,o=void 0;return i=i||{},t=void 0!==t?t:tC[tA].fontName,e=void 0!==e?e:tC[tA].fontStyle,void 0!==tT[r=t.toLowerCase()]&&void 0!==tT[r][e]?o=tT[r][e]:void 0!==tT[t]&&void 0!==tT[t][e]?o=tT[t][e]:!1===i.disableWarning&&u.warn("Unable to look up font label for font '"+t+"', '"+e+"'. Refer to getFontList() for available fonts."),o||i.noFallback||null==(o=tT.times[e])&&(o=tT.times.normal),o},eN=b.__private__.putInfo=function(){var t=tX(),e=function(t){return t};for(var i in null!==p&&(e=ek.encryptor(t,0)),tc("<<"),tc("/Producer ("+ev(e("jsPDF "+D.version))+")"),tE)tE.hasOwnProperty(i)&&tE[i]&&tc("/"+i.substr(0,1).toUpperCase()+i.substr(1)+" ("+ev(e(tE[i]))+")");tc("/CreationDate ("+ev(e(z))+")"),tc(">>"),tc("endobj")},eI=b.__private__.putCatalog=function(t){var e=(t=t||{}).rootDictionaryObjId||tQ;switch(tX(),tc("<<"),tc("/Type /Catalog"),tc("/Pages "+e+" 0 R"),tm||(tm="fullwidth"),tm){case"fullwidth":tc("/OpenAction [3 0 R /FitH null]");break;case"fullheight":tc("/OpenAction [3 0 R /FitV null]");break;case"fullpage":tc("/OpenAction [3 0 R /Fit]");break;case"original":tc("/OpenAction [3 0 R /XYZ null null 1]");break;default:var i=""+tm;"%"===i.substr(i.length-1)&&(tm=parseInt(tm)/100),"number"==typeof tm&&tc("/OpenAction [3 0 R /XYZ null null "+j(tm)+"]")}switch(tw||(tw="continuous"),tw){case"continuous":tc("/PageLayout /OneColumn");break;case"single":tc("/PageLayout /SinglePage");break;case"two":case"twoleft":tc("/PageLayout /TwoColumnLeft");break;case"tworight":tc("/PageLayout /TwoColumnRight")}tv&&tc("/PageMode /"+tv),tj.publish("putCatalog"),tc(">>"),tc("endobj")},eM=b.__private__.putTrailer=function(){tc("trailer"),tc("<<"),tc("/Size "+(te+1)),tc("/Root "+te+" 0 R"),tc("/Info "+(te-1)+" 0 R"),null!==p&&tc("/Encrypt "+ek.oid+" 0 R"),tc("/ID [ <"+H+"> <"+H+"> ]"),tc(">>")},eP=b.__private__.putHeader=function(){tc("%PDF-"+w),tc("%ºß¬à")},eC=b.__private__.putXRef=function(){var t="0000000000";tc("xref"),tc("0 "+(te+1)),tc("0000000000 65535 f ");for(var e=1;e<=te;e++)"function"==typeof ti[e]?tc((t+ti[e]()).slice(-10)+" 00000 n "):void 0!==ti[e]?tc((t+ti[e]).slice(-10)+" 00000 n "):tc("0000000000 00000 n ")},eT=b.__private__.buildDocument=function(){th(),tu(tr),tj.publish("buildDocument"),eP(),t3(),eg(),ep(),null!==p&&el(),eN(),eI();var t=to;return eC(),eM(),tc("startxref"),tc(""+t),tc("%%EOF"),tu(ta[$]),tr.join("\n")},eL=b.__private__.getBlob=function(t){return new Blob([td(t)],{type:"application/pdf"})},eR=b.output=b.__private__.output=((e$=function(t,e){switch("string"==typeof(e=e||{})?e={filename:e}:e.filename=e.filename||"generated.pdf",t){case void 0:return eT();case"save":b.save(e.filename);break;case"arraybuffer":return td(eT());case"blob":return eL(eT());case"bloburi":case"bloburl":if(void 0!==l.URL&&"function"==typeof l.URL.createObjectURL)return l.URL&&l.URL.createObjectURL(eL(eT()))||void 0;u.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var i="",r=eT();try{i=g(r)}catch(t){i=g(unescape(encodeURIComponent(r)))}return"data:application/pdf;filename="+e.filename+";base64,"+i;case"pdfobjectnewwindow":if("[object Window]"===Object.prototype.toString.call(l)){var o="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",n=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';e.pdfObjectUrl&&(o=e.pdfObjectUrl,n="");var a='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+o+'"'+n+'></script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(e)+");</script></body></html>",s=l.open();return null!==s&&s.document.write(a),s}throw Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if("[object Window]"===Object.prototype.toString.call(l)){var h='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(e.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+e.filename+'" width="500px" height="400px" /></body></html>',c=l.open();if(null!==c){c.document.write(h);var f=this;c.document.documentElement.querySelector("#pdfViewer").onload=function(){c.document.title=e.filename,c.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(f.output("bloburl"))}}return c}throw Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if("[object Window]"!==Object.prototype.toString.call(l))throw Error("The option dataurlnewwindow just works in a browser-environment.");var d='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",e)+'"></iframe></body></html>',p=l.open();if(null!==p&&(p.document.write(d),p.document.title=e.filename),p||"undefined"==typeof safari)return p;break;case"datauri":case"dataurl":return l.document.location.href=this.output("datauristring",e);default:return null}}).foo=function(){try{return e$.apply(this,arguments)}catch(i){var t=i.stack||"";~t.indexOf(" at ")&&(t=t.split(" at ")[1]);var e="Error in function "+t.split("\n")[0].split("<")[0]+": "+i.message;if(!l.console)throw Error(e);l.console.error(e,i),l.alert&&alert(e)}},e$.foo.bar=e$,e$.foo),eO=function(t){return!0===Array.isArray(tq)&&tq.indexOf(t)>-1};switch(o){case"pt":tN=1;break;case"mm":tN=72/25.4;break;case"cm":tN=72/2.54;break;case"in":tN=72;break;case"px":tN=1==eO("px_scaling")?.75:96/72;break;case"pc":case"em":tN=12;break;case"ex":tN=6;break;default:if("number"!=typeof o)throw Error("Invalid unit: "+o);tN=o}var ek=null;K(),Y();var eG=b.__private__.getPageInfo=b.getPageInfo=function(t){if(isNaN(t)||t%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:tD[t].objId,pageNumber:t,pageContext:tD[t]}},eZ=b.__private__.getPageInfoByObjId=function(t){if(isNaN(t)||t%1!=0)throw Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var e in tD)if(tD[e].objId===t)break;return eG(e)},eF=b.__private__.getCurrentPageInfo=b.getCurrentPageInfo=function(){return{objId:tD[$].objId,pageNumber:$,pageContext:tD[$]}};b.addPage=function(){return ew.apply(this,arguments),this},b.setPage=function(){return eS.apply(this,arguments),tu.call(this,ta[$]),this},b.insertPage=function(t){return this.addPage(),this.movePage($,t),this},b.movePage=function(t,e){var i,r;if(t>e){i=ta[t],r=tD[t];for(var o=t;o>e;o--)ta[o]=ta[o-1],tD[o]=tD[o-1];ta[e]=i,tD[e]=r,this.setPage(e)}else if(t<e){i=ta[t],r=tD[t];for(var n=t;n<e;n++)ta[n]=ta[n+1],tD[n]=tD[n+1];ta[e]=i,tD[e]=r,this.setPage(e)}return this},b.deletePage=function(){return e_.apply(this,arguments),this},b.__private__.text=b.text=function(e,i,r,o,n){var s,l,h,u,c,f,d,p,g,m=(o=o||{}).scope||this;if("number"==typeof e&&"number"==typeof i&&("string"==typeof r||Array.isArray(r))){var y=r;r=i,i=e,e=y}if(arguments[3]instanceof tH==!1?(h=arguments[4],u=arguments[5],"object"===t(a)(d=arguments[3])&&null!==d||("string"==typeof h&&(u=h,h=null),"string"==typeof d&&(u=d,d=null),"number"==typeof d&&(h=d,d=null),o={flags:d,angle:h,align:u})):(T("The transform parameter of text() with a Matrix value"),g=n),isNaN(i)||isNaN(r)||null==e)throw Error("Invalid arguments passed to jsPDF.text");if(0===e.length)return m;var x="",b=!1,w="number"==typeof o.lineHeightFactor?o.lineHeightFactor:eQ,_=m.internal.scaleFactor;function S(t){for(var e,i=t.concat(),r=[],o=i.length;o--;)"string"==typeof(e=i.shift())?r.push(e):Array.isArray(t)&&(1===e.length||void 0===e[1]&&void 0===e[2])?r.push(e[0]):r.push([e[0],e[1],e[2]]);return r}function E(t,e){var i;if("string"==typeof t)i=e(t)[0];else if(Array.isArray(t)){for(var r,o,n=t.concat(),a=[],s=n.length;s--;)"string"==typeof(r=n.shift())?a.push(e(r)[0]):Array.isArray(r)&&"string"==typeof r[0]&&a.push([(o=e(r[0],r[1],r[2]))[0],o[1],o[2]]);i=a}return i}var I=!1,M=!0;if("string"==typeof e)I=!0;else if(Array.isArray(e)){var P=e.concat();l=[];for(var L,R=P.length;R--;)("string"!=typeof(L=P.shift())||Array.isArray(L)&&"string"!=typeof L[0])&&(M=!1);I=M}if(!1===I)throw Error('Type of text must be string or Array. "'+e+'" is not recognized.');"string"==typeof e&&(e=e.match(/[\r?\n]/)?e.split(/\r\n|\r|\n/g):[e]);var O=tg/m.internal.scaleFactor,k=O*(w-1);switch(o.baseline){case"bottom":r-=k;break;case"top":r+=O-k;break;case"hanging":r+=O-2*k;break;case"middle":r+=O/2-k}if((f=o.maxWidth||0)>0&&("string"==typeof e?e=m.splitTextToSize(e,f):"[object Array]"===Object.prototype.toString.call(e)&&(e=e.reduce(function(t,e){return t.concat(m.splitTextToSize(e,f))},[]))),s={text:e,x:i,y:r,options:o,mutex:{pdfEscape:ev,activeFontKey:tA,fonts:tC,activeFontSize:tg}},tj.publish("preProcessText",s),e=s.text,h=(o=s.options).angle,g instanceof tH==!1&&h&&"number"==typeof h){h*=Math.PI/180,0===o.rotationDirection&&(h=-h),N===A.ADVANCED&&(h=-h);var G=Math.cos(h),Z=Math.sin(h);g=new tH(G,Z,-Z,G,0,0)}else h&&h instanceof tH&&(g=h);N!==A.ADVANCED||g||(g=tY),void 0!==(c=o.charSpace||io)&&(x+=C(U(c))+" Tc\n",this.setCharSpace(this.getCharSpace()||0)),void 0!==(p=o.horizontalScale)&&(x+=C(100*p)+" Tz\n"),o.lang;var F=-1,D=void 0!==o.renderingMode?o.renderingMode:o.stroke,j=m.internal.getCurrentPageInfo().pageContext;switch(D){case 0:case!1:case"fill":F=0;break;case 1:case!0:case"stroke":F=1;break;case 2:case"fillThenStroke":F=2;break;case 3:case"invisible":F=3;break;case 4:case"fillAndAddForClipping":F=4;break;case 5:case"strokeAndAddPathForClipping":F=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":F=6;break;case 7:case"addToPathForClipping":F=7}var q=void 0!==j.usedRenderingMode?j.usedRenderingMode:-1;-1!==F?x+=F+" Tr\n":-1!==q&&(x+="0 Tr\n"),-1!==F&&(j.usedRenderingMode=F),u=o.align||"left";var B,z=tg*w,H=m.internal.pageSize.getWidth(),V=tC[tA];c=o.charSpace||io,f=o.maxWidth||0,d=Object.assign({autoencode:!0,noBOM:!0},o.flags);var Y=[];if("[object Array]"===Object.prototype.toString.call(e)){l=S(e),"left"!==u&&(B=l.map(function(t){return m.getStringUnitWidth(t,{font:V,charSpace:c,fontSize:tg,doKerning:!1})*tg/_}));var W,X,K=0;if("right"===u){i-=B[0],e=[],R=l.length;for(var J=0;J<R;J++)0===J?(X=e3(i),W=e8(r)):(X=U(K-B[J]),W=-z),e.push([l[J],X,W]),K=B[J]}else if("center"===u){i-=B[0]/2,e=[],R=l.length;for(var $=0;$<R;$++)0===$?(X=e3(i),W=e8(r)):(X=U((K-B[$])/2),W=-z),e.push([l[$],X,W]),K=B[$]}else if("left"===u){e=[],R=l.length;for(var Q=0;Q<R;Q++)e.push(l[Q])}else{if("justify"!==u)throw Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');e=[],R=l.length,f=0!==f?f:H;for(var tt=0;tt<R;tt++)W=0===tt?e8(r):-z,X=0===tt?e3(i):0,tt<R-1?Y.push(C(U((f-B[tt])/(l[tt].split(" ").length-1)))):Y.push(0),e.push([l[tt],X,W])}}!0===("boolean"==typeof o.R2L?o.R2L:tx)&&(e=E(e,function(t,e,i){return[t.split("").reverse().join(""),e,i]})),s={text:e,x:i,y:r,options:o,mutex:{pdfEscape:ev,activeFontKey:tA,fonts:tC,activeFontSize:tg}},tj.publish("postProcessText",s),e=s.text,b=s.mutex.isHex||!1;var te=tC[tA].encoding;"WinAnsiEncoding"!==te&&"StandardEncoding"!==te||(e=E(e,function(t,e,i){return[ev(t.split("	").join(Array(o.TabLen||9).join(" ")),d),e,i]})),l=S(e),e=[];for(var ti,tr,to,tn=Array.isArray(l[0])?1:0,ta="",ts=function(t,e,i){var r="";return i instanceof tH?(i="number"==typeof o.angle?tV(i,new tH(1,0,0,1,t,e)):tV(new tH(1,0,0,1,t,e),i),N===A.ADVANCED&&(i=tV(new tH(1,0,0,-1,0,0),i)),r=i.join(" ")+" Tm\n"):r=C(t)+" "+C(e)+" Td\n",r},tl=0;tl<l.length;tl++){switch(ta="",tn){case 1:to=(b?"<":"(")+l[tl][0]+(b?">":")"),ti=parseFloat(l[tl][1]),tr=parseFloat(l[tl][2]);break;case 0:to=(b?"<":"(")+l[tl]+(b?">":")"),ti=e3(i),tr=e8(r)}void 0!==Y&&void 0!==Y[tl]&&(ta=Y[tl]+" Tw\n"),0===tl?e.push(ta+ts(ti,tr,g)+to):0===tn?e.push(ta+to):1===tn&&e.push(ta+ts(ti,tr,g)+to)}e=(0===tn?e.join(" Tj\nT* "):e.join(" Tj\n"))+" Tj\n";var th="BT\n/";return tc(th+=tA+" "+tg+" Tf\n"+C(tg*w)+" TL\n"+ii+"\n"+x+e+"ET"),v[tA]=!0,m};var eD=b.__private__.clip=b.clip=function(t){return tc("evenodd"===t?"W*":"W"),this};b.clipEvenOdd=function(){return eD("evenodd")},b.__private__.discardPath=b.discardPath=function(){return tc("n"),this};var ej=b.__private__.isValidStyle=function(t){var e=!1;return -1!==[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(t)&&(e=!0),e};b.__private__.setDefaultPathOperation=b.setDefaultPathOperation=function(t){return ej(t)&&(d=t),this};var eq=b.__private__.getStyle=b.getStyle=function(t){var e=d;switch(t){case"D":case"S":e="S";break;case"F":e="f";break;case"FD":case"DF":e="B";break;case"f":case"f*":case"B":case"B*":e=t}return e},eU=b.close=function(){return tc("h"),this};b.stroke=function(){return tc("S"),this},b.fill=function(t){return eB("f",t),this},b.fillEvenOdd=function(t){return eB("f*",t),this},b.fillStroke=function(t){return eB("B",t),this},b.fillStrokeEvenOdd=function(t){return eB("B*",t),this};var eB=function(e,i){"object"===t(a)(i)?eV(i,e):tc(e)},ez=function(t){null===t||N===A.ADVANCED&&void 0===t||tc(t=eq(t))};function eH(t,e,i,r,o){var n=new F(e||this.boundingBox,i||this.xStep,r||this.yStep,this.gState,o||this.matrix);return n.stream=this.stream,tW(t+"$$"+this.cloneIndex+++"$$",n),n}var eV=function(t,e){var i=tO[t.key],r=tR[i];if(r instanceof Z)tc("q"),tc(eY(e)),r.gState&&b.setGState(r.gState),tc(t.matrix.toString()+" cm"),tc("/"+i+" sh"),tc("Q");else if(r instanceof F){var o=new tH(1,0,0,-1,0,iv());t.matrix&&(o=o.multiply(t.matrix||tY),i=eH.call(r,t.key,t.boundingBox,t.xStep,t.yStep,o).id),tc("q"),tc("/Pattern cs"),tc("/"+i+" scn"),r.gState&&b.setGState(r.gState),tc(e),tc("Q")}},eY=function(t){switch(t){case"f":case"F":case"n":return"W n";case"f*":return"W* n";case"B":case"S":return"W S";case"B*":return"W* S"}},eW=b.moveTo=function(t,e){return tc(C(U(t))+" "+C(B(e))+" m"),this},eX=b.lineTo=function(t,e){return tc(C(U(t))+" "+C(B(e))+" l"),this},eK=b.curveTo=function(t,e,i,r,o,n){return tc([C(U(t)),C(B(e)),C(U(i)),C(B(r)),C(U(o)),C(B(n)),"c"].join(" ")),this};b.__private__.line=b.line=function(t,e,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||!ej(o))throw Error("Invalid arguments passed to jsPDF.line");return N===A.COMPAT?this.lines([[i-t,r-e]],t,e,[1,1],o||"S"):this.lines([[i-t,r-e]],t,e,[1,1]).stroke()},b.__private__.lines=b.lines=function(t,e,i,r,o,n){var a,s,l,h,u,c,f,d,p,g,m;if("number"==typeof t&&(m=i,i=e,e=t,t=m),r=r||[1,1],n=n||!1,isNaN(e)||isNaN(i)||!Array.isArray(t)||!Array.isArray(r)||!ej(o)||"boolean"!=typeof n)throw Error("Invalid arguments passed to jsPDF.lines");for(eW(e,i),a=r[0],s=r[1],h=t.length,p=e,g=i,l=0;l<h;l++)2===(u=t[l]).length?eX(p=u[0]*a+p,g=u[1]*s+g):(c=u[0]*a+p,f=u[1]*s+g,d=u[2]*a+p,eK(c,f,d,u[3]*s+g,p=u[4]*a+p,g=u[5]*s+g));return n&&eU(),ez(o),this},b.path=function(t){for(var e=0;e<t.length;e++){var i=t[e],r=i.c;switch(i.op){case"m":eW(r[0],r[1]);break;case"l":eX(r[0],r[1]);break;case"c":eK.apply(this,r);break;case"h":eU()}}return this},b.__private__.rect=b.rect=function(t,e,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||!ej(o))throw Error("Invalid arguments passed to jsPDF.rect");return N===A.COMPAT&&(r=-r),tc([C(U(t)),C(B(e)),C(U(i)),C(U(r)),"re"].join(" ")),ez(o),this},b.__private__.triangle=b.triangle=function(t,e,i,r,o,n,a){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||isNaN(o)||isNaN(n)||!ej(a))throw Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[i-t,r-e],[o-i,n-r],[t-o,e-n]],t,e,[1,1],a,!0),this},b.__private__.roundedRect=b.roundedRect=function(t,e,i,r,o,n,a){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||isNaN(o)||isNaN(n)||!ej(a))throw Error("Invalid arguments passed to jsPDF.roundedRect");var s=4/3*(Math.SQRT2-1);return o=Math.min(o,.5*i),n=Math.min(n,.5*r),this.lines([[i-2*o,0],[o*s,0,o,n-n*s,o,n],[0,r-2*n],[0,n*s,-o*s,n,-o,n],[2*o-i,0],[-o*s,0,-o,-n*s,-o,-n],[0,2*n-r],[0,-n*s,o*s,-n,o,-n]],t+o,e,[1,1],a,!0),this},b.__private__.ellipse=b.ellipse=function(t,e,i,r,o){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||!ej(o))throw Error("Invalid arguments passed to jsPDF.ellipse");var n=4/3*(Math.SQRT2-1)*i,a=4/3*(Math.SQRT2-1)*r;return eW(t+i,e),eK(t+i,e-a,t+n,e-r,t,e-r),eK(t-n,e-r,t-i,e-a,t-i,e),eK(t-i,e+a,t-n,e+r,t,e+r),eK(t+n,e+r,t+i,e+a,t+i,e),ez(o),this},b.__private__.circle=b.circle=function(t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i)||!ej(r))throw Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(t,e,i,i,r)},b.setFont=function(t,e,i){return i&&(e=P(e,i)),tA=eA(t,e,{disableWarning:!1}),this};var eJ=b.__private__.getFont=b.getFont=function(){return tC[eA.apply(b,arguments)]};b.__private__.getFontList=b.getFontList=function(){var t,e,i={};for(t in tT)if(tT.hasOwnProperty(t))for(e in i[t]=[],tT[t])tT[t].hasOwnProperty(e)&&i[t].push(e);return i},b.addFont=function(t,e,i,r,o){var n=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&-1!==n.indexOf(arguments[3])?o=arguments[3]:arguments[3]&&-1==n.indexOf(arguments[3])&&(i=P(i,r)),o=o||"Identity-H",ey.call(this,t,e,i,o)};var e$,eQ,e0=e.lineWidth||.200025,e1=b.__private__.getLineWidth=b.getLineWidth=function(){return e0},e2=b.__private__.setLineWidth=b.setLineWidth=function(t){return e0=t,tc(C(U(t))+" w"),this};b.__private__.setLineDash=D.API.setLineDash=D.API.setLineDashPattern=function(t,e){if(t=t||[],isNaN(e=e||0)||!Array.isArray(t))throw Error("Invalid arguments passed to jsPDF.setLineDash");return tc("["+(t=t.map(function(t){return C(U(t))}).join(" "))+"] "+(e=C(U(e)))+" d"),this};var e5=b.__private__.getLineHeight=b.getLineHeight=function(){return tg*eQ};b.__private__.getLineHeight=b.getLineHeight=function(){return tg*eQ};var e4=b.__private__.setLineHeightFactor=b.setLineHeightFactor=function(t){return"number"==typeof(t=t||1.15)&&(eQ=t),this},e6=b.__private__.getLineHeightFactor=b.getLineHeightFactor=function(){return eQ};e4(e.lineHeight);var e3=b.__private__.getHorizontalCoordinate=function(t){return U(t)},e8=b.__private__.getVerticalCoordinate=function(t){return N===A.ADVANCED?t:tD[$].mediaBox.topRightY-tD[$].mediaBox.bottomLeftY-U(t)},e7=b.__private__.getHorizontalCoordinateString=b.getHorizontalCoordinateString=function(t){return C(e3(t))},e9=b.__private__.getVerticalCoordinateString=b.getVerticalCoordinateString=function(t){return C(e8(t))},it=e.strokeColor||"0 G";b.__private__.getStrokeColor=b.getDrawColor=function(){return t1(it)},b.__private__.setStrokeColor=b.setDrawColor=function(t,e,i,r){return tc(it=t2({ch1:t,ch2:e,ch3:i,ch4:r,pdfColorType:"draw",precision:2})),this};var ie=e.fillColor||"0 g";b.__private__.getFillColor=b.getFillColor=function(){return t1(ie)},b.__private__.setFillColor=b.setFillColor=function(t,e,i,r){return tc(ie=t2({ch1:t,ch2:e,ch3:i,ch4:r,pdfColorType:"fill",precision:2})),this};var ii=e.textColor||"0 g",ir=b.__private__.getTextColor=b.getTextColor=function(){return t1(ii)};b.__private__.setTextColor=b.setTextColor=function(t,e,i,r){return ii=t2({ch1:t,ch2:e,ch3:i,ch4:r,pdfColorType:"text",precision:3}),this};var io=e.charSpace,ia=b.__private__.getCharSpace=b.getCharSpace=function(){return parseFloat(io||0)};b.__private__.setCharSpace=b.setCharSpace=function(t){if(isNaN(t))throw Error("Invalid argument passed to jsPDF.setCharSpace");return io=t,this};var is=0;b.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},b.__private__.setLineCap=b.setLineCap=function(t){var e=b.CapJoinStyles[t];if(void 0===e)throw Error("Line cap style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return is=e,tc(e+" J"),this};var il=0;b.__private__.setLineJoin=b.setLineJoin=function(t){var e=b.CapJoinStyles[t];if(void 0===e)throw Error("Line join style of '"+t+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return il=e,tc(e+" j"),this},b.__private__.setLineMiterLimit=b.__private__.setMiterLimit=b.setLineMiterLimit=b.setMiterLimit=function(t){if(isNaN(t=t||0))throw Error("Invalid argument passed to jsPDF.setLineMiterLimit");return tc(C(U(t))+" M"),this},b.GState=k,b.setGState=function(t){(t="string"==typeof t?tk[tG[t]]:ih(null,t)).equals(tZ)||(tc("/"+t.id+" gs"),tZ=t)};var ih=function(t,e){if(!t||!tG[t]){var i=!1;for(var r in tk)if(tk.hasOwnProperty(r)&&tk[r].equals(e)){i=!0;break}if(i)e=tk[r];else{var o="GS"+(Object.keys(tk).length+1).toString(10);tk[o]=e,e.id=o}return t&&(tG[t]=e.id),tj.publish("addGState",e),e}};b.addGState=function(t,e){return ih(t,e),this},b.saveGraphicsState=function(){return tc("q"),tL.push({key:tA,size:tg,color:ii}),this},b.restoreGraphicsState=function(){tc("Q");var t=tL.pop();return tA=t.key,tg=t.size,ii=t.color,tZ=null,this},b.setCurrentTransformationMatrix=function(t){return tc(t.toString()+" cm"),this},b.comment=function(t){return tc("#"+t),this};var iu=function(t,e){var i=t||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return i},set:function(t){isNaN(t)||(i=parseFloat(t))}});var r=e||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return r},set:function(t){isNaN(t)||(r=parseFloat(t))}});var o="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return o},set:function(t){o=t.toString()}}),this},ic=function(t,e,i,r){iu.call(this,t,e),this.type="rect";var o=i||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return o},set:function(t){isNaN(t)||(o=parseFloat(t))}});var n=r||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return n},set:function(t){isNaN(t)||(n=parseFloat(t))}}),this},id=function(){this.page=tF,this.currentPage=$,this.pages=ta.slice(0),this.pagesContext=tD.slice(0),this.x=tI,this.y=tM,this.matrix=tP,this.width=iy($),this.height=iv($),this.outputDestination=tl,this.id="",this.objectNumber=-1};id.prototype.restore=function(){tF=this.page,$=this.currentPage,tD=this.pagesContext,ta=this.pages,tI=this.x,tM=this.y,tP=this.matrix,ix($,this.width),ib($,this.height),tl=this.outputDestination};var ip=function(t,e,i,r,o){tz.push(new id),tF=$=0,ta=[],tI=t,tM=e,tP=o,eb([i,r])},ig=function(t){if(tB[t])tz.pop().restore();else{var e=new id,i="Xo"+(Object.keys(tU).length+1).toString(10);e.id=i,tB[t]=i,tU[i]=e,tj.publish("addFormObject",e),tz.pop().restore()}};for(var im in b.beginFormObject=function(t,e,i,r,o){return ip(t,e,i,r,o),this},b.endFormObject=function(t){return ig(t),this},b.doFormObject=function(t,e){var i=tU[tB[t]];return tc("q"),tc(e.toString()+" cm"),tc("/"+i.id+" Do"),tc("Q"),this},b.getFormObject=function(t){var e=tU[tB[t]];return{x:e.x,y:e.y,width:e.width,height:e.height,matrix:e.matrix}},b.save=function(t,e){return t=t||"generated.pdf",(e=e||{}).returnPromise=e.returnPromise||!1,!1===e.returnPromise?(m(eL(eT()),t),"function"==typeof m.unload&&l.setTimeout&&setTimeout(m.unload,911),this):new Promise(function(e,i){try{var r=m(eL(eT()),t);"function"==typeof m.unload&&l.setTimeout&&setTimeout(m.unload,911),e(r)}catch(t){i(t.message)}})},D.API)D.API.hasOwnProperty(im)&&("events"===im&&D.API.events.length?function(t,e){var i,r,o;for(o=e.length-1;-1!==o;o--)i=e[o][0],r=e[o][1],t.subscribe.apply(t,[i].concat("function"==typeof r?[r]:r))}(tj,D.API.events):b[im]=D.API[im]);var iy=b.getPageWidth=function(t){return(tD[t=t||$].mediaBox.topRightX-tD[t].mediaBox.bottomLeftX)/tN},ix=b.setPageWidth=function(t,e){tD[t].mediaBox.topRightX=e*tN+tD[t].mediaBox.bottomLeftX},iv=b.getPageHeight=function(t){return(tD[t=t||$].mediaBox.topRightY-tD[t].mediaBox.bottomLeftY)/tN},ib=b.setPageHeight=function(t,e){tD[t].mediaBox.topRightY=e*tN+tD[t].mediaBox.bottomLeftY};return b.internal={pdfEscape:ev,getStyle:eq,getFont:eJ,getFontSize:ty,getCharSpace:ia,getTextColor:ir,getLineHeight:e5,getLineHeightFactor:e6,getLineWidth:e1,write:tf,getHorizontalCoordinate:e3,getVerticalCoordinate:e8,getCoordinateString:e7,getVerticalCoordinateString:e9,collections:{},newObject:tX,newAdditionalObject:t$,newObjectDeferred:tK,newObjectDeferredBegin:tJ,getFilters:t5,putStream:t4,events:tj,scaleFactor:tN,pageSize:{getWidth:function(){return iy($)},setWidth:function(t){ix($,t)},getHeight:function(){return iv($)},setHeight:function(t){ib($,t)}},encryptionOptions:p,encryption:ek,getEncryptor:function(t){return null!==p?ek.encryptor(t,0):function(t){return t}},output:eR,getNumberOfPages:eE,pages:ta,out:tc,f2:j,f3:q,getPageInfo:eG,getPageInfoByObjId:eZ,getCurrentPageInfo:eF,getPDFVersion:_,Point:iu,Rectangle:ic,Matrix:tH,hasHotfix:eO},Object.defineProperty(b.internal.pageSize,"width",{get:function(){return iy($)},set:function(t){ix($,t)},enumerable:!0,configurable:!0}),Object.defineProperty(b.internal.pageSize,"height",{get:function(){return iv($)},set:function(t){ib($,t)},enumerable:!0,configurable:!0}),(function(t){for(var e=0,i=tp.length;e<i;e++){var r=ey.call(this,t[e][0],t[e][1],t[e][2],tp[e][3],!0);!1===x&&(v[r]=!0);var o=t[e][0].split("-");em({id:r,fontName:o[0],fontStyle:o[1]||""})}tj.publish("addFonts",{fonts:tC,dictionary:tT})}).call(b,tp),tA="F1",ew(n,r),tj.publish("initialized"),b}L.prototype.lsbFirstWord=function(t){return String.fromCharCode(t>>0&255,t>>8&255,t>>16&255,t>>24&255)},L.prototype.toHexString=function(t){return t.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},L.prototype.hexToBytes=function(t){for(var e=[],i=0;i<t.length;i+=2)e.push(String.fromCharCode(parseInt(t.substr(i,2),16)));return e.join("")},L.prototype.processOwnerPassword=function(t,e){return C(I(e).substr(0,5),t)},L.prototype.encryptor=function(t,e){var i=I(this.encryptionKey+String.fromCharCode(255&t,t>>8&255,t>>16&255,255&e,e>>8&255)).substr(0,10);return function(t){return C(i,t)}},k.prototype.equals=function(e){var i,r="id,objectNumber,equals";if(!e||t(a)(e)!==t(a)(this))return!1;var o=0;for(i in this)if(!(r.indexOf(i)>=0)){if(this.hasOwnProperty(i)&&!e.hasOwnProperty(i)||this[i]!==e[i])return!1;o++}for(i in e)e.hasOwnProperty(i)&&0>r.indexOf(i)&&o--;return 0===o},D.API={events:[]},D.version="2.5.1";var j=D.API,q=1,U=function(t){return t.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},B=function(t){return t.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},z=function(t){return t.toFixed(2)},H=function(t){return t.toFixed(5)};j.__acroform__={};var V=function(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t},Y=function(t){return t*q},W=function(t){var e=new tf,i=tN.internal.getHeight(t)||0,r=tN.internal.getWidth(t)||0;return e.BBox=[0,0,Number(z(r)),Number(z(i))],e},X=j.__acroform__.setBit=function(t,e){if(e=e||0,isNaN(t=t||0)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return t|1<<e},K=j.__acroform__.clearBit=function(t,e){if(e=e||0,isNaN(t=t||0)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return t&~(1<<e)},J=j.__acroform__.getBit=function(t,e){if(isNaN(t)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return 0==(t&1<<e)?0:1},$=j.__acroform__.getBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return J(t,e-1)},Q=j.__acroform__.setBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return X(t,e-1)},tt=j.__acroform__.clearBitForPdf=function(t,e){if(isNaN(t)||isNaN(e))throw Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return K(t,e-1)},te=j.__acroform__.calculateCoordinates=function(t,e){var i=e.internal.getHorizontalCoordinate,r=e.internal.getVerticalCoordinate,o=t[0],n=t[1],a=t[2],s=t[3],l={};return l.lowerLeft_X=i(o)||0,l.lowerLeft_Y=r(n+s)||0,l.upperRight_X=i(o+a)||0,l.upperRight_Y=r(n)||0,[Number(z(l.lowerLeft_X)),Number(z(l.lowerLeft_Y)),Number(z(l.upperRight_X)),Number(z(l.upperRight_Y))]},ti=function(t){if(t.appearanceStreamContent)return t.appearanceStreamContent;if(t.V||t.DV){var e=[],i=t._V||t.DV,r=tr(t,i),o=t.scope.internal.getFont(t.fontName,t.fontStyle).id;e.push("/Tx BMC"),e.push("q"),e.push("BT"),e.push(t.scope.__private__.encodeColorString(t.color)),e.push("/"+o+" "+z(r.fontSize)+" Tf"),e.push("1 0 0 1 0 0 Tm"),e.push(r.text),e.push("ET"),e.push("Q"),e.push("EMC");var n=W(t);return n.scope=t.scope,n.stream=e.join("\n"),n}},tr=function(t,e){var i=0===t.fontSize?t.maxFontSize:t.fontSize,r={text:"",fontSize:""},o=(e=")"==(e="("==e.substr(0,1)?e.substr(1):e).substr(e.length-1)?e.substr(0,e.length-1):e).split(" ");o=t.multiline?o.map(function(t){return t.split("\n")}):o.map(function(t){return[t]});var n=i,a=tN.internal.getHeight(t)||0;a=a<0?-a:a;var s=tN.internal.getWidth(t)||0;s=s<0?-s:s,n++;e:for(;n>0;){e="";var l,h,u=to("3",t,--n).height,c=t.multiline?a-n:(a-u)/2,f=c+=2,d=0,p=0,g=0;if(n<=0){e="(...) Tj\n",e+="% Width of Text: "+to(e,t,n=12).width+", FieldWidth:"+s+"\n";break}for(var m="",y=0,x=0;x<o.length;x++)if(o.hasOwnProperty(x)){var v=!1;if(1!==o[x].length&&g!==o[x].length-1){if((u+2)*(y+2)+2>a)continue e;m+=o[x][g],v=!0,p=x,x--}else{m=" "==(m+=o[x][g]+" ").substr(m.length-1)?m.substr(0,m.length-1):m;var b,w,_=parseInt(x),S=(b=m,w=n,_+1<o.length&&to(b+" "+o[_+1][0],t,w).width<=s-4),E=x>=o.length-1;if(S&&!E){m+=" ",g=0;continue}if(S||E){if(E)p=_;else if(t.multiline&&(u+2)*(y+2)+2>a)continue e}else{if(!t.multiline||(u+2)*(y+2)+2>a)continue e;p=_}}for(var A="",N=d;N<=p;N++){var I=o[N];if(t.multiline){if(N===p){A+=I[g]+" ",g=(g+1)%I.length;continue}if(N===d){A+=I[I.length-1]+" ";continue}}A+=I[0]+" "}switch(h=to(A=" "==A.substr(A.length-1)?A.substr(0,A.length-1):A,t,n).width,t.textAlign){case"right":l=s-h-2;break;case"center":l=(s-h)/2;break;default:l=2}e+=z(l)+" "+z(f)+" Td\n("+U(A)+") Tj\n"+-z(l)+" 0 Td\n",f=-(n+2),h=0,d=v?p:p+1,y++,m=""}break}return r.text=e,r.fontSize=n,r},to=function(t,e,i){var r=e.scope.internal.getFont(e.fontName,e.fontStyle),o=e.scope.getStringUnitWidth(t,{font:r,fontSize:parseFloat(i),charSpace:0})*parseFloat(i);return{height:e.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(i),charSpace:0})*parseFloat(i)*1.5,width:o}},tn={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},ta=function(t,e){var i={type:"reference",object:t};void 0===e.internal.getPageInfo(t.page).pageContext.annotations.find(function(t){return t.type===i.type&&t.object===i.object})&&e.internal.getPageInfo(t.page).pageContext.annotations.push(i)},ts=function(e,i){for(var r in e)if(e.hasOwnProperty(r)){var o=e[r];i.internal.newObjectDeferredBegin(o.objId,!0),"object"===t(a)(o)&&"function"==typeof o.putStream&&o.putStream(),delete e[r]}},tl=function(e,i){if(i.scope=e,void 0!==e.internal&&(void 0===e.internal.acroformPlugin||!1===e.internal.acroformPlugin.isInitialized)){if(tp.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(tn)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("Exception while creating AcroformDictionary");q=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new td,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){e.internal.events.unsubscribe(e.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete e.internal.acroformPlugin.acroFormDictionaryRoot._eventID,e.internal.acroformPlugin.printedOut=!0}),e.internal.events.subscribe("buildDocument",function(){!function(t){t.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var e=t.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];r.objId=void 0,r.hasAnnotation&&ta(r,t)}}(e)}),e.internal.events.subscribe("putCatalog",function(){!function(t){if(void 0===t.internal.acroformPlugin.acroFormDictionaryRoot)throw Error("putCatalogCallback: Root missing.");t.internal.write("/AcroForm "+t.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")}(e)}),e.internal.events.subscribe("postPutPages",function(i){!function(e,i){var r=!e;for(var o in e||(i.internal.newObjectDeferredBegin(i.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),i.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),e=e||i.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(e.hasOwnProperty(o)){var n=e[o],s=[],l=n.Rect;if(n.Rect&&(n.Rect=te(n.Rect,i)),i.internal.newObjectDeferredBegin(n.objId,!0),n.DA=tN.createDefaultAppearanceStream(n),"object"===t(a)(n)&&"function"==typeof n.getKeyValueListForStream&&(s=n.getKeyValueListForStream()),n.Rect=l,n.hasAppearanceStream&&!n.appearanceStreamContent){var h=ti(n);s.push({key:"AP",value:"<</N "+h+">>"}),i.internal.acroformPlugin.xForms.push(h)}if(n.appearanceStreamContent){var u="";for(var c in n.appearanceStreamContent)if(n.appearanceStreamContent.hasOwnProperty(c)){var f=n.appearanceStreamContent[c];if(u+="/"+c+" <<",Object.keys(f).length>=1||Array.isArray(f)){for(var o in f)if(f.hasOwnProperty(o)){var d=f[o];"function"==typeof d&&(d=d.call(i,n)),u+="/"+o+" "+d+" ",i.internal.acroformPlugin.xForms.indexOf(d)>=0||i.internal.acroformPlugin.xForms.push(d)}}else"function"==typeof(d=f)&&(d=d.call(i,n)),u+="/"+o+" "+d,i.internal.acroformPlugin.xForms.indexOf(d)>=0||i.internal.acroformPlugin.xForms.push(d);u+=">>"}s.push({key:"AP",value:"<<\n"+u+">>"})}i.internal.putStream({additionalKeyValues:s,objectId:n.objId}),i.internal.out("endobj")}r&&ts(i.internal.acroformPlugin.xForms,i)}(i,e)}),e.internal.acroformPlugin.isInitialized=!0}},th=j.__acroform__.arrayToPdfArray=function(e,i,r){var o=function(t){return t};if(Array.isArray(e)){for(var n="[",s=0;s<e.length;s++)switch(0!==s&&(n+=" "),t(a)(e[s])){case"boolean":case"number":case"object":n+=e[s].toString();break;case"string":"/"!==e[s].substr(0,1)?(void 0!==i&&r&&(o=r.internal.getEncryptor(i)),n+="("+U(o(e[s].toString()))+")"):n+=e[s].toString()}return n+"]"}throw Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},tu=function(t,e,i){var r=function(t){return t};return void 0!==e&&i&&(r=i.internal.getEncryptor(e)),(t=t||"").toString(),t="("+U(r(t))+")"},tc=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(void 0===this._objId){if(void 0===this.scope)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(t){this._objId=t}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};tc.prototype.toString=function(){return this.objId+" 0 R"},tc.prototype.putStream=function(){var t=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:t,objectId:this.objId}),this.scope.internal.out("endobj")},tc.prototype.getKeyValueListForStream=function(){var t=[],e=Object.getOwnPropertyNames(this).filter(function(t){return"content"!=t&&"appearanceStreamContent"!=t&&"scope"!=t&&"objId"!=t&&"_"!=t.substring(0,1)});for(var i in e)if(!1===Object.getOwnPropertyDescriptor(this,e[i]).configurable){var r=e[i],o=this[r];o&&(Array.isArray(o)?t.push({key:r,value:th(o,this.objId,this.scope)}):o instanceof tc?(o.scope=this.scope,t.push({key:r,value:o.objId+" 0 R"})):"function"!=typeof o&&t.push({key:r,value:o}))}return t};var tf=function(){tc.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var t,e=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(e){t=e.trim()},get:function(){return t||null}})};V(tf,tc);var td=function(){tc.call(this);var t,e=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return e.length>0?e:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return e}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(t){var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+U(e(t))+")"}},set:function(e){t=e}})};V(td,tc);var tp=function t(){tc.call(this);var e=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){if(isNaN(t))throw Error('Invalid value "'+t+'" for attribute F supplied.');e=t}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!$(e,3)},set:function(t){!0==!!t?this.F=Q(e,3):this.F=tt(e,3)}});var i=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return i},set:function(t){if(isNaN(t))throw Error('Invalid value "'+t+'" for attribute Ff supplied.');i=t}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(0!==r.length)return r},set:function(t){r=void 0!==t?t:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(t){r[0]=t}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(t){r[1]=t}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(t){r[2]=t}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(t){r[3]=t}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(t){switch(t){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=t;break;default:throw Error('Invalid value "'+t+'" for attribute FT supplied.')}}});var n=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!n||n.length<1){if(this instanceof t_)return;n="FieldObject"+t.FieldNum++}var e=function(t){return t};return this.scope&&(e=this.scope.internal.getEncryptor(this.objId)),"("+U(e(n))+")"},set:function(t){n=t.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return n},set:function(t){n=t}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(t){a=t}});var s="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return s},set:function(t){s=t}});var l=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return l},set:function(t){l=t}});var h=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return void 0===h?50/q:h},set:function(t){h=t}});var u="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return u},set:function(t){u=t}});var c="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!c||this instanceof t_||this instanceof tE))return tu(c,this.objId,this.scope)},set:function(t){c=t=t.toString()}});var f=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(f)return this instanceof tv==!1?tu(f,this.objId,this.scope):f},set:function(t){t=t.toString(),f=this instanceof tv==!1?"("===t.substr(0,1)?B(t.substr(1,t.length-2)):B(t):t}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof tv==!0?B(f.substr(1,f.length-1)):f},set:function(t){t=t.toString(),f=this instanceof tv==!0?"/"+t:t}});var d=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(d)return d},set:function(t){this.V=t}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(d)return this instanceof tv==!1?tu(d,this.objId,this.scope):d},set:function(t){t=t.toString(),d=this instanceof tv==!1?"("===t.substr(0,1)?B(t.substr(1,t.length-2)):B(t):t}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof tv==!0?B(d.substr(1,d.length-1)):d},set:function(t){t=t.toString(),d=this instanceof tv==!0?"/"+t:t}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var p,g=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return g},set:function(t){g=t=!!t}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(p)return p},set:function(t){p=t}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,1)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,1):this.Ff=tt(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,2)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,2):this.Ff=tt(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,3)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,3):this.Ff=tt(this.Ff,3)}});var m=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(null!==m)return m},set:function(t){if(-1===[0,1,2].indexOf(t))throw Error('Invalid value "'+t+'" for attribute Q supplied.');m=t}}),Object.defineProperty(this,"textAlign",{get:function(){var t;switch(m){case 0:default:t="left";break;case 1:t="center";break;case 2:t="right"}return t},configurable:!0,enumerable:!0,set:function(t){switch(t){case"right":case 2:m=2;break;case"center":case 1:m=1;break;default:m=0}}})};V(tp,tc);var tg=function(){tp.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var t=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){t=e}});var e=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return th(e,this.objId,this.scope)},set:function(t){var i;i=[],"string"==typeof t&&(i=function(t,e,i){i||(i=1);for(var r,o=[];r=e.exec(t);)o.push(r[i]);return o}(t,/\((.*?)\)/g)),e=i}}),this.getOptions=function(){return e},this.setOptions=function(t){e=t,this.sort&&e.sort()},this.addOption=function(t){t=(t=t||"").toString(),e.push(t),this.sort&&e.sort()},this.removeOption=function(t,i){for(i=i||!1,t=(t=t||"").toString();-1!==e.indexOf(t)&&(e.splice(e.indexOf(t),1),!1!==i););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,18)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,18):this.Ff=tt(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,19)},set:function(t){!0===this.combo&&(!0==!!t?this.Ff=Q(this.Ff,19):this.Ff=tt(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,20)},set:function(t){!0==!!t?(this.Ff=Q(this.Ff,20),e.sort()):this.Ff=tt(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,22)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,22):this.Ff=tt(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,23)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,23):this.Ff=tt(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,27)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,27):this.Ff=tt(this.Ff,27)}}),this.hasAppearanceStream=!1};V(tg,tp);var tm=function(){tg.call(this),this.fontName="helvetica",this.combo=!1};V(tm,tg);var ty=function(){tm.call(this),this.combo=!0};V(ty,tm);var tx=function(){ty.call(this),this.edit=!0};V(tx,ty);var tv=function(){tp.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,15)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,15):this.Ff=tt(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,16)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,16):this.Ff=tt(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,17)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,17):this.Ff=tt(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,26)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,26):this.Ff=tt(this.Ff,26)}});var e,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};if(this.scope&&(t=this.scope.internal.getEncryptor(this.objId)),0!==Object.keys(i).length){var e,r=[];for(e in r.push("<<"),i)r.push("/"+e+" ("+U(t(i[e]))+")");return r.push(">>"),r.join("\n")}},set:function(e){"object"===t(a)(e)&&(i=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(t){"string"==typeof t&&(i.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(t){e="/"+t}})};V(tv,tp);var tb=function(){tv.call(this),this.pushButton=!0};V(tb,tv);var tw=function(){tv.call(this),this.radio=!0,this.pushButton=!1;var t=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=void 0!==e?e:[]}})};V(tw,tv);var t_=function(){tp.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return i},set:function(t){i=t}});var e,i,r,o={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var t=function(t){return t};this.scope&&(t=this.scope.internal.getEncryptor(this.objId));var e,i=[];for(e in i.push("<<"),o)i.push("/"+e+" ("+U(t(o[e]))+")");return i.push(">>"),i.join("\n")},set:function(e){"object"===t(a)(e)&&(o=e)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return o.CA||""},set:function(t){"string"==typeof t&&(o.CA=t)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(t){r=t}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(t){r="/"+t}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=tN.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};V(t_,tp),tw.prototype.setAppearance=function(t){if(!("createAppearanceStream"in t)||!("getCA"in t))throw Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var e in this.Kids)if(this.Kids.hasOwnProperty(e)){var i=this.Kids[e];i.appearanceStreamContent=t.createAppearanceStream(i.optionName),i.caption=t.getCA()}},tw.prototype.createOption=function(t){var e=new t_;return e.Parent=this,e.optionName=t,this.Kids.push(e),tI.call(this.scope,e),e};var tS=function(){tv.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=tN.CheckBox.createAppearanceStream()};V(tS,tv);var tE=function(){tp.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,13)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,13):this.Ff=tt(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,21)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,21):this.Ff=tt(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,23)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,23):this.Ff=tt(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,24)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,24):this.Ff=tt(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,25)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,25):this.Ff=tt(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,26)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,26):this.Ff=tt(this.Ff,26)}});var t=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return t},set:function(e){t=e}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return t},set:function(e){Number.isInteger(e)&&(t=e)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};V(tE,tp);var tA=function(){tE.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!$(this.Ff,14)},set:function(t){!0==!!t?this.Ff=Q(this.Ff,14):this.Ff=tt(this.Ff,14)}}),this.password=!0};V(tA,tE);var tN={CheckBox:{createAppearanceStream:function(){return{N:{On:tN.CheckBox.YesNormal},D:{On:tN.CheckBox.YesPushDown,Off:tN.CheckBox.OffPushDown}}},YesPushDown:function(t){var e=W(t);e.scope=t.scope;var i=[],r=t.scope.internal.getFont(t.fontName,t.fontStyle).id,o=t.scope.__private__.encodeColorString(t.color),n=tr(t,t.caption);return i.push("0.749023 g"),i.push("0 0 "+z(tN.internal.getWidth(t))+" "+z(tN.internal.getHeight(t))+" re"),i.push("f"),i.push("BMC"),i.push("q"),i.push("0 0 1 rg"),i.push("/"+r+" "+z(n.fontSize)+" Tf "+o),i.push("BT"),i.push(n.text),i.push("ET"),i.push("Q"),i.push("EMC"),e.stream=i.join("\n"),e},YesNormal:function(t){var e=W(t);e.scope=t.scope;var i=t.scope.internal.getFont(t.fontName,t.fontStyle).id,r=t.scope.__private__.encodeColorString(t.color),o=[],n=tN.internal.getHeight(t),a=tN.internal.getWidth(t),s=tr(t,t.caption);return o.push("1 g"),o.push("0 0 "+z(a)+" "+z(n)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+z(a-1)+" "+z(n-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+i+" "+z(s.fontSize)+" Tf "+r),o.push(s.text),o.push("ET"),o.push("Q"),e.stream=o.join("\n"),e},OffPushDown:function(t){var e=W(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+z(tN.internal.getWidth(t))+" "+z(tN.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join("\n"),e}},RadioButton:{Circle:{createAppearanceStream:function(t){var e={D:{Off:tN.RadioButton.Circle.OffPushDown},N:{}};return e.N[t]=tN.RadioButton.Circle.YesNormal,e.D[t]=tN.RadioButton.Circle.YesPushDown,e},getCA:function(){return"l"},YesNormal:function(t){var e=W(t);e.scope=t.scope;var i=[],r=tN.internal.getWidth(t)<=tN.internal.getHeight(t)?tN.internal.getWidth(t)/4:tN.internal.getHeight(t)/4,o=Number(((r=Number((.9*r).toFixed(5)))*tN.internal.Bezier_C).toFixed(5));return i.push("q"),i.push("1 0 0 1 "+H(tN.internal.getWidth(t)/2)+" "+H(tN.internal.getHeight(t)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+o+" "+o+" "+r+" 0 "+r+" c"),i.push("-"+o+" "+r+" -"+r+" "+o+" -"+r+" 0 c"),i.push("-"+r+" -"+o+" -"+o+" -"+r+" 0 -"+r+" c"),i.push(o+" -"+r+" "+r+" -"+o+" "+r+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e},YesPushDown:function(t){var e=W(t);e.scope=t.scope;var i=[],r=tN.internal.getWidth(t)<=tN.internal.getHeight(t)?tN.internal.getWidth(t)/4:tN.internal.getHeight(t)/4,o=Number((2*(r=Number((.9*r).toFixed(5)))).toFixed(5)),n=Number((o*tN.internal.Bezier_C).toFixed(5)),a=Number((r*tN.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+H(tN.internal.getWidth(t)/2)+" "+H(tN.internal.getHeight(t)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+n+" "+n+" "+o+" 0 "+o+" c"),i.push("-"+n+" "+o+" -"+o+" "+n+" -"+o+" 0 c"),i.push("-"+o+" -"+n+" -"+n+" -"+o+" 0 -"+o+" c"),i.push(n+" -"+o+" "+o+" -"+n+" "+o+" 0 c"),i.push("f"),i.push("Q"),i.push("0 g"),i.push("q"),i.push("1 0 0 1 "+H(tN.internal.getWidth(t)/2)+" "+H(tN.internal.getHeight(t)/2)+" cm"),i.push(r+" 0 m"),i.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),i.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),i.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),i.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e},OffPushDown:function(t){var e=W(t);e.scope=t.scope;var i=[],r=tN.internal.getWidth(t)<=tN.internal.getHeight(t)?tN.internal.getWidth(t)/4:tN.internal.getHeight(t)/4,o=Number((2*(r=Number((.9*r).toFixed(5)))).toFixed(5)),n=Number((o*tN.internal.Bezier_C).toFixed(5));return i.push("0.749023 g"),i.push("q"),i.push("1 0 0 1 "+H(tN.internal.getWidth(t)/2)+" "+H(tN.internal.getHeight(t)/2)+" cm"),i.push(o+" 0 m"),i.push(o+" "+n+" "+n+" "+o+" 0 "+o+" c"),i.push("-"+n+" "+o+" -"+o+" "+n+" -"+o+" 0 c"),i.push("-"+o+" -"+n+" -"+n+" -"+o+" 0 -"+o+" c"),i.push(n+" -"+o+" "+o+" -"+n+" "+o+" 0 c"),i.push("f"),i.push("Q"),e.stream=i.join("\n"),e}},Cross:{createAppearanceStream:function(t){var e={D:{Off:tN.RadioButton.Cross.OffPushDown},N:{}};return e.N[t]=tN.RadioButton.Cross.YesNormal,e.D[t]=tN.RadioButton.Cross.YesPushDown,e},getCA:function(){return"8"},YesNormal:function(t){var e=W(t);e.scope=t.scope;var i=[],r=tN.internal.calculateCross(t);return i.push("q"),i.push("1 1 "+z(tN.internal.getWidth(t)-2)+" "+z(tN.internal.getHeight(t)-2)+" re"),i.push("W"),i.push("n"),i.push(z(r.x1.x)+" "+z(r.x1.y)+" m"),i.push(z(r.x2.x)+" "+z(r.x2.y)+" l"),i.push(z(r.x4.x)+" "+z(r.x4.y)+" m"),i.push(z(r.x3.x)+" "+z(r.x3.y)+" l"),i.push("s"),i.push("Q"),e.stream=i.join("\n"),e},YesPushDown:function(t){var e=W(t);e.scope=t.scope;var i=tN.internal.calculateCross(t),r=[];return r.push("0.749023 g"),r.push("0 0 "+z(tN.internal.getWidth(t))+" "+z(tN.internal.getHeight(t))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+z(tN.internal.getWidth(t)-2)+" "+z(tN.internal.getHeight(t)-2)+" re"),r.push("W"),r.push("n"),r.push(z(i.x1.x)+" "+z(i.x1.y)+" m"),r.push(z(i.x2.x)+" "+z(i.x2.y)+" l"),r.push(z(i.x4.x)+" "+z(i.x4.y)+" m"),r.push(z(i.x3.x)+" "+z(i.x3.y)+" l"),r.push("s"),r.push("Q"),e.stream=r.join("\n"),e},OffPushDown:function(t){var e=W(t);e.scope=t.scope;var i=[];return i.push("0.749023 g"),i.push("0 0 "+z(tN.internal.getWidth(t))+" "+z(tN.internal.getHeight(t))+" re"),i.push("f"),e.stream=i.join("\n"),e}}},createDefaultAppearanceStream:function(t){var e=t.scope.internal.getFont(t.fontName,t.fontStyle).id,i=t.scope.__private__.encodeColorString(t.color);return"/"+e+" "+t.fontSize+" Tf "+i}};tN.internal={Bezier_C:.551915024494,calculateCross:function(t){var e=tN.internal.getWidth(t),i=tN.internal.getHeight(t),r=Math.min(e,i);return{x1:{x:(e-r)/2,y:(i-r)/2+r},x2:{x:(e-r)/2+r,y:(i-r)/2},x3:{x:(e-r)/2,y:(i-r)/2},x4:{x:(e-r)/2+r,y:(i-r)/2+r}}}},tN.internal.getWidth=function(e){var i=0;return"object"===t(a)(e)&&(i=Y(e.Rect[2])),i},tN.internal.getHeight=function(e){var i=0;return"object"===t(a)(e)&&(i=Y(e.Rect[3])),i};var tI=j.addField=function(t){if(tl(this,t),!(t instanceof tp))throw Error("Invalid argument passed to jsPDF.addField.");return t.scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),t.page=t.scope.internal.getCurrentPageInfo().pageNumber,this};function tM(t){return t.reduce(function(t,e,i){return t[e]=i,t},{})}j.AcroFormChoiceField=tg,j.AcroFormListBox=tm,j.AcroFormComboBox=ty,j.AcroFormEditBox=tx,j.AcroFormButton=tv,j.AcroFormPushButton=tb,j.AcroFormRadioButton=tw,j.AcroFormCheckBox=tS,j.AcroFormTextField=tE,j.AcroFormPasswordField=tA,j.AcroFormAppearance=tN,j.AcroForm={ChoiceField:tg,ListBox:tm,ComboBox:ty,EditBox:tx,Button:tv,PushButton:tb,RadioButton:tw,CheckBox:tS,TextField:tE,PasswordField:tA,Appearance:tN},D.AcroForm={ChoiceField:tg,ListBox:tm,ComboBox:ty,EditBox:tx,Button:tv,PushButton:tb,RadioButton:tw,CheckBox:tS,TextField:tE,PasswordField:tA,Appearance:tN},D.AcroForm,(tj=D.API).__addimage__={},tq="UNKNOWN",tU={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},tB=tj.__addimage__.getImageFileTypeByImageData=function(t,e){var i,r,o,n,a,s=tq;if("RGBA"===(e=e||tq)||void 0!==t.data&&t.data instanceof Uint8ClampedArray&&"height"in t&&"width"in t)return"RGBA";if(t7(t))for(a in tU)for(o=tU[a],i=0;i<o.length;i+=1){for(n=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==t[r]){n=!1;break}if(!0===n){s=a;break}}else for(a in tU)for(o=tU[a],i=0;i<o.length;i+=1){for(n=!0,r=0;r<o[i].length;r+=1)if(void 0!==o[i][r]&&o[i][r]!==t.charCodeAt(r)){n=!1;break}if(!0===n){s=a;break}}return s===tq&&e!==tq&&(s=e),s},tz=function t(e){for(var i=this.internal.write,r=this.internal.putStream,o=(0,this.internal.getFilters)();-1!==o.indexOf("FlateEncode");)o.splice(o.indexOf("FlateEncode"),1);e.objectId=this.internal.newObject();var n=[];if(n.push({key:"Type",value:"/XObject"}),n.push({key:"Subtype",value:"/Image"}),n.push({key:"Width",value:e.width}),n.push({key:"Height",value:e.height}),e.colorSpace===t2.INDEXED?n.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(e.palette.length/3-1)+" "+("sMask"in e&&void 0!==e.sMask?e.objectId+2:e.objectId+1)+" 0 R]"}):(n.push({key:"ColorSpace",value:"/"+e.colorSpace}),e.colorSpace===t2.DEVICE_CMYK&&n.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),n.push({key:"BitsPerComponent",value:e.bitsPerComponent}),"decodeParameters"in e&&void 0!==e.decodeParameters&&n.push({key:"DecodeParms",value:"<<"+e.decodeParameters+">>"}),"transparency"in e&&Array.isArray(e.transparency)){for(var a="",s=0,l=e.transparency.length;s<l;s++)a+=e.transparency[s]+" "+e.transparency[s]+" ";n.push({key:"Mask",value:"["+a+"]"})}void 0!==e.sMask&&n.push({key:"SMask",value:e.objectId+1+" 0 R"});var h=void 0!==e.filter?["/"+e.filter]:void 0;if(r({data:e.data,additionalKeyValues:n,alreadyAppliedFilters:h,objectId:e.objectId}),i("endobj"),"sMask"in e&&void 0!==e.sMask){var u="/Predictor "+e.predictor+" /Colors 1 /BitsPerComponent "+e.bitsPerComponent+" /Columns "+e.width,c={width:e.width,height:e.height,colorSpace:"DeviceGray",bitsPerComponent:e.bitsPerComponent,decodeParameters:u,data:e.sMask};"filter"in e&&(c.filter=e.filter),t.call(this,c)}if(e.colorSpace===t2.INDEXED){var f=this.internal.newObject();r({data:et(new Uint8Array(e.palette)),objectId:f}),i("endobj")}},tH=function(){var t=this.internal.collections.addImage_images;for(var e in t)tz.call(this,t[e])},tV=function(){var t,e=this.internal.collections.addImage_images,i=this.internal.write;for(var r in e)i("/I"+(t=e[r]).index,t.objectId,"0","R")},tY=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",tH),this.internal.events.subscribe("putXobjectDict",tV))},tW=function(){var t=this.internal.collections.addImage_images;return tY.call(this),t},tX=function(){return Object.keys(this.internal.collections.addImage_images).length},tK=function(t){return"function"==typeof tj["process"+t.toUpperCase()]},tJ=function(e){return"object"===t(a)(e)&&1===e.nodeType},t$=function(t,e){if("IMG"===t.nodeName&&t.hasAttribute("src")){var i,r=""+t.getAttribute("src");if(0===r.indexOf("data:image/"))return p(unescape(r).split("base64,").pop());var o=tj.loadFile(r,!0);if(void 0!==o)return o}if("CANVAS"===t.nodeName){if(0===t.width||0===t.height)throw Error("Given canvas must have data. Canvas width: "+t.width+", height: "+t.height);switch(e){case"PNG":i="image/png";break;case"WEBP":i="image/webp";break;default:i="image/jpeg"}return p(t.toDataURL(i,1).split("base64,").pop())}},tQ=function(t){var e=this.internal.collections.addImage_images;if(e){for(var i in e)if(t===e[i].alias)return e[i]}},t0=function(t,e,i){return t||e||(t=-96,e=-96),t<0&&(t=-1*i.width*72/t/this.internal.scaleFactor),e<0&&(e=-1*i.height*72/e/this.internal.scaleFactor),0===t&&(t=e*i.width/i.height),0===e&&(e=t*i.height/i.width),[t,e]},t1=function(t,e,i,r,o,n){var a=t0.call(this,i,r,o),s=this.internal.getCoordinateString,l=this.internal.getVerticalCoordinateString,h=tW.call(this);if(i=a[0],r=a[1],h[o.index]=o,n)var u=Math.cos(n*=Math.PI/180),c=Math.sin(n),f=function(t){return t.toFixed(4)},d=[f(u),f(c),f(-1*c),f(u),0,0,"cm"];this.internal.write("q"),n?(this.internal.write([1,"0","0",1,s(t),l(e+r),"cm"].join(" ")),this.internal.write(d.join(" ")),this.internal.write([s(i),"0","0",s(r),"0","0","cm"].join(" "))):this.internal.write([s(i),"0","0",s(r),s(t),l(e+r),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write("1 0 0 -1 0 0 cm"),this.internal.write("/I"+o.index+" Do"),this.internal.write("Q")},t2=tj.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"},tj.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"},t5=tj.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},t4=tj.__addimage__.sHashCode=function(t){var e,i,r=0;if("string"==typeof t)for(i=t.length,e=0;e<i;e++)r=(r<<5)-r+t.charCodeAt(e)|0;else if(t7(t))for(i=t.byteLength/2,e=0;e<i;e++)r=(r<<5)-r+t[e]|0;return r},t6=tj.__addimage__.validateStringAsBase64=function(t){(t=t||"").toString().trim();var e=!0;return 0===t.length&&(e=!1),t.length%4!=0&&(e=!1),!1===/^[A-Za-z0-9+/]+$/.test(t.substr(0,t.length-2))&&(e=!1),!1===/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(t.substr(-2))&&(e=!1),e},t3=tj.__addimage__.extractImageFromDataUrl=function(t){var e=(t=t||"").split("base64,"),i=null;if(2===e.length){var r=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(e[0]);Array.isArray(r)&&(i={mimeType:r[1],charset:r[2],data:e[1]})}return i},t8=tj.__addimage__.supportsArrayBuffer=function(){return"undefined"!=typeof ArrayBuffer&&"undefined"!=typeof Uint8Array},tj.__addimage__.isArrayBuffer=function(t){return t8()&&t instanceof ArrayBuffer},t7=tj.__addimage__.isArrayBufferView=function(t){return t8()&&"undefined"!=typeof Uint32Array&&(t instanceof Int8Array||t instanceof Uint8Array||"undefined"!=typeof Uint8ClampedArray&&t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array)},t9=tj.__addimage__.binaryStringToUint8Array=function(t){for(var e=t.length,i=new Uint8Array(e),r=0;r<e;r++)i[r]=t.charCodeAt(r);return i},et=tj.__addimage__.arrayBufferToBinaryString=function(t){for(var e="",i=t7(t)?t:new Uint8Array(t),r=0;r<i.length;r+=8192)e+=String.fromCharCode.apply(null,i.subarray(r,r+8192));return e},tj.addImage=function(){if("number"==typeof arguments[1]?(i=tq,r=arguments[1],o=arguments[2],n=arguments[3],s=arguments[4],l=arguments[5],h=arguments[6],u=arguments[7]):(i=arguments[1],r=arguments[2],o=arguments[3],n=arguments[4],s=arguments[5],l=arguments[6],h=arguments[7],u=arguments[8]),"object"===t(a)(e=arguments[0])&&!tJ(e)&&"imageData"in e){var e,i,r,o,n,s,l,h,u,c=e;e=c.imageData,i=c.format||i||tq,r=c.x||r||0,o=c.y||o||0,n=c.w||c.width||n,s=c.h||c.height||s,l=c.alias||l,h=c.compression||h,u=c.rotation||c.angle||u}var f=this.internal.getFilters();if(void 0===h&&-1!==f.indexOf("FlateEncode")&&(h="SLOW"),isNaN(r)||isNaN(o))throw Error("Invalid coordinates passed to jsPDF.addImage");tY.call(this);var d=ee.call(this,e,i,l,h);return t1.call(this,r,o,n,s,d,u),this},ee=function(t,e,i,r){if("string"==typeof t&&tB(t)===tq){var o,n,a,s,l,h=ei(t=unescape(t),!1);(""!==h||void 0!==(h=tj.loadFile(t,!0)))&&(t=h)}if(tJ(t)&&(t=t$(t,e)),!tK(e=tB(t,e)))throw Error("addImage does not support files of type '"+e+"', please ensure that a plugin for '"+e+"' support is added.");if((null==(a=i)||0===a.length)&&(i="string"==typeof(s=t)||t7(s)?t4(s):t7(s.data)?t4(s.data):null),(o=tQ.call(this,i))||(t8()&&(t instanceof Uint8Array||"RGBA"===e||(n=t,t=t9(t))),o=this["process"+e.toUpperCase()](t,tX.call(this),i,((l=r)&&"string"==typeof l&&(l=l.toUpperCase()),l in tj.image_compression?l:t5.NONE),n)),!o)throw Error("An unknown error occurred whilst processing the image.");return o},ei=tj.__addimage__.convertBase64ToBinaryString=function(t,e){e="boolean"!=typeof e||e;var i,r,o="";if("string"==typeof t){r=null!==(i=t3(t))?i.data:t;try{o=p(r)}catch(t){if(e)throw t6(r)?Error("atob-Error in jsPDF.convertBase64ToBinaryString "+t.message):Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return o},tj.getImageProperties=function(t){var e,i,r="";if(tJ(t)&&(t=t$(t)),"string"==typeof t&&tB(t)===tq&&(""===(r=ei(t,!1))&&(r=tj.loadFile(t)||""),t=r),!tK(i=tB(t)))throw Error("addImage does not support files of type '"+i+"', please ensure that a plugin for '"+i+"' support is added.");if(!t8()||t instanceof Uint8Array||(t=t9(t)),!(e=this["process"+i.toUpperCase()](t)))throw Error("An unknown error occurred whilst processing the image");return e.fileType=i,e},er=D.API,eo=function(t){if(void 0!==t&&""!=t)return!0},D.API.events.push(["addPage",function(t){this.internal.getPageInfo(t.pageNumber).pageContext.annotations=[]}]),er.events.push(["putPage",function(t){for(var e,i,r,o=this.internal.getCoordinateString,n=this.internal.getVerticalCoordinateString,a=this.internal.getPageInfoByObjId(t.objId),s=t.pageContext.annotations,l=!1,h=0;h<s.length&&!l;h++)switch((e=s[h]).type){case"link":(eo(e.options.url)||eo(e.options.pageNumber))&&(l=!0);break;case"reference":case"text":case"freetext":l=!0}if(0!=l){this.internal.write("/Annots [");for(var u=0;u<s.length;u++){e=s[u];var c=this.internal.pdfEscape,f=this.internal.getEncryptor(t.objId);switch(e.type){case"reference":this.internal.write(" "+e.object.objId+" 0 R ");break;case"text":var d=this.internal.newAdditionalObject(),p=this.internal.newAdditionalObject(),g=this.internal.getEncryptor(d.objId),m=e.title||"Note";r="<</Type /Annot /Subtype /Text "+(i="/Rect ["+o(e.bounds.x)+" "+n(e.bounds.y+e.bounds.h)+" "+o(e.bounds.x+e.bounds.w)+" "+n(e.bounds.y)+"] ")+"/Contents ("+c(g(e.contents))+") /Popup "+p.objId+" 0 R /P "+a.objId+" 0 R /T ("+c(g(m))+") >>",d.content=r;var y=d.objId+" 0 R";r="<</Type /Annot /Subtype /Popup "+(i="/Rect ["+o(e.bounds.x+30)+" "+n(e.bounds.y+e.bounds.h)+" "+o(e.bounds.x+e.bounds.w+30)+" "+n(e.bounds.y)+"] ")+" /Parent "+y,e.open&&(r+=" /Open true"),r+=" >>",p.content=r,this.internal.write(d.objId,"0 R",p.objId,"0 R");break;case"freetext":i="/Rect ["+o(e.bounds.x)+" "+n(e.bounds.y)+" "+o(e.bounds.x+e.bounds.w)+" "+n(e.bounds.y+e.bounds.h)+"] ";var x=e.color||"#000000";r="<</Type /Annot /Subtype /FreeText "+i+"/Contents ("+c(f(e.contents))+") /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+x+") /Border [0 0 0] >>",this.internal.write(r);break;case"link":if(e.options.name){var v=this.annotations._nameMap[e.options.name];e.options.pageNumber=v.page,e.options.top=v.y}else e.options.top||(e.options.top=0);if(i="/Rect ["+e.finalBounds.x+" "+e.finalBounds.y+" "+e.finalBounds.w+" "+e.finalBounds.h+"] ",r="",e.options.url)r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /A <</S /URI /URI ("+c(f(e.options.url))+") >>";else if(e.options.pageNumber)switch(r="<</Type /Annot /Subtype /Link "+i+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(e.options.pageNumber).objId+" 0 R",e.options.magFactor=e.options.magFactor||"XYZ",e.options.magFactor){case"Fit":r+=" /Fit]";break;case"FitH":r+=" /FitH "+e.options.top+"]";break;case"FitV":e.options.left=e.options.left||0,r+=" /FitV "+e.options.left+"]";break;default:var b=n(e.options.top);e.options.left=e.options.left||0,void 0===e.options.zoom&&(e.options.zoom=0),r+=" /XYZ "+e.options.left+" "+b+" "+e.options.zoom+"]"}""!=r&&(r+=" >>",this.internal.write(r))}}this.internal.write("]")}}]),er.createAnnotation=function(t){var e=this.internal.getCurrentPageInfo();switch(t.type){case"link":this.link(t.bounds.x,t.bounds.y,t.bounds.w,t.bounds.h,t);break;case"text":case"freetext":e.pageContext.annotations.push(t)}},er.link=function(t,e,i,r,o){var n=this.internal.getCurrentPageInfo(),a=this.internal.getCoordinateString,s=this.internal.getVerticalCoordinateString;n.pageContext.annotations.push({finalBounds:{x:a(t),y:s(e),w:a(t+i),h:s(e+r)},options:o,type:"link"})},er.textWithLink=function(t,e,i,r){var o,n,a=this.getTextWidth(t),s=this.internal.getLineHeight()/this.internal.scaleFactor;return void 0!==r.maxWidth?(n=r.maxWidth,o=Math.ceil(s*this.splitTextToSize(t,n).length)):(n=a,o=s),this.text(t,e,i,r),i+=.2*s,"center"===r.align&&(e-=a/2),"right"===r.align&&(e-=a),this.link(e,i-s,n,o,r),a},er.getTextWidth=function(t){var e=this.internal.getFontSize();return this.getStringUnitWidth(t)*e/this.internal.scaleFactor},/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function(t){var e={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},i={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];t.__arabicParser__={};var n=t.__arabicParser__.isInArabicSubstitutionA=function(t){return void 0!==e[t.charCodeAt(0)]},a=t.__arabicParser__.isArabicLetter=function(t){return"string"==typeof t&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(t)},s=t.__arabicParser__.isArabicEndLetter=function(t){return a(t)&&n(t)&&e[t.charCodeAt(0)].length<=2},l=t.__arabicParser__.isArabicAlfLetter=function(t){return a(t)&&o.indexOf(t.charCodeAt(0))>=0};t.__arabicParser__.arabicLetterHasIsolatedForm=function(t){return a(t)&&n(t)&&e[t.charCodeAt(0)].length>=1};var h=t.__arabicParser__.arabicLetterHasFinalForm=function(t){return a(t)&&n(t)&&e[t.charCodeAt(0)].length>=2};t.__arabicParser__.arabicLetterHasInitialForm=function(t){return a(t)&&n(t)&&e[t.charCodeAt(0)].length>=3};var u=t.__arabicParser__.arabicLetterHasMedialForm=function(t){return a(t)&&n(t)&&4==e[t.charCodeAt(0)].length},c=t.__arabicParser__.resolveLigatures=function(t){var e=0,r=i,o="",n=0;for(e=0;e<t.length;e+=1)void 0!==r[t.charCodeAt(e)]?(n++,"number"==typeof(r=r[t.charCodeAt(e)])&&(o+=String.fromCharCode(r),r=i,n=0),e===t.length-1&&(r=i,o+=t.charAt(e-(n-1)),e-=n-1,n=0)):(r=i,o+=t.charAt(e-n),e-=n,n=0);return o};t.__arabicParser__.isArabicDiacritic=function(t){return void 0!==t&&void 0!==r[t.charCodeAt(0)]};var f=t.__arabicParser__.getCorrectForm=function(t,e,i){return a(t)?!1===n(t)?-1:!h(t)||!a(e)&&!a(i)||!a(i)&&s(e)||s(t)&&!a(e)||s(t)&&l(e)||s(t)&&s(e)?0:u(t)&&a(e)&&!s(e)&&a(i)&&h(i)?3:s(t)||!a(i)?1:2:-1},d=function(t){var i=0,r=0,o=0,n="",s="",l="",h=(t=t||"").split("\\s+"),u=[];for(i=0;i<h.length;i+=1){for(u.push(""),r=0;r<h[i].length;r+=1)n=h[i][r],s=h[i][r-1],l=h[i][r+1],a(n)?(o=f(n,s,l),u[i]+=-1!==o?String.fromCharCode(e[n.charCodeAt(0)][o]):n):u[i]+=n;u[i]=c(u[i])}return u.join(" ")},p=t.__arabicParser__.processArabic=t.processArabic=function(){var t,e="string"==typeof arguments[0]?arguments[0]:arguments[0].text,i=[];if(Array.isArray(e)){var r=0;for(i=[],r=0;r<e.length;r+=1)Array.isArray(e[r])?i.push([d(e[r][0]),e[r][1],e[r][2]]):i.push([d(e[r])]);t=i}else t=d(e);return"string"==typeof arguments[0]?t:(arguments[0].text=t,arguments[0])};t.events.push(["preProcessText",p])}(D.API),D.API.autoPrint=function(t){var e;return((t=t||{}).variant=t.variant||"non-conform","javascript"===t.variant)?this.addJS("print({});"):(this.internal.events.subscribe("postPutResources",function(){e=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+e+" 0 R")})),this},en=D.API,(ea=function(){var t=void 0;Object.defineProperty(this,"pdf",{get:function(){return t},set:function(e){t=e}});var e=150;Object.defineProperty(this,"width",{get:function(){return e},set:function(t){e=isNaN(t)||!1===Number.isInteger(t)||t<0?150:t,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=e+1)}});var i=300;Object.defineProperty(this,"height",{get:function(){return i},set:function(t){i=isNaN(t)||!1===Number.isInteger(t)||t<0?300:t,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=i+1)}});var r=[];Object.defineProperty(this,"childNodes",{get:function(){return r},set:function(t){r=t}});var o={};Object.defineProperty(this,"style",{get:function(){return o},set:function(t){o=t}}),Object.defineProperty(this,"parentNode",{})}).prototype.getContext=function(t,e){var i;if("2d"!==(t=t||"2d"))return null;for(i in e)this.pdf.context2d.hasOwnProperty(i)&&(this.pdf.context2d[i]=e[i]);return this.pdf.context2d._canvas=this,this.pdf.context2d},ea.prototype.toDataURL=function(){throw Error("toDataURL is not implemented.")},en.events.push(["initialized",function(){this.canvas=new ea,this.canvas.pdf=this}]),es=D.API,el={left:0,top:0,bottom:0,right:0},eh=!1,eu=function(){void 0===this.internal.__cell__&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},el),this.internal.__cell__.margins.width=this.getPageWidth(),ec.call(this))},ec=function(){this.internal.__cell__.lastCell=new ef,this.internal.__cell__.pages=1},(ef=function(){var t=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return t},set:function(e){t=e}});var e=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return e},set:function(t){e=t}});var i=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return i},set:function(t){i=t}});var r=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return r},set:function(t){r=t}});var o=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return o},set:function(t){o=t}});var n=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return n},set:function(t){n=t}});var a=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return a},set:function(t){a=t}}),this}).prototype.clone=function(){return new ef(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},ef.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},es.setHeaderFunction=function(t){return eu.call(this),this.internal.__cell__.headerFunction="function"==typeof t?t:void 0,this},es.getTextDimensions=function(t,e){eu.call(this);var i=(e=e||{}).fontSize||this.getFontSize(),r=e.font||this.getFont(),o=e.scaleFactor||this.internal.scaleFactor,n=0,a=0,s=0,l=this;if(!Array.isArray(t)&&"string"!=typeof t){if("number"!=typeof t)throw Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");t=String(t)}var h=e.maxWidth;h>0?"string"==typeof t?t=this.splitTextToSize(t,h):"[object Array]"===Object.prototype.toString.call(t)&&(t=t.reduce(function(t,e){return t.concat(l.splitTextToSize(e,h))},[])):t=Array.isArray(t)?t:[t];for(var u=0;u<t.length;u++)n<(s=this.getStringUnitWidth(t[u],{font:r})*i)&&(n=s);return 0!==n&&(a=t.length),{w:n/=o,h:Math.max((a*i*this.getLineHeightFactor()-i*(this.getLineHeightFactor()-1))/o,0)}},es.cellAddPage=function(){eu.call(this),this.addPage();var t=this.internal.__cell__.margins||el;return this.internal.__cell__.lastCell=new ef(t.left,t.top,void 0,void 0),this.internal.__cell__.pages+=1,this},ed=es.cell=function(){t=arguments[0]instanceof ef?arguments[0]:new ef(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),eu.call(this);var t,e=this.internal.__cell__.lastCell,i=this.internal.__cell__.padding,r=this.internal.__cell__.margins||el,o=this.internal.__cell__.tableHeaderRow,n=this.internal.__cell__.printHeaders;return void 0!==e.lineNumber&&(e.lineNumber===t.lineNumber?(t.x=(e.x||0)+(e.width||0),t.y=e.y||0):e.y+e.height+t.height+r.bottom>this.getPageHeight()?(this.cellAddPage(),t.y=r.top,n&&o&&(this.printHeaderRow(t.lineNumber,!0),t.y+=o[0].height)):t.y=e.y+e.height||t.y),void 0!==t.text[0]&&(this.rect(t.x,t.y,t.width,t.height,!0===eh?"FD":void 0),"right"===t.align?this.text(t.text,t.x+t.width-i,t.y+i,{align:"right",baseline:"top"}):"center"===t.align?this.text(t.text,t.x+t.width/2,t.y+i,{align:"center",baseline:"top",maxWidth:t.width-i-i}):this.text(t.text,t.x+i,t.y+i,{align:"left",baseline:"top",maxWidth:t.width-i-i})),this.internal.__cell__.lastCell=t,this},es.table=function(e,i,r,o,n){if(eu.call(this),!r)throw Error("No data for PDF table.");var s,l,h,u,c=[],f=[],d=[],p={},g={},m=[],y=[],x=(n=n||{}).autoSize||!1,v=!1!==n.printHeaders,b=n.css&&void 0!==n.css["font-size"]?16*n.css["font-size"]:n.fontSize||12,w=n.margins||Object.assign({width:this.getPageWidth()},el),_="number"==typeof n.padding?n.padding:3,S=n.headerBackgroundColor||"#c8c8c8",E=n.headerTextColor||"#000";if(ec.call(this),this.internal.__cell__.printHeaders=v,this.internal.__cell__.margins=w,this.internal.__cell__.table_font_size=b,this.internal.__cell__.padding=_,this.internal.__cell__.headerBackgroundColor=S,this.internal.__cell__.headerTextColor=E,this.setFontSize(b),null==o)f=c=Object.keys(r[0]),d=c.map(function(){return"left"});else if(Array.isArray(o)&&"object"===t(a)(o[0]))for(c=o.map(function(t){return t.name}),f=o.map(function(t){return t.prompt||t.name||""}),d=o.map(function(t){return t.align||"left"}),s=0;s<o.length;s+=1)g[o[s].name]=o[s].width*(19.049976/25.4);else Array.isArray(o)&&"string"==typeof o[0]&&(f=c=o,d=c.map(function(){return"left"}));if(x||Array.isArray(o)&&"string"==typeof o[0])for(s=0;s<c.length;s+=1){for(p[u=c[s]]=r.map(function(t){return t[u]}),this.setFont(void 0,"bold"),m.push(this.getTextDimensions(f[s],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),l=p[u],this.setFont(void 0,"normal"),h=0;h<l.length;h+=1)m.push(this.getTextDimensions(l[h],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);g[u]=Math.max.apply(null,m)+_+_,m=[]}if(v){var A={};for(s=0;s<c.length;s+=1)A[c[s]]={},A[c[s]].text=f[s],A[c[s]].align=d[s];var N=ep.call(this,A,g);y=c.map(function(t){return new ef(e,i,g[t],N,A[t].text,void 0,A[t].align)}),this.setTableHeaderRow(y),this.printHeaderRow(1,!1)}var I=o.reduce(function(t,e){return t[e.name]=e.align,t},{});for(s=0;s<r.length;s+=1){"rowStart"in n&&n.rowStart instanceof Function&&n.rowStart({row:s,data:r[s]},this);var M=ep.call(this,r[s],g);for(h=0;h<c.length;h+=1){var P=r[s][c[h]];"cellStart"in n&&n.cellStart instanceof Function&&n.cellStart({row:s,col:h,data:P},this),ed.call(this,new ef(e,i,g[c[h]],M,P,s+2,I[c[h]]))}}return this.internal.__cell__.table_x=e,this.internal.__cell__.table_y=i,this},ep=function(t,e){var i=this.internal.__cell__.padding,r=this.internal.__cell__.table_font_size,o=this.internal.scaleFactor;return Object.keys(t).map(function(r){var o=t[r];return this.splitTextToSize(o.hasOwnProperty("text")?o.text:o,e[r]-i-i)},this).map(function(t){return this.getLineHeightFactor()*t.length*r/o+i+i},this).reduce(function(t,e){return Math.max(t,e)},0)},es.setTableHeaderRow=function(t){eu.call(this),this.internal.__cell__.tableHeaderRow=t},es.printHeaderRow=function(t,e){if(eu.call(this),!this.internal.__cell__.tableHeaderRow)throw Error("Property tableHeaderRow does not exist.");if(eh=!0,"function"==typeof this.internal.__cell__.headerFunction){var i,r=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new ef(r[0],r[1],r[2],r[3],void 0,-1)}this.setFont(void 0,"bold");for(var o=[],n=0;n<this.internal.__cell__.tableHeaderRow.length;n+=1){i=this.internal.__cell__.tableHeaderRow[n].clone(),e&&(i.y=this.internal.__cell__.margins.top||0,o.push(i)),i.lineNumber=t;var a=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),ed.call(this,i),this.setTextColor(a)}o.length>0&&this.setTableHeaderRow(o),this.setFont(void 0,"normal"),eh=!1};var tP={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},tC=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],tT=tM(tC),tL=[100,200,300,400,500,600,700,800,900],tR=tM(tL);function tO(t){var e,i,r,o=t.family.replace(/"|'/g,"").toLowerCase(),n=tP[i=(i=t.style)||"normal"]?i:"normal",a=(e=t.weight)?"number"==typeof e?e>=100&&e<=900&&e%100==0?e:400:/^\d00$/.test(e)?parseInt(e):"bold"===e?700:400:400,s="number"==typeof tT[r=(r=t.stretch)||"normal"]?r:"normal";return{family:o,style:n,weight:a,stretch:s,src:t.src||[],ref:t.ref||{name:o,style:[s,n,a].join(" ")}}}function tk(t,e,i,r){var o;for(o=i;o>=0&&o<e.length;o+=r)if(t[e[o]])return t[e[o]];for(o=i;o>=0&&o<e.length;o-=r)if(t[e[o]])return t[e[o]]}var tG={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},tZ={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function tF(t){return[t.stretch,t.style,t.weight,t.family].join(" ")}function tD(t){return t.trimLeft()}var tj,tq,tU,tB,tz,tH,tV,tY,tW,tX,tK,tJ,t$,tQ,t0,t1,t2,t5,t4,t6,t3,t8,t7,t9,et,ee,ei,er,eo,en,ea,es,el,eh,eu,ec,ef,ed,ep,eg,em,ey,ex=["times"];(function(e){var i,r,o,n,s,l,h,c,f,d=function(t){return t=t||{},this.isStrokeTransparent=t.isStrokeTransparent||!1,this.strokeOpacity=t.strokeOpacity||1,this.strokeStyle=t.strokeStyle||"#000000",this.fillStyle=t.fillStyle||"#000000",this.isFillTransparent=t.isFillTransparent||!1,this.fillOpacity=t.fillOpacity||1,this.font=t.font||"10px sans-serif",this.textBaseline=t.textBaseline||"alphabetic",this.textAlign=t.textAlign||"left",this.lineWidth=t.lineWidth||1,this.lineJoin=t.lineJoin||"miter",this.lineCap=t.lineCap||"butt",this.path=t.path||[],this.transform=void 0!==t.transform?t.transform.clone():new c,this.globalCompositeOperation=t.globalCompositeOperation||"normal",this.globalAlpha=t.globalAlpha||1,this.clip_path=t.clip_path||[],this.currentPoint=t.currentPoint||new l,this.miterLimit=t.miterLimit||10,this.lastPoint=t.lastPoint||new l,this.lineDashOffset=t.lineDashOffset||0,this.lineDash=t.lineDash||[],this.margin=t.margin||[0,0,0,0],this.prevPageLastElemOffset=t.prevPageLastElemOffset||0,this.ignoreClearRect="boolean"!=typeof t.ignoreClearRect||t.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new p(this),i=this.internal.f2,r=this.internal.getCoordinateString,o=this.internal.getVerticalCoordinateString,n=this.internal.getHorizontalCoordinate,s=this.internal.getVerticalCoordinate,l=this.internal.Point,h=this.internal.Rectangle,c=this.internal.Matrix,f=new d}]);var p=function(t){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}}),Object.defineProperty(this,"pdf",{get:function(){return t}});var e=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return e},set:function(t){e=!!t}});var i=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return i},set:function(t){i=!!t}});var r=0;Object.defineProperty(this,"posX",{get:function(){return r},set:function(t){isNaN(t)||(r=t)}});var o=0;Object.defineProperty(this,"posY",{get:function(){return o},set:function(t){isNaN(t)||(o=t)}}),Object.defineProperty(this,"margin",{get:function(){return f.margin},set:function(t){var e;"number"==typeof t?e=[t,t,t,t]:((e=[,,,,])[0]=t[0],e[1]=t.length>=2?t[1]:e[0],e[2]=t.length>=3?t[2]:e[0],e[3]=t.length>=4?t[3]:e[1]),f.margin=e}});var n=!1;Object.defineProperty(this,"autoPaging",{get:function(){return n},set:function(t){n=t}});var a=0;Object.defineProperty(this,"lastBreak",{get:function(){return a},set:function(t){a=t}});var s=[];Object.defineProperty(this,"pageBreaks",{get:function(){return s},set:function(t){s=t}}),Object.defineProperty(this,"ctx",{get:function(){return f},set:function(t){t instanceof d&&(f=t)}}),Object.defineProperty(this,"path",{get:function(){return f.path},set:function(t){f.path=t}});var l=[];Object.defineProperty(this,"ctxStack",{get:function(){return l},set:function(t){l=t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(t){var e;e=g(t),this.ctx.fillStyle=e.style,this.ctx.isFillTransparent=0===e.a,this.ctx.fillOpacity=e.a,this.pdf.setFillColor(e.r,e.g,e.b,{a:e.a}),this.pdf.setTextColor(e.r,e.g,e.b,{a:e.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(t){var e=g(t);this.ctx.strokeStyle=e.style,this.ctx.isStrokeTransparent=0===e.a,this.ctx.strokeOpacity=e.a,0===e.a?this.pdf.setDrawColor(255,255,255):(e.a,this.pdf.setDrawColor(e.r,e.g,e.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(t){-1!==["butt","round","square"].indexOf(t)&&(this.ctx.lineCap=t,this.pdf.setLineCap(t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(t){isNaN(t)||(this.ctx.lineWidth=t,this.pdf.setLineWidth(t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(t){-1!==["bevel","round","miter"].indexOf(t)&&(this.ctx.lineJoin=t,this.pdf.setLineJoin(t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(t){isNaN(t)||(this.ctx.miterLimit=t,this.pdf.setMiterLimit(t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(t){this.ctx.textBaseline=t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(t){-1!==["right","end","center","left","start"].indexOf(t)&&(this.ctx.textAlign=t)}});var h=null,u=null;Object.defineProperty(this,"fontFaces",{get:function(){return u},set:function(t){h=null,u=t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(t){var e;if(this.ctx.font=t,null!==(e=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(t))){var i=e[1],r=(e[2],e[3]),o=e[4],n=(e[5],e[6]),a=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(o)[2];o="px"===a?Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor):"em"===a?Math.floor(parseFloat(o)*this.pdf.getFontSize()):Math.floor(parseFloat(o)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(o);var s=function(t){var e,i,r=[],o=t.trim();if(""===o)return ex;if(o in tZ)return[tZ[o]];for(;""!==o;){switch(i=null,e=(o=tD(o)).charAt(0)){case'"':case"'":i=function(t,e){for(var i=0;i<t.length;){if(t.charAt(i)===e)return[t.substring(0,i),t.substring(i+1)];i+=1}return null}(o.substring(1),e);break;default:i=function(t){var e=t.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return null===e?null:[e[0],t.substring(e[0].length)]}(o)}if(null===i||(r.push(i[0]),""!==(o=tD(i[1]))&&","!==o.charAt(0)))return ex;o=o.replace(/^,/,"")}return r}(n);if(this.fontFaces){var l=function(t,e,i){for(var r=(i=i||{}).defaultFontFamily||"times",o=Object.assign({},tG,i.genericFontFamilies||{}),n=null,a=null,s=0;s<e.length;++s)if(o[(n=tO(e[s])).family]&&(n.family=o[n.family]),t.hasOwnProperty(n.family)){a=t[n.family];break}if(!(a=a||t[r]))throw Error("Could not find a font-family for the rule '"+tF(n)+"' and default family '"+r+"'.");if(a=function(t,e){if(e[t])return e[t];var i=tT[t],r=i<=tT.normal?-1:1,o=tk(e,tC,i,r);if(!o)throw Error("Could not find a matching font-stretch value for "+t);return o}(n.stretch,a),a=function(t,e){if(e[t])return e[t];for(var i=tP[t],r=0;r<i.length;++r)if(e[i[r]])return e[i[r]];throw Error("Could not find a matching font-style for "+t)}(n.style,a),!(a=function(t,e){if(e[t])return e[t];if(400===t&&e[500])return e[500];if(500===t&&e[400])return e[400];var i=tk(e,tL,tR[t],t<400?-1:1);if(!i)throw Error("Could not find a matching font-weight for value "+t);return i}(n.weight,a)))throw Error("Failed to resolve a font for the rule '"+tF(n)+"'.");return a}(function(t,e){if(null===h){var i,r;h=function(t){for(var e={},i=0;i<t.length;++i){var r=tO(t[i]),o=r.family,n=r.stretch,a=r.style,s=r.weight;e[o]=e[o]||{},e[o][n]=e[o][n]||{},e[o][n][a]=e[o][n][a]||{},e[o][n][a][s]=r}return e}((i=t.getFontList(),r=[],Object.keys(i).forEach(function(t){i[t].forEach(function(e){var i=null;switch(e){case"bold":i={family:t,weight:"bold"};break;case"italic":i={family:t,style:"italic"};break;case"bolditalic":i={family:t,weight:"bold",style:"italic"};break;case"":case"normal":i={family:t}}null!==i&&(i.ref={name:t,style:e},r.push(i))})}),r).concat(e))}return h}(this.pdf,this.fontFaces),s.map(function(t){return{family:t,stretch:"normal",weight:r,style:i}}));this.pdf.setFont(l.ref.name,l.ref.style)}else{var u="";("bold"===r||parseInt(r,10)>=700||"bold"===i)&&(u="bold"),"italic"===i&&(u+="italic"),0===u.length&&(u="normal");for(var c="",f={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},d=0;d<s.length;d++){if(void 0!==this.pdf.internal.getFont(s[d],u,{noFallback:!0,disableWarning:!0})){c=s[d];break}if("bolditalic"===u&&void 0!==this.pdf.internal.getFont(s[d],"bold",{noFallback:!0,disableWarning:!0}))c=s[d],u="bold";else if(void 0!==this.pdf.internal.getFont(s[d],"normal",{noFallback:!0,disableWarning:!0})){c=s[d],u="normal";break}}if(""===c){for(var p=0;p<s.length;p++)if(f[s[p]]){c=f[s[p]];break}}c=""===c?"Times":c,this.pdf.setFont(c,u)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(t){this.ctx.globalCompositeOperation=t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(t){this.ctx.globalAlpha=t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(t){this.ctx.lineDashOffset=t,q.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(t){this.ctx.lineDash=t,q.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(t){this.ctx.ignoreClearRect=!!t}})};p.prototype.setLineDash=function(t){this.lineDash=t},p.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},p.prototype.fill=function(){E.call(this,"fill",!1)},p.prototype.stroke=function(){E.call(this,"stroke",!1)},p.prototype.beginPath=function(){this.path=[{type:"begin"}]},p.prototype.moveTo=function(t,e){if(isNaN(t)||isNaN(e))throw u.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.moveTo");var i=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"mt",x:i.x,y:i.y}),this.ctx.lastPoint=new l(t,e)},p.prototype.closePath=function(){var e=new l(0,0),i=0;for(i=this.path.length-1;-1!==i;i--)if("begin"===this.path[i].type&&"object"===t(a)(this.path[i+1])&&"number"==typeof this.path[i+1].x){e=new l(this.path[i+1].x,this.path[i+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new l(e.x,e.y)},p.prototype.lineTo=function(t,e){if(isNaN(t)||isNaN(e))throw u.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.lineTo");var i=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"lt",x:i.x,y:i.y}),this.ctx.lastPoint=new l(i.x,i.y)},p.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),E.call(this,null,!0)},p.prototype.quadraticCurveTo=function(t,e,i,r){if(isNaN(i)||isNaN(r)||isNaN(t)||isNaN(e))throw u.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var o=this.ctx.transform.applyToPoint(new l(i,r)),n=this.ctx.transform.applyToPoint(new l(t,e));this.path.push({type:"qct",x1:n.x,y1:n.y,x:o.x,y:o.y}),this.ctx.lastPoint=new l(o.x,o.y)},p.prototype.bezierCurveTo=function(t,e,i,r,o,n){if(isNaN(o)||isNaN(n)||isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r))throw u.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var a=this.ctx.transform.applyToPoint(new l(o,n)),s=this.ctx.transform.applyToPoint(new l(t,e)),h=this.ctx.transform.applyToPoint(new l(i,r));this.path.push({type:"bct",x1:s.x,y1:s.y,x2:h.x,y2:h.y,x:a.x,y:a.y}),this.ctx.lastPoint=new l(a.x,a.y)},p.prototype.arc=function(t,e,i,r,o,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||isNaN(o))throw u.error("jsPDF.context2d.arc: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.arc");if(n=!!n,!this.ctx.transform.isIdentity){var a=this.ctx.transform.applyToPoint(new l(t,e));t=a.x,e=a.y;var s=this.ctx.transform.applyToPoint(new l(0,i)),h=this.ctx.transform.applyToPoint(new l(0,0));i=Math.sqrt(Math.pow(s.x-h.x,2)+Math.pow(s.y-h.y,2))}Math.abs(o-r)>=2*Math.PI&&(r=0,o=2*Math.PI),this.path.push({type:"arc",x:t,y:e,radius:i,startAngle:r,endAngle:o,counterclockwise:n})},p.prototype.arcTo=function(t,e,i,r,o){throw Error("arcTo not implemented.")},p.prototype.rect=function(t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r))throw u.error("jsPDF.context2d.rect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(t,e),this.lineTo(t+i,e),this.lineTo(t+i,e+r),this.lineTo(t,e+r),this.lineTo(t,e),this.lineTo(t+i,e),this.lineTo(t,e)},p.prototype.fillRect=function(t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r))throw u.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!m.call(this)){var o={};"butt"!==this.lineCap&&(o.lineCap=this.lineCap,this.lineCap="butt"),"miter"!==this.lineJoin&&(o.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(t,e,i,r),this.fill(),o.hasOwnProperty("lineCap")&&(this.lineCap=o.lineCap),o.hasOwnProperty("lineJoin")&&(this.lineJoin=o.lineJoin)}},p.prototype.strokeRect=function(t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r))throw u.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeRect");x.call(this)||(this.beginPath(),this.rect(t,e,i,r),this.stroke())},p.prototype.clearRect=function(t,e,i,r){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r))throw u.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(t,e,i,r))},p.prototype.save=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("q");if(this.pdf.setPage(e),t){this.ctx.fontSize=this.pdf.internal.getFontSize();var r=new d(this.ctx);this.ctxStack.push(this.ctx),this.ctx=r}},p.prototype.restore=function(t){t="boolean"!=typeof t||t;for(var e=this.pdf.internal.getCurrentPageInfo().pageNumber,i=0;i<this.pdf.internal.getNumberOfPages();i++)this.pdf.setPage(i+1),this.pdf.internal.out("Q");this.pdf.setPage(e),t&&0!==this.ctxStack.length&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},p.prototype.toDataURL=function(){throw Error("toDataUrl not implemented.")};var g=function(t){var e,i,r,o;if(!0===t.isCanvasGradient&&(t=t.getColor()),!t)return{r:0,g:0,b:0,a:0,style:t};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(t))e=0,i=0,r=0,o=0;else{var n=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(t);if(null!==n)e=parseInt(n[1]),i=parseInt(n[2]),r=parseInt(n[3]),o=1;else if(null!==(n=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(t)))e=parseInt(n[1]),i=parseInt(n[2]),r=parseInt(n[3]),o=parseFloat(n[4]);else{if(o=1,"string"==typeof t&&"#"!==t.charAt(0)){var a=new y(t);t=a.ok?a.toHex():"#000000"}4===t.length?(e=t.substring(1,2),e+=e,i=t.substring(2,3),i+=i,r=t.substring(3,4),r+=r):(e=t.substring(1,3),i=t.substring(3,5),r=t.substring(5,7)),e=parseInt(e,16),i=parseInt(i,16),r=parseInt(r,16)}}return{r:e,g:i,b:r,a:o,style:t}},m=function(){return this.ctx.isFillTransparent||0==this.globalAlpha},x=function(){return!!(this.ctx.isStrokeTransparent||0==this.globalAlpha)};p.prototype.fillText=function(t,e,i,r){if(isNaN(e)||isNaN(i)||"string"!=typeof t)throw u.error("jsPDF.context2d.fillText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.fillText");if(r=isNaN(r)?void 0:r,!m.call(this)){var o=F(this.ctx.transform.rotation);L.call(this,{text:t,x:e,y:i,scale:this.ctx.transform.scaleX,angle:o,align:this.textAlign,maxWidth:r})}},p.prototype.strokeText=function(t,e,i,r){if(isNaN(e)||isNaN(i)||"string"!=typeof t)throw u.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!x.call(this)){r=isNaN(r)?void 0:r;var o=F(this.ctx.transform.rotation);L.call(this,{text:t,x:e,y:i,scale:this.ctx.transform.scaleX,renderingMode:"stroke",angle:o,align:this.textAlign,maxWidth:r})}},p.prototype.measureText=function(t){if("string"!=typeof t)throw u.error("jsPDF.context2d.measureText: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.measureText");var e=this.pdf,i=this.pdf.internal.scaleFactor,r=e.internal.getFontSize(),o=e.getStringUnitWidth(t)*r/e.internal.scaleFactor;return new function(t){var e=(t=t||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return e}}),this}({width:o*=Math.round(96*i/72*1e4)/1e4})},p.prototype.scale=function(t,e){if(isNaN(t)||isNaN(e))throw u.error("jsPDF.context2d.scale: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.scale");var i=new c(t,0,0,e,0,0);this.ctx.transform=this.ctx.transform.multiply(i)},p.prototype.rotate=function(t){if(isNaN(t))throw u.error("jsPDF.context2d.rotate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.rotate");var e=new c(Math.cos(t),Math.sin(t),-Math.sin(t),Math.cos(t),0,0);this.ctx.transform=this.ctx.transform.multiply(e)},p.prototype.translate=function(t,e){if(isNaN(t)||isNaN(e))throw u.error("jsPDF.context2d.translate: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.translate");var i=new c(1,0,0,1,t,e);this.ctx.transform=this.ctx.transform.multiply(i)},p.prototype.transform=function(t,e,i,r,o,n){if(isNaN(t)||isNaN(e)||isNaN(i)||isNaN(r)||isNaN(o)||isNaN(n))throw u.error("jsPDF.context2d.transform: Invalid arguments",arguments),Error("Invalid arguments passed to jsPDF.context2d.transform");var a=new c(t,e,i,r,o,n);this.ctx.transform=this.ctx.transform.multiply(a)},p.prototype.setTransform=function(t,e,i,r,o,n){t=isNaN(t)?1:t,e=isNaN(e)?0:e,i=isNaN(i)?0:i,r=isNaN(r)?1:r,o=isNaN(o)?0:o,n=isNaN(n)?0:n,this.ctx.transform=new c(t,e,i,r,o,n)};var v=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};p.prototype.drawImage=function(t,e,i,r,o,n,a,s,l){var u=this.pdf.getImageProperties(t),f=1,d=1,p=1,g=1;void 0!==r&&void 0!==s&&(p=s/r,g=l/o,f=u.width/r*s/r,d=u.height/o*l/o),void 0===n&&(n=e,a=i,e=0,i=0),void 0!==r&&void 0===s&&(s=r,l=o),void 0===r&&void 0===s&&(s=u.width,l=u.height);for(var m,y=this.ctx.transform.decompose(),x=F(y.rotate.shx),w=new c,E=(w=(w=(w=w.multiply(y.translate)).multiply(y.skew)).multiply(y.scale)).applyToRectangle(new h(n-e*p,a-i*g,r*f,o*d)),N=b.call(this,E),I=[],M=0;M<N.length;M+=1)-1===I.indexOf(N[M])&&I.push(N[M]);if(S(I),this.autoPaging)for(var P=I[0],C=I[I.length-1],T=P;T<C+1;T++){this.pdf.setPage(T);var L=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],R=1===T?this.posY+this.margin[0]:this.margin[0],O=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],k=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],G=1===T?0:O+(T-2)*k;if(0!==this.ctx.clip_path.length){var Z=this.path;m=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(m,this.posX+this.margin[3],-G+R+this.ctx.prevPageLastElemOffset),A.call(this,"fill",!0),this.path=Z}var D=JSON.parse(JSON.stringify(E));D=_([D],this.posX+this.margin[3],-G+R+this.ctx.prevPageLastElemOffset)[0];var j=(T>P||T<C)&&v.call(this);j&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],L,k,null).clip().discardPath()),this.pdf.addImage(t,"JPEG",D.x,D.y,D.w,D.h,null,null,x),j&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(t,"JPEG",E.x,E.y,E.w,E.h,null,null,x)};var b=function(t,e,i){var r=[];e=e||this.pdf.internal.pageSize.width,i=i||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var o=this.posY+this.ctx.prevPageLastElemOffset;switch(t.type){default:case"mt":case"lt":r.push(Math.floor((t.y+o)/i)+1);break;case"arc":r.push(Math.floor((t.y+o-t.radius)/i)+1),r.push(Math.floor((t.y+o+t.radius)/i)+1);break;case"qct":var n=D(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x,t.y);r.push(Math.floor((n.y+o)/i)+1),r.push(Math.floor((n.y+n.h+o)/i)+1);break;case"bct":var a=j(this.ctx.lastPoint.x,this.ctx.lastPoint.y,t.x1,t.y1,t.x2,t.y2,t.x,t.y);r.push(Math.floor((a.y+o)/i)+1),r.push(Math.floor((a.y+a.h+o)/i)+1);break;case"rect":r.push(Math.floor((t.y+o)/i)+1),r.push(Math.floor((t.y+t.h+o)/i)+1)}for(var s=0;s<r.length;s+=1)for(;this.pdf.internal.getNumberOfPages()<r[s];)w.call(this);return r},w=function(){var t=this.fillStyle,e=this.strokeStyle,i=this.font,r=this.lineCap,o=this.lineWidth,n=this.lineJoin;this.pdf.addPage(),this.fillStyle=t,this.strokeStyle=e,this.font=i,this.lineCap=r,this.lineWidth=o,this.lineJoin=n},_=function(t,e,i){for(var r=0;r<t.length;r++)switch(t[r].type){case"bct":t[r].x2+=e,t[r].y2+=i;case"qct":t[r].x1+=e,t[r].y1+=i;default:t[r].x+=e,t[r].y+=i}return t},S=function(t){return t.sort(function(t,e){return t-e})},E=function(t,e){for(var i,r,o=this.fillStyle,n=this.strokeStyle,a=this.lineCap,s=this.lineWidth,l=Math.abs(s*this.ctx.transform.scaleX),h=this.lineJoin,u=JSON.parse(JSON.stringify(this.path)),c=JSON.parse(JSON.stringify(this.path)),f=[],d=0;d<c.length;d++)if(void 0!==c[d].x)for(var p=b.call(this,c[d]),g=0;g<p.length;g+=1)-1===f.indexOf(p[g])&&f.push(p[g]);for(var m=0;m<f.length;m++)for(;this.pdf.internal.getNumberOfPages()<f[m];)w.call(this);if(S(f),this.autoPaging)for(var y=f[0],x=f[f.length-1],E=y;E<x+1;E++){this.pdf.setPage(E),this.fillStyle=o,this.strokeStyle=n,this.lineCap=a,this.lineWidth=l,this.lineJoin=h;var N=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],I=1===E?this.posY+this.margin[0]:this.margin[0],M=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],P=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],C=1===E?0:M+(E-2)*P;if(0!==this.ctx.clip_path.length){var T=this.path;i=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(i,this.posX+this.margin[3],-C+I+this.ctx.prevPageLastElemOffset),A.call(this,t,!0),this.path=T}if(r=JSON.parse(JSON.stringify(u)),this.path=_(r,this.posX+this.margin[3],-C+I+this.ctx.prevPageLastElemOffset),!1===e||0===E){var L=(E>y||E<x)&&v.call(this);L&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],N,P,null).clip().discardPath()),A.call(this,t,e),L&&this.pdf.restoreGraphicsState()}this.lineWidth=s}else this.lineWidth=l,A.call(this,t,e),this.lineWidth=s;this.path=u},A=function(t,e){if(("stroke"!==t||e||!x.call(this))&&("stroke"===t||e||!m.call(this))){for(var i,r,o=[],n=this.path,a=0;a<n.length;a++){var s=n[a];switch(s.type){case"begin":o.push({begin:!0});break;case"close":o.push({close:!0});break;case"mt":o.push({start:s,deltas:[],abs:[]});break;case"lt":var l=o.length;if(n[a-1]&&!isNaN(n[a-1].x)&&(i=[s.x-n[a-1].x,s.y-n[a-1].y],l>0)){for(;l>=0;l--)if(!0!==o[l-1].close&&!0!==o[l-1].begin){o[l-1].deltas.push(i),o[l-1].abs.push(s);break}}break;case"bct":i=[s.x1-n[a-1].x,s.y1-n[a-1].y,s.x2-n[a-1].x,s.y2-n[a-1].y,s.x-n[a-1].x,s.y-n[a-1].y],o[o.length-1].deltas.push(i);break;case"qct":var h=n[a-1].x+2/3*(s.x1-n[a-1].x),u=n[a-1].y+2/3*(s.y1-n[a-1].y),c=s.x+2/3*(s.x1-s.x),f=s.y+2/3*(s.y1-s.y),d=s.x,p=s.y;i=[h-n[a-1].x,u-n[a-1].y,c-n[a-1].x,f-n[a-1].y,d-n[a-1].x,p-n[a-1].y],o[o.length-1].deltas.push(i);break;case"arc":o.push({deltas:[],abs:[],arc:!0}),Array.isArray(o[o.length-1].abs)&&o[o.length-1].abs.push(s)}}r=e?null:"stroke"===t?"stroke":"fill";for(var g=!1,y=0;y<o.length;y++)if(o[y].arc)for(var v=o[y].abs,b=0;b<v.length;b++){var w=v[b];"arc"===w.type?M.call(this,w.x,w.y,w.radius,w.startAngle,w.endAngle,w.counterclockwise,void 0,e,!g):R.call(this,w.x,w.y),g=!0}else if(!0===o[y].close)this.pdf.internal.out("h"),g=!1;else if(!0!==o[y].begin){var _=o[y].start.x,S=o[y].start.y;O.call(this,o[y].deltas,_,S),g=!0}r&&P.call(this,r),e&&C.call(this)}},N=function(t){var e=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,i=e*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return t-i;case"top":return t+e-i;case"hanging":return t+e-2*i;case"middle":return t+e/2-i;default:return t}},I=function(t){return t+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};p.prototype.createLinearGradient=function(){var t=function(){};return t.colorStops=[],t.addColorStop=function(t,e){this.colorStops.push([t,e])},t.getColor=function(){return 0===this.colorStops.length?"#000000":this.colorStops[0][1]},t.isCanvasGradient=!0,t},p.prototype.createPattern=function(){return this.createLinearGradient()},p.prototype.createRadialGradient=function(){return this.createLinearGradient()};var M=function(t,e,i,r,o,n,a,s,l){for(var h=G.call(this,i,r,o,n),u=0;u<h.length;u++){var c=h[u];0===u&&(l?T.call(this,c.x1+t,c.y1+e):R.call(this,c.x1+t,c.y1+e)),k.call(this,t,e,c.x2,c.y2,c.x3,c.y3,c.x4,c.y4)}s?C.call(this):P.call(this,a)},P=function(t){switch(t){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},C=function(){this.pdf.clip(),this.pdf.discardPath()},T=function(t,e){this.pdf.internal.out(r(t)+" "+o(e)+" m")},L=function(t){switch(t.align){case"right":case"end":s="right";break;case"center":s="center";break;default:s="left"}var e=this.pdf.getTextDimensions(t.text),i=N.call(this,t.y),r=I.call(this,i)-e.h,o=this.ctx.transform.applyToPoint(new l(t.x,i)),n=this.ctx.transform.decompose(),a=new c;a=(a=(a=a.multiply(n.translate)).multiply(n.skew)).multiply(n.scale);for(var s,u,f,d,p=this.ctx.transform.applyToRectangle(new h(t.x,i,e.w,e.h)),g=a.applyToRectangle(new h(t.x,r,e.w,e.h)),m=b.call(this,g),y=[],x=0;x<m.length;x+=1)-1===y.indexOf(m[x])&&y.push(m[x]);if(S(y),this.autoPaging)for(var w=y[0],E=y[y.length-1],M=w;M<E+1;M++){this.pdf.setPage(M);var P=1===M?this.posY+this.margin[0]:this.margin[0],C=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],T=this.pdf.internal.pageSize.height-this.margin[2],L=T-this.margin[0],R=this.pdf.internal.pageSize.width-this.margin[1],O=R-this.margin[3],k=1===M?0:C+(M-2)*L;if(0!==this.ctx.clip_path.length){var G=this.path;u=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=_(u,this.posX+this.margin[3],-1*k+P),A.call(this,"fill",!0),this.path=G}var Z=_([JSON.parse(JSON.stringify(g))],this.posX+this.margin[3],-k+P+this.ctx.prevPageLastElemOffset)[0];t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),d=this.lineWidth,this.lineWidth=d*t.scale);var F="text"!==this.autoPaging;if(F||Z.y+Z.h<=T){if(F||Z.y>=P&&Z.x<=R){var D=F?t.text:this.pdf.splitTextToSize(t.text,t.maxWidth||R-Z.x)[0],j=_([JSON.parse(JSON.stringify(p))],this.posX+this.margin[3],-k+P+this.ctx.prevPageLastElemOffset)[0],q=F&&(M>w||M<E)&&v.call(this);q&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],O,L,null).clip().discardPath()),this.pdf.text(D,j.x,j.y,{angle:t.angle,align:s,renderingMode:t.renderingMode}),q&&this.pdf.restoreGraphicsState()}}else Z.y<T&&(this.ctx.prevPageLastElemOffset+=T-Z.y);t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=d)}else t.scale>=.01&&(f=this.pdf.internal.getFontSize(),this.pdf.setFontSize(f*t.scale),d=this.lineWidth,this.lineWidth=d*t.scale),this.pdf.text(t.text,o.x+this.posX,o.y+this.posY,{angle:t.angle,align:s,renderingMode:t.renderingMode,maxWidth:t.maxWidth}),t.scale>=.01&&(this.pdf.setFontSize(f),this.lineWidth=d)},R=function(t,e,i,n){i=i||0,n=n||0,this.pdf.internal.out(r(t+i)+" "+o(e+n)+" l")},O=function(t,e,i){return this.pdf.lines(t,e,i,null,null)},k=function(t,e,r,o,a,l,h,u){this.pdf.internal.out([i(n(r+t)),i(s(o+e)),i(n(a+t)),i(s(l+e)),i(n(h+t)),i(s(u+e)),"c"].join(" "))},G=function(t,e,i,r){for(var o=2*Math.PI,n=Math.PI/2;e>i;)e-=o;var a=Math.abs(i-e);a<o&&r&&(a=o-a);for(var s=[],l=r?-1:1,h=e;a>1e-5;){var u=h+l*Math.min(a,n);s.push(Z.call(this,t,h,u)),a-=Math.abs(u-h),h=u}return s},Z=function(t,e,i){var r=(i-e)/2,o=t*Math.cos(r),n=t*Math.sin(r),a=-n,s=o*o+a*a,l=s+o*o+a*n,h=4/3*(Math.sqrt(2*s*l)-l)/(o*n-a*o),u=o-h*a,c=a+h*o,f=-c,d=r+e,p=Math.cos(d),g=Math.sin(d);return{x1:t*Math.cos(e),y1:t*Math.sin(e),x2:u*p-c*g,y2:u*g+c*p,x3:u*p-f*g,y3:u*g+f*p,x4:t*Math.cos(i),y4:t*Math.sin(i)}},F=function(t){return 180*t/Math.PI},D=function(t,e,i,r,o,n){var a=t+.5*(i-t),s=e+.5*(r-e),l=o+.5*(i-o),u=n+.5*(r-n),c=Math.min(t,o,a,l),f=Math.min(e,n,s,u);return new h(c,f,Math.max(t,o,a,l)-c,Math.max(e,n,s,u)-f)},j=function(t,e,i,r,o,n,a,s){var l,u,c,f,d,p,g,m,y,x,v,b,w,_,S=i-t,E=r-e,A=o-i,N=n-r,I=a-o,M=s-n;for(u=0;u<41;u++)y=(g=(c=t+(l=u/40)*S)+l*((d=i+l*A)-c))+l*(d+l*(o+l*I-d)-g),x=(m=(f=e+l*E)+l*((p=r+l*N)-f))+l*(p+l*(n+l*M-p)-m),0==u?(v=y,b=x,w=y,_=x):(v=Math.min(v,y),b=Math.min(b,x),w=Math.max(w,y),_=Math.max(_,x));return new h(Math.round(v),Math.round(b),Math.round(w-v),Math.round(_-b))},q=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var t=JSON.stringify({lineDash:this.ctx.lineDash,lineDashOffset:this.ctx.lineDashOffset});this.prevLineDash!==t&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=t)}}})(D.API),ev=D.API,eb=function(t){var e,i,r,o,n,a,s,l,h,u;for(/[^\x00-\xFF]/.test(t),i=[],r=0,o=(t+=e="\x00\x00\x00\x00".slice(t.length%4||4)).length;o>r;r+=4)0!==(n=(t.charCodeAt(r)<<24)+(t.charCodeAt(r+1)<<16)+(t.charCodeAt(r+2)<<8)+t.charCodeAt(r+3))?(a=(n=((n=((n=((n=(n-(u=n%85))/85)-(h=n%85))/85)-(l=n%85))/85)-(s=n%85))/85)%85,i.push(a+33,s+33,l+33,h+33,u+33)):i.push(122);return function(t,e){for(var i=e;i>0;i--)t.pop()}(i,e.length),String.fromCharCode.apply(String,i)+"~>"},ew=function(t){var e,i,r,o,n,a=String,s="length",l="charCodeAt",h="slice",u="replace";for(t[h](-2),t=t[h](0,-2)[u](/\s/g,"")[u]("z","!!!!!"),r=[],o=0,n=(t+=e="uuuuu"[h](t[s]%5||5))[s];n>o;o+=5)i=52200625*(t[l](o)-33)+614125*(t[l](o+1)-33)+7225*(t[l](o+2)-33)+85*(t[l](o+3)-33)+(t[l](o+4)-33),r.push(255&i>>24,255&i>>16,255&i>>8,255&i);return function(t,e){for(var i=e;i>0;i--)t.pop()}(r,e[s]),a.fromCharCode.apply(a,r)},e_=function(t){var e=new RegExp(/^([0-9A-Fa-f]{2})+$/);if(-1!==(t=t.replace(/\s/g,"")).indexOf(">")&&(t=t.substr(0,t.indexOf(">"))),t.length%2&&(t+="0"),!1===e.test(t))return"";for(var i="",r=0;r<t.length;r+=2)i+=String.fromCharCode("0x"+(t[r]+t[r+1]));return i},eS=function(t){for(var e=new Uint8Array(t.length),i=t.length;i--;)e[i]=t.charCodeAt(i);return t=(e=(0,s.zlibSync)(e)).reduce(function(t,e){return t+String.fromCharCode(e)},"")},ev.processDataByFilters=function(t,e){var i=0,r=t||"",o=[];for("string"==typeof(e=e||[])&&(e=[e]),i=0;i<e.length;i+=1)switch(e[i]){case"ASCII85Decode":case"/ASCII85Decode":r=ew(r),o.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":r=eb(r),o.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":r=e_(r),o.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":r=r.split("").map(function(t){return("0"+t.charCodeAt().toString(16)).slice(-2)}).join("")+">",o.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":r=eS(r),o.push("/FlateDecode");break;default:throw Error('The filter: "'+e[i]+'" is not implemented')}return{data:r,reverseChain:o.reverse().join(" ")}},(eE=D.API).loadFile=function(t,e,i){return function(t,e,i){e=!1!==e,i="function"==typeof i?i:function(){};var r=void 0;try{r=function(t,e,i){var r=new XMLHttpRequest,o=0,n=function(t){var e=t.length,i=[],r=String.fromCharCode;for(o=0;o<e;o+=1)i.push(r(255&t.charCodeAt(o)));return i.join("")};if(r.open("GET",t,!e),r.overrideMimeType("text/plain; charset=x-user-defined"),!1===e&&(r.onload=function(){200===r.status?i(n(this.responseText)):i(void 0)}),r.send(null),e&&200===r.status)return n(r.responseText)}(t,e,i)}catch(t){}return r}(t,e,i)},eE.loadImageFile=eE.loadFile,function(e){function i(){return(l.html2canvas?Promise.resolve(l.html2canvas):n("dNJ6r")).catch(function(t){return Promise.reject(Error("Could not load html2canvas: "+t))}).then(function(t){return t.default?t.default:t})}function r(){return(l.DOMPurify?Promise.resolve(l.DOMPurify):n("cusDh")).catch(function(t){return Promise.reject(Error("Could not load dompurify: "+t))}).then(function(t){return t.default?t.default:t})}var o=function(e){var i=t(a)(e);return"undefined"===i?"undefined":"string"===i||e instanceof String?"string":"number"===i||e instanceof Number?"number":"function"===i||e instanceof Function?"function":e&&e.constructor===Array?"array":e&&1===e.nodeType?"element":"object"===i?"object":"unknown"},s=function(t,e){var i=document.createElement(t);for(var r in e.className&&(i.className=e.className),e.innerHTML&&e.dompurify&&(i.innerHTML=e.dompurify.sanitize(e.innerHTML)),e.style)i.style[r]=e.style[r];return i},h=function t(e){var i=Object.assign(t.convert(Promise.resolve()),JSON.parse(JSON.stringify(t.template))),r=t.convert(Promise.resolve(),i);return(r=r.setProgress(1,t,1,[t])).set(e)};(h.prototype=Object.create(Promise.prototype)).constructor=h,h.convert=function(t,e){return t.__proto__=e||h.prototype,t},h.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},h.prototype.from=function(t,e){return this.then(function(){switch(e=e||function(t){switch(o(t)){case"string":return"string";case"element":return"canvas"===t.nodeName.toLowerCase()?"canvas":"element";default:return"unknown"}}(t)){case"string":return this.then(r).then(function(e){return this.set({src:s("div",{innerHTML:t,dompurify:e})})});case"element":return this.set({src:t});case"canvas":return this.set({canvas:t});case"img":return this.set({img:t});default:return this.error("Unknown source type.")}})},h.prototype.to=function(t){switch(t){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},h.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var t={position:"relative",display:"inline-block",width:("number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},e=function t(e,i){for(var r=3===e.nodeType?document.createTextNode(e.nodeValue):e.cloneNode(!1),o=e.firstChild;o;o=o.nextSibling)!0!==i&&1===o.nodeType&&"SCRIPT"===o.nodeName||r.appendChild(t(o,i));return 1===e.nodeType&&("CANVAS"===e.nodeName?(r.width=e.width,r.height=e.height,r.getContext("2d").drawImage(e,0,0)):"TEXTAREA"!==e.nodeName&&"SELECT"!==e.nodeName||(r.value=e.value),r.addEventListener("load",function(){r.scrollTop=e.scrollTop,r.scrollLeft=e.scrollLeft},!0)),r}(this.prop.src,this.opt.html2canvas.javascriptEnabled);"BODY"===e.tagName&&(t.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:t}),this.prop.container.appendChild(e),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},h.prototype.toCanvas=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(i).then(function(t){var e=Object.assign({},this.opt.html2canvas);return delete e.onrendered,t(this.prop.container,e)}).then(function(t){(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)})},h.prototype.toContext2d=function(){var t=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(t).then(i).then(function(t){var e=this.opt.jsPDF,i=this.opt.fontFaces,r=Object.assign({async:!0,allowTaint:!0,scale:"number"!=typeof this.opt.width||isNaN(this.opt.width)||"number"!=typeof this.opt.windowWidth||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete r.onrendered,e.context2d.autoPaging=void 0===this.opt.autoPaging||this.opt.autoPaging,e.context2d.posX=this.opt.x,e.context2d.posY=this.opt.y,e.context2d.margin=this.opt.margin,e.context2d.fontFaces=i,i)for(var o=0;o<i.length;++o){var n=i[o],a=n.src.find(function(t){return"truetype"===t.format});a&&e.addFont(a.url,n.ref.name,n.ref.style)}return r.windowHeight=r.windowHeight||0,r.windowHeight=0==r.windowHeight?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):r.windowHeight,e.context2d.save(!0),t(this.prop.container,r)}).then(function(t){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(t),this.prop.canvas=t,document.body.removeChild(this.prop.overlay)})},h.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var t=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=t})},h.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},h.prototype.output=function(t,e,i){return"img"===(i=i||"pdf").toLowerCase()||"image"===i.toLowerCase()?this.outputImg(t,e):this.outputPdf(t,e)},h.prototype.outputPdf=function(t,e){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(t,e)})},h.prototype.outputImg=function(t){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(t){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+t+'" is not supported.'}})},h.prototype.save=function(t){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(t?{filename:t}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},h.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},h.prototype.set=function(t){if("object"!==o(t))return this;var e=Object.keys(t||{}).map(function(e){if(e in h.template.prop)return function(){this.prop[e]=t[e]};switch(e){case"margin":return this.setMargin.bind(this,t.margin);case"jsPDF":return function(){return this.opt.jsPDF=t.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,t.pageSize);default:return function(){this.opt[e]=t[e]}}},this);return this.then(function(){return this.thenList(e)})},h.prototype.get=function(t,e){return this.then(function(){var i=t in h.template.prop?this.prop[t]:this.opt[t];return e?e(i):i})},h.prototype.setMargin=function(t){return this.then(function(){switch(o(t)){case"number":t=[t,t,t,t];case"array":if(2===t.length&&(t=[t[0],t[1],t[0],t[1]]),4===t.length)break;default:return this.error("Invalid margin array.")}this.opt.margin=t}).then(this.setPageSize)},h.prototype.setPageSize=function(t){function e(t,e){return Math.floor(t*e/72*96)}return this.then(function(){(t=t||D.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(t.inner={width:t.width-this.opt.margin[1]-this.opt.margin[3],height:t.height-this.opt.margin[0]-this.opt.margin[2]},t.inner.px={width:e(t.inner.width,t.k),height:e(t.inner.height,t.k)},t.inner.ratio=t.inner.height/t.inner.width),this.prop.pageSize=t})},h.prototype.setProgress=function(t,e,i,r){return null!=t&&(this.progress.val=t),null!=e&&(this.progress.state=e),null!=i&&(this.progress.n=i),null!=r&&(this.progress.stack=r),this.progress.ratio=this.progress.val/this.progress.state,this},h.prototype.updateProgress=function(t,e,i,r){return this.setProgress(t?this.progress.val+t:null,e||null,i?this.progress.n+i:null,r?this.progress.stack.concat(r):null)},h.prototype.then=function(t,e){var i=this;return this.thenCore(t,e,function(t,e){return i.updateProgress(null,null,1,[t]),Promise.prototype.then.call(this,function(e){return i.updateProgress(null,t),e}).then(t,e).then(function(t){return i.updateProgress(1),t})})},h.prototype.thenCore=function(t,e,i){i=i||Promise.prototype.then,t&&(t=t.bind(this)),e&&(e=e.bind(this));var r=-1!==Promise.toString().indexOf("[native code]")&&"Promise"===Promise.name?this:h.convert(Object.assign({},this),Promise.prototype),o=i.call(r,t,e);return h.convert(o,this.__proto__)},h.prototype.thenExternal=function(t,e){return Promise.prototype.then.call(this,t,e)},h.prototype.thenList=function(t){var e=this;return t.forEach(function(t){e=e.thenCore(t)}),e},h.prototype.catch=function(t){t&&(t=t.bind(this));var e=Promise.prototype.catch.call(this,t);return h.convert(e,this)},h.prototype.catchExternal=function(t){return Promise.prototype.catch.call(this,t)},h.prototype.error=function(t){return this.then(function(){throw Error(t)})},h.prototype.using=h.prototype.set,h.prototype.saveAs=h.prototype.save,h.prototype.export=h.prototype.output,h.prototype.run=h.prototype.then,D.getPageSize=function(e,i,r){if("object"===t(a)(e)){var o=e;e=o.orientation,i=o.unit||i,r=o.format||r}i=i||"mm",r=r||"a4",e=(""+(e||"P")).toLowerCase();var n,s=(""+r).toLowerCase(),l={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(i){case"pt":n=1;break;case"mm":n=72/25.4;break;case"cm":n=72/2.54;break;case"in":n=72;break;case"px":n=.75;break;case"pc":case"em":n=12;break;case"ex":n=6;break;default:throw"Invalid unit: "+i}var h,u=0,c=0;if(l.hasOwnProperty(s))u=l[s][1]/n,c=l[s][0]/n;else try{u=r[1],c=r[0]}catch(t){throw Error("Invalid format: "+r)}if("p"===e||"portrait"===e)e="p",c>u&&(h=c,c=u,u=h);else{if("l"!==e&&"landscape"!==e)throw"Invalid orientation: "+e;e="l",u>c&&(h=c,c=u,u=h)}return{width:c,height:u,unit:i,k:n,orientation:e}},e.html=function(t,e){(e=e||{}).callback=e.callback||function(){},e.html2canvas=e.html2canvas||{},e.html2canvas.canvas=e.html2canvas.canvas||this.canvas,e.jsPDF=e.jsPDF||this,e.fontFaces=e.fontFaces?e.fontFaces.map(tO):null;var i=new h(e);return e.worker?i:i.from(t).doCallback()}}(D.API),D.API.addJS=function(t){return ey=t,this.internal.events.subscribe("postPutResources",function(){eg=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(eg+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),em=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+ey+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){void 0!==eg&&void 0!==em&&this.internal.out("/Names <</JavaScript "+eg+" 0 R>>")}),this},(eA=D.API).events.push(["postPutResources",function(){var t=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var e=this.outline.render().split(/\r\n/),i=0;i<e.length;i++){var r=e[i],o=t.exec(r);if(null!=o){var n=o[1];this.internal.newObjectDeferredBegin(n,!1)}this.internal.write(r)}if(this.outline.createNamedDestinations){var a=this.internal.pages.length,s=[];for(i=0;i<a;i++){var l=this.internal.newObject();s.push(l);var h=this.internal.getPageInfo(i+1);this.internal.write("<< /D["+h.objId+" 0 R /XYZ null null null]>> endobj")}var u=this.internal.newObject();for(this.internal.write("<< /Names [ "),i=0;i<s.length;i++)this.internal.write("(page_"+(i+1)+")"+s[i]+" 0 R");this.internal.write(" ] >>","endobj"),eN=this.internal.newObject(),this.internal.write("<< /Dests "+u+" 0 R"),this.internal.write(">>","endobj")}}]),eA.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+eN+" 0 R"))}]),eA.events.push(["initialized",function(){var t=this;t.outline={createNamedDestinations:!1,root:{children:[]}},t.outline.add=function(t,e,i){var r={title:e,options:i,children:[]};return null==t&&(t=this.root),t.children.push(r),r},t.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=t,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},t.outline.genIds_r=function(e){e.id=t.internal.newObjectDeferred();for(var i=0;i<e.children.length;i++)this.genIds_r(e.children[i])},t.outline.renderRoot=function(t){this.objStart(t),this.line("/Type /Outlines"),t.children.length>0&&(this.line("/First "+this.makeRef(t.children[0])),this.line("/Last "+this.makeRef(t.children[t.children.length-1]))),this.line("/Count "+this.count_r({count:0},t)),this.objEnd()},t.outline.renderItems=function(e){for(var i=this.ctx.pdf.internal.getVerticalCoordinateString,r=0;r<e.children.length;r++){var o=e.children[r];this.objStart(o),this.line("/Title "+this.makeString(o.title)),this.line("/Parent "+this.makeRef(e)),r>0&&this.line("/Prev "+this.makeRef(e.children[r-1])),r<e.children.length-1&&this.line("/Next "+this.makeRef(e.children[r+1])),o.children.length>0&&(this.line("/First "+this.makeRef(o.children[0])),this.line("/Last "+this.makeRef(o.children[o.children.length-1])));var n=this.count=this.count_r({count:0},o);if(n>0&&this.line("/Count "+n),o.options&&o.options.pageNumber){var a=t.internal.getPageInfo(o.options.pageNumber);this.line("/Dest ["+a.objId+" 0 R /XYZ 0 "+i(0)+" 0]")}this.objEnd()}for(var s=0;s<e.children.length;s++)this.renderItems(e.children[s])},t.outline.line=function(t){this.ctx.val+=t+"\r\n"},t.outline.makeRef=function(t){return t.id+" 0 R"},t.outline.makeString=function(e){return"("+t.internal.pdfEscape(e)+")"},t.outline.objStart=function(t){this.ctx.val+="\r\n"+t.id+" 0 obj\r\n<<\r\n"},t.outline.objEnd=function(){this.ctx.val+=">> \r\nendobj\r\n"},t.outline.count_r=function(t,e){for(var i=0;i<e.children.length;i++)t.count++,this.count_r(t,e.children[i]);return t.count}}]),eI=D.API,eM=[192,193,194,195,196,197,198,199],eI.processJPEG=function(t,e,i,r,o,n){var a,s=this.decode.DCT_DECODE,l=null;if("string"==typeof t||this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t)){switch(t=o||t,t=this.__addimage__.isArrayBuffer(t)?new Uint8Array(t):t,(a=function(t){for(var e,i=256*t.charCodeAt(4)+t.charCodeAt(5),r=t.length,o={width:0,height:0,numcomponents:1},n=4;n<r;n+=2){if(n+=i,-1!==eM.indexOf(t.charCodeAt(n+1))){e=256*t.charCodeAt(n+5)+t.charCodeAt(n+6),o={width:256*t.charCodeAt(n+7)+t.charCodeAt(n+8),height:e,numcomponents:t.charCodeAt(n+9)};break}i=256*t.charCodeAt(n+2)+t.charCodeAt(n+3)}return o}(t=this.__addimage__.isArrayBufferView(t)?this.__addimage__.arrayBufferToBinaryString(t):t)).numcomponents){case 1:n=this.color_spaces.DEVICE_GRAY;break;case 4:n=this.color_spaces.DEVICE_CMYK;break;case 3:n=this.color_spaces.DEVICE_RGB}l={data:t,width:a.width,height:a.height,colorSpace:n,bitsPerComponent:8,filter:s,index:e,alias:i}}return l};var ev,eb,ew,e_,eS,eE,eA,eN,eI,eM,eP,eC,eT,eL,eR,eO=function(){function t(t){var e,i,r,o,n,a,s,l,h,u,c,f,d,p;for(this.data=t,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},a=null;;){switch(e=this.readUInt32(),h=(function(){var t,e;for(e=[],t=0;t<4;++t)e.push(String.fromCharCode(this.data[this.pos++]));return e}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(e);break;case"fcTL":a&&this.animation.frames.push(a),this.pos+=4,a={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},n=this.readUInt16(),o=this.readUInt16()||100,a.delay=1e3*n/o,a.disposeOp=this.data[this.pos++],a.blendOp=this.data[this.pos++],a.data=[];break;case"IDAT":case"fdAT":for("fdAT"===h&&(this.pos+=4,e-=4),t=(null!=a?a.data:void 0)||this.imgData,f=0;0<=e?f<e:f>e;0<=e?++f:--f)t.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(r=this.palette.length/3,this.transparency.indexed=this.read(e),this.transparency.indexed.length>r)throw Error("More transparent colors than palette size");if((u=r-this.transparency.indexed.length)>0)for(d=0;0<=u?d<u:d>u;0<=u?++d:--d)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(e)[0];break;case 2:this.transparency.rgb=this.read(e)}break;case"tEXt":s=(c=this.read(e)).indexOf(0),l=String.fromCharCode.apply(String,c.slice(0,s)),this.text[l]=String.fromCharCode.apply(String,c.slice(s+1));break;case"IEND":return a&&this.animation.frames.push(a),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=4===(p=this.colorType)||6===p,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=e}if(this.pos+=4,this.pos>this.data.length)throw Error("Incomplete or corrupt PNG file")}}t.prototype.read=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;0<=t?++e:--e)i.push(this.data[this.pos++]);return i},t.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},t.prototype.decodePixels=function(t){var e=this.pixelBitlength/8,i=new Uint8Array(this.width*this.height*e),r=0,o=this;if(null==t&&(t=this.imgData),0===t.length)return new Uint8Array(0);function n(n,a,s,l){var h,u,c,f,d,p,g,m,y,x,v,b,w,_,S,E,A,N,I,M,P,C=Math.ceil((o.width-n)/s),T=Math.ceil((o.height-a)/l),L=o.width==C&&o.height==T;for(_=e*C,b=L?i:new Uint8Array(_*T),p=t.length,w=0,u=0;w<T&&r<p;){switch(t[r++]){case 0:for(f=A=0;A<_;f=A+=1)b[u++]=t[r++];break;case 1:for(f=N=0;N<_;f=N+=1)h=t[r++],d=f<e?0:b[u-e],b[u++]=(h+d)%256;break;case 2:for(f=I=0;I<_;f=I+=1)h=t[r++],c=(f-f%e)/e,S=w&&b[(w-1)*_+c*e+f%e],b[u++]=(S+h)%256;break;case 3:for(f=M=0;M<_;f=M+=1)h=t[r++],c=(f-f%e)/e,d=f<e?0:b[u-e],S=w&&b[(w-1)*_+c*e+f%e],b[u++]=(h+Math.floor((d+S)/2))%256;break;case 4:for(f=P=0;P<_;f=P+=1)h=t[r++],c=(f-f%e)/e,d=f<e?0:b[u-e],0===w?S=E=0:(S=b[(w-1)*_+c*e+f%e],E=c&&b[(w-1)*_+(c-1)*e+f%e]),m=Math.abs((g=d+S-E)-d),x=Math.abs(g-S),v=Math.abs(g-E),y=m<=x&&m<=v?d:x<=v?S:E,b[u++]=(h+y)%256;break;default:throw Error("Invalid filter algorithm: "+t[r-1])}if(!L){var R=((a+w*l)*o.width+n)*e,O=w*_;for(f=0;f<C;f+=1){for(var k=0;k<e;k+=1)i[R++]=b[O++];R+=(s-1)*e}}w++}}return t=(0,s.unzlibSync)(t),1==o.interlaceMethod?(n(0,0,8,8),n(4,0,8,8),n(0,4,4,8),n(2,0,4,4),n(0,2,2,4),n(1,0,2,2),n(0,1,1,2)):n(0,0,1,1),i},t.prototype.decodePalette=function(){var t,e,i,r,o,n,a,s,l;for(i=this.palette,n=this.transparency.indexed||[],o=new Uint8Array((n.length||0)+i.length),r=0,t=0,e=a=0,s=i.length;a<s;e=a+=3)o[r++]=i[e],o[r++]=i[e+1],o[r++]=i[e+2],o[r++]=null!=(l=n[t++])?l:255;return o},t.prototype.copyToImageData=function(t,e){var i,r,o,n,a,s,l,h,u,c,f;if(r=this.colors,u=null,i=this.hasAlphaChannel,this.palette.length&&(u=null!=(f=this._decodedPalette)?f:this._decodedPalette=this.decodePalette(),r=4,i=!0),h=(o=t.data||t).length,a=u||e,n=s=0,1===r)for(;n<h;)l=u?4*e[n/4]:s,c=a[l++],o[n++]=c,o[n++]=c,o[n++]=c,o[n++]=i?a[l++]:255,s=l;else for(;n<h;)l=u?4*e[n/4]:s,o[n++]=a[l++],o[n++]=a[l++],o[n++]=a[l++],o[n++]=i?a[l++]:255,s=l},t.prototype.decode=function(){var t;return t=new Uint8Array(this.width*this.height*4),this.copyToImageData(t,this.decodePixels()),t};var e,i,r,o=function(){if("[object Window]"===Object.prototype.toString.call(l)){try{r=(i=l.document.createElement("canvas")).getContext("2d")}catch(t){return!1}return!0}return!1};return o(),e=function(t){var e;if(!0===o())return r.width=t.width,r.height=t.height,r.clearRect(0,0,t.width,t.height),r.putImageData(t,0,0),(e=new Image).src=i.toDataURL(),e;throw Error("This method requires a Browser with Canvas-capability.")},t.prototype.decodeFrames=function(t){var i,r,o,n,a,s,l,h;if(this.animation){for(h=[],r=a=0,s=(l=this.animation.frames).length;a<s;r=++a)i=l[r],o=t.createImageData(i.width,i.height),n=this.decodePixels(new Uint8Array(i.data)),this.copyToImageData(o,n),i.imageData=o,h.push(i.image=e(o));return h}},t.prototype.renderFrame=function(t,e){var i,r,o;return i=(r=this.animation.frames)[e],o=r[e-1],0===e&&t.clearRect(0,0,this.width,this.height),1===(null!=o?o.disposeOp:void 0)?t.clearRect(o.xOffset,o.yOffset,o.width,o.height):2===(null!=o?o.disposeOp:void 0)&&t.putImageData(o.imageData,o.xOffset,o.yOffset),0===i.blendOp&&t.clearRect(i.xOffset,i.yOffset,i.width,i.height),t.drawImage(i.image,i.xOffset,i.yOffset)},t.prototype.animate=function(t){var e,i,r,o,n,a,s=this;return i=0,o=(a=this.animation).numFrames,r=a.frames,n=a.numPlays,(e=function(){var a,l;if(l=r[a=i++%o],s.renderFrame(t,a),o>1&&i/o<n)return s.animation._timeout=setTimeout(e,l.delay)})()},t.prototype.stopAnimation=function(){var t;return clearTimeout(null!=(t=this.animation)?t._timeout:void 0)},t.prototype.render=function(t){var e,i;return t._png&&t._png.stopAnimation(),t._png=this,t.width=this.width,t.height=this.height,e=t.getContext("2d"),this.animation?(this.decodeFrames(e),this.animate(e)):(i=e.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),e.putImageData(i,0,0))},t}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function ek(t){var e=0;if(71!==t[e++]||73!==t[e++]||70!==t[e++]||56!==t[e++]||56!=(t[e++]+1&253)||97!==t[e++])throw Error("Invalid GIF 87a/89a header.");var i=t[e++]|t[e++]<<8,r=t[e++]|t[e++]<<8,o=t[e++],n=1<<(7&o)+1;t[e++],t[e++];var a=null,s=null;o>>7&&(a=e,s=n,e+=3*n);var l=!0,h=[],u=0,c=null,f=0,d=null;for(this.width=i,this.height=r;l&&e<t.length;)switch(t[e++]){case 33:switch(t[e++]){case 255:if(11!==t[e]||78==t[e+1]&&69==t[e+2]&&84==t[e+3]&&83==t[e+4]&&67==t[e+5]&&65==t[e+6]&&80==t[e+7]&&69==t[e+8]&&50==t[e+9]&&46==t[e+10]&&48==t[e+11]&&3==t[e+12]&&1==t[e+13]&&0==t[e+16])e+=14,d=t[e++]|t[e++]<<8,e++;else for(e+=12;;){if(!((g=t[e++])>=0))throw Error("Invalid block size");if(0===g)break;e+=g}break;case 249:if(4!==t[e++]||0!==t[e+4])throw Error("Invalid graphics extension block.");var p=t[e++];u=t[e++]|t[e++]<<8,c=t[e++],0==(1&p)&&(c=null),f=p>>2&7,e++;break;case 254:for(;;){if(!((g=t[e++])>=0))throw Error("Invalid block size");if(0===g)break;e+=g}break;default:throw Error("Unknown graphic control label: 0x"+t[e-1].toString(16))}break;case 44:var g,m=t[e++]|t[e++]<<8,y=t[e++]|t[e++]<<8,x=t[e++]|t[e++]<<8,v=t[e++]|t[e++]<<8,b=t[e++],w=b>>6&1,_=1<<(7&b)+1,S=a,E=s,A=!1;b>>7&&(A=!0,S=e,E=_,e+=3*_);var N=e;for(e++;;){if(!((g=t[e++])>=0))throw Error("Invalid block size");if(0===g)break;e+=g}h.push({x:m,y:y,width:x,height:v,has_local_palette:A,palette_offset:S,palette_size:E,data_offset:N,data_length:e-N,transparent_index:c,interlaced:!!w,delay:u,disposal:f});break;case 59:l=!1;break;default:throw Error("Unknown gif block: 0x"+t[e-1].toString(16))}this.numFrames=function(){return h.length},this.loopCount=function(){return d},this.frameInfo=function(t){if(t<0||t>=h.length)throw Error("Frame index out of range.");return h[t]},this.decodeAndBlitFrameBGRA=function(e,r){var o=this.frameInfo(e),n=o.width*o.height,a=new Uint8Array(n);eG(t,o.data_offset,a,n);var s=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var h=o.width,u=i-h,c=h,f=4*(o.y*i+o.x),d=4*((o.y+o.height)*i+o.x),p=f,g=4*u;!0===o.interlaced&&(g+=4*i*7);for(var m=8,y=0,x=a.length;y<x;++y){var v=a[y];if(0===c&&(c=h,(p+=g)>=d&&(g=4*u+4*i*(m-1),p=f+(h+u)*(m<<1),m>>=1)),v===l)p+=4;else{var b=t[s+3*v],w=t[s+3*v+1],_=t[s+3*v+2];r[p++]=_,r[p++]=w,r[p++]=b,r[p++]=255}--c}},this.decodeAndBlitFrameRGBA=function(e,r){var o=this.frameInfo(e),n=o.width*o.height,a=new Uint8Array(n);eG(t,o.data_offset,a,n);var s=o.palette_offset,l=o.transparent_index;null===l&&(l=256);var h=o.width,u=i-h,c=h,f=4*(o.y*i+o.x),d=4*((o.y+o.height)*i+o.x),p=f,g=4*u;!0===o.interlaced&&(g+=4*i*7);for(var m=8,y=0,x=a.length;y<x;++y){var v=a[y];if(0===c&&(c=h,(p+=g)>=d&&(g=4*u+4*i*(m-1),p=f+(h+u)*(m<<1),m>>=1)),v===l)p+=4;else{var b=t[s+3*v],w=t[s+3*v+1],_=t[s+3*v+2];r[p++]=b,r[p++]=w,r[p++]=_,r[p++]=255}--c}}}function eG(t,e,i,r){for(var o=t[e++],n=1<<o,a=n+1,s=a+1,l=o+1,h=(1<<l)-1,c=0,f=0,d=0,p=t[e++],g=new Int32Array(4096),m=null;;){for(;c<16&&0!==p;)f|=t[e++]<<c,c+=8,1===p?p=t[e++]:--p;if(c<l)break;var y=f&h;if(f>>=l,c-=l,y!==n){if(y===a)break;for(var x=y<s?y:m,v=0,b=x;b>n;)b=g[b]>>8,++v;var w=b;if(d+v+(x!==y?1:0)>r)return void u.log("Warning, gif stream longer than expected.");i[d++]=w;var _=d+=v;for(x!==y&&(i[d++]=w),b=x;v--;)b=g[b],i[--_]=255&b,b>>=8;null!==m&&s<4096&&(g[s++]=m<<8|w,s>=h+1&&l<12&&(++l,h=h<<1|1)),m=y}else s=a+1,h=(1<<(l=o+1))-1,m=null}return d!==r&&u.log("Warning, gif stream shorter than expected."),i}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function eZ(t){var e,i,r,o,n,a=Math.floor,s=Array(64),l=Array(64),h=Array(64),u=Array(64),c=Array(65535),f=Array(65535),d=Array(64),p=Array(64),g=[],m=0,y=7,x=Array(64),v=Array(64),b=Array(64),w=Array(256),_=Array(2048),S=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],E=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],A=[0,1,2,3,4,5,6,7,8,9,10,11],N=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],I=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],M=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],P=[0,1,2,3,4,5,6,7,8,9,10,11],C=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],T=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function L(t,e){for(var i=0,r=0,o=[],n=1;n<=16;n++){for(var a=1;a<=t[n];a++)o[e[r]]=[],o[e[r]][0]=i,o[e[r]][1]=n,r++,i++;i*=2}return o}function R(t){for(var e=t[0],i=t[1]-1;i>=0;)e&1<<i&&(m|=1<<y),i--,--y<0&&(255==m?(O(255),O(0)):O(m),y=7,m=0)}function O(t){g.push(t)}function k(t){O(t>>8&255),O(255&t)}function G(t,e,i,r,o){for(var n,a=o[0],s=o[240],l=function(t,e){var i,r,o,n,a,s,l,h,u,c,f=0;for(u=0;u<8;++u){i=t[f],r=t[f+1],o=t[f+2],n=t[f+3],a=t[f+4],s=t[f+5],l=t[f+6];var p=i+(h=t[f+7]),g=i-h,m=r+l,y=r-l,x=o+s,v=o-s,b=n+a,w=n-a,_=p+b,S=p-b,E=m+x,A=m-x;t[f]=_+E,t[f+4]=_-E;var N=.707106781*(A+S);t[f+2]=S+N,t[f+6]=S-N;var I=.382683433*((_=w+v)-(A=y+g)),M=.5411961*_+I,P=1.306562965*A+I,C=.707106781*(E=v+y),T=g+C,L=g-C;t[f+5]=L+M,t[f+3]=L-M,t[f+1]=T+P,t[f+7]=T-P,f+=8}for(f=0,u=0;u<8;++u){i=t[f],r=t[f+8],o=t[f+16],n=t[f+24],a=t[f+32],s=t[f+40],l=t[f+48];var R=i+(h=t[f+56]),O=i-h,k=r+l,G=r-l,Z=o+s,F=o-s,D=n+a,j=n-a,q=R+D,U=R-D,B=k+Z,z=k-Z;t[f]=q+B,t[f+32]=q-B;var H=.707106781*(z+U);t[f+16]=U+H,t[f+48]=U-H;var V=.382683433*((q=j+F)-(z=G+O)),Y=.5411961*q+V,W=1.306562965*z+V,X=.707106781*(B=F+G),K=O+X,J=O-X;t[f+40]=J+Y,t[f+24]=J-Y,t[f+8]=K+W,t[f+56]=K-W,f++}for(u=0;u<64;++u)c=t[u]*e[u],d[u]=c>0?c+.5|0:c-.5|0;return d}(t,e),h=0;h<64;++h)p[S[h]]=l[h];var u=p[0]-i;i=p[0],0==u?R(r[0]):(R(r[f[n=32767+u]]),R(c[n]));for(var g=63;g>0&&0==p[g];)g--;if(0==g)return R(a),i;for(var m,y=1;y<=g;){for(var x=y;0==p[y]&&y<=g;)++y;var v=y-x;if(v>=16){m=v>>4;for(var b=1;b<=m;++b)R(s);v&=15}R(o[(v<<4)+f[n=32767+p[y]]]),R(c[n]),y++}return 63!=g&&R(a),i}function Z(t){n!=(t=Math.min(Math.max(t,1),100))&&(function(t){for(var e=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],i=0;i<64;i++){var r=a((e[i]*t+50)/100);r=Math.min(Math.max(r,1),255),s[S[i]]=r}for(var o=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],n=0;n<64;n++){var c=a((o[n]*t+50)/100);c=Math.min(Math.max(c,1),255),l[S[n]]=c}for(var f=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],d=0,p=0;p<8;p++)for(var g=0;g<8;g++)h[d]=1/(s[S[d]]*f[p]*f[g]*8),u[d]=1/(l[S[d]]*f[p]*f[g]*8),d++}(t<50?Math.floor(5e3/t):Math.floor(200-2*t)),n=t)}this.encode=function(t,n){n&&Z(n),g=[],m=0,y=7,k(65496),k(65504),k(16),O(74),O(70),O(73),O(70),O(0),O(1),O(1),O(0),k(1),k(1),O(0),O(0),function(){k(65499),k(132),O(0);for(var t=0;t<64;t++)O(s[t]);O(1);for(var e=0;e<64;e++)O(l[e])}(),d=t.width,p=t.height,k(65472),k(17),O(8),k(p),k(d),O(3),O(1),O(17),O(0),O(2),O(17),O(1),O(3),O(17),O(1),function(){k(65476),k(418),O(0);for(var t=0;t<16;t++)O(E[t+1]);for(var e=0;e<=11;e++)O(A[e]);O(16);for(var i=0;i<16;i++)O(N[i+1]);for(var r=0;r<=161;r++)O(I[r]);O(1);for(var o=0;o<16;o++)O(M[o+1]);for(var n=0;n<=11;n++)O(P[n]);O(17);for(var a=0;a<16;a++)O(C[a+1]);for(var s=0;s<=161;s++)O(T[s])}(),k(65498),k(12),O(3),O(1),O(0),O(2),O(17),O(3),O(17),O(0),O(63),O(0);var a=0,c=0,f=0;m=0,y=7,this.encode.displayName="_encode_";for(var d,p,w,S,L,F,D,j,q,U,B,z=t.data,H=t.width,V=t.height,Y=4*H,W=0;W<V;){for(w=0;w<Y;){for(D=Y*W+w,q=-1,U=0,B=0;B<64;B++)j=D+(U=B>>3)*Y+(q=4*(7&B)),W+U>=V&&(j-=Y*(W+1+U-V)),w+q>=Y&&(j-=w+q-Y+4),S=z[j++],L=z[j++],F=z[j++],x[B]=(_[S]+_[L+256>>0]+_[F+512>>0]>>16)-128,v[B]=(_[S+768>>0]+_[L+1024>>0]+_[F+1280>>0]>>16)-128,b[B]=(_[S+1280>>0]+_[L+1536>>0]+_[F+1792>>0]>>16)-128;a=G(x,h,a,e,r),c=G(v,u,c,i,o),f=G(b,u,f,i,o),w+=32}W+=8}if(y>=0){var X=[];X[1]=y+1,X[0]=(1<<y+1)-1,R(X)}return k(65497),new Uint8Array(g)},t=t||50,function(){for(var t=String.fromCharCode,e=0;e<256;e++)w[e]=t(e)}(),e=L(E,A),i=L(M,P),r=L(N,I),o=L(C,T),function(){for(var t=1,e=2,i=1;i<=15;i++){for(var r=t;r<e;r++)f[32767+r]=i,c[32767+r]=[],c[32767+r][1]=i,c[32767+r][0]=r;for(var o=-(e-1);o<=-t;o++)f[32767+o]=i,c[32767+o]=[],c[32767+o][1]=i,c[32767+o][0]=e-1+o;t<<=1,e<<=1}}(),function(){for(var t=0;t<256;t++)_[t]=19595*t,_[t+256>>0]=38470*t,_[t+512>>0]=7471*t+32768,_[t+768>>0]=-11059*t,_[t+1024>>0]=-21709*t,_[t+1280>>0]=32768*t+8421375,_[t+1536>>0]=-27439*t,_[t+1792>>0]=-5329*t}(),Z(t)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function eF(t,e){if(this.pos=0,this.buffer=t,this.datav=new DataView(t.buffer),this.is_with_alpha=!!e,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,-1===["BM","BA","CI","CP","IC","PT"].indexOf(this.flag))throw Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function eD(t){function e(t){if(!t)throw Error("assert :P")}function i(t,e,i){for(var r=0;4>r;r++)if(t[e+r]!=i.charCodeAt(r))return!0;return!1}function r(t,e,i,r,o){for(var n=0;n<o;n++)t[e+n]=i[r+n]}function o(t,e,i,r){for(var o=0;o<r;o++)t[e+o]=i}function n(t){return new Int32Array(t)}function a(t,e){for(var i=[],r=0;r<t;r++)i.push(new e);return i}function s(t,e){var i=[];return function t(i,r,o){for(var n=o[r],a=0;a<n&&(i.push(o.length>r+1?[]:new e),!(o.length<r+1));a++)t(i[a],r+1,o)}(i,0,t),i}var l=function(){var t=this;function l(t,e){for(var i=1<<e-1>>>0;t&i;)i>>>=1;return i?(t&i-1)+i:t}function h(t,i,r,o,n){e(!(o%r));do t[i+(o-=r)]=n;while(0<o)}function u(t,i,r,o,a){if(e(2328>=a),512>=a)var s=n(512);else if(null==(s=n(a)))return 0;return function(t,i,r,o,a,s){var u,f,d=i,p=1<<r,g=n(16),m=n(16);for(e(0!=a),e(null!=o),e(null!=t),e(0<r),f=0;f<a;++f){if(15<o[f])return 0;++g[o[f]]}if(g[0]==a)return 0;for(m[1]=0,u=1;15>u;++u){if(g[u]>1<<u)return 0;m[u+1]=m[u]+g[u]}for(f=0;f<a;++f)u=o[f],0<o[f]&&(s[m[u]++]=f);if(1==m[15])return(o=new c).g=0,o.value=s[0],h(t,d,1,p,o),p;var y,x=-1,v=p-1,b=0,w=1,_=1,S=1<<r;for(f=0,u=1,a=2;u<=r;++u,a<<=1){if(w+=_<<=1,0>(_-=g[u]))return 0;for(;0<g[u];--g[u])(o=new c).g=u,o.value=s[f++],h(t,d+b,a,S,o),b=l(b,u)}for(u=r+1,a=2;15>=u;++u,a<<=1){if(w+=_<<=1,0>(_-=g[u]))return 0;for(;0<g[u];--g[u]){if(o=new c,(b&v)!=x){for(d+=S,y=1<<(x=u)-r;15>x&&!(0>=(y-=g[x]));)++x,y<<=1;p+=S=1<<(y=x-r),t[i+(x=b&v)].g=y+r,t[i+x].value=d-i-x}o.g=u-r,o.value=s[f++],h(t,d+(b>>r),a,S,o),b=l(b,u)}}return w!=2*m[15]-1?0:p}(t,i,r,o,a,s)}function c(){this.value=this.g=0}function f(){this.value=this.g=0}function d(){this.G=a(5,c),this.H=n(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(ix,f)}function p(t,i,r,o){e(null!=t),e(null!=i),e(2147483648>o),t.Ca=254,t.I=0,t.b=-8,t.Ka=0,t.oa=i,t.pa=r,t.Jd=i,t.Yc=r+o,t.Zc=4<=o?r+o-4+1:r,N(t)}function g(t,e){for(var i=0;0<e--;)i|=M(t,128)<<e;return i}function m(t,e){var i=g(t,e);return I(t)?-i:i}function y(t,i,r,o){var n,a=0;for(e(null!=t),e(null!=i),e(4294967288>o),t.Sb=o,t.Ra=0,t.u=0,t.h=0,4<o&&(o=4),n=0;n<o;++n)a+=i[r+n]<<8*n;t.Ra=a,t.bb=o,t.oa=i,t.pa=r}function x(t){for(;8<=t.u&&t.bb<t.Sb;)t.Ra>>>=8,t.Ra+=t.oa[t.pa+t.bb]<<iw-8>>>0,++t.bb,t.u-=8;S(t)&&(t.h=1,t.u=0)}function v(t,i){if(e(0<=i),!t.h&&i<=ib){var r=_(t)&iv[i];return t.u+=i,x(t),r}return t.h=1,t.u=0}function b(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function w(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function _(t){return t.Ra>>>(t.u&iw-1)>>>0}function S(t){return e(t.bb<=t.Sb),t.h||t.bb==t.Sb&&t.u>iw}function E(t,e){t.u=e,t.h=S(t)}function A(t){t.u>=i_&&(e(t.u>=i_),x(t))}function N(t){e(null!=t&&null!=t.oa),t.pa<t.Zc?(t.I=(t.oa[t.pa++]|t.I<<8)>>>0,t.b+=8):(e(null!=t&&null!=t.oa),t.pa<t.Yc?(t.b+=8,t.I=t.oa[t.pa++]|t.I<<8):t.Ka?t.b=0:(t.I<<=8,t.b+=8,t.Ka=1))}function I(t){return g(t,1)}function M(t,e){var i=t.Ca;0>t.b&&N(t);var r=t.b,o=i*e>>>8,n=(t.I>>>r>o)+0;for(n?(i-=o,t.I-=o+1<<r>>>0):i=o+1,r=i,o=0;256<=r;)o+=8,r>>=8;return r=7^o+iS[r],t.b-=r,t.Ca=(i<<r)-1,n}function P(t,e,i){t[e+0]=i>>24&255,t[e+1]=i>>16&255,t[e+2]=i>>8&255,t[e+3]=i>>0&255}function C(t,e){return t[e+0]<<0|t[e+1]<<8}function T(t,e){return C(t,e)|t[e+2]<<16}function L(t,e){return C(t,e)|C(t,e+2)<<16}function R(t,i){return e(null!=t),e(0<i),t.X=n(1<<i),null==t.X?0:(t.Mb=32-i,t.Xa=i,1)}function O(t,i){e(null!=t),e(null!=i),e(t.Xa==i.Xa),r(i.X,0,t.X,0,1<<i.Xa)}function k(){this.X=[],this.Xa=this.Mb=0}function G(t,i,r,o){e(null!=r),e(null!=o);var n=r[0],a=o[0];return 0==n&&(n=(t*a+i/2)/i),0==a&&(a=(i*n+t/2)/t),0>=n||0>=a?0:(r[0]=n,o[0]=a,1)}function Z(t,e){return t+(1<<e)-1>>>e}function F(t,e){return((4278255360&t)+(4278255360&e)>>>0&4278255360)+((16711935&t)+(16711935&e)>>>0&16711935)>>>0}function D(e,i){t[i]=function(i,r,o,n,a,s,l){var h;for(h=0;h<a;++h){var u=t[e](s[l+h-1],o,n+h);s[l+h]=F(i[r+h],u)}}}function j(){this.ud=this.hd=this.jd=0}function q(t,e){return((4278124286&(t^e))>>>1)+(t&e)>>>0}function U(t){return 0<=t&&256>t?t:0>t?0:255<t?255:void 0}function B(t,e){return U(t+(t-e+.5>>1))}function z(t,e,i){return Math.abs(e-i)-Math.abs(t-i)}function H(t,e,i,r,o,n,a){for(r=n[a-1],i=0;i<o;++i)n[a+i]=r=F(t[e+i],r)}function V(t,e,i,r,o){var n;for(n=0;n<i;++n){var a=t[e+n],s=a>>8&255,l=16711935&(l=(l=16711935&a)+((s<<16)+s));r[o+n]=(4278255360&a)+l>>>0}}function Y(t,e){e.jd=t>>0&255,e.hd=t>>8&255,e.ud=t>>16&255}function W(t,e,i,r,o,n){var a;for(a=0;a<r;++a){var s=e[i+a],l=s>>>8,h=s,u=255&(u=(u=s>>>16)+((t.jd<<24>>24)*(l<<24>>24)>>>5));h=255&(h=(h+=(t.hd<<24>>24)*(l<<24>>24)>>>5)+((t.ud<<24>>24)*(u<<24>>24)>>>5)),o[n+a]=(4278255360&s)+(u<<16)+h}}function X(e,i,r,o,n){t[i]=function(t,e,i,r,a,s,l,h,u){for(r=l;r<h;++r)for(l=0;l<u;++l)a[s++]=n(i[o(t[e++])])},t[e]=function(e,i,a,s,l,h,u){var c=8>>e.b,f=e.Ea,d=e.K[0],p=e.w;if(8>c)for(e=(1<<e.b)-1,p=(1<<c)-1;i<a;++i){var g,m=0;for(g=0;g<f;++g)g&e||(m=o(s[l++])),h[u++]=n(d[m&p]),m>>=c}else t["VP8LMapColor"+r](s,l,d,p,h,u,i,a,f)}}function K(t,e,i,r,o){for(i=e+i;e<i;){var n=t[e++];r[o++]=n>>16&255,r[o++]=n>>8&255,r[o++]=n>>0&255}}function J(t,e,i,r,o){for(i=e+i;e<i;){var n=t[e++];r[o++]=n>>16&255,r[o++]=n>>8&255,r[o++]=n>>0&255,r[o++]=n>>24&255}}function $(t,e,i,r,o){for(i=e+i;e<i;){var n=(a=t[e++])>>16&240|a>>12&15,a=a>>0&240|a>>28&15;r[o++]=n,r[o++]=a}}function Q(t,e,i,r,o){for(i=e+i;e<i;){var n=(a=t[e++])>>16&248|a>>13&7,a=a>>5&224|a>>3&31;r[o++]=n,r[o++]=a}}function tt(t,e,i,r,o){for(i=e+i;e<i;){var n=t[e++];r[o++]=n>>0&255,r[o++]=n>>8&255,r[o++]=n>>16&255}}function te(t,e,i,o,n,a){if(0==a)for(i=e+i;e<i;)P(o,((a=t[e++])[0]>>24|a[1]>>8&65280|a[2]<<8&16711680|a[3]<<24)>>>0),n+=32;else r(o,n,t,e,i)}function ti(e,i){t[i][0]=t[e+"0"],t[i][1]=t[e+"1"],t[i][2]=t[e+"2"],t[i][3]=t[e+"3"],t[i][4]=t[e+"4"],t[i][5]=t[e+"5"],t[i][6]=t[e+"6"],t[i][7]=t[e+"7"],t[i][8]=t[e+"8"],t[i][9]=t[e+"9"],t[i][10]=t[e+"10"],t[i][11]=t[e+"11"],t[i][12]=t[e+"12"],t[i][13]=t[e+"13"],t[i][14]=t[e+"0"],t[i][15]=t[e+"0"]}function tr(t){return t==rf||t==rd||t==rp||t==rg}function to(){this.eb=[],this.size=this.A=this.fb=0}function tn(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function ta(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new to,this.f.kb=new tn,this.sd=null}function ts(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function tl(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function th(t){return alert("todo:WebPSamplerProcessPlane"),t.T}function tu(t,e){var i=t.T,o=e.ba.f.RGBA,n=o.eb,a=o.fb+t.ka*o.A,s=rj[e.ba.S],l=t.y,h=t.O,u=t.f,c=t.N,f=t.ea,d=t.W,p=e.cc,g=e.dc,m=e.Mc,y=e.Nc,x=t.ka,v=t.ka+t.T,b=t.U,w=b+1>>1;for(0==x?s(l,h,null,null,u,c,f,d,u,c,f,d,n,a,null,null,b):(s(e.ec,e.fc,l,h,p,g,m,y,u,c,f,d,n,a-o.A,n,a,b),++i);x+2<v;x+=2)p=u,g=c,m=f,y=d,c+=t.Rc,d+=t.Rc,a+=2*o.A,s(l,(h+=2*t.fa)-t.fa,l,h,p,g,m,y,u,c,f,d,n,a-o.A,n,a,b);return h+=t.fa,t.j+v<t.o?(r(e.ec,e.fc,l,h,b),r(e.cc,e.dc,u,c,w),r(e.Mc,e.Nc,f,d,w),i--):1&v||s(l,h,null,null,u,c,f,d,u,c,f,d,n,a+o.A,null,null,b),i}function tc(t,i,r){var o=t.F,n=[t.J];if(null!=o){var a=t.U,s=i.ba.S,l=s==rh||s==rp;i=i.ba.f.RGBA;var h=[0],u=t.ka;h[0]=t.T,t.Kb&&(0==u?--h[0]:(--u,n[0]-=t.width),t.j+t.ka+t.T==t.o&&(h[0]=t.o-t.j-u));var c=i.eb;u=i.fb+u*i.A,t=i4(o,n[0],t.width,a,h,c,u+(l?0:3),i.A),e(r==h),t&&tr(s)&&i2(c,u,l,a,h,i.A)}return 0}function tf(t){var e=t.ma,i=e.ba.S,r=11>i,o=i==ra||i==rl||i==rh||i==ru||12==i||tr(i);if(e.memory=null,e.Ib=null,e.Jb=null,e.Nd=null,!ig(e.Oa,t,o?11:12))return 0;if(o&&tr(i)&&e3(),t.da)alert("todo:use_scaling");else{if(r){if(e.Ib=th,t.Kb){if(i=t.U+1>>1,e.memory=n(t.U+2*i),null==e.memory)return 0;e.ec=e.memory,e.fc=0,e.cc=e.ec,e.dc=e.fc+t.U,e.Mc=e.cc,e.Nc=e.dc+i,e.Ib=tu,e3()}}else alert("todo:EmitYUV");o&&(e.Jb=tc,r&&e4())}if(r&&!r0){for(t=0;256>t;++t)r1[t]=89858*(t-128)+rX>>rW,r4[t]=-22014*(t-128)+rX,r5[t]=-45773*(t-128),r2[t]=113618*(t-128)+rX>>rW;for(t=rK;t<rJ;++t)e=76283*(t-16)+rX>>rW,r6[t-rK]=tH(e,255),r3[t-rK]=tH(e+8>>4,15);r0=1}return 1}function td(t){var i=t.ma,r=t.U,o=t.T;return e(!(1&t.ka)),0>=r||0>=o?0:(r=i.Ib(t,i),null!=i.Jb&&i.Jb(t,i,r),i.Dc+=r,1)}function tp(t){t.ma.memory=null}function tg(t,e,i,r){return 47!=v(t,8)?0:(e[0]=v(t,14)+1,i[0]=v(t,14)+1,r[0]=v(t,1),0!=v(t,3)?0:!t.h)}function tm(t,e){if(4>t)return t+1;var i=t-2>>1;return(2+(1&t)<<i)+v(e,i)+1}function ty(t,e){var i;return 120<e?e-120:1<=(i=((i=rw[e-1])>>4)*t+(8-(15&i)))?i:1}function tx(t,e,i){var r=_(i),o=t[e+=255&r].g-8;return 0<o&&(E(i,i.u+8),r=_(i),e+=t[e].value,e+=r&(1<<o)-1),E(i,i.u+t[e].g),t[e].value}function tv(t,i,r){return r.g+=t.g,r.value+=t.value<<i>>>0,e(8>=r.g),t.g}function tb(t,i,r){var o=t.xc;return e((i=0==o?0:t.vc[t.md*(r>>o)+(i>>o)])<t.Wb),t.Ya[i]}function tw(t,i,o,n){var a=t.ab,s=t.c*i,l=t.C;i=l+i;var h=o,u=n;for(n=t.Ta,o=t.Ua;0<a--;){var c=t.gc[a],f=l,d=i,p=h,g=u,m=(u=n,h=o,c.Ea);switch(e(f<d),e(d<=c.nc),c.hc){case 2:iN(p,g,(d-f)*m,u,h);break;case 0:var y=f,x=d,v=u,b=h,w=(N=c).Ea;0==y&&(iE(p,g,null,null,1,v,b),H(p,g+1,0,0,w-1,v,b+1),g+=w,b+=w,++y);for(var _=1<<N.b,S=_-1,E=Z(w,N.b),A=N.K,N=N.w+(y>>N.b)*E;y<x;){var I=A,M=N,P=1;for(iA(p,g,v,b-w,1,v,b);P<w;){var C=(P&~S)+_;C>w&&(C=w),(0,iT[I[M++]>>8&15])(p,g+ +P,v,b+P-w,C-P,v,b+P),P=C}g+=w,b+=w,++y&S||(N+=E)}d!=c.nc&&r(u,h-m,u,h+(d-f-1)*m,m);break;case 1:for(m=p,x=g,w=(p=c.Ea)-(b=p&~(v=(g=1<<c.b)-1)),y=Z(p,c.b),_=c.K,c=c.w+(f>>c.b)*y;f<d;){for(S=_,E=c,A=new j,N=x+b,I=x+p;x<N;)Y(S[E++],A),iL(A,m,x,g,u,h),x+=g,h+=g;x<I&&(Y(S[E++],A),iL(A,m,x,w,u,h),x+=w,h+=w),++f&v||(c+=y)}break;case 3:if(p==u&&g==h&&0<c.b){for(x=u,p=m=h+(d-f)*m-(b=(d-f)*Z(c.Ea,c.b)),g=u,v=h,y=[],b=(w=b)-1;0<=b;--b)y[b]=g[v+b];for(b=w-1;0<=b;--b)x[p+b]=y[b];iI(c,f,d,u,m,u,h)}else iI(c,f,d,p,g,u,h)}h=n,u=o}u!=o&&r(n,o,h,u,s)}function t_(t,i){var r=t.V,o=t.Ba+t.c*t.C,n=i-t.C;if(e(i<=t.l.o),e(16>=n),0<n){var a=t.l,s=t.Ta,l=t.Ua,h=a.width;if(tw(t,n,r,o),n=l=[l],e((r=t.C)<(o=i)),e(a.v<a.va),o>a.o&&(o=a.o),r<a.j){var u=a.j-r;r=a.j,n[0]+=u*h}if(r>=o?r=0:(n[0]+=4*a.v,a.ka=r-a.j,a.U=a.va-a.v,a.T=o-r,r=1),r){if(l=l[0],11>(r=t.ca).S){var c=r.f.RGBA,f=(o=r.S,n=a.U,a=a.T,u=c.eb,c.A),d=a;for(c=c.fb+t.Ma*c.A;0<d--;){var p=l,g=n,m=u,y=c;switch(o){case rn:iR(s,p,g,m,y);break;case ra:iO(s,p,g,m,y);break;case rf:iO(s,p,g,m,y),i2(m,y,0,g,1,0);break;case rs:iZ(s,p,g,m,y);break;case rl:te(s,p,g,m,y,1);break;case rd:te(s,p,g,m,y,1),i2(m,y,0,g,1,0);break;case rh:te(s,p,g,m,y,0);break;case rp:te(s,p,g,m,y,0),i2(m,y,1,g,1,0);break;case ru:ik(s,p,g,m,y);break;case rg:ik(s,p,g,m,y),i5(m,y,g,1,0);break;case rc:iG(s,p,g,m,y);break;default:e(0)}l+=h,c+=f}t.Ma+=a}else alert("todo:EmitRescaledRowsYUVA");e(t.Ma<=r.height)}}t.C=i,e(t.C<=t.i)}function tS(t){var e;if(0<t.ua)return 0;for(e=0;e<t.Wb;++e){var i=t.Ya[e].G,r=t.Ya[e].H;if(0<i[1][r[1]+0].g||0<i[2][r[2]+0].g||0<i[3][r[3]+0].g)return 0}return 1}function tE(t,i,r,o,n,a){if(0!=t.Z){var s=t.qd,l=t.rd;for(e(null!=rD[t.Z]);i<r;++i)rD[t.Z](s,l,o,n,o,n,a),s=o,l=n,n+=a;t.qd=s,t.rd=l}}function tA(t,i){var r=t.l.ma,o=0==r.Z||1==r.Z?t.l.j:t.C;if(o=t.C<o?o:t.C,e(i<=t.l.o),i>o){var n=t.l.width,a=r.ca,s=r.tb+n*o,l=t.V,h=t.Ba+t.c*o,u=t.gc;e(1==t.ab),e(3==u[0].hc),iP(u[0],o,i,l,h,a,s),tE(r,o,i,a,s,n)}t.C=t.Ma=i}function tN(t,i,r,o,n,a,s){var l=t.$/o,h=t.$%o,u=t.m,c=t.s,f=r+t.$,d=f;n=r+o*n;var p=r+o*a,g=280+c.ua,m=t.Pb?l:16777216,y=0<c.ua?c.Wa:null,x=c.wc,v=f<p?tb(c,h,l):null;e(t.C<a),e(p<=n);var b=!1;e:for(;;){for(;b||f<p;){var w=0;if(l>=m){var N=f-r;e((m=t).Pb),m.wd=m.m,m.xd=N,0<m.s.ua&&O(m.s.Wa,m.s.vb),m=l+rS}if(h&x||(v=tb(c,h,l)),e(null!=v),v.Qb&&(i[f]=v.qb,b=!0),!b){if(A(u),v.jc){w=u,N=i;var I=f,M=v.pd[_(w)&ix-1];e(v.jc),256>M.g?(E(w,w.u+M.g),N[I]=M.value,w=0):(E(w,w.u+M.g-256),e(256<=M.value),w=M.value),0==w&&(b=!0)}else w=tx(v.G[0],v.H[0],u)}if(u.h)break;if(b||256>w){if(!b){if(v.nd)i[f]=(v.qb|w<<8)>>>0;else{if(A(u),b=tx(v.G[1],v.H[1],u),A(u),N=tx(v.G[2],v.H[2],u),I=tx(v.G[3],v.H[3],u),u.h)break;i[f]=(I<<24|b<<16|w<<8|N)>>>0}}if(b=!1,++f,++h>=o&&(h=0,++l,null!=s&&l<=a&&!(l%16)&&s(t,l),null!=y))for(;d<f;)w=i[d++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else if(280>w){if(w=tm(w-256,u),N=tx(v.G[4],v.H[4],u),A(u),N=ty(o,N=tm(N,u)),u.h)break;if(f-r<N||n-f<w)break e;for(I=0;I<w;++I)i[f+I]=i[f+I-N];for(f+=w,h+=w;h>=o;)h-=o,++l,null!=s&&l<=a&&!(l%16)&&s(t,l);if(e(f<=n),h&x&&(v=tb(c,h,l)),null!=y)for(;d<f;)w=i[d++],y.X[(506832829*w&4294967295)>>>y.Mb]=w}else{if(!(w<g))break e;for(b=w-280,e(null!=y);d<f;)w=i[d++],y.X[(506832829*w&4294967295)>>>y.Mb]=w;w=f,e(!(b>>>(N=y).Xa)),i[w]=N.X[b],b=!0}b||e(u.h==S(u))}if(t.Pb&&u.h&&f<n)e(t.m.h),t.a=5,t.m=t.wd,t.$=t.xd,0<t.s.ua&&O(t.s.vb,t.s.Wa);else{if(u.h)break;null!=s&&s(t,l>a?a:l),t.a=0,t.$=f-r}return 1}return t.a=3,0}function tI(t){e(null!=t),t.vc=null,t.yc=null,t.Ya=null;var i=t.Wa;null!=i&&(i.X=null),t.vb=null,e(null!=t)}function tM(){var e=new eX;return null==e?null:(e.a=0,e.xb=rF,ti("Predictor","VP8LPredictors"),ti("Predictor","VP8LPredictors_C"),ti("PredictorAdd","VP8LPredictorsAdd"),ti("PredictorAdd","VP8LPredictorsAdd_C"),iN=V,iL=W,iR=K,iO=J,ik=$,iG=Q,iZ=tt,t.VP8LMapColor32b=iM,t.VP8LMapColor8b=iC,e)}function tP(t,i,r,s,l){for(var h=1,f=[t],p=[i],g=s.m,m=s.s,y=null,x=0;;){if(r)for(;h&&v(g,1);){var b=f,w=p,S=1,N=s.m,I=s.gc[s.ab],M=v(N,2);if(s.Oc&1<<M)h=0;else{switch(s.Oc|=1<<M,I.hc=M,I.Ea=b[0],I.nc=w[0],I.K=[null],++s.ab,e(4>=s.ab),M){case 0:case 1:I.b=v(N,3)+2,S=tP(Z(I.Ea,I.b),Z(I.nc,I.b),0,s,I.K),I.K=I.K[0];break;case 3:var P,C=v(N,8)+1,T=16<C?0:4<C?1:2<C?2:3;if(b[0]=Z(I.Ea,T),I.b=T,P=S=tP(C,1,0,s,I.K)){var L,O=1<<(8>>I.b),k=n(O);if(null==k)P=0;else{var G=I.K[0],D=I.w;for(k[0]=I.K[0][0],L=1;L<1*C;++L)k[L]=F(G[D+L],k[L-1]);for(;L<4*O;++L)k[L]=0;I.K[0]=null,I.K[0]=k,P=1}}S=P;break;case 2:break;default:e(0)}h=S}}if(f=f[0],p=p[0],h&&v(g,1)&&!(h=1<=(x=v(g,4))&&11>=x)){s.a=3;break}if(j=h)i:{var j,q,U,B,z=f,H=p,V=x,Y=s.m,W=s.s,X=[null],K=1,J=0,$=r_[V];r:for(;;){if(r&&v(Y,1)){var Q=v(Y,3)+2,tt=Z(z,Q),te=Z(H,Q),ti=tt*te;if(!tP(tt,te,0,s,X))break;for(X=X[0],W.xc=Q,q=0;q<ti;++q){var tr=X[q]>>8&65535;X[q]=tr,tr>=K&&(K=tr+1)}}if(Y.h)break;for(U=0;5>U;++U){var to=rx[U];!U&&0<V&&(to+=1<<V),J<to&&(J=to)}var tn=a(K*$,c),ta=K,ts=a(ta,d);if(null==ts)var tl=null;else e(65536>=ta),tl=ts;var th=n(J);if(null==tl||null==th||null==tn){s.a=1;break}for(q=B=0;q<K;++q){var tu,tc=tl[q],tf=tc.G,td=tc.H,tp=0,tg=1,tm=0;for(U=0;5>U;++U){to=rx[U],tf[U]=tn,td[U]=B,!U&&0<V&&(to+=1<<V);o:{var ty,tx=to,tb=B,tw=0,t_=s.m,tS=v(t_,1);if(o(th,0,0,tx),tS){var tE=v(t_,1)+1,tA=v(t_,1),tM=v(t_,0==tA?1:8);th[tM]=1,2==tE&&(th[tM=v(t_,8)]=1);var tC=1}else{var tT=n(19),tL=v(t_,4)+4;if(19<tL){s.a=3;var tR=0;break o}for(ty=0;ty<tL;++ty)tT[rb[ty]]=v(t_,3);var tO=void 0,tk=void 0,tG=0,tZ=s.m,tF=8,tD=a(128,c);n:for(;u(tD,0,7,tT,19);){if(v(tZ,1)){var tj=2+2*v(tZ,3);if((tO=2+v(tZ,tj))>tx)break}else tO=tx;for(tk=0;tk<tx&&tO--;){A(tZ);var tq=tD[0+(127&_(tZ))];E(tZ,tZ.u+tq.g);var tU=tq.value;if(16>tU)th[tk++]=tU,0!=tU&&(tF=tU);else{var tB=16==tU,tz=tU-16,tH=ry[tz],tV=v(tZ,rm[tz])+tH;if(tk+tV>tx)break n;for(var tY=tB?tF:0;0<tV--;)th[tk++]=tY}}tG=1;break}tG||(s.a=3),tC=tG}(tC=tC&&!t_.h)&&(tw=u(tn,tb,8,th,tx)),tC&&0!=tw?tR=tw:(s.a=3,tR=0)}if(0==tR)break r;if(tg&&1==rv[U]&&(tg=0==tn[B].g),tp+=tn[B].g,B+=tR,3>=U){var tW,tX=th[0];for(tW=1;tW<to;++tW)th[tW]>tX&&(tX=th[tW]);tm+=tX}}if(tc.nd=tg,tc.Qb=0,tg&&(tc.qb=(tf[3][td[3]+0].value<<24|tf[1][td[1]+0].value<<16|tf[2][td[2]+0].value)>>>0,0==tp&&256>tf[0][td[0]+0].value&&(tc.Qb=1,tc.qb+=tf[0][td[0]+0].value<<8)),tc.jc=!tc.Qb&&6>tm,tc.jc)for(tu=0;tu<ix;++tu){var tK=tu,tJ=tc.pd[tK],t$=tc.G[0][tc.H[0]+tK];256<=t$.value?(tJ.g=t$.g+256,tJ.value=t$.value):(tJ.g=0,tJ.value=0,tK>>=tv(t$,8,tJ),tK>>=tv(tc.G[1][tc.H[1]+tK],16,tJ),tK>>=tv(tc.G[2][tc.H[2]+tK],0,tJ),tv(tc.G[3][tc.H[3]+tK],24,tJ))}}W.vc=X,W.Wb=K,W.Ya=tl,W.yc=tn,j=1;break i}j=0}if(!(h=j)){s.a=3;break}if(0<x){if(m.ua=1<<x,!R(m.Wa,x)){s.a=1,h=0;break}}else m.ua=0;var tQ=f,t0=p,t1=s.s,t2=t1.xc;if(s.c=tQ,s.i=t0,t1.md=Z(tQ,t2),t1.wc=0==t2?-1:(1<<t2)-1,r){s.xb=rZ;break}if(null==(y=n(f*p))){s.a=1,h=0;break}h=(h=tN(s,y,0,f,p,p,null))&&!g.h;break}return h?(null!=l?l[0]=y:(e(null==y),e(r)),s.$=0,r||tI(m)):tI(m),h}function tC(t,i){var r=t.c*t.i;return e(t.c<=i),t.V=n(r+i+16*i),null==t.V?(t.Ta=null,t.Ua=0,t.a=1,0):(t.Ta=t.V,t.Ua=t.Ba+r+i,1)}function tT(t,i){var r=t.C,o=i-r,n=t.V,a=t.Ba+t.c*r;for(e(i<=t.l.o);0<o;){var s=16<o?16:o,l=t.l.ma,h=t.l.width,u=h*s,c=l.ca,f=l.tb+h*r,d=t.Ta,p=t.Ua;tw(t,s,n,a),i6(d,p,c,f,u),tE(l,r,r+s,c,f,h),o-=s,n+=s*t.c,r+=s}e(r==i),t.C=t.Ma=i}function tL(){this.ub=this.yd=this.td=this.Rb=0}function tR(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function tO(){this.Fb=this.Bb=this.Cb=0,this.Zb=n(4),this.Lb=n(4)}function tk(){var t;this.Yb=(function t(e,i,r){for(var o=r[i],n=0;n<o&&(e.push(r.length>i+1?[]:0),!(r.length<i+1));n++)t(e[n],i+1,r)}(t=[],0,[3,11]),t)}function tG(){this.jb=n(3),this.Wc=s([4,8],tk),this.Xc=s([4,17],tk)}function tZ(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new n(4),this.od=new n(4)}function tF(){this.ld=this.La=this.dd=this.tc=0}function tD(){this.Na=this.la=0}function tj(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function tq(){this.ad=n(384),this.Za=0,this.Ob=n(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function tU(){this.uc=this.M=this.Nb=0,this.wa=Array(new tF),this.Y=0,this.ya=Array(new tq),this.aa=0,this.l=new tV}function tB(){this.y=n(16),this.f=n(8),this.ea=n(8)}function tz(){this.cb=this.a=0,this.sc="",this.m=new b,this.Od=new tL,this.Kc=new tR,this.ed=new tZ,this.Qa=new tO,this.Ic=this.$c=this.Aa=0,this.D=new tU,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,b),this.ia=0,this.pb=a(4,tj),this.Pa=new tG,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new tB),this.Hd=0,this.rb=Array(new tD),this.sb=0,this.wa=Array(new tF),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new tq),this.L=this.aa=0,this.gd=s([4,2],tF),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function tH(t,e){return 0>t?0:t>e?e:t}function tV(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function tY(){var t=new tz;return null!=t&&(t.a=0,t.sc="OK",t.cb=0,t.Xb=0,rN||(rN=tJ)),t}function tW(t,e,i){return 0==t.a&&(t.a=e,t.sc=i,t.cb=0),0}function tX(t,e,i){return 3<=i&&157==t[e+0]&&1==t[e+1]&&42==t[e+2]}function tK(t,i){if(null==t)return 0;if(t.a=0,t.sc="OK",null==i)return tW(t,2,"null VP8Io passed to VP8GetHeaders()");var r=i.data,n=i.w,a=i.ha;if(4>a)return tW(t,7,"Truncated header.");var s=r[n+0]|r[n+1]<<8|r[n+2]<<16,l=t.Od;if(l.Rb=!(1&s),l.td=s>>1&7,l.yd=s>>4&1,l.ub=s>>5,3<l.td)return tW(t,3,"Incorrect keyframe parameters.");if(!l.yd)return tW(t,4,"Frame not displayable.");n+=3,a-=3;var h=t.Kc;if(l.Rb){if(7>a)return tW(t,7,"cannot parse picture header");if(!tX(r,n,a))return tW(t,3,"Bad code word");h.c=16383&(r[n+4]<<8|r[n+3]),h.Td=r[n+4]>>6,h.i=16383&(r[n+6]<<8|r[n+5]),h.Ud=r[n+6]>>6,n+=7,a-=7,t.za=h.c+15>>4,t.Ub=h.i+15>>4,i.width=h.c,i.height=h.i,i.Da=0,i.j=0,i.v=0,i.va=i.width,i.o=i.height,i.da=0,i.ib=i.width,i.hb=i.height,i.U=i.width,i.T=i.height,o((s=t.Pa).jb,0,255,s.jb.length),e(null!=(s=t.Qa)),s.Cb=0,s.Bb=0,s.Fb=1,o(s.Zb,0,0,s.Zb.length),o(s.Lb,0,0,s.Lb)}if(l.ub>a)return tW(t,7,"bad partition length");p(s=t.m,r,n,l.ub),n+=l.ub,a-=l.ub,l.Rb&&(h.Ld=I(s),h.Kd=I(s)),h=t.Qa;var u,c=t.Pa;if(e(null!=s),e(null!=h),h.Cb=I(s),h.Cb){if(h.Bb=I(s),I(s)){for(h.Fb=I(s),u=0;4>u;++u)h.Zb[u]=I(s)?m(s,7):0;for(u=0;4>u;++u)h.Lb[u]=I(s)?m(s,6):0}if(h.Bb)for(u=0;3>u;++u)c.jb[u]=I(s)?g(s,8):255}else h.Bb=0;if(s.Ka)return tW(t,3,"cannot parse segment header");if((h=t.ed).zd=I(s),h.Tb=g(s,6),h.wb=g(s,3),h.Pc=I(s),h.Pc&&I(s)){for(c=0;4>c;++c)I(s)&&(h.vd[c]=m(s,6));for(c=0;4>c;++c)I(s)&&(h.od[c]=m(s,6))}if(t.L=0==h.Tb?0:h.zd?1:2,s.Ka)return tW(t,3,"cannot parse filter header");var f=a;if(a=u=n,n=u+f,h=f,t.Xb=(1<<g(t.m,2))-1,f<3*(c=t.Xb))r=7;else{for(u+=3*c,h-=3*c,f=0;f<c;++f){var d=r[a+0]|r[a+1]<<8|r[a+2]<<16;d>h&&(d=h),p(t.Jc[+f],r,u,d),u+=d,h-=d,a+=3}p(t.Jc[+c],r,u,h),r=u<n?0:5}if(0!=r)return tW(t,r,"cannot parse partitions");for(r=g(u=t.m,7),a=I(u)?m(u,4):0,n=I(u)?m(u,4):0,h=I(u)?m(u,4):0,c=I(u)?m(u,4):0,u=I(u)?m(u,4):0,f=t.Qa,d=0;4>d;++d){if(f.Cb){var y=f.Zb[d];f.Fb||(y+=r)}else{if(0<d){t.pb[d]=t.pb[0];continue}y=r}var x=t.pb[d];x.Sc[0]=rE[tH(y+a,127)],x.Sc[1]=rA[tH(y+0,127)],x.Eb[0]=2*rE[tH(y+n,127)],x.Eb[1]=101581*rA[tH(y+h,127)]>>16,8>x.Eb[1]&&(x.Eb[1]=8),x.Qc[0]=rE[tH(y+c,117)],x.Qc[1]=rA[tH(y+u,127)],x.lc=y+u}if(!l.Rb)return tW(t,4,"Not a key frame.");for(I(s),l=t.Pa,r=0;4>r;++r){for(a=0;8>a;++a)for(n=0;3>n;++n)for(h=0;11>h;++h)c=M(s,rL[r][a][n][h])?g(s,8):rC[r][a][n][h],l.Wc[r][a].Yb[n][h]=c;for(a=0;17>a;++a)l.Xc[r][a]=l.Wc[r][rR[a]]}return t.kc=I(s),t.kc&&(t.Bd=g(s,8)),t.cb=1}function tJ(t,e,i,r,o,n,a){var s=e[o].Yb[i];for(i=0;16>o;++o){if(!M(t,s[i+0]))return o;for(;!M(t,s[i+1]);)if(s=e[++o].Yb[0],i=0,16==o)return 16;var l=e[o+1].Yb;if(M(t,s[i+2])){var h=t,u=0;if(M(h,(f=s)[(c=i)+3])){if(M(h,f[c+6])){for(s=0,c=2*(u=M(h,f[c+8]))+(f=M(h,f[c+9+u])),u=0,f=rI[c];f[s];++s)u+=u+M(h,f[s]);u+=3+(8<<c)}else u=M(h,f[c+7])?7+2*M(h,165)+M(h,145):5+M(h,159)}else u=M(h,f[c+4])?3+M(h,f[c+5]):2;s=l[2]}else u=1,s=l[1];l=a+rM[o],0>(h=t).b&&N(h);var c,f=h.b,d=(c=h.Ca>>1)-(h.I>>f)>>31;--h.b,h.Ca+=d,h.Ca|=1,h.I-=(c+1&d)<<f,n[l]=((u^d)-d)*r[(0<o)+0]}return 16}function t$(t){var e=t.rb[t.sb-1];e.la=0,e.Na=0,o(t.zc,0,0,t.zc.length),t.ja=0}function tQ(t,e,i,r,o){o=t[e+i+32*r]+(o>>3),t[e+i+32*r]=-256&o?0>o?0:255:o}function t0(t,e,i,r,o,n){tQ(t,e,0,i,r+o),tQ(t,e,1,i,r+n),tQ(t,e,2,i,r-n),tQ(t,e,3,i,r-o)}function t1(t){return(20091*t>>16)+t}function t2(t,e,i,r){var o,a=0,s=n(16);for(o=0;4>o;++o){var l=t[e+0]+t[e+8],h=t[e+0]-t[e+8],u=(35468*t[e+4]>>16)-t1(t[e+12]),c=t1(t[e+4])+(35468*t[e+12]>>16);s[a+0]=l+c,s[a+1]=h+u,s[a+2]=h-u,s[a+3]=l-c,a+=4,e++}for(o=a=0;4>o;++o)l=(t=s[a+0]+4)+s[a+8],h=t-s[a+8],u=(35468*s[a+4]>>16)-t1(s[a+12]),tQ(i,r,0,0,l+(c=t1(s[a+4])+(35468*s[a+12]>>16))),tQ(i,r,1,0,h+u),tQ(i,r,2,0,h-u),tQ(i,r,3,0,l-c),a++,r+=32}function t5(t,e,i,r){var o=t[e+0]+4,n=35468*t[e+4]>>16,a=t1(t[e+4]),s=35468*t[e+1]>>16;t0(i,r,0,o+a,t=t1(t[e+1]),s),t0(i,r,1,o+n,t,s),t0(i,r,2,o-n,t,s),t0(i,r,3,o-a,t,s)}function t4(t,e,i,r,o){t2(t,e,i,r),o&&t2(t,e+16,i,r+4)}function t6(t,e,i,r){iD(t,e+0,i,r,1),iD(t,e+32,i,r+128,1)}function t3(t,e,i,r){var o;for(t=t[e+0]+4,o=0;4>o;++o)for(e=0;4>e;++e)tQ(i,r,e,o,t)}function t8(t,e,i,r){t[e+0]&&iU(t,e+0,i,r),t[e+16]&&iU(t,e+16,i,r+4),t[e+32]&&iU(t,e+32,i,r+128),t[e+48]&&iU(t,e+48,i,r+128+4)}function t7(t,e,i,r){var o,a=n(16);for(o=0;4>o;++o){var s=t[e+0+o]+t[e+12+o],l=t[e+4+o]+t[e+8+o],h=t[e+4+o]-t[e+8+o],u=t[e+0+o]-t[e+12+o];a[0+o]=s+l,a[8+o]=s-l,a[4+o]=u+h,a[12+o]=u-h}for(o=0;4>o;++o)s=(t=a[0+4*o]+3)+a[3+4*o],l=a[1+4*o]+a[2+4*o],h=a[1+4*o]-a[2+4*o],u=t-a[3+4*o],i[r+0]=s+l>>3,i[r+16]=u+h>>3,i[r+32]=s-l>>3,i[r+48]=u-h>>3,r+=64}function t9(t,e,i){var r,o=e-32,n=255-t[o-1];for(r=0;r<i;++r){var a,s=n+t[e-1];for(a=0;a<i;++a)t[e+a]=rr[s+t[o+a]];e+=32}}function et(t,e){t9(t,e,4)}function ee(t,e){t9(t,e,8)}function ei(t,e){t9(t,e,16)}function er(t,e){var i;for(i=0;16>i;++i)r(t,e+32*i,t,e-32,16)}function eo(t,e){var i;for(i=16;0<i;--i)o(t,e,t[e-1],16),e+=32}function en(t,e,i){var r;for(r=0;16>r;++r)o(e,i+32*r,t,16)}function ea(t,e){var i,r=16;for(i=0;16>i;++i)r+=t[e-1+32*i]+t[e+i-32];en(r>>5,t,e)}function es(t,e){var i,r=8;for(i=0;16>i;++i)r+=t[e-1+32*i];en(r>>4,t,e)}function el(t,e){var i,r=8;for(i=0;16>i;++i)r+=t[e+i-32];en(r>>4,t,e)}function eh(t,e){en(128,t,e)}function eu(t,e,i){return t+2*e+i+2>>2}function ec(t,e){var i,o=e-32;for(i=0,o=new Uint8Array([eu(t[o-1],t[o+0],t[o+1]),eu(t[o+0],t[o+1],t[o+2]),eu(t[o+1],t[o+2],t[o+3]),eu(t[o+2],t[o+3],t[o+4])]);4>i;++i)r(t,e+32*i,o,0,o.length)}function ef(t,e){var i=t[e-1],r=t[e-1+32],o=t[e-1+64],n=t[e-1+96];P(t,e+0,16843009*eu(t[e-1-32],i,r)),P(t,e+32,16843009*eu(i,r,o)),P(t,e+64,16843009*eu(r,o,n)),P(t,e+96,16843009*eu(o,n,n))}function ed(t,e){var i,r=4;for(i=0;4>i;++i)r+=t[e+i-32]+t[e-1+32*i];for(r>>=3,i=0;4>i;++i)o(t,e+32*i,r,4)}function ep(t,e){var i=t[e-1+0],r=t[e-1+32],o=t[e-1+64],n=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],h=t[e+3-32];t[e+0+96]=eu(r,o,t[e-1+96]),t[e+1+96]=t[e+0+64]=eu(i,r,o),t[e+2+96]=t[e+1+64]=t[e+0+32]=eu(n,i,r),t[e+3+96]=t[e+2+64]=t[e+1+32]=t[e+0+0]=eu(a,n,i),t[e+3+64]=t[e+2+32]=t[e+1+0]=eu(s,a,n),t[e+3+32]=t[e+2+0]=eu(l,s,a),t[e+3+0]=eu(h,l,s)}function eg(t,e){var i=t[e+1-32],r=t[e+2-32],o=t[e+3-32],n=t[e+4-32],a=t[e+5-32],s=t[e+6-32],l=t[e+7-32];t[e+0+0]=eu(t[e+0-32],i,r),t[e+1+0]=t[e+0+32]=eu(i,r,o),t[e+2+0]=t[e+1+32]=t[e+0+64]=eu(r,o,n),t[e+3+0]=t[e+2+32]=t[e+1+64]=t[e+0+96]=eu(o,n,a),t[e+3+32]=t[e+2+64]=t[e+1+96]=eu(n,a,s),t[e+3+64]=t[e+2+96]=eu(a,s,l),t[e+3+96]=eu(s,l,l)}function em(t,e){var i=t[e-1+0],r=t[e-1+32],o=t[e-1+64],n=t[e-1-32],a=t[e+0-32],s=t[e+1-32],l=t[e+2-32],h=t[e+3-32];t[e+0+0]=t[e+1+64]=n+a+1>>1,t[e+1+0]=t[e+2+64]=a+s+1>>1,t[e+2+0]=t[e+3+64]=s+l+1>>1,t[e+3+0]=l+h+1>>1,t[e+0+96]=eu(o,r,i),t[e+0+64]=eu(r,i,n),t[e+0+32]=t[e+1+96]=eu(i,n,a),t[e+1+32]=t[e+2+96]=eu(n,a,s),t[e+2+32]=t[e+3+96]=eu(a,s,l),t[e+3+32]=eu(s,l,h)}function ey(t,e){var i=t[e+0-32],r=t[e+1-32],o=t[e+2-32],n=t[e+3-32],a=t[e+4-32],s=t[e+5-32],l=t[e+6-32],h=t[e+7-32];t[e+0+0]=i+r+1>>1,t[e+1+0]=t[e+0+64]=r+o+1>>1,t[e+2+0]=t[e+1+64]=o+n+1>>1,t[e+3+0]=t[e+2+64]=n+a+1>>1,t[e+0+32]=eu(i,r,o),t[e+1+32]=t[e+0+96]=eu(r,o,n),t[e+2+32]=t[e+1+96]=eu(o,n,a),t[e+3+32]=t[e+2+96]=eu(n,a,s),t[e+3+64]=eu(a,s,l),t[e+3+96]=eu(s,l,h)}function ex(t,e){var i=t[e-1+0],r=t[e-1+32],o=t[e-1+64],n=t[e-1+96];t[e+0+0]=i+r+1>>1,t[e+2+0]=t[e+0+32]=r+o+1>>1,t[e+2+32]=t[e+0+64]=o+n+1>>1,t[e+1+0]=eu(i,r,o),t[e+3+0]=t[e+1+32]=eu(r,o,n),t[e+3+32]=t[e+1+64]=eu(o,n,n),t[e+3+64]=t[e+2+64]=t[e+0+96]=t[e+1+96]=t[e+2+96]=t[e+3+96]=n}function ev(t,e){var i=t[e-1+0],r=t[e-1+32],o=t[e-1+64],n=t[e-1+96],a=t[e-1-32],s=t[e+0-32],l=t[e+1-32],h=t[e+2-32];t[e+0+0]=t[e+2+32]=i+a+1>>1,t[e+0+32]=t[e+2+64]=r+i+1>>1,t[e+0+64]=t[e+2+96]=o+r+1>>1,t[e+0+96]=n+o+1>>1,t[e+3+0]=eu(s,l,h),t[e+2+0]=eu(a,s,l),t[e+1+0]=t[e+3+32]=eu(i,a,s),t[e+1+32]=t[e+3+64]=eu(r,i,a),t[e+1+64]=t[e+3+96]=eu(o,r,i),t[e+1+96]=eu(n,o,r)}function eb(t,e){var i;for(i=0;8>i;++i)r(t,e+32*i,t,e-32,8)}function ew(t,e){var i;for(i=0;8>i;++i)o(t,e,t[e-1],8),e+=32}function e_(t,e,i){var r;for(r=0;8>r;++r)o(e,i+32*r,t,8)}function eS(t,e){var i,r=8;for(i=0;8>i;++i)r+=t[e+i-32]+t[e-1+32*i];e_(r>>4,t,e)}function eE(t,e){var i,r=4;for(i=0;8>i;++i)r+=t[e+i-32];e_(r>>3,t,e)}function eA(t,e){var i,r=4;for(i=0;8>i;++i)r+=t[e-1+32*i];e_(r>>3,t,e)}function eN(t,e){e_(128,t,e)}function eI(t,e,i){var r=t[e-i],o=t[e+0],n=3*(o-r)+re[1020+t[e-2*i]-t[e+i]],a=ri[112+(n+4>>3)];t[e-i]=rr[255+r+ri[112+(n+3>>3)]],t[e+0]=rr[255+o-a]}function eM(t,e,i,r){var o=t[e+0],n=t[e+i];return ro[255+t[e-2*i]-t[e-i]]>r||ro[255+n-o]>r}function eP(t,e,i,r){return 4*ro[255+t[e-i]-t[e+0]]+ro[255+t[e-2*i]-t[e+i]]<=r}function eC(t,e,i,r,o){var n=t[e-3*i],a=t[e-2*i],s=t[e-i],l=t[e+0],h=t[e+i],u=t[e+2*i],c=t[e+3*i];return 4*ro[255+s-l]+ro[255+a-h]>r?0:ro[255+t[e-4*i]-n]<=o&&ro[255+n-a]<=o&&ro[255+a-s]<=o&&ro[255+c-u]<=o&&ro[255+u-h]<=o&&ro[255+h-l]<=o}function eT(t,e,i,r){var o=2*r+1;for(r=0;16>r;++r)eP(t,e+r,i,o)&&eI(t,e+r,i)}function eL(t,e,i,r){var o=2*r+1;for(r=0;16>r;++r)eP(t,e+r*i,1,o)&&eI(t,e+r*i,1)}function eR(t,e,i,r){var o;for(o=3;0<o;--o)eT(t,e+=4*i,i,r)}function eO(t,e,i,r){var o;for(o=3;0<o;--o)eL(t,e+=4,i,r)}function ek(t,e,i,r,o,n,a,s){for(n=2*n+1;0<o--;){if(eC(t,e,i,n,a)){if(eM(t,e,i,s))eI(t,e,i);else{var l=e,h=t[l-2*i],u=t[l-i],c=t[l+0],f=t[l+i],d=t[l+2*i],p=27*(m=re[1020+3*(c-u)+re[1020+h-f]])+63>>7,g=18*m+63>>7,m=9*m+63>>7;t[l-3*i]=rr[255+t[l-3*i]+m],t[l-2*i]=rr[255+h+g],t[l-i]=rr[255+u+p],t[l+0]=rr[255+c-p],t[l+i]=rr[255+f-g],t[l+2*i]=rr[255+d-m]}}e+=r}}function eG(t,e,i,r,o,n,a,s){for(n=2*n+1;0<o--;){if(eC(t,e,i,n,a)){if(eM(t,e,i,s))eI(t,e,i);else{var l=e,h=t[l-i],u=t[l+0],c=t[l+i],f=ri[112+((d=3*(u-h))+4>>3)],d=ri[112+(d+3>>3)],p=f+1>>1;t[l-2*i]=rr[255+t[l-2*i]+p],t[l-i]=rr[255+h+d],t[l+0]=rr[255+u-f],t[l+i]=rr[255+c-p]}}e+=r}}function eZ(t,e,i,r,o,n){ek(t,e,i,1,16,r,o,n)}function eF(t,e,i,r,o,n){ek(t,e,1,i,16,r,o,n)}function eD(t,e,i,r,o,n){var a;for(a=3;0<a;--a)eG(t,e+=4*i,i,1,16,r,o,n)}function ej(t,e,i,r,o,n){var a;for(a=3;0<a;--a)eG(t,e+=4,1,i,16,r,o,n)}function eq(t,e,i,r,o,n,a,s){ek(t,e,o,1,8,n,a,s),ek(i,r,o,1,8,n,a,s)}function eU(t,e,i,r,o,n,a,s){ek(t,e,1,o,8,n,a,s),ek(i,r,1,o,8,n,a,s)}function eB(t,e,i,r,o,n,a,s){eG(t,e+4*o,o,1,8,n,a,s),eG(i,r+4*o,o,1,8,n,a,s)}function ez(t,e,i,r,o,n,a,s){eG(t,e+4,1,o,8,n,a,s),eG(i,r+4,1,o,8,n,a,s)}function eH(){this.ba=new ta,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new tl,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function eV(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function eY(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function eW(){this.ua=0,this.Wa=new k,this.vb=new k,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new d,this.yc=new c}function eX(){this.xb=this.a=0,this.l=new tV,this.ca=new ta,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new w,this.Pb=0,this.wd=new w,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new eW,this.ab=0,this.gc=a(4,eY),this.Oc=0}function eK(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new tV,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function eJ(t,e,i,r,o,n,a){for(t=null==t?0:t[e+0],e=0;e<a;++e)o[n+e]=t+i[r+e]&255,t=o[n+e]}function e$(t,e,i,r,o,n,a){var s;if(null==t)eJ(null,null,i,r,o,n,a);else for(s=0;s<a;++s)o[n+s]=t[e+s]+i[r+s]&255}function eQ(t,e,i,r,o,n,a){if(null==t)eJ(null,null,i,r,o,n,a);else{var s,l=t[e+0],h=l,u=l;for(s=0;s<a;++s)h=u+(l=t[e+s])-h,u=i[r+s]+(-256&h?0>h?0:255:h)&255,h=l,o[n+s]=u}}function e0(t,e,i,r,o,n){for(;0<o--;){var a,s=e+(i?1:0),l=e+(i?0:3);for(a=0;a<r;++a){var h=t[l+4*a];255!=h&&(h*=32897,t[s+4*a+0]=t[s+4*a+0]*h>>23,t[s+4*a+1]=t[s+4*a+1]*h>>23,t[s+4*a+2]=t[s+4*a+2]*h>>23)}e+=n}}function e1(t,e,i,r,o){for(;0<r--;){var n;for(n=0;n<i;++n){var a=t[e+2*n+0],s=15&(h=t[e+2*n+1]),l=4369*s,h=(240&h|h>>4)*l>>16;t[e+2*n+0]=(240&a|a>>4)*l>>16&240|(15&a|a<<4)*l>>16>>4&15,t[e+2*n+1]=240&h|s}e+=o}}function e2(t,e,i,r,o,n,a,s){var l,h,u=255;for(h=0;h<o;++h){for(l=0;l<r;++l){var c=t[e+l];n[a+4*l]=c,u&=c}e+=i,a+=s}return 255!=u}function e5(t,e,i,r,o){var n;for(n=0;n<o;++n)i[r+n]=t[e+n]>>8}function e4(){i2=e0,i5=e1,i4=e2,i6=e5}function e6(i,r,o){t[i]=function(t,i,n,a,s,l,h,u,c,f,d,p,g,m,y,x,v){var b,w=v-1>>1,_=s[l+0]|h[u+0]<<16,S=c[f+0]|d[p+0]<<16;e(null!=t);var E=3*_+S+131074>>2;for(r(t[i+0],255&E,E>>16,g,m),null!=n&&(E=3*S+_+131074>>2,r(n[a+0],255&E,E>>16,y,x)),b=1;b<=w;++b){var A=s[l+b]|h[u+b]<<16,N=c[f+b]|d[p+b]<<16,I=_+A+S+N+524296,M=I+2*(A+S)>>3;E=M+_>>1,_=(I=I+2*(_+N)>>3)+A>>1,r(t[i+2*b-1],255&E,E>>16,g,m+(2*b-1)*o),r(t[i+2*b-0],255&_,_>>16,g,m+(2*b-0)*o),null!=n&&(E=I+S>>1,_=M+N>>1,r(n[a+2*b-1],255&E,E>>16,y,x+(2*b-1)*o),r(n[a+2*b+0],255&_,_>>16,y,x+(2*b+0)*o)),_=A,S=N}1&v||(E=3*_+S+131074>>2,r(t[i+v-1],255&E,E>>16,g,m+(v-1)*o),null!=n&&(E=3*S+_+131074>>2,r(n[a+v-1],255&E,E>>16,y,x+(v-1)*o)))}}function e3(){rj[rn]=rq,rj[ra]=rB,rj[rs]=rU,rj[rl]=rz,rj[rh]=rH,rj[ru]=rV,rj[rc]=rY,rj[rf]=rB,rj[rd]=rz,rj[rp]=rH,rj[rg]=rV}function e8(t){return t&~rQ?0>t?0:255:t>>r$}function e7(t,e){return e8((19077*t>>8)+(26149*e>>8)-14234)}function e9(t,e,i){return e8((19077*t>>8)-(6419*e>>8)-(13320*i>>8)+8708)}function it(t,e){return e8((19077*t>>8)+(33050*e>>8)-17685)}function ie(t,e,i,r,o){r[o+0]=e7(t,i),r[o+1]=e9(t,e,i),r[o+2]=it(t,e)}function ii(t,e,i,r,o){r[o+0]=it(t,e),r[o+1]=e9(t,e,i),r[o+2]=e7(t,i)}function ir(t,e,i,r,o){var n=e9(t,e,i);e=n<<3&224|it(t,e)>>3,r[o+0]=248&e7(t,i)|n>>5,r[o+1]=e}function io(t,e,i,r,o){var n=240&it(t,e)|15;r[o+0]=240&e7(t,i)|e9(t,e,i)>>4,r[o+1]=n}function ia(t,e,i,r,o){r[o+0]=255,ie(t,e,i,r,o+1)}function is(t,e,i,r,o){ii(t,e,i,r,o),r[o+3]=255}function il(t,e,i,r,o){ie(t,e,i,r,o),r[o+3]=255}function tH(t,e){return 0>t?0:t>e?e:t}function ih(e,i,r){t[e]=function(t,e,o,n,a,s,l,h,u){for(var c=h+(-2&u)*r;h!=c;)i(t[e+0],o[n+0],a[s+0],l,h),i(t[e+1],o[n+0],a[s+0],l,h+r),e+=2,++n,++s,h+=2*r;1&u&&i(t[e+0],o[n+0],a[s+0],l,h)}}function iu(t,e,i){return 0==i?0==t?0==e?6:5:0==e?4:0:i}function ic(t,e,i,r,o){switch(t>>>30){case 3:iD(e,i,r,o,0);break;case 2:ij(e,i,r,o);break;case 1:iU(e,i,r,o)}}function id(t,e){var i,n,a=e.M,s=e.Nb,l=t.oc,h=t.pc+40,u=t.oc,c=t.pc+584,f=t.oc,d=t.pc+600;for(i=0;16>i;++i)l[h+32*i-1]=129;for(i=0;8>i;++i)u[c+32*i-1]=129,f[d+32*i-1]=129;for(0<a?l[h-1-32]=u[c-1-32]=f[d-1-32]=129:(o(l,h-32-1,127,21),o(u,c-32-1,127,9),o(f,d-32-1,127,9)),n=0;n<t.za;++n){var p=e.ya[e.aa+n];if(0<n){for(i=-1;16>i;++i)r(l,h+32*i-4,l,h+32*i+12,4);for(i=-1;8>i;++i)r(u,c+32*i-4,u,c+32*i+4,4),r(f,d+32*i-4,f,d+32*i+4,4)}var g=t.Gd,m=t.Hd+n,y=p.ad,x=p.Hc;if(0<a&&(r(l,h-32,g[m].y,0,16),r(u,c-32,g[m].f,0,8),r(f,d-32,g[m].ea,0,8)),p.Za){var v=l,b=h-32+16;for(0<a&&(n>=t.za-1?o(v,b,g[m].y[15],4):r(v,b,g[m+1].y,0,4)),i=0;4>i;i++)v[b+128+i]=v[b+256+i]=v[b+384+i]=v[b+0+i];for(i=0;16>i;++i,x<<=2)v=l,b=h+r8[i],rk[p.Ob[i]](v,b),ic(x,y,16*+i,v,b)}else if(rO[v=iu(n,a,p.Ob[0])](l,h),0!=x)for(i=0;16>i;++i,x<<=2)ic(x,y,16*+i,l,h+r8[i]);for(i=p.Gc,rG[v=iu(n,a,p.Dd)](u,c),rG[v](f,d),x=y,v=u,b=c,255&(p=i>>0)&&(170&p?iq(x,256,v,b):iB(x,256,v,b)),p=f,x=d,255&(i>>=8)&&(170&i?iq(y,320,p,x):iB(y,320,p,x)),a<t.Ub-1&&(r(g[m].y,0,l,h+480,16),r(g[m].f,0,u,c+224,8),r(g[m].ea,0,f,d+224,8)),i=8*s*t.B,g=t.sa,m=t.ta+16*n+16*s*t.R,y=t.qa,p=t.ra+8*n+i,x=t.Ha,v=t.Ia+8*n+i,i=0;16>i;++i)r(g,m+i*t.R,l,h+32*i,16);for(i=0;8>i;++i)r(y,p+i*t.B,u,c+32*i,8),r(x,v+i*t.B,f,d+32*i,8)}}function ip(t,r,o,n,a,s,l,h,u){var c=[0],f=[0],d=0,p=null!=u?u.kd:0,g=null!=u?u:new eV;if(null==t||12>o)return 7;g.data=t,g.w=r,g.ha=o,r=[r],o=[o],g.gb=[g.gb];e:{var m=r,x=o,v=g.gb;if(e(null!=t),e(null!=x),e(null!=v),v[0]=0,12<=x[0]&&!i(t,m[0],"RIFF")){if(i(t,m[0]+8,"WEBP")){v=3;break e}var b=L(t,m[0]+4);if(12>b||4294967286<b){v=3;break e}if(p&&b>x[0]-8){v=7;break e}v[0]=b,m[0]+=12,x[0]-=12}v=0}if(0!=v)return v;for(b=0<g.gb[0],o=o[0];;){e:{var _=t;x=r,v=o;var S=c,E=f,A=m=[0];if((M=d=[d])[0]=0,8>v[0])v=7;else{if(!i(_,x[0],"VP8X")){if(10!=L(_,x[0]+4)){v=3;break e}if(18>v[0]){v=7;break e}var N=L(_,x[0]+8),I=1+T(_,x[0]+12);if(2147483648<=I*(_=1+T(_,x[0]+15))){v=3;break e}null!=A&&(A[0]=N),null!=S&&(S[0]=I),null!=E&&(E[0]=_),x[0]+=18,v[0]-=18,M[0]=1}v=0}}if(d=d[0],m=m[0],0!=v)return v;if(x=!!(2&m),!b&&d)return 3;if(null!=s&&(s[0]=!!(16&m)),null!=l&&(l[0]=x),null!=h&&(h[0]=0),l=0,m=0,d&&x&&null==u){v=0;break}if(4>o){v=7;break}if(b&&d||!b&&!d&&!i(t,r[0],"ALPH")){o=[o],g.na=[g.na],g.P=[g.P],g.Sa=[g.Sa];e:{N=t,v=r,b=o;var M=g.gb;S=g.na,E=g.P,A=g.Sa,I=22,e(null!=N),e(null!=b),_=v[0];var P=b[0];for(e(null!=S),e(null!=A),S[0]=null,E[0]=null,A[0]=0;;){if(v[0]=_,b[0]=P,8>P){v=7;break e}var C=L(N,_+4);if(4294967286<C){v=3;break e}var R=8+C+1&-2;if(I+=R,0<M&&I>M){v=3;break e}if(!i(N,_,"VP8 ")||!i(N,_,"VP8L")){v=0;break e}if(P[0]<R){v=7;break e}i(N,_,"ALPH")||(S[0]=N,E[0]=_+8,A[0]=C),_+=R,P-=R}}if(o=o[0],g.na=g.na[0],g.P=g.P[0],g.Sa=g.Sa[0],0!=v)break}o=[o],g.Ja=[g.Ja],g.xa=[g.xa];e:if(M=t,v=r,b=o,S=g.gb[0],E=g.Ja,A=g.xa,_=!i(M,N=v[0],"VP8 "),I=!i(M,N,"VP8L"),e(null!=M),e(null!=b),e(null!=E),e(null!=A),8>b[0])v=7;else{if(_||I){if(M=L(M,N+4),12<=S&&M>S-12){v=3;break e}if(p&&M>b[0]-8){v=7;break e}E[0]=M,v[0]+=8,b[0]-=8,A[0]=I}else A[0]=5<=b[0]&&47==M[N+0]&&!(M[N+4]>>5),E[0]=b[0];v=0}if(o=o[0],g.Ja=g.Ja[0],g.xa=g.xa[0],r=r[0],0!=v)break;if(4294967286<g.Ja)return 3;if(null==h||x||(h[0]=g.xa?2:1),l=[l],m=[m],g.xa){if(5>o){v=7;break}h=l,p=m,x=s,null==t||5>o?t=0:5<=o&&47==t[r+0]&&!(t[r+4]>>5)?(b=[0],M=[0],S=[0],y(E=new w,t,r,o),tg(E,b,M,S)?(null!=h&&(h[0]=b[0]),null!=p&&(p[0]=M[0]),null!=x&&(x[0]=S[0]),t=1):t=0):t=0}else{if(10>o){v=7;break}h=m,null==t||10>o||!tX(t,r+3,o-3)?t=0:(p=t[r+0]|t[r+1]<<8|t[r+2]<<16,x=16383&(t[r+7]<<8|t[r+6]),t=16383&(t[r+9]<<8|t[r+8]),1&p||3<(p>>1&7)||!(p>>4&1)||p>>5>=g.Ja||!x||!t?t=0:(l&&(l[0]=x),h&&(h[0]=t),t=1))}if(!t||(l=l[0],m=m[0],d&&(0!=l||0!=m)))return 3;null!=u&&(u[0]=g,u.offset=r-u.w,e(4294967286>r-u.w),e(u.offset==u.ha-o));break}return 0==v||7==v&&d&&null==u?(null!=s&&(s[0]|=null!=g.na&&0<g.na.length),null!=n&&(n[0]=l),null!=a&&(a[0]=m),0):v}function ig(t,e,i){var r=e.width,o=e.height,n=0,a=0,s=r,l=o;if(e.Da=null!=t&&0<t.Da,e.Da&&(s=t.cd,l=t.bd,n=t.v,a=t.j,11>i||(n&=-2,a&=-2),0>n||0>a||0>=s||0>=l||n+s>r||a+l>o))return 0;if(e.v=n,e.j=a,e.va=n+s,e.o=a+l,e.U=s,e.T=l,e.da=null!=t&&0<t.da,e.da){if(!G(s,l,i=[t.ib],n=[t.hb]))return 0;e.ib=i[0],e.hb=n[0]}return e.ob=null!=t&&t.ob,e.Kb=null==t||!t.Sd,e.da&&(e.ob=e.ib<3*r/4&&e.hb<3*o/4,e.Kb=0),1}function im(t){if(null==t)return 2;if(11>t.S){var e=t.f.RGBA;e.fb+=(t.height-1)*e.A,e.A=-e.A}else e=t.f.kb,t=t.height,e.O+=(t-1)*e.fa,e.fa=-e.fa,e.N+=(t-1>>1)*e.Ab,e.Ab=-e.Ab,e.W+=(t-1>>1)*e.Db,e.Db=-e.Db,null!=e.F&&(e.J+=(t-1)*e.lb,e.lb=-e.lb);return 0}function iy(t,e,i,r){if(null==r||0>=t||0>=e)return 2;if(null!=i){if(i.Da){var o=i.cd,a=i.bd,s=-2&i.v,l=-2&i.j;if(0>s||0>l||0>=o||0>=a||s+o>t||l+a>e)return 2;t=o,e=a}if(i.da){if(!G(t,e,o=[i.ib],a=[i.hb]))return 2;t=o[0],e=a[0]}}r.width=t,r.height=e;e:{var h=r.width,u=r.height;if(t=r.S,0>=h||0>=u||!(t>=rn&&13>t))t=2;else{if(0>=r.Rd&&null==r.sd){s=a=o=e=0;var c=(l=h*ot[t])*u;if(11>t||(a=(u+1)/2*(e=(h+1)/2),12==t&&(s=(o=h)*u)),null==(u=n(c+2*a+s))){t=1;break e}r.sd=u,11>t?((h=r.f.RGBA).eb=u,h.fb=0,h.A=l,h.size=c):((h=r.f.kb).y=u,h.O=0,h.fa=l,h.Fd=c,h.f=u,h.N=0+c,h.Ab=e,h.Cd=a,h.ea=u,h.W=0+c+a,h.Db=e,h.Ed=a,12==t&&(h.F=u,h.J=0+c+2*a),h.Tc=s,h.lb=o)}if(e=1,o=r.S,a=r.width,s=r.height,o>=rn&&13>o){if(11>o)e&=(l=Math.abs((t=r.f.RGBA).A))*(s-1)+a<=t.size,e&=l>=a*ot[o],e&=null!=t.eb;else{t=r.f.kb,l=(a+1)/2,c=(s+1)/2,h=Math.abs(t.fa),u=Math.abs(t.Ab);var f=Math.abs(t.Db),d=Math.abs(t.lb),p=d*(s-1)+a;e&=h*(s-1)+a<=t.Fd,e&=u*(c-1)+l<=t.Cd,e=(e&=f*(c-1)+l<=t.Ed)&h>=a&u>=l&f>=l&null!=t.y&null!=t.f&null!=t.ea,12==o&&(e&=d>=a,e&=p<=t.Tc,e&=null!=t.F)}}else e=0;t=e?0:2}}return 0!=t||null!=i&&i.fd&&(t=im(r)),t}var ix=64,iv=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],ib=24,iw=32,i_=8,iS=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];D("Predictor0","PredictorAdd0"),t.Predictor0=function(){return 4278190080},t.Predictor1=function(t){return t},t.Predictor2=function(t,e,i){return e[i+0]},t.Predictor3=function(t,e,i){return e[i+1]},t.Predictor4=function(t,e,i){return e[i-1]},t.Predictor5=function(t,e,i){return q(q(t,e[i+1]),e[i+0])},t.Predictor6=function(t,e,i){return q(t,e[i-1])},t.Predictor7=function(t,e,i){return q(t,e[i+0])},t.Predictor8=function(t,e,i){return q(e[i-1],e[i+0])},t.Predictor9=function(t,e,i){return q(e[i+0],e[i+1])},t.Predictor10=function(t,e,i){return q(q(t,e[i-1]),q(e[i+0],e[i+1]))},t.Predictor11=function(t,e,i){var r=e[i+0];return 0>=z(r>>24&255,t>>24&255,(e=e[i-1])>>24&255)+z(r>>16&255,t>>16&255,e>>16&255)+z(r>>8&255,t>>8&255,e>>8&255)+z(255&r,255&t,255&e)?r:t},t.Predictor12=function(t,e,i){var r=e[i+0];return(U((t>>24&255)+(r>>24&255)-((e=e[i-1])>>24&255))<<24|U((t>>16&255)+(r>>16&255)-(e>>16&255))<<16|U((t>>8&255)+(r>>8&255)-(e>>8&255))<<8|U((255&t)+(255&r)-(255&e)))>>>0},t.Predictor13=function(t,e,i){var r=e[i-1];return(B((t=q(t,e[i+0]))>>24&255,r>>24&255)<<24|B(t>>16&255,r>>16&255)<<16|B(t>>8&255,r>>8&255)<<8|B(t>>0&255,r>>0&255))>>>0};var iE=t.PredictorAdd0;t.PredictorAdd1=H,D("Predictor2","PredictorAdd2"),D("Predictor3","PredictorAdd3"),D("Predictor4","PredictorAdd4"),D("Predictor5","PredictorAdd5"),D("Predictor6","PredictorAdd6"),D("Predictor7","PredictorAdd7"),D("Predictor8","PredictorAdd8"),D("Predictor9","PredictorAdd9"),D("Predictor10","PredictorAdd10"),D("Predictor11","PredictorAdd11"),D("Predictor12","PredictorAdd12"),D("Predictor13","PredictorAdd13");var iA=t.PredictorAdd2;X("ColorIndexInverseTransform","MapARGB","32b",function(t){return t>>8&255},function(t){return t}),X("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(t){return t},function(t){return t>>8&255});var iN,iI=t.ColorIndexInverseTransform,iM=t.MapARGB,iP=t.VP8LColorIndexInverseTransformAlpha,iC=t.MapAlpha,iT=t.VP8LPredictorsAdd=[];iT.length=16,(t.VP8LPredictors=[]).length=16,(t.VP8LPredictorsAdd_C=[]).length=16,(t.VP8LPredictors_C=[]).length=16;var iL,iR,iO,ik,iG,iZ,iF,iD,ij,iq,iU,iB,iz,iH,iV,iY,iW,iX,iK,iJ,i$,iQ,i0,i1,i2,i5,i4,i6,i3=n(511),i8=n(2041),i7=n(225),i9=n(767),rt=0,re=i8,ri=i7,rr=i9,ro=i3,rn=0,ra=1,rs=2,rl=3,rh=4,ru=5,rc=6,rf=7,rd=8,rp=9,rg=10,rm=[2,3,7],ry=[3,3,11],rx=[280,256,256,256,40],rv=[0,1,1,1,0],rb=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],rw=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],r_=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],rS=8,rE=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],rA=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],rN=null,rI=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],rM=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],rP=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rC=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],rT=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],rL=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],rR=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],rO=[],rk=[],rG=[],rZ=1,rF=2,rD=[],rj=[];e6("UpsampleRgbLinePair",ie,3),e6("UpsampleBgrLinePair",ii,3),e6("UpsampleRgbaLinePair",il,4),e6("UpsampleBgraLinePair",is,4),e6("UpsampleArgbLinePair",ia,4),e6("UpsampleRgba4444LinePair",io,2),e6("UpsampleRgb565LinePair",ir,2);var rq=t.UpsampleRgbLinePair,rU=t.UpsampleBgrLinePair,rB=t.UpsampleRgbaLinePair,rz=t.UpsampleBgraLinePair,rH=t.UpsampleArgbLinePair,rV=t.UpsampleRgba4444LinePair,rY=t.UpsampleRgb565LinePair,rW=16,rX=32768,rK=-227,rJ=482,r$=6,rQ=16383,r0=0,r1=n(256),r2=n(256),r5=n(256),r4=n(256),r6=n(rJ-rK),r3=n(rJ-rK);ih("YuvToRgbRow",ie,3),ih("YuvToBgrRow",ii,3),ih("YuvToRgbaRow",il,4),ih("YuvToBgraRow",is,4),ih("YuvToArgbRow",ia,4),ih("YuvToRgba4444Row",io,2),ih("YuvToRgb565Row",ir,2);var r8=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],r7=[0,2,8],r9=[8,7,6,4,4,2,2,2,1,1,1,1];this.WebPDecodeRGBA=function(t,i,s,l,h){var u=ra,c=new eH,f=new ta;c.ba=f,f.S=u,f.width=[f.width],f.height=[f.height];var d=f.width,p=f.height,g=new ts;if(null==g||null==t)var m=2;else e(null!=g),m=ip(t,i,s,g.width,g.height,g.Pd,g.Qd,g.format,null);if(0!=m?d=0:(null!=d&&(d[0]=g.width[0]),null!=p&&(p[0]=g.height[0]),d=1),d){f.width=f.width[0],f.height=f.height[0],null!=l&&(l[0]=f.width),null!=h&&(h[0]=f.height);e:{if(l=new tV,(h=new eV).data=t,h.w=i,h.ha=s,h.kd=1,i=[0],e(null!=h),(0==(t=ip(h.data,h.w,h.ha,null,null,null,i,null,h))||7==t)&&i[0]&&(t=4),0==(i=t)){if(e(null!=c),l.data=h.data,l.w=h.w+h.offset,l.ha=h.ha-h.offset,l.put=td,l.ac=tf,l.bc=tp,l.ma=c,h.xa){if(null==(t=tM())){c=1;break e}if(function(t,i){for(var r=[0],o=[0],n=[0];;){if(null==t)return 0;if(null==i)return t.a=2,0;if(t.l=i,t.a=0,y(t.m,i.data,i.w,i.ha),!tg(t.m,r,o,n)){t.a=3;break}if(t.xb=rF,i.width=r[0],i.height=o[0],!tP(r[0],o[0],1,t,null))break;return 1}return e(0!=t.a),0}(t,l)){if(l=0==(i=iy(l.width,l.height,c.Oa,c.ba))){i:{for(l=t;;){if(null==l){l=0;break i}if(e(null!=l.s.yc),e(null!=l.s.Ya),e(0<l.s.Wb),e(null!=(s=l.l)),e(null!=(h=s.ma)),0!=l.xb){if(l.ca=h.ba,l.tb=h.tb,e(null!=l.ca),!ig(h.Oa,s,rl)){l.a=2;break}if(!tC(l,s.width)||s.da)break;if((s.da||tr(l.ca.S))&&e4(),11>l.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),null!=l.ca.f.kb.F&&e4()),l.Pb&&0<l.s.ua&&null==l.s.vb.X&&!R(l.s.vb,l.s.Wa.Xa)){l.a=1;break}l.xb=0}if(!tN(l,l.V,l.Ba,l.c,l.i,s.o,t_))break;h.Dc=l.Ma,l=1;break i}e(0!=l.a),l=0}l=!l}l&&(i=t.a)}else i=t.a}else if((t=new tY).Fa=h.na,t.P=h.P,t.qc=h.Sa,tK(t,l)){if(0==(i=iy(l.width,l.height,c.Oa,c.ba))){if(t.Aa=0,s=c.Oa,e(null!=(h=t)),null!=s){if(0<(d=0>(d=s.Md)?0:100<d?255:255*d/100)){for(p=g=0;4>p;++p)12>(m=h.pb[p]).lc&&(m.ia=d*r9[0>m.lc?0:m.lc]>>3),g|=m.ia;g&&(alert("todo:VP8InitRandom"),h.ia=1)}h.Ga=s.Id,100<h.Ga?h.Ga=100:0>h.Ga&&(h.Ga=0)}(function(t,i){if(null==t)return 0;if(null==i)return tW(t,2,"NULL VP8Io parameter in VP8Decode().");if(!t.cb&&!tK(t,i))return 0;if(e(t.cb),null==i.ac||i.ac(i)){i.ob&&(t.L=0);var s=r7[t.L];if(2==t.L?(t.yb=0,t.zb=0):(t.yb=i.v-s>>4,t.zb=i.j-s>>4,0>t.yb&&(t.yb=0),0>t.zb&&(t.zb=0)),t.Va=i.o+15+s>>4,t.Hb=i.va+15+s>>4,t.Hb>t.za&&(t.Hb=t.za),t.Va>t.Ub&&(t.Va=t.Ub),0<t.L){var l,h=t.ed;for(s=0;4>s;++s){if(t.Qa.Cb){var u=t.Qa.Lb[s];t.Qa.Fb||(u+=h.Tb)}else u=h.Tb;for(l=0;1>=l;++l){var c=t.gd[s][l],f=u;if(h.Pc&&(f+=h.vd[0],l&&(f+=h.od[0])),0<(f=0>f?0:63<f?63:f)){var d=f;0<h.wb&&(d=4<h.wb?d>>2:d>>1)>9-h.wb&&(d=9-h.wb),1>d&&(d=1),c.dd=d,c.tc=2*f+d,c.ld=40<=f?2:15<=f?1:0}else c.tc=0;c.La=l}}}s=0}else tW(t,6,"Frame setup failed"),s=t.a;if(s=0==s){if(s){t.$c=0,0<t.Aa||(t.Ic=1);e:{s=t.Ic,h=4*(d=t.za);var p=32*d,g=d+1,m=0<t.L?d*(0<t.Aa?2:1):0,x=(2==t.Aa?2:1)*d;if((c=h+832+(l=3*(16*s+r7[t.L])/2*p)+(u=null!=t.Fa&&0<t.Fa.length?t.Kc.c*t.Kc.i:0))!=c)s=0;else{if(c>t.Vb){if(t.Vb=0,t.Ec=n(c),t.Fc=0,null==t.Ec){s=tW(t,1,"no memory during frame initialization.");break e}t.Vb=c}c=t.Ec,f=t.Fc,t.Ac=c,t.Bc=f,f+=h,t.Gd=a(p,tB),t.Hd=0,t.rb=a(g+1,tD),t.sb=1,t.wa=m?a(m,tF):null,t.Y=0,t.D.Nb=0,t.D.wa=t.wa,t.D.Y=t.Y,0<t.Aa&&(t.D.Y+=d),e(!0),t.oc=c,t.pc=f,f+=832,t.ya=a(x,tq),t.aa=0,t.D.ya=t.ya,t.D.aa=t.aa,2==t.Aa&&(t.D.aa+=d),t.R=16*d,t.B=8*d,d=(p=r7[t.L])*t.R,p=p/2*t.B,t.sa=c,t.ta=f+d,t.qa=t.sa,t.ra=t.ta+16*s*t.R+p,t.Ha=t.qa,t.Ia=t.ra+8*s*t.B+p,t.$c=0,f+=l,t.mb=u?c:null,t.nb=u?f:null,e(f+u<=t.Fc+t.Vb),t$(t),o(t.Ac,t.Bc,0,h),s=1}}if(s){if(i.ka=0,i.y=t.sa,i.O=t.ta,i.f=t.qa,i.N=t.ra,i.ea=t.Ha,i.Vd=t.Ia,i.fa=t.R,i.Rc=t.B,i.F=null,i.J=0,!rt){for(s=-255;255>=s;++s)i3[255+s]=0>s?-s:s;for(s=-1020;1020>=s;++s)i8[1020+s]=-128>s?-128:127<s?127:s;for(s=-112;112>=s;++s)i7[112+s]=-16>s?-16:15<s?15:s;for(s=-255;510>=s;++s)i9[255+s]=0>s?0:255<s?255:s;rt=1}iF=t7,iD=t4,iq=t6,iU=t3,iB=t8,ij=t5,iz=eZ,iH=eF,iV=eq,iY=eU,iW=eD,iX=ej,iK=eB,iJ=ez,i$=eT,iQ=eL,i0=eR,i1=eO,rk[0]=ed,rk[1]=et,rk[2]=ec,rk[3]=ef,rk[4]=ep,rk[5]=em,rk[6]=eg,rk[7]=ey,rk[8]=ev,rk[9]=ex,rO[0]=ea,rO[1]=ei,rO[2]=er,rO[3]=eo,rO[4]=es,rO[5]=el,rO[6]=eh,rG[0]=eS,rG[1]=ee,rG[2]=eb,rG[3]=ew,rG[4]=eA,rG[5]=eE,rG[6]=eN,s=1}else s=0}s&&(s=function(t,i){for(t.M=0;t.M<t.Va;++t.M){var a,s=t.Jc[t.M&t.Xb],l=t.m,h=t;for(a=0;a<h.za;++a){var u=l,c=h,f=c.Ac,d=c.Bc+4*a,p=c.zc,g=c.ya[c.aa+a];if(c.Qa.Bb?g.$b=M(u,c.Pa.jb[0])?2+M(u,c.Pa.jb[2]):M(u,c.Pa.jb[1]):g.$b=0,c.kc&&(g.Ad=M(u,c.Bd)),g.Za=!M(u,145)+0,g.Za){var m=g.Ob,x=0;for(c=0;4>c;++c){var v,b=p[0+c];for(v=0;4>v;++v){b=rT[f[d+v]][b];for(var w=rP[M(u,b[0])];0<w;)w=rP[2*w+M(u,b[w])];b=-w,f[d+v]=b}r(m,x,f,d,4),x+=4,p[0+c]=b}}else b=M(u,156)?M(u,128)?1:3:M(u,163)?2:0,g.Ob[0]=b,o(f,d,b,4),o(p,0,b,4);g.Dd=M(u,142)?M(u,114)?M(u,183)?1:3:2:0}if(h.m.Ka)return tW(t,7,"Premature end-of-partition0 encountered.");for(;t.ja<t.za;++t.ja){if(h=s,u=(l=t).rb[l.sb-1],f=l.rb[l.sb+l.ja],a=l.ya[l.aa+l.ja],d=l.kc?a.Ad:0)u.la=f.la=0,a.Za||(u.Na=f.Na=0),a.Hc=0,a.Gc=0,a.ia=0;else{if(u=f,f=h,d=l.Pa.Xc,p=l.ya[l.aa+l.ja],g=l.pb[p.$b],c=p.ad,m=0,x=l.rb[l.sb-1],b=v=0,o(c,m,0,384),p.Za)var _,E,N=0,I=d[3];else{w=n(16);var P=u.Na+x.Na;if(P=rN(f,d[1],P,g.Eb,0,w,0),u.Na=x.Na=(0<P)+0,1<P)iF(w,0,c,m);else{var C=w[0]+3>>3;for(w=0;256>w;w+=16)c[m+w]=C}N=1,I=d[0]}var T=15&u.la,L=15&x.la;for(w=0;4>w;++w){var R=1&L;for(C=E=0;4>C;++C)T=T>>1|(R=(P=rN(f,I,P=R+(1&T),g.Sc,N,c,m))>N)<<7,E=E<<2|(3<P?3:1<P?2:0!=c[m+0]),m+=16;T>>=4,L=L>>1|R<<7,v=(v<<8|E)>>>0}for(I=T,N=L>>4,_=0;4>_;_+=2){for(E=0,T=u.la>>4+_,L=x.la>>4+_,w=0;2>w;++w){for(R=1&L,C=0;2>C;++C)P=R+(1&T),T=T>>1|(R=0<(P=rN(f,d[2],P,g.Qc,0,c,m)))<<3,E=E<<2|(3<P?3:1<P?2:0!=c[m+0]),m+=16;T>>=2,L=L>>1|R<<5}b|=E<<4*_,I|=T<<4<<_,N|=(240&L)<<_}u.la=I,x.la=N,p.Hc=v,p.Gc=b,p.ia=43690&b?0:g.ia,d=!(v|b)}if(0<l.L&&(l.wa[l.Y+l.ja]=l.gd[a.$b][a.Za],l.wa[l.Y+l.ja].La|=!d),h.Ka)return tW(t,7,"Premature end-of-file encountered.")}if(t$(t),l=i,h=1,a=(s=t).D,u=0<s.L&&s.M>=s.zb&&s.M<=s.Va,0==s.Aa)e:{if(a.M=s.M,a.uc=u,id(s,a),h=1,a=(E=s.D).Nb,u=(b=r7[s.L])*s.R,f=b/2*s.B,w=16*a*s.R,C=8*a*s.B,d=s.sa,p=s.ta-u+w,g=s.qa,c=s.ra-f+C,m=s.Ha,x=s.Ia-f+C,L=0==(T=E.M),v=T>=s.Va-1,2==s.Aa&&id(s,E),E.uc)for(R=(P=s).D.M,e(P.D.uc),E=P.yb;E<P.Hb;++E){N=E,I=R;var O=(k=(z=P).D).Nb;_=z.R;var k=k.wa[k.Y+N],G=z.sa,Z=z.ta+16*O*_+16*N,F=k.dd,D=k.tc;if(0!=D){if(e(3<=D),1==z.L)0<N&&iQ(G,Z,_,D+4),k.La&&i1(G,Z,_,D),0<I&&i$(G,Z,_,D+4),k.La&&i0(G,Z,_,D);else{var j=z.B,q=z.qa,U=z.ra+8*O*j+8*N,B=z.Ha,z=z.Ia+8*O*j+8*N;O=k.ld,0<N&&(iH(G,Z,_,D+4,F,O),iY(q,U,B,z,j,D+4,F,O)),k.La&&(iX(G,Z,_,D,F,O),iJ(q,U,B,z,j,D,F,O)),0<I&&(iz(G,Z,_,D+4,F,O),iV(q,U,B,z,j,D+4,F,O)),k.La&&(iW(G,Z,_,D,F,O),iK(q,U,B,z,j,D,F,O))}}}if(s.ia&&alert("todo:DitherRow"),null!=l.put){if(E=16*T,T=16*(T+1),L?(l.y=s.sa,l.O=s.ta+w,l.f=s.qa,l.N=s.ra+C,l.ea=s.Ha,l.W=s.Ia+C):(E-=b,l.y=d,l.O=p,l.f=g,l.N=c,l.ea=m,l.W=x),v||(T-=b),T>l.o&&(T=l.o),l.F=null,l.J=null,null!=s.Fa&&0<s.Fa.length&&E<T&&(l.J=function(t,i,o,a){var s=i.width,l=i.o;if(e(null!=t&&null!=i),0>o||0>=a||o+a>l)return null;if(!t.Cc){if(null==t.ga){if(t.ga=new eK,(N=null==t.ga)||(N=i.width*i.o,e(0==t.Gb.length),t.Gb=n(N),t.Uc=0,null==t.Gb?N=0:(t.mb=t.Gb,t.nb=t.Uc,t.rc=null,N=1),N=!N),!N){N=t.ga;var h=t.Fa,u=t.P,c=t.qc,f=t.mb,d=t.nb,p=u+1,g=c-1,m=N.l;if(e(null!=h&&null!=f&&null!=i),rD[0]=null,rD[1]=eJ,rD[2]=e$,rD[3]=eQ,N.ca=f,N.tb=d,N.c=i.width,N.i=i.height,e(0<N.c&&0<N.i),1>=c)i=0;else if(N.$a=h[u+0]>>0&3,N.Z=h[u+0]>>2&3,N.Lc=h[u+0]>>4&3,u=h[u+0]>>6&3,0>N.$a||1<N.$a||4<=N.Z||1<N.Lc||u)i=0;else if(m.put=td,m.ac=tf,m.bc=tp,m.ma=N,m.width=i.width,m.height=i.height,m.Da=i.Da,m.v=i.v,m.va=i.va,m.j=i.j,m.o=i.o,N.$a)e:{for(e(1==N.$a),i=tM();;){if(null==i){i=0;break e}if(e(null!=N),N.mc=i,i.c=N.c,i.i=N.i,i.l=N.l,i.l.ma=N,i.l.width=N.c,i.l.height=N.i,i.a=0,y(i.m,h,p,g),!tP(N.c,N.i,1,i,null)||(1==i.ab&&3==i.gc[0].hc&&tS(i.s)?(N.ic=1,h=i.c*i.i,i.Ta=null,i.Ua=0,i.V=n(h),i.Ba=0,null==i.V?(i.a=1,i=0):i=1):(N.ic=0,i=tC(i,N.c)),!i))break;i=1;break e}N.mc=null,i=0}else i=g>=N.c*N.i;N=!i}if(N)return null;1!=t.ga.Lc?t.Ga=0:a=l-o}e(null!=t.ga),e(o+a<=l);e:{if(i=(h=t.ga).c,l=h.l.o,0==h.$a){if(p=t.rc,g=t.Vc,m=t.Fa,u=t.P+1+o*i,c=t.mb,f=t.nb+o*i,e(u<=t.P+t.qc),0!=h.Z)for(e(null!=rD[h.Z]),N=0;N<a;++N)rD[h.Z](p,g,m,u,c,f,i),p=c,g=f,f+=i,u+=i;else for(N=0;N<a;++N)r(c,f,m,u,i),p=c,g=f,f+=i,u+=i;t.rc=p,t.Vc=g}else{if(e(null!=h.mc),i=o+a,e(null!=(N=h.mc)),e(i<=N.i),N.C>=i)i=1;else if(h.ic||e4(),h.ic){h=N.V,p=N.Ba,g=N.c;var x=N.i,v=(m=1,u=N.$/g,c=N.$%g,f=N.m,d=N.s,N.$),b=g*x,w=g*i,_=d.wc,E=v<w?tb(d,c,u):null;e(v<=b),e(i<=x),e(tS(d));i:for(;;){for(;!f.h&&v<w;){if(c&_||(E=tb(d,c,u)),e(null!=E),A(f),256>(x=tx(E.G[0],E.H[0],f)))h[p+v]=x,++v,++c>=g&&(c=0,++u<=i&&!(u%16)&&tA(N,u));else{if(!(280>x)){m=0;break i}x=tm(x-256,f);var N,I,M=tx(E.G[4],E.H[4],f);if(A(f),!(v>=(M=ty(g,M=tm(M,f)))&&b-v>=x)){m=0;break i}for(I=0;I<x;++I)h[p+v+I]=h[p+v+I-M];for(v+=x,c+=x;c>=g;)c-=g,++u<=i&&!(u%16)&&tA(N,u);v<w&&c&_&&(E=tb(d,c,u))}e(f.h==S(f))}tA(N,u>i?i:u);break}!m||f.h&&v<b?(m=0,N.a=f.h?5:3):N.$=v,i=m}else i=tN(N,N.V,N.Ba,N.c,N.i,i,tT);if(!i){a=0;break e}}o+a>=l&&(t.Cc=1),a=1}if(!a)return null;if(t.Cc&&(null!=(a=t.ga)&&(a.mc=null),t.ga=null,0<t.Ga))return alert("todo:WebPDequantizeLevels"),null}return t.nb+o*s}(s,l,E,T-E),l.F=s.mb,null==l.F&&0==l.F.length)){h=tW(s,3,"Could not decode alpha data.");break e}E<l.j&&(b=l.j-E,E=l.j,e(!(1&b)),l.O+=s.R*b,l.N+=s.B*(b>>1),l.W+=s.B*(b>>1),null!=l.F&&(l.J+=l.width*b)),E<T&&(l.O+=l.v,l.N+=l.v>>1,l.W+=l.v>>1,null!=l.F&&(l.J+=l.v),l.ka=E-l.j,l.U=l.va-l.v,l.T=T-E,h=l.put(l))}a+1!=s.Ic||v||(r(s.sa,s.ta-u,d,p+16*s.R,u),r(s.qa,s.ra-f,g,c+8*s.B,f),r(s.Ha,s.Ia-f,m,x+8*s.B,f))}if(!h)return tW(t,6,"Output aborted.")}return 1}(t,i)),null!=i.bc&&i.bc(i),s&=1}return s?(t.cb=0,s):0})(t,l)||(i=t.a)}}else i=t.a;0==i&&null!=c.Oa&&c.Oa.fd&&(i=im(c.ba))}c=i}u=0!=c?null:11>u?f.f.RGBA.eb:f.f.kb.y}else u=null;return u};var ot=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function h(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16)>>>0}function u(t,e){return(t[e+0]<<0|t[e+1]<<8|t[e+2]<<16|t[e+3]<<24)>>>0}new l;var c=[0],f=[0],d=[],p=new l,g=function(t,e){var i={},r=0,o=!1,n=0,a=0;if(i.frames=[],!/** @license
   * Copyright (c) 2017 Dominik Homberger
  Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"), to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense, and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
  The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
  THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
  https://webpjs.appspot.com
  WebPRiffParser dominikhlbg@gmail.com
  */function(t,e,i,r){for(var o=0;o<4;o++)if(t[e+o]!=i.charCodeAt(o))return!0;return!1}(t,e,"RIFF",0)){for(u(t,e+=4),e+=8;e<t.length;){var s,l,c,f=function(t,e){for(var i="",r=0;r<4;r++)i+=String.fromCharCode(t[e++]);return i}(t,e),d=u(t,e+=4);e+=4;var p=d+(1&d);switch(f){case"VP8 ":case"VP8L":void 0===i.frames[r]&&(i.frames[r]={}),(c=i.frames[r]).src_off=o?a:e-8,c.src_size=n+d+8,r++,o&&(o=!1,n=0,a=0);break;case"VP8X":(c=i.header={}).feature_flags=t[e];var g=e+4;c.canvas_width=1+h(t,g),g+=3,c.canvas_height=1+h(t,g),g+=3;break;case"ALPH":o=!0,n=p+8,a=e-8;break;case"ANIM":(c=i.header).bgcolor=u(t,e),g=e+4,c.loop_count=t[(s=g)+0]<<0|t[s+1]<<8,g+=2;break;case"ANMF":(c=i.frames[r]={}).offset_x=2*h(t,e),e+=3,c.offset_y=2*h(t,e),e+=3,c.width=1+h(t,e),e+=3,c.height=1+h(t,e),e+=3,c.duration=h(t,e),e+=3,l=t[e++],c.dispose=1&l,c.blend=l>>1&1}"ANMF"!=f&&(e+=p)}return i}}(t,0);g.response=t,g.rgbaoutput=!0,g.dataurl=!1;var m=g.header?g.header:null,y=g.frames?g.frames:null;if(m){m.loop_counter=m.loop_count,c=[m.canvas_height],f=[m.canvas_width];for(var x=0;x<y.length&&0!=y[x].blend;x++);}var v=y[0],b=p.WebPDecodeRGBA(t,v.src_off,v.src_size,f,c);v.rgba=b,v.imgwidth=f[0],v.imgheight=c[0];for(var w=0;w<f[0]*c[0]*4;w++)d[w]=b[w];return this.width=f,this.height=c,this.data=d,this}ej=D.API,eq=function(t,e,i,r){var o=4,n=eH;switch(r){case ej.image_compression.FAST:o=1,n=ez;break;case ej.image_compression.MEDIUM:o=6,n=eV;break;case ej.image_compression.SLOW:o=9,n=eY}t=eU(t,e,i,n);var a=(0,s.zlibSync)(t,{level:o});return ej.__addimage__.arrayBufferToBinaryString(a)},eU=function(t,e,i,r){for(var o,n,a,s=t.length/e,l=new Uint8Array(t.length+s),h=eX(),u=0;u<s;u+=1){if(a=u*e,o=t.subarray(a,a+e),r)l.set(r(o,i,n),a+u);else{for(var c,f=h.length,d=[];c<f;c+=1)d[c]=h[c](o,i,n);var p=eK(d.concat());l.set(d[p],a+u)}n=o}return l},eB=function(t){var e=Array.apply([],t);return e.unshift(0),e},ez=function(t,e){var i,r=[],o=t.length;r[0]=1;for(var n=0;n<o;n+=1)i=t[n-e]||0,r[n+1]=t[n]-i+256&255;return r},eH=function(t,e,i){var r,o=[],n=t.length;o[0]=2;for(var a=0;a<n;a+=1)r=i&&i[a]||0,o[a+1]=t[a]-r+256&255;return o},eV=function(t,e,i){var r,o,n=[],a=t.length;n[0]=3;for(var s=0;s<a;s+=1)r=t[s-e]||0,o=i&&i[s]||0,n[s+1]=t[s]+256-(r+o>>>1)&255;return n},eY=function(t,e,i){var r,o,n,a=[],s=t.length;a[0]=4;for(var l=0;l<s;l+=1)r=t[l-e]||0,o=i&&i[l]||0,n=eW(r,o,i&&i[l-e]||0),a[l+1]=t[l]-n+256&255;return a},eW=function(t,e,i){if(t===e&&e===i)return t;var r=Math.abs(e-i),o=Math.abs(t-i),n=Math.abs(t+e-i-i);return r<=o&&r<=n?t:o<=n?e:i},eX=function(){return[eB,ez,eH,eV,eY]},eK=function(t){var e=t.map(function(t){return t.reduce(function(t,e){return t+Math.abs(e)},0)});return e.indexOf(Math.min.apply(null,e))},ej.processPNG=function(t,e,i,r){var o,n,a,l,h,u,c,f,d,p,g,m,y,x,v,b=this.decode.FLATE_DECODE,w="";if(this.__addimage__.isArrayBuffer(t)&&(t=new Uint8Array(t)),this.__addimage__.isArrayBufferView(t)){if(t=(a=new eO(t)).imgData,n=a.bits,o=a.colorSpace,h=a.colors,-1!==[4,6].indexOf(a.colorType)){if(8===a.bits){d=(f=32==a.pixelBitlength?new Uint32Array(a.decodePixels().buffer):16==a.pixelBitlength?new Uint16Array(a.decodePixels().buffer):new Uint8Array(a.decodePixels().buffer)).length,g=new Uint8Array(d*a.colors),p=new Uint8Array(d);var _,S=a.pixelBitlength-a.bits;for(x=0,v=0;x<d;x++){for(y=f[x],_=0;_<S;)g[v++]=y>>>_&255,_+=a.bits;p[x]=y>>>_&255}}if(16===a.bits){d=(f=new Uint32Array(a.decodePixels().buffer)).length,g=new Uint8Array(32/a.pixelBitlength*d*a.colors),p=new Uint8Array(32/a.pixelBitlength*d),m=a.colors>1,x=0,v=0;for(var E=0;x<d;)y=f[x++],g[v++]=y>>>0&255,m&&(g[v++]=y>>>16&255,y=f[x++],g[v++]=y>>>0&255),p[E++]=y>>>16&255;n=8}r!==ej.image_compression.NONE&&"function"==typeof s.zlibSync?(t=eq(g,a.width*a.colors,a.colors,r),c=eq(p,a.width,1,r)):(t=g,c=p,b=void 0)}if(3===a.colorType&&(o=this.color_spaces.INDEXED,u=a.palette,a.transparency.indexed)){var A=a.transparency.indexed,N=0;for(x=0,d=A.length;x<d;++x)N+=A[x];if((N/=255)==d-1&&-1!==A.indexOf(0))l=[A.indexOf(0)];else if(N!==d){for(f=a.decodePixels(),p=new Uint8Array(f.length),x=0,d=f.length;x<d;x++)p[x]=A[f[x]];c=eq(p,a.width,1)}}var I=function(t){var e;switch(t){case ej.image_compression.FAST:e=11;break;case ej.image_compression.MEDIUM:e=13;break;case ej.image_compression.SLOW:e=14;break;default:e=12}return e}(r);return b===this.decode.FLATE_DECODE&&(w="/Predictor "+I+" "),w+="/Colors "+h+" /BitsPerComponent "+n+" /Columns "+a.width,(this.__addimage__.isArrayBuffer(t)||this.__addimage__.isArrayBufferView(t))&&(t=this.__addimage__.arrayBufferToBinaryString(t)),(c&&this.__addimage__.isArrayBuffer(c)||this.__addimage__.isArrayBufferView(c))&&(c=this.__addimage__.arrayBufferToBinaryString(c)),{alias:i,data:t,index:e,filter:b,decodeParameters:w,transparency:l,palette:u,sMask:c,predictor:I,width:a.width,height:a.height,bitsPerComponent:n,colorSpace:o}}},(eJ=D.API).processGIF89A=function(t,e,i,r){var o=new ek(t),n=o.width,a=o.height,s=[];o.decodeAndBlitFrameRGBA(0,s);var l=new eZ(100).encode({data:s,width:n,height:a},100);return eJ.processJPEG.call(this,l,e,i,r)},eJ.processGIF87A=eJ.processGIF89A,eF.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,16===this.bitPP&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var t=0===this.colors?1<<this.bitPP:this.colors;this.palette=Array(t);for(var e=0;e<t;e++){var i=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0);this.palette[e]={red:o,green:r,blue:i,quad:n}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},eF.prototype.parseBGR=function(){this.pos=this.offset;try{var t="bit"+this.bitPP,e=this.width*this.height*4;this.data=new Uint8Array(e),this[t]()}catch(t){u.log("bit decode error:"+t)}},eF.prototype.bit1=function(){var t,e=Math.ceil(this.width/8),i=e%4;for(t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,o=0;o<e;o++)for(var n=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+8*o*4,s=0;s<8&&8*o+s<this.width;s++){var l=this.palette[n>>7-s&1];this.data[a+4*s]=l.blue,this.data[a+4*s+1]=l.green,this.data[a+4*s+2]=l.red,this.data[a+4*s+3]=255}0!==i&&(this.pos+=4-i)}},eF.prototype.bit4=function(){for(var t=Math.ceil(this.width/2),e=t%4,i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<t;o++){var n=this.datav.getUint8(this.pos++,!0),a=r*this.width*4+2*o*4,s=n>>4,l=15&n,h=this.palette[s];if(this.data[a]=h.blue,this.data[a+1]=h.green,this.data[a+2]=h.red,this.data[a+3]=255,2*o+1>=this.width)break;h=this.palette[l],this.data[a+4]=h.blue,this.data[a+4+1]=h.green,this.data[a+4+2]=h.red,this.data[a+4+3]=255}0!==e&&(this.pos+=4-e)}},eF.prototype.bit8=function(){for(var t=this.width%4,e=this.height-1;e>=0;e--){for(var i=this.bottom_up?e:this.height-1-e,r=0;r<this.width;r++){var o=this.datav.getUint8(this.pos++,!0),n=i*this.width*4+4*r;if(o<this.palette.length){var a=this.palette[o];this.data[n]=a.red,this.data[n+1]=a.green,this.data[n+2]=a.blue,this.data[n+3]=255}else this.data[n]=255,this.data[n+1]=255,this.data[n+2]=255,this.data[n+3]=255}0!==t&&(this.pos+=4-t)}},eF.prototype.bit15=function(){for(var t=this.width%3,e=parseInt("11111",2),i=this.height-1;i>=0;i--){for(var r=this.bottom_up?i:this.height-1-i,o=0;o<this.width;o++){var n=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(n&e)/e*255|0,s=(n>>5&e)/e*255|0,l=(n>>10&e)/e*255|0,h=n>>15?255:0,u=r*this.width*4+4*o;this.data[u]=l,this.data[u+1]=s,this.data[u+2]=a,this.data[u+3]=h}this.pos+=t}},eF.prototype.bit16=function(){for(var t=this.width%3,e=parseInt("11111",2),i=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var o=this.bottom_up?r:this.height-1-r,n=0;n<this.width;n++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var s=(a&e)/e*255|0,l=(a>>5&i)/i*255|0,h=(a>>11)/e*255|0,u=o*this.width*4+4*n;this.data[u]=h,this.data[u+1]=l,this.data[u+2]=s,this.data[u+3]=255}this.pos+=t}},eF.prototype.bit24=function(){for(var t=this.height-1;t>=0;t--){for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=e*this.width*4+4*i;this.data[a]=n,this.data[a+1]=o,this.data[a+2]=r,this.data[a+3]=255}this.pos+=this.width%4}},eF.prototype.bit32=function(){for(var t=this.height-1;t>=0;t--)for(var e=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var r=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),n=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),s=e*this.width*4+4*i;this.data[s]=n,this.data[s+1]=o,this.data[s+2]=r,this.data[s+3]=a}},eF.prototype.getData=function(){return this.data},(e$=D.API).processBMP=function(t,e,i,r){var o=new eF(t,!1),n=o.width,a=o.height,s={data:o.getData(),width:n,height:a},l=new eZ(100).encode(s,100);return e$.processJPEG.call(this,l,e,i,r)},eD.prototype.getData=function(){return this.data},(eQ=D.API).processWEBP=function(t,e,i,r){var o=new eD(t,!1),n=o.width,a=o.height,s={data:o.getData(),width:n,height:a},l=new eZ(100).encode(s,100);return eQ.processJPEG.call(this,l,e,i,r)},D.API.processRGBA=function(t,e,i){for(var r=t.data,o=r.length,n=new Uint8Array(o/4*3),a=new Uint8Array(o/4),s=0,l=0,h=0;h<o;h+=4){var u=r[h],c=r[h+1],f=r[h+2],d=r[h+3];n[s++]=u,n[s++]=c,n[s++]=f,a[l++]=d}var p=this.__addimage__.arrayBufferToBinaryString(n);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:p,index:e,alias:i,colorSpace:"DeviceRGB",bitsPerComponent:8,width:t.width,height:t.height}},D.API.setLanguage=function(t){return void 0===this.internal.languageSettings&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),void 0!==({af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"})[t]&&(this.internal.languageSettings.languageCode=t,!1===this.internal.languageSettings.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},eC=(eP=D.API).getCharWidthsArray=function(e,i){var r,o,n=(i=i||{}).font||this.internal.getFont(),s=i.fontSize||this.internal.getFontSize(),l=i.charSpace||this.internal.getCharSpace(),h=i.widths?i.widths:n.metadata.Unicode.widths,u=h.fof?h.fof:1,c=i.kerning?i.kerning:n.metadata.Unicode.kerning,f=c.fof?c.fof:1,d=!1!==i.doKerning,p=0,g=e.length,m=0,y=h[0]||u,x=[];for(r=0;r<g;r++)o=e.charCodeAt(r),"function"==typeof n.metadata.widthOfString?x.push((n.metadata.widthOfGlyph(n.metadata.characterToGlyph(o))+1e3/s*l||0)/1e3):(p=d&&"object"===t(a)(c[o])&&!isNaN(parseInt(c[o][m],10))?c[o][m]/f:0,x.push((h[o]||y)/u+p)),m=o;return x},eT=eP.getStringUnitWidth=function(t,e){var i=(e=e||{}).fontSize||this.internal.getFontSize(),r=e.font||this.internal.getFont(),o=e.charSpace||this.internal.getCharSpace();return eP.processArabic&&(t=eP.processArabic(t)),"function"==typeof r.metadata.widthOfString?r.metadata.widthOfString(t,i,o)/i:eC.apply(this,arguments).reduce(function(t,e){return t+e},0)},eL=function(t,e,i,r){for(var o=[],n=0,a=t.length,s=0;n!==a&&s+e[n]<i;)s+=e[n],n++;o.push(t.slice(0,n));var l=n;for(s=0;n!==a;)s+e[n]>r&&(o.push(t.slice(l,n)),s=0,l=n),s+=e[n],n++;return l!==n&&o.push(t.slice(l,n)),o},eR=function(t,e,i){i||(i={});var r,o,n,a,s,l,h,u=[],c=[u],f=i.textIndent||0,d=0,p=0,g=t.split(" "),m=eC.apply(this,[" ",i])[0];if(l=-1===i.lineIndent?g[0].length+2:i.lineIndent||0){var y=Array(l).join(" "),x=[];g.map(function(t){(t=t.split(/\s*\n/)).length>1?x=x.concat(t.map(function(t,e){return(e&&t.length?"\n":"")+t})):x.push(t[0])}),g=x,l=eT.apply(this,[y,i])}for(n=0,a=g.length;n<a;n++){var v=0;if(r=g[n],l&&"\n"==r[0]&&(r=r.substr(1),v=1),f+d+(p=(o=eC.apply(this,[r,i])).reduce(function(t,e){return t+e},0))>e||v){if(p>e){for(s=eL.apply(this,[r,o,e-(f+d),e]),u.push(s.shift()),u=[s.pop()];s.length;)c.push([s.shift()]);p=o.slice(r.length-(u[0]?u[0].length:0)).reduce(function(t,e){return t+e},0)}else u=[r];c.push(u),f=p+l,d=m}else u.push(r),f+=d+p,d=m}return h=l?function(t,e){return(e?y:"")+t.join(" ")}:function(t){return t.join(" ")},c.map(h)},eP.splitTextToSize=function(t,e,i){var r,o=(i=i||{}).fontSize||this.internal.getFontSize(),n=(function(t){if(t.widths&&t.kerning)return{widths:t.widths,kerning:t.kerning};var e=this.internal.getFont(t.fontName,t.fontStyle);return e.metadata.Unicode?{widths:e.metadata.Unicode.widths||{0:1},kerning:e.metadata.Unicode.kerning||{}}:{font:e.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,i);r=Array.isArray(t)?t:String(t).split(/\r?\n/);var a=1*this.internal.scaleFactor*e/o;n.textIndent=i.textIndent?1*i.textIndent*this.internal.scaleFactor/o:0,n.lineIndent=i.lineIndent;var s,l,h=[];for(s=0,l=r.length;s<l;s++)h=h.concat(eR.apply(this,[r[s],a,n]));return h},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var i="klmnopqrstuvwxyz",r={},o={},n=0;n<i.length;n++)r[i[n]]="0123456789abcdef"[n],o["0123456789abcdef"[n]]=i[n];var s=function(t){return"0x"+parseInt(t,10).toString(16)},l=e.__fontmetrics__.compress=function(e){var i,r,n,h,u=["{"];for(var c in e){if(i=e[c],r=isNaN(parseInt(c,10))?"'"+c+"'":(r=s(c=parseInt(c,10)).slice(2)).slice(0,-1)+o[r.slice(-1)],"number"==typeof i)i<0?(n=s(i).slice(3),h="-"):(n=s(i).slice(2),h=""),n=h+n.slice(0,-1)+o[n.slice(-1)];else{if("object"!==t(a)(i))throw Error("Don't know what to do with value type "+t(a)(i)+".");n=l(i)}u.push(r+n)}return u.push("}"),u.join("")},h=e.__fontmetrics__.uncompress=function(t){if("string"!=typeof t)throw Error("Invalid argument passed to uncompress.");for(var e,i,o,n,a={},s=1,l=a,h=[],u="",c="",f=t.length-1,d=1;d<f;d+=1)"'"==(n=t[d])?e?(o=e.join(""),e=void 0):e=[]:e?e.push(n):"{"==n?(h.push([l,o]),l={},o=void 0):"}"==n?((i=h.pop())[0][i[1]]=l,o=void 0,l=i[0]):"-"==n?s=-1:void 0===o?r.hasOwnProperty(n)?(u+=r[n],o=parseInt(u,16)*s,s=1,u=""):u+=n:r.hasOwnProperty(n)?(c+=r[n],l[o]=parseInt(c,16)*s,s=1,o=void 0,c=""):c+=n;return a},u={codePages:["WinAnsiEncoding"],WinAnsiEncoding:h("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},c={Unicode:{Courier:u,"Courier-Bold":u,"Courier-BoldOblique":u,"Courier-Oblique":u,Helvetica:u,"Helvetica-Bold":u,"Helvetica-BoldOblique":u,"Helvetica-Oblique":u,"Times-Roman":u,"Times-Bold":u,"Times-BoldItalic":u,"Times-Italic":u}},f={Unicode:{"Courier-Oblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":h("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":h("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:h("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":h("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:h("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":h("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":h("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":h("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":h("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(t){var e=t.font,i=f.Unicode[e.postScriptName];i&&(e.metadata.Unicode={},e.metadata.Unicode.widths=i.widths,e.metadata.Unicode.kerning=i.kerning);var r=c.Unicode[e.postScriptName];r&&(e.metadata.Unicode.encoding=r,e.encoding=r.codePages[0])}])}(D.API),/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function(t){var e=function(t){for(var e=t.length,i=new Uint8Array(e),r=0;r<e;r++)i[r]=t.charCodeAt(r);return i};t.API.events.push(["addFont",function(i){var r,o=void 0,n=i.font,a=i.instance;if(!n.isStandardFont){if(void 0===a)throw Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");if("string"!=typeof(o=!1===a.existsFileInVFS(n.postScriptName)?a.loadFile(n.postScriptName):a.getFileFromVFS(n.postScriptName)))throw Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+n.postScriptName+"').");r=o,r=/^\x00\x01\x00\x00/.test(r)?e(r):e(p(r)),n.metadata=t.API.TTFFont.open(r),n.metadata.Unicode=n.metadata.Unicode||{encoding:{},kerning:{},widths:[]},n.metadata.glyIdsUsed=[0]}}])}(D),D.API.addSvgAsImage=function(t,e,i,r,o,a,s,h){if(isNaN(e)||isNaN(i))throw u.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(r)||isNaN(o))throw u.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var c=document.createElement("canvas");c.width=r,c.height=o;var f=c.getContext("2d");f.fillStyle="#fff",f.fillRect(0,0,c.width,c.height);var d={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},p=this;return(l.canvg?Promise.resolve(l.canvg):n("4s1Fc")).catch(function(t){return Promise.reject(Error("Could not load canvg: "+t))}).then(function(t){return t.default?t.default:t}).then(function(e){return e.fromString(f,t,d)},function(){return Promise.reject(Error("Could not load canvg."))}).then(function(t){return t.render(d)}).then(function(){p.addImage(c.toDataURL("image/jpeg",1),e,i,r,o,s,h)})},D.API.putTotalPages=function(t){var e,i=0;15>parseInt(this.internal.getFont().id.substr(1),10)?(e=RegExp(t,"g"),i=this.internal.getNumberOfPages()):(e=RegExp(this.pdfEscape16(t,this.internal.getFont()),"g"),i=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var o=0;o<this.internal.pages[r].length;o++)this.internal.pages[r][o]=this.internal.pages[r][o].replace(e,i);return this},D.API.viewerPreferences=function(e,i){e=e||{},i=i||!1;var r,o,n,s,l={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},h=Object.keys(l),u=[],c=0,f=0,d=0;function p(t,e){var i,r=!1;for(i=0;i<t.length;i+=1)t[i]===e&&(r=!0);return r}if(void 0===this.internal.viewerpreferences&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(l)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,"reset"===e||!0===i){var g=h.length;for(d=0;d<g;d+=1)r[h[d]].value=r[h[d]].defaultValue,r[h[d]].explicitSet=!1}if("object"===t(a)(e)){for(n in e)if(s=e[n],p(h,n)&&void 0!==s){if("boolean"===r[n].type&&"boolean"==typeof s)r[n].value=s;else if("name"===r[n].type&&p(r[n].valueSet,s))r[n].value=s;else if("integer"===r[n].type&&Number.isInteger(s))r[n].value=s;else if("array"===r[n].type){for(c=0;c<s.length;c+=1)if(o=!0,1===s[c].length&&"number"==typeof s[c][0])u.push(String(s[c]-1));else if(s[c].length>1){for(f=0;f<s[c].length;f+=1)"number"!=typeof s[c][f]&&(o=!1);!0===o&&u.push([s[c][0]-1,s[c][1]-1].join(" "))}r[n].value="["+u.join(" ")+"]"}else r[n].value=r[n].defaultValue;r[n].explicitSet=!0}}return!1===this.internal.viewerpreferences.isSubscribed&&(this.internal.events.subscribe("putCatalog",function(){var t,e=[];for(t in r)!0===r[t].explicitSet&&("name"===r[t].type?e.push("/"+t+" /"+r[t].value):e.push("/"+t+" "+r[t].value));0!==e.length&&this.internal.write("/ViewerPreferences\n<<\n"+e.join("\n")+"\n>>")}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},e0=D.API,e1=function(){var t='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',e=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),i=unescape(encodeURIComponent(t)),r=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),o=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),n=unescape(encodeURIComponent("</x:xmpmeta>")),a=i.length+r.length+o.length+e.length+n.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+a+" >>"),this.internal.write("stream"),this.internal.write(e+i+r+o+n),this.internal.write("endstream"),this.internal.write("endobj")},e2=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")},e0.addMetadata=function(t,e){return void 0===this.internal.__metadata__&&(this.internal.__metadata__={metadata:t,namespaceuri:e||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",e2),this.internal.events.subscribe("postPutResources",e1)),this},e4=(e5=D.API).pdfEscape16=function(t,e){for(var i,r=e.metadata.Unicode.widths,o=["","0","00","000","0000"],n=[""],a=0,s=t.length;a<s&&(i=e.metadata.characterToGlyph(t.charCodeAt(a)),e.metadata.glyIdsUsed.push(i),e.metadata.toUnicode[i]=t.charCodeAt(a),-1==r.indexOf(i)&&(r.push(i),r.push([parseInt(e.metadata.widthOfGlyph(i),10)])),"0"!=i);++a)n.push(o[4-(i=i.toString(16)).length],i);return n.join("")},e6=function(t){var e,i,r,o,n,a,s;for(n="/CIDInit /ProcSet findresource begin\n12 dict begin\nbegincmap\n/CIDSystemInfo <<\n  /Registry (Adobe)\n  /Ordering (UCS)\n  /Supplement 0\n>> def\n/CMapName /Adobe-Identity-UCS def\n/CMapType 2 def\n1 begincodespacerange\n<0000><ffff>\nendcodespacerange",r=[],a=0,s=(i=Object.keys(t).sort(function(t,e){return t-e})).length;a<s;a++)e=i[a],r.length>=100&&(n+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar",r=[]),void 0!==t[e]&&null!==t[e]&&"function"==typeof t[e].toString&&(o=("0000"+t[e].toString(16)).slice(-4),e=("0000"+(+e).toString(16)).slice(-4),r.push("<"+e+"><"+o+">"));return r.length&&(n+="\n"+r.length+" beginbfchar\n"+r.join("\n")+"\nendbfchar\n"),n+="endcmap\nCMapName currentdict /CMap defineresource pop\nend\nend"},e5.events.push(["putFont",function(t){!function(t){var e=t.font,i=t.out,r=t.newObject,o=t.putStream;if(e.metadata instanceof D.API.TTFFont&&"Identity-H"===e.encoding){for(var n=e.metadata.Unicode.widths,a=e.metadata.subset.encode(e.metadata.glyIdsUsed,1),s="",l=0;l<a.length;l++)s+=String.fromCharCode(a[l]);var h=r();o({data:s,addLength1:!0,objectId:h}),i("endobj");var u=r();o({data:e6(e.metadata.toUnicode),addLength1:!0,objectId:u}),i("endobj");var c=r();i("<<"),i("/Type /FontDescriptor"),i("/FontName /"+R(e.fontName)),i("/FontFile2 "+h+" 0 R"),i("/FontBBox "+D.API.PDFObject.convert(e.metadata.bbox)),i("/Flags "+e.metadata.flags),i("/StemV "+e.metadata.stemV),i("/ItalicAngle "+e.metadata.italicAngle),i("/Ascent "+e.metadata.ascender),i("/Descent "+e.metadata.decender),i("/CapHeight "+e.metadata.capHeight),i(">>"),i("endobj");var f=r();i("<<"),i("/Type /Font"),i("/BaseFont /"+R(e.fontName)),i("/FontDescriptor "+c+" 0 R"),i("/W "+D.API.PDFObject.convert(n)),i("/CIDToGIDMap /Identity"),i("/DW 1000"),i("/Subtype /CIDFontType2"),i("/CIDSystemInfo"),i("<<"),i("/Supplement 0"),i("/Registry (Adobe)"),i("/Ordering ("+e.encoding+")"),i(">>"),i(">>"),i("endobj"),e.objectNumber=r(),i("<<"),i("/Type /Font"),i("/Subtype /Type0"),i("/ToUnicode "+u+" 0 R"),i("/BaseFont /"+R(e.fontName)),i("/Encoding /"+e.encoding),i("/DescendantFonts ["+f+" 0 R]"),i(">>"),i("endobj"),e.isAlreadyPutted=!0}}(t)}]),e5.events.push(["putFont",function(t){!function(t){var e=t.font,i=t.out,r=t.newObject,o=t.putStream;if(e.metadata instanceof D.API.TTFFont&&"WinAnsiEncoding"===e.encoding){for(var n=e.metadata.rawData,a="",s=0;s<n.length;s++)a+=String.fromCharCode(n[s]);var l=r();o({data:a,addLength1:!0,objectId:l}),i("endobj");var h=r();o({data:e6(e.metadata.toUnicode),addLength1:!0,objectId:h}),i("endobj");var u=r();i("<<"),i("/Descent "+e.metadata.decender),i("/CapHeight "+e.metadata.capHeight),i("/StemV "+e.metadata.stemV),i("/Type /FontDescriptor"),i("/FontFile2 "+l+" 0 R"),i("/Flags 96"),i("/FontBBox "+D.API.PDFObject.convert(e.metadata.bbox)),i("/FontName /"+R(e.fontName)),i("/ItalicAngle "+e.metadata.italicAngle),i("/Ascent "+e.metadata.ascender),i(">>"),i("endobj"),e.objectNumber=r();for(var c=0;c<e.metadata.hmtx.widths.length;c++)e.metadata.hmtx.widths[c]=parseInt(e.metadata.hmtx.widths[c]*(1e3/e.metadata.head.unitsPerEm));i("<</Subtype/TrueType/Type/Font/ToUnicode "+h+" 0 R/BaseFont/"+R(e.fontName)+"/FontDescriptor "+u+" 0 R/Encoding/"+e.encoding+" /FirstChar 29 /LastChar 255 /Widths "+D.API.PDFObject.convert(e.metadata.hmtx.widths)+">>"),i("endobj"),e.isAlreadyPutted=!0}}(t)}]),e3=function(t){var e,i=t.text||"",r=t.x,o=t.y,n=t.options||{},a=t.mutex||{},s=a.pdfEscape,l=a.activeFontKey,h=a.fonts,u=l,c="",f=0,d="",p=h[u].encoding;if("Identity-H"!==h[u].encoding)return{text:i,x:r,y:o,options:n,mutex:a};for(d=i,u=l,Array.isArray(i)&&(d=i[0]),f=0;f<d.length;f+=1)h[u].metadata.hasOwnProperty("cmap")&&(e=h[u].metadata.cmap.unicode.codeMap[d[f].charCodeAt(0)]),e||256>d[f].charCodeAt(0)&&h[u].metadata.hasOwnProperty("Unicode")?c+=d[f]:c+="";var g="";return 14>parseInt(u.slice(1))||"WinAnsiEncoding"===p?g=s(c,u).split("").map(function(t){return t.charCodeAt(0).toString(16)}).join(""):"Identity-H"===p&&(g=e4(c,h[u])),a.isHex=!0,{text:g,x:r,y:o,options:n,mutex:a}},e5.events.push(["postProcessText",function(t){var e=t.text||"",i=[],r={text:e,x:t.x,y:t.y,options:t.options,mutex:t.mutex};if(Array.isArray(e)){var o=0;for(o=0;o<e.length;o+=1)Array.isArray(e[o])&&3===e[o].length?i.push([e3(Object.assign({},r,{text:e[o][0]})).text,e[o][1],e[o][2]]):i.push(e3(Object.assign({},r,{text:e[o]})).text);t.text=i}else t.text=e3(Object.assign({},r,{text:e})).text}]),e8=D.API,e7=function(){return void 0===this.internal.vFS&&(this.internal.vFS={}),!0},e8.existsFileInVFS=function(t){return e7.call(this),void 0!==this.internal.vFS[t]},e8.addFileToVFS=function(t,e){return e7.call(this),this.internal.vFS[t]=e,this},e8.getFileFromVFS=function(t){return e7.call(this),void 0!==this.internal.vFS[t]?this.internal.vFS[t]:null},/**
 * @license
 * Unicode Bidi Engine based on the work of Alex Shensis (@asthensis)
 * MIT License
 */function(t){t.__bidiEngine__=t.prototype.__bidiEngine__=function(t){var i,r,o,n,a,s,l,h=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],u=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],c={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},f={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},d=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],p=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),g=!1,m=0;this.__bidiEngine__={};var y=function(t){var i=t.charCodeAt(),r=i>>8,o=f[r];return void 0!==o?e[256*o+(255&i)]:252===r||253===r?"AL":p.test(r)?"L":8===r?"R":"N"},x=function(t){for(var e,i=0;i<t.length&&"L"!==(e=y(t.charAt(i)));i++)if("R"===e)return!0;return!1},v=function(t,e,a,s){var l,h,u,c,f=e[s];switch(f){case"L":case"R":case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":g=!1;break;case"N":case"AN":break;case"EN":g&&(f="AN");break;case"AL":g=!0,f="R";break;case"WS":case"BN":f="N";break;case"CS":s<1||s+1>=e.length||"EN"!==(l=a[s-1])&&"AN"!==l||"EN"!==(h=e[s+1])&&"AN"!==h?f="N":g&&(h="AN"),f=h===l?h:"N";break;case"ES":f="EN"===(l=s>0?a[s-1]:"B")&&s+1<e.length&&"EN"===e[s+1]?"EN":"N";break;case"ET":if(s>0&&"EN"===a[s-1]){f="EN";break}if(g){f="N";break}for(u=s+1,c=e.length;u<c&&"ET"===e[u];)u++;f=u<c&&"EN"===e[u]?"EN":"N";break;case"NSM":if(o&&!n){for(c=e.length,u=s+1;u<c&&"NSM"===e[u];)u++;if(u<c){var d=t[s];if(l=e[u],(d>=1425&&d<=2303||64286===d)&&("R"===l||"AL"===l)){f="R";break}}}f=s<1||"B"===(l=e[s-1])?"N":a[s-1];break;case"B":g=!1,i=!0,f=m;break;case"S":r=!0,f="N"}return f},b=function(t,e,i){var r=t.split("");return i&&w(r,i,{hiLevel:m}),r.reverse(),e&&e.reverse(),r.join("")},w=function(t,e,o){var n,a,s,l,f,d=-1,p=t.length,x=0,b=[],w=m?u:h,_=[];for(g=!1,i=!1,r=!1,a=0;a<p;a++)_[a]=y(t[a]);for(s=0;s<p;s++){if(f=x,b[s]=v(t,_,b,s),n=240&(x=w[f][c[b[s]]]),x&=15,e[s]=l=w[x][5],n>0){if(16===n){for(a=d;a<s;a++)e[a]=1;d=-1}else d=-1}if(w[x][6])-1===d&&(d=s);else if(d>-1){for(a=d;a<s;a++)e[a]=l;d=-1}"B"===_[s]&&(e[s]=0),o.hiLevel|=l}r&&function(t,e,i){for(var r=0;r<i;r++)if("S"===t[r]){e[r]=m;for(var o=r-1;o>=0&&"WS"===t[o];o--)e[o]=m}}(_,e,p)},_=function(t,e,r,o,n){if(!(n.hiLevel<t)){if(1===t&&1===m&&!i)return e.reverse(),void(r&&r.reverse());for(var a,s,l,h,u=e.length,c=0;c<u;){if(o[c]>=t){for(l=c+1;l<u&&o[l]>=t;)l++;for(h=c,s=l-1;h<s;h++,s--)a=e[h],e[h]=e[s],e[s]=a,r&&(a=r[h],r[h]=r[s],r[s]=a);c=l}c++}}},S=function(t,e,i){var r=t.split(""),o={hiLevel:m};return i||(i=[]),w(r,i,o),function(t,e,i){if(0!==i.hiLevel&&l)for(var r,o=0;o<t.length;o++)1===e[o]&&(r=d.indexOf(t[o]))>=0&&(t[o]=d[r+1])}(r,i,o),_(2,r,e,i,o),_(1,r,e,i,o),r.join("")};return this.__bidiEngine__.doBidiReorder=function(t,e,i){if(function(t,e){if(e)for(var i=0;i<t.length;i++)e[i]=i;void 0===n&&(n=x(t)),void 0===s&&(s=x(t))}(t,e),o||!a||s){if(o&&a&&n^s)m=n?1:0,t=b(t,e,i);else if(!o&&a&&s)m=n?1:0,t=b(t=S(t,e,i),e);else if(!o||n||a||s){if(o&&!a&&n^s)t=b(t,e),n?(m=0,t=S(t,e,i)):(m=1,t=b(t=S(t,e,i),e));else if(o&&n&&!a&&s)m=1,t=b(t=S(t,e,i),e);else if(!o&&!a&&n^s){var r=l;n?(m=1,t=S(t,e,i),m=0,l=!1,t=S(t,e,i),l=r):(m=0,t=b(t=S(t,e,i),e),m=1,l=!1,t=S(t,e,i),l=r,t=b(t,e))}}else m=0,t=S(t,e,i)}else m=n?1:0,t=S(t,e,i);return t},this.__bidiEngine__.setOptions=function(t){t&&(o=t.isInputVisual,a=t.isOutputVisual,n=t.isInputRtl,s=t.isOutputRtl,l=t.isSymmetricSwapping)},this.__bidiEngine__.setOptions(t),this.__bidiEngine__};var e=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],i=new t.__bidiEngine__({isInputVisual:!0});t.API.events.push(["postProcessText",function(t){var e=t.text,r=(t.x,t.y,t.options||{}),o=(t.mutex,r.lang,[]);if(r.isInputVisual="boolean"!=typeof r.isInputVisual||r.isInputVisual,i.setOptions(r),"[object Array]"===Object.prototype.toString.call(e)){var n=0;for(o=[],n=0;n<e.length;n+=1)"[object Array]"===Object.prototype.toString.call(e[n])?o.push([i.doBidiReorder(e[n][0]),e[n][1],e[n][2]]):o.push([i.doBidiReorder(e[n])]);t.text=o}else t.text=i.doBidiReorder(e);i.setOptions({isInputVisual:!0})}])}(D),D.API.TTFFont=function(){function t(t){var e;if(this.rawData=t,e=this.contents=new it(t),this.contents.pos=4,"ttcf"===e.readString(4))throw Error("TTCF not supported.");e.pos=0,this.parse(),this.subset=new iw(this),this.registerTTF()}return t.open=function(e){return new t(e)},t.prototype.parse=function(){return this.directory=new ie(this.contents),this.head=new io(this),this.name=new id(this),this.cmap=new is(this),this.toUnicode={},this.hhea=new il(this),this.maxp=new ip(this),this.hmtx=new ig(this),this.post=new iu(this),this.os2=new ih(this),this.loca=new ib(this),this.glyf=new iy(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},t.prototype.registerTTF=function(){var t,e,i,r,o;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var e,i,r,o;for(o=[],e=0,i=(r=this.bbox).length;e<i;e++)t=r[e],o.push(Math.round(t*this.scaleFactor));return o}).call(this),this.stemV=0,this.post.exists?(i=255&(r=this.post.italic_angle),0!=(32768&(e=r>>16))&&(e=-(1+(65535^e))),this.italicAngle=+(e+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=1===(o=this.familyClass)||2===o||3===o||4===o||5===o||7===o,this.isScript=10===this.familyClass,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),0!==this.italicAngle&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw Error("No unicode cmap for font")},t.prototype.characterToGlyph=function(t){var e;return(null!=(e=this.cmap.unicode)?e.codeMap[t]:void 0)||0},t.prototype.widthOfGlyph=function(t){var e;return e=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*e},t.prototype.widthOfString=function(t,e,i){var r,o,n,a;for(n=0,o=0,a=(t=""+t).length;0<=a?o<a:o>a;o=0<=a?++o:--o)r=t.charCodeAt(o),n+=this.widthOfGlyph(this.characterToGlyph(r))+1e3/e*i||0;return e/1e3*n},t.prototype.lineHeight=function(t,e){var i;return null==e&&(e=!1),i=e?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},t}();var ej,eq,eU,eB,ez,eH,eV,eY,eW,eX,eK,eJ,e$,eQ,e0,e1,e2,e5,e4,e6,e3,e8,e7,e9,it=function(){function t(t){this.data=null!=t?t:[],this.pos=0,this.length=this.data.length}return t.prototype.readByte=function(){return this.data[this.pos++]},t.prototype.writeByte=function(t){return this.data[this.pos++]=t},t.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},t.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},t.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},t.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},t.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},t.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},t.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},t.prototype.readString=function(t){var e,i;for(i=[],e=0;0<=t?e<t:e>t;e=0<=t?++e:--e)i[e]=String.fromCharCode(this.readByte());return i.join("")},t.prototype.writeString=function(t){var e,i,r;for(r=[],e=0,i=t.length;0<=i?e<i:e>i;e=0<=i?++e:--e)r.push(this.writeByte(t.charCodeAt(e)));return r},t.prototype.readShort=function(){return this.readInt16()},t.prototype.writeShort=function(t){return this.writeInt16(t)},t.prototype.readLongLong=function(){var t,e,i,r,o,n,a,s;return t=this.readByte(),e=this.readByte(),i=this.readByte(),r=this.readByte(),o=this.readByte(),n=this.readByte(),a=this.readByte(),s=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^e)+1099511627776*(255^i)+4294967296*(255^r)+16777216*(255^o)+65536*(255^n)+256*(255^a)+(255^s)+1):72057594037927940*t+281474976710656*e+1099511627776*i+4294967296*r+16777216*o+65536*n+256*a+s},t.prototype.writeLongLong=function(t){var e,i;return e=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(e>>24&255),this.writeByte(e>>16&255),this.writeByte(e>>8&255),this.writeByte(255&e),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},t.prototype.readInt=function(){return this.readInt32()},t.prototype.writeInt=function(t){return this.writeInt32(t)},t.prototype.read=function(t){var e,i;for(e=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)e.push(this.readByte());return e},t.prototype.write=function(t){var e,i,r,o;for(o=[],i=0,r=t.length;i<r;i++)e=t[i],o.push(this.writeByte(e));return o},t}(),ie=function(){var t;function e(t){var e,i,r;for(this.scalarType=t.readInt(),this.tableCount=t.readShort(),this.searchRange=t.readShort(),this.entrySelector=t.readShort(),this.rangeShift=t.readShort(),this.tables={},i=0,r=this.tableCount;0<=r?i<r:i>r;i=0<=r?++i:--i)e={tag:t.readString(4),checksum:t.readInt(),offset:t.readInt(),length:t.readInt()},this.tables[e.tag]=e}return e.prototype.encode=function(e){var i,r,o,n,a,s,l,h,u,c,f,d,p;for(p in n=Math.floor((u=16*Math.floor(Math.log(f=Object.keys(e).length)/(s=Math.log(2))))/s),h=16*f-u,(r=new it).writeInt(this.scalarType),r.writeShort(f),r.writeShort(u),r.writeShort(n),r.writeShort(h),o=16*f,l=r.pos+o,a=null,d=[],e)for(c=e[p],r.writeString(p),r.writeInt(t(c)),r.writeInt(l),r.writeInt(c.length),d=d.concat(c),"head"===p&&(a=l),l+=c.length;l%4;)d.push(0),l++;return r.write(d),i=2981146554-t(r.data),r.pos=a+8,r.writeUInt32(i),r.data},t=function(t){var e,i,r,o;for(t=im.call(t);t.length%4;)t.push(0);for(r=new it(t),i=0,e=0,o=t.length;e<o;e=e+=4)i+=r.readUInt32();return 4294967295&i},e}(),ii={}.hasOwnProperty,ir=function(t,e){for(var i in e)ii.call(e,i)&&(t[i]=e[i]);function r(){this.constructor=t}return r.prototype=e.prototype,t.prototype=new r,t.__super__=e.prototype,t};e9=function(){function t(t){var e;this.file=t,e=this.file.directory.tables[this.tag],this.exists=!!e,e&&(this.offset=e.offset,this.length=e.length,this.parse(this.file.contents))}return t.prototype.parse=function(){},t.prototype.encode=function(){},t.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},t}();var io=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="head",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.revision=t.readInt(),this.checkSumAdjustment=t.readInt(),this.magicNumber=t.readInt(),this.flags=t.readShort(),this.unitsPerEm=t.readShort(),this.created=t.readLongLong(),this.modified=t.readLongLong(),this.xMin=t.readShort(),this.yMin=t.readShort(),this.xMax=t.readShort(),this.yMax=t.readShort(),this.macStyle=t.readShort(),this.lowestRecPPEM=t.readShort(),this.fontDirectionHint=t.readShort(),this.indexToLocFormat=t.readShort(),this.glyphDataFormat=t.readShort()},e.prototype.encode=function(t){var e;return(e=new it).writeInt(this.version),e.writeInt(this.revision),e.writeInt(this.checkSumAdjustment),e.writeInt(this.magicNumber),e.writeShort(this.flags),e.writeShort(this.unitsPerEm),e.writeLongLong(this.created),e.writeLongLong(this.modified),e.writeShort(this.xMin),e.writeShort(this.yMin),e.writeShort(this.xMax),e.writeShort(this.yMax),e.writeShort(this.macStyle),e.writeShort(this.lowestRecPPEM),e.writeShort(this.fontDirectionHint),e.writeShort(t),e.writeShort(this.glyphDataFormat),e.data},e}(),ia=function(){function t(t,e){var i,r,o,n,a,s,l,h,u,c,f,d,p,g,m,y;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=e+t.readInt(),u=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=3===this.platformID&&1===this.encodingID&&4===this.format||0===this.platformID&&4===this.format,this.codeMap={},this.format){case 0:for(s=0;s<256;++s)this.codeMap[s]=t.readByte();break;case 4:for(c=t.readUInt16()/2,t.pos+=6,o=function(){var e,i;for(i=[],s=e=0;0<=c?e<c:e>c;s=0<=c?++e:--e)i.push(t.readUInt16());return i}(),t.pos+=2,d=function(){var e,i;for(i=[],s=e=0;0<=c?e<c:e>c;s=0<=c?++e:--e)i.push(t.readUInt16());return i}(),l=function(){var e,i;for(i=[],s=e=0;0<=c?e<c:e>c;s=0<=c?++e:--e)i.push(t.readUInt16());return i}(),h=function(){var e,i;for(i=[],s=e=0;0<=c?e<c:e>c;s=0<=c?++e:--e)i.push(t.readUInt16());return i}(),r=(this.length-t.pos+this.offset)/2,a=function(){var e,i;for(i=[],s=e=0;0<=r?e<r:e>r;s=0<=r?++e:--e)i.push(t.readUInt16());return i}(),s=g=0,y=o.length;g<y;s=++g)for(p=o[s],i=m=f=d[s];f<=p?m<=p:m>=p;i=f<=p?++m:--m)0===h[s]?n=i+l[s]:0!==(n=a[h[s]/2+(i-f)-(c-s)]||0)&&(n+=l[s]),this.codeMap[i]=65535&n}t.pos=u}return t.encode=function(t,e){var i,r,o,n,a,s,l,h,u,c,f,d,p,g,m,y,x,v,b,w,_,S,E,A,N,I,M,P,C,T,L,R,O,k,G,Z,F,D,j,q,U,B,z,H,V;switch(M=new it,n=Object.keys(t).sort(function(t,e){return t-e}),e){case"macroman":for(d=0,p=function(){var t=[];for(f=0;f<256;++f)t.push(0);return t}(),m={0:0},o={},P=0,R=n.length;P<R;P++)null==m[B=t[r=n[P]]]&&(m[B]=++d),o[r]={old:t[r],new:m[t[r]]},p[r]=m[t[r]];return M.writeUInt16(1),M.writeUInt16(0),M.writeUInt32(12),M.writeUInt16(0),M.writeUInt16(262),M.writeUInt16(0),M.write(p),{charMap:o,subtable:M.data,maxGlyphID:d+1};case"unicode":for(N=[],u=[],y=0,m={},i={},g=l=null,C=0,O=n.length;C<O;C++)null==m[v=t[r=n[C]]]&&(m[v]=++y),i[r]={old:v,new:m[v]},a=m[v]-r,null!=g&&a===l||(g&&u.push(g),N.push(r),l=a),g=r;for(g&&u.push(g),u.push(65535),N.push(65535),E=2*(S=N.length),_=2*Math.pow(Math.log(S)/Math.LN2,2),w=2*S-_,s=[],b=[],c=[],f=T=0,k=N.length;T<k;f=++T){if(A=N[f],h=u[f],65535===A){s.push(0),b.push(0);break}if(A-(I=i[A].new)>=32768)for(s.push(0),b.push(2*(c.length+S-f)),r=L=A;A<=h?L<=h:L>=h;r=A<=h?++L:--L)c.push(i[r].new);else s.push(I-A),b.push(0)}for(M.writeUInt16(3),M.writeUInt16(1),M.writeUInt32(12),M.writeUInt16(4),M.writeUInt16(16+8*S+2*c.length),M.writeUInt16(0),M.writeUInt16(E),M.writeUInt16(_),M.writeUInt16(Math.log(_/2)/Math.LN2),M.writeUInt16(w),q=0,G=u.length;q<G;q++)r=u[q],M.writeUInt16(r);for(M.writeUInt16(0),U=0,Z=N.length;U<Z;U++)r=N[U],M.writeUInt16(r);for(z=0,F=s.length;z<F;z++)a=s[z],M.writeUInt16(a);for(H=0,D=b.length;H<D;H++)x=b[H],M.writeUInt16(x);for(V=0,j=c.length;V<j;V++)d=c[V],M.writeUInt16(d);return{charMap:i,subtable:M.data,maxGlyphID:y+1}}},t}(),is=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="cmap",e.prototype.parse=function(t){var e,i,r;for(t.pos=this.offset,this.version=t.readUInt16(),r=t.readUInt16(),this.tables=[],this.unicode=null,i=0;0<=r?i<r:i>r;i=0<=r?++i:--i)e=new ia(t,this.offset),this.tables.push(e),e.isUnicode&&null==this.unicode&&(this.unicode=e);return!0},e.encode=function(t,e){var i,r;return null==e&&(e="macroman"),i=ia.encode(t,e),(r=new it).writeUInt16(0),r.writeUInt16(1),i.table=r.data.concat(i.subtable),i},e}(),il=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="hhea",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.ascender=t.readShort(),this.decender=t.readShort(),this.lineGap=t.readShort(),this.advanceWidthMax=t.readShort(),this.minLeftSideBearing=t.readShort(),this.minRightSideBearing=t.readShort(),this.xMaxExtent=t.readShort(),this.caretSlopeRise=t.readShort(),this.caretSlopeRun=t.readShort(),this.caretOffset=t.readShort(),t.pos+=8,this.metricDataFormat=t.readShort(),this.numberOfMetrics=t.readUInt16()},e}(),ih=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="OS/2",e.prototype.parse=function(t){if(t.pos=this.offset,this.version=t.readUInt16(),this.averageCharWidth=t.readShort(),this.weightClass=t.readUInt16(),this.widthClass=t.readUInt16(),this.type=t.readShort(),this.ySubscriptXSize=t.readShort(),this.ySubscriptYSize=t.readShort(),this.ySubscriptXOffset=t.readShort(),this.ySubscriptYOffset=t.readShort(),this.ySuperscriptXSize=t.readShort(),this.ySuperscriptYSize=t.readShort(),this.ySuperscriptXOffset=t.readShort(),this.ySuperscriptYOffset=t.readShort(),this.yStrikeoutSize=t.readShort(),this.yStrikeoutPosition=t.readShort(),this.familyClass=t.readShort(),this.panose=function(){var e,i;for(i=[],e=0;e<10;++e)i.push(t.readByte());return i}(),this.charRange=function(){var e,i;for(i=[],e=0;e<4;++e)i.push(t.readInt());return i}(),this.vendorID=t.readString(4),this.selection=t.readShort(),this.firstCharIndex=t.readShort(),this.lastCharIndex=t.readShort(),this.version>0&&(this.ascent=t.readShort(),this.descent=t.readShort(),this.lineGap=t.readShort(),this.winAscent=t.readShort(),this.winDescent=t.readShort(),this.codePageRange=function(){var e,i;for(i=[],e=0;e<2;e=++e)i.push(t.readInt());return i}(),this.version>1))return this.xHeight=t.readShort(),this.capHeight=t.readShort(),this.defaultChar=t.readShort(),this.breakChar=t.readShort(),this.maxContext=t.readShort()},e}(),iu=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="post",e.prototype.parse=function(t){var e,i,r,o;switch(t.pos=this.offset,this.format=t.readInt(),this.italicAngle=t.readInt(),this.underlinePosition=t.readShort(),this.underlineThickness=t.readShort(),this.isFixedPitch=t.readInt(),this.minMemType42=t.readInt(),this.maxMemType42=t.readInt(),this.minMemType1=t.readInt(),this.maxMemType1=t.readInt(),this.format){case 65536:case 196608:break;case 131072:for(i=t.readUInt16(),this.glyphNameIndex=[],o=0;0<=i?o<i:o>i;o=0<=i?++o:--o)this.glyphNameIndex.push(t.readUInt16());for(this.names=[],r=[];t.pos<this.offset+this.length;)e=t.readByte(),r.push(this.names.push(t.readString(e)));return r;case 151552:return i=t.readUInt16(),this.offsets=t.read(i);case 262144:return this.map=(function(){var e,i,r;for(r=[],o=e=0,i=this.file.maxp.numGlyphs;0<=i?e<i:e>i;o=0<=i?++e:--e)r.push(t.readUInt32());return r}).call(this)}},e}(),ic=function(t,e){this.raw=t,this.length=t.length,this.platformID=e.platformID,this.encodingID=e.encodingID,this.languageID=e.languageID},id=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="name",e.prototype.parse=function(t){var e,i,r,o,n,a,s,l,h,u;for(t.pos=this.offset,t.readShort(),e=t.readShort(),a=t.readShort(),i=[],o=0;0<=e?o<e:o>e;o=0<=e?++o:--o)i.push({platformID:t.readShort(),encodingID:t.readShort(),languageID:t.readShort(),nameID:t.readShort(),length:t.readShort(),offset:this.offset+a+t.readShort()});for(s={},o=l=0,h=i.length;l<h;o=++l)r=i[o],t.pos=r.offset,n=new ic(t.readString(r.length),r),null==s[u=r.nameID]&&(s[u]=[]),s[r.nameID].push(n);this.strings=s,this.copyright=s[0],this.fontFamily=s[1],this.fontSubfamily=s[2],this.uniqueSubfamily=s[3],this.fontName=s[4],this.version=s[5];try{this.postscriptName=s[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch(t){this.postscriptName=s[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=s[7],this.manufacturer=s[8],this.designer=s[9],this.description=s[10],this.vendorUrl=s[11],this.designerUrl=s[12],this.license=s[13],this.licenseUrl=s[14],this.preferredFamily=s[15],this.preferredSubfamily=s[17],this.compatibleFull=s[18],this.sampleText=s[19]},e}(),ip=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="maxp",e.prototype.parse=function(t){return t.pos=this.offset,this.version=t.readInt(),this.numGlyphs=t.readUInt16(),this.maxPoints=t.readUInt16(),this.maxContours=t.readUInt16(),this.maxCompositePoints=t.readUInt16(),this.maxComponentContours=t.readUInt16(),this.maxZones=t.readUInt16(),this.maxTwilightPoints=t.readUInt16(),this.maxStorage=t.readUInt16(),this.maxFunctionDefs=t.readUInt16(),this.maxInstructionDefs=t.readUInt16(),this.maxStackElements=t.readUInt16(),this.maxSizeOfInstructions=t.readUInt16(),this.maxComponentElements=t.readUInt16(),this.maxComponentDepth=t.readUInt16()},e}(),ig=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="hmtx",e.prototype.parse=function(t){var e,i,r,o,n,a,s;for(t.pos=this.offset,this.metrics=[],e=0,a=this.file.hhea.numberOfMetrics;0<=a?e<a:e>a;e=0<=a?++e:--e)this.metrics.push({advance:t.readUInt16(),lsb:t.readInt16()});for(r=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var i,o;for(o=[],e=i=0;0<=r?i<r:i>r;e=0<=r?++i:--i)o.push(t.readInt16());return o}(),this.widths=(function(){var t,e,i,r;for(r=[],t=0,e=(i=this.metrics).length;t<e;t++)o=i[t],r.push(o.advance);return r}).call(this),i=this.widths[this.widths.length-1],s=[],e=n=0;0<=r?n<r:n>r;e=0<=r?++n:--n)s.push(this.widths.push(i));return s},e.prototype.forGlyph=function(t){return t in this.metrics?this.metrics[t]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[t-this.metrics.length]}},e}(),im=[].slice,iy=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="glyf",e.prototype.parse=function(){return this.cache={}},e.prototype.glyphFor=function(t){var e,i,r,o,n,a,s,l,h,u;return t in this.cache?this.cache[t]:(o=this.file.loca,e=this.file.contents,i=o.indexOf(t),0===(r=o.lengthOf(t))?this.cache[t]=null:(e.pos=this.offset+i,n=(a=new it(e.read(r))).readShort(),l=a.readShort(),u=a.readShort(),s=a.readShort(),h=a.readShort(),this.cache[t]=-1===n?new iv(a,l,u,s,h):new ix(a,n,l,u,s,h),this.cache[t]))},e.prototype.encode=function(t,e,i){var r,o,n,a,s;for(n=[],o=[],a=0,s=e.length;a<s;a++)r=t[e[a]],o.push(n.length),r&&(n=n.concat(r.encode(i)));return o.push(n.length),{table:n,offsets:o}},e}(),ix=function(){function t(t,e,i,r,o,n){this.raw=t,this.numberOfContours=e,this.xMin=i,this.yMin=r,this.xMax=o,this.yMax=n,this.compound=!1}return t.prototype.encode=function(){return this.raw.data},t}(),iv=function(){function t(t,e,i,r,o){var n,a;for(this.raw=t,this.xMin=e,this.yMin=i,this.xMax=r,this.yMax=o,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],n=this.raw;a=n.readShort(),this.glyphOffsets.push(n.pos),this.glyphIDs.push(n.readUInt16()),32&a;)n.pos+=1&a?4:2,128&a?n.pos+=8:64&a?n.pos+=4:8&a&&(n.pos+=2)}return t.prototype.encode=function(){var t,e,i;for(e=new it(im.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)e.pos=this.glyphOffsets[t];return e.data},t}(),ib=function(t){function e(){return e.__super__.constructor.apply(this,arguments)}return ir(e,e9),e.prototype.tag="loca",e.prototype.parse=function(t){var e,i;return t.pos=this.offset,e=this.file.head.indexToLocFormat,this.offsets=0===e?(function(){var e,r;for(r=[],i=0,e=this.length;i<e;i+=2)r.push(2*t.readUInt16());return r}).call(this):(function(){var e,r;for(r=[],i=0,e=this.length;i<e;i+=4)r.push(t.readUInt32());return r}).call(this)},e.prototype.indexOf=function(t){return this.offsets[t]},e.prototype.lengthOf=function(t){return this.offsets[t+1]-this.offsets[t]},e.prototype.encode=function(t,e){for(var i=new Uint32Array(this.offsets.length),r=0,o=0,n=0;n<i.length;++n)if(i[n]=r,o<e.length&&e[o]==n){++o,i[n]=r;var a=this.offsets[n],s=this.offsets[n+1]-a;s>0&&(r+=s)}for(var l=Array(4*i.length),h=0;h<i.length;++h)l[4*h+3]=255&i[h],l[4*h+2]=(65280&i[h])>>8,l[4*h+1]=(16711680&i[h])>>16,l[4*h]=(4278190080&i[h])>>24;return l},e}(),iw=function(){function t(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return t.prototype.generateCmap=function(){var t,e,i,r,o;for(e in r=this.font.cmap.tables[0].codeMap,t={},o=this.subset)i=o[e],t[e]=r[i];return t},t.prototype.glyphsFor=function(t){var e,i,r,o,n,a,s;for(r={},n=0,a=t.length;n<a;n++)r[o=t[n]]=this.font.glyf.glyphFor(o);for(o in e=[],r)(null!=(i=r[o])?i.compound:void 0)&&e.push.apply(e,i.glyphIDs);if(e.length>0)for(o in s=this.glyphsFor(e))i=s[o],r[o]=i;return r},t.prototype.encode=function(t,e){var i,r,o,n,a,s,l,h,u,c,f,d,p,g,m;for(r in i=is.encode(this.generateCmap(),"unicode"),n=this.glyphsFor(t),f={0:0},m=i.charMap)f[(s=m[r]).old]=s.new;for(d in c=i.maxGlyphID,n)d in f||(f[d]=c++);return u=Object.keys(h=function(t){var e,i;for(e in i={},t)i[t[e]]=e;return i}(f)).sort(function(t,e){return t-e}),p=function(){var t,e,i;for(i=[],t=0,e=u.length;t<e;t++)a=u[t],i.push(h[a]);return i}(),o=this.font.glyf.encode(n,p,f),l=this.font.loca.encode(o.offsets,p),g={cmap:this.font.cmap.raw(),glyf:o.table,loca:l,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(e)},this.font.os2.exists&&(g["OS/2"]=this.font.os2.raw()),this.font.directory.encode(g)},t}();D.API.PDFObject=function(){var t;function e(){}return t=function(t,e){return(Array(e+1).join("0")+t).slice(-e)},e.convert=function(i){var r,o,n,a;if(Array.isArray(i))return"["+(function(){var t,o,n;for(n=[],t=0,o=i.length;t<o;t++)r=i[t],n.push(e.convert(r));return n})().join(" ")+"]";if("string"==typeof i)return"/"+i;if(null!=i?i.isString:void 0)return"("+i+")";if(i instanceof Date)return"(D:"+t(i.getUTCFullYear(),4)+t(i.getUTCMonth(),2)+t(i.getUTCDate(),2)+t(i.getUTCHours(),2)+t(i.getUTCMinutes(),2)+t(i.getUTCSeconds(),2)+"Z)";if("[object Object]"===({}).toString.call(i)){for(o in n=["<<"],i)a=i[o],n.push("/"+o+" "+e.convert(a));return n.push(">>"),n.join("\n")}return""+i},e}()}),a("kvvuk",function(t,i){e(t.exports,"zlibSync",()=>Q),e(t.exports,"unzlibSync",()=>tt);var r={},o=function(t,e,i,o,n){var a=r[e]||(r[e]=URL.createObjectURL(new Blob([t],{type:"text/javascript"}))),s=new Worker(a);return s.onerror=function(t){return n(t.error,null)},s.onmessage=function(t){return n(null,t.data)},s.postMessage(i,o),s},n=Uint8Array,a=Uint16Array,s=Uint32Array,l=new n([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),h=new n([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),u=new n([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),c=function(t,e){for(var i=new a(31),r=0;r<31;++r)i[r]=e+=1<<t[r-1];for(var o=new s(i[30]),r=1;r<30;++r)for(var n=i[r];n<i[r+1];++n)o[n]=n-i[r]<<5|r;return[i,o]},f=c(l,2),d=f[0],p=f[1];d[28]=258,p[258]=28;for(var g=c(h,0),m=g[0],y=g[1],x=new a(32768),v=0;v<32768;++v){var b=(43690&v)>>>1|(21845&v)<<1;b=(61680&(b=(52428&b)>>>2|(13107&b)<<2))>>>4|(3855&b)<<4,x[v]=((65280&b)>>>8|(255&b)<<8)>>>1}for(var w=function(t,e,i){for(var r,o=t.length,n=0,s=new a(e);n<o;++n)++s[t[n]-1];var l=new a(e);for(n=0;n<e;++n)l[n]=l[n-1]+s[n-1]<<1;if(i){r=new a(1<<e);var h=15-e;for(n=0;n<o;++n)if(t[n])for(var u=n<<4|t[n],c=e-t[n],f=l[t[n]-1]++<<c,d=f|(1<<c)-1;f<=d;++f)r[x[f]>>>h]=u}else for(n=0,r=new a(o);n<o;++n)r[n]=x[l[t[n]-1]++]>>>15-t[n];return r},_=new n(288),v=0;v<144;++v)_[v]=8;for(var v=144;v<256;++v)_[v]=9;for(var v=256;v<280;++v)_[v]=7;for(var v=280;v<288;++v)_[v]=8;for(var S=new n(32),v=0;v<32;++v)S[v]=5;var E=w(_,9,0),A=w(_,9,1),N=w(S,5,0),I=w(S,5,1),M=function(t){for(var e=t[0],i=1;i<t.length;++i)t[i]>e&&(e=t[i]);return e},P=function(t,e,i){var r=e/8>>0;return(t[r]|t[r+1]<<8)>>>(7&e)&i},C=function(t,e){var i=e/8>>0;return(t[i]|t[i+1]<<8|t[i+2]<<16)>>>(7&e)},T=function(t){return(t/8>>0)+(7&t&&1)},L=function(t,e,i){(null==e||e<0)&&(e=0),(null==i||i>t.length)&&(i=t.length);var r=new(t instanceof a?a:t instanceof s?s:n)(i-e);return r.set(t.subarray(e,i)),r},R=function(t,e,i){var r=t.length,o=!e||i,a=!i||i.i;i||(i={}),e||(e=new n(3*r));var s=function(t){var i=e.length;if(t>i){var r=new n(Math.max(2*i,t));r.set(e),e=r}},c=i.f||0,f=i.p||0,p=i.b||0,g=i.l,y=i.d,x=i.m,v=i.n,b=8*r;do{if(!g){i.f=c=P(t,f,1);var _=P(t,f+1,3);if(f+=3,_){if(1==_)g=A,y=I,x=9,v=5;else if(2==_){var S=P(t,f,31)+257,E=P(t,f+10,15)+4,N=S+P(t,f+5,31)+1;f+=14;for(var R=new n(N),O=new n(19),k=0;k<E;++k)O[u[k]]=P(t,f+3*k,7);f+=3*E;var G=M(O),Z=(1<<G)-1;if(!a&&f+N*(G+7)>b)break;for(var F=w(O,G,1),k=0;k<N;){var D=F[P(t,f,Z)];f+=15&D;var j=D>>>4;if(j<16)R[k++]=j;else{var q=0,U=0;for(16==j?(U=3+P(t,f,3),f+=2,q=R[k-1]):17==j?(U=3+P(t,f,7),f+=3):18==j&&(U=11+P(t,f,127),f+=7);U--;)R[k++]=q}}var B=R.subarray(0,S),z=R.subarray(S);x=M(B),v=M(z),g=w(B,x,1),y=w(z,v,1)}else throw"invalid block type"}else{var j=T(f)+4,H=t[j-4]|t[j-3]<<8,V=j+H;if(V>r){if(a)throw"unexpected EOF";break}o&&s(p+H),e.set(t.subarray(j,V),p),i.b=p+=H,i.p=f=8*V;continue}if(f>b)throw"unexpected EOF"}o&&s(p+131072);for(var Y=(1<<x)-1,W=(1<<v)-1,X=x+v+18;a||f+X<b;){var q=g[C(t,f)&Y],K=q>>>4;if((f+=15&q)>b)throw"unexpected EOF";if(!q)throw"invalid length/literal";if(K<256)e[p++]=K;else if(256==K){g=null;break}else{var J=K-254;if(K>264){var k=K-257,$=l[k];J=P(t,f,(1<<$)-1)+d[k],f+=$}var Q=y[C(t,f)&W],tt=Q>>>4;if(!Q)throw"invalid distance";f+=15&Q;var z=m[tt];if(tt>3){var $=h[tt];z+=C(t,f)&(1<<$)-1,f+=$}if(f>b)throw"unexpected EOF";o&&s(p+131072);for(var te=p+J;p<te;p+=4)e[p]=e[p-z],e[p+1]=e[p+1-z],e[p+2]=e[p+2-z],e[p+3]=e[p+3-z];p=te}}i.l=g,i.p=f,i.b=p,g&&(c=1,i.m=x,i.d=y,i.n=v)}while(!c)return p==e.length?e:L(e,0,p)},O=function(t,e,i){i<<=7&e;var r=e/8>>0;t[r]|=i,t[r+1]|=i>>>8},k=function(t,e,i){i<<=7&e;var r=e/8>>0;t[r]|=i,t[r+1]|=i>>>8,t[r+2]|=i>>>16},G=function(t,e){for(var i=[],r=0;r<t.length;++r)t[r]&&i.push({s:r,f:t[r]});var o=i.length,s=i.slice();if(!o)return[new n(0),0];if(1==o){var l=new n(i[0].s+1);return l[i[0].s]=1,[l,1]}i.sort(function(t,e){return t.f-e.f}),i.push({s:-1,f:25001});var h=i[0],u=i[1],c=0,f=1,d=2;for(i[0]={s:-1,f:h.f+u.f,l:h,r:u};f!=o-1;)h=i[i[c].f<i[d].f?c++:d++],u=i[c!=f&&i[c].f<i[d].f?c++:d++],i[f++]={s:-1,f:h.f+u.f,l:h,r:u};for(var p=s[0].s,r=1;r<o;++r)s[r].s>p&&(p=s[r].s);var g=new a(p+1),m=Z(i[f-1],g,0);if(m>e){var r=0,y=0,x=m-e,v=1<<x;for(s.sort(function(t,e){return g[e.s]-g[t.s]||t.f-e.f});r<o;++r){var b=s[r].s;if(g[b]>e)y+=v-(1<<m-g[b]),g[b]=e;else break}for(y>>>=x;y>0;){var w=s[r].s;g[w]<e?y-=1<<e-g[w]++-1:++r}for(;r>=0&&y;--r){var _=s[r].s;g[_]==e&&(--g[_],++y)}m=e}return[new n(g),m]},Z=function(t,e,i){return -1==t.s?Math.max(Z(t.l,e,i+1),Z(t.r,e,i+1)):e[t.s]=i},F=function(t){for(var e=t.length;e&&!t[--e];);for(var i=new a(++e),r=0,o=t[0],n=1,s=function(t){i[r++]=t},l=1;l<=e;++l)if(t[l]==o&&l!=e)++n;else{if(!o&&n>2){for(;n>138;n-=138)s(32754);n>2&&(s(n>10?n-11<<5|28690:n-3<<5|12305),n=0)}else if(n>3){for(s(o),--n;n>6;n-=6)s(8304);n>2&&(s(n-3<<5|8208),n=0)}for(;n--;)s(o);n=1,o=t[l]}return[i.subarray(0,r),e]},D=function(t,e){for(var i=0,r=0;r<e.length;++r)i+=t[r]*e[r];return i},j=function(t,e,i){var r=i.length,o=T(e+2);t[o]=255&r,t[o+1]=r>>>8,t[o+2]=255^t[o],t[o+3]=255^t[o+1];for(var n=0;n<r;++n)t[o+n+4]=i[n];return(o+4+r)*8},q=function(t,e,i,r,o,n,s,c,f,d,p){O(e,p++,i),++o[256];for(var g,m,y,x,v=G(o,15),b=v[0],A=v[1],I=G(n,15),M=I[0],P=I[1],C=F(b),T=C[0],L=C[1],R=F(M),Z=R[0],q=R[1],U=new a(19),B=0;B<T.length;++B)U[31&T[B]]++;for(var B=0;B<Z.length;++B)U[31&Z[B]]++;for(var z=G(U,7),H=z[0],V=z[1],Y=19;Y>4&&!H[u[Y-1]];--Y);var W=d+5<<3,X=D(o,_)+D(n,S)+s,K=D(o,b)+D(n,M)+s+14+3*Y+D(U,H)+(2*U[16]+3*U[17]+7*U[18]);if(W<=X&&W<=K)return j(e,p,t.subarray(f,f+d));if(O(e,p,1+(K<X)),p+=2,K<X){g=w(b,A,0),m=b,y=w(M,P,0),x=M;var J=w(H,V,0);O(e,p,L-257),O(e,p+5,q-1),O(e,p+10,Y-4),p+=14;for(var B=0;B<Y;++B)O(e,p+3*B,H[u[B]]);p+=3*Y;for(var $=[T,Z],Q=0;Q<2;++Q)for(var tt=$[Q],B=0;B<tt.length;++B){var te=31&tt[B];O(e,p,J[te]),p+=H[te],te>15&&(O(e,p,tt[B]>>>5&127),p+=tt[B]>>>12)}}else g=E,m=_,y=N,x=S;for(var B=0;B<c;++B)if(r[B]>255){var te=r[B]>>>18&31;k(e,p,g[te+257]),p+=m[te+257],te>7&&(O(e,p,r[B]>>>23&31),p+=l[te]);var ti=31&r[B];k(e,p,y[ti]),p+=x[ti],ti>3&&(k(e,p,r[B]>>>5&8191),p+=h[ti])}else k(e,p,g[r[B]]),p+=m[r[B]];return k(e,p,g[256]),p+m[256]},U=new s([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),B=new n(0),z=function(t,e,i,r,o,u){var c=t.length,f=new n(r+c+5*(1+Math.floor(c/7e3))+o),d=f.subarray(r,f.length-o),g=0;if(!e||c<8)for(var m=0;m<=c;m+=65535){var x=m+65535;x<c?g=j(d,g,t.subarray(m,x)):(d[m]=u,g=j(d,g,t.subarray(m,c)))}else{for(var v=U[e-1],b=v>>>13,w=8191&v,_=(1<<i)-1,S=new a(32768),E=new a(_+1),A=Math.ceil(i/3),N=2*A,I=function(e){return(t[e]^t[e+1]<<A^t[e+2]<<N)&_},M=new s(25e3),P=new a(288),C=new a(32),R=0,O=0,m=0,k=0,G=0,Z=0;m<c;++m){var F=I(m),D=32767&m,z=E[F];if(S[D]=z,E[F]=D,G<=m){var H=c-m;if((R>7e3||k>24576)&&H>423){g=q(t,d,0,M,P,C,O,k,Z,m-Z,g),k=R=O=0,Z=m;for(var V=0;V<286;++V)P[V]=0;for(var V=0;V<30;++V)C[V]=0}var Y=2,W=0,X=w,K=D-z&32767;if(H>2&&F==I(m-K))for(var J=Math.min(b,H)-1,$=Math.min(32767,m),Q=Math.min(258,H);K<=$&&--X&&D!=z;){if(t[m+Y]==t[m+Y-K]){for(var tt=0;tt<Q&&t[m+tt]==t[m+tt-K];++tt);if(tt>Y){if(Y=tt,W=K,tt>J)break;for(var te=Math.min(K,tt-2),ti=0,V=0;V<te;++V){var tr=m-K+V+32768&32767,to=S[tr],tn=tr-to+32768&32767;tn>ti&&(ti=tn,z=tr)}}}z=S[D=z],K+=D-z+32768&32767}if(W){M[k++]=268435456|p[Y]<<18|y[W];var ta=31&p[Y],ts=31&y[W];O+=l[ta]+h[ts],++P[257+ta],++C[ts],G=m+Y,++R}else M[k++]=t[m],++P[t[m]]}}g=q(t,d,u,M,P,C,O,k,Z,m-Z,g),u||(g=j(d,g,B))}return L(f,0,r+T(g)+o)},H=function(){var t=1,e=0;return{p:function(i){for(var r=t,o=e,n=i.length,a=0;a!=n;){for(var s=Math.min(a+5552,n);a<s;++a)r+=i[a],o+=r;r%=65521,o%=65521}t=r,e=o},d:function(){return(t>>>8<<16|(255&e)<<8|e>>>8)+((255&t)<<23)*2}}},V=function(t,e){var i={};for(var r in t)i[r]=t[r];for(var r in e)i[r]=e[r];return i},Y=function(t,e,i){for(var r=t(),o=t.toString(),n=o.slice(o.indexOf("[")+1,o.lastIndexOf("]")).replace(/ /g,"").split(","),a=0;a<r.length;++a){var s=r[a],l=n[a];if("function"==typeof s){e+=";"+l+"=";var h=s.toString();if(s.prototype){if(-1!=h.indexOf("[native code]")){var u=h.indexOf(" ",8)+1;e+=h.slice(u,h.indexOf("(",u))}else for(var c in e+=h,s.prototype)e+=";"+l+".prototype."+c+"="+s.prototype[c].toString()}else e+=h}else i[l]=s}return[e,i]},W=[],X=function(t){var e=[];for(var i in t)(t[i]instanceof n||t[i]instanceof a||t[i]instanceof s)&&e.push((t[i]=new t[i].constructor(t[i])).buffer);return e},K=function(t,e,i){for(;i;++e)t[e]=i,i>>>=8},J=function(t,e){var i=e.level,r=0==i?0:i<6?1:9==i?3:2;t[0]=120,t[1]=r<<6|(r?32-2*r:1)},$=function(t){if((15&t[0])!=8||t[0]>>>4>7||(t[0]<<8|t[1])%31)throw"invalid zlib data";if(32&t[1])throw"invalid zlib data: preset dictionaries not supported"};function Q(t,e){void 0===e&&(e={});var i,r,o,n,a,s=H();s.p(t);var l=(o=2,n=4,z(i=t,null==(r=e).level?6:r.level,null==r.mem?Math.ceil(1.5*Math.max(8,Math.min(13,Math.log(i.length)))):12+r.mem,2,4,true));return J(l,e),K(l,l.length-4,s.d()),l}function tt(t,e){return R(($(t),t.subarray(2,-4)),e)}}),a("dNJ6r",function(t,e){var i=n("2ozqO");t.exports=i("cibnX").then(()=>n("9d6XQ"))}),a("2ozqO",function(t,e){t.exports=function(t){return import(n("dRo73").resolve(t))}}),a("dRo73",function(t,i){e(t.exports,"register",()=>r,t=>r=t),e(t.exports,"resolve",()=>o,t=>o=t);var r,o,n=new Map;r=function(t,e){for(var i=0;i<e.length-1;i+=2)n.set(e[i],{baseUrl:t,path:e[i+1]})},o=function(t){var e=n.get(t);if(null==e)throw Error("Could not resolve bundle with id "+t);return new URL(e.path,e.baseUrl).toString()}}),a("cusDh",function(t,e){var i=n("2ozqO");t.exports=i("dB2vH").then(()=>n("fgoI4"))}),a("4s1Fc",function(t,e){var i=n("2ozqO");t.exports=i("jyybT").then(()=>n("hTqfs"))}),a("9BdHO",function(t,e){var i=n("4QhZh");i.default.prototype.flyTo&&console.warn("[OL-EXT] ol/View~View.flyTo redefinition"),i.default.prototype.flyTo=function(t,e){t=t||{},this.cancelAnimations();var i=t.duration||2e3,r=t.zoomAt||Math.min(t.zoom||100,this.getZoom())-2,o=t.zoom||this.getZoom(),n=t.center||this.getCenter();this.animate({center:n,duration:i,easing:t.easing,anchor:t.anchor,rotation:t.rotation}),this.animate({zoom:r,duration:i/2,easing:t.easing,anchor:t.anchor},{zoom:o,duration:i/2,easing:t.easing,anchor:t.anchor},"function"==typeof e?e:function(){})},i.default.prototype.takeTour=function(t,e){e=e||{};var i=-1,r=(function(o){if(o){var n=t[++i];if("function"==typeof e.step&&e.step(i,t),n){n instanceof Array&&(n={center:[n[0],n[1]],zoom:n[2],type:n[3]});var a=0===i?0:e.delay||750;n.easing||(n.easing=e.easing),n.type||(n.type=e.type),setTimeout((function(){"moveTo"===n.type?this.animate(n,r):this.flyTo(n,r)}).bind(this),a)}else"function"==typeof e.done&&e.done(!0)}else"function"==typeof e.done&&e.done(!1)}).bind(this);r(!0)},i.default}),a("76Eer",function(t,i){e(t.exports,"default",()=>x);var r=n("8rtB0"),o=n("jilwQ"),a=n("iQyfo"),s=n("4kBVU"),l=n("l9IGS"),h=n("h6Aha"),u=n("d5AAH"),c=n("2zf1Y"),f=n("610XN"),d=n("20LS2"),p=n("iGyOD"),g=n("j2K3b"),m=n("hvEnP");o.default.prototype.info={zmin:"Zmin ",zmax:"Zmax ",ytitle:"Altitude (m) ",xtitle:"Distance (km) ",time:"Temps ",altitude:"Altitude ",distance:"Distance ",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"};class y extends r.default{constructor(t){super({html:'<i class="fg-profile"></i>',className:"profilBt",onToggle:t=>{t&&this.showSelect()}}),this.select=t.select,this.select.on("select",()=>{this.showSelect()}),this.content=(0,a.default).create("DIV",{className:"profil",parent:this.element}),(0,a.default).create("DIV",{className:"profil-info",html:"Sélectionnez une ligne sur la carte...",parent:this.content}),(0,a.default).create("DIV",{className:"profil-error",html:"Impossible de calculer l'altitude...",parent:this.content}),this.profil=new o.default({target:this.content,style:new l.default({fill:new c.default({color:"#ccc"})}),width:400,height:200}),t.map.addControl(this.profil);let e=new f.default({source:new d.default,visible:!1,map:t.map,style:new l.default({image:new h.default({radius:10,radius2:5,points:5,stroke:new u.default({color:[255,255,255,.8],width:1.5}),fill:new c.default({color:[255,0,0,.5]})})})}),i=new p.default(new g.default([0,0]));e.getSource().addFeature(i),this.profil.on("over",t=>{i.getGeometry().setCoordinates(t.coord),e.setVisible(!0)}),this.profil.on(["out","change:active"],()=>{e.setVisible(!1)})}}y.prototype.showSelect=function(){let t;if(!this.getActive())return;let e=this.select.getFeatures().item(0);if(e&&this.feature===e){this.content.className="profil";return}if(e&&(t=e.getGeometry()).getLineString&&(t=t.getLineString()),t&&"LineString"===t.getType()){if(/Z/.test(t.getLayout()))this.content.className="profil",this.profil.setGeometry(t,{amplitude:500,zmin:0});else{let e=t.getCoordinates();if(e.length>600){let t=600/e.length,i=0,r=e;e=[],r.forEach((r,o)=>{i+1<o*t&&(e.push(r),i++)})}let i=[];if(e.length<=200)i.push(t);else for(let t=0;t<e.length/200;t++){let r=e.slice(200*t,(t+1)*200+1);r.length>1&&i.push(new m.default(r))}this.content.className="profil loading",this._alticode(i,[])}this.feature=e}else this.content.className="profil hidden"},y.prototype._alticode=function(t,e){let i=t.shift();(0,s.ol_geom_GPAltiCode)(i,{sampling:100,samplingDist:500,success:i=>{e.push(i.getCoordinates()),t.length?this._alticode(t,e):(e.length>1&&(i=new m.default(Array.prototype.concat.apply([],e))),this.content.className="profil",this.profil.setGeometry(i,{amplitude:500,zmin:0}))},error:()=>{this.content.className="profil error"}})};var x=y}),a("jilwQ",function(t,i){e(t.exports,"default",()=>m);var r=n("7qu5m"),o=n("gzr8q"),a=n("4DafG"),s=n("iGyOD"),l=n("2zf1Y"),h=n("l9IGS"),u=n("d5AAH"),c=n("kuKBR"),f=n("hvEnP"),d=n("23ytq"),p=n("iQyfo"),g=class extends a.default{constructor(t){t=t||{};var e,i,r=document.createElement("div");super({element:r,target:t.target});var o=this;if(this.info=t.info||g.prototype.info,t.target)r.classList.add(t.className||"ol-profil");else{r.className=((t.className||"ol-profil")+" ol-unselectable ol-control ol-collapsed").trim(),this.button=document.createElement("button"),this.button.title=t.title||"Profile",this.button.setAttribute("type","button");var n=function(t){o.toggle(),t.preventDefault()};this.button.addEventListener("click",n),this.button.addEventListener("touchstart",n),r.appendChild(this.button),(0,p.default).create("I",{parent:this.button})}t.style instanceof h.default?this._style=t.style:this._style=new h.default({text:new c.default,stroke:new u.default({width:1.5,color:"#369"})}),this._style.getText()||this._style.setText(new c.default),t.selectStyle instanceof h.default?this._selectStyle=t.selectStyle:this._selectStyle=new h.default({fill:new l.default({color:"#369"})});var a=document.createElement("div");a.classList.add("ol-inner"),r.appendChild(a);var s=document.createElement("div");s.style.position="relative",a.appendChild(s);var d=this.ratio=2;this.canvas_=document.createElement("canvas"),this.canvas_.width=(t.width||300)*d,this.canvas_.height=(t.height||150)*d;var m={msTransform:"scale(0.5,0.5)",msTransformOrigin:"0 0",webkitTransform:"scale(0.5,0.5)",webkitTransformOrigin:"0 0",mozTransform:"scale(0.5,0.5)",mozTransformOrigin:"0 0",transform:"scale(0.5,0.5)",transformOrigin:"0 0"};Object.keys(m).forEach(function(t){t in o.canvas_.style&&(o.canvas_.style[t]=m[t])});var y=document.createElement("div");s.appendChild(y),y.style.width=this.canvas_.width/d+"px",y.style.height=this.canvas_.height/d+"px",y.appendChild(this.canvas_),y.addEventListener("pointerdown",this.onMove.bind(this)),document.addEventListener("pointerup",this.onMove.bind(this)),y.addEventListener("mousemove",this.onMove.bind(this)),y.addEventListener("touchmove",this.onMove.bind(this)),this.set("selectable",t.selectable),this.margin_={top:10*d,left:45*d,bottom:30*d,right:10*d},this.info.ytitle||(this.margin_.left-=20*d),this.info.xtitle||(this.margin_.bottom-=20*d),this.bar_=document.createElement("div"),this.bar_.classList.add("ol-profilbar"),this.bar_.style.top=this.margin_.top/d+"px",this.bar_.style.height=(this.canvas_.height-this.margin_.top-this.margin_.bottom)/d+"px",s.appendChild(this.bar_),this.cursor_=document.createElement("div"),this.cursor_.classList.add("ol-profilcursor"),s.appendChild(this.cursor_),this.popup_=document.createElement("div"),this.popup_.classList.add("ol-profilpopup"),this.cursor_.appendChild(this.popup_);var x=document.createElement("table");x.cellPadding="0",x.cellSpacing="0",x.style.clientWidth=this.canvas_.width/d+"px",s.appendChild(x);var v=document.createElement("tr");v.classList.add("track-info"),x.appendChild(v);var b=document.createElement("td");b.innerHTML=(this.info.zmin||"Zmin")+': <span class="zmin">',v.appendChild(b);var w=document.createElement("td");w.innerHTML=(this.info.zmax||"Zmax")+': <span class="zmax">',v.appendChild(w);var _=document.createElement("td");_.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',v.appendChild(_);var S=document.createElement("td");S.innerHTML=(this.info.time||"Time")+': <span class="time">',v.appendChild(S);var E=document.createElement("tr");E.classList.add("point-info"),x.appendChild(E);var A=document.createElement("td");A.innerHTML=(this.info.altitude||"Altitude")+': <span class="z">',E.appendChild(A);var N=document.createElement("td");N.innerHTML=(this.info.distance||"Distance")+': <span class="dist">',E.appendChild(N);var I=document.createElement("td");I.innerHTML=(this.info.time||"Time")+': <span class="time">',E.appendChild(I),this.tab_=[],t.feature&&this.setGeometry(t.feature),t.zoomable&&(this.set("selectable",!0),this.on("change:geometry",function(){i=null}),this.on("dragstart",function(t){e=t.index}),this.on("dragend",(function(t){if(Math.abs(e-t.index)>10){if(!i)var o=(0,p.default).create("BUTTON",{parent:r,className:"ol-zoom-out",click:(function(t){t.stopPropagation(),t.preventDefault(),i&&(this.dispatchEvent({type:"zoom"}),this.setGeometry(i,this._geometry[1])),r.removeChild(o)}).bind(this)});var n=i||this._geometry[0],a=new f.default(this.getSelection(e,t.index));this.setGeometry(a,this._geometry[1]),i=n,this.dispatchEvent({type:"zoom",geometry:a,start:e,end:t.index})}}).bind(this)))}popup(t){this.popup_.innerHTML=t}_drawAt(t,e){t?(this.cursor_.style.left=e+"px",this.cursor_.style.top=(this.canvas_.height-this.margin_.bottom+t[1]*this.scale_[1]+this.dy_)/this.ratio+"px",this.cursor_.style.display="block",this.bar_.parentElement.classList.add("over"),this.bar_.style.left=e+"px",this.bar_.style.display="block",this.element.querySelector(".point-info .z").textContent=t[1]+this.info.altitudeUnits,this.element.querySelector(".point-info .dist").textContent=(t[0]/1e3).toFixed(1)+this.info.distanceUnitsKM,this.element.querySelector(".point-info .time").textContent=t[2],e>this.canvas_.width/this.ratio/2?this.popup_.classList.add("ol-left"):this.popup_.classList.remove("ol-left")):(this.cursor_.style.display="none",this.bar_.style.display="none",this.cursor_.style.display="none",this.bar_.parentElement.classList.remove("over"))}showAt(t){var e,i,r,o=1/0;if(void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else if(t.length)for(e=1;i=this.tab_[e];e++){var n=(0,d.ol_coordinate_dist2d)(i[3],t);n<o&&(r=i,o=n)}else for(e=0;(i=this.tab_[e])&&(r=i,!(i[0]>=t));e++);if(r){var a=(r[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(r,a),r[3]}return null}showAtTime(t,e){var i,r,o;if(t instanceof Date?t=t.getTime()/1e3:e&&(t+=this.tab_[0][3][3]),void 0===t)this.bar_.parentElement.classList.contains("over")&&this._drawAt();else for(i=0;(r=this.tab_[i])&&(o=r,!(r[3][3]>=t));i++);if(o){var n=(o[0]*this.scale_[0]+this.margin_.left)/this.ratio;return this._drawAt(o,n),o[3]}return null}pointAtTime(t){var e,i;for(e=1;i=this.tab_[e];e++){var r=i[3][3];if(r>=t){var o=this.tab_[e-1][3];if((o[3]+r)/2<t)return o;return i}}return this.tab_[this.tab_.length-1][3]}onMove(t){if(this.tab_.length){var e=this.canvas_.getBoundingClientRect(),i={top:e.top+window.pageYOffset-document.documentElement.clientTop,left:e.left+window.pageXOffset-document.documentElement.clientLeft},r=t.pageX||t.touches&&t.touches.length&&t.touches[0].pageX||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageX,o=t.pageY||t.touches&&t.touches.length&&t.touches[0].pageY||t.changedTouches&&t.changedTouches.length&&t.changedTouches[0].pageY,n=r-i.left,a=o-i.top,s=this.ratio;if(n>this.margin_.left/s-20&&n<(this.canvas_.width-this.margin_.right)/s+8&&a>this.margin_.top/s&&a<(this.canvas_.height-this.margin_.bottom)/s){var l,h,u=(n*s-this.margin_.left)/this.scale_[0],c=this.tab_[0];for(l=1;h=this.tab_[l];l++)if(h[0]>=u){u<(h[0]+c[0])/2&&(l=0,h=c);break}switch(h||(h=this.tab_[this.tab_.length-1]),n=Math.max(this.margin_.left/s,Math.min(n,(this.canvas_.width-this.margin_.right)/s)),this._drawAt(h,n),this.dispatchEvent({type:"over",click:"click"===t.type,index:l,coord:h[3],time:h[2],distance:h[0]}),t.type){case"pointerdown":this._dragging={event:{type:"dragstart",index:l,coord:h[3],time:h[2],distance:h[0]},pageX:r,pageY:o};break;case"pointerup":this._dragging&&this._dragging.pageX?3>Math.abs(this._dragging.pageX-r)&&3>Math.abs(this._dragging.pageY-o)&&(this.dispatchEvent({type:"click",index:l,coord:h[3],time:h[2],distance:h[0]}),this.refresh()):this.dispatchEvent({type:"dragend",index:l,coord:h[3],time:h[2],distance:h[0]}),this._dragging=!1;break;default:if(this._dragging){if(this._dragging.pageX)(Math.abs(this._dragging.pageX-r)>3||Math.abs(this._dragging.pageY-o)>3)&&(this._dragging.pageX=this._dragging.pageY=!1,this.dispatchEvent(this._dragging.event));else{this.dispatchEvent({type:"dragging",index:l,coord:h[3],time:h[2],distance:h[0]});var f=Math.min(this._dragging.event.index,l),d=Math.max(this._dragging.event.index,l);this.refresh(),this.get("selectable")&&this._drawGraph(this.tab_.slice(f,d),this._selectStyle)}}}}else this.bar_.parentElement.classList.contains("over")&&(this._drawAt(),this.dispatchEvent({type:"out"})),"pointerup"===t.type&&this._dragging&&(this.dispatchEvent({type:"dragcancel"}),this._dragging=!1)}}show(){this.element.classList.remove("ol-collapsed"),this.dispatchEvent({type:"show",show:!0})}hide(){this.element.classList.add("ol-collapsed"),this.dispatchEvent({type:"show",show:!1})}toggle(){this.element.classList.toggle("ol-collapsed");var t=this.element.classList.contains("ol-collapsed");this.dispatchEvent({type:"show",show:!t})}isShown(){return!this.element.classList.contains("ol-collapsed")}getSelection(t,e){for(var i=[],r=Math.max(Math.min(t,e),0),o=Math.min(Math.max(t,e),this.tab_.length-1),n=r;n<=o;n++)i.push(this.tab_[n][3]);return i}_drawGraph(t,e){if(t.length){var i,r,o=this.canvas_.getContext("2d"),n=this.scale_[0],a=this.scale_[1],s=this.dy_,l=this.ratio;for(o.beginPath(),i=0;r=t[i];i++)0==i?o.moveTo(r[0]*n,r[1]*a+s):o.lineTo(r[0]*n,r[1]*a+s);e.getStroke()&&(o.strokeStyle=e.getStroke().getColor()||"#000",o.lineWidth=e.getStroke().getWidth()*l,o.setLineDash([]),o.stroke()),e.getFill()&&(o.fillStyle=e.getFill().getColor()||"#000",o.Style=e.getFill().getColor()||"#000",o.lineTo(t[t.length-1][0]*n,0),o.lineTo(t[0][0]*n,0),o.fill())}}setGeometry(t,e){if(e||(e={}),t instanceof s.default&&(t=t.getGeometry()),this._geometry=[t,e],/Z/.test(t.getLayout())){/M/.test(t.getLayout())?this.element.querySelector(".time").parentElement.style.display="block":this.element.querySelector(".time").parentElement.style.display="none";var i,n,a=t.getCoordinates();switch(t.getType()){case"LineString":break;case"MultiLineString":a=a[0];break;default:return}var l,h,u,c,f,d=e.projection||this.getMap().getView().getProjection(),p=1/0,g=-1/0,m=this.tab_=[];for(l=0;h=a[l];l++)(c=h[2])<p&&(p=c),c>g&&(g=c),0==l?u=0:u+=(i=a[l-1],n=h,(0,r.getDistance)((0,o.transform)(i,d,"EPSG:4326"),(0,o.transform)(n,d,"EPSG:4326"))),f=function(t,e){if(!t||!e)return"-";var i=(e-t)/60,r=Math.trunc(i/60),o=Math.trunc(i-60*r);return r+"h"+(o<10?"0":"")+o+"mn"}(a[0][3],h[3]),m.push([u,c,f,h]);this._z=[p,g],this.set("graduation",e.graduation||100),this.set("zmin",e.zmin),this.set("zmax",e.zmax),this.set("amplitude",e.amplitude),this.set("unit",e.unit),this.set("zunit",e.zunit),this.set("zDigits",e.zDigits),this.set("zMaxChars",e.zMaxChars),this.dispatchEvent({type:"change:geometry",geometry:t}),this.refresh()}}refresh(){var t,e,i,r=this.canvas_,o=r.getContext("2d"),n=r.width,a=r.height;o.setTransform(1,0,0,1,0,0),o.clearRect(0,0,n,a);var s=this._z[0],l=this._z[1],h=this.tab_,u=h[h.length-1][0],c=h[h.length-1][2];if(!u){console.error("[ol/control/Profil] no data...",h);return}o.setTransform(1,0,0,1,this.margin_.left,a-this.margin_.bottom);var f=this.ratio;n-=this.margin_.right+this.margin_.left,a-=this.margin_.top+this.margin_.bottom,o.strokeStyle=this._style.getText().getFill().getColor()||"#000",o.lineWidth=.5*f,o.beginPath(),o.moveTo(0,0),o.lineTo(0,-a),o.moveTo(0,0),o.lineTo(n,0),o.stroke(),this.element.querySelector(".track-info .zmin").textContent=s.toFixed(2)+this.info.altitudeUnits,this.element.querySelector(".track-info .zmax").textContent=l.toFixed(2)+this.info.altitudeUnits,u>1e3?this.element.querySelector(".track-info .dist").textContent=(u/1e3).toFixed(1)+this.info.distanceUnitsKM:this.element.querySelector(".track-info .dist").textContent=u.toFixed(1)+this.info.distanceUnitsM,this.element.querySelector(".track-info .time").textContent=c;for(var d=this.get("graduation");;)if(a/(((l=Math.ceil(l/d)*d)-(s=Math.floor(s/d)*d))/d)<15*f)d*=2;else break;"number"==typeof this.get("zmin")&&s>this.get("zmin")&&(s=this.get("zmin")),"number"==typeof this.get("zmax")&&l<this.get("zmax")&&(l=this.get("zmax"));var p=this.get("amplitude");p&&(l=Math.max(s+p,l));var g=n/u,m=-a/(l-s),y=this.dy_=-s*m;this.scale_=[g,m],this._drawGraph(h,this._style),o.textAlign="right",o.textBaseline="top",o.fillStyle=this._style.getText().getFill().getColor()||"#000",o.beginPath();var x=this.get("zDigits")||0,v=null;if("number"==typeof this.get("zMaxChars")&&(e="km"!=this.get("zunit")?Math.max(s.toFixed(x).length,l.toFixed(x).length):Math.max((s/1e3).toFixed(1).length,(l/1e3).toFixed(1).length),this.get("zMaxChars")<e)){v=Math.floor(Math.log10(Math.max(Math.abs(s),Math.abs(l),Number.MIN_VALUE))),o.font="bold "+9*f+"px arial",o.fillText(v.toString(),-8*f,8*f);var b=o.measureText(v.toString()),w=b.width,_=b.actualBoundingBoxAscent+b.actualBoundingBoxDescent;o.font="bold "+12*f+"px arial",o.fillText("10",-8*f-w,8*f+.5*_)}for(o.font=10*f+"px arial",o.textBaseline="middle",t=s;t<=l;t+=d){if(null!==v){var S=t/Math.pow(10,v);"km"==this.get("zunit")&&(S/=1e3);var E=this.get("zMaxChars")-Math.floor(Math.log10(Math.max(Math.abs(S),1))+1)-1;S<0&&(E-=1),this.get("zunit"),o.fillText(S.toFixed(Math.max(E,0)),-4*f,t*m+y)}else"km"!=this.get("zunit")?o.fillText(t.toFixed(x),-4*f,t*m+y):o.fillText((t/1e3).toFixed(1),-4*f,t*m+y);o.moveTo(-2*f,t*m+y),0!=t?o.lineTo(u*g,t*m+y):o.lineTo(0,t*m+y)}o.textAlign="center",o.textBaseline="top",o.setLineDash([f,3*f]);var A=this.get("unit")||"km";for(u>1e3?(i=100*Math.round(u/1e3))>1e3&&(i=1e3*Math.ceil(i/1e3)):(A="m",i=u>100?10*Math.round(u/100):u>10?Math.round(u/10):u>1?Math.round(u)/10:u),t=0;t<=u;t+=i){var N="m"==A?t:t/1e3;o.fillText(Math.round(10*N)/10,t*g,4*f),o.moveTo(t*g,2*f),o.lineTo(t*g,0)}o.font=12*f+"px arial",o.fillText(this.info.xtitle.replace("(km)","("+A+")"),n/2,18*f),o.save(),o.rotate(-Math.PI/2),o.fillText(this.info.ytitle,a/2,-this.margin_.left),o.restore(),o.stroke()}getImage(t,e){return"canvas"===t?this.canvas_:this.canvas_.toDataURL(t,e)}};g.prototype.info={zmin:"Zmin",zmax:"Zmax",ytitle:"Altitude (m)",xtitle:"Distance (km)",time:"Time",altitude:"Altitude",distance:"Distance",altitudeUnits:"m",distanceUnitsM:"m",distanceUnitsKM:"km"};var m=g}),a("4kBVU",function(t,i){e(t.exports,"ol_geom_GPAltiCode",()=>a);var r=n("fkmMz"),o=n("23ytq");n("j2K3b"),n("hvEnP");var a=function(t,e){e=e||{};var i=t.getType();if("Point"!==i&&"LineString"!==i){console.warn("[GPAltiCode] "+i+" not supported...");return}var n=e.projection||"EPSG:3857",a=e.sampling||0;if(e.samplingDist){var s=t.getLength();a=Math.max(a,Math.round(s/e.samplingDist))}a>5e3&&(a=5e3),a<2&&(a=0),t=t.clone().transform(n,"EPSG:4326");var l,h=[],u=[];switch(i){case"Point":l=[t.getCoordinates()];break;case"LineString":l=t.getCoordinates();break;default:return}a<=l.length&&(a=0),l.forEach(function(t){h.push(Math.round(1e6*t[0])/1e6),u.push(Math.round(1e6*t[1])/1e6)});var c="lon="+h.join("|")+"&lat="+u.join("|");a&&(c+="&sampling="+a),(0,r.default).get({url:"https://wxs.ign.fr/"+(e.apiKey||"essentiels")+"/alti/rest/"+(h.length>1?"elevationLine":"elevation")+".json?"+c,success:function(t){var r=[];t.elevations.forEach(function(t,e){a?r.push([t.lon,t.lat,t.z]):r.push([l[e][0],l[e][1],t.z])}),"Point"===i&&(r=r[0]);var s=(0,o.ol_geom_createFromType)(i,r);s.transform("EPSG:4326",n),"function"==typeof e.success&&e.success(s)},error:function(t){"function"==typeof e.error&&e.error(t)}})}}),a("66krt",function(t,e){var i,r;i=t.exports,r=function(){for(var t=[null,[[10,7,17,13],[1,1,1,1],[]],[[16,10,28,22],[1,1,1,1],[4,16]],[[26,15,22,18],[1,1,2,2],[4,20]],[[18,20,16,26],[2,1,4,2],[4,24]],[[24,26,22,18],[2,1,4,4],[4,28]],[[16,18,28,24],[4,2,4,4],[4,32]],[[18,20,26,18],[4,2,5,6],[4,20,36]],[[22,24,26,22],[4,2,6,6],[4,22,40]],[[22,30,24,20],[5,2,8,8],[4,24,44]],[[26,18,28,24],[5,4,8,8],[4,26,48]],[[30,20,24,28],[5,4,11,8],[4,28,52]],[[22,24,28,26],[8,4,11,10],[4,30,56]],[[22,26,22,24],[9,4,16,12],[4,32,60]],[[24,30,24,20],[9,4,16,16],[4,24,44,64]],[[24,22,24,30],[10,6,18,12],[4,24,46,68]],[[28,24,30,24],[10,6,16,17],[4,24,48,72]],[[28,28,28,28],[11,6,19,16],[4,28,52,76]],[[26,30,28,28],[13,6,21,18],[4,28,54,80]],[[26,28,26,26],[14,7,25,21],[4,28,56,84]],[[26,28,28,30],[16,8,25,20],[4,32,60,88]],[[26,28,30,28],[17,8,25,23],[4,26,48,70,92]],[[28,28,24,30],[17,9,34,23],[4,24,48,72,96]],[[28,30,30,30],[18,9,30,25],[4,28,52,76,100]],[[28,30,30,30],[20,10,32,27],[4,26,52,78,104]],[[28,26,30,30],[21,12,35,29],[4,30,56,82,108]],[[28,28,30,28],[23,12,37,34],[4,28,56,84,112]],[[28,30,30,30],[25,12,40,34],[4,32,60,88,116]],[[28,30,30,30],[26,13,42,35],[4,24,48,72,96,120]],[[28,30,30,30],[28,14,45,38],[4,28,52,76,100,124]],[[28,30,30,30],[29,15,48,40],[4,24,50,76,102,128]],[[28,30,30,30],[31,16,51,43],[4,28,54,80,106,132]],[[28,30,30,30],[33,17,54,45],[4,32,58,84,110,136]],[[28,30,30,30],[35,18,57,48],[4,28,56,84,112,140]],[[28,30,30,30],[37,19,60,51],[4,32,60,88,116,144]],[[28,30,30,30],[38,19,63,53],[4,28,52,76,100,124,148]],[[28,30,30,30],[40,20,66,56],[4,22,48,74,100,126,152]],[[28,30,30,30],[43,21,70,59],[4,26,52,78,104,130,156]],[[28,30,30,30],[45,22,74,62],[4,30,56,82,108,134,160]],[[28,30,30,30],[47,24,77,65],[4,24,52,80,108,136,164]],[[28,30,30,30],[49,25,81,68],[4,28,56,84,112,140,168]]],e=/^\d*$/,i=/^[A-Za-z0-9 $%*+\-./:]*$/,r=/^[A-Z0-9 $%*+\-./:]*$/,o=[],n=[-1],a=0,s=1;a<255;++a)o.push(s),n[s]=a,s=2*s^(s>=128?285:0);for(var l=[[]],a=0;a<30;++a){for(var h=l[a],u=[],c=0;c<=a;++c){var f=c<a?o[h[c]]:0,d=o[(a+(h[c-1]||0))%255];u.push(n[f^d])}l.push(u)}for(var p={},a=0;a<45;++a)p["0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ $%*+-./:".charAt(a)]=a;var g=[function(t,e){return(t+e)%2==0},function(t,e){return t%2==0},function(t,e){return e%3==0},function(t,e){return(t+e)%3==0},function(t,e){return((t/2|0)+(e/3|0))%2==0},function(t,e){return t*e%2+t*e%3==0},function(t,e){return(t*e%2+t*e%3)%2==0},function(t,e){return((t+e)%2+t*e%3)%2==0}],m=function(t){return t>6},y=function(e){var i=t[e],r=16*e*e+128*e+64;return m(e)&&(r-=36),i[2].length&&(r-=25*i[2].length*i[2].length-10*i[2].length-55),r},x=function(e,i){var r=-8&y(e),o=t[e];return r-8*o[0][i]*o[1][i]},v=function(t,e){switch(e){case 1:return t<10?10:t<27?12:14;case 2:return t<10?9:t<27?11:13;case 4:return t<10?8:16;case 8:return t<10?8:t<27?10:12}},b=function(t,e,i){var r=x(t,i)-4-v(t,e);switch(e){case 1:return(r/10|0)*3+(r%10<4?0:r%10<7?1:2);case 2:return(r/11|0)*2+(r%11<6?0:1);case 4:return r/8|0;case 8:return r/13|0}},w=function(t,r){switch(t){case 1:if(!r.match(e))return null;return r;case 2:if(!r.match(i))return null;return r.toUpperCase();case 4:if("string"!=typeof r)return r;for(var o=[],n=0;n<r.length;++n){var a=r.charCodeAt(n);a<128?o.push(a):a<2048?o.push(192|a>>6,128|63&a):a<65536?o.push(224|a>>12,128|a>>6&63,128|63&a):o.push(240|a>>18,128|a>>12&63,128|a>>6&63,128|63&a)}return o}},_=function(t,e,i,r){var o=[],n=0,a=8,s=i.length,l=function(t,e){if(e>=a){for(o.push(n|t>>(e-=a));e>=8;)o.push(t>>(e-=8)&255);n=0,a=8}e>0&&(n|=(t&(1<<e)-1)<<(a-=e))},h=v(t,e);switch(l(e,4),l(s,h),e){case 1:for(var u=2;u<s;u+=3)l(parseInt(i.substring(u-2,u+1),10),10);l(parseInt(i.substring(u-2),10),[0,4,7][s%3]);break;case 2:for(var u=1;u<s;u+=2)l(45*p[i.charAt(u-1)]+p[i.charAt(u)],11);s%2==1&&l(p[i.charAt(u-1)],6);break;case 4:for(var u=0;u<s;++u)l(i[u],8)}for(l(0,4),a<8&&o.push(n);o.length+1<r;)o.push(236,17);return o.length<r&&o.push(236),o},S=function(t,e){for(var i=t.slice(0),r=t.length,a=e.length,s=0;s<a;++s)i.push(0);for(var s=0;s<r;){var l=n[i[s++]];if(l>=0)for(var h=0;h<a;++h)i[s+h]^=o[(l+e[h])%255]}return i.slice(r)},E=function(t,e,i){for(var r=[],o=t.length/e|0,n=0,a=e-t.length%e,s=0;s<a;++s)r.push(n),n+=o;for(var s=a;s<e;++s)r.push(n),n+=o+1;r.push(n);for(var l=[],s=0;s<e;++s)l.push(S(t.slice(r[s],r[s+1]),i));for(var h=[],u=t.length/e|0,s=0;s<u;++s)for(var c=0;c<e;++c)h.push(t[r[c]+s]);for(var c=a;c<e;++c)h.push(t[r[c+1]-1]);for(var s=0;s<i.length;++s)for(var c=0;c<e;++c)h.push(l[c][s]);return h},A=function(t,e,i,r){for(var o=t<<r,n=e-1;n>=0;--n)o>>r+n&1&&(o^=i<<n);return t<<r|o},N=function(e){for(var i=t[e],r=4*e+17,o=[],n=[],a=0;a<r;++a)o.push([]),n.push([]);var s=function(t,e,i,r,a){for(var s=0;s<i;++s)for(var l=0;l<r;++l)o[t+s][e+l]=a[s]>>l&1,n[t+s][e+l]=1};s(0,0,9,9,[127,65,93,93,93,65,383,0,64]),s(r-8,0,8,9,[256,127,65,93,93,93,65,127]),s(0,r-8,9,8,[254,130,186,186,186,130,254,0,0]);for(var a=9;a<r-8;++a)o[6][a]=o[a][6]=1&~a,n[6][a]=n[a][6]=1;for(var l=i[2],h=l.length,a=0;a<h;++a)for(var u=0==a||a==h-1?1:0,c=0==a?h-1:h,f=u;f<c;++f)s(l[a],l[f],5,5,[31,17,21,17,31]);if(m(e))for(var d=A(e,6,7973,12),p=0,a=0;a<6;++a)for(var f=0;f<3;++f)o[a][r-11+f]=o[r-11+f][a]=d>>p++&1,n[a][r-11+f]=n[r-11+f][a]=1;return{matrix:o,reserved:n}},I=function(t,e,i){for(var r=t.length,o=0,n=-1,a=r-1;a>=0;a-=2){6==a&&--a;for(var s=n<0?r-1:0,l=0;l<r;++l){for(var h=a;h>a-2;--h)!e[s][h]&&(t[s][h]=i[o>>3]>>(7&~o)&1,++o);s+=n}n=-n}return t},M=function(t,e,i){for(var r=g[i],o=t.length,n=0;n<o;++n)for(var a=0;a<o;++a)e[n][a]||(t[n][a]^=r(n,a));return t},P=function(t,e,i,r){for(var o=t.length,n=21522^A(i<<3|r,5,1335,10),a=0;a<15;++a){var s=[0,1,2,3,4,5,7,8,o-7,o-6,o-5,o-4,o-3,o-2,o-1][a],l=[o-1,o-2,o-3,o-4,o-5,o-6,o-7,o-8,7,5,4,3,2,1,0][a];t[s][8]=t[8][l]=n>>a&1}return t},C=function(t){for(var e=function(t){for(var e=0,i=0;i<t.length;++i)t[i]>=5&&(e+=3+(t[i]-5));for(var i=5;i<t.length;i+=2){var r=t[i];t[i-1]==r&&t[i-2]==3*r&&t[i-3]==r&&t[i-4]==r&&(t[i-5]>=4*r||t[i+1]>=4*r)&&(e+=40)}return e},i=t.length,r=0,o=0,n=0;n<i;++n){var a,s,l=t[n];a=[0];for(var h=0;h<i;){for(s=0;h<i&&l[h];++s)++h;for(a.push(s),s=0;h<i&&!l[h];++s)++h;a.push(s)}r+=e(a),a=[0];for(var h=0;h<i;){for(s=0;h<i&&t[h][n];++s)++h;for(a.push(s),s=0;h<i&&!t[h][n];++s)++h;a.push(s)}r+=e(a);var u=t[n+1]||[];o+=l[0];for(var h=1;h<i;++h){var c=l[h];o+=c,l[h-1]==c&&u[h]===c&&u[h-1]===c&&(r+=3)}}return r+10*(Math.abs(o/i/i-.5)/.05|0)},T=function(e,i,r,o,n){var a=t[i],s=_(i,r,e,x(i,o)>>3);s=E(s,a[1][o],l[a[0][o]]);var h=N(i),u=h.matrix,c=h.reserved;if(I(u,c,s),n<0){M(u,c,0),P(u,c,o,0);var f=0,d=C(u);for(M(u,c,0),n=1;n<8;++n){M(u,c,n),P(u,c,o,n);var p=C(u);d>p&&(d=p,f=n),M(u,c,n)}n=f}return M(u,c,n),P(u,c,o,n),u},L={generate:function(t,i){var o=(i=i||{}).version||-1,n={L:1,M:0,Q:3,H:2}[(i.ecclevel||"L").toUpperCase()],a=i.mode?({numeric:1,alphanumeric:2,octet:4})[i.mode.toLowerCase()]:-1,s="mask"in i?i.mask:-1;if(a<0)a="string"==typeof t?t.match(e)?1:t.match(r)?2:4:4;else if(!(1==a||2==a||4==a))throw"invalid or unsupported mode";if(null===(t=w(a,t)))throw"invalid data format";if(n<0||n>3)throw"invalid ECC level";if(o<0){for(o=1;o<=40&&!(t.length<=b(o,a,n));++o);if(o>40)throw"too large data"}else if(o<1||o>40)throw"invalid version";if(-1!=s&&(s<0||s>8))throw"invalid mask";return T(t,o,a,n,s)},generateHTML:function(t,e){e=e||{};for(var i=L.generate(t,e),r=Math.max(e.modulesize||5,.5),o=Math.max(null!==e.margin?e.margin:4,0),n=document.createElement("div"),a=i.length,s=['<table border="0" cellspacing="0" cellpadding="0" style="border:'+r*o+'px solid #fff;background:#fff">'],l=0;l<a;++l){s.push("<tr>");for(var h=0;h<a;++h)s.push('<td style="width:'+r+"px;height:"+r+"px"+(i[l][h]?";background:#000":"")+'" part="'+(i[l][h]?"module-fg":"module-bg")+'" ></td>');s.push("</tr>")}return n.className="qrcode",n.innerHTML=s.join("")+"</table>",n},generateSVG:function(t,e){e=e||{};var i=L.generate(t,e),r=i.length,o=Math.max(e.modulesize||5,.5),n=Math.max(null!==e.margin?e.margin:4,0),a=o*(r+2*n),s=' class= "fg" width="'+o+'" height="'+o+'"/>',l=document.createElementNS("http://www.w3.org/2000/svg","svg");l.setAttribute("viewBox","0 0 "+a+" "+a),l.setAttribute("style","shape-rendering:crispEdges"),e.modulesize&&(l.setAttribute("width",a),l.setAttribute("height",a));for(var h=["<style scoped>.bg{fill:#FFF}.fg{fill:#000}</style>",'<rect class="bg" x="0" y="0"','width="'+a+'" height="'+a+'"/>'],u=n*o,c=0;c<r;++c){for(var f=n*o,d=0;d<r;++d)i[c][d]&&h.push('<rect x="'+f+'" y="'+u+'"',s),f+=o;u+=o}return l.innerHTML=h.join(""),l},generatePNG:function(t,e){e=e||{};var i,r=L.generate(t,e),o=Math.max(e.modulesize||5,.5),n=Math.max(null!==e.margin?e.margin:4,0),a=r.length,s=o*(a+2*n),l=document.createElement("canvas");if(l.width=l.height=s,!(i=l.getContext("2d")))throw"canvas support is needed for PNG output";i.fillStyle="#fff",i.fillRect(0,0,s,s),i.fillStyle="#000";for(var h=0;h<a;++h)for(var u=0;u<a;++u)r[h][u]&&i.fillRect(o*(n+u),o*(n+h),o,o);return l.toDataURL()}};return L},"function"==typeof define&&define.amd?define([],r):t.exports?t.exports=r():i.QRCode=r()}),a("ofMCX",function(t,e){var i=n("k7cyy"),r=n("gAUZM"),o=n("3SMVV"),a=n("fkmMz");r.default.prototype.getFeatureInfoUrl=i.default.prototype.getFeatureInfoUrl,r.default.prototype.getFeatureInfo=i.default.prototype.getFeatureInfo,o.default.prototype.getFeatureInfo=function(t,e,i){let r=this.getFeatureInfoUrl(t,e,"EPSG:3857",{INFO_FORMAT:i.INFO_FORMAT});(0,a.default).get({url:r,dataType:i.format||"text/plain",options:{encode:!1},success:function(t){i.callback&&i.callback(t)},error:i.error||function(){}})}});