function e(e,t,a,s){Object.defineProperty(e,t,{get:a,set:s,enumerable:!0,configurable:!0})}var t=globalThis,a={},s={},l=t.parcelRequire8969;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var l={id:e,exports:{}};return a[e]=l,t.call(l.exports,l,l.exports),l.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},t.parcelRequire8969=l);var i=l.register;i("c86V7",function(t,a){e(t.exports,"default",()=>n);var s=l("iQyfo"),i=l("fnScq"),r=l("2iBkg"),u=l("jmRXz");class o extends i.default{constructor(e){super(e=e||{}),this.input=e.input||(0,s.default).create("INPUT",{type:"url",parent:e.parent}),this.input.placeholder=e.placeholder||"Url de l'image",this.input.type="text",this.value=this.input.value,this.set("fullpath",e.fullpath);let t=this.element=(0,s.default).create("DIV",{className:"mc-input-media"});this.input.parentNode.insertBefore(t,this.input),this._imgDiv=(0,s.default).create("DIV",{className:"mc-img",parent:t});let a=this._img=new Image;a.onerror=()=>{t.classList.remove("loading"),this._imgDiv.style["background-image"]="",this.input.value?this.input.classList.add("invalid"):this.input.classList.remove("invalid"),this.value="",this.dispatchEvent({type:"load",value:this.value,error:!0})},a.onload=()=>{if(t.classList.remove("loading"),this._imgDiv.style["background-image"]="url("+a.src+")",this.value=a.src,this.input.classList.remove("invalid"),this.set("crossOrigin",!1),e.useCors){let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{this.set("crossOrigin","anonymous"),this.dispatchEvent({type:"load",value:this.value})},e.onerror=()=>{this.dispatchEvent({type:"load",value:this.value})},e.src=a.src}else this.dispatchEvent({type:"load",value:this.value})},this.value&&(a.src=(0,r.getMediaURL)(this.value)),t.appendChild(this.input),this.input.addEventListener("change",()=>{this.setValue(this.input.value),this.value="",l.style.display=this.input.value?"":"none"}),this.input.addEventListener("keyup",()=>{l.style.display=this.input.value?"":"none"});let l=(0,s.default).create("BUTTON",{className:"delete",type:"button",style:{display:this.input.value?"":"none"},title:e.btnTitle||"Chercher dans la galerie...",html:'<i class="fa fa-times"></i>',click:()=>{this.value="del",this.setValue(""),this.input.focus()},parent:t}),i=e.thumb;(0,s.default).create("BUTTON",{className:"button-colored user-media",type:"button",title:e.btnTitle||"Chercher dans la galerie...",html:'<i class="fi-galerie-image"></i>',click:()=>{(0,u.default)({thumb:i,add:e.add,callback:e=>{i=e.thumb;let t=e.thumb?e.item.thumb_url:e.item.view_url;this.get("fullpath")?this.setValue(t):this.setValue(t.split("/").pop())}})},parent:t})}}o.prototype.getValue=function(){return this.input.value},o.prototype.setValue=function(e){this.value!==e&&(this.value=e,this.element.classList.add("loading"),this.input.value=e,this._img.src=(0,r.getMediaURL)(e),this.input.dispatchEvent(new Event("change")))};var n=o}),i("kMG75",function(t,a){let s;e(t.exports,"default",()=>o);var i=l("fnScq"),r=l("iQyfo");class u extends i.default{constructor(e,t){super(),t=t||{},this.api=e;let a=this.element=(0,r.default).create("DIV",{className:"author-list",parent:t.target}),s=this.searchInput=(0,r.default).create("INPUT",{type:"text",className:"author",placeholder:"chercher un auteur...",parent:a}),l=(0,r.default).create("UL",{className:"autocomplete",parent:a});s.addEventListener("keyup",()=>{this.autocompleteAuthor(s.value,l)}),s.addEventListener("focus",()=>{l.style.display="block"}),s.addEventListener("focusout",()=>{setTimeout(()=>l.style.display="none",200)})}}u.prototype.setUser=function(e){this.searchInput.value=e},u.prototype.autocompleteAuthor=function(e,t){s&&clearTimeout(s),s=setTimeout(()=>{this.api.searchUsers({public_name:e},e=>{t.innerHTML="",e&&e.forEach&&e.forEach(e=>{(0,r.default).create("LI",{html:e,click:()=>{this.dispatchEvent({type:"select",public_name:e})},parent:t})})})},500)};var o=u});var r=l("2Fada"),u=l("gXJm2");l("gIJof");var o=l("jmRXz"),n=l("j0fq3"),d=l("c86V7"),c=l("iQyfo");l("kbFhP");var h=l("kkNxo");document.querySelector("button").addEventListener("click",()=>{(0,o.default)({thumb:!1,add:!0,callback:console.log})}),(0,u.default).setApp("media","Médias");const p=new d.default({thumb:!1,add:!0,fullpath:!0,input:document.querySelector("input")}),f=new n.default(r.default,{selection:!0,search:!0,check:!0,limit:!0,target:(0,u.default).getAppElement()}),m=f.getHeaderElement();f.on(["check","draw:list"],()=>{let e=m.querySelectorAll("button.select");f.getChecked().length?e.forEach(e=>e.classList.remove("button-disabled")):e.forEach(e=>e.classList.add("button-disabled"))}),(0,c.default).create("BUTTON",{className:"button button-ghost",html:'<i class="fa fa-plus-circle fa-fw"></i> Ajouter un média...',click:()=>{(0,o.addMediaDialog)({callback:e=>{e.error||(f.updateFolders(),f.setFolder(e.item.folder))}},f.get("folders"))},parent:m}),(0,c.default).create("BUTTON",{className:"button button-ghost select",html:'<i class="fi-galerie-image fa-fw"></i> Modifier un média...',click:()=>{(0,o.updateMediaDialog)({media:f.getChecked()[0],folders:f.get("folders"),callback:e=>{e.error||(f.updateFolders(),f.setFolder(e.item.folder))}})},parent:m}),(0,c.default).create("BUTTON",{className:"button button-ghost select",html:'<i class="fa fa-folder fa-fw"></i> Changer de dossier...',click:()=>{let e=f.getChecked();if(!e||!e.length){(0,h.default).showMessage("Sélectionnez des images à changer de dossier...");return}f.getFolderDialog({prompt:"Nom du dossier où déplacer les images :"},t=>{let a=s=>{if(s&&s.error){(0,h.default).showAlert("Une erreur est survenue !<br/>Impossible de changer de dossier..."),f.updateFolders(),f.showPage();return}let l=e.pop();l?l.folder!==t?(0,r.default).updateMediaFolder(l.id,t,a):a():(f.updateFolders(),f.showPage())};a()})},parent:m}),(0,c.default).create("BUTTON",{className:"button button-accent select",html:'<i class="fa fa-trash fa-fw"></i> Supprimer...',click:()=>{let e=f.getChecked();if(!e||!e.length){(0,h.default).showMessage("Sélectionnez des images à supprimer...");return}let t=a=>{if(a&&a.error){(0,h.default).showAlert("Une erreur est survenue !<br/>Impossible de supprimer une image..."),f.showPage(f.get("currentPage"));return}let s=e.pop();s?(0,r.default).deleteMedia(s.id,t):f.updateFolders(e=>{0>e.indexOf(f.get("folder"))?f.setFolder():f.showPage(f.get("currentPage"))})};(0,h.default).showAlert("Êtes-vous sûr de vouloir supprimer <b>"+e.length+"</b> image"+(e.length>1?"s ?":" ?")+'<br/>Une fois supprimées, les images ne s\'afficheront plus sur les cartes.<br/><b class="accent">Cette action est irréversible.</b>',{ok:"supprimer",cancel:"annuler"},e=>{"ok"===e&&t(),(0,h.default).close()}),(0,h.default).element.querySelector(".ol-buttons input").className="button button-accent"},parent:m}),f.showPage(),(0,r.default).on(["login","logout"],()=>{let e=document.querySelectorAll("button");(0,r.default).isConnected()?e.forEach(e=>e.classList.remove("button-disabled")):e.forEach(e=>e.classList.add("button-disabled")),f.updateFolders(),f.search()}),console.log((0,r.default).getMe()),(0,r.default).on("me",console.log),(0,u.default).on("user",console.log),(0,r.default).on("login",console.log),window.list=f,window.input=p,window.charte=u.default,window.api=r.default;