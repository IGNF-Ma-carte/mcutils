function e(e){return e&&e.__esModule?e.default:e}function t(e,t,s,i){Object.defineProperty(e,t,{get:s,set:i,enumerable:!0,configurable:!0})}var s=globalThis,i={},r={},a=s.parcelRequire8969;null==a&&((a=function(e){if(e in i)return i[e].exports;if(e in r){var t=r[e];delete r[e];var s={id:e,exports:{}};return i[e]=s,t.call(s.exports,s,s.exports),s.exports}var a=Error("Cannot find module '"+e+"'");throw a.code="MODULE_NOT_FOUND",a}).register=function(e,t){r[e]=t},s.parcelRequire8969=a);var l=a.register;l("6yVA3",function(s,i){t(s.exports,"default",()=>u);var r=a("fnScq"),l=a("8SYbd"),o=a("iQyfo"),c=a("a10XN"),n=a("DW21e");e(l).brewer.Pure=["#d66","#fa0","#ff0","#080","#66f"],e(l).brewer.DkViolet1=["#f5fdff","#b4dae3","#72b7c8","#3194ac"],e(l).brewer.DkViolet2=["#fff5fa","#e4b2b8","#ca6f75","#af2c33"],e(l).brewer.DkBlue1=["#f3ffff","#b0ebea","#6cd6d5","#29c2c0"],e(l).brewer.DkBlue2=["#fdecfa","#e0aad6","#c468b3","#a7268f"],e(l).brewer.BluOr1=["#f3fbff","#abd7ee","#63b3dd","#1b8fcc"],e(l).brewer.BluOr2=["#fdede7","#f3b8a3","#e98260","#df4d1c"],e(l).brewer.Brown1=["#fffcee","#ede2a9","#dcc965","#caaf20"],e(l).brewer.Brown2=["#f1e6f7","#cca6de","#a666c5","#8126ac"],e(l).brewer.Berlin1=["#e9f4fd","#aad5f2","#6bb7e6","#2c98db"],e(l).brewer.Berlin2=["#fff2f1","#f8baba","#f28382","#eb4b4b"];class h extends r.default{constructor(t){super(t=t||{}),this.set("size",t.size||5),this.colors=[],this.elements={};let s=this.element=(0,o.default).create("DIV",{className:"color-brewer","data-type":"colored",parent:t.target}),i=(0,o.default).create("DIV",{className:"cbr-type",parent:s});(0,o.default).create("LABEL",{text:"Couleurs :",parent:i});let r=this.elements.type=(0,o.default).create("SELECT",{change:()=>{s.dataset.type=r.value,"custom"===r.value&&(this._custom=!0,this.elements.schemes.querySelectorAll(".selected").forEach(e=>e.className="")),this._showColors(this.elements.colors,this.getScheme(),this.get("size"))},parent:i});this.elements.schemes=(0,o.default).create("DIV",{className:"cbr-scheme",parent:s}),Object.keys(h.types).forEach(e=>{(0,o.default).create("OPTION",{value:e,text:h.types[e].title,parent:this.elements.type});let t=(0,o.default).create("DIV",{className:e,parent:this.elements.schemes});h.types[e].scheme.forEach(e=>{let s=(0,o.default).create("DIV",{"data-scheme":e,title:e,click:()=>{this.setScheme(e)},parent:t});this._showColors(s,e)})}),this.elements.custom=this.elements.schemes.querySelector(".custom"),this.picker=new c.default({hastab:!0,position:"inline",opacity:!1,parent:this.elements.custom}),this.picker.on("color",e=>{let t=this.colors[this.currentColor]=(0,n.toHexa)(e.color);this._custom&&this.currentBox&&this.currentBox.dataset.color!==t&&(this.currentBox.style.backgroundColor=t,this.currentBox.dataset.color=t,this.dispatchEvent({type:"change:color"}))}),this.elements.modifiers=(0,o.default).create("DIV",{className:"cbr-modifiers",parent:s}),(0,o.default).createCheck({className:"small",after:"+saturé",parent:this.elements.modifiers}).addEventListener("change",e=>{this.set("saturate",e.target.checked),this.dispatchEvent({type:"check",property:"saturate",checked:e.target.checked})}),(0,o.default).createCheck({className:"small",after:"+sombre",parent:this.elements.modifiers}).addEventListener("change",e=>{this.set("darken",e.target.checked),this.dispatchEvent({type:"check",property:"darken",checked:e.target.checked})}),(0,o.default).createCheck({className:"small",after:"inverser",parent:this.elements.modifiers}).addEventListener("change",e=>{this.set("revers",e.target.checked),this.dispatchEvent({type:"check",property:"revers",checked:e.target.checked})}),this.elements.colors=(0,o.default).create("DIV",{className:"cbr-colors",parent:s}),(0,o.default).create("BUTTON",{text:"dégradé",className:"button button-ghost",click:()=>{let t=[];for(let s=0;s<this.colorBR.length-1;s++){t.pop();let i=[this.colors[this.colorBR[s]],this.colors[this.colorBR[s+1]]],r=this.colorBR[s+1]-this.colorBR[s]+(this.colorBR.length>1?1:0);t=t.concat(e(l).scale(i).colors(r))}this.colors.length===t.length&&this.colors.every(function(e,s){return e===t[s]})||(this.colors=t,this._showColors(this.elements.colors,this.getScheme(),this.get("size")),this.dispatchEvent({type:"change:color"}))},parent:(0,o.default).create("DIV",{className:"cbr-gradient",parent:s})}),this.setScheme("Oranges"),this.setColors(t.colors),this.on("propertychange",()=>{this._updateColors()})}}h.prototype.setScheme=function(e){let t=this.elements.schemes.querySelector('[data-scheme="'+e+'"]');t&&(this.element.dataset.scheme!==e||this._custom)&&(this._custom=!1,this.element.dataset.scheme=e,this.elements.schemes.querySelectorAll(".selected").forEach(e=>e.className=""),t.className="selected",this._showColors(this.elements.colors,e,this.get("size")),this.dispatchEvent({type:"change:scheme",scheme:e}))},h.prototype.getScheme=function(){return this.element.dataset.scheme},h.prototype.setSize=function(e){(e=parseInt(e))&&e!==this.get("size")&&(this.set("size",e),this._custom||this.dispatchEvent({type:"change:color"}))},h.prototype._updateColors=function(){this.elements.schemes.querySelectorAll(".cbr-scheme [data-scheme]").forEach(e=>{this._showColors(e,e.dataset.scheme)}),this._showColors(this.elements.colors,this.getScheme(),this.get("size"))},h.prototype._showColors=function(t,s,i){let r=t===this.elements.colors&&this._custom;i=i||5;let a=e(l).brewer[s];if(r){if(this.colorBR.length||(this.colorBR=[0,this.colors.length-1],this.currentColor=0),this.colors.length>i){for(;this.colors.length>i;)this.colors.pop();this.colorBR=[0,this.colors.length-1]}else if(this.colors.length<i){let e=this.colors.pop();for(let t=this.colors.length;t<i;t++)this.colors.push(e);this.colorBR=[0,this.colors.length-1]}a=this.colors}else this.colorBR=[],a=e(l).scale(a).colors(i),this.get("revers")&&(a=a.slice().reverse()),"custom"!==this.element.dataset.type&&(this.colors=a);t.innerHTML="",a.forEach((s,c)=>{!r&&(this.get("saturate")&&(a[c]=e(l)(a[c]).saturate(2).hex()),this.get("darken")&&(a[c]=e(l)(a[c]).darken().hex()));let n=[];this.colorBR.indexOf(c)>=0&&n.push("br"),c===this.currentColor&&(this.picker.setColor(a[c]),n.push("selected"));let h=(0,o.default).create("DIV",{className:n.join(" "),"data-index":c,"data-color":a[c],style:{backgroundColor:a[c]},parent:t});r?(c===this.currentColor&&(this.currentBox=h),h.addEventListener("click",()=>{this.selectColor(c),0!==c&&c!==i-1&&h.classList.toggle("br"),this.colorBR=[],t.querySelectorAll(".br").forEach(e=>{this.colorBR.push(parseInt(e.dataset.index))})})):this.currentBox=!1})},h.prototype.getColors=function(){return this.colors},h.prototype.setColors=function(e){e&&e instanceof Array&&(this.set("size",e.length,!0),this.colors=e,this.setType("custom"),this._updateColors())},h.prototype.selectColor=function(e){let t=this.elements.colors,s=t.querySelector('[data-index="'+e+'"]');s&&(t.querySelectorAll("div").forEach(e=>{e.classList.remove("selected")}),s.classList.add("selected"),this.currentColor=e,this.currentBox=s,this.picker.setColor(s.dataset.color))},h.prototype.setType=function(e){h.types[e]&&this.element.dataset.type!==e&&(this.elements.type.value=this.element.dataset.type="custom",this._custom=!0,this.elements.type.dispatchEvent(new Event("change")))},h.types={colored:{title:"coloré",scheme:["Oranges","Blues","Greens","Purples","Reds","Greys"]},sequential:{title:"séquentiel",scheme:["BuGn","BuPu","GnBu","OrRd","PuBu","PuBuGn","PuRd","RdPu","YlGn","YlGnBu","YlOrBr","YlOrRd"]},diverging:{title:"divergent",scheme:["BrBG","PiYG","PRGn","PuOr","RdBu","RdGy","RdYlBu","RdYlGn","Spectral"]},qualitative:{title:"qualitatif",scheme:["Accent","Dark2","Paired","Pastel1","Pastel2","Set1","Set2","Set3","Pure"]},bivariate:{title:"bivarié",scheme:["DkViolet1","DkViolet2","DkBlue1","DkBlue2","BluOr1","BluOr2","Brown1","Brown2","Berlin1","Berlin2"]},custom:{title:"manuel",scheme:[]}};var u=h}),l("hnLWH",function(e,s){t(e.exports,"default",()=>o);var i=a("iGyOD"),r=a("5VeMq"),l=a("iQyfo"),o=class extends r.default{constructor(e){super(e=e||{}),this.setTemplate(e.template),this.set("canFix",e.canFix),this.set("showImage",e.showImage),this.set("maxChar",e.maxChar||200),this.set("keepSelection",e.keepSelection),e.select&&"function"==typeof e.select.on&&(this._select=e.select,e.select.on("select",(function(t){this._noselect||(t.selected[0]?this.show(t.mapBrowserEvent.coordinate,e.select.getFeatures().getArray(),t.selected[0]):this.hide())}).bind(this)))}setTemplate(e){e||(e=function(e){var t=e.getProperties();return delete t[e.getGeometryName()],{attributes:Object.keys(t)}}),this._template=e,this._attributeObject(this._template)}_attributeObject(e){if(e&&e.attributes instanceof Array){var t={};e.attributes.forEach(function(e){t[e]=!0}),e.attributes=t}return e.attributes}show(e,t,s){(e instanceof i.default||e instanceof Array&&e[0]instanceof i.default)&&(t=e,e=null),t instanceof Array||(t=[t]),this._features=t.slice(),this._count||(this._count=1),this._count=1;var r=this.get("keepSelection")&&s||t[0],a=this._getHtml(r);a?(this.element.classList.contains("ol-fixed")||this.hide(),e&&"Point"!==t[0].getGeometry().getType()||(e=t[0].getGeometry().getFirstCoordinate()),super.show(e,a)):this.hide()}_getHtml(e){if(!e)return"";var t=(0,l.default).create("DIV",{className:"ol-popupfeature"});this.get("canFix")&&(0,l.default).create("I",{className:"ol-fix",parent:t}).addEventListener("click",(function(){this.element.classList.toggle("ol-fixed")}).bind(this));var s=this._template;if("function"==typeof s)s=s(e,this._count,this._features.length);else if(!s||!s.attributes)for(var i in(s=s||{}).attributes={},e.getProperties())"geometry"!=i&&(s.attributes[i]=i);if(s.title&&(a="function"==typeof s.title?s.title(e):e.get(s.title),(0,l.default).create("H1",{html:a,parent:t})),s.attributes){var a,o,c=(0,l.default).create("TABLE",{parent:t}),n=this._attributeObject(s),h=e.getProperties();Object.keys(n).forEach((function(t){if(h.hasOwnProperty(t)){var s,i=n[t],r=h[t];i&&"function"==typeof i.format&&(r=i.format(r,e));var a=!0;if(i&&"boolean"==typeof i.visible?a=i.visible:i&&"function"==typeof i.visible&&(a=i.visible(e,r)),a){if(o=(0,l.default).create("TR",{click:(function(s){this.dispatchEvent({type:"attribute",feature:e,attribute:t,originalEvent:s})}).bind(this),parent:c}),(0,l.default).create("TD",{className:"ol-label",html:i&&i.title||t,parent:o}),this.get("showImage")&&/(http(s?):)([/|.|\w|\s|-])*\.(?:jpg|gif|png)/.test(r))s=(0,l.default).create("IMG",{src:r});else{s=i?(i.before||"")+r+(i.after||""):"";var u=this.get("maxChar")||200;"string"==typeof s&&s.length>u&&(s=s.substr(0,u)+"[...]")}(0,l.default).create("TD",{className:"ol-value",html:s,parent:o})}}}).bind(this))}if((0,l.default).create("BUTTON",{className:"ol-zoombt",parent:t}).addEventListener("click",(function(){if("Point"===e.getGeometry().getType())this.getMap().getView().animate({center:e.getGeometry().getFirstCoordinate(),zoom:Math.max(this.getMap().getView().getZoom(),18)});else{var t=e.getGeometry().getExtent();this.getMap().getView().fit(t,{duration:1e3})}}).bind(this)),!this.get("keepSelection")&&this._features.length>1){var u=(0,l.default).create("DIV",{className:"ol-count",parent:t});(0,l.default).create("DIV",{className:"ol-prev",parent:u,click:(function(){this._count--,this._count<1&&(this._count=this._features.length),t=this._getHtml(this._features[this._count-1]),setTimeout((function(){(0,r.default).prototype.show.call(this,this.getPosition(),t)}).bind(this),350)}).bind(this)}),(0,l.default).create("TEXT",{html:this._count+"/"+this._features.length,parent:u}),(0,l.default).create("DIV",{className:"ol-next",parent:u,click:(function(){this._count++,this._count>this._features.length&&(this._count=1),t=this._getHtml(this._features[this._count-1]),setTimeout((function(){(0,r.default).prototype.show.call(this,this.getPosition(),t)}).bind(this),350)}).bind(this)})}return this._select&&!this.get("keepSelection")&&(this._noselect=!0,this._select.getFeatures().clear(),this._select.getFeatures().push(e),this._noselect=!1),this.dispatchEvent({type:"select",feature:e,index:this._count}),t}setFix(e){e?this.element.classList.add("ol-fixed"):this.element.classList.remove("ol-fixed")}getFix(){return this.element.classList.contains("ol-fixed")}}}),l("eUb8y",function(e,s){t(e.exports,"default",()=>o);var i=a("iQyfo"),r=a("fnScq");class l extends r.default{constructor(e){super(e=e||{});let t=this.element=(0,i.default).create("DIV",{className:"repartionGraph",parent:e.target});this.graph=(0,i.default).create("DIV",{className:"rgGraph",parent:t}),this.canvas=document.createElement("canvas"),this.canvas.width=e.width||260,this.canvas.height=e.height||150,this.ctx=this.canvas.getContext("2d"),this.graph.append(this.canvas);let s=(0,i.default).create("DIV",{className:"rgOptions",parent:t});(0,i.default).createCheck({className:"small",after:"lisser",parent:s}).addEventListener("change",e=>{this.set("smooth",e.target.checked),this.draw()}),(0,i.default).createCheck({type:"radio",className:"small",name:"rgtypgraph",after:"répartition",parent:s}).addEventListener("change",()=>{this.setType("distribution")}),(0,i.default).createCheck({type:"radio",className:"small",name:"rgtypgraph",after:"histogramme",checked:!0,parent:s}).addEventListener("change",()=>{this.setType("histogram")}),this.limitDiv=(0,i.default).create("DIV",{className:"rgLimits",parent:t}),this.limits=[],this.wbar=3}}l.prototype.setType=function(e){this.type=e,this.draw()},l.prototype.px2value=function(e){return(e-10)/this.wbar*this.scale+this.stat.limits[0]},l.prototype.value2px=function(e){return(e-this.stat.limits[0])*this.wbar/this.scale+10},l.prototype.setRepartition=function(e){var t,s;if(this.stat=e,this.element.dataset.edit=e.mode,e.limits&&(t=e.limits,s=this.limits,!(t.length===s.length&&t.every(function(e,t){return e===s[t]})))){this.graph.querySelectorAll(".rgMarker").forEach(e=>e.remove()),this.limitDiv.innerHTML="";let t=!1,s=(e,s)=>{t={id:e,px:s.pageX||s.originalEvent.touches[0].pageX,limit:this.limitDiv.querySelector(".limit_"+e),elt:s.target,x0:parseFloat(s.target.style.left)},document.addEventListener("mousemove",r),document.addEventListener("touchmove",r),document.addEventListener("mouseup",a),document.addEventListener("touchend",a)},r=e=>{if(t){var s=e.pageX||e.originalEvent.touches[0].pageX,i=t.x0+s-t.px,r=this.px2value(i);!(r<this.limits[t.id-1])&&(r>this.limits[t.id+1]||(t.elt.style.left=i+"px",this.limits[t.id]=t.limit.value=r))}},a=()=>{t&&(t=!1,document.removeEventListener("mousemove",r),document.removeEventListener("touchmove",r),document.removeEventListener("mouseup",a),document.removeEventListener("touchend",a),this.dispatchEvent({type:"change:limit",limits:this.limits}))};this.limits=e.limits.slice(),e.limits.forEach((t,r)=>{(0,i.default).create("DIV",{className:(0===r||r===e.limits.length-1?"disable ":"")+"rgMarker marker_"+r,on:{"mousedown touchstart":e=>{console.log(this.stat.mode),"c"===this.stat.mode&&s(r,e)}},parent:this.graph}),(0,i.default).create("INPUT",{className:"rgLimit limit_"+r,value:e.limits[r],change:e=>{let t=this.stat,s=Number(e.target.value);0===r?s>t.limits[r+1]&&(s=t.limits[r+1]):(r===t.limits.length-1||s>t.limits[r+1]&&(s=t.limits[r+1]),s<t.limits[r-1]&&(s=t.limits[r-1])),e.target.value=s,this.limits[r]=s,this.dispatchEvent({type:"change:limit",limits:this.limits})},on:{keydown:e=>{1===e.key.length&&("."===e.key?/\./.test(this.value)&&e.preventDefault():"-"!==e.key&&(e.key<"0"||e.key>"9")&&e.preventDefault())},keyup:e=>{if("-"!==e.target.value){let t=parseFloat(e.target.value.replace(/^-{1,}/,"-"));t!=e.target.value&&(e.target.value=t||"")}}},parent:this.limitDiv})})}this.draw()},l.prototype.draw=function(){if(!this.stat)return;var e=this.ctx,t=this.canvas.width,s=this.canvas.height;e.fillStyle="transparent",e.clearRect(0,0,t,s);let i=this.stat.limits;if(i&&i.length){var r=i[0],a=i[i.length-1]-r;if(a&&isFinite(a))try{s-=20,t-=20;let u=function(e){for(let t=1;t<i.length;t++)if(i[t]>e)return t-1;return i.length-2};for(var l=Math.round(t/this.wbar),o=this.scale=a/l,c=[],n=0;n<=l;n++)c[n]={val:(n+.5)*o+r,vmin:n*o+r,vmax:(n+1)*o+r,interval:u((n+.5)*o+r),color:this.stat.colors[u((n+.5)*o+r)]||"#999",nb:0};e.setTransform(1,0,0,-1,10,s+10);var h=0;if(this.stat.values.forEach(e=>{e=Number(e);var t=Math.round((e-r)/o);c[t]&&(c[t].nb++,c[t].nb>h&&(h=c[t].nb))}),"distribution"==this.type){for(let e=1;e<=l;e++)c[e].nb+=c[e-1].nb;h=c[l].nb}else this.get("smooth")&&(c=function(e){let t;let s=[];for(t=1,s[0]=(e[0].nb+e[1].nb/2)/1.5;t<e.length-1;t++)s[t]=(e[t].nb+(e[t-1].nb+e[t+1].nb)/2)/2;s[t]=(e[t].nb+e[t-1].nb/2)/1.5;for(let t=0;t<e.length;t++)e[t].nb=s[t];return e}(c));for(let t=0;t<=l;t++)e.fillStyle=c[t].color,e.fillRect(t*this.wbar,0,this.wbar,c[t].nb*s/h);this.stat.limits&&this.stat.limits.length&&this.stat.limits.forEach((e,t)=>{this.graph.querySelector(".marker_"+t).style.left=this.value2px(e)+"px"})}catch(e){}}};var o=l});