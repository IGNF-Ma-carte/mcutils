function e(e,t,a,s){Object.defineProperty(e,t,{get:a,set:s,enumerable:!0,configurable:!0})}var t=globalThis,a={},s={},l=t.parcelRequire8969;null==l&&((l=function(e){if(e in a)return a[e].exports;if(e in s){var t=s[e];delete s[e];var l={id:e,exports:{}};return a[e]=l,t.call(l.exports,l,l.exports),l.exports}var i=Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){s[e]=t},t.parcelRequire8969=l);var i=l.register;i("fEcTz",function(t,a){e(t.exports,"default",()=>d);var s=l("fP3gd");l("ikA7k"),l("eKonl"),l("egZgD"),l("kYFpn"),l("8lx5x"),l("1Phln");var i=l("h1ihb"),n=l("iQyfo");let r=i.default.prototype.defs||i.default.defs,o=r.glyphs,c=r.fonts,p={};Object.keys(o).forEach(e=>{o[e].theme&&(p[o[e].theme.split(",")]=!0)}),delete p.FontAwesome,delete p.evilz,p=Object.keys(p).sort();let u="MC@RecentGlyphs";class h extends s.default{constructor(e){(e=e||{}).position||(e.position="fixed"),e.className="popup-symbol",super(e),this._elt.symbol=(0,n.default).create("I",{parent:this.element}),this.setValue(e.symbol||"ign-form-poi"),this.input.addEventListener("change",()=>{this.setValue()});let t=(0,n.default).create("INPUT",{type:"search",placeholder:"Rechercher un symbol...",parent:this._elt.popup});this.on("change:visible",()=>{setTimeout(()=>t.focus(),100)});let a=(0,n.default).create("DIV",{className:"filter",parent:this._elt.popup}),s=(0,n.default).create("SELECT",{parent:a});(0,n.default).create("OPTION",{html:"toutes les polices",value:"",parent:s}),Object.keys(c).forEach(e=>{(0,n.default).create("OPTION",{html:e,parent:s})});let l=(0,n.default).create("SELECT",{parent:a});(0,n.default).create("OPTION",{html:"tous les thèmes",value:"",parent:l}),p.forEach(e=>{(0,n.default).create("OPTION",{html:e,parent:l})});let i=(e,t)=>{o[e]&&(0,n.default).create("LI",{html:o[e].char,"data-id":e,title:o[e].name,style:{"font-family":o[e].font},click:()=>{this.setValue(e),this.collapse(!0)},parent:t})};(0,n.default).create("H2",{html:"Récents",parent:this._elt.popup});let r=(0,n.default).create("UL",{className:"recent",parent:this._elt.popup}),h=[];try{(h=localStorage.getItem(u).split(",")).forEach(e=>i(e,r))}catch(e){}this.on("select",e=>{let t=h.indexOf(e.value);t>=0&&h.splice(t,1),h.unshift(e.value),h.length>10&&h.pop();try{localStorage.setItem(u,h.join(","))}catch(e){}r.innerHTML="",h.forEach(e=>i(e,r))}),(0,n.default).create("H2",{html:"Symboles",parent:this._elt.popup});let d=(0,n.default).create("UL",{parent:this._elt.popup});Object.keys(o).forEach(e=>i(e,d)),window.popup=this;let f=(function(e){let a=new RegExp(t.value),i=l.value,n=s.value;d.querySelectorAll("li").forEach(e=>{let t=o[e.dataset.id];(a.test(t.search)||a.test(t.name))&&(!i||i===t.theme)&&(!n||n===t.font)?e.style.display="":e.style.display="none"}),("change"===e.type||"search"===e.type)&&this.collapse(!1)}).bind(this);(0,n.default).addListener(t,["change","keyup","search"],f),l.addEventListener("change",f),s.addEventListener("change",f)}}h.prototype.setValue=function(e){if(e&&!o[e])return!1;if(this.input.value!==e){if(e&&(this.input.value=e),this._elt.symbol.className="fa "+this.input.value,!o[this.input.value])return!1;this.dispatchEvent({type:"select",value:this.input.value})}return!0};var d=h}),i("aQBQL",function(t,a){e(t.exports,"default",()=>n);var s=l("iQyfo"),i=l("434wl"),n=class extends i.default{constructor(e){(e=e||{}).options=[],(e.size||[0,2,3,5,8,13,21,34,55]).forEach(function(t){e.options.push({value:t,html:(0,s.default).create("DIV",{className:"ol-option-"+t,style:{fontSize:t?t+"px":void 0}})})}),super(e),this._content.remove(),this.element.classList.add("ol-size")}getValue(){return parseFloat(super.getValue())}}}),i("434wl",function(t,a){e(t.exports,"default",()=>n);var s=l("iQyfo"),i=l("9LKAN"),n=class extends i.default{constructor(e){switch(super(e=e||{}),this._content=(0,s.default).create("DIV"),(e.hidden||e.disabled)&&(e.hover=!0),this.element=(0,s.default).create("DIV",{html:this._content,className:"ol-input-popup"+(e.hover?" ol-hover":"")}),this.set("hideOnClick",!1!==e.hideOnClick),e.className&&this.element.classList.add(e.className),e.fixed&&(this.element.classList.add("ol-fixed"),this.set("hideOnClick",!1)),e.align){case"middle":this.set("hideOnClick",!1);case"rigth":this.element.classList.add("ol-"+e.align)}var t=this.input;t.parentNode&&t.parentNode.insertBefore(this.element,t),this.element.appendChild(t);var a=this.popup=(0,s.default).create("UL",{className:"ol-popup",parent:this.element}),l=[];e.options.forEach(e=>{l.push({value:e.value,element:(0,s.default).create("LI",{html:e.html,title:e.title||e.value,className:"ol-option",on:{pointerdown:(function(){this.setValue(e.value),this.get("hideOnClick")&&(a.style.display="none",setTimeout(function(){a.style.display=""},200))}).bind(this)},parent:this.popup})})}),this.input.addEventListener("change",(function(){var e,t=this.input.value;l.forEach(function(a){a.value==t?(a.element.classList.add("ol-selected"),e=a.element):a.element.classList.remove("ol-selected")}),this.dispatchEvent({type:"change:value",value:this.getValue()}),this._content.innerHTML=e?e.innerHTML:""}).bind(this));var i=new Event("change");setTimeout((function(){this.input.dispatchEvent(i)}).bind(this))}}}),i("5uHkz",function(t,a){e(t.exports,"default",()=>n);var s=l("iQyfo"),i=l("434wl"),n=class extends i.default{constructor(e){(e=e||{}).options=[],(e.size||[0,1,2,3,5,10,15,20]).forEach(function(t){e.options.push({value:t,html:(0,s.default).create("DIV",{className:"ol-option-"+t,style:{height:t||void 0}})})}),super(e),this._content.remove(),this.element.classList.add("ol-width")}getValue(){return parseFloat(super.getValue())}}}),i("j6lPQ",function(t,a){e(t.exports,"default",()=>r);var s=l("iQyfo"),i=l("fP3gd");class n extends i.default{constructor(e){(e=e||{}).hidden=!1,super(e),this.element.classList.add("ol-dash"),this.input.pattern="[0-9,.]*",this.input.type="text";let t=[],a=["","5,5","0,5","5,5,0,5","10,5","10,5,0,5"];a.forEach(e=>{t.push((0,s.default).create("DIV",{html:(0,s.default).create("DIV",{className:"ol-option-"+(e.replace(/,/g,"-")||"0")}),click:()=>{this.setValue(e),this.collapse(!0)},parent:this._elt.popup}))});let l=(0,s.default).create("CANVAS");this.element.append(l),l.width=50,l.height=2;let i=l.getContext("2d");i.lineWidth=3,i.lineCap="butt",this.element.append(l),this.input.addEventListener("change",()=>{setTimeout(()=>{t.forEach((e,t)=>{e.className=this.input.value===a[t]?"selected":""});let e=0,s=0,l=this.input.value.split(",");for(l.length%2&&l.push(0),i.clearRect(0,0,100,100),i.beginPath(),i.moveTo(0,0);s<50;)e%2?(s+=parseFloat(l[e%l.length]),i.moveTo(s,0)):(s+=(parseFloat(l[e%l.length])||1)+1,i.lineTo(s,0)),e++;i.stroke()})}),this.setValue(this.input.value)}}var r=n}),i("jelRt",function(t,a){e(t.exports,"default",()=>p);var s=l("fP3gd"),i=l("3yg5q"),n=l("iQyfo");let r=Object.keys(i.default.prototype.patterns||i.default.patterns);r.unshift("");let o={size:"Taille",spacing:"Espacement",angle:"Angle",offset:"Décalage",scale:"Echelle"};class c extends s.default{constructor(e){(e=e||{}).position||(e.position="fixed"),e.className="popup-pattern",super(e),this._elt.pattern=(0,n.default).create("DIV",{className:"ol-vignet",parent:this.element});let t=(0,n.default).create("UL",{parent:this._elt.popup});r.forEach(e=>{let a=new i.default({pattern:e});(0,n.default).create("LI",{title:e,className:e||"none",style:{backgroundImage:e?'url("'+a.getImage().toDataURL()+'")':""},click:()=>{this.setPattern(e)},parent:t})});let a=(0,n.default).create("DIV",{className:"parameters",parent:this._elt.popup});(0,n.default).create("P",{html:"Paramètres :",className:"param-title",parent:a});let s=this.getOptions();Object.keys(o).forEach(e=>{if((0,n.default).create("LABEL",{html:o[e],className:e,parent:a}),"angle"===e){let t=(0,n.default).createCheck({type:"checkbox",className:e+" small",parent:a});t.addEventListener("change",()=>{this.setAngle(t.checked?1:0),t.nextSibling.value=t.checked?1:0})}(0,n.default).create("INPUT",{type:"number",className:e,value:s[e],min:0,step:"scale"===e?.1:0,change:t=>{this.set(e,parseFloat(t.target.value)),"angle"===e&&(t.target.previousSibling.querySelector("input").checked=0!=t.target.value),this.setValue()},parent:a})}),(0,n.default).create("BUTTON",{html:"OK",className:"button button-colored",click:()=>{this.collapse(!0)},parent:a})}}c.prototype.setPattern=function(e){0>r.indexOf(e)||(this.set("pattern",e),this.element.dataset.pattern=e,this.element.querySelectorAll("li").forEach(e=>delete e.dataset.selected),this.element.querySelector("li."+(e||"none")).dataset.selected="",this.setValue())},c.prototype.setSize=function(e){this.set("size",e),this.element.querySelector("input.size").value=e,this.setValue()},c.prototype.setSpacing=function(e){this.set("spacing",e),this.element.querySelector("input.spacing").value=e,this.setValue()},c.prototype.setAngle=function(e){this.set("angle",e),this.element.querySelector('.ol-ext-check.angle input[type="checkbox"]').checked=0!=e,this.element.querySelector('input[type="number"].angle').value=e,this.setValue()},c.prototype.setOffset=function(e){this.set("offset",e),this.element.querySelector("input.offset").value=e,this.setValue()},c.prototype.setScale=function(e){this.set("scale",e),this.element.querySelector("input.scale").value=e,this.setValue()},c.prototype.getOptions=function(){let e={pattern:this.get("pattern")||"",size:this.get("size")||5,spacing:this.get("spacing")||10,angle:this.get("angle")||0,offset:this.get("offset")||0,scale:this.get("scale")||1};return"hatch"!==e.pattern&&(e.angle=e.angle>0?1:0),e},c.prototype.setValue=function(e){if(e){if("string"==typeof e){let t=e.split("-");e={pattern:t[0]||"",size:t[1]||5,spacing:t[2]||10,angle:t[3]||0,offset:t[4]||0,scale:t[5]||1}}this.setPattern(e.pattern),this.setSize(e.size),this.setSpacing(e.spacing),this.setAngle(e.angle),this.setOffset(e.offset),this.setScale(e.scale)}let t=this.getOptions();if(e="",Object.keys(t).forEach(a=>e+=(e?"-":"")+t[a]),this.input.value!==e){this.input.value=e;let a=new i.default(t);this._elt.pattern.style.backgroundImage=t.pattern?'url("'+a.getImage().toDataURL()+'")':"",t.type="change",this.dispatchEvent(t)}};var p=c});