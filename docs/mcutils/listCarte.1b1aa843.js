function e(e,t,a,l){Object.defineProperty(e,t,{get:a,set:l,enumerable:!0,configurable:!0})}var t=globalThis,a={},l={},i=t.parcelRequire8969;null==i&&((i=function(e){if(e in a)return a[e].exports;if(e in l){var t=l[e];delete l[e];var i={id:e,exports:{}};return a[e]=i,t.call(i.exports,i,i.exports),i.exports}var n=Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}).register=function(e,t){l[e]=t},t.parcelRequire8969=i);var n=i.register;n("kO0kO",function(t,a){e(t.exports,"default",()=>v);var l=i("49GcF"),n=i("kbFhP"),s=i("2Fada"),r=i("iQyfo"),o=i("gXJm2"),c=i("2iBkg");let u={},d=new l.default(s.default,{mini:1,selection:!0});window.usercarte=d;let p=(0,r.default).create("DIV",{className:"mc-list-info",parent:d.element}),m=(0,r.default).create("INPUT",{type:"search",placeHolder:"rechercher...",parent:d.element});(0,r.default).addListener(m,["keyup","search"],()=>{let e=RegExp(m.value,"i"),t=!1;d.element.querySelectorAll("li").forEach(a=>{e.test(a.innerText)?(t=!0,a.style.display="block"):a.style.display="none"}),t?d.showError():d.showError("Aucune carte...",!1),d.clearSelection()}),d.on("select",e=>{p.innerHTML="",e.item&&((0,r.default).create("h4",{html:e.item.title,parent:p}),(0,r.default).create("IMG",{src:(0,c.getMediaURL)(e.item.img_url)||"",parent:p}),(0,r.default).create("p",{html:e.item.description,parent:p}),(0,r.default).create("div",{className:"mc-theme",html:e.item.theme,parent:p}),(0,r.default).create("div",{className:"mc-date",html:e.item.updated_at,parent:p}),(0,r.default).create("div",{className:"mc-view",html:e.item.nb_view,parent:p}))}),d.on("dblclick",e=>{(0,n.default).hide(),h(e.item)}),d.on("error",e=>{401===e.status?(0,n.default).showAlert("Vous devez être connecté pour effectuer cette opération...",{connect:"se connecter",cancel:"annuler"},e=>{"connect"===e&&(0,o.connectDialog)(()=>{f(u)})}):d.showError("Impossible de charger les cartes.")}),d.on("draw:list",e=>{m.style.display=e.list.length<20?"none":""}),d.on("search",()=>d.clear());let h=function(){};function f(e){h="function"==typeof(e=e||{}).callback?e.callback:()=>{},u=e,m.value="",d.set("filter",e.filter),d.set("type",e.type),(0,n.default).show({title:e.title||"Charger une carte",className:"mc-user-map",content:d.element,buttons:{submit:"charger",cancel:"annuler"},onButton:e=>{"submit"===e&&d.getSelection()&&(h(d.getSelection()),(0,n.default).close())}}),p.innerHTML="",d.search()}var v=f}),n("49GcF",function(t,a){e(t.exports,"default",()=>s),i("bXOZB");var l=i("fmXBE");class n extends l.default{constructor(e,t){(t=t||{}).context="profile",t.size="all",super(e,t)}}n.prototype.filterList=function(e){let t=[];return e.forEach(e=>{switch(this.get("filter")){case"storymap":"storymap"===e.type&&t.push(e);break;case"macarte":"storymap"!==e.type&&t.push(e);break;default:t.push(e)}}),t};var s=n}),n("5blsF",function(t,a){let l;e(t.exports,"default",()=>h);var n=i("c6CRU"),s=i("kbFhP"),r=i("c86V7"),o=i("2Fada"),c=i("iQyfo"),u=i("467x5"),d=i("cvawf"),p=i("l956U");let m=`
<ul>
  <li>
    Pour enregistrer une carte dans votre espace personnel, remplissez le formulaire.
  </li>
  <li class="accent">
    Vous devez renseigner les champs obligatoires...
  </li>
  <li>
    <input class="title input-placeholder required" type="text" placeholder="Titre de la carte">
  </li>
  <li>
    <textarea class="description input-placeholder" type="text" placeholder="Description"></textarea>
  </li>
  <li>
    <span class="required">Th\xe8me</span> :
    <select class="theme"></select>
  </li>
  <li>
    Image d'illustration :
    <br/>
    <input type="text" class="image" />
  </li>
  <li>
    Publier dans l'atlas :
    <div>
      <label class="ol-ext-check ol-ext-radio"><input class="atlas" type="radio" name="publie" checked=""><span></span>oui</label>
      <label class="ol-ext-check ol-ext-radio"><input class="private" type="radio" name="publie" checked="checked"><span></span>non</label>
    </div>
  </li>
`;var h=function(e,t,a){a=a||{},t="function"==typeof t?t:()=>{};let i={};if(e instanceof u.default||e instanceof d.default?((i=e.get("atlas")||{}).title||(i.title=e.get("title")||""),i.description||(i.description=(0,p.default).text(e.get("description"))||""),i.img_url||(i.img_url=e.get("logo")||"")):i=e,a.saveAs){let e=i;i={},["active","description","img_url","share","theme","theme_id","title","type","premium"].forEach(t=>{i[t]=e[t]})}void 0===i.active&&(i.active=!0),(0,s.default).show({title:a.prompt||"Enregistrer une carte",className:"mc-save-map",content:m,buttons:{submit:"Enregistrer",cancel:"annuler"},onButton:(a,n)=>{if("submit"===a){if(n.title.classList.remove("invalid"),n.theme.classList.remove("invalid"),!n.title.value||!n.theme.value){h.style.display="block",n.title.value||n.title.classList.add("invalid"),n.theme.value||n.theme.classList.add("invalid");return}i.title=n.title.value,i.description=n.description.value,i.theme_id=n.theme.value,i.theme=l[n.theme.value],i.img_url=n.image.value,i.share=n.atlas.checked?"atlas":"private",(e instanceof u.default||e instanceof d.default)&&e.set("atlas",i),(0,s.default).hide(),t(e,i)}}});let h=(0,s.default).getContentElement().querySelector(".accent"),f=(0,s.default).getInputs();f.title.value=i.title||"",f.description.value=i.description||"",f.image.value=i.img_url||"",f.atlas.checked="atlas"===i.share,f.private.checked="atlas"!==i.share,f.title.addEventListener("change",()=>{f.title.classList.remove("invalid")}),f.theme.addEventListener("change",()=>{f.theme.classList.remove("invalid")}),(0,n.default).setInputPlaceholder((0,s.default).getContentElement());let v=e=>{if(e){if(e.error)return;l={},e.forEach(e=>{l[e.id]=e.name})}let t=(0,s.default).getContentElement().querySelector("select");(0,c.default).create("OPTION",{html:"Choisir un theme...",value:"",disabled:!0,selected:!0,parent:t}),Object.keys(l).forEach(e=>{let a=(0,c.default).create("OPTION",{html:l[e],value:e,parent:t});l[e]===i.theme&&(a.selected=!0)})};l?v():(0,o.default).getThemes(v),window.api=o.default,new r.default({add:!0,input:(0,s.default).getContentElement().querySelector("input.image")})}}),n("c86V7",function(t,a){e(t.exports,"default",()=>c);var l=i("iQyfo"),n=i("fnScq"),s=i("2iBkg"),r=i("jmRXz");class o extends n.default{constructor(e){super(e=e||{}),this.input=e.input||(0,l.default).create("INPUT",{type:"url",parent:e.parent}),this.input.placeholder=e.placeholder||"Url de l'image",this.input.type="text",this.value=this.input.value,this.set("fullpath",e.fullpath);let t=this.element=(0,l.default).create("DIV",{className:"mc-input-media"});this.input.parentNode.insertBefore(t,this.input),this._imgDiv=(0,l.default).create("DIV",{className:"mc-img",parent:t});let a=this._img=new Image;a.onerror=()=>{t.classList.remove("loading"),this._imgDiv.style["background-image"]="",this.input.value?this.input.classList.add("invalid"):this.input.classList.remove("invalid"),this.value="",this.dispatchEvent({type:"load",value:this.value,error:!0})},a.onload=()=>{if(t.classList.remove("loading"),this._imgDiv.style["background-image"]="url("+a.src+")",this.value=a.src,this.input.classList.remove("invalid"),this.set("crossOrigin",!1),e.useCors){let e=new Image;e.crossOrigin="anonymous",e.onload=()=>{this.set("crossOrigin","anonymous"),this.dispatchEvent({type:"load",value:this.value})},e.onerror=()=>{this.dispatchEvent({type:"load",value:this.value})},e.src=a.src}else this.dispatchEvent({type:"load",value:this.value})},this.value&&(a.src=(0,s.getMediaURL)(this.value)),t.appendChild(this.input),this.input.addEventListener("change",()=>{this.setValue(this.input.value),this.value="",i.style.display=this.input.value?"":"none"}),this.input.addEventListener("keyup",()=>{i.style.display=this.input.value?"":"none"});let i=(0,l.default).create("BUTTON",{className:"delete",type:"button",style:{display:this.input.value?"":"none"},title:e.btnTitle||"Chercher dans la galerie...",html:'<i class="fa fa-times"></i>',click:()=>{this.value="del",this.setValue(""),this.input.focus()},parent:t}),n=e.thumb;(0,l.default).create("BUTTON",{className:"button-colored user-media",type:"button",title:e.btnTitle||"Chercher dans la galerie...",html:'<i class="fi-galerie-image"></i>',click:()=>{(0,r.default)({thumb:n,add:e.add,callback:e=>{n=e.thumb;let t=e.thumb?e.item.thumb_url:e.item.view_url;this.get("fullpath")?this.setValue(t):this.setValue(t.split("/").pop())}})},parent:t})}}o.prototype.getValue=function(){return this.input.value},o.prototype.setValue=function(e){this.value!==e&&(this.value=e,this.element.classList.add("loading"),this.input.value=e,this._img.src=(0,s.getMediaURL)(e),this.input.dispatchEvent(new Event("change")))};var c=o}),n("4ki7m",function(t,a){e(t.exports,"default",()=>c);var l=i("kbFhP"),n=i("iQyfo"),s=i("2iBkg"),r=i("istUn");let o=`
<div class="list"></div>
<h3>Lien</h3>
<div class="link">
  Lien pour visualiser la carte :<br/>
</div>
<p class="cgu">
  En utilisant ce service, nous vous informons que votre responsabilit\xe9 est engag\xe9e lorsque vous partagez vos donn\xe9es sur Internet. 
  En cons\xe9quence, vous devez vous conformer aux lois r\xe8glements en vigueur notamment la loi Informatique et libert\xe9s 
  si les donn\xe9es partag\xe9es contiennent des donn\xe9es \xe0 caract\xe8re personnel.
  <br/>
  Pour plus de d\xe9tails, veuillez consulter les <a class="colored" target="_new">Conditions g\xe9n\xe9rales d'utilisation</a>.
</p>
`;var c=function(e){let t;let a=(e=e||{}).carte;if(!a)return;let i=a.getViewerUrl?a.getViewerUrl():(0,s.getViewerURL)(a),c=a.get?a.get("title"):a.title;if(!i)return!1;e.target instanceof Element?(e.target.innerHTML=o,(t=e.target).classList.add("mc-share-map")):((0,l.default).show({title:e.prompt||"Partager votre carte",className:"mc-share-map",content:o}),t=(0,l.default).getContentElement());let u=t.querySelector(".list");(0,n.default).create("A",{html:'<i class="fa fa-code"></i> Intégrer',className:"colored",click:()=>(0,r.default)(e),parent:u}),[{title:'<i class="fa fa-twitter"></i> Twitter',href:"https://twitter.com/intent/tweet?url="+encodeURIComponent(i)+(c?"&text="+encodeURI(c):"")+"&via=IGNFrance&hashtags=Macarte"},{title:'<i class="fa fa-facebook"></i> Facebook',href:"https://www.facebook.com/sharer/sharer.php?u="+encodeURIComponent(i)},{title:'<i class="fa fa-linkedin"></i> LinkedIn',href:"https://www.linkedin.com/shareArticle?mini=true&url="+encodeURIComponent(i)},{title:'<i class="fa fa-envelope-o"></i> Courrier',href:"mailto:?subject="+encodeURIComponent(c||"Macarte")+"&body=Je vous invite à consulter la carte "+encodeURIComponent(c||"")+" : \n"+encodeURIComponent(i)}].forEach(e=>{(0,n.default).create("A",{html:e.title,className:"colored external",href:e.href,click:()=>{(0,l.default).hide()},target:"_new",parent:u})});let d=(0,n.default).create("A",{html:(0,n.default).create("SPAN",{html:i}),className:"colored",click:()=>{try{navigator.clipboard.writeText(i),p.className="copy-info visible",setTimeout(()=>{p.className="copy-info"},800)}catch(e){}},parent:t.querySelector(".link")}),p=(0,n.default).create("SPAN",{html:"copié dans le presse-papier",className:"copy-info",parent:d});return t.querySelector(".cgu a").href=s.default.cgu,!0}}),n("istUn",function(t,a){e(t.exports,"default",()=>m);var l=i("4RD3O"),n=i("kbFhP"),s=i("hgFwk"),r=i("40xUf"),o=i("gzr8q"),c=i("2iBkg"),u=i("cvawf"),d=i("467x5");let p=`
<div class="iframe-container">
  <iframe></iframe>
</div>
<div>
  <h2>Int\xe9grer votre carte</h2>
  <input class="url input-placeholder" disabled="disabled" placeholder="Code \xe0 int\xe9grer dans votre site :" type="text" />
  <div class="container"><span class="copy-info">Copi\xe9 dans le presse-papier</span></div>
  Taille :<br/>
  <input class="width" type="number" value="100" >
  <select class="wunit"><option value="%">%</option><option value="px">px</option></select>
  x 
  <input class="height" type="number" value="480" >
  <select class="hunit"><option value="%">%</option><option value="px">px</option></select>
  <br/>
  <label class="nozoom ol-ext-check ol-ext-checkbox small">
    <input class="nozoom" type="checkbox"><span></span> zoom avec Ctrl + molette
  </label>
  <br/>
  <label class="ol-ext-check ol-ext-checkbox small">
    <input class="notitle" type="checkbox"><span></span> masquer le titre
  </label>
  <div class="position">
    <label class="ol-ext-check ol-ext-checkbox small">
      <input class="position" type="checkbox"><span></span> int\xe9grer la position
    </label>
    <div>
      <label>Longitude :</label><input class="lon" type="number" step=.0000001 />
      <label>Latitude :</label><input class="lat" type="number" step=.0000001 />
      <label>Zoom :</label><input class="zoom" type="number" step=.01 />
      <a class="locate article button"><i class="fi-location"></i> position courante</a>
    </div>
  </div>
  <div class="CGU">
    En int\xe9grant une carte Macarte sur votre site, vous acceptez les <a href="{URL}" target="_new">Conditions d'utilisation de Macarte</a>.
  </div>
</div>
`;p=p.replace("{URL}",c.default.cgu);var m=function(e){let t=(e=e||{}).carte,a=t&&t.getViewerUrl?t.getViewerUrl():(0,c.getViewerURL)(t);if(!a)return;/\?map=/.test(a)||(a+="?"),(0,n.default).show({className:"mc-embed-map",content:p,buttons:{cancel:"annuler"},onButton:e=>{if("copy"===e)try{navigator.clipboard.writeText(m.url.value)}catch(e){}}});let i=(0,n.default).getContentElement().querySelector("iframe");i.src=a+"&noPop";let m=(0,n.default).getInputs();m.hunit.value="px";let h=[];function f(){m.position.checked?(m.zoom.value>18&&(m.zoom.value=18),",,"===(h=[m.lon.value,m.lat.value,m.zoom.value]).join(",")&&(h=[])):h=[];let e=(0,c.getViewerURL)({view_id:t.get?t.get("id"):t.view_id||t.id,title:t.getTitle?t.getTitle():t.title||"macarte",type:t.type||t instanceof u.default?"macarte":"storymap",showTitle:!m.notitle.checked,noZoom:m.nozoom.checked,position:h});m.url.value='<iframe src="'+e+'" width="'+m.width.value+m.wunit.value+'" height="'+m.height.value+m.hunit.value+'" allow="geolocation clipboard-read; clipboard-write"></iframe>',i.src!==e&&(i.src=e),i.style.width=m.width.value+m.wunit.value,i.style.height=m.height.value+m.hunit.value}for(let e in m)m[e].addEventListener("change",f);f();let v=(0,n.default).getContentElement();(0,l.default)(v),v.querySelector(".input-placeholder").addEventListener("click",()=>{try{navigator.clipboard.writeText(m.url.value);let e=v.querySelector(".copy-info");e.className="copy-info visible",setTimeout(()=>{e.className="copy-info"},800)}catch(e){}}),m.position.addEventListener("change",()=>{m.position.checked?v.querySelector("div.position").classList.add("checked"):v.querySelector("div.position").classList.remove("checked")}),t&&(t instanceof u.default||t instanceof d.default)?("onglet"===t.get("model")&&v.querySelector("div.position").classList.add("hidden"),v.querySelector("a.locate").addEventListener("click",()=>{let e=t.getCarte?t.getCarte().getMap().getView():t.getMap().getView(),a=(0,o.toLonLat)(e.getCenter(),e.getProjection());m.lon.value=Math.round(1e7*a[0])/1e7,m.lat.value=Math.round(1e7*a[1])/1e7,m.zoom.value=Math.round(10*e.getZoom())/10,f()})):v.querySelector("a.locate").style.display="none",(0,s.default)(v.querySelector("h2"),r&&r.__esModule?r.default:r,{title:"Intégrer votre carte",className:"medium"})}}),n("hgFwk",function(t,a){e(t.exports,"showHelp",()=>c),e(t.exports,"default",()=>u);var l=i("6od7S"),n=i("kOWwI"),s=i("l956U"),r=i("iQyfo");i("4k2SX");let o=new l.default({className:"md",closeBox:!0,target:document.body});function c(e,t){t=t||{},o.show({title:t.title||"",content:(0,s.default)(e,t.mdOptions),className:"help",buttons:t.buttons||["ok"],onButton:t.onButton}),o.element.classList.remove("large"),o.element.classList.remove("medium"),o.element.classList.remove("small"),(t.className||"").split(" ").forEach(e=>{o.element.classList.add(e||"large")}),(0,s.default).renderWidget(o.element)}o.setMap(n.default),o.on("hide",()=>o.setContent("none")),o.on("show",()=>o.getContentElement().scrollTop=0);var u=function(e,t,a){a=a||"","I"===e.tagName?(e.classList.add("mc-help"),e.title=a.title||"aide..."):e=(0,r.default).create("I",{className:"mc-help",title:a.title||"aide...",parent:e}),e.addEventListener("click",e=>{e.stopPropagation(),e.preventDefault(),c(t,a)})}}),n("40xUf",function(e,t){e.exports="Grâce à l'option d'intégration, vous pouvez ajouter les cartes et les narrations **Ma carte** à un site Web ou à un blog.\r\nL'intégration des cartes se fait via une balise `<iframe>`. \r\n\r\n### Intégrer une carte\r\n* Dans la liste des options de partage, cliquez sur Intégrer.\r\n* Copiez le code HTML figurant dans la zone qui s'affiche en cliquant sur le bouton :fa-clipboard:.\r\n* Collez le code dans le code HTML de votre site Web.\r\n\r\nLa carte s'affichera conformément à la dernière mise à jour (enregistrement).\r\n\r\n### Options d'intégration\r\n\r\n#### :fa-check-square-o:fw: Taille de la fenêtre\r\nVous pouvez définir la taille de la fenêtre cartographique (largeur et hauteur).\r\n\r\n#### :fa-check-square-o:fw: Zoom molette\r\nSi votre carte doit être intégrée sur une page avec un défilement, le zoom à la molette peut empêcher le défilement correct lorsqu'on se trouve sur la carte. \r\nDans ce cas, choisissez le mode de zoom avec <kbd Ctrl> + molette, la molette seule étant réservée au défilement de la page.\r\n\r\n#### :fa-check-square-o:fw: Masquer le titre\r\nVous pouvez choisir de ne pas afficher le titre de la carte si celui-ci est déjà présent sur la page Web d'acceuil.\r\n:fa-warning:fw: Attention : la carte est responsive, c'est à dire que si la zone dans laquelle votre carte doit s'afficher est trop petite le titre sera automatiquement masqué pour laisser plus de place à la carte.\r\nNB : cette option est sans effet si le titre de la carte est masqué dans le modèle utilisé.\r\n\r\n### Position de la carte\r\n\r\nPour forcer la position de la carte, remplissez les champs longitude, latitude et zoom du formulaire.\r\nCette option n'est pas disponible pour les narrations réalisée avec le modèle onglet.\r\n"}),n("agEcb",function(e,t){function a(t){return e.exports=a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e.exports.__esModule=!0,e.exports.default=e.exports,a(t)}e.exports=a,e.exports.__esModule=!0,e.exports.default=e.exports}),i("iQyfo");var s=i("2Fada"),r=i("gXJm2"),o=i("kbFhP");i("gIJof");var c=i("fmXBE"),u=i("kO0kO"),d=i("5blsF"),p=i("4ki7m");(0,r.default).setApp("atlas","listCarte"),(0,s.default).on(["login","logout","error","disconnect"],e=>{console.log(e.type.toUpperCase()+("login"===e.type?" > "+e.user.public_name:""))}),(0,r.default).getAppElement().querySelector("select").addEventListener("change",e=>{f.setMode(e.target.value)}),(0,r.default).getAppElement().querySelector('input[type="checkbox"]').addEventListener("change",e=>{f.hasCheck(e.target.checked)}),(0,r.default).getAppElement().querySelector('input[type="search"]').addEventListener("change",e=>{f.search(e.target.value)});const m=["macarte","storymap",""];let h={};(0,r.default).getAppElement().querySelectorAll("button").forEach((e,t)=>{3===t?e.addEventListener("click",()=>{(0,d.default)(h,e=>{console.log(e),h=e})}):e.addEventListener("click",()=>{(0,u.default)({type:m[t],callback:console.log})})});const f=new c.default(s.default,{context:"profile",context:"organization",selection:!0,search:!0,permalink:!0,target:(0,r.default).getAppElement()});f.on("check",()=>{console.log(f.getChecked().length+" item(s) selected...")}),f.on("select",e=>{console.log(e)}),f.on("dblclick",e=>{console.log(e),(0,p.default)({carte:e.item})}),f.on("select:user",e=>{console.log(e.user)}),f.on("change:page",e=>{console.log(e)}),f.on("error",e=>{401===e.status&&(f.showError("Vous devez être connecté..."),(0,r.default).connect())}),f.showPage(),(0,s.default).on("login",()=>{f.showPage()}),window.list=f,window.api=s.default,window.charte=r.default,window.dialog=o.default,window.dialogOpen=u.default;