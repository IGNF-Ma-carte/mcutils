function t(t,e,s,o){Object.defineProperty(t,e,{get:s,set:o,enumerable:!0,configurable:!0})}var e=globalThis,s={},o={},l=e.parcelRequire8969;null==l&&((l=function(t){if(t in s)return s[t].exports;if(t in o){var e=o[t];delete o[t];var l={id:t,exports:{}};return s[t]=l,e.call(l.exports,l,l.exports),l.exports}var i=Error("Cannot find module '"+t+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(t,e){o[t]=e},e.parcelRequire8969=l);var i=l.register;i("fP3gd",function(e,s){t(e.exports,"default",()=>a);var o=l("iQyfo"),i=l("9LKAN"),a=class extends i.default{constructor(t){switch((t=t||{}).hidden=!1!==t.hidden,super(t),this.set("autoClose",!1!==t.autoClose),this.element=(0,o.default).create("DIV",{className:("ol-ext-popup-input "+(t.className||"")).trim(),tabindex:0,on:{keydown:(function(t){this._handleKey(t)}).bind(this)}}),t.position){case"inline":break;case"static":case"fixed":this.element.classList.add("ol-popup"),this.element.classList.add("ol-popup-fixed"),this._fixed="fixed"===t.position;break;default:this.element.classList.add("ol-popup")}var e=this.input;e.parentNode&&e.parentNode.insertBefore(this.element,e),this.element.addEventListener("click",(function(){this.isCollapsed()&&setTimeout((function(){this.collapse(!1)}).bind(this))}).bind(this)),this._elt={},this._elt.popup=(0,o.default).create("DIV",{className:"ol-popup",parent:this.element}),this._elt.popup.addEventListener("click",function(t){t.stopPropagation()});var s=!1;this._elt.popup.addEventListener("pointerdown",function(){s=!0}),this._elt.popup.addEventListener("click",function(){s=!1}),document.addEventListener("click",(function(){this.moving||s||this.collapse(!0),s=!1}).bind(this)),window.addEventListener("resize",(function(){this.collapse(!0)}).bind(this))}_handleKey(t){switch(t.key){case"Enter":case" ":case"Space":t.stopPropagation(),t.preventDefault(),this.toggle();break;case"Escape":t.stopPropagation(),t.preventDefault(),this.collapse(!0)}}collapse(t){if(t!=this.isCollapsed()&&this.dispatchEvent({type:"change:visible",visible:!this.isCollapsed()}),this.dispatchEvent({type:"collapse",visible:!t}),t)this._elt.popup.classList.remove("ol-visible");else if(this._elt.popup.classList.add("ol-visible"),this._fixed){var e=this.element.getBoundingClientRect(),s=(0,o.default).getFixedOffset(this.element);(e={bottom:e.bottom-s.top,left:e.left-s.left}).bottom+this._elt.popup.offsetHeight+s.top>document.documentElement.clientHeight?this._elt.popup.style.top=Math.max(document.documentElement.clientHeight-this._elt.popup.offsetHeight-s.top,0)+"px":this._elt.popup.style.top=e.bottom+"px",e.left+this._elt.popup.offsetWidth+s.left>document.documentElement.clientWidth?this._elt.popup.style.left=Math.max(document.documentElement.clientWidth-this._elt.popup.offsetWidth-s.left,0)+"px":this._elt.popup.style.left=e.left+"px"}}isCollapsed(){return!this._elt.popup.classList.contains("ol-visible")}toggle(){this.collapse(!this.isCollapsed())}}}),i("a10XN",function(e,s){t(e.exports,"default",()=>c);var o=l("iQyfo"),i=l("fP3gd"),a=l("31ZqB"),r=l("DW21e"),n=l("lqNjm"),h=class extends i.default{constructor(t){(t=t||{}).hidden=!1!==t.hidden,t.className=("ol-ext-colorpicker "+(t.hastab?"ol-tab ":"")+(t.className||"")).trim(),super(t),this.input.disabled=!0,!1===t.opacity&&this.element.classList.add("ol-nopacity"),this._cursor={};var e,s=this._hsv={};this._elt.vignet=(0,o.default).create("DIV",{className:"ol-vignet",parent:this.element});var l=(0,o.default).create("DIV",{className:"ol-tabbar",parent:this._elt.popup});(0,o.default).create("DIV",{className:"ol-tab",html:t.paletteLabel||"palette",tabindex:0,on:{keydown:(function(t){this._handlePikerKey(t,"remove")}).bind(this),focus:(function(){this.element.classList.remove("ol-picker-tab")}).bind(this)},parent:l}),(0,o.default).create("DIV",{className:"ol-tab",html:t.pickerLabel||"picker",tabindex:0,on:{keydown:(function(t){this._handlePikerKey(t,"add")}).bind(this),focus:(function(){this.element.classList.add("ol-picker-tab")}).bind(this)},parent:l});var i=(0,o.default).create("DIV",{className:"ol-container",parent:this._elt.popup}),c=this._elt.picker=(0,o.default).create("DIV",{className:"ol-picker",parent:i}),p=this._cursor.picker=(0,o.default).create("DIV",{className:"ol-cursor",parent:c});this._listenDrag(c,(function(t){var e=Math.max(0,Math.min(t.offsetX/c.clientWidth,1)),o=Math.max(0,Math.min(t.offsetY/c.clientHeight,1));p.style.left=Math.round(100*e)+"%",p.style.top=Math.round(100*o)+"%",s.s=100*e,s.v=100-100*o,this.setColor()}).bind(this));var d=(0,o.default).create("DIV",{className:"ol-slider",parent:i});this._elt.slider=(0,o.default).create("DIV",{parent:d});var u=this._cursor.slide=(0,o.default).create("DIV",{className:"ol-cursor",parent:d});this._listenDrag(d,(function(t){var e=Math.max(0,Math.min(t.offsetX/d.clientWidth,1));s.a=100*e,u.style.left=Math.round(100*e)+"%",this.setColor()}).bind(this));var f=(0,o.default).create("DIV",{className:"ol-tint",parent:i}),m=this._cursor.tint=(0,o.default).create("DIV",{className:"ol-cursor",parent:f});this._listenDrag(f,(function(t){var e=Math.max(0,Math.min(t.offsetY/f.clientHeight,1));s.h=360*e,m.style.top=Math.round(100*e)+"%",this.setColor()}).bind(this)),(0,o.default).create("DIV",{className:"ol-clear",click:(function(){this.setColor([0,0,0,0])}).bind(this),parent:i});var _=(0,o.default).create("DIV",{className:"ol-rgb",parent:i}),v=(function(){var t=Math.max(0,Math.min(255,parseInt(this._elt.r.value))),e=Math.max(0,Math.min(255,parseInt(this._elt.g.value))),s=Math.max(0,Math.min(255,parseInt(this._elt.b.value))),o=Math.max(0,Math.min(1,parseFloat(this._elt.a.value)));this.setColor([t,e,s,o])}).bind(this);for(this._elt.r=(0,o.default).create("INPUT",{type:"number",lang:"en-GB",change:v,min:0,max:255,parent:_}),this._elt.g=(0,o.default).create("INPUT",{type:"number",lang:"en-GB",change:v,min:0,max:255,parent:_}),this._elt.b=(0,o.default).create("INPUT",{type:"number",lang:"en-GB",change:v,min:0,max:255,parent:_}),this._elt.a=(0,o.default).create("INPUT",{type:"number",lang:"en-GB",change:v,min:0,max:1,step:.1,parent:_}),this._elt.txtColor=(0,o.default).create("INPUT",{type:"text",className:"ol-txt-color",change:(function(){var t;this._elt.txtColor.classList.remove("ol-error");try{t=(0,n.asArray)(this._elt.txtColor.value)}catch(t){this._elt.txtColor.classList.add("ol-error")}t&&this.setColor(t)}).bind(this),parent:i}),(0,o.default).create("BUTTON",{html:"OK",click:(function(){this._addCustomColor(this.getColor()),this.collapse(!0)}).bind(this),on:{keydown:(function(t){"Tab"===t.key&&this.collapse(!0)}).bind(this)},parent:i}),this._paletteColor={},this._elt.palette=(0,o.default).create("DIV",{className:"ol-palette",parent:this._elt.popup}),e=0;e<8;e++){var C=Math.round(255-255*e/7);this.addPaletteColor([C,C,C],C)}var g=["#f00","#f90","#ff0","#0f0","#0ff","#48e","#00f","#f0f"];for(g.forEach((function(t){this.addPaletteColor(t,(0,r.toHexa)((0,n.asArray)(t)))}).bind(this)),e=0;e<5;e++)g.forEach((function(t){t=[(t=(0,r.toHSV)((0,n.asArray)(t)))[0],e/4*80+20,100-e/4*60],t=(0,r.fromHSV)(t,1),this.addPaletteColor(t,(0,r.toHexa)(t))}).bind(this));(0,o.default).create("HR",{parent:this._elt.palette}),h.customColorList||(h.customColorList=new a.default,JSON.parse(localStorage.getItem("ol-ext@colorpicker")||"[]").forEach(function(t){h.customColorList.push(t)}),h.customColorList.on(["add","remove"],function(){localStorage.setItem("ol-ext@colorpicker",JSON.stringify(h.customColorList.getArray()))})),h.customColorList.on("add",(function(t){this.addPaletteColor(this.getColorFromID(t.element))}).bind(this)),h.customColorList.on("remove",(function(t){this._paletteColor[t.element]&&this._paletteColor[t.element].element.remove(),delete this._paletteColor[t.element]}).bind(this)),h.customColorList.forEach((function(t){this._addCustomColor(this.getColorFromID(t))}).bind(this)),this.setColor(t.color||[0,0,0,0]),this._currentColor=this.getColorID(this.getColor()),this.on("color",(function(){this._addCustomColor(this.getColor()),this._currentColor=this.getColorID(this.getColor()),this.setColor()}).bind(this)),this.on("collapse",(function(t){if(t.visible)this._currentColor=this.getColorID(this.getColor());else{var e=this.getColor();this._currentColor!==this.getColorID(e)&&this.dispatchEvent({type:"color",color:e})}}).bind(this))}_handlePikerKey(t,e){if("Tab"!==t.key)switch(t.stopPropagation(),t.preventDefault(),t.key){case"Enter":case" ":case"Space":this.element.classList[e]("ol-picker-tab");break;case"Escape":this.collapse(!0)}}addPaletteColor(t,e,s){try{t=(0,n.asArray)(t)}catch(t){return}var l=this.getColorID(t);!this._paletteColor[l]&&t[3]&&(this._paletteColor[l]={color:t,element:(0,o.default).create("DIV",{title:e||"",className:t[3]<1?"ol-alpha":"",style:{color:"rgb("+t.join(",")+")"},click:(function(){this.setColor(t),this.get("autoClose")&&this.collapse(!0)}).bind(this),parent:this._elt.palette})}),s&&this._selectPalette(t)}showTab(t){"palette"===t?this.element.classList.remove("ol-picker-tab"):this.element.classList.add("ol-picker-tab")}getTab(){return this.element.classList.contains("ol-picker-tab")?"picker":"palette"}_selectPalette(t){var e=this.getColorID(t);Object.keys(this._paletteColor).forEach((function(t){this._paletteColor[t].element.classList.remove("ol-select")}).bind(this)),this._paletteColor[e]&&this._paletteColor[e].element.classList.add("ol-select")}setColor(t){var e=this._hsv;if(t){t=(0,n.asArray)(t);var s=(0,r.toHSV)(t);e.h=s[0],e.s=s[1],e.v=s[2],s.length>3?e.a=100*s[3]:e.a=100,this._cursor.picker.style.left=e.s+"%",this._cursor.picker.style.top=100-e.v+"%",this._cursor.tint.style.top=e.h/360*100+"%",this._cursor.slide.style.left=e.a+"%",this.isCollapsed()&&this.dispatchEvent({type:"color",color:t})}else e.a=Math.round(e.a),t=this.getColor();var o="rgba("+t.join(", ")+")";this._elt.picker.style.color="hsl("+e.h+", 100%, 50%)",this._elt.slider.style.backgroundImage="linear-gradient(45deg, transparent, rgba("+this.getColor(!1).join(",")+"))",this._elt.vignet.style.color=o,this._elt.r.value=t[0],this._elt.g.value=t[1],this._elt.b.value=t[2],this._elt.a.value=t[3],this._elt.txtColor.classList.remove("ol-error"),1===t[3]?this._elt.txtColor.value=(0,r.toHexa)(t):this._elt.txtColor.value=o,this._selectPalette(t),this.input.value!==o&&(this.input.value=o,this.input.dispatchEvent(new Event("change")))}getColor(t){return(0,r.fromHSV)([this._hsv.h,this._hsv.s,this._hsv.v,!1!==t?this._hsv.a/100:1],1)}_addCustomColor(t){var e=this.getColorID(t);!this._paletteColor[e]&&t[3]&&(0>h.customColorList.getArray().indexOf(e)&&(h.customColorList.push(e),h.customColorList.getLength()>24&&h.customColorList.removeAt(0)),this.addPaletteColor(t))}clearCustomColor(){h.customColorList.clear()}getColorID(t){return void 0===(t=(0,n.asArray)(t))[3]&&(t[3]=1),t.join("-")}getColorFromID(t){var e=t.split("-");return[parseFloat(e[0]),parseFloat(e[1]),parseFloat(e[2]),parseFloat(e[3])]}};h.customColorList=null;var c=h});