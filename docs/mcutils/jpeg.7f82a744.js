function e(e,t,r,n){Object.defineProperty(e,t,{get:r,set:n,enumerable:!0,configurable:!0})}var t=globalThis.parcelRequire8969,r=t.register;r("740cf",function(r,n){e(r.exports,"default",()=>i);var l=t("dJzRF");let s=new Int32Array([0,1,8,16,9,2,3,10,17,24,32,25,18,11,4,5,12,19,26,33,40,48,41,34,27,20,13,6,7,14,21,28,35,42,49,56,57,50,43,36,29,22,15,23,30,37,44,51,58,59,52,45,38,31,39,46,53,60,61,54,47,55,62,63]);function o(e,t){let r,n=0,l=[],s=16;for(;s>0&&!e[s-1];)--s;l.push({children:[],index:0});let o=l[0];for(let a=0;a<s;a++){for(let s=0;s<e[a];s++){for((o=l.pop()).children[o.index]=t[n];o.index>0;)o=l.pop();for(o.index++,l.push(o);l.length<=a;)l.push(r={children:[],index:0}),o.children[o.index]=r.children,o=r;n++}a+1<s&&(l.push(r={children:[],index:0}),o.children[o.index]=r.children,o=r)}return l[0].children}class a{constructor(){this.jfif=null,this.adobe=null,this.quantizationTables=[],this.huffmanTablesAC=[],this.huffmanTablesDC=[],this.resetFrames()}resetFrames(){this.frames=[]}parse(e){let t=0;function r(){let r=e[t]<<8|e[t+1];return t+=2,r}let n=r();if(65496!==n)throw Error("SOI not found");for(n=r();65497!==n;){switch(n){case 65280:break;case 65504:case 65505:case 65506:case 65507:case 65508:case 65509:case 65510:case 65511:case 65512:case 65513:case 65514:case 65515:case 65516:case 65517:case 65518:case 65519:case 65534:{let l=function(){let n=r(),l=e.subarray(t,t+n-2);return t+=l.length,l}();65504===n&&74===l[0]&&70===l[1]&&73===l[2]&&70===l[3]&&0===l[4]&&(this.jfif={version:{major:l[5],minor:l[6]},densityUnits:l[7],xDensity:l[8]<<8|l[9],yDensity:l[10]<<8|l[11],thumbWidth:l[12],thumbHeight:l[13],thumbData:l.subarray(14,14+3*l[12]*l[13])}),65518===n&&65===l[0]&&100===l[1]&&111===l[2]&&98===l[3]&&101===l[4]&&0===l[5]&&(this.adobe={version:l[6],flags0:l[7]<<8|l[8],flags1:l[9]<<8|l[10],transformCode:l[11]});break}case 65499:{let n=r()+t-2;for(;t<n;){let n=e[t++],l=new Int32Array(64);if(n>>4==0)for(let r=0;r<64;r++)l[s[r]]=e[t++];else if(n>>4==1)for(let e=0;e<64;e++)l[s[e]]=r();else throw Error("DQT: invalid table spec");this.quantizationTables[15&n]=l}break}case 65472:case 65473:case 65474:{let l;r();let s={extended:65473===n,progressive:65474===n,precision:e[t++],scanLines:r(),samplesPerLine:r(),components:{},componentsOrder:[]},o=e[t++];for(let r=0;r<o;r++){l=e[t];let r=e[t+1]>>4,n=15&e[t+1],o=e[t+2];s.componentsOrder.push(l),s.components[l]={h:r,v:n,quantizationIdx:o},t+=3}(function(e){let t,r,n=0,l=0;for(r in e.components)e.components.hasOwnProperty(r)&&(n<(t=e.components[r]).h&&(n=t.h),l<t.v&&(l=t.v));let s=Math.ceil(e.samplesPerLine/8/n),o=Math.ceil(e.scanLines/8/l);for(r in e.components)if(e.components.hasOwnProperty(r)){t=e.components[r];let a=Math.ceil(Math.ceil(e.samplesPerLine/8)*t.h/n),i=Math.ceil(Math.ceil(e.scanLines/8)*t.v/l),f=s*t.h,c=o*t.v,h=[];for(let e=0;e<c;e++){let e=[];for(let t=0;t<f;t++)e.push(new Int32Array(64));h.push(e)}t.blocksPerLine=a,t.blocksPerColumn=i,t.blocks=h}e.maxH=n,e.maxV=l,e.mcusPerLine=s,e.mcusPerColumn=o})(s),this.frames.push(s);break}case 65476:{let n=r();for(let r=2;r<n;){let n=e[t++],l=new Uint8Array(16),s=0;for(let r=0;r<16;r++,t++)l[r]=e[t],s+=l[r];let a=new Uint8Array(s);for(let r=0;r<s;r++,t++)a[r]=e[t];r+=17+s,n>>4==0?this.huffmanTablesDC[15&n]=o(l,a):this.huffmanTablesAC[15&n]=o(l,a)}break}case 65501:r(),this.resetInterval=r();break;case 65498:{r();let n=e[t++],l=[],o=this.frames[0];for(let r=0;r<n;r++){let r=o.components[e[t++]],n=e[t++];r.huffmanTableDC=this.huffmanTablesDC[n>>4],r.huffmanTableAC=this.huffmanTablesAC[15&n],l.push(r)}let a=e[t++],i=e[t++],f=e[t++],c=function(e,t,r,n,l,o,a,i,f){let c,h,u,d,m,p,b,w,k;let{mcusPerLine:g,progressive:P}=r,y=t,T=0,x=0;function A(){if(x>0)return x--,T>>x&1;if(255===(T=e[y++])){let t=e[y++];if(t)throw Error(`unexpected marker: ${(T<<8|t).toString(16)}`)}return x=7,T>>>7}function v(e){let t,r=e;for(;null!==(t=A());){if("number"==typeof(r=r[t]))return r;if("object"!=typeof r)throw Error("invalid huffman sequence")}return null}function C(e){let t=e,r=0;for(;t>0;){let e=A();if(null===e)return;r=r<<1|e,--t}return r}function L(e){let t=C(e);return t>=1<<e-1?t:t+(-1<<e)+1}let E=0,I=0,z=n.length;b=P?0===o?0===i?function(e,t){let r=v(e.huffmanTableDC),n=0===r?0:L(r)<<f;e.pred+=n,t[0]=e.pred}:function(e,t){t[0]|=A()<<f}:0===i?function(e,t){if(E>0){E--;return}let r=o;for(;r<=a;){let n=v(e.huffmanTableAC),l=15&n,o=n>>4;if(0===l){if(o<15){E=C(o)+(1<<o)-1;break}r+=16}else t[s[r+=o]]=L(l)*(1<<f),r++}}:function(e,t){let r=o,n=0;for(;r<=a;){let l=s[r],o=t[l]<0?-1:1;switch(I){case 0:{let t=v(e.huffmanTableAC),r=15&t;if(n=t>>4,0===r)n<15?(E=C(n)+(1<<n),I=4):(n=16,I=1);else{if(1!==r)throw Error("invalid ACn encoding");c=L(r),I=n?2:3}continue}case 1:case 2:t[l]?t[l]+=(A()<<f)*o:0==--n&&(I=2===I?3:0);break;case 3:t[l]?t[l]+=(A()<<f)*o:(t[l]=c<<f,I=0);break;case 4:t[l]&&(t[l]+=(A()<<f)*o)}r++}4===I&&0==--E&&(I=0)}:function(e,t){let r=v(e.huffmanTableDC),n=0===r?0:L(r);e.pred+=n,t[0]=e.pred;let l=1;for(;l<64;){let r=v(e.huffmanTableAC),n=15&r,o=r>>4;if(0===n){if(o<15)break;l+=16}else t[s[l+=o]]=L(n),l++}};let U=0;k=1===z?n[0].blocksPerLine*n[0].blocksPerColumn:g*r.mcusPerColumn;let q=l||k;for(;U<k;){for(u=0;u<z;u++)n[u].pred=0;if(E=0,1===z)for(p=0,h=n[0];p<q;p++)(function(e,t,r){let n=r/e.blocksPerLine|0,l=r%e.blocksPerLine;t(e,e.blocks[n][l])})(h,b,U),U++;else for(p=0;p<q;p++){for(u=0;u<z;u++){let{h:e,v:t}=h=n[u];for(d=0;d<t;d++)for(m=0;m<e;m++)!function(e,t,r,n,l){let s=(r/g|0)*e.v+n,o=r%g*e.h+l;t(e,e.blocks[s][o])}(h,b,U,d,m)}if(++U===k)break}if(x=0,(w=e[y]<<8|e[y+1])<65280)throw Error("marker was not found");if(w>=65488&&w<=65495)y+=2;else break}return y-t}(e,t,o,l,this.resetInterval,a,i,f>>4,15&f);t+=c;break}case 65535:255!==e[t]&&t--;break;default:if(255===e[t-3]&&e[t-2]>=192&&e[t-2]<=254){t-=3;break}throw Error(`unknown JPEG marker ${n.toString(16)}`)}n=r()}}getResult(){let{frames:e}=this;if(0===this.frames.length)throw Error("no frames were decoded");this.frames.length>1&&console.warn("more than one frame is not supported");for(let e=0;e<this.frames.length;e++){let t=this.frames[e].components;for(let e of Object.keys(t))t[e].quantizationTable=this.quantizationTables[t[e].quantizationIdx],delete t[e].quantizationIdx}let t=e[0],{components:r,componentsOrder:n}=t,l=[],s=t.samplesPerLine,o=t.scanLines;for(let e=0;e<n.length;e++){let s=r[n[e]];l.push({lines:function(e,t){let r=[],{blocksPerLine:n,blocksPerColumn:l}=t,s=n<<3,o=new Int32Array(64),a=new Uint8Array(64);for(let e=0;e<l;e++){let l=e<<3;for(let e=0;e<8;e++)r.push(new Uint8Array(s));for(let s=0;s<n;s++){!function(e,r,n){let l,s,o,a,i,f,c,h,u,d;let m=t.quantizationTable;for(d=0;d<64;d++)n[d]=e[d]*m[d];for(d=0;d<8;++d){let e=8*d;if(0===n[1+e]&&0===n[2+e]&&0===n[3+e]&&0===n[4+e]&&0===n[5+e]&&0===n[6+e]&&0===n[7+e]){u=5793*n[0+e]+512>>10,n[0+e]=u,n[1+e]=u,n[2+e]=u,n[3+e]=u,n[4+e]=u,n[5+e]=u,n[6+e]=u,n[7+e]=u;continue}l=5793*n[0+e]+128>>8,s=5793*n[4+e]+128>>8,o=n[2+e],a=n[6+e],i=2896*(n[1+e]-n[7+e])+128>>8,h=2896*(n[1+e]+n[7+e])+128>>8,f=n[3+e]<<4,c=n[5+e]<<4,u=l-s+1>>1,l=l+s+1>>1,s=u,u=3784*o+1567*a+128>>8,o=1567*o-3784*a+128>>8,a=u,u=i-c+1>>1,i=i+c+1>>1,c=u,u=h+f+1>>1,f=h-f+1>>1,h=u,u=l-a+1>>1,l=l+a+1>>1,a=u,u=s-o+1>>1,s=s+o+1>>1,o=u,u=2276*i+3406*h+2048>>12,i=3406*i-2276*h+2048>>12,h=u,u=799*f+4017*c+2048>>12,f=4017*f-799*c+2048>>12,c=u,n[0+e]=l+h,n[7+e]=l-h,n[1+e]=s+c,n[6+e]=s-c,n[2+e]=o+f,n[5+e]=o-f,n[3+e]=a+i,n[4+e]=a-i}for(d=0;d<8;++d){let e=d;if(0===n[8+e]&&0===n[16+e]&&0===n[24+e]&&0===n[32+e]&&0===n[40+e]&&0===n[48+e]&&0===n[56+e]){u=5793*n[d+0]+8192>>14,n[0+e]=u,n[8+e]=u,n[16+e]=u,n[24+e]=u,n[32+e]=u,n[40+e]=u,n[48+e]=u,n[56+e]=u;continue}l=5793*n[0+e]+2048>>12,s=5793*n[32+e]+2048>>12,o=n[16+e],a=n[48+e],i=2896*(n[8+e]-n[56+e])+2048>>12,h=2896*(n[8+e]+n[56+e])+2048>>12,f=n[24+e],c=n[40+e],u=l-s+1>>1,l=l+s+1>>1,s=u,u=3784*o+1567*a+2048>>12,o=1567*o-3784*a+2048>>12,a=u,u=i-c+1>>1,i=i+c+1>>1,c=u,u=h+f+1>>1,f=h-f+1>>1,h=u,u=l-a+1>>1,l=l+a+1>>1,a=u,u=s-o+1>>1,s=s+o+1>>1,o=u,u=2276*i+3406*h+2048>>12,i=3406*i-2276*h+2048>>12,h=u,u=799*f+4017*c+2048>>12,f=4017*f-799*c+2048>>12,c=u,n[0+e]=l+h,n[56+e]=l-h,n[8+e]=s+c,n[48+e]=s-c,n[16+e]=o+f,n[40+e]=o-f,n[24+e]=a+i,n[32+e]=a-i}for(d=0;d<64;++d){let e=128+(n[d]+8>>4);e<0?r[d]=0:e>255?r[d]=255:r[d]=e}}(t.blocks[e][s],a,o);let n=0,i=s<<3;for(let e=0;e<8;e++){let t=r[l+e];for(let e=0;e<8;e++)t[i+e]=a[n++]}}}return r}(0,s),scaleX:s.h/t.maxH,scaleY:s.v/t.maxV})}let a=new Uint8Array(s*o*l.length),i=0;for(let e=0;e<o;++e)for(let t=0;t<s;++t)for(let r=0;r<l.length;++r){let n=l[r];a[i]=n.lines[0|e*n.scaleY][0|t*n.scaleX],++i}return a}}class i extends l.default{constructor(e){super(),this.reader=new a,e.JPEGTables&&this.reader.parse(e.JPEGTables)}decodeBlock(e){return this.reader.resetFrames(),this.reader.parse(new Uint8Array(e)),this.reader.getResult().buffer}}}),r("dJzRF",function(r,n){e(r.exports,"default",()=>s);var l=t("fPkiP");class s{async decode(e,t){let r=await this.decodeBlock(t),n=e.Predictor||1;if(1!==n){let t=!e.StripOffsets,s=t?e.TileWidth:e.ImageWidth,o=t?e.TileLength:e.RowsPerStrip||e.ImageLength;return(0,l.applyPredictor)(r,n,s,o,e.BitsPerSample,e.PlanarConfiguration)}return r}}}),r("fPkiP",function(t,r){e(t.exports,"applyPredictor",()=>n);function n(e,t,r,n,l,s){if(!t||1===t)return e;for(let e=0;e<l.length;++e){if(l[e]%8!=0)throw Error("When decoding with predictor, only multiple of 8 bits are supported.");if(l[e]!==l[0])throw Error("When decoding with predictor, all samples must have the same size.")}let o=l[0]/8,a=2===s?1:l.length;for(let s=0;s<n;++s){let n;if(s*a*r*o>=e.byteLength)break;if(2===t){switch(l[0]){case 8:n=new Uint8Array(e,s*a*r*o,a*r*o);break;case 16:n=new Uint16Array(e,s*a*r*o,a*r*o/2);break;case 32:n=new Uint32Array(e,s*a*r*o,a*r*o/4);break;default:throw Error(`Predictor 2 not allowed with ${l[0]} bits per sample.`)}!function(e,t){let r=e.length-t,n=0;do{for(let r=t;r>0;r--)e[n+t]+=e[n],n++;r-=t}while(r>0)}(n,a,o)}else 3===t&&function(e,t,r){let n=0,l=e.length,s=l/r;for(;l>t;){for(let r=t;r>0;--r)e[n+t]+=e[n],++n;l-=t}let o=e.slice();for(let t=0;t<s;++t)for(let n=0;n<r;++n)e[r*t+n]=o[(r-n-1)*s+t]}(n=new Uint8Array(e,s*a*r*o,a*r*o),a,o)}return e}});